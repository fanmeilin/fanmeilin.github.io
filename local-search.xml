<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>CodeTop_Microsoft146 LRUç¼“å­˜</title>
    <link href="/2022/03/31/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft146/"/>
    <url>/2022/03/31/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft146/</url>
    
    <content type="html"><![CDATA[<blockquote><p>LRUç¼“å­˜ <a href="https://leetcode-cn.com/problems/lru-cache/">https://leetcode-cn.com/problems/lru-cache/</a></p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³  LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚<br>å®ç° LRUCache ç±»ï¼š<br>LRUCache(int capacity) ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ capacity åˆå§‹åŒ– LRU ç¼“å­˜<br>int get(int key) å¦‚æœå…³é”®å­— key å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚<br>void put(int key, int value) å¦‚æœå…³é”®å­— key å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ value ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ capacity ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚<br>å‡½æ•° get å’Œ put å¿…é¡»ä»¥ O(1) çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight haxe"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs haxe">è¾“å…¥<br>[<span class="hljs-string">"LRUCache"</span>, <span class="hljs-string">"put"</span>, <span class="hljs-string">"put"</span>, <span class="hljs-string">"get"</span>, <span class="hljs-string">"put"</span>, <span class="hljs-string">"get"</span>, <span class="hljs-string">"put"</span>, <span class="hljs-string">"get"</span>, <span class="hljs-string">"get"</span>, <span class="hljs-string">"get"</span>]<br>[[<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>]]<br>è¾“å‡º<br>[<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">-1</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br><br>è§£é‡Š<br>LRUCache lRUCache = <span class="hljs-keyword">new</span> <span class="hljs-type">LRUCache</span>(<span class="hljs-number">2</span>);<br>lRUCache.put(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// ç¼“å­˜æ˜¯ {1=1}</span><br>lRUCache.put(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// ç¼“å­˜æ˜¯ {1=1, 2=2}</span><br>lRUCache.<span class="hljs-keyword">get</span>(<span class="hljs-number">1</span>);    <span class="hljs-comment">// è¿”å› 1</span><br>lRUCache.put(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}</span><br>lRUCache.<span class="hljs-keyword">get</span>(<span class="hljs-number">2</span>);    <span class="hljs-comment">// è¿”å› -1 (æœªæ‰¾åˆ°)</span><br>lRUCache.put(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}</span><br>lRUCache.<span class="hljs-keyword">get</span>(<span class="hljs-number">1</span>);    <span class="hljs-comment">// è¿”å› -1 (æœªæ‰¾åˆ°)</span><br>lRUCache.<span class="hljs-keyword">get</span>(<span class="hljs-number">3</span>);    <span class="hljs-comment">// è¿”å› 3</span><br>lRUCache.<span class="hljs-keyword">get</span>(<span class="hljs-number">4</span>);    <span class="hljs-comment">// è¿”å› 4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= capacity &lt;= 3000</li><li>0 &lt;= key &lt;= 10000</li><li>0 &lt;= value &lt;= 105</li><li>æœ€å¤šè°ƒç”¨ 2 * 105 æ¬¡ get å’Œ put</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨</p><p><a href="https://leetcode-cn.com/problems/lru-cache/solution/lruhuan-cun-ji-zhi-by-leetcode-solution/">https://leetcode-cn.com/problems/lru-cache/solution/lruhuan-cun-ji-zhi-by-leetcode-solution/</a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,value=<span class="hljs-literal">None</span>,key=<span class="hljs-literal">None</span></span>):</span> <span class="hljs-comment">#è¿˜è¦è®°å½•key</span><br>        self.value = value<br>        self.key = key<br>        self.leftnode = <span class="hljs-literal">None</span><br>        self.rightnode = <span class="hljs-literal">None</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LRUCache</span>:</span><br><span class="hljs-comment">## ä½¿ç”¨åŒé“¾è¡¨å’Œå“ˆå¸Œè¡¨ è¿™æ ·å¯ä»¥ä¿è¯O(1)çš„æ—¶é—´å¤æ‚åº¦ æ–°å»ºhead tailå¤´å°¾èŠ‚ç‚¹ä¾¿äºå¯¹èŠ‚ç‚¹æ“ä½œæ˜¯ä¸€è‡´çš„ï¼Œå“ˆå¸Œè¡¨æ˜¯keyæ˜¯é”® valueå°¾åŒé“¾è¡¨ä¸­çš„node</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, capacity: <span class="hljs-built_in">int</span></span>):</span><br>        self.capacity = capacity<br>        self.hashmap = {}<br>        self.head = ListNode()<br>        self.tail = ListNode()<br>        self.head.rightnode = self.tail<br>        self.tail.leftnode = self.head<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move2tail</span>(<span class="hljs-params">self,key</span>):</span><br>        node = self.hashmap[key] <span class="hljs-comment">#æŸ¥æ‰¾ç›®æ ‡èŠ‚ç‚¹</span><br>        <span class="hljs-comment">#æ›´æ–°ç›®æ ‡èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹çš„è¿æ¥</span><br>        node.leftnode.rightnode = node.rightnode<br>        node.rightnode.leftnode = node.leftnode<br><br>        <span class="hljs-comment">#ç§»åŠ¨åˆ°å°¾éƒ¨</span><br>        self.tail.leftnode.rightnode = node<br>        node.leftnode = self.tail.leftnode<br>        node.rightnode = self.tail<br>        self.tail.leftnode = node<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        res = self.hashmap.get(key,-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> res==-<span class="hljs-number">1</span>:<span class="hljs-keyword">return</span> -<span class="hljs-number">1</span> <span class="hljs-comment">#ä¸å­˜åœ¨æ—¶</span><br>        self.move2tail(key) <span class="hljs-comment">#æŸ¥æ‰¾åˆ°å°±ç§»åŠ¨åˆ°å°¾éƒ¨</span><br>        <span class="hljs-keyword">return</span> res.value<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">put</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span>, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        res = self.hashmap.get(key,-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> res==-<span class="hljs-number">1</span>: <span class="hljs-comment">#ä¸å­˜åœ¨</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.hashmap) == self.capacity:<br>                <span class="hljs-comment">#å»é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br>                self.hashmap.pop(self.head.rightnode.key) <span class="hljs-comment">#å‰”é™¤key  </span><br>                <span class="hljs-comment">#å…ˆå¤„ç†hashmapå†ä¿®æ”¹é“¾è¡¨</span><br>                self.head.rightnode = self.head.rightnode.rightnode <br>                self.head.rightnode.leftnode = self.head  <br>            node = ListNode(value,key)<br>            self.hashmap[key] = node<br><br>            self.tail.leftnode.rightnode = node<br>            node.leftnode = self.tail.leftnode<br>            self.tail.leftnode = node<br>            node.rightnode = self.tail<br>        <span class="hljs-keyword">else</span>: <span class="hljs-comment">#å­˜åœ¨ ç§»åˆ°æœ«å°¾</span><br>            self.hashmap[key].value = value <span class="hljs-comment">#æ³¨æ„æ›´æ–°ä»–çš„valueè€Œä¸æ˜¯node</span><br>            self.move2tail(key)<br><br><br><span class="hljs-comment"># Your LRUCache object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = LRUCache(capacity)</span><br><span class="hljs-comment"># param_1 = obj.get(key)</span><br><span class="hljs-comment"># obj.put(key,value)</span><br></code></pre></td></tr></tbody></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼šå¯¹äº put å’Œ get éƒ½æ˜¯ O(1)ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(capacity)ï¼Œå› ä¸ºå“ˆå¸Œè¡¨å’ŒåŒå‘é“¾è¡¨æœ€å¤šå­˜å‚¨ capacity+1 ä¸ªå…ƒç´ ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ•°æ®ç»“æ„ç»„åˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ•°æ®ç»“æ„ç»„åˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Momentum Contrast for Unsupervised Visual Representation Learning</title>
    <link href="/2022/03/30/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%8F%E5%85%B8%E8%AE%BA%E6%96%87/moco/"/>
    <url>/2022/03/30/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%8F%E5%85%B8%E8%AE%BA%E6%96%87/moco/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç¬”è®°è®°å½•äºpdfä¸­ï¼Œæ‰€ä»¥å°±ç›´æ¥æ”¾pdfåœ¨æ­¤å¤„~ ğŸ˜‰</p></blockquote><h3 id="å­¦ä¹ è§†é¢‘é“¾æ¥">å­¦ä¹ è§†é¢‘é“¾æ¥</h3><p><a href="https://www.bilibili.com/video/BV1C3411s7t9?spm_id_from=333.880.my_history.page.click">https://www.bilibili.com/video/BV1C3411s7t9?spm_id_from=333.880.my_history.page.click</a></p><h3 id="pdfé“¾æ¥">pdfé“¾æ¥</h3><p><a href="https://paper.mulindya.com/moco.pdf">https://paper.mulindya.com/moco.pdf</a></p><h3 id="è®ºæ–‡å­¦ä¹ é“¾æ¥">è®ºæ–‡å­¦ä¹ é“¾æ¥</h3><p>æ›´å¤šè®ºæ–‡è¯·è§ï¼š<a href="https://github.com/mli/paper-reading">https://github.com/mli/paper-reading</a></p><h3 id="è®ºæ–‡pdf">è®ºæ–‡pdf</h3><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/moco.pdff" width="100%" height="600"></iframe>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>ç»å…¸è®ºæ–‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft236 äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</title>
    <link href="/2022/03/29/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft236/"/>
    <url>/2022/03/29/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft236/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</p><p>å¯ä»¥å¯¹æ¯”<a href="https://www.mulindya.com/2022/02/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer68-1/">äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/Aleetcode/CodeTop236-1.png" alt=""></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">8</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">7</span>,<span class="hljs-number">4</span>], <span class="hljs-attr">p</span> = <span class="hljs-number">5</span>, <span class="hljs-attr">q</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šèŠ‚ç‚¹ <span class="hljs-number">5</span> å’ŒèŠ‚ç‚¹ <span class="hljs-number">1</span> çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ <span class="hljs-number">3</span> ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://picture.mulindya.com/Aleetcode/CodeTop236-2.png" alt=""></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">8</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">7</span>,<span class="hljs-number">4</span>], <span class="hljs-attr">p</span> = <span class="hljs-number">5</span>, <span class="hljs-attr">q</span> = <span class="hljs-number">4</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br>è§£é‡Šï¼šèŠ‚ç‚¹ <span class="hljs-number">5</span> å’ŒèŠ‚ç‚¹ <span class="hljs-number">4</span> çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ <span class="hljs-number">5</span> ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹3ï¼š">ç¤ºä¾‹3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-attr">p</span> = <span class="hljs-number">1</span>, <span class="hljs-attr">q</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [2, 105] å†…ã€‚</li><li>-109 &lt;= Node.val &lt;= 109</li><li>æ‰€æœ‰ Node.val äº’ä¸ç›¸åŒ ã€‚</li><li>p != q</li><li>p å’Œ q å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«åœ¨æ ¹èŠ‚ç‚¹rootçš„å·¦å³å­æ ‘ä¸­ï¼Œåˆ™è¯¥èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚å…ˆåºéå†çš„æ€æƒ³æ¥é€’å½’ï¼š</p><ul><li><p>è¯¥èŠ‚ç‚¹ä¸ºpæˆ–è€…qå°±è¿”å›è¯¥èŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹æœ¬èº«ä¸ºå…¶ä¸­ä¸€ä¸ªï¼‰ï¼Œå¦‚æœä¸ºç©ºèŠ‚ç‚¹ä¹Ÿè¿”å›ç©ºã€‚</p></li><li><p>å¦‚æœä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå°±æŸ¥æ‰¾å·¦å³å­æ ‘æ˜¯å¦å­˜åœ¨æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><ul><li><p>å·¦å­æ ‘è¿”å›ä¸ºç©ºå°±è¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘ä¸­</p></li><li><p>å³å­æ ‘è¿”å›ä¸ºç©ºå°±è¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘ä¸­</p></li><li><p>å·¦å³å­æ ‘éƒ½ä¸ä¸ºç©ºè¯´æ˜å·¦å³å­æ ‘ä¸­ä¸å­˜åœ¨æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œè¯´æ˜è¯¥æ ¹èŠ‚ç‚¹å³ä¸ºæœ€è¿‘å…¬å…±ç¥–å…ˆ</p></li></ul></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root <span class="hljs-keyword">or</span> q==root <span class="hljs-keyword">or</span> p==root: <span class="hljs-keyword">return</span> root <span class="hljs-comment">#pqæœ‰ä¸€ä¸ªæ˜¯è¯¥èŠ‚ç‚¹ è¿”å›è¯¥èŠ‚ç‚¹</span><br>        left = self.lowestCommonAncestor(root.left,p,q) <span class="hljs-comment">#æŸ¥æ‰¾å…¬å…±ç¥–å…ˆæ˜¯å¦å­˜åœ¨äºå·¦å­æ ‘ä¸­</span><br>        right = self.lowestCommonAncestor(root.right,p,q) <span class="hljs-comment">#æŸ¥æ‰¾å…¬å…±ç¥–å…ˆæ˜¯å¦å­˜åœ¨äºå³å­æ ‘ä¸­</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> left: <span class="hljs-keyword">return</span> right<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> right: <span class="hljs-keyword">return</span> left<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure><h3 id="ç±»æ¯”">ç±»æ¯”</h3><p>æœ€å°æœç´¢æ ‘ä¸­æŸ¥æ‰¾æ— éœ€è€ƒè™‘ç©ºèŠ‚ç‚¹çš„æƒ…å†µæ˜¯å› ä¸ºæŒ‰ç…§è§„å¾‹æŸ¥æ‰¾ä¸ä¼šç¢°åˆ°ç©ºèŠ‚ç‚¹å›æº¯ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨å¾ªç¯éå†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        <span class="hljs-keyword">if</span> root.val &lt; p.val <span class="hljs-keyword">and</span> root.val &lt; q.val:<br>            <span class="hljs-keyword">return</span> self.lowestCommonAncestor(root.right, p, q)<br>        <span class="hljs-keyword">if</span> root.val &gt; p.val <span class="hljs-keyword">and</span> root.val &gt; q.val:<br>            <span class="hljs-keyword">return</span> self.lowestCommonAncestor(root.left, p, q)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        <span class="hljs-keyword">if</span> p.val &gt; q.val: p, q = q, p <span class="hljs-comment"># ä¿è¯ p.val &lt; q.val</span><br>        <span class="hljs-keyword">while</span> root:<br>            <span class="hljs-keyword">if</span> root.val &lt; p.val: <span class="hljs-comment"># p,q éƒ½åœ¨ root çš„å³å­æ ‘ä¸­</span><br>                root = root.right <span class="hljs-comment"># éå†è‡³å³å­èŠ‚ç‚¹</span><br>            <span class="hljs-keyword">elif</span> root.val &gt; q.val: <span class="hljs-comment"># p,q éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸­</span><br>                root = root.left <span class="hljs-comment"># éå†è‡³å·¦å­èŠ‚ç‚¹</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‰ ç»“æ„åŒ–æœºå™¨å­¦ä¹ é¡¹ç›®--æœºå™¨å­¦ä¹ ç­–ç•¥ï¼ˆ1ï¼‰</title>
    <link href="/2022/03/28/deep_learning/Andrew%20Wu/DeepLearning-3-1/"/>
    <url>/2022/03/28/deep_learning/Andrew%20Wu/DeepLearning-3-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ­¤ä¸ºå´æ©è¾¾çš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹çš„ç¬¬ä¸‰é—¨è¯¾çš„ç¬¬ä¸€å‘¨å†…å®¹æ€»ç»“ï¼Œè®°ä¸‹ç›¸å…³è¦ç‚¹ï¼Œæ–¹ä¾¿åç»­çš„å¤ä¹ å’Œå·©å›ºã€‚ğŸ˜‰</p></blockquote><h1>MLç­–ç•¥</h1><p>ä¼˜åŒ–æ·±åº¦å­¦ä¹ ç³»ç»Ÿçš„æƒ³æ³•ï¼š</p><ul><li><p>æ”¶é›†æ›´å¤šæ•°æ®</p></li><li><p>å¢åŠ è®­ç»ƒé›†çš„å¤šæ ·æ€§</p></li><li><p>æ¢¯åº¦ä¸‹é™æ›´ä¹…</p></li><li><p>ä½¿ç”¨å…¶ä»–çš„ä¼˜åŒ–ç®—æ³•</p></li><li><p>ä½¿ç”¨æ›´å¤§æˆ–è€…æ›´å°çš„ç½‘ç»œ</p></li><li><p>ä½¿ç”¨dropoutæˆ–è€…L2æ­£åˆ™åŒ–</p></li><li><p>ä¿®æ”¹ç½‘ç»œæ¶æ„â€¦</p></li></ul><h2 id="æ­£äº¤åŒ–">æ­£äº¤åŒ–</h2><p>è¦ä¼˜åŒ–æ·±åº¦å­¦ä¹ çš„æ•ˆæœçš„æ–¹æ³•ï¼ˆä½¿ç”¨æ­£äº¤çš„æ§åˆ¶ï¼‰</p><ol><li>åœ¨è®­ç»ƒé›†ä¸Šå¾—åˆ°çš„æ•ˆæœä¸é”™ã€‚ ï¼ˆæ›´å¤§çš„ç½‘ç»œï¼Œä¼˜åŒ–ç®—æ³•ï¼‰</li><li>åœ¨å¼€å‘é›†ä¸Šæ•ˆæœä¸é”™ã€‚ ï¼ˆæ­£åˆ™åŒ–ï¼Œæ›´å¤šæ•°æ®ï¼‰</li><li>åœ¨æµ‹è¯•é›†ä¸Šæ•ˆæœä¸é”™ã€‚ï¼ˆä½¿ç”¨æ›´å¤šå¼€å‘æ•°æ®ï¼‰</li><li>åœ¨æµ‹è¯•é›†ä¸Šçš„æˆæœ¬å‡½æ•°åœ¨å®é™…ä½¿ç”¨ä¸­æ•ˆæœä¸é”™ã€‚ ï¼ˆæ”¹å˜å¼€å‘åŠæˆ–è€…æˆæœ¬å‡½æ•°ï¼‰</li></ol><p>æ—©åœè¿™ä¸ªæ–¹æ³•å¯¹1ï¼Œ2éƒ½æœ‰å½±å“ï¼Œæ‰€ä»¥ä¸æ˜¯éå¸¸æ­£äº¤çš„å½±å“ã€‚</p><h2 id="å•ä¸€æ•°å­—è¯„ä¼°æŒ‡æ ‡">å•ä¸€æ•°å­—è¯„ä¼°æŒ‡æ ‡</h2><h3 id="æŸ¥å‡†ç‡ï¼ˆprecisionï¼‰">æŸ¥å‡†ç‡ï¼ˆprecisionï¼‰</h3><p>åœ¨æ‰€æœ‰åˆ¤æ–­ä¸ºçŒ«çŒ«çš„ä¾‹å­ä¸­æœ‰å¤šå°‘æ˜¯çœŸçš„çŒ«çŒ«</p><p>æ‰€ä»¥è¯´å½“ä¸€ä¸ªåˆ†ç±»å™¨æ˜¯95%ï¼Œå°±å¯ä»¥è¯´æœ‰95%æ¦‚ç‡è¯´å¯¹äº†</p><h3 id="æŸ¥å…¨ç‡-ï¼ˆRecallï¼‰">æŸ¥å…¨ç‡ ï¼ˆRecallï¼‰</h3><p>åœ¨æ‰€æœ‰çš„çŒ«çŒ«ä¸­æœ‰å¤šå°‘è¢«è¯†åˆ«å‡ºæ¥äº†</p><p>å½“åˆ†ç±»å™¨æŸ¥å…¨ç‡ä¸º90%ï¼Œæ„å‘³ç€è¿™ä¸ªåˆ†ç±»å™¨å‡†ç¡®åˆ†è¾¨äº†90%çš„çŒ«çŒ«ï¼Œè¿˜æœ‰10%çŒ«çŒ«åˆ†è¾¨é”™è¯¯äº†ã€‚</p><h3 id="F1">F1</h3><p>ä½¿ç”¨F1åˆ†æ•°å¯ä»¥ç»“åˆä¸¤è€…ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æŸ¥å‡†ç‡På’ŒæŸ¥å…¨ç‡Rçš„å¹³å‡æ•°ï¼Œå‡†ç¡®è¯´æ˜¯è°ƒå’Œå¹³å‡ï¼š<br>$$<br>F1 = \frac 2 {\frac 1 P+ \frac 1 R} = \frac {2PR} {P+R}<br>$$<br>æ‰€ä»¥éœ€è¦ä¸€ä¸ªå•å®æ•°è¯„ä¼°æŒ‡æ ‡å¯ä»¥æé«˜ä¼˜åŒ–ç®—æ³•çš„æ•ˆç‡ï¼Œæˆ–æ˜¯æé«˜å›¢é˜Ÿåšå‡ºå†³ç­–çš„æ•ˆç‡ã€‚</p><h2 id="æ»¡è¶³å’Œä¼˜åŒ–æŒ‡æ ‡">æ»¡è¶³å’Œä¼˜åŒ–æŒ‡æ ‡</h2><p>å¦‚ä½•è®¾ç½®ä¼˜åŒ–å’Œæ»¡è¶³æŒ‡æ ‡</p><p>åœ¨æ»¡è¶³æŸä¸ªæŒ‡æ ‡çš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚è¿è¡Œæ—¶é—´ï¼‰ï¼Œä¼˜åŒ–æŸä¸ªæŒ‡æ ‡ï¼ˆæ¯”å¦‚å‡†ç¡®ç‡ï¼‰ã€‚</p><p>å¯¹äºNä¸ªæŒ‡æ ‡ å¯èƒ½æ˜¯1ä¸ªä¼˜åŒ–ï¼ŒN-1ä¸ªæ»¡è¶³æŒ‡æ ‡ã€‚éœ€è¦æ˜ç¡®æ»¡è¶³æŒ‡æ ‡å’Œä¼˜åŒ–æŒ‡æ ‡ã€‚</p><h2 id="train-dev-test-dataset">train dev test dataset</h2><p>devä¹Ÿæ˜¯éªŒè¯é›†</p><p>åœ¨é€‰æ‹©éªŒè¯é›†å’Œæµ‹è¯•é›†è¦èƒ½å¤Ÿç¿»è¯‘æœªæ¥ä¼šå¾—åˆ°çš„æ•°æ®ï¼Œè®¤ä¸ºå¾ˆé‡è¦çš„æ•°æ®ã€‚devæ•°æ®é›†å’Œtestæ•°æ®é›†å¯èƒ½æ¥è‡ªç›¸åŒåˆ†å¸ƒï¼Œæœªæ¥å¾—åˆ°çš„æ–°çš„æ•°æ®è¦éšæœºåˆ†é…åˆ°devå’Œtestæ•°æ®é›†ä¸­ã€‚</p><h3 id="æ•°æ®é›†åˆ’åˆ†">æ•°æ®é›†åˆ’åˆ†</h3><p>æœºå™¨å­¦ä¹ æ—©æœŸ æ•°æ®é‡æ¯”è¾ƒå°çš„æ—¶å€™ï¼ˆ100ï¼Œ1000ï¼Œ10000ï¼‰</p><p>trainï¼štest åˆ†ä¸º7ï¼š3</p><p>trainï¼šdevï¼šteståˆ†ä¸º6ï¼š2ï¼š2</p><p>ç°ä»£æœºå™¨å­¦ä¹  æ‹¥æœ‰æµ·é‡æ•°æ®</p><p>å¦‚æœæœ‰ä¸€ç™¾ä¸‡æ•°æ®çš„è¯ï¼Œåº”è¯¥98%ä½œä¸ºè®­ç»ƒé›† 1%ä¸ºå¼€å‘é›† 1%ä¸ºæµ‹è¯•é›†</p><p>testæ•°æ®é›†çš„ä½œç”¨æ˜¯å®Œæˆç³»ç»Ÿå¼€å‘ä¹‹åï¼Œè¯„ä¼°æŠ•äº§ç³»ç»Ÿçš„æ€§èƒ½ï¼Œæ‰€ä»¥è¦ä»¤testæ•°æ®é›†çš„æ•°ç›®èƒ½å¤Ÿä»¥é«˜ç½®ä¿¡åº¦è¯„ä¼°ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å³å¯ã€‚è¿™ä¸ªæ•°ç›®è¿œå°äºæ€»æ•°æ®é›†çš„30%ã€‚</p><p>æœ‰æ—¶ï¼Œäººä»¬åªæŠŠæ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œå¼€å‘é›†ï¼Œä½†æ˜¯ä¸å»ºè®®ã€‚</p><h3 id="æ”¹å˜å¼€å‘-æµ‹è¯•é›†å’ŒæŒ‡æ ‡">æ”¹å˜å¼€å‘-æµ‹è¯•é›†å’ŒæŒ‡æ ‡</h3><p>æ ¹æ®éœ€æ±‚å’Œæ•ˆæœæ”¹å˜è¯„ä¼°æŒ‡æ ‡ï¼Œä¿®æ”¹æƒ©ç½šå› å­çš„å¤§å°</p><p>ä¸¤ä¸ªç‹¬ç«‹æ­¥éª¤ï¼šè®¾ç«‹ç›®æ ‡ï¼Œå¦‚ä½•ç²¾å‡†ç„å‡†ç›®æ ‡ï¼›</p><p>å¦‚æœå¼€å‘ä¸­å¾—åˆ°çš„ç»“æœå’Œç”¨æˆ·ä½¿ç”¨æ—¶å¾—åˆ°çš„ç»“æœç›¸å·®å¾ˆå¤§æ—¶ï¼Œè¯´æ˜å¼€å‘é›†ä¸å¤Ÿå¥½ï¼Œè¦ä½¿ç”¨åœ¨å®é™…ä½¿ç”¨ä¸­çœŸæ­£éœ€è¦ï¼Œä¸”å¤Ÿå®Œå¤‡ã€‚</p><h4 id="æ¨¡å‹è¡¨ç°">æ¨¡å‹è¡¨ç°</h4><p>æœºå™¨å­¦ä¹ ä»»åŠ¡åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¼€å§‹ä¼šå¾ˆå¿«è¾¾åˆ°äººç±»æ°´å¹³ï¼Œä¹‹åä¼šç¼“æ…¢å¢åŠ æ€§èƒ½é€¼è¿‘åªè´å¶æ–¯æœ€ä¼˜é”™è¯¯ç‡</p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
      <category>å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>å´æ©è¾¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft124 äºŒå‰æ ‘çš„æœ€å¤§è·¯å¾„å’Œ</title>
    <link href="/2022/03/25/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft124/"/>
    <url>/2022/03/25/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft124/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„æœ€å¤§è·¯å¾„å’Œ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è·¯å¾„ è¢«å®šä¹‰ä¸ºä¸€æ¡ä»æ ‘ä¸­ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿çˆ¶èŠ‚ç‚¹-å­èŠ‚ç‚¹è¿æ¥ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ è‡³å¤šå‡ºç°ä¸€æ¬¡ ã€‚è¯¥è·¯å¾„ è‡³å°‘åŒ…å«ä¸€ä¸ª èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚</p><p>è·¯å¾„å’Œ æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚</p><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶ æœ€å¤§è·¯å¾„å’Œ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/Aleetcode/CodeTop124-1.png" alt=""></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [1,2,3]<br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯<span class="hljs-number"> 2 </span>-&gt;<span class="hljs-number"> 1 </span>-&gt;<span class="hljs-number"> 3 </span>ï¼Œè·¯å¾„å’Œä¸º<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 3 </span>= 6<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://picture.mulindya.com/Aleetcode/CodeTop124-2.png" alt=""></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [-10,9,20,null,null,15,7]<br>è¾“å‡ºï¼š42<br>è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯<span class="hljs-number"> 15 </span>-&gt;<span class="hljs-number"> 20 </span>-&gt;<span class="hljs-number"> 7 </span>ï¼Œè·¯å¾„å’Œä¸º<span class="hljs-number"> 15 </span>+<span class="hljs-number"> 20 </span>+<span class="hljs-number"> 7 </span>= 42<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ [1, 3 * 104]</li><li>-1000 &lt;= Node.val &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨ååºéå†å’Œé€’å½’ï¼ŒåŒæ—¶å‰ªæã€‚å’Œæœ€å¤§å­åºåˆ—å’Œç±»ä¼¼ï¼Œåªæ˜¯æŠŠæ•°ç»„æ¢æˆäº†æ ‘çš„å½¢å¼ã€‚æ‰€ä»¥è¦æ³¨æ„åˆ°ååºéå†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxPathSum</span>(<span class="hljs-params">self, root: <span class="hljs-type">Optional</span>[TreeNode]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment"># def getMax(root): #æ›´æ–°èŠ‚ç‚¹çš„å€¼ï¼Œè®¾ç½®ä¸ºåŒ…å«è¯¥èŠ‚ç‚¹çš„æƒ…å†µä¸‹çš„æœ€ä¼˜è·¯å¾„å’Œ</span><br>        <span class="hljs-comment">#     if not root:return 0</span><br>        <span class="hljs-comment">#     leftsum = root.left.val if root.left else 0 </span><br>        <span class="hljs-comment">#     rightsum = root.right.val if root.right else 0</span><br>        <span class="hljs-comment">#     # print(root.val, max(root.val,root.val+leftsum,root.val+rightsum,root.val+leftsum+rightsum))</span><br>        <span class="hljs-comment">#     if self.result&lt;(root.val+leftsum+rightsum):  self.result = (root.val+leftsum+rightsum)</span><br>        <span class="hljs-comment">#     root.val =  max(root.val,root.val+leftsum,root.val+rightsum)</span><br>        <span class="hljs-comment">#     return root.val</span><br><br>        <span class="hljs-comment"># def backdfs(root):</span><br>        <span class="hljs-comment">#     if not root: return</span><br>        <span class="hljs-comment">#     backdfs(root.left)</span><br>        <span class="hljs-comment">#     backdfs(root.right)</span><br>        <span class="hljs-comment">#     ret = getMax(root)</span><br>        <span class="hljs-comment">#     if self.result&lt;ret: self.result = ret</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getMax</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#æ›´æ–°èŠ‚ç‚¹çš„å€¼ï¼Œè®¾ç½®ä¸ºåŒ…å«è¯¥èŠ‚ç‚¹çš„æƒ…å†µä¸‹çš„æœ€ä¼˜è·¯å¾„å’Œ</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            leftsum = <span class="hljs-built_in">max</span>(getMax(root.left),<span class="hljs-number">0</span>) <span class="hljs-comment">#å‰ªæ</span><br>            rightsum = <span class="hljs-built_in">max</span>(getMax(root.right),<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">if</span> self.result&lt;(root.val+leftsum+rightsum):  self.result = (root.val+leftsum+rightsum) <span class="hljs-comment">#ä»¥è¯¥èŠ‚ç‚¹ä½æ ¹èŠ‚ç‚¹çš„åŒè¾¹åˆ¤æ–­æ¥æ›´æ–°result</span><br>            <span class="hljs-keyword">return</span> root.val + <span class="hljs-built_in">max</span>(leftsum,rightsum) <span class="hljs-comment">#è¿”å›åŒ…å«è¯¥èŠ‚ç‚¹çš„å•è¾¹</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        self.result = -<span class="hljs-number">1000</span><br>        getMax(root)<br>        <span class="hljs-keyword">return</span> self.result<br></code></pre></td></tr></tbody></table></figure><blockquote><p>max( x, y, z, â€¦ )å¯ä»¥å¡«å…¥å¤šä¸ªå€¼</p></blockquote><h5 id="å¯¹æ¯”">å¯¹æ¯”</h5><p>æ•°ç»„çš„æœ€å¤§å­åºåˆ—å’Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#è´ªå¿ƒç®—æ³•1</span><br>        tempsum, tempmax, result= <span class="hljs-number">0</span>, -<span class="hljs-number">10000</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> item&gt;tempmax:tempmax = item<br>            tempsum += item<br>            <span class="hljs-keyword">if</span> tempsum&lt;<span class="hljs-number">0</span>: tempsum = <span class="hljs-number">0</span> <span class="hljs-comment">#å‰ªæ</span><br>            <span class="hljs-keyword">if</span> result&lt;tempsum:result = tempsum<br>        <span class="hljs-keyword">return</span> result <span class="hljs-keyword">if</span> result&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> tempmax<br></code></pre></td></tr></tbody></table></figure><p>è®¾ç½®tempsumä¸ºåŒ…å«å½“å‰å…ƒç´ çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œï¼Œä½¿ç”¨resultæ¥æ›´æ–°æœ€å¤§çš„å­åºåˆ—å’Œï¼Œåˆå§‹åŒ–ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#è´ªå¿ƒç®—æ³•2</span><br>        tempsum, result = <span class="hljs-number">0</span>, nums[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nums:<br>            tempsum = tempsum+item <span class="hljs-keyword">if</span> tempsum+item&gt;item <span class="hljs-keyword">else</span> item  <br>            <span class="hljs-keyword">if</span> result&lt;tempsum:result = tempsum<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft215æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </title>
    <link href="/2022/03/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft215/"/>
    <url>/2022/03/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft215/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šæ•´æ•°æ•°ç»„ nums å’Œæ•´æ•° kï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚</p><p>è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2</span><br><span class="hljs-section">è¾“å‡º: 5</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: [<span class="hljs-number">3,2,3,1</span>,<span class="hljs-number">2,4,5,5</span>,<span class="hljs-number">6</span>] å’Œ k = <span class="hljs-number">4</span><br>è¾“å‡º: <span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= k &lt;= nums.length &lt;= 104</li><li>-104 &lt;= nums[i] &lt;= 104</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¯¥é¢˜æœ‰ä¸‰ç§è§£æ³•ï¼š</p><ul><li>æ’åº</li><li>åˆ†è€Œæ²»ä¹‹ï¼ˆä½¿ç”¨å¿«æ’çš„pivotï¼‰</li><li>ä¼˜å…ˆé˜Ÿåˆ—</li></ul><p>é‡ç‚¹åº”è¯¥ç†è§£ç¬¬äºŒç§æ–¹æ³•ï¼Œè¿˜æœ‰è¦æ³¨æ„è¿™é‡Œé¢˜ç›®çš„æ„æ€æ˜¯<strong>ç¬¬Kå¤§</strong>ã€‚</p><h3 id="æ’åº">æ’åº</h3><p>ä½¿ç”¨æ’åºæ˜¯æ•ˆç‡æœ€ä½çš„æ–¹æ³•ï¼Œå…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(N),æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findKthLargest</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        nums = <span class="hljs-built_in">sorted</span>(nums)<br>        <span class="hljs-keyword">return</span> nums[<span class="hljs-built_in">len</span>(nums)-k]<br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ†æ²»æ³•">åˆ†æ²»æ³•</h3><p>ä¸»è¦å°±æ˜¯å¯¹å¿«é€Ÿæ’åºä¸­çš„<code>partition</code>çš„ç†è§£ï¼Œå°†pivotæ”¾åˆ°å…¶æ­£ç¡®çš„ä½ç½®ï¼Œä½¿å…¶å·¦å³çš„å…ƒç´ è¦ä¹ˆå¤§äºpivotï¼Œè¦ä¹ˆå°äºpivot(ç­‰äºçš„æƒ…å†µåœ¨ä»»æ„ä¸€è¾¹å³å¯)ã€‚</p><p>å¯¹äºå½’ä½å¥½çš„pivotå¯ä»¥å¾—åˆ°å®ƒçš„ä¸‹æ ‡ï¼Œæ ¹æ®å…¶ä¸‹æ ‡å’Œkè¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤æ–­ç»§ç»­å¯¹pivotçš„å·¦åŠéƒ¨åˆ†è¿˜æ˜¯å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾ã€‚</p><blockquote><p>è¿™é‡Œåˆåˆ†ä¸ºé€’å½’çš„æ–¹æ³•ï¼Œå¾ªç¯çš„æ–¹æ³•ã€‚é€’å½’æ—¶ç©ºé—´å¤æ‚åº¦ä¸ºO(logN),æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€O(2N-1)ã€‘,æ¯æ¬¡å°†pivotä½çš„æ—¶é—´å¤æ‚åº¦ä½O(N)</p></blockquote><h4 id="partition">partition</h4><p>å…ˆæ€»ç»“ä»¥ä¸‹pivotçš„partitionçš„æ–¹æ³•ï¼š</p><h5 id="exchange">exchange</h5><p>æ³¨æ„é¦–å…ƒç´ ä½œä¸º<code>pivot</code>ï¼Œ**å…ˆç§»åŠ¨<code>j</code>æŒ‡é’ˆåˆ°éœ€è¦äº¤æ¢çš„å…ƒç´ ï¼Œå†ç§»åŠ¨<code>i</code>æŒ‡é’ˆåˆ°éœ€è¦äº¤æ¢çš„å…ƒç´ ã€‚**ç”¨äºçº¦æŸ<code>i</code>çš„èŒƒå›´ï¼Œæœ€åäº¤æ¢é¦–å…ƒç´ å’Œåœæ­¢çš„ä½ç½®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIndex</span>(<span class="hljs-params">Istart, Iend, nums</span>):</span>     <br>    <span class="hljs-keyword">if</span> Istart&gt;Iend: <span class="hljs-keyword">return</span><br>    pivot = nums[Istart]<br>    i,j = Istart,Iend<br>    <span class="hljs-keyword">while</span> i&lt;j: <br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> nums[j]&gt;pivot: j-=<span class="hljs-number">1</span>  <span class="hljs-comment">#å…ˆjåiï¼Œçº¦æŸi</span><br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> nums[i]&lt;=pivot:i+=<span class="hljs-number">1</span><br>        nums[i],nums[j] = nums[j],nums[i]<br>    nums[j],nums[Istart] = pivot,nums[j] <span class="hljs-comment">#æœ€åijéƒ½ä¼šæŒ‡å‘åŒä¸€å…ƒç´ </span><br><span class="hljs-keyword">return</span> j<br></code></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥ä¸é‡‡ç”¨äº¤æ¢çš„æ–¹æ³•ï¼Œå°†pivotç§»åˆ°å¯¹åº”çš„ä½ç½®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIndex</span>(<span class="hljs-params">Istart, Iend, nums</span>):</span>     <br>    <span class="hljs-keyword">if</span> Istart&gt;Iend: <span class="hljs-keyword">return</span><br>    pivot = nums[Istart]<br>    i,j = Istart,Iend<br>    <span class="hljs-keyword">while</span> i&lt;j: <br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> nums[j]&gt;pivot: j-=<span class="hljs-number">1</span>  <span class="hljs-comment">#å…ˆjåiï¼Œçº¦æŸi</span><br>        nums[i] = nums[j] <br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> nums[i]&lt;=pivot:i+=<span class="hljs-number">1</span><br>        nums[j] = nums[i]<br>    nums[j] = pivot <span class="hljs-comment">#æœ€åijéƒ½ä¼šæŒ‡å‘åŒä¸€å…ƒç´ </span><br><span class="hljs-keyword">return</span> j<br></code></pre></td></tr></tbody></table></figure><h5 id="è·å…°å›½æ——çš„å˜ç§">è·å…°å›½æ——çš„å˜ç§</h5><p>ä¸é‡‡ç”¨äº¤æ¢çš„æ–¹æ³•ï¼Œéå†æ•°ç»„ï¼Œå°†å°äºç­‰äºpivotçš„å…ƒç´ éƒ½æ”¾ç½®åˆ°æ•°ç»„çš„å‰æ–¹å°±å¥½äº†ï¼Œè¿™æ ·ä¹‹åçš„å…ƒç´ è‡ªç„¶æ˜¯å¤§äºpivotçš„æ•°å­—ï¼Œä»£ç æ›´åŠ ç®€æ´æ˜“æ‡‚ã€‚è¿™é‡Œå°†æœ€åçš„å…ƒç´ ä½œä¸ºpivotï¼Œä½¿ç”¨jæ¥éå†æ•°ç»„ã€‚å®ƒåœ¨æœ€åè¢«èµ‹å€¼æ—¶ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸åŒ…å«æœ€åçš„å…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIndex</span>(<span class="hljs-params">Istart,Iend</span>):</span> <span class="hljs-comment">#å¿«æ’partitionçš„å˜å½¢</span><br>    <span class="hljs-keyword">if</span> Istart &gt; Iend: <span class="hljs-keyword">return</span><br>    pivot,i = nums[Iend],Istart <span class="hljs-comment">#æœ«å°¾å…ƒç´ ä½œä¸ºpivot</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Istart,Iend): <span class="hljs-comment">#jéå† æ³¨æ„ä¸åŒ…æ‹¬æœ€åçš„æ•°å­—pivot </span><br>        <span class="hljs-keyword">if</span> nums[j]&lt;=pivot: <br>            nums[i],nums[j] = nums[j],nums[i]<br>            i += <span class="hljs-number">1</span><br>    nums[i],nums[Iend] = nums[Iend],nums[i]<br>    <span class="hljs-keyword">return</span> i <br></code></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥åœ¨å¾ªç¯éå†çš„è¿‡ç¨‹ä¸­å°†pivotå½’ä½ã€‚æ­¤æ—¶å°†<code>i</code>åˆå§‹åŒ–ä¸º<code>Istart-1</code>ï¼Œæ¯æ¬¡æŒ‡å‘å¾…äº¤æ¢çš„ä¸‹æ ‡ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIndex</span>(<span class="hljs-params">Istart,Iend</span>):</span> <span class="hljs-comment">#å¿«æ’partitionçš„å˜å½¢</span><br>    <span class="hljs-keyword">if</span> Istart &gt; Iend: <span class="hljs-keyword">return</span><br>    pivot,i = nums[Iend],Istart-<span class="hljs-number">1</span> <span class="hljs-comment">#æœ«å°¾å…ƒç´ ä½œä¸ºpivot</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Istart,Iend+<span class="hljs-number">1</span>): <br>        <span class="hljs-keyword">if</span> nums[j]&lt;=pivot: <br>            i += <span class="hljs-number">1</span><br>            nums[i],nums[j] = nums[j],nums[i] <span class="hljs-comment">#äº¤æ¢iå’Œjçš„å…ƒç´ </span><br>    <span class="hljs-keyword">return</span> i <br></code></pre></td></tr></tbody></table></figure><h4 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findKthLargest</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIndex</span>(<span class="hljs-params">Istart,Iend</span>):</span> <span class="hljs-comment">#å¿«æ’partitionçš„å˜å½¢</span><br>            <span class="hljs-keyword">if</span> Istart &gt; Iend: <span class="hljs-keyword">return</span><br>            pivot,i = nums[Iend],Istart-<span class="hljs-number">1</span> <span class="hljs-comment">#æœ«å°¾å…ƒç´ ä½œä¸ºpivot</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Istart,Iend+<span class="hljs-number">1</span>): <br>                <span class="hljs-keyword">if</span> nums[j]&lt;=pivot: <br>                    i += <span class="hljs-number">1</span><br>                    nums[i],nums[j] = nums[j],nums[i] <span class="hljs-comment">#äº¤æ¢iå’Œjçš„å…ƒç´ </span><br>            <span class="hljs-keyword">return</span> i    <br>        left,right = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            index = getIndex(left,right) <span class="hljs-comment">#ä½¿ç”¨å¾ªç¯æ¯”ä½¿ç”¨é€’å½’çš„å†…å­˜æ¶ˆè€—è¦å°‘ è¿™æ ·ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</span><br>            <span class="hljs-keyword">if</span> index==<span class="hljs-built_in">len</span>(nums)-k:<span class="hljs-keyword">return</span> nums[index]<br>            <span class="hljs-keyword">elif</span> index&gt;<span class="hljs-built_in">len</span>(nums)-k:  right = index-<span class="hljs-number">1</span>  <span class="hljs-comment">#jè¡¨ç¤ºç¬¬j-1å¤§çš„æ•°å­—</span><br>            <span class="hljs-keyword">else</span>: left = index+<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€æ¯ä¸€æ¬¡æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºNï¼Œä½†æ˜¯ä¸éœ€è¦lognæ¬¡,O(2N-1)ã€‘ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚å¦‚æœä½¿ç”¨é€’å½’é‚£ä¹ˆç©ºé—´å¤æ‚åº¦ä¸ºO(logN)ã€‚</p><h3 id="ä¼˜å…ˆé˜Ÿåˆ—">ä¼˜å…ˆé˜Ÿåˆ—</h3><p>ä½¿ç”¨javaçš„PriorityQueueï¼Œé»˜è®¤æ˜¯å°æ ¹å †ï¼Œé€‰å‡ºç¬¬kå¤§çš„å…ƒç´ ï¼Œå¦‚æœè¯´å¤§äºkå…ƒç´ å°±å¼¹å‡ºå †é¡¶å…ƒç´ ï¼Œæœ€ååªå‰©ä¸‹kä¸ªå…ƒç´ è¿”å›å †é¡¶ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">findKthLargest</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] nums, <span class="hljs-keyword">int</span> k)</span> </span>{<br>        PriorityQueue&lt;Integer&gt; heap = <span class="hljs-keyword">new</span> PriorityQueue&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> num : nums) {<br>            heap.add(num);<br>            <span class="hljs-keyword">if</span> (heap.size() &gt; k) {<br>                heap.poll();<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> heap.peek();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>peek()//è¿”å›é˜Ÿé¦–å…ƒç´ </p><p>poll()//è¿”å›é˜Ÿé¦–å…ƒç´ ï¼Œé˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿåˆ—</p><p>add()//æ·»åŠ å…ƒç´ </p><p>size()//è¿”å›é˜Ÿåˆ—å…ƒç´ ä¸ªæ•°</p><p>isEmpty()//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¿”å›true,ä¸ç©ºè¿”å›false</p></blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(NlogK)ï¼Œéå†æ•°æ® O(N)ï¼Œå †å†…å…ƒç´ è°ƒæ•´ O(logK)ï¼›<br>ç©ºé—´å¤æ‚åº¦ï¼šO(K)ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ’åº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ’åº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft53 åè½¬é“¾è¡¨</title>
    <link href="/2022/03/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop_Microsoft206/"/>
    <url>/2022/03/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop_Microsoft206/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åè½¬é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>head</code> ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šhead = <span class="hljs-string">[1,2,3,4,5]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[5,4,3,2,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[1,2]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š-2">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ <code>[0, 5000]</code></li><li><code>-5000 &lt;= Node.val &lt;= 5000</code></li></ul><p>**è¿›é˜¶ï¼š**é“¾è¡¨å¯ä»¥é€‰ç”¨è¿­ä»£æˆ–é€’å½’æ–¹å¼å®Œæˆåè½¬ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</p><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è¿­ä»£">è¿­ä»£</h4><p>ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ä½¿ç”¨è¿­ä»£éå†çš„æ–¹æ³•åè½¬é“¾è¡¨ï¼Œè®°å½•pheadæ˜¯åè½¬é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œç§»åŠ¨headï¼Œä½¿ç”¨tempè®°å½•å½“å‰å…ƒç´ çš„åä¸€ä¸ªå…ƒç´ ã€‚</p><p>æ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(1)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-comment"># è¿­ä»£æ–¹æ³• æ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(1)</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head: <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        phead = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span> head:<br>            temp = head.<span class="hljs-built_in">next</span><br>            head.<span class="hljs-built_in">next</span> = phead<br>            phead,head = head,temp<br>        <span class="hljs-keyword">return</span> phead<br></code></pre></td></tr></tbody></table></figure><h4 id="é€’å½’">é€’å½’</h4><p>ä½¿ç”¨é€’å½’çš„æ–¹æ³•ï¼Œå¦‚æœè¯¥é“¾è¡¨ä¸ºç©ºæˆ–è€…ä¸ºå•ä¸€å…ƒç´ åˆ™è¿”å›headã€‚åè½¬headä¹‹åçš„é“¾è¡¨å¾—åˆ°retï¼Œretå³ä¸ºåè½¬åçš„å¤´èŠ‚ç‚¹ï¼Œç„¶åå°†headçš„ä¸‹ä¸€èŠ‚ç‚¹çš„æŒ‡å‘ä¿®æ”¹ä¸ºheadï¼Œæœ€åå°†headçš„æŒ‡å‘ä¿®æ”¹ä¸ºNoneã€‚</p><p>æ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(n)</p><ul><li>ä½¿ç”¨é€’å½’å‡½æ•°ï¼Œä¸€ç›´é€’å½’åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹å°±æ˜¯åè½¬åçš„å¤´ç»“ç‚¹ï¼Œè®°ä½œ ret.</li><li>æ­¤åï¼Œæ¯æ¬¡å‡½æ•°åœ¨è¿”å›çš„è¿‡ç¨‹ä¸­ï¼Œè®©å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ã€‚</li><li>åŒæ—¶è®©å½“å‰ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ NULL ï¼Œä»è€Œå®ç°ä»é“¾è¡¨å°¾éƒ¨å¼€å§‹çš„å±€éƒ¨åè½¬</li><li>å½“é€’å½’å‡½æ•°å…¨éƒ¨å‡ºæ ˆåï¼Œé“¾è¡¨åè½¬å®Œæˆã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-comment">#é€’å½’æ–¹æ³•</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> head.<span class="hljs-built_in">next</span>: <span class="hljs-comment">#ä¸ºç©ºæˆ–è€…æ˜¯å•å…ƒç´ </span><br>            <span class="hljs-keyword">return</span> head<br>        ret = self.reverseList(head.<span class="hljs-built_in">next</span>) <span class="hljs-comment">#åè½¬headä¹‹åçš„å…ƒç´ </span><br>        head.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span> = head<br>        head.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">return</span> ret    <br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>é“¾è¡¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft53 æœ€å¤§å­æ•°ç»„å’Œ</title>
    <link href="/2022/03/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft53/"/>
    <url>/2022/03/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft53/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€å¤§å­æ•°ç»„å’Œ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚</p><p>å­æ•°ç»„ æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">è¾“å…¥ï¼šnums = [<span class="hljs-string">-2</span>,1,<span class="hljs-string">-3</span>,4,<span class="hljs-string">-1</span>,2,1,<span class="hljs-string">-5</span>,4]<br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,<span class="hljs-string">-1</span>,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight fix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">è¾“å…¥ï¼šnums </span>=<span class="hljs-string"> [1]</span><br><span class="hljs-string">è¾“å‡ºï¼š1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[5,4,-1,7,8]</span><br>è¾“å‡ºï¼š<span class="hljs-number">23</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= nums.length &lt;= 10^5</li><li>-10^4 &lt;= nums[i] &lt;= 10^4</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è®°å½•åŠ¨æ€è§„åˆ’çš„è½¬ç§»æ–¹ç¨‹ï¼š<br>$$<br>dp[i] = max(nums[i],dp[i-1]+nums[i])<br>$$<br>æ ¹æ®ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ï¼Œ<code>dp[i]</code> çš„å€¼åªå’Œ <code>dp[i - 1]</code> æœ‰å…³ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ã€Œæ»šåŠ¨å˜é‡ã€çš„æ–¹å¼å°†ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚</p><p>è´ªå¿ƒç®—æ³•æ˜¯åŠ¨æ€è§„åˆ’ç®—æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚</p><p>ä½¿ç”¨è´ªå¿ƒç®—æ³•æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1);<br>è®¾ç½®ä¸€ä¸ªå˜é‡tempsumæ¥è®°å½•æ•°ç»„åœ¨å½“å‰å…ƒç´ ä¸ºæ­¢ï¼ŒåŒ…å«è¯¥å…ƒç´ çš„æœ€å¤§è¿ç»­å­æ•°ç»„å’Œï¼Œå¦‚æœåŠ ä¸Šitemå¤§äº0å°±å¯ä»¥ç»§ç»­æ·»åŠ å…ƒç´ ï¼Œå¦åˆ™ä¸º0ç»§ç»­å‘åæŸ¥æ‰¾ã€‚å¦‚æœå…¨æ˜¯è´Ÿæ•°ï¼Œå°±è¿”å›æ•°ç»„æœ€å¤§çš„è´Ÿæ•°ï¼Œresultæ˜¯è®°å½•ä¸€ä¸ªæ•°ç»„çš„æœ€å¤§å­åºåˆ—å’Œã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#è´ªå¿ƒç®—æ³•1</span><br>        tempsum, tempmax, result= <span class="hljs-number">0</span>, -<span class="hljs-number">10000</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> item&gt;tempmax:tempmax = item<br>            tempsum += item<br>            <span class="hljs-keyword">if</span> tempsum&lt;<span class="hljs-number">0</span>: tempsum = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">if</span> result&lt;tempsum:result = tempsum<br>        <span class="hljs-keyword">return</span> result <span class="hljs-keyword">if</span> result&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> tempmax<br></code></pre></td></tr></tbody></table></figure><p>è¿™é‡Œå®é™…ä¸Šä¸éœ€è¦tempmaxï¼Œå¯ä»¥è®¾ç½®tempsumä¸ºåŒ…å«å½“å‰å…ƒç´ çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œï¼Œä½¿ç”¨resultæ¥æ›´æ–°æœ€å¤§çš„å­åºåˆ—å’Œï¼Œåˆå§‹åŒ–ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#è´ªå¿ƒç®—æ³•2</span><br>        tempsum, result = <span class="hljs-number">0</span>, nums[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nums:<br>            tempsum = tempsum+item <span class="hljs-keyword">if</span> tempsum+item&gt;item <span class="hljs-keyword">else</span> item <br>            <span class="hljs-keyword">if</span> result&lt;tempsum:result = tempsum<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>è´ªå¿ƒæ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>è´ªå¿ƒæ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>A Multi-Task Mean Teacher for Semi-Supervised Shadow Detection</title>
    <link href="/2022/03/18/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/Mean-Teacher/"/>
    <url>/2022/03/18/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/Mean-Teacher/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://readpaper.com/pdf-annotate/note?noteId=660745891978698752&amp;pdfId=660745407483162624">https://readpaper.com/pdf-annotate/note?noteId=660745891978698752&amp;pdfId=660745407483162624</a></p></blockquote><h1>A Multi-Task Mean Teacher for Semi-Supervised Shadow Detection ğŸ</h1><h2 id="0-Abstract-ğŸ’">0. Abstract ğŸ’</h2><p>ç°æœ‰çš„é˜´å½±æ£€æµ‹æ–¹æ³•åœ¨ä¾èµ–æœ‰é™çš„æ ‡è®°æ•°æ®é›†æ–¹é¢å­˜åœ¨å›ºæœ‰çš„å±€é™æ€§ï¼Œåœ¨ä¸€äº›å¤æ‚çš„åœºåœ°ä¸Šå¯èƒ½ä¼šäº§ç”Ÿè¾ƒå·®çš„ç»“æœã€‚ä¸ºäº†æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ï¼Œåˆ©ç”¨æœªæ ‡è®°çš„æ•°æ®ï¼Œæ¢ç´¢å¹¶å­¦ä¹ é˜´å½±çš„å¤šä¸ªä¿¡æ¯ï¼Œæå‡ºäº†ä¸€ç§åŠç›‘ç£é˜´å½±æ£€æµ‹çš„å¤šä»»åŠ¡mean teacheræ¨¡å‹ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªå¤šä»»åŠ¡åŸºçº¿æ¨¡å‹ï¼Œé€šè¿‡åˆ©ç”¨é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°çš„äº’è¡¥ä¿¡æ¯æ¥åŒæ—¶æ£€æµ‹é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°ï¼Œå¹¶å°†è¯¥åŸºçº¿æ¨¡å‹åˆ†é…ç»™å­¦ç”Ÿå’Œæ•™å¸ˆç½‘ç»œã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ¥è‡ªå­¦ç”Ÿå’Œæ•™å¸ˆç½‘ç»œçš„ä¸‰ä¸ªä»»åŠ¡çš„é¢„æµ‹ä¿æŒä¸€è‡´ï¼Œä»¥è®¡ç®—æœªæ ‡è®°æ•°æ®çš„ä¸€è‡´æ€§æŸå¤±ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°å¤šä»»åŠ¡åŸºçº¿æ¨¡å‹é¢„æµ‹çš„æ ‡è®°æ•°æ®çš„æœ‰ç›‘ç£æŸå¤±ä¸­ã€‚åœ¨ä¸‰ä¸ªå¹¿æ³›ä½¿ç”¨çš„åŸºå‡†æ•°æ®é›†ä¸Šçš„å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•çš„æ€§èƒ½ä¸€è‡´ä¼˜äºæ‰€æœ‰æ¯”è¾ƒçš„æœ€å…ˆè¿›çš„æ–¹æ³•ï¼Œè¿™éªŒè¯äº†æ‰€æå‡ºçš„ç½‘ç»œå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨é¢å¤–çš„æœªæ ‡è®°æ•°æ®æ¥æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ã€‚</p><h3 id="æç‚¼å†…å®¹">æç‚¼å†…å®¹</h3><h4 id="é—®é¢˜">é—®é¢˜</h4><p>ç°æœ‰çš„é˜´å½±æ£€æµ‹æ–¹æ³•åœ¨ä¾èµ–æœ‰é™çš„æ ‡è®°æ•°æ®é›†æ–¹é¢å­˜åœ¨å›ºæœ‰çš„å±€é™æ€§ï¼Œåœ¨ä¸€äº›å¤æ‚çš„åœºåœ°ä¸Šå¯èƒ½ä¼šäº§ç”Ÿè¾ƒå·®çš„ç»“æœã€‚</p><h4 id="æ–¹æ³•">æ–¹æ³•</h4><p>â€‹ä¸ºäº†æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ï¼Œåˆ©ç”¨æœªæ ‡è®°çš„æ•°æ®ï¼Œæ¢ç´¢å¹¶å­¦ä¹ é˜´å½±çš„å¤šä¸ªä¿¡æ¯ï¼Œæå‡ºäº†ä¸€ç§åŠç›‘ç£é˜´å½±æ£€æµ‹çš„å¤šä»»åŠ¡mean teacheræ¨¡å‹ã€‚</p><p>â€‹å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªå¤šä»»åŠ¡åŸºçº¿æ¨¡å‹ï¼Œé€šè¿‡åˆ©ç”¨é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°çš„äº’è¡¥ä¿¡æ¯æ¥åŒæ—¶æ£€æµ‹é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°ï¼Œå¹¶å°†è¯¥åŸºçº¿æ¨¡å‹åˆ†é…ç»™å­¦ç”Ÿå’Œæ•™å¸ˆç½‘ç»œã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æ¥è‡ªå­¦ç”Ÿå’Œæ•™å¸ˆç½‘ç»œçš„ä¸‰ä¸ªä»»åŠ¡çš„é¢„æµ‹ä¿æŒä¸€è‡´ï¼Œä»¥è®¡ç®—æœªæ ‡è®°æ•°æ®çš„ä¸€è‡´æ€§æŸå¤±ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°å¤šä»»åŠ¡åŸºçº¿æ¨¡å‹é¢„æµ‹çš„æ ‡è®°æ•°æ®çš„æœ‰ç›‘ç£æŸå¤±ä¸­ã€‚</p><h4 id="ç»“æœ">ç»“æœ</h4><p>â€‹åœ¨ä¸‰ä¸ªå¹¿æ³›ä½¿ç”¨çš„åŸºå‡†æ•°æ®é›†ä¸Šçš„å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•çš„æ€§èƒ½ä¸€è‡´ä¼˜äºæ‰€æœ‰æ¯”è¾ƒçš„æœ€å…ˆè¿›çš„æ–¹æ³•ï¼Œè¿™éªŒè¯äº†æ‰€æå‡ºçš„ç½‘ç»œå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨é¢å¤–çš„æœªæ ‡è®°æ•°æ®æ¥æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ã€‚</p><h2 id="5-Conclusion-ğŸƒ">5. Conclusion ğŸƒ</h2><p>æœ¬æ–‡é€šè¿‡å¼€å‘ä¸€ä¸ªå¤šä»»åŠ¡çš„mean teacheræ¡†æ¶ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„å•å¹…å›¾åƒé˜´å½±æ£€æµ‹ç½‘ç»œã€‚æˆ‘ä»¬çš„ä¸»è¦æ€æƒ³æ˜¯é¦–å…ˆå»ºç«‹ä¸€ä¸ªå¤šä»»åŠ¡ç½‘ç»œï¼Œåˆ©ç”¨å®ƒä»¬çš„<strong>äº’è¡¥ä¿¡æ¯åŒæ—¶é¢„æµ‹é˜´å½±åŒºåŸŸæ£€æµ‹ã€é˜´å½±è¾¹ç¼˜æ£€æµ‹å’Œé˜´å½±è®¡æ•°ä¼°è®¡</strong>ï¼Œç„¶ååˆ©ç”¨mean teacher<strong>åŠç›‘ç£å­¦ä¹ </strong>æ¥åˆ©ç”¨é¢å¤–çš„æœªæ ‡è®°æ•°æ®æ¥è¿›ä¸€æ­¥æé«˜æ£€æµ‹æ€§èƒ½ã€‚åœ¨ä¸‰ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„ç½‘ç»œçš„æ€§èƒ½ä¸€ç›´è¿œè¿œä¼˜äºæœ€å…ˆè¿›çš„æ–¹æ³•ã€‚ä¸å…¶ä»–å·¥ä½œ[43ï¼Œ41ï¼Œ12]ä¸€æ ·ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯èƒ½ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†å…·æœ‰å¤šä¸ªå¤æ‚é˜´å½±çš„å›¾åƒã€‚é‡æ–°è§£å†³è¿™ä¸€å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜è¢«è®¤ä¸ºæ˜¯æˆ‘ä»¬ä»Šåå·¥ä½œçš„æ–¹å‘ã€‚</p><h4 id="æœªè§£å†³çš„é—®é¢˜">æœªè§£å†³çš„é—®é¢˜</h4><p>ä¸å…¶ä»–å·¥ä½œ[43ï¼Œ41ï¼Œ12]ä¸€æ ·ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯èƒ½ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†å…·æœ‰å¤šä¸ªå¤æ‚é˜´å½±çš„å›¾åƒã€‚é‡æ–°è§£å†³è¿™ä¸€å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜è¢«è®¤ä¸ºæ˜¯æˆ‘ä»¬ä»Šåå·¥ä½œçš„æ–¹å‘ã€‚</p><h2 id="1-Introduce-â¿">1. Introduce â¿</h2><p>ä½œä¸ºæ—¥å¸¸ç”Ÿæ´»ä¸­çš„ä¸€ç§æ™®éç°è±¡ï¼Œè‡ªç„¶å›¾åƒä¸­çš„é˜´å½±å¯¹æå–åœºæ™¯å‡ ä½•[29ï¼Œ17]ã€å…‰çº¿æ–¹å‘[22]ã€æ‘„åƒæœºä½ç½®åŠå…¶å‚æ•°[16]æœ‰ä¸€å®šçš„æç¤ºä½œç”¨ï¼Œæœ‰åˆ©äºå›¾åƒåˆ†å‰²[4]ã€ç›®æ ‡æ£€æµ‹[2]ã€ç›®æ ‡è·Ÿè¸ª[27]ç­‰ä¸åŒçš„é«˜å±‚å›¾åƒç†è§£ä»»åŠ¡ã€‚å¯¹äºè¿™äº›åº”ç”¨ï¼Œæˆ‘ä»¬éœ€è¦é«˜ç²¾åº¦åœ°æ£€æµ‹å›¾åƒä¸­çš„é˜´å½±ã€‚</p><p>ç°æœ‰çš„æ–¹æ³•é€šè¿‡å¼€å‘é¢œè‰²å’Œå…‰ç…§çš„ç‰©ç†æ¨¡å‹æ¥æ£€æµ‹é˜´å½±[6ï¼Œ5],é€šè¿‡äººå·¥æå–ç‰¹å¾æˆ–è€…ä»å·ç§¯ç¥ç»ç½‘ç»œæå–ç‰¹å¾æ¥é©±åŠ¨æ•°æ®ã€‚è™½ç„¶ç›®å‰çš„æ–¹æ³•å·²ç»åœ¨åŸºå‡†æ•°æ®é›†[33ï¼Œ42ï¼Œ35ï¼Œ10]ä¸Šå–å¾—äº†å¾ˆé«˜çš„å‡†ç¡®ç‡ï¼Œä½†æ˜¯å®ƒä»¬å‡ ä¹éœ€è¦è¶³å¤Ÿçš„æ ‡æ³¨æ•°æ®æ¥è¿›è¡Œè®­ç»ƒï¼Œè€Œä¸”è¿™æ ·çš„è®­ç»ƒæ•°æ®é€šå¸¸æ˜¯åœ¨æœ‰é™çš„åœºæ™¯ä¸­æ•è·çš„ï¼Œç„¶è€Œï¼Œä¸ºä¸åŒçš„åœºæ™¯åˆ›å»ºå¤§çš„æ ‡æ³¨æ•°æ®é›†æ˜¯æ˜‚è´µå’Œè€—æ—¶çš„ã€‚Leç­‰äºº[24]æå‡ºé€šè¿‡å¼±åŒ–åŸå§‹è®­ç»ƒå›¾åƒçš„é˜´å½±åŒºåŸŸæ¥å¢å¼ºè®­ç»ƒå›¾åƒï¼Œä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°è¿™äº›å¢å¼ºåçš„å›¾åƒå¾€å¾€æ˜¯å‡çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„éé˜´å½±èƒŒæ™¯ä¸åŸå§‹è®­ç»ƒå›¾åƒçš„èƒŒæ™¯ç›¸ä¼¼ï¼Œä»è€Œé˜»ç¢äº†æ³›åŒ–èƒ½åŠ›ã€‚ä¸å·²æœ‰çš„æ•°æ®é›†ç›¸æ¯”ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ”¶é›†åˆ°ä¸°å¯Œçš„æœªæ ‡è®°é˜´å½±å›¾åƒã€‚å› æ­¤ï¼Œå½“ä½¿ç”¨æœ‰é™çš„æ ‡è®°æ•°æ®è¿›è¡Œè®­ç»ƒæ—¶ï¼Œåˆ©ç”¨é¢å¤–çš„æœªæ ‡è®°æ•°æ®æ¥æé«˜é˜´å½±æ£€æµ‹æ€§èƒ½æ˜¯éå¸¸å¿…è¦çš„ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_fig1.png" alt=""></p><p>å¦ä¸€æ–¹é¢ï¼Œåœ¨æµ‹è¯•å„ç§è‡ªç„¶å›¾åƒçš„ç°æœ‰æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å‘ç°ä»–ä»¬å¯èƒ½ä¼šå¿½ç•¥å°çš„é˜´å½±å—ï¼Œå°†æš—åŒºè¯¯è®¤ä¸ºé˜´å½±ï¼Œç”±äºè¾¹ç•Œè¾ƒå¼±è€Œæ¼æ‰äº†ä¸æ˜æ˜¾æˆ–æŸ”å’Œçš„é˜´å½±ã€‚è¿™äº›æƒ…å†µä¼šå¯¼è‡´é˜´å½±è¾¹ç•Œè¾ƒå·®ï¼Œå¹¶å¯èƒ½æ”¹å˜é˜´å½±åŒºåŸŸçš„æ•°é‡ã€‚å—å¤šä»»åŠ¡å­¦ä¹ åœ¨è®¸å¤šè®¡ç®—æœºè§†è§‰åº”ç”¨ä¸­çš„æˆåŠŸåº”ç”¨[14ï¼Œ3ï¼Œ18ï¼Œ26]çš„å¯å‘ï¼Œæˆ‘ä»¬å†³å®šåœ¨å·¥ä½œä¸­ç ”ç©¶é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°çš„äº’è¡¥ä¿¡æ¯ï¼Œä»¥å¢å¼ºä»å…¨å±€å’Œç»†èŠ‚ä¸¤ä¸ªè§’åº¦çš„é˜´å½±åŒºåŸŸæ£€æµ‹ã€‚å…·ä½“åœ°è¯´ï¼Œé˜´å½±è®¡æ•°æ£€æµ‹å¯¹é˜´å½±åŒºåŸŸçš„æ€»æ•°è®¾ç½®å…¨å±€çº¦æŸï¼Œè€Œé˜´å½±è¾¹ç¼˜æ£€æµ‹å¯¹é˜´å½±åŒºåŸŸçš„è¾¹ç•Œè®¾ç½®ç»†èŠ‚çº§åˆ«çš„çº¦æŸã€‚</p><p>åœ¨è¿™æ–¹é¢ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªå¤šä»»åŠ¡å‡å€¼æ•™å¸ˆæ¡†æ¶(MTMT-Net)æ¥æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ã€‚æˆ‘ä»¬é¦–å…ˆè®¾è®¡äº†ä¸€ä¸ªå¤šä»»åŠ¡CNNï¼Œ**ç”¨äºç›¸äº’å­¦ä¹ ä¸‰ä¸ªä»»åŠ¡(å³é˜´å½±åŒºåŸŸæ£€æµ‹ã€é˜´å½±è¾¹ç¼˜æ£€æµ‹å’Œé˜´å½±è®¡æ•°æ£€æµ‹)**è®°ä¸ºMT-CNNï¼Œå¹¶å°†è¯¥MT-CNNæ¨¡å‹ä½œä¸ºå­¦ç”Ÿç½‘ç»œå’Œæ•™å¸ˆç½‘ç»œã€‚ç„¶åï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ ‡ç­¾æ•°æ®çš„ç›‘ç£å¤šä»»åŠ¡æŸå¤±å‡½æ•°ï¼Œä»¥æ•´åˆæ‰€æœ‰ä¸‰ä¸ªä»»åŠ¡ä¸Šçš„ç›‘ç£æŸå¤±ã€‚ä¹‹åï¼Œæˆ‘ä»¬å¼ºåˆ¶å­¦ç”Ÿç½‘ç»œå’Œæ•™å¸ˆç½‘ç»œçš„ä¸‰ä¸ªä»»åŠ¡çš„ç»“æœåˆ†åˆ«åœ¨æ‰€æœ‰æœªæ ‡è®°çš„æ•°æ®ä¸Šä¿æŒä¸€è‡´ã€‚<strong>é€šè¿‡åŠ å…¥æ”¹è¿›çš„MT-CNNçš„ç›‘ç£æŸå¤±å’Œä¸‰ä¸ªä»»åŠ¡çš„ä¸€è‡´æ€§æŸå¤±æ¥è®­ç»ƒæ¨¡å‹</strong>ï¼Œæˆ‘ä»¬çš„ç½‘ç»œå¯ä»¥æ¯”ç°æœ‰çš„æ–¹æ³•æ›´å‡†ç¡®åœ°æ£€æµ‹å‡ºé˜´å½±åŒºåŸŸã€‚æˆ‘ä»¬çš„ä¸»è¦å·¥ä½œæ¦‚æ‹¬å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§ç”¨äºé˜´å½±æ£€æµ‹çš„å¤šä»»åŠ¡CNN(MT-CNN)ï¼Œé€šè¿‡ä»å•è¾“å…¥å›¾åƒä¸­åŒæ—¶æ£€æµ‹é˜´å½±åŒºåŸŸã€é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°ã€‚MT-CNNå¯¹å·²æ ‡æ³¨æ•°æ®çš„é˜´å½±æ£€æµ‹æ•ˆæœè¦å¥½äºå•ä¸€çš„é˜´å½±æ£€æµ‹ä»»åŠ¡ã€‚</li><li>å…¶æ¬¡ï¼Œæˆ‘ä»¬æå‡ºè®¾è®¡ä¸€ä¸ªå¤šä»»åŠ¡å‡å€¼æ•™å¸ˆæ¡†æ¶æ¥<strong>èåˆæ¥è‡ªä¸‰ä¸ªé¢„æµ‹ä»»åŠ¡çš„æœªæ ‡è®°æ•°æ®çš„ä¸€è‡´æ€§æŸå¤±ï¼Œä»¥è¿›è¡Œé˜´å½±æ£€æµ‹</strong>ã€‚ä½œä¸ºä¸€ç§è‡ªé›†æˆæ¨¡å‹ï¼Œæˆ‘ä»¬çš„æ¡†æ¶æœ‰å¯èƒ½ç”¨äºå¼€å‘å…¶ä»–è§†è§‰ä»»åŠ¡çš„åŠç›‘ç£æ¡†æ¶ï¼ŒåŒ…æ‹¬æ˜¾è‘—æ€§æ£€æµ‹ã€è¾¹ç•Œæ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²ã€‚</li><li>æœ€åï¼Œåœ¨ä¸‰ä¸ªå¹¿æ³›ä½¿ç”¨çš„åŸºå‡†æ•°æ®é›†ä¸Šï¼Œæˆ‘ä»¬è¯æ˜äº†æ‰€æå‡ºçš„ç½‘ç»œæ¯”æœ€å…ˆè¿›çš„æ–¹æ³•æœ‰å¾ˆå¤§çš„å·®è·ã€‚</li></ol><h2 id="2-Related-Work-ğŸ”“">2. Related Work ğŸ”“</h2><h4 id="ä¼ ç»Ÿçš„æ–¹æ³•">ä¼ ç»Ÿçš„æ–¹æ³•</h4><p>æ—©æœŸçš„å°è¯•[6ï¼Œ5ï¼Œ32]åˆ©ç”¨ç…§æ˜æ¨¡å‹å’Œé¢œè‰²ä¿¡æ¯æ¥è¯†åˆ«é˜´å½±åŒºåŸŸï¼Œå¹¶ä¸”å®ƒä»¬ä¸­çš„å¤§å¤šæ•°åªåœ¨é«˜è´¨é‡å’Œè‰¯å¥½çº¦æŸçš„å›¾åƒä¸Šå·¥ä½œå¾—å¾ˆå¥½[28ï¼Œ41]ã€‚åæ¥çš„æ•°æ®é©±åŠ¨ç­–ç•¥åœ¨æ ‡æ³¨æ•°æ®ä¸Šè®¾è®¡äº†ç‰¹å®šçš„æ‰‹å·¥ç‰¹å¾[42ï¼Œ23ï¼Œ7ï¼Œ13ï¼Œ34]ï¼Œå¹¶å°†è¿™äº›ç‰¹å¾æä¾›ç»™ä¸åŒçš„åˆ†ç±»å™¨[42ï¼Œ23ï¼Œ7ï¼Œ13ï¼Œ34]è¿›è¡Œé˜´å½±æ£€æµ‹ï¼Œè™½ç„¶æé«˜äº†å‡†ç¡®ç‡ï¼Œä½†åœ¨æ‰‹å·¥ç‰¹å¾ä¸è¶³ä»¥åŒºåˆ†é˜´å½±åŒºåŸŸçš„å¤æ‚æƒ…å†µä¸‹ï¼Œè¿™äº›ç­–ç•¥é€šå¸¸ä¼šå‡ºç°æ€§èƒ½ä¸‹é™çš„é—®é¢˜ã€‚</p><h4 id="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•">åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•</h4><p>å—æ·±åº¦å­¦ä¹ åœ¨å„ç§è§†è§‰ä»»åŠ¡ä¸­å–å¾—çš„æ˜¾è‘—è¿›å±•çš„å¯å‘ï¼ŒåŸºäºå·ç§¯ç¥ç»ç½‘ç»œ(CNN)çš„é˜´å½±æ£€æµ‹æ–¹æ³•è¢«å‘å±•ä¸ºä»æ ‡è®°æ•°æ®é›†ä¸­å­¦ä¹ æ·±åº¦é˜´å½±å¹²æ‰°ç‰¹å¾çš„æ–¹æ³•ã€‚Khanç­‰äººã€‚[19]é€šè¿‡æ„å»º7å±‚CNNï¼Œå½¢æˆäº†ç¬¬ä¸€ä¸ªå¯¹å›¾åƒåƒç´ è¿›è¡Œé˜´å½±/éé˜´å½±åˆ†ç±»çš„ç½‘ç»œï¼Œå®ƒé¦–å…ˆä»è¶…åƒç´ çº§åˆ«æå–æ·±åº¦ç‰¹å¾ï¼Œç„¶åå°†ç‰¹å¾å–‚åˆ°æ¡ä»¶éšæœºåœºæ¨¡å‹ï¼ˆCRFï¼‰æ¥å¹³æ»‘é˜´å½±æ£€æµ‹ç»“æœã€‚icenteç­‰äººå­¦ä¹ å›¾åƒçº§é˜´å½±å…ˆéªŒçŸ¥è¯†ï¼Œå¹¶å°†å…¶ä¸å±€éƒ¨å›¾åƒå—ç›¸ç»“åˆï¼Œè®­ç»ƒåŸºäºpatchçš„CNNç”Ÿæˆé˜´å½±æ¨¡æ¿ã€‚ç„¶åï¼Œä¸€ä¸ªåŸºäºç”Ÿæˆæ€§å¯¹æŠ—ç½‘ç»œçš„é˜´å½±æ£€æµ‹å™¨ï¼Œç§°ä¸ºscGAN[28]ï¼Œé€šè¿‡åœ¨è¾“å…¥å›¾åƒä¸Šå½¢æˆä¸€ä¸ªæ¡ä»¶ç”Ÿæˆå™¨æ¥é¢„æµ‹é˜´å½±æ˜ å°„ã€‚[8]ä¸­çš„ä¸€ç§å¿«é€Ÿæ·±é˜´å½±æ£€æµ‹ç½‘ç»œä»æ‰‹å·¥åˆ¶ä½œçš„ç‰¹å¾ä¸­è·å¾—é˜´å½±å…ˆéªŒå›¾ï¼Œåº”ç”¨patchçº§CNNé¢„æµ‹é¢ç‰‡çš„é˜´å½±æ©æ¨¡ï¼Œå¹¶ç»“åˆå¤šå°ºåº¦é¢ç‰‡çš„ç»“æœæ¥é¢„æµ‹æ•´ä¸ªé˜´å½±å›¾ã€‚</p><p>æœ€è¿‘ï¼Œèƒ¡ç­‰äººæå‡ºäº†ä¸€ä¸ªæ–°çš„è§‚ç‚¹ã€‚[12]é€šè¿‡å­¦ä¹ æ–¹å‘æ„ŸçŸ¥çš„ç©ºé—´ä¸Šä¸‹æ–‡ç‰¹å¾æ£€æµ‹å‡ºé˜´å½±åƒç´ ã€‚æœ±åŸƒå¡”å°”[43]è®¾è®¡äº†ä¸€ç§å¾ªç¯æ³¨æ„æ®‹å·®(RAR)æ¨¡å‹ï¼Œå°†ç›¸é‚»ä¸¤ä¸ªCNNå±‚çš„ä¸Šä¸‹æ–‡è¿›è¡Œåˆå¹¶ï¼Œå¹¶æ„é€ äº†ä¸¤ç³»åˆ—RARæ¨¡å—æ¥è¿­ä»£æ•´åˆCNNå±‚ä¸Šçš„ç©ºé—´ä¸Šä¸‹æ–‡ã€‚å‹’åŸƒå¡”å°”[24]å°†ç”Ÿæˆè¾…åŠ©è®­ç»ƒç¤ºä¾‹çš„é˜´å½±æ£€æµ‹ç½‘ç»œ(D-NET)ä¸é˜´å½±è¡°å‡ç½‘ç»œ(A-NET)ç›¸ç»“åˆã€‚Wangç­‰äºº[37]å †å å¤šä¸ªå¹¶è¡Œèåˆåˆ†æ”¯ï¼Œåœ¨æ·±åº¦ç›‘ç£æ¡†æ¶ä¸­èåˆå…¨å±€è¯­ä¹‰çº¿ç´¢å’Œå±€éƒ¨ç©ºé—´ç»†èŠ‚ã€‚éƒ‘æŸç­‰äºº[41]æå‡ºäº†ä¸€ç§åˆ†å¿ƒæ„ŸçŸ¥é˜´å½±(DS)æ¨¡å‹æ¥é¢„æµ‹å‡é˜³æ€§å’Œå‡é˜´æ€§åƒç´ ï¼Œå¹¶å°†è·å¾—çš„åˆ†å¿ƒç‰¹å¾åœ¨æ¯ä¸€å±‚CNNä¸­è¿›è¡Œèåˆä»¥è¿›è¡Œé˜´å½±æ£€æµ‹ã€‚</p><h5 id="ç¼ºç‚¹">ç¼ºç‚¹</h5><p>ç°æœ‰çš„é˜´å½±æ£€æµ‹æ–¹æ³•è™½ç„¶æ”¹è¿›äº†é˜´å½±æ£€æµ‹æ¡ï¼Œä½†å­˜åœ¨è®­ç»ƒæ£€æµ‹ç½‘ç»œéœ€è¦å¤§é‡åƒç´ çº§æ ‡æ³¨æ•°æ®çš„å›ºæœ‰å±€é™æ€§ã€‚è™½ç„¶Adnet[24]é€šè¿‡å‰Šå¼±é˜´å½±åŒºåŸŸæ¥å¢å¼ºæ¥è‡ªå•ä¸ªé˜´å½±å›¾åƒçš„è®­ç»ƒå›¾åƒï¼Œä½†æ˜¯å¢å¼ºçš„å›¾åƒå¾€å¾€æ˜¯å‡çš„ï¼ŒèƒŒæ™¯ä¸åŸå§‹è®­ç»ƒå›¾åƒéå¸¸ç›¸ä¼¼ï¼Œå¯¼è‡´æ³›åŒ–èƒ½åŠ›æœ‰é™ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨æœªæ ‡è®°çš„æ•°æ®æ¥è¾…åŠ©é˜´å½±æ£€æµ‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å¤šä»»åŠ¡å­¦ä¹ åµŒå…¥åˆ°è‡ªé›†æˆæ¡†æ¶ä¸­ï¼Œä»¥å¢å¼ºé˜´å½±æ£€æµ‹ä»»åŠ¡çš„ä¸€è‡´æ€§æŸå¤±ã€‚ç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•æ¯”åé¢å®éªŒéƒ¨åˆ†è¯¦ç»†æè¿°çš„æœ€å…ˆè¿›çš„é˜´å½±æ£€æµ‹å™¨æ€§èƒ½æ›´å¥½ã€‚</p><h2 id="3-Methodology-ğŸ”">3. Methodology ğŸ”</h2><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_fig2.png" alt=""></p><p>å›¾2æ˜¾ç¤ºäº†æ‰€æå‡ºçš„MTMT-Netçš„å·¥ä½œæµç¨‹ï¼Œè¯¥MTMT-Neté€šè¿‡ä½¿ç”¨mean teacheråŠç›‘ç£å­¦ä¹ æ¥æ•´åˆæ ‡è®°æ•°æ®å’Œæœªæ ‡è®°æ•°æ®ã€‚å…·ä½“åœ°è¯´ï¼Œé€šè¿‡è€ƒè™‘é˜´å½±åŒºåŸŸæ£€æµ‹ã€é˜´å½±è¾¹ç¼˜æ£€æµ‹å’Œé˜´å½±è®¡æ•°æ£€æµ‹ä¸‰ä¸ªä»»åŠ¡ï¼Œæå‡ºäº†ä¸€ç§å¤šä»»åŠ¡å·ç§¯ç¥ç»ç½‘ç»œ(MT-CNN)ã€‚</p><p><strong>MT-CNNæ—¢ç”¨äºå­¦ç”Ÿç½‘ç»œï¼Œä¹Ÿç”¨äºæ•™å¸ˆç½‘ç»œã€‚</strong></p><ul><li><p>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå°†æ ‡æ³¨åçš„æ•°æ®é€å…¥å­¦ç”Ÿç½‘ç»œï¼Œé€šè¿‡èåˆä¸‰ä¸ªä»»åŠ¡æŸå¤±è®¡ç®—å‡ºä¸€ä¸ªå¤šä»»åŠ¡ç›‘ç£æŸå¤±ã€‚</p></li><li><p>å¯¹äºæœªæ ‡è®°çš„æ•°æ®ï¼Œæˆ‘ä»¬ä»è¾“å…¥çš„å›¾åƒä¸­ç”Ÿæˆä¸€ä¸ªè¾…åŠ©é˜´å½±å›¾ï¼Œå¹¶å°†å…¶åˆ†åˆ«é¦ˆé€åˆ°å­¦ç”Ÿç½‘ç»œå’Œæ•™å¸ˆç½‘ç»œã€‚</p></li><li><p>å¯¹ä¸¤ç»„é¢„æµ‹é˜´å½±ä¿¡æ¯è¿›è¡Œå¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±è®¡ç®—ï¼Œåœ¨æµ‹è¯•é˜¶æ®µåªåˆ©ç”¨<strong>å­¦ç”Ÿç½‘ç»œ</strong>å¯¹è¾“å…¥å›¾åƒè¿›è¡Œé˜´å½±å›¾é¢„æµ‹ã€‚</p></li></ul><h3 id="3-1-Multi-task-Convolutional-Neural-Network-MT-CNN">3.1 Multi-task Convolutional Neural Network(MT-CNN)</h3><p>ç°æœ‰çš„é˜´å½±æ£€æµ‹æ–¹æ³•è™½ç„¶å–å¾—äº†æ˜¾è‘—çš„æ•ˆæœï¼Œä½†ç”±äºè¾¹ç•Œè¾ƒå¼±ï¼Œåœ¨æ£€æµ‹è½¯é˜´å½±æ—¶å­˜åœ¨æ€§èƒ½ä¸‹é™çš„é—®é¢˜ã€‚ä»–ä»¬ä¹Ÿå¾€å¾€ä¼šå¿½ç•¥å°çš„é˜´å½±åŒºåŸŸæˆ–è€…å°†æš—å¤„çš„éé˜´å½±åŒºåŸŸé”™è®¤ä¸ºé˜´å½±åŒºåŸŸï¼Œä»è€Œä¼šæ”¹å˜æ£€æµ‹åˆ°çš„é˜´å½±åŒºåŸŸçš„æŠ€æœ¯ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜ç¡®è€ƒè™‘é˜´å½±è¾¹ç¼˜å’Œé˜´å½±è®¡æ•°æœ‰åŠ©äºæé«˜é˜´å½±åŒºåŸŸæ£€æµ‹çš„å®šä½ç²¾åº¦å’Œåˆ†å‰²è´¨é‡ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªå¤šä»»åŠ¡CNN(MT-CNN)ï¼Œå®ƒä»¥ç«¯åˆ°ç«¯çš„æ–¹å¼å¯¹å•ä¸ªç½‘ç»œä¸­çš„é˜´å½±è¾¹ç¼˜ã€é˜´å½±è®¡æ•°å’Œé˜´å½±åŒºåŸŸä¿¡æ¯è¿›è¡Œå»ºæ¨¡å’Œèåˆï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_fig3.png" alt=""></p><h4 id="3-1-1-Shadow-Region-Detection">3.1.1 Shadow Region Detection</h4><p>ç»™å®šä¸€å¹…è¾“å…¥çš„é˜´å½±å›¾åƒï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œ(åœ¨æˆ‘ä»¬çš„å®éªŒä¸­æ˜¯ResNeXt-101[38])æ¥<strong>äº§ç”Ÿä¸€ç»„ä¸åŒå°ºåº¦çš„ç‰¹å¾æ˜ å°„</strong>(è¡¨ç¤ºä¸ºEF1ã€EF2ã€EF3ã€EF4å’ŒEF5)(è§å›¾3)ã€‚</p><p>æ³¨æ„åˆ°é˜´å½±æ£€æµ‹åœ¨ä¸åŒçš„CNNå±‚ä¹‹é—´æœ‰äº’è¡¥çš„ä¿¡æ¯ï¼Œåœ¨æµ…å±‚çš„CNNå±‚æ•æ‰é˜´å½±ç»†èŠ‚å’Œéé˜´å½±ç»†èŠ‚ï¼Œåœ¨æ·±å±‚çš„CNNå¿½ç•¥å¤§éƒ¨åˆ†éé˜´å½±åƒç´ ä¹Ÿä¼šé—æ¼éƒ¨åˆ†é˜´å½±åŒºåŸŸã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨short connections[9]æ¥åˆå¹¶æœ€åå››ä¸ªCNNå±‚çš„ç‰¹å¾æ˜ å°„ï¼Œå¾—åˆ°å››ä¸ªæ–°çš„ç‰¹å¾æ˜ å°„(è¡¨ç¤ºä¸ºDF2ã€DF3ã€DF4å’ŒDF5)ã€‚å…·ä½“çš„è¯´ï¼Œåˆå¹¶åçš„feature mapçš„ç¬¬kå±‚CNNå±‚$DF_k$ï¼š</p>$$DF_k = Conv(concat(EF_k,...,EF_5)) \quad \quad (1)$$<p>ç„¶åï¼Œæˆ‘ä»¬å°†æœ€æµ…çš„ç‰¹å¾ï¼ˆEF1ï¼‰å’Œæœ€æ·±çš„ç‰¹å¾ï¼ˆEF5ï¼‰åˆå¹¶ï¼Œå·²ç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰¹å¾å›¾æ ‡è®°ä¸ºDF1ç”¨äºé¢„æµ‹é˜´å½±è¾¹ç¼˜ã€‚</p><p>ä¹‹å<strong>ä¸ºäº†ç»§æ‰¿é˜´å½±è¾¹ç¼˜å’Œé˜´å½±åŒºåŸŸä¿¡æ¯</strong>ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å®ƒä»¬å‘ä¸Šé‡‡æ ·åˆ°DF1çš„ç©ºé—´ç„¶åé€ä¸ªå…ƒç´ çš„æ·»åŠ DF1,æç‚¼feature mapè¡¨ç¤ºä¸º{$RF_k,k=2,â€¦,5$},å®šä¹‰ä¸ºï¼š</p>$$RF_k= up(DF_k) + DF_1 \quad \quad (2)$$<p>æœ€åï¼Œæˆ‘ä»¬é¢„æµ‹äº†æ¥è‡ªDF2ã€DF3ã€DF4å’ŒDF5çš„4ä¸ªé˜´å½±åŒºmapï¼ˆæ¥è‡ªRF2ã€RF3ã€RF4å’ŒRF5çš„4ä¸ªé˜´å½±åŒºmapï¼‰ä»¥åŠç”±ç²¾åŒ–çš„ç‰¹å¾æ˜ å°„(å›¾3ä¸­è®°ä¸º$S_f$)ï¼Œè¯¥é˜´å½±æ˜ å°„æ˜¯é€šè¿‡é€ä¸ªå…ƒç´ åœ°ç›¸åŠ è€Œäº§ç”Ÿçš„ã€‚</p>$$S_f = Pred(\sum _{k=2}^5 RF_k) \quad \quad (3)$$<p>é¢„æµ‹Pred($\cdot$)æ˜¯é€šè¿‡åœ¨ç‰¹å¾ä¸Šä½¿ç”¨3Ã—3å·ç§¯å±‚ã€1Ã—1å·ç§¯å±‚å’ŒSigmoidæ¿€æ´»å±‚[43]æ¥å®ç°çš„ã€‚</p><h4 id="3-1-2-Shadow-Edge-Detection">3.1.2 Shadow Edge Detection</h4><p>é€šè¿‡è§‚å¯Ÿé˜´å½±å›¾åƒï¼Œæˆ‘ä»¬æ³¨æ„åˆ°å¯¹äºè½¯é˜´å½±ï¼Œè¾¹ç•Œå¯èƒ½æ— æ³•å’Œå‘¨å›´çš„éé˜´å½±åŒºåŸŸåŒºåˆ†å¼€ã€‚è¿™ä¿ƒä½¿æˆ‘ä»¬åˆ©ç”¨è¾¹ç¼˜çŸ¥è¯†æ¥æé«˜æ£€æµ‹æ€§èƒ½ï¼Œæœ€è¿‘çš„æ˜¾è‘—æ€§æ£€æµ‹å™¨ä¹Ÿè¯æ˜äº†è¾¹ç¼˜çŸ¥è¯†æœ‰åŠ©äºæé«˜æ˜¾è‘—æ€§æ£€æµ‹çš„è´¨é‡ã€‚</p><p>åœ¨MT-CNNä¸­ï¼Œæˆ‘ä»¬å°†CNNçš„ä½å±‚ç‰¹å¾$EF_1$å’Œæœ€æ·±CNNå±‚çš„é«˜å±‚ç‰¹å¾$EF_5$è¿›è¡Œèåˆï¼Œç”Ÿæˆç‰¹å¾å›¾$DF_1$ï¼Œç„¶åç”¨å®ƒæ¥é¢„æµ‹é˜´å½±è¾¹ç¼˜å›¾ã€‚è™½ç„¶ä½å±‚ç‰¹å¾$EF_1$æ•è·äº†è¶³å¤Ÿçš„é˜´å½±è¾¹ç¼˜ä¿¡æ¯ï¼Œä½†ä»…ä½¿ç”¨$EF_1$æ£€æµ‹é˜´å½±è¾¹ç¼˜æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºEF1è¿˜ç¼–ç äº†è®¸å¤šéé˜´å½±èƒŒæ™¯ç»†èŠ‚ã€‚å¦ä¸€æ–¹é¢ï¼Œæ·±å±‚ç‰¹å¾$EF_5$å…·æœ‰æœ€å¤§çš„æ„Ÿå—é‡ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æŠ‘åˆ¶éé˜´å½±åƒç´ ã€‚å…·ä½“åœ°è¯´ï¼Œ$DF_1$æ˜¯é€šè¿‡å¯¹$EF_1$å’Œ$EF_5$è¿›è¡Œé€ä¸ªå…ƒç´ çš„ç›¸åŠ æ¥è®¡ç®—çš„ã€‚</p><h4 id="3-1-3-Shadow-Count-Detection">3.1.3 Shadow Count Detection</h4><p>é€šè¿‡åˆ†æç°æœ‰é˜´å½±æ£€æµ‹æ–¹æ³•çš„æ£€æµ‹ç»“æœï¼Œæˆ‘ä»¬å‘ç°äº†ä¸‰ç§å¸¸è§çš„å¤±è´¥æƒ…å†µï¼š</p><ul><li><p>ä¸¢å¤±å°çš„é˜´å½±åŒºåŸŸï¼›</p></li><li><p>è¯¯è¯†åˆ«éé˜´å½±åŒºåŸŸï¼›</p></li><li><p>è¯¯æ£€æµ‹é™„è¿‘çš„é˜´å½±åŒºåŸŸã€‚</p></li></ul><p>è¿™äº›æƒ…å†µéƒ½ä¼šå¯¼è‡´ä¸å‡†ç¡®çš„é˜´å½±åŒºåŸŸæ•°ã€‚å› æ­¤ï¼Œä¸ºäº†æé«˜é˜´å½±æ£€æµ‹çš„æ€§èƒ½ï¼Œæˆ‘ä»¬æ¢ç´¢äº†é˜´å½±åŒºåŸŸçš„æ•°é‡ã€‚</p><p>**æ£€æµ‹é˜´å½±åŒºåŸŸæ•°ç›®éœ€è¦å¯¹æ•´ä¸ªå›¾åƒè¿›è¡Œå…¨å±€ç†è§£ã€‚**å¦‚å›¾3æ‰€ç¤ºï¼Œæˆ‘ä»¬ä¾é CNNæœ€æ·±å±‚çš„$EF_5$è¿›è¡Œæ£€æµ‹ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬åº”ç”¨å•ä¸ªå…¨è¿é€šçš„å±‚$EF_5$æ¥è·å¾—è¡¨ç¤ºé˜´å½±è®¡æ•°çš„Score(A)ã€‚ç”±äºé˜´å½±åŒºåŸŸçš„æ•°é‡å¯èƒ½éå¸¸å¤§ï¼Œä¸ºäº†ä½¿è®¡ç®—å¯è¡Œï¼Œæˆ‘ä»¬è®¾ç½®äº†æœ€å¤§çº¦æŸ$N_max$ï¼Œå¹¶ç»éªŒåœ°è®¡ç®—äº†æ ‡é‡Aä½œä¸ºå›å½’é—®é¢˜ï¼š<br>$$<br>A = \frac{min(N_{actual},N_{max})}{N_{max}} \quad \quad (4)<br>$$<br>è¿™é‡Œçš„$N_{adtual}$è¡¨ç¤ºé˜´å½±åŒºåŸŸçš„å®é™…æ•°ç›®ï¼Œ$N_{max}$ç»éªŒå–å€¼ä¸º8ã€‚ä¹Ÿå°±æ˜¯æœ€å¤§çš„åŒºåŸŸæ•°ç›®é™åˆ¶åœ¨8ä»¥ä¸‹ã€‚</p><h3 id="3-2-æ ‡ç­¾æ•°æ®çš„å¤šä»»åŠ¡ç›‘ç£æŸå¤±">3.2 æ ‡ç­¾æ•°æ®çš„å¤šä»»åŠ¡ç›‘ç£æŸå¤±</h3><p>å¯¹äºå¸¦æ ‡ç­¾çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€å¯¹æ•°æ®ï¼ˆè¾“å…¥çš„å›¾åƒå’Œå¯¹åº”çš„æ©è†œï¼‰ï¼›å› æ­¤æˆ‘ä»¬å°†å¸¦æ ‡ç­¾æ©è†œæ•°æ®ä½œä¸ºé˜´å½±æ£€æµ‹ï¼ˆ$G_r$ï¼‰çš„ground-truthã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å°†Cannyç®—å­ï¼ˆè¾¹ç¼˜æ£€æµ‹ç®—å­ï¼‰åº”ç”¨äºæ ‡ç­¾æ©è†œç”Ÿæˆå¯¹åº”çš„è¾¹ç¼˜å›¾ä½œä¸ºé˜´å½±è¾¹ç¼˜æ£€æµ‹çš„ground-trueï¼ˆ$G_e$ï¼‰ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥è§‚å¯Ÿæ¯ä¸€ä¸ªæ ‡æ³¨å›¾åƒï¼Œæ‰‹åŠ¨è®¡ç®—é˜´å½±åŒºåŸŸçš„æ•°ç›®ã€‚è¿™ä¸ªæ˜¯é˜´å½±è®¡æ•°çš„åŸºç¡€ï¼ˆ$G_c$ï¼‰ã€‚</p><p>åœ¨å¾—åˆ°ground-truthä¹‹å<br>å¤šä»»åŠ¡ç›‘ç£æŸå¤±(è¡¨ç¤ºä¸º$\mathcal{L}^s$ï¼‰æ˜¯å°†ä»¥ä¸‹ä¸‰è€…ç›¸åŠ å¾—åˆ°:</p><ol><li>é˜´å½±åŒºåŸŸæ£€æµ‹æŸå¤±ï¼ˆ$\mathcal{L}^s_r$ï¼‰</li><li>é˜´å½±è¾¹ç¼˜æ£€æµ‹æŸå¤±ï¼ˆ$\mathcal{L}^s_e$ï¼‰</li><li>é˜´å½±è®¡æ•°æŸå¤±ï¼ˆ$\mathcal{L}^s_c$ï¼‰</li></ol>$$\mathcal{L}^s(x) = \mathcal{L}^s_r+\alpha \mathcal{L}^s_e + \beta \mathcal{L}^s_c \quad \quad (5)$$<p>è¿™é‡Œçš„</p>$$\begin{equation}\begin{aligned}\mathcal{L}^s_r &amp; = \sum_{j=1} ^9 \Phi_{BCE}(P_r(j),G_r) ,\\\mathcal{L}^s_e &amp; = \Phi_{BCE}(P_e,G_e) , \quad \quad \quad \quad (6) \\\mathcal{L}^s_c &amp; = \Phi_{BCE}(P_c,G_c) \\\end{aligned}\end{equation}$$<p><strong>MSE æ¨¡å‹çš„é¢„æµ‹å€¼ä¸æ ‡ç­¾çš„L2è·ç¦»ã€‚</strong></p><p><strong>BCE <a href="https://so.csdn.net/so/search?q=%E4%BA%A4%E5%8F%89%E7%86%B5&amp;spm=1001.2101.3001.7020">äº¤å‰ç†µ</a>æŸå¤±å‡½æ•°ï¼Œè¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ï¼Œä¸€èˆ¬ç”¨äºåˆ†ç±»é—®é¢˜ã€‚</strong></p><p>è¿™é‡Œï¼Œ$P_r(j)$è¡¨ç¤ºä¹ä¸ªé¢„æµ‹é˜´å½±å›¾ä¸­çš„ä¸€ä¸ªï¼Œ$P_e$æ˜¯é¢„æµ‹é˜´å½±è¾¹ç¼˜å›¾ï¼Œ$P_c$æ˜¯é¢„æµ‹é˜´å½±è®¡æ•°å€¼ã€‚$\Phi_{BCE}$å’Œ$\Phi_{MSE}$åˆ†åˆ«æ˜¯äºŒå…ƒäº¤å‰ç†µæŸå¤±å‡½æ•°å’ŒMAEæŸå¤±å‡½æ•°ã€‚æˆ‘ä»¬åœ¨ç½‘ç»œè®­ç»ƒä¸­ç»éªŒåœ°è®¾ç½®äº†æƒå€¼$\alpha=10$å’Œ$\beta=1$ã€‚</p><h3 id="3-3-æ— æ ‡ç­¾æ•°æ®çš„å¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±">3.3 æ— æ ‡ç­¾æ•°æ®çš„å¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±</h3><p>å¯¹äºæœªæ ‡æ³¨æ•°æ®ï¼Œæˆ‘ä»¬å°†å…¶è¾“å…¥åˆ°å­¦ç”Ÿå’Œæ•™å¸ˆç½‘ç»œä»¥è·å¾—ä¸‰ä¸ªä»»åŠ¡çš„ç»“æœï¼Œå³ä¹ä¸ªé˜´å½±åŒºåŸŸå›¾ï¼ˆè¡¨ç¤ºæœª$S_{r_1}$å’Œ $S_{r_9}$ï¼‰ï¼Œé˜´å½±è¾¹ç¼˜å›¾ï¼ˆè¡¨ç¤ºæœª$S_e$ï¼‰å’Œé˜´å½±è®¡æ•°ï¼ˆè¡¨ç¤ºä¸º$S_c$ï¼‰Scoreï¼Œ<strong>ç„¶åæˆ‘ä»¬å¼ºåˆ¶ä½¿å¾—æ¥è‡ªå­¦ç”Ÿç½‘ç»œå’Œæ•™å¸ˆç½‘ç»œçš„ä¸‰ä¸ªä»»åŠ¡é¢„æµ‹ä¸€è‡´</strong>ï¼Œä»è€Œå¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±ä¸º$L^c$:</p>$$\mathcal L^c(y) = \mathcal L^c_r + \mathcal L^c_e  + \mathcal L^c_c \quad \quad \quad \quad (7)$$<p>è¿™é‡Œçš„</p>$$\begin{equation}\begin{aligned}\mathcal L^c_r &amp;= \sum^9_{j=1} \Phi_{MSE}(S_{r_j},T_{r_j}),\\\mathcal L^c_e &amp;= \Phi_{MSE}(S_e,T_e), \quad \quad \quad \quad (8) \\\mathcal L^c_c &amp;= \Phi_{MSE}(S_c,T_c)\end{aligned}\end{equation}$$<p>è¿™é‡Œçš„$\mathcal L^c_r,\mathcal L^c_e,\mathcal L^c_c$åˆ†åˆ«è¡¨ç¤ºé˜´å½±åŒºåŸŸï¼Œé˜´å½±è¾¹ç•Œï¼Œé˜´å½±è®¡æ•°çš„ä¸€è‡´æ€§æŸå¤±ã€‚</p><h3 id="3-4-Our-Network">3.4 Our Network</h3><p>æˆ‘ä»¬å°†åŠç›‘ç£è‡ªé›†æˆæ¨¡å‹çš„å¤šä»»åŠ¡å­¦ä¹ åº”ç”¨äºé˜´å½±æ£€æµ‹ï¼Œç½‘ç»œçš„æ€»æŸå¤±ä¸ºï¼š</p>$$\mathcal L_{total} = \sum^N_{i=1} \mathcal L^s(x_i) + \lambda \sum_{j=1}^M \mathcal L^c(y_j) \quad \quad \quad \quad (9)$$<p>è¿™é‡Œçš„Nè¡¨ç¤ºè®­ç»ƒé›†ä¸­æ ‡ç­¾æ•°æ®å›¾åƒçš„æ•°é‡ï¼ŒMè¡¨ç¤ºæœªæ ‡è®°æ•°æ®çš„æ•°é‡ã€‚$\mathcal L^s(x_i)$è¡¨ç¤ºå¯¹äºç¬¬iä¸ªæ ‡è®°å›¾åƒçš„å¤šä»»åŠ¡ç›‘ç£æŸå¤±å‡½æ•°ï¼ˆå…¬å¼5ï¼‰ï¼Œ$\mathcal L^c(y_j)$è¡¨ç¤ºç”¨äºç¬¬jä¸ªæœªæ ‡è®°å›¾åƒå¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±(å…¬å¼7ï¼‰ã€‚$\lambda$ç”¨äºå¹³è¡¡<strong>æ ‡è®°æ•°æ®</strong>ä¸Šçš„<strong>å¤šä»»åŠ¡ç›‘ç£æŸå¤±</strong>å’Œ<strong>æœªæ ‡è®°</strong>æ•°æ®ä¸Šçš„å¤šä»»åŠ¡<strong>ä¸€è‡´æ€§æŸå¤±</strong>ã€‚</p><p>é€šè¿‡ä½¿ç”¨ä»¥æ¥æ—¶é—´çš„é«˜æ–¯é¢„çƒ­å‡½æ•°æ¥æ›´æ–°$\lambda$:$\lambda(t) = \lambda_{max}e^{-5(1- \frac {t}{t_{max}})^2}$,è¿™é‡Œçš„tè¡¨ç¤ºå½“å‰çš„è®­ç»ƒè¿­ä»£ï¼Œ$t_{max}$è¡¨ç¤ºè®­ç»ƒçš„æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œç»éªŒè®¾ç½®$\lambda _{max} = 10$ã€‚</p><p>æˆ‘ä»¬æœ€å°åŒ–$\mathcal L_{total}$æ¥è®­ç»ƒå­¦ç”Ÿç½‘ç»œï¼Œé€šè¿‡æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆEMAï¼‰ç­–ç•¥æ¥æ›´æ–°æ¯ä¸ªè®­ç»ƒè¿­ä»£ä¸­çš„æ•™å¸ˆç½‘ç»œå‚æ•°ï¼Œåœ¨ç¬¬tè½®è®­ç»ƒæ•™å¸ˆç½‘ç»œå‚æ•°è¡¨ç¤ºï¼š</p>$$\theta ^{\prime}_t = \eta \theta ^{\prime}_{t-1} + (1-\eta)\theta ^{\prime}_t \quad \quad \quad \quad (10)$$<p>è¿™é‡Œçš„$\theta _t$è¡¨ç¤ºåœ¨ç¬¬tè½®è®­ç»ƒçš„å­¦ç”Ÿç½‘ç»œå‚æ•°ï¼Œå¦‚æ–‡çŒ®[21,31]å»ºè®®çš„EMAè¡°å‡å› å­$\eta$ç»éªŒè®¾ç½®æœª0.99ã€‚</p><h4 id="æˆ‘ä»¬çš„æœªæ ‡è®°æ•°æ®">æˆ‘ä»¬çš„æœªæ ‡è®°æ•°æ®</h4><p>åœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œæœªæ ‡è®°çš„æ•°æ®æœ‰3424å¼ å¸¦é˜´å½±çš„å›¾åƒã€‚å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€éƒ¨åˆ†æ˜¯æ¥è‡ªæœ€è¿‘çš„é˜´å½±å»é™¤å·¥ä½œçš„USRæ•°æ®é›†[11]ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æˆ‘ä»¬ä»äº’è”ç½‘ä¸Šæ”¶é›†çš„979å¼ å›¾åƒã€‚USRæ•°æ®é›†[11]å…·æœ‰2445ä¸ªæ²¡æœ‰é˜´å½±æ£€æµ‹æ³¨é‡Šçš„é˜´å½±å›¾åƒã€‚</p><h3 id="3-5-è®­ç»ƒå’Œæµ‹è¯•ç­–ç•¥">3.5 è®­ç»ƒå’Œæµ‹è¯•ç­–ç•¥</h3><h4 id="è®­ç»ƒå‚æ•°">è®­ç»ƒå‚æ•°</h4><p>ä¸ºäº†åŠ å¿«è®­ç»ƒè¿‡ç¨‹ï¼Œé™ä½è¿‡æ‹Ÿåˆé£é™©ï¼Œ**æˆ‘ä»¬ä½¿ç”¨ResNeXt[38]åˆå§‹åŒ–MT-CNN(å­¦ç”Ÿç½‘ç»œ)çš„å‚æ•°ï¼ŒResNeXt[38]å·²ç»é’ˆå¯¹ImageNetä¸Šçš„å›¾åƒåˆ†ç±»ä»»åŠ¡è¿›è¡Œäº†å¾ˆå¥½çš„è®­ç»ƒã€‚**MT-CNNä¸­çš„å…¶ä»–å‚æ•°è¢«åˆå§‹åŒ–ä¸ºéšæœºå€¼ã€‚é‡‡ç”¨åŠ¨é‡ä¸º0.9%ã€æƒå€¼ä¸º0.0005çš„éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆSGDï¼‰å¯¹æ•´ä¸ªç½‘ç»œè¿›è¡Œ1ä¸‡æ¬¡è¿­ä»£ä¼˜åŒ–ã€‚å­¦ä¹ ç‡ç”±ï¼ˆPoly Strategyï¼‰å¤šç­–ç•¥è°ƒæ•´[25]ï¼Œåˆå§‹å­¦ä¹ ç‡ä¸º0.005ï¼Œå¹‚ä¸º0.9%ã€‚æˆ‘ä»¬å°†æ‰€æœ‰å·²æ ‡è®°å’Œæœªæ ‡è®°å›¾åƒçš„å¤§å°è°ƒæ•´ä¸º<code>416Ã—416</code>ï¼Œç”¨äºåœ¨å•ä¸ªGTX2080Ti GPUä¸Šè®­ç»ƒç½‘ç»œï¼Œå¹¶é€šè¿‡éšæœºæ°´å¹³ç¿»è½¬æ¥æ‰©å¤§è®­ç»ƒé›†ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æœ€å°æ‰¹æ¬¡å¤§å°ä¸º6ï¼Œå®ƒç”±4ä¸ªæ ‡è®°å›¾åƒå’Œ2ä¸ªæœªæ ‡è®°æ•°æ®å›¾åƒç»„æˆã€‚</p><h4 id="æ¨è®º">æ¨è®º</h4><p>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¾“å…¥å›¾åƒçš„å¤§å°è°ƒæ•´ä¸º<code>416Ã—416</code>ï¼Œå°†è°ƒæ•´åçš„å›¾åƒé€å…¥<strong>å­¦ç”Ÿç½‘ç»œ</strong>ï¼Œå¹¶è·å–æœ€å³ä¾§çš„é˜´å½±åŒºåŸŸæ£€æµ‹map(å›¾3ä¸­çš„$S_f$)ä½œä¸ºMTMT-Netçš„æœ€ç»ˆè¾“å‡ºã€‚åœ¨æœ€è¿‘çš„é˜´å½±æ£€æµ‹ç½‘ç»œ[43ï¼Œ41]çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åº”ç”¨<strong>å…¨è¿é€šæ¡ä»¶éšæœºåœº(CRF)</strong>[20]å¯¹ç½‘ç»œçš„é¢„æµ‹ç»“æœè¿›è¡Œäº†è¿›ä¸€æ­¥çš„åå¤„ç†ã€‚</p><h2 id="4-Experimental-Results-ğŸ’¡">4. Experimental Results ğŸ’¡</h2><p>åœ¨è¿™èŠ‚ï¼Œæˆ‘ä»¬é¦–å…ˆå±•ç¤ºäº†é˜´å½±æ£€æµ‹åŸºå‡†æ•°æ®é›†å’Œè¯„ä¼°åº¦é‡ï¼Œè¿›è€Œæ¯”è¾ƒäº†MTMT-netå’Œç°åœ¨å…ˆè¿›çš„å…³äºé˜´å½±æ£€æµ‹å™¨å’Œé˜´å½±å»é™¤ï¼Œæ˜¾è‘—æ€§æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²çš„ç»“æœï¼Œæœ€åæŠ¥å‘Šæ¶ˆèç ”ç©¶ç»“æœã€‚æˆ‘ä»¬åœ¨ä¸‰ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„ä»£ç ã€æ¨¡å‹å‚æ•°å’Œé˜´å½±æ£€æµ‹ç»“æœå·²åœ¨https://github.com/eraserNut/MTMT.å‘å¸ƒ</p><h3 id="4-1-æ•°æ®é›†å’Œè¯„ä¼°æŒ‡æ ‡">4.1 æ•°æ®é›†å’Œè¯„ä¼°æŒ‡æ ‡</h3><h4 id="Benchmark-datasets">Benchmark datasets</h4><p>æˆ‘ä»¬åœ¨ä¸‰ä¸ªå¹¿æ³›ä½¿ç”¨çš„é˜´å½±æ£€æµ‹åŸºå‡†æ•°æ®é›†SBU[33]ã€UCF[42]å’ŒISTD[35]ä¸Šå¯¹æˆ‘ä»¬çš„æ–¹æ³•è¿›è¡Œäº†è¯„ä¼°ï¼š(I)SBUæ•°æ®é›†æ˜¯æœ€å¤§çš„å¸¦æ ‡æ³¨çš„é˜´å½±æ•°æ®é›†ï¼Œæœ‰4089å¹…è®­ç»ƒå›¾åƒå’Œ638å¹…æµ‹è¯•å›¾åƒï¼›(Ii)UCFæ•°æ®é›†åŒ…æ‹¬145å¹…è®­ç»ƒå›¾åƒå’Œ76å¹…æµ‹è¯•å›¾åƒï¼Œè¦†ç›–äº†å®¤å¤–åœºæ™¯ï¼›(Iii)ISTDæ˜¯æœ€è¿‘å¼€å‘çš„ä¸€ç§åŒæ—¶ç”¨äºé˜´å½±æ£€æµ‹å’Œå»é™¤çš„æ•°æ®é›†ã€‚å®ƒæœ‰1870ä¸ªä¸‰å…ƒç»„çš„é˜´å½±å›¾åƒã€é˜´å½±è´´å›¾å’Œæ— é˜´å½±å›¾åƒï¼Œå…¶ä¸­540ä¸ªç”¨äºæµ‹è¯•ã€‚ç±»ä¼¼äºæœ€è¿‘çš„å·¥ä½œ[12ï¼Œ24ï¼Œ43ï¼Œ41]ï¼Œå¯¹äºSBUå’ŒUCFï¼Œæˆ‘ä»¬é€šè¿‡åœ¨SBUè®­ç»ƒé›†å’Œæˆ‘ä»¬çš„æœªæ ‡è®°æ•°æ®é›†ä¸Šè®­ç»ƒæˆ‘ä»¬çš„ç½‘ç»œæ¥è·å¾—è¯„ä¼°ç»“æœã€‚ç”±äºISTDåªåŒ…å«ä¸SBUå›¾åƒä¸åŒçš„æŠ•å°„é˜´å½±å›¾åƒï¼ŒæŒ‰ç…§[41]ï¼Œæˆ‘ä»¬ä½¿ç”¨æœªæ ‡è®°çš„æ•°æ®åœ¨ISTDè®­ç»ƒæ•°æ®é›†ä¸Šé‡æ–°è®­ç»ƒæˆ‘ä»¬çš„æ–¹æ³•å’Œå¤§å¤šæ•°ç«äº‰å¯¹æ‰‹ã€‚æˆ‘ä»¬SBUçš„åŸ¹è®­æ—¶é—´æ˜¯1å°æ—¶ï¼ŒISTDçš„åŸ¹è®­æ—¶é—´æ˜¯0.5å°æ—¶ã€‚æˆ‘ä»¬ç½‘ç»œçš„æ¨¡å‹è§„æ¨¡æ˜¯169ç±³ã€‚åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çš„MTMT-Netå¤„ç†ä¸€å¹…416Ã—416å›¾åƒçš„åˆ†è¾¨ç‡å¤§çº¦éœ€è¦0.05ç§’ã€‚</p><h4 id="Evaluation-metric">Evaluation metric</h4><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¸¸ç”¨çš„åº¦é‡ï¼Œå³å¹³è¡¡é”™è¯¯ç‡(BER)æ¥å®šé‡è¯„ä¼°é˜´å½±æ£€æµ‹æ€§èƒ½ã€‚BER[43ï¼Œ12]åŒç­‰è€ƒè™‘é˜´å½±åŒºåŸŸå’Œéé˜´å½±åŒºåŸŸçš„è´¨é‡ï¼Œè¿™ç”±ä»¥ä¸‹å…¬å¼ç»™å‡ºï¼š</p>$$BER = (1- \frac 1 2(\frac {N_{tp}}{N_p}+ \frac {N_{tn}}{N_n})) \times 100, \quad \quad (11)$$<p>è¿™é‡Œçš„$N_{tp},N_{tn},N_p,N_n$åˆ†åˆ«è¡¨ç¤ºçš„æ˜¯çœŸé˜³æ€§æ•°ç›®ï¼ŒçœŸé˜´æ€§æ•°ç›®ï¼Œä¸€å¼ å›¾ç‰‡çš„é˜´å½±åƒç´ å’Œéé˜´å½±åƒç´ çš„æ•°ç›®ã€‚è¾ƒå°çš„BERå€¼è¡¨ç¤ºè¾ƒå¥½çš„é˜´å½±æ£€æµ‹æ€§èƒ½ã€‚</p><h3 id="4-2-Comparison-with-the-State-of-the-art-ShadowDetectors">4.2 Comparison with the State-of-the-art ShadowDetectors</h3><p>æ¯”è¾ƒäº†DSDNet[41]ã€DC-DSPF[37]ã€BDRAR[43]ã€AD-Net[24]ã€DSC[12]ã€ST-CGAN[35]ã€Patched-CNN[8]ã€scGAN[28]ã€Stack-CNN[33]å’ŒUnary-Pair[7]ç­‰10ç§é˜´å½±æ£€æµ‹å™¨çš„æ€§èƒ½ã€‚</p><h4 id="è´¨é‡å¯¹æ¯”">è´¨é‡å¯¹æ¯”</h4><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_tab1.png" alt=""></p><p>è¡¨1æ€»ç»“äº†ä¸åŒæ–¹æ³•åœ¨ä¸‰ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„å®šé‡ç»“æœã€‚BERåˆ†æ•°æ˜¯é˜´å½±å’Œéé˜´å½±BERåˆ†æ•°çš„å¹³å‡å€¼ã€‚æ˜¾ç„¶ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•[33ï¼Œ12ï¼Œ8]æ¯”æ‰‹å·¥è®¾è®¡çš„æ£€æµ‹å™¨[7]å…·æœ‰æ›´å°çš„è¯¯ç ç‡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä»æ ‡æ³¨çš„è®­ç»ƒå›¾åƒä¸­å­¦ä¹ åˆ°æ›´å¼ºå¤§çš„é˜´å½±æ£€æµ‹ç‰¹å¾ã€‚åœ¨åŸºäºæ·±åº¦å­¦ä¹ çš„é˜´å½±æ£€æµ‹å™¨ä¸­ï¼ŒDSDNet[41]æ˜¯æ€§èƒ½ç¬¬äºŒå¥½çš„æ–¹æ³•ï¼Œå®ƒæ˜¾å¼å­¦ä¹ å¹¶é›†æˆè™šæ‹Ÿå¹²æ‰°åŒºåŸŸçš„è¯­ä¹‰æ¥æ¨æ–­é˜´å½±ã€‚ä¸ç°æœ‰æ€§èƒ½æœ€å¥½çš„æ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨SBUã€UCFå’ŒISTDä¸Šçš„è¯¯ç ç‡å¾—åˆ†åˆ†åˆ«é™ä½äº†8.70%ã€1.58%å’Œ20.7%ã€‚æ­¤å¤–ï¼Œå¯¹äºSBUå’ŒUCFï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨éé˜´å½±åƒç´ ä¸Šå…·æœ‰æ›´å¥½çš„è¯¯ç ç‡å¾—åˆ†ï¼Œå¯¹äºISTDï¼Œåœ¨é˜´å½±åƒç´ ä¸Šå…·æœ‰æ›´å¥½çš„è¯¯ç ç‡å¾—åˆ†ã€‚è¿™è¡¨æ˜æˆ‘ä»¬çš„ç½‘ç»œå¯¹SBUå’ŒUCFé¢„æµ‹äº†æ›´å¤šçš„é˜´å½±åƒç´ ï¼Œå¹¶å‡å°‘äº†å¯¹ISTDçš„éé˜´å½±åŒºåŸŸçš„è¯¯æŠ¥é¢„æµ‹ã€‚ä¸ä¸‰ç§æ¯”è¾ƒæ–¹æ³•[43ï¼Œ12ï¼Œ41]ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨CRF[20]ä½œä¸ºåå¤„ç†ã€‚åœ¨å›¾è¡¨1çš„ç¬¬äºŒè¡Œå±•ç¤ºäº†ä¸ä½¿ç”¨CRFæƒ…å†µä¸‹çš„MTMT-netã€‚ç»“æœè¡¨æ˜ï¼Œä¸»è¦æ˜¯åœ¨UCFæ•°æ®é›†ä¸Šä½¿ç”¨CRFå–å¾—äº†ä¸€å®šç¨‹åº¦çš„æ”¹è¿›ï¼Œè€Œä¸ä½¿ç”¨CRFä»ç„¶å–å¾—äº†æ¯”å¤§å¤šæ•°æœ€å…ˆè¿›çš„æ–¹æ³•æ›´å¥½çš„æ€§èƒ½ã€‚</p><h4 id="è§†è§‰å¯¹æ¯”">è§†è§‰å¯¹æ¯”</h4><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_fig4.png" alt=""></p><p>æˆ‘ä»¬è¿›ä¸€æ­¥å°†æˆ‘ä»¬çš„æ–¹æ³•ç”Ÿæˆçš„é˜´å½±æ£€æµ‹å›¾ä¸ç›®å‰æœ€å…ˆè¿›çš„é˜´å½±æ£€æµ‹å›¾è¿›è¡Œäº†ç›´è§‚çš„æ¯”è¾ƒï¼Œå¦‚å›¾4æ‰€ç¤ºã€‚ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„MTMTç½‘(å›¾4çš„ç¬¬3åˆ—)åœ¨æ‰€æœ‰é˜´å½±æ£€æµ‹å™¨ä¸­å…·æœ‰æœ€å¥½çš„æ€§èƒ½ã€‚å®ƒå¯ä»¥æœ‰æ•ˆåœ°å®šä½ä¸åŒèƒŒæ™¯ä¸‹çš„ä¸åŒé˜´å½±ï¼Œå¹¶æˆåŠŸåœ°å°†çœŸå®é˜´å½±ä¸å…·æœ‰é˜´å½±å¤–è§‚çš„éé˜´å½±åŒºåŸŸåŒºåˆ†å¼€æ¥ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¬¬3ã€5å’Œ7è¡Œï¼ŒMTMT-Netèƒ½å¤Ÿå‡†ç¡®åœ°æ£€æµ‹å‡ºé˜´å½±åŒºåŸŸï¼Œè€Œå…¶ä»–ç®—æ³•åˆ™åˆ†åˆ«é”™è¯¯åœ°è¯†åˆ«äº†é“è·¯ã€å¤©ç©ºå’Œæš—åœ°é˜´å½±ã€‚æ­¤å¤–ï¼Œå¯¹äºå¤§é˜´å½±åŒºåŸŸä¸­çš„é«˜å¯¹æ¯”åº¦ç›®æ ‡ï¼ŒMTMT-NETä»èƒ½å°†å…¶è¯†åˆ«ä¸ºé˜´å½±ï¼Œå¦‚åä¸¤è¡Œæ‰€ç¤ºã€‚</p><h3 id="4-3-é˜´å½±å»é™¤ã€ç¨³å¥æ€§æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²æ–¹æ³•çš„æ¯”è¾ƒ">4.3 é˜´å½±å»é™¤ã€ç¨³å¥æ€§æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²æ–¹æ³•çš„æ¯”è¾ƒ</h3><p>è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºé˜´å½±ç§»åŠ¨ã€æ˜¾è‘—æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²è€Œè®¾è®¡çš„æ·±å±‚ç½‘ç»œå¯ä»¥é€šè¿‡ä½¿ç”¨å¸¦æ³¨é‡Šçš„é˜´å½±æ•°æ®é›†æ¥é‡æ–°è®­ç»ƒä»¥ç”¨äºé˜´å½±æ£€æµ‹ã€‚ä¸ºäº†è¿›ä¸€æ­¥è¯„ä¼°æˆ‘ä»¬æ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬åº”ç”¨äº†</p><ul><li><p>é˜´å½±å»é™¤æ¨¡å‹</p><ul><li>DeshadowNet</li></ul></li><li><p>ä¸‰ç§æ˜¾è‘—æ£€æµ‹æ¨¡å‹ï¼š</p><ul><li>SRM</li><li>Amulet</li><li>EGNet</li></ul></li><li><p>åŸºäºé˜´å½±æ£€æµ‹æ•°æ®é›†çš„è¯­ä¹‰åˆ†å‰²æ¨¡å‹</p><ul><li>PSPNet</li></ul></li></ul><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_tab1.png" alt=""></p><p>æˆ‘ä»¬é‡‡ç”¨å·²æœ‰çš„æ¯”è¾ƒæ–¹æ³•çš„ç»“æœï¼Œæ— è®ºæ˜¯é‡æ–°è®­ç»ƒå‘å¸ƒçš„ä»£ç è¿˜æ˜¯ä½¿ç”¨æŠ¥å‘Šçš„æ–¹æ³•ï¼Œä¸ºäº†å…¬å¹³æ¯”è¾ƒï¼Œæˆ‘ä»¬å°½é‡å¾®è°ƒå®ƒä»¬çš„è®­ç»ƒå‚æ•°ï¼Œé€‰æ‹©æœ€å¥½çš„é˜´å½±æ£€æµ‹ç»“æœã€‚è¡¨1ä¸­çš„æœ€åäº”è¡ŒæŠ¥å‘Šäº†å®ƒä»¬çš„è¯¯ç ç‡å€¼ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™äº›æ¨¡å‹å¯ä»¥è·å¾—æ¯”ä¸€äº›ç°æœ‰é˜´å½±æ£€æµ‹å™¨æ›´å¥½çš„è¯¯ç ç‡æ€§èƒ½ï¼Œä½†ä»ç„¶æ¯”æˆ‘ä»¬çš„ç½‘ç»œå·®ã€‚</p><h3 id="4-4-Ablation-Analysis">4.4 Ablation Analysis</h3><blockquote><p>ã€Œæ¶ˆèåˆ†æã€ï¼ˆAblative analysisï¼‰å°è¯•å»è§£é‡Šä¸€äº›åŸºçº¿è¡¨ç°ï¼ˆé€šå¸¸è¡¨ç°æ›´å·®ï¼‰ä¸å½“å‰è¡¨ç°çš„å·®åˆ«ã€‚</p><p><strong>æ¶ˆèåˆ†æçš„æ–¹æ³•æ˜¯ä»æœ€ä½³è¡¨ç°å‡ºå‘ï¼Œé€æ­¥å»é™¤è¿™äº›ç‰¹å¾ï¼Œè§‚å¯Ÿç®—æ³•çš„å‡†ç¡®ç‡å˜åŒ–</strong>ï¼Œç›®çš„å…¶å®å°±æ˜¯ä¸ºäº†æ§åˆ¶å˜é‡ã€‚</p></blockquote><h4 id="Baseline-network-design">Baseline network design</h4><h5 id="å¤šä»»åŠ¡ç›‘ç£æŸå¤±">å¤šä»»åŠ¡ç›‘ç£æŸå¤±</h5>$$\mathcal{L}^s(x) = \mathcal{L}^s_r+\alpha \mathcal{L}^s_e + \beta \mathcal{L}^s_c \quad \quad (5)$$<h5 id="å¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±">å¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±</h5>$$\mathcal L^c(y) = \mathcal L^c_r + \mathcal L^c_e  + \mathcal L^c_c \quad \quad \quad \quad (7)$$<p>æˆ‘ä»¬æ‰§è¡Œæ¶ˆèç ”ç©¶å®éªŒæ¥è¯„ä¼°æ‰€æè®®çš„å¤šä»»åŠ¡ç›‘ç£æŸå¤±(è§å…¬å¼(5))å’Œå¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±(å‚è§å…¬å¼(7)æˆ‘ä»¬çš„MTMT-Netã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è€ƒè™‘ä¸ƒä¸ªåŸºçº¿ç½‘ç»œã€‚</p><p>å‰å››ä¸ªåŸºçº¿ç½‘ç»œæ˜¯é€šè¿‡é‡æ–°ç§»é™¤æ•™å¸ˆæ¨¡å‹æ¥æ„å»ºçš„ã€‚è¿™æ„å‘³ç€åªæœ‰æ ‡ç­¾æ•°æ®çš„ç›‘ç£ä¸¢å¤±æ‰èƒ½ç”¨äºMT-CNNçš„è®­ç»ƒã€‚å…·ä½“åœ°è¯´ï¼Œç¬¬ä¸€åŸºçº¿ç½‘ç»œ(è¡¨ç¤ºä¸ºâ€œBASICâ€)ä»…è€ƒè™‘é˜´å½±åŒºåŸŸæ£€æµ‹ç›‘ç£æŸå¤±($\mathcal L^s_r$ inEq.(5))ã€‚ç¬¬äºŒç§(è¡¨ç¤ºä¸ºâ€œbasic+SEâ€)æ˜¯æ·»åŠ é˜´å½±è¾¹ç¼˜æ£€æµ‹ç›‘ç£æŸå¤±($\mathcal L^s_e$ of Eq.(5))ï¼Œè€Œç¬¬ä¸‰ä¸ª(è¡¨ç¤ºä¸ºâ€œbasic+SCâ€)æ˜¯æ·»åŠ é˜´å½±è®¡æ•°æ£€æµ‹ç›‘ç£æŸå¤±($\mathcal L^s_c$of Eq.(5))ã€‚å››æ˜¯å°†ä¸‰é¡¹ä»»åŠ¡çš„ç›‘ç£æŸå¤±èåˆåœ¨ä¸€èµ·ã€‚</p><p>å¦å¤–ä¸‰ä¸ªåŸºçº¿ç½‘ç»œæ˜¯å»ºç«‹ç”¨äºæ£€éªŒåœ¨æœªæ ‡æ³¨å¤šä»»åŠ¡ä¸€è‡´æ€§æŸå¤±ã€‚</p><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•(è®°ä¸ºâ€œbasic-MTâ€)åªè€ƒè™‘é˜´å½±åŒºåŸŸä»»åŠ¡çš„Mean teacheræ¨¡å‹ã€‚,é€šè¿‡èåˆç­‰å¼çš„ç›‘ç£æŸå¤±($\mathcal L^s_R$of å…¬å¼(5))å’Œä¸€è‡´æ€§æŸå¤±($\mathcal L^c_r $  of å…¬å¼(7))ã€‚</p></li><li><p>ç¬¬äºŒç§æ–¹æ³•(è®°ä¸ºâ€œbasic-MT+SE-MTâ€)æ˜¯å°†mean teacheræ¨¡å‹åº”ç”¨äºé˜´å½±åŒºåŸŸæ£€æµ‹å’Œé˜´å½±è¾¹ç¼˜æ£€æµ‹ï¼Œ</p>  $$  å…¬å¼5ä¸­çš„ \mathcal{L}^s_r,\mathcal{L}^s_eï¼Œå’Œå…¬å¼7ä¸­çš„ \mathcal{L}^c_r,\mathcal{L}^c_e  $$  <p>ç”¨äºè®­ç»ƒç½‘ç»œã€‚</p></li><li><p>æœ€åä¸€ç§æ–¹æ³•(è®°ä¸ºâ€œbasic-MT+SC-MTâ€)é‡‡ç”¨å¹³å‡æ•™å¸ˆæ¨¡å‹è¿›è¡Œé˜´å½±åŒºåŸŸæ£€æµ‹å’Œé˜´å½±è®¡æ•°æ£€æµ‹ã€‚æ¢è¨€ä¹‹ï¼Œç›‘ç£æŸå¤±å’Œå’Œä¸€è‡´æ€§æŸå¤±ç”¨äºç½‘ç»œè®­ç»ƒã€‚</p>  $$  å…¬å¼5ä¸­çš„ \mathcal{L}^s_r,\mathcal{L}^s_c å’Œå…¬å¼7ä¸­çš„\mathcal{L}^c_r,\mathcal{L}^c_c  $$  </li></ul><p>æˆ‘ä»¬ä½¿ç”¨SBUè®­ç»ƒé›†å’Œæˆ‘ä»¬çš„æœªæ ‡è®°æ•°æ®å¯¹æ‰€æœ‰ä¸ƒä¸ªåŸºçº¿ç½‘ç»œè¿›è¡Œè®­ç»ƒï¼Œä»¥è·å¾—SBUå’ŒUCFçš„ç»“æœã€‚å¯¹äºISTDï¼Œæˆ‘ä»¬ä½¿ç”¨ISTDè®­ç»ƒé›†å’Œæˆ‘ä»¬çš„æœªæ ‡è®°æ•°æ®æ¥è®­ç»ƒæ‰€æœ‰å››ä¸ªç½‘ç»œï¼Œå¹¶ä½¿ç”¨ISTDæµ‹è¯•é›†å¯¹å®ƒä»¬è¿›è¡Œæµ‹è¯•ã€‚</p><h4 id="è´¨é‡å¯¹æ¯”-2">è´¨é‡å¯¹æ¯”</h4><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_tab2.png" alt=""></p><p>è¡¨2æ€»ç»“äº†æˆ‘ä»¬çš„ç½‘ç»œå’Œä¸ƒä¸ªåŸºå‡†ç½‘ç»œåœ¨ä¸‰ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„BERå€¼ã€‚ç»“æœè¡¨æ˜ï¼š</p><h5 id="Basis">Basis</h5><p>(i)â€œBASIC+SEâ€å’Œâ€œBASIC+SCâ€æ¯”â€œBASICâ€å…·æœ‰æ›´é«˜çš„è¯¯ç ç‡ï¼Œè¿™æ„å‘³ç€<strong>é˜´å½±è¾¹ç•Œå’Œé˜´å½±è®¡æ•°çš„æ£€æµ‹å¯ä»¥ä¸ºé˜´å½±æ£€æµ‹æä¾›æœ‰ç”¨çš„ä¿¡æ¯ã€‚</strong></p><p>(ii)â€œBASIC+ä¸‰ä»»åŠ¡â€æ¯”â€œBASIC+SEâ€å’Œâ€œBASIC+SCâ€å…·æœ‰æ›´å¥½çš„è¯¯ç ç‡æ€§èƒ½ï¼Œè¯´æ˜å°†è¿™ä¸‰ä¸ªä»»åŠ¡èåˆåœ¨ä¸€èµ·è¿›è¡Œæœ‰ç›‘ç£çš„é˜´å½±æ£€æµ‹å…·æœ‰æ›´å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚</p><p>(iii)â€œBASIC-MTâ€æ¯”â€œBASICâ€èƒ½æ›´å‡†ç¡®åœ°æ£€æµ‹å‡ºé˜´å½±åƒç´ ï¼Œå› ä¸ºå®ƒçš„è¯¯ç ç‡è¾ƒå°ã€‚è¿™è¡¨æ˜äº†é¢å¤–çš„æœªæ ‡è®°æ•°æ®çš„ä¸€è‡´æ€§æŸå¤±å…·æœ‰æ›´å¥½çš„é˜´å½±æ£€æµ‹æ€§èƒ½ã€‚</p><h5 id="MTMT">MTMT</h5><p>(iv)â€œBASIC-MT+SE-MTâ€å’Œâ€œBASIC-MT+SC-MTâ€æ¯”â€œBASIC-MTâ€äº§ç”Ÿçš„è¯¯ç ç‡å°ï¼Œè¯´æ˜é˜´å½±è¾¹ç¼˜æ£€æµ‹å’Œé˜´å½±åŒºåŸŸæ£€æµ‹æœ‰åˆ©äºé˜´å½±æ£€æµ‹çš„mean-teacheræ¨¡å‹ã€‚</p><p>(v)ç”±äºâ€œBASIC-MT+SE-MTâ€æ¯”â€œBASIC-MT+SC-MTâ€å…·æœ‰æ›´å¥½çš„è¯¯ç ç‡ç»“æœï¼Œæ‰€ä»¥<strong>é˜´å½±è¾¹ç¼˜æ£€æµ‹æ¯”é˜´å½±è®¡æ•°æ£€æµ‹å¯¹æˆ‘ä»¬æ–¹æ³•çš„æˆåŠŸæœ‰æ›´å¤§çš„è´¡çŒ®ï¼Œè¿™æ˜¯å› ä¸ºâ€œBASIC-MT+SE-MTâ€æ¯”â€œBASIC-MT+SC-MTâ€æœ‰æ›´å¥½çš„è¯¯ç ç‡ã€‚</strong></p><p>(vi)é€šè¿‡è®¾è®¡ä¸€ä¸ªä¸‰ä»»åŠ¡mean teacheræ¨¡å‹ï¼Œæˆ‘ä»¬çš„MTMT-Netåœ¨ä¸‰ä¸ªåŸºå‡†ä¸Šå…·æœ‰æœ€å¥½çš„è¯¯ç ç‡æ€§èƒ½ã€‚</p><h4 id="è§†è§‰å¯¹æ¯”-2">è§†è§‰å¯¹æ¯”</h4><p><img src="https://picture.mulindya.com/Apaper_collect/Mean_Teacher_fig5.png" alt=""></p><p>æ­¤å¤–ï¼Œå›¾(5)ç›´è§‚åœ°æ¯”è¾ƒäº†æˆ‘ä»¬çš„MTMTç½‘å’Œä¸ƒä¸ªåŸºçº¿ç½‘ç»œç”Ÿæˆçš„é˜´å½±å›¾ã€‚æ˜¾ç„¶ï¼Œæ— è®ºåœ¨é˜´å½±åˆ†å‰²è´¨é‡è¿˜æ˜¯å®šä½ç²¾åº¦ä¸Šï¼Œæˆ‘ä»¬çš„æ–¹æ³•éƒ½æ¯”æ‰€æœ‰ä¸ƒä¸ªåŸºçº¿ç½‘ç»œéƒ½èƒ½æ›´å¥½åœ°è¯†åˆ«é˜´å½±ã€‚è¿™è¯æ˜äº†åœ¨ä¸€ä¸ªæ¡†æ¶å†…è€ƒè™‘é˜´å½±è¾¹ç¼˜ã€é˜´å½±è®¡æ•°ä¿¡æ¯å’Œæœªæ ‡è®°æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>å»å™ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>å»å™ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft207 è¯¾ç¨‹è¡¨</title>
    <link href="/2022/03/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft207/"/>
    <url>/2022/03/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft207/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¯¾ç¨‹è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® numCourses é—¨è¯¾ç¨‹ï¼Œè®°ä¸º&nbsp;0&nbsp;åˆ°&nbsp;numCourses - 1 ã€‚</p><p>åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„&nbsp;prerequisites ç»™å‡ºï¼Œå…¶ä¸­&nbsp;prerequisites[i] = [ai, bi] ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹&nbsp;ai åˆ™ å¿…é¡» å…ˆå­¦ä¹ è¯¾ç¨‹&nbsp; bi ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹&nbsp;[0, 1] è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚<br>è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šnumCourses = <span class="hljs-number">2</span>, prerequisites = <span class="hljs-string">[[1,0]]</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼šæ€»å…±æœ‰ <span class="hljs-number">2</span> é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ <span class="hljs-number">1</span> ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ <span class="hljs-number">0</span> ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šnumCourses = <span class="hljs-number">2</span>, prerequisites = <span class="hljs-string">[[1,0],[0,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br>è§£é‡Šï¼šæ€»å…±æœ‰ <span class="hljs-number">2</span> é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ <span class="hljs-number">1</span> ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆâ€‹è¯¾ç¨‹ <span class="hljs-number">0</span> ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ <span class="hljs-number">0</span> ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ <span class="hljs-number">1</span> ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= numCourses &lt;= 105</li><li>0 &lt;= prerequisites.length &lt;= 5000</li><li>prerequisites[i].length == 2</li><li>0 &lt;= ai, bi &lt; numCourses</li><li>prerequisites[i] ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ äº’ä¸ç›¸åŒ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç›®æ ‡æ˜¯åˆ¤æ–­è¯¾ç¨‹å®‰æ’å›¾æ˜¯å¦ä¸ºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰<br>æ€è·¯æ˜¯é€šè¿‡æ‹“æ‰‘æ’åºåˆ¤æ–­ï¼ŒåŸç†æ˜¯å¯¹DAGçš„é¡¶ç‚¹è¿›è¡Œæ’åºï¼Œä½¿å¾—æ¯ä¸€æ¡æœ‰å‘è¾¹ï¼ˆuï¼Œvï¼‰ï¼Œå‡æœ‰uï¼ˆåœ¨æ’åºè®°å½•ä¸­æ¯”vå…ˆå‡ºç°ï¼‰ï¼Œä¹Ÿå°±æ˜¯å°±è¯´å¯¹äºæŸç‚¹vè€Œè¨€ï¼Œå¿…é¡»å…¶æºç‚¹éƒ½å‡ºç°äº†ï¼Œvæ‰èƒ½å‡ºç°ã€‚</p><h4 id="æ–¹æ³•ä¸€-å…¥åº¦è¡¨ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰">æ–¹æ³•ä¸€: å…¥åº¦è¡¨ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">canFinish</span>(<span class="hljs-params">self, numCourses: <span class="hljs-built_in">int</span>, prerequisites: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>        indegrees = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses)] <span class="hljs-comment">#æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦ä¸ªæ•°è®°å½•</span><br>        adjacency = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses)] <span class="hljs-comment">#é‚»æ¥è¡¨</span><br>        <span class="hljs-keyword">for</span> cur,pre <span class="hljs-keyword">in</span> prerequisites: <span class="hljs-comment">#åˆå§‹åŒ–</span><br>            adjacency[pre].append(cur)<br>            indegrees[cur] += <span class="hljs-number">1</span><br>         <span class="hljs-comment">#å¯»æ‰¾å¼€å§‹èŠ‚ç‚¹</span><br>        queue = deque()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> indegrees[i]: queue.append(i)<br>        <span class="hljs-comment"># BFS</span><br>        <span class="hljs-keyword">while</span> queue:<br>            pre = queue.popleft() <span class="hljs-comment">#å¼¹å‡ºä¸€ä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹</span><br>            numCourses -= <span class="hljs-number">1</span> <span class="hljs-comment">#å¼¹å‡ºä¸€ä¸ªå°±å¯ä»¥æ¶ˆå‡ä¸€ä¸ª</span><br>            <span class="hljs-keyword">for</span> cur <span class="hljs-keyword">in</span> adjacency[pre]: <span class="hljs-comment">#åˆ¤æ–­æ­¤èŠ‚ç‚¹æ˜¯å¦å…¥åº¦ä¸º0</span><br>                indegrees[cur] -= <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> indegrees[cur]: queue.append(cur)<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> numCourses<br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨pythonä¸­é˜Ÿåˆ—å¯ä»¥ç”¨listå®ç°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">queue = <span class="hljs-built_in">list</span>() <br>queue.append(num) <span class="hljs-comment">#å‹å…¥</span><br>queue.pop(<span class="hljs-number">0</span>) <span class="hljs-comment">#å¼¹å‡ºï¼ŒæŒ‡å®šä¸‹æ ‡æ˜¯0</span><br></code></pre></td></tr></tbody></table></figure><p>æ ˆä¹Ÿå¯ä»¥ä½¿ç”¨listå®ç°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">stack = <span class="hljs-built_in">list</span>() <br>stack.append(num) <span class="hljs-comment">#å‹å…¥</span><br>stack.pop() <span class="hljs-comment">#å¼¹å‡ºï¼Œé»˜è®¤å¼¹å‡ºæœ«å°¾çš„èŠ‚ç‚¹</span><br></code></pre></td></tr></tbody></table></figure><p>Pythonä¸­çš„collentionsä¸­æœ‰ä¸€ä¸ª<a href="https://so.csdn.net/so/search?q=deque&amp;spm=1001.2101.3001.7020">deque</a>ï¼Œè¿™ä¸ªå¯¹è±¡ç±»ä¼¼äºliståˆ—è¡¨ï¼Œä½†æ˜¯ä½¿ç”¨listå­˜å‚¨æ•°æ®æ˜¯ï¼ŒæŒ‰ç´¢å¼•è®¿é—®å…ƒç´ å¾ˆå¿«ï¼Œä½†æ˜¯æ’å…¥å’Œåˆ é™¤å°±å¾ˆæ…¢äº†ï¼Œå› ä¸ºlistæ˜¯çº¿æ€§å­˜å‚¨ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡å¾ˆä½ã€‚dequeæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„æ‰€ä»¥åœ¨ä½¿ç”¨æ ˆæˆ–è€…é˜Ÿåˆ—æ›´æ¨èä½¿ç”¨dequeæ¥å®ç°ã€‚</p><p>dequeå¯ä»¥ç†è§£ä¸ºåŒå‘é˜Ÿåˆ—</p><ul><li><p>appendï¼Œpopï¼Œextendé»˜è®¤ä»å³ç«¯æ“ä½œæ•°æ®</p></li><li><p>appendleft åœ¨åˆ—è¡¨å·¦ä¾§æ’å…¥</p></li><li><p>popleft å¼¹å‡ºåˆ—è¡¨å·¦ä¾§çš„å€¼</p></li><li><p>extendleft åœ¨å·¦ä¾§æ‰©å±•<strong>ä¸€ç»„</strong></p></li></ul></blockquote><h4 id="æ–¹æ³•äºŒï¼šæ·±åº¦ä¼˜å…ˆéå†">æ–¹æ³•äºŒï¼šæ·±åº¦ä¼˜å…ˆéå†</h4><p>åŸç†æ˜¯é€šè¿‡DFSåˆ¤æ–­å›¾ä¸­æ˜¯å¦æœ‰ç¯</p><p>å€ŸåŠ©ä¸€ä¸ªæ ‡å¿—åˆ—è¡¨flagsï¼Œç”¨äºåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹içš„çŠ¶æ€ï¼š</p><ol><li>æœªè¢«DFSè®¿é—®æ—¶æ ‡å¿—ä¸º0</li><li>å·²ç»è¢«å…¶ä»–èŠ‚ç‚¹è®¿é—®è¿‡å°±æ— éœ€è®¿é—®äº†æ ‡å¿—ä½-1</li><li>è¢«å½“å‰çš„DFSè®¿é—®æ ‡å¿—ä½1ï¼Œå¦‚æœå½“å‰è·¯å¾„åˆè®¿é—®è¯¥èŠ‚ç‚¹åˆ™è¯´æ˜æœ‰ç¯</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">canFinish</span>(<span class="hljs-params">self, numCourses: <span class="hljs-built_in">int</span>, prerequisites: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,adjacency,flags</span>):</span><br>            <span class="hljs-keyword">if</span> flags[i] == -<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> flags[i] == <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            flags[i] = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> adjacency[i]:<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dfs(j,adjacency,flags): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> <span class="hljs-comment">#å‰ªæ</span><br>            flags[i] = -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        flags = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses)] <span class="hljs-comment">#æ¯ä¸ªèŠ‚ç‚¹çŠ¶æ€</span><br>        adjacency = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses)] <span class="hljs-comment">#é‚»æ¥è¡¨</span><br>        <span class="hljs-keyword">for</span> cur,pre <span class="hljs-keyword">in</span> prerequisites: <span class="hljs-comment">#åˆå§‹åŒ–</span><br>            adjacency[pre].append(cur)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numCourses):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dfs(i, adjacency, flags): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></tbody></table></figure><p>è¿™ä¸¤ç§æ–¹æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ºO(M+N)N å’Œ M åˆ†åˆ«ä¸ºèŠ‚ç‚¹æ•°é‡å’Œä¸´è¾¹æ•°é‡ï¼›</p>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ‹“æ‰‘æ’åº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ‹“æ‰‘æ’åº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤–åˆŠé˜…è¯»--Robots and Jobs</title>
    <link href="/2022/03/15/english/Robots_and_jobs/"/>
    <url>/2022/03/15/english/Robots_and_jobs/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¤–åˆŠç²¾è¯»ï¼šæœºå™¨äººæ˜¯å¦ä¼šå–ä»£äººç±»ï¼Œæ–‡ç« è¡¨æ˜æœºå™¨äººå¹¶ä¸ä¼šå–ä»£äººç±»ï¼Œåœ¨è‡ªåŠ¨åŒ–å…´èµ·çš„åŒæ—¶ä¼šæä¾›æ›´å¤šçš„èŒä¸šéœ€æ±‚ï¼Œå°±ä¸šç‡åè€Œå¢é•¿ã€‚</p><p><a href="https://paper.mulindya.com/Robots%20And%20Jobs.pdf">https://paper.mulindya.com/Robots And Jobs.pdf</a></p></blockquote><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Robots%20And%20Jobs.pdf" width="100%" height="600"></iframe>]]></content>
    
    
    <categories>
      
      <category>è‹±è¯­</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‹±è¯­</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤–åˆŠé˜…è¯»--Trouble in metaverse</title>
    <link href="/2022/03/14/english/trouble-in-metaverse/"/>
    <url>/2022/03/14/english/trouble-in-metaverse/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¤–åˆŠç²¾è¯»ï¼šå…³äºç§‘æŠ€å‘å±•ä¸­å¤§ä¼—çš„æŠµè§¦å¿ƒç†ï¼Œæ˜¯åº”è¯¥dismissè¿˜æ˜¯rethink</p><p><a href="https://paper.mulindya.com/Trouble%20In%20Metaverse.pdf">https://paper.mulindya.com/Trouble In Metaverse.pdf</a></p></blockquote><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Trouble%20In%20Metaverse.pdf" width="100%" height="600"></iframe>]]></content>
    
    
    <categories>
      
      <category>è‹±è¯­</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‹±è¯­</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Toward Convolutional Blind Denoising of Real Photographs</title>
    <link href="/2022/03/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/CBDnet/"/>
    <url>/2022/03/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/CBDnet/</url>
    
    <content type="html"><![CDATA[<blockquote><ul><li><p><a href="https://readpaper.com/pdf-annotate/note?noteId=660745234966142976&amp;pdfId=4544599851060060161">Toward Convolutional Blind Denoising of Real Photographs</a></p><p>ä¸»è¦å…³æ³¨å…¶å®éªŒéƒ¨åˆ†ï¼š</p><p>æ•°æ®é›†çš„é€‰ç”¨ï¼Œè¯„ä¼°å’Œå¯¹æ¯”çš„æ–¹å¼ï¼Œè¯„ä¼°å™ªå£°æ°´å¹³çš„æ ‡å‡†å’Œå¼•å…¥ã€‚</p><p>åœ¨å™ªå£°æ•°æ®è®­ç»ƒè¿™å—ï¼Œæ˜¯é‡‡ç”¨çš„åˆæˆå™ªå£°å’ŒçœŸå®å™ªå£°å›¾ç‰‡æ··åˆè¿›è¡Œè®­ç»ƒ</p><p>å› æ­¤éœ€è¦æ˜ç¡®åŠ å™ªæ–¹æ³•ï¼Œå¯¹ä¸åŒæ•°æ®é›†é‡‡å–ä¸åŒçš„åŠ å™ªæ–¹å¼ã€‚</p></li></ul></blockquote><h1>å…³äºçœŸå®ç…§ç‰‡å·ç§¯ç›²å»å™ªçš„ç ”ç©¶</h1><h2 id="0-Abstract">0. Abstract</h2><p>è™½ç„¶æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œåœ¨åŠ æ€§é«˜æ–¯ç™½å™ªå£°çš„å›¾åƒå»å™ªä¸Šå–å¾—äº†æ˜¾è‘—æˆå°±ï¼Œä½†æ˜¯åœ¨çœŸå®å™ªå£°å›¾åƒä¸Šçš„æ•ˆæœä»æœ‰å±€é™ã€‚ä¸»è¦çš„åŸå› åœ¨äºåœ¨AWGNçš„å›¾åƒä¸Šæ¨¡å‹å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå¯¼è‡´æ¨¡å‹ä¸¥é‡åç¦»äº†å¤æ‚å™ªå£°æ¨¡å‹ã€‚ä¸ºäº†æé«˜æ·±åº¦å·ç§¯å»å™ªå™¨çš„æ³›åŒ–èƒ½åŠ›ï¼Œæˆ‘ä»¬é‡‡ç”¨æ›´å…·çœŸå®å™ªå£°çš„æ¨¡å‹å·ç§¯ç›²å»å™ªç½‘ç»œâ€“ä½¿ç”¨çœŸå®å™ªå£°å’Œå¹²å‡€å›¾åƒå¯¹ã€‚ä¸€æ–¹é¢ï¼Œä¿¡å·ç›¸å…³å™ªå£°å’Œç›¸æœºå†…çš„ä¿¡å·å¤„ç†è¿‡ç¨‹æ˜¯åˆæˆçœŸå®å™ªå£°å›¾åƒçš„æ¥æºï¼Œå¦ä¸€æ–¹é¢ï¼ŒçœŸå®å™ªå£°çš„å›¾åƒå’Œæ— å™ªå£°å›¾åƒç”¨äºè®­ç»ƒCBDç½‘ç»œã€‚ä¸ºäº†è¿›ä¸€æ­¥æä¾›äº¤äº’å¼ç­–ç•¥æ¥æ–¹ä¾¿çŸ«æ­£å»å™ªç»“æœï¼Œæˆ‘ä»¬åœ¨CBDç½‘ç»œä¸­åµŒå…¥äº†ä¸€ä¸ªéå¯¹ç§°å­¦ä¹ çš„å™ªå£°ä¼°è®¡å­ç½‘ç»œç”¨æ¥æŠ‘åˆ¶å¯¹å™ªå£°æ°´å¹³çš„ä½ä¼°ã€‚åœ¨ä¸‰ä¸ªçœŸå®å™ªå£°ç…§ç‰‡æ•°æ®é›†ä¸Šçš„å¹¿æ³›å®éªŒç»“æœæ¸…æ¥šåœ°è¡¨æ˜ï¼ŒCBDNetåœ¨å®šé‡æ–¹æ³•å’Œè§†è§‰è´¨é‡æ–¹é¢éƒ½ä¼˜äºç›®å‰æœ€å…ˆè¿›çš„æ–¹æ³•ã€‚è¯¥ä»£ç å·²åœ¨https://github.com/GuoShi28/CBDNetä¸Šæä¾›ã€‚</p><h2 id="5-Conclusion">5. Conclusion</h2><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§CBDnetç”¨äºçœŸå®ä¸–ç•Œå™ªå£°ç…§ç‰‡çš„ç›²å»å™ªã€‚è¿™é¡¹å·¥ä½œçš„ä¸»è¦å‘ç°æœ‰ä¸¤ä¸ªæ–¹é¢ï¼šç¬¬ä¸€ï¼ŒçœŸå®å™ªå£°æ¨¡å‹(åŒ…æ‹¬å¼‚æºé«˜æ–¯å’ŒISP pipeline ?)æ˜¯ä½¿ä»åˆæˆå›¾åƒä¸­å­¦ä¹ çš„æ¨¡å‹é€‚ç”¨äºçœŸå®ä¸–ç•Œå™ªå£°ç…§ç‰‡çš„å…³é”®ã€‚å…¶æ¬¡ï¼Œç½‘ç»œçš„å»å™ªæ€§èƒ½å¯ä»¥é€šè¿‡å°†åˆæˆçš„å’ŒçœŸå®çš„å™ªå£°å›¾åƒç»“åˆåˆ°è®­ç»ƒä¸­æ¥æé«˜ã€‚æ­¤å¤–ï¼Œé€šè¿‡åœ¨CBDNetä¸­å¼•å…¥å™ªå£°ä¼°è®¡å­ç½‘ç»œï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨éå¯¹ç§°æŸå¤±æ¥æé«˜å…¶å¯¹çœŸå®ä¸–ç•Œå™ªå£°çš„ç”Ÿæˆèƒ½åŠ›ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œäº¤äº’å»å™ªã€‚</p><h2 id="1-Introduction">1. Introduction</h2><h3 id="çœŸå®å™ªå£°">çœŸå®å™ªå£°</h3><p>çœŸå®å™ªå£°çš„æ¥æºï¼š</p><ol><li><p>ä¿¡å·å™ªå£°</p><ul><li>æš—ç”µæµå™ªå£°</li><li>çŸ­å™ªå£°</li><li>çƒ­å™ªå£°</li></ul></li><li><p>ISPæµæ°´çº¿</p><ul><li>å»é©¬èµ›å…‹</li><li>ä¼½é©¬çŸ«æ­£å’Œå‹ç¼©</li></ul></li></ol><p>è¿™äº›çœŸå®å™ªå£°äºAWGNå¤§ç›¸å¾„åº­ï¼Œå¹¶ä¸”åœ¨ç°å®ä¸–ç•Œä¸­å™ªå£°ç…§ç‰‡çš„ç›²å»å™ªä»ç„¶æ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig1.png" alt=""></p><p>ä»å›¾ä¸€å½“ä¸­å¯ä»¥å‘ç°ï¼Œå¯¹äºAWGNç›²å»å™ªçš„å»å™ªå™¨åœ¨åº”ç”¨åˆ°çœŸå®ç…§ç‰‡æ—¶ä¼šæ˜¾è‘—é€€åŒ–ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”¨äºéç›²AWGNå»å™ªå™¨å°†åœ¨å»é™¤çœŸå®å™ªå£°çš„åŒæ—¶å¹³æ»‘ç»†èŠ‚ã€‚é€ æˆè¿™ç§ç°è±¡çš„åŸå› æ˜¯è¿‡æ‹Ÿåˆï¼Œå¯¼è‡´è¿‡åº¦é€‚åº”é«˜æ–¯å™ªå£°ï¼Œå¯¹å¤æ‚çš„çœŸå®å™ªå£°æ³›åŒ–èƒ½åŠ›è¾ƒå·®ã€‚</p><h3 id="å™ªå£°æ¨¡å‹">å™ªå£°æ¨¡å‹</h3><p>CNNå»å™ªå™¨çš„æˆåŠŸåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåˆæˆå™ªå£°å’ŒçœŸå®å™ªå£°çš„åˆ†å¸ƒæ˜¯å¦åŒ¹é…ã€‚å› æ­¤ï¼ŒçœŸå®æ„Ÿå™ªå£°æ¨¡å‹æ˜¯çœŸå®ç…§ç‰‡ç›²å»å™ªçš„é¦–è¦é—®é¢˜ã€‚æ ¹æ®æ–‡çŒ®[14ï¼Œ45]ï¼Œ<strong>æ³Šæ¾-é«˜æ–¯åˆ†å¸ƒå¯ä»¥è¿‘ä¼¼ä¸ºä¿¡å·ç›¸å…³å™ªå£°åˆ†é‡å’Œç«™å™ªå£°åˆ†é‡çš„å¼‚æ–¹å·®é«˜æ–¯åˆ†å¸ƒï¼Œè¢«è®¤ä¸ºæ˜¯ä¸€ç§æ¯”AWGNæ›´åˆé€‚çš„çœŸå®åŸå§‹å™ªå£°å»ºæ¨¡æ–¹æ³•</strong>ï¼Œè€Œä¸”ç›¸æœºå†…å¤„ç†ä¼šè¿›ä¸€æ­¥ä½¿å™ªå£°åœ¨ç©ºé—´å’Œè‰²ç›¸å…³ï¼Œä»è€Œå¢åŠ äº†å™ªå£°çš„å¤æ‚æ€§ã€‚å› æ­¤ï¼Œ<strong>æˆ‘ä»¬åœ¨å™ªå£°æ¨¡å‹ä¸­åŒæ—¶è€ƒè™‘äº†æ³Šæ¾-é«˜æ–¯æ¨¡å‹å’Œç›¸æœºå†…å¤„ç†æµæ°´çº¿(å¦‚å»é©¬èµ›å…‹ã€ä¼½ç›æ ¡æ­£å’ŒJPEGå‹ç¼©)</strong>ã€‚å®éªŒè¡¨æ˜ï¼Œç›¸æœºå†…å¤„ç†æµæ°´çº¿åœ¨çœŸå®å™ªå£°å»ºæ¨¡ä¸­èµ·ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ï¼Œåœ¨DNDä¸Šæ¯”AWGNè·å¾—äº†æ˜¾è‘—çš„æ€§èƒ½å¢ç›Š</p><blockquote><p>DNDã€‚å®ƒç”± 50 å¯¹çœŸå®å™ªå£°å›¾åƒå’Œç›¸åº”çš„ground-truthå›¾åƒç»„æˆï¼Œè¿™äº›å›¾åƒæ˜¯ç”¨ä¸åŒä¼ æ„Ÿå™¨å°ºå¯¸çš„æ¶ˆè´¹çº§ç›¸æœºæ•è·çš„ã€‚å¯¹äºæ¯ä¸€å¯¹ï¼Œä½¿ç”¨åŸºæœ¬ ISO çº§åˆ«æ‹æ‘„å‚è€ƒå›¾åƒï¼Œè€Œä½¿ç”¨è¾ƒé«˜ ISO å’Œé€‚å½“è°ƒæ•´çš„æ›å…‰æ—¶é—´æ‹æ‘„å˜ˆæ‚å›¾åƒã€‚å‚è€ƒå›¾åƒç»è¿‡ä»”ç»†çš„åå¤„ç†ï¼Œéœ€è¦è¿›è¡Œå°çš„ç›¸æœºç§»ä½è°ƒæ•´ã€çº¿æ€§å¼ºåº¦ç¼©æ”¾å’Œå»é™¤ä½é¢‘åå·®ã€‚åå¤„ç†çš„å›¾åƒä½œä¸ºæˆ‘ä»¬å»å™ªåŸºå‡†çš„ground-truthã€‚</p></blockquote><h3 id="ç½‘ç»œæ¨¡å‹">ç½‘ç»œæ¨¡å‹</h3><p>CBDNetç”±ä¸¤ä¸ªå­ç½‘ç»œç»„æˆï¼Œå³å™ªå£°ä¼°è®¡å’Œéç›²å»å™ªã€‚ç”±äºå¼•å…¥äº†å™ªå£°ä¼°è®¡å­ç½‘ç»œï¼Œæˆ‘ä»¬é‡‡ç”¨äº†éå¯¹ç§°æŸå¤±ï¼Œ<strong>å¯¹å™ªå£°æ°´å¹³çš„ä½ä¼°è¯¯å·®æ–½åŠ æ›´å¤šçš„æƒ©ç½š</strong>ï¼Œä½¿æˆ‘ä»¬çš„CBDNetåœ¨å™ªå£°æ¨¡å‹ä¸å®é™…å™ªå£°ä¸èƒ½å¾ˆå¥½åŒ¹é…çš„æƒ…å†µä¸‹è¡¨ç°å¾—å¾ˆå¥½ã€‚åœ¨NC12[29]ã€DND[45]å’ŒNAM[43]ä¸‰ä¸ªçœŸå®å™ªå£°å›¾åƒæ•°æ®é›†ä¸Šè¿›è¡Œäº†å¤§é‡çš„å®éªŒã€‚æ— è®ºæ˜¯é‡åŒ–æŒ‡æ ‡è¿˜æ˜¯æ„ŸçŸ¥è´¨é‡ï¼Œæˆ‘ä»¬çš„CBDNetä¸æœ€å…ˆè¿›çš„ç›¸æ¯”éƒ½è¡¨ç°å¾—å¾ˆå¥½ã€‚å¦‚å›¾1æ‰€ç¤ºï¼Œé’ˆå¯¹éç›²BM3D[12]å’Œç›²AWGNçš„DnCNN[61]éƒ½ä¸èƒ½å¯¹çœŸå®ä¸–ç•Œçš„å™ªå£°ç…§ç‰‡è¿›è¡Œå»å™ªã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„CBDNeté€šè¿‡ä¿ç•™å¤§éƒ¨åˆ†ç»“æ„å’Œç»†èŠ‚ï¼ŒåŒæ—¶å»é™¤å¤æ‚çš„ç°å®ä¸–ç•Œå™ªå£°ï¼Œå–å¾—äº†éå¸¸ä»¤äººæ»¡æ„çš„å»å™ªæ•ˆæœã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬å·¥ä½œçš„è´¡çŒ®æœ‰å››ä¸ªæ–¹é¢ï¼š</p><ol><li>é€šè¿‡åŒæ—¶è€ƒè™‘å¼‚æ–¹å·®é«˜æ–¯å™ªå£°å’Œæ‘„åƒæœºå†…å¤„ç†æµæ°´çº¿ï¼Œæå‡ºäº†ä¸€ç§é€¼çœŸçš„å™ªå£°æ¨¡å‹ï¼Œæ˜¾è‘—æå‡å»å™ªæ€§èƒ½ã€‚</li><li>ä¸ºäº†æ›´å¥½åœ°åˆ»ç”»çœŸå®ä¸–ç•Œçš„å›¾åƒå™ªå£°ï¼Œæé«˜å»å™ªæ€§èƒ½ï¼Œå°†åˆæˆå™ªå£°å›¾åƒå’ŒçœŸå®å™ªå£°ç…§ç‰‡ç›¸ç»“åˆã€‚</li><li>å¾—ç›Šäºå™ªå£°ä¼°è®¡å­ç½‘ï¼Œæå‡ºäº†éå¯¹ç§°æŸå¤±æ¥æé«˜å¯¹çœŸå®å™ªå£°çš„æ³›åŒ–èƒ½åŠ›ï¼Œ<strong>å¹¶é€šè¿‡è°ƒæ•´å™ªå£°æ°´å¹³å›¾æ¥å®ç°äº¤äº’å»å™ª</strong>ã€‚</li><li>åœ¨ä¸‰ä¸ªçœŸå®ä¸–ç•Œå™ªå£°å›¾åƒæ•°æ®é›†ä¸Šçš„å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„CBDNetåœ¨é‡åŒ–åº¦é‡å’Œè§†è§‰è´¨é‡æ–¹é¢éƒ½è¾¾åˆ°äº†æœ€å…ˆè¿›çš„ç»“æœã€‚</li></ol><h2 id="2-Related-Work">2. Related Work</h2><h3 id="2-1-Deep-CNN-Denoisers">2.1 Deep CNN Denoisers</h3><p>æ·±åº¦ç¥ç»ç½‘ç»œ(DNNs)çš„å‡ºç°ç»™é«˜æ–¯å»å™ªå¸¦æ¥äº†å¾ˆå¤§çš„æ”¹è¿›ã€‚ç›´åˆ°Burgeretç­‰äººã€‚[6]ï¼Œå¤§å¤šæ•°æ—©æœŸçš„æ·±åº¦æ¨¡å‹ä¸èƒ½è¾¾åˆ°æœ€å…ˆè¿›çš„å»å™ªæ€§èƒ½[22ï¼Œ49ï¼Œ57]ã€‚éšåï¼ŒCSF[53]å’ŒTNRD[11]æ¢ç´¢äº†ç‰¹æœ‰æ¨¡å‹é¢†åŸŸçš„ä¼˜åŒ–ç®—æ³•æ¥å­¦ä¹ åˆ†é˜¶æ®µæ¨ç†è¿‡ç¨‹ã€‚é€šè¿‡ç»“åˆæ®‹å·®å­¦ä¹ [19]å’Œæ‰¹æ¬¡å½’ä¸€åŒ–[21]ï¼ŒZhang et al.[61]æå‡ºä¸€ç§å»å™ªCNN(DnCNN)ï¼Œå…¶æ€§èƒ½ä¼˜äºä¼ ç»Ÿçš„éCNNæ–¹æ³•ã€‚Noise2Noise[30]åœ¨ä¸ä½¿ç”¨CleanDataçš„æƒ…å†µä¸‹ä¹Ÿè¾¾åˆ°äº†æœ€å…ˆè¿›çš„æ°´å¹³ã€‚è¿‘å¹´æ¥ï¼ŒRED30[38]ã€MemNet[55]ã€BM3D-Net[60]ã€MWCNN[33]å’ŒFFDNet[62]ç­‰å…¶ä»–CNNæ–¹æ³•ä¹Ÿå¾—åˆ°äº†è¾ƒå¥½çš„å»å™ªæ•ˆæœã€‚</p><p>ç ”ç©¶ç»“æœ[61ï¼Œ38ï¼Œ55]è¡¨æ˜ï¼Œåˆ©ç”¨CNNsçš„å»ºæ¨¡èƒ½åŠ›ï¼Œå­¦ä¹ å•ä¸€æ¨¡å‹è¿›è¡Œé«˜æ–¯å»å™ªæ˜¯å¯è¡Œçš„ã€‚</p><h4 id="å±€é™æ€§">å±€é™æ€§</h4><p>è¿™äº›ç›²æ¨¡å‹å¯èƒ½å¯¹AWGNè¿‡åº¦æ‹Ÿåˆï¼Œå¹¶ä¸”ä¸èƒ½å¤„ç†çœŸå®å™ªå£°ã€‚ç›¸åï¼Œéç›²CNNå»å™ªå™¨ï¼Œä¾‹å¦‚FFD-NET[62]ï¼Œé€šè¿‡æ‰‹åŠ¨è®¾ç½®é€‚å½“çš„æˆ–ç›¸å¯¹è¾ƒé«˜çš„å™ªå£°æ°´å¹³ï¼Œå¯ä»¥åœ¨å¤§å¤šæ•°çœŸå®çš„å™ªå£°å›¾åƒä¸Šè·å¾—ä»¤äººæ»¡æ„çš„ç»“æœã€‚ä¸ºäº†åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬çš„CBDNetåŒ…æ‹¬å™ªå£°ä¼°è®¡å­ç½‘ç»œå’Œéå¯¹ç§°æŸå¤±å‡½æ•°ï¼Œä»¥æŠ‘åˆ¶å™ªå£°æ°´å¹³çš„ä½ä¼°è¯¯å·®ã€‚</p><h3 id="2-2-Image-Noise-Modeling">2.2 Image Noise Modeling</h3><p>å¤§å¤šæ•°å»å™ªæ–¹æ³•éƒ½æ˜¯é’ˆå¯¹éç›²é«˜æ–¯å»å™ªçš„ã€‚ç„¶è€Œï¼ŒçœŸå®å›¾åƒä¸­çš„å™ªå£°æ¥æºç¹å¤š(æš—ç”µæµå™ªå£°ã€çŸ­å™ªå£°ã€çƒ­å™ªå£°ç­‰)ï¼Œè€Œä¸”æ›´ä¸ºå¤æ‚[44]ï¼Œé€šè¿‡ç”¨æ³Šæ¾å¯¹å…‰å­ä¼ æ„Ÿè¿›è¡Œå»ºæ¨¡ï¼Œå¹¶ç”¨é«˜æ–¯å¯¹é™æ­¢æ‰°åŠ¨è¿›è¡Œå»ºæ¨¡ï¼Œæˆåƒä¼ æ„Ÿå™¨çš„åŸå§‹æ•°æ®é‡‡ç”¨æ³Šæ¾-é«˜æ–¯å™ªå£°æ¨¡å‹ [14]ï¼Œå¯¹æˆåƒä¼ æ„Ÿå™¨çš„åŸå§‹æ•°æ®é‡‡ç”¨æ³Šæ¾-é«˜æ–¯å™ªå£°æ¨¡å‹(Poisson-Gaussian Noise Modelï¼Œç®€ç§°Poisson-Gaussian Noise Model)ã€‚åœ¨[14ï¼Œ32]ä¸­ï¼Œè¿˜è€ƒè™‘äº†ç›¸æœºå“åº”å‡½æ•°(CRF)å’Œé‡åŒ–å™ªå£°ä»¥è¿›è¡Œæ›´å®é™…çš„å™ªå£°å»ºæ¨¡ã€‚é™¤äº†æ³Šæ¾-é«˜æ–¯å™ªå£°ï¼Œ Hwang ç­‰[20]æå‡ºäº†ä¸€ç§ç”¨äºæ³Šæ¾å…‰å™ªå£°å»ºæ¨¡çš„Skellamåˆ†å¸ƒã€‚æ­¤å¤–ï¼Œå½“è€ƒè™‘ç›¸æœºå†…å›¾åƒå¤„ç†æµæ°´çº¿æ—¶ï¼Œä¸é€šé“æ— å…³çš„å™ªå£°å‡è®¾å¯èƒ½ä¸æˆç«‹ï¼Œå¹¶æå‡ºäº†å‡ ç§è·¨é€šé“å™ªå£°å»ºæ¨¡æ–¹æ³•[25ï¼Œ43]ï¼Œæœ¬æ–‡è¯æ˜äº†çœŸå®å™ªå£°æ¨¡å‹åœ¨åŸºäºCNNçš„çœŸå®ç…§ç‰‡å»å™ªä¸­èµ·ç€é‡è¦ä½œç”¨ï¼Œæ³Šæ¾-é«˜æ–¯å™ªå£°å’Œç›¸æœºå†…å›¾åƒå¤„ç†æµæ°´çº¿éƒ½æœ‰åˆ©äºå»å™ªæ€§èƒ½ã€‚</p><h3 id="2-3-Blind-Denoising-of-Real-Images">2.3 Blind Denoising of Real Images</h3><p>çœŸå®å«å™ªå›¾åƒçš„ç›²å»å™ªé€šå¸¸æ¯”è¾ƒæœ‰æŒ‘æˆ˜æ€§ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå³<strong>å™ªå£°ä¼°è®¡å’Œéç›²å»å™ª</strong>ã€‚å¯¹äºAWGNï¼Œå·²ç»å‘å±•äº†å‡ ç§åŸºäºPCAçš„å™ªå£°æ ‡å‡†å·®(SD)ä¼°è®¡æ–¹æ³•[48ï¼Œ34ï¼Œ9]ã€‚Rabie[49]å°†å™ªå£°åƒç´ å»ºæ¨¡ä¸ºå¼‚å¸¸å€¼ï¼Œå¹¶åˆ©ç”¨æ´›ä¼¦å…¹é²æ£’ä¼°è®¡å™¨è¿›è¡ŒAWGNä¼°è®¡ã€‚å¯¹äºPoisson-Gaussæ¨¡å‹ï¼ŒFOIç­‰äººæå‡ºäº†ä¸€ç§ä¸¤é˜¶æ®µæ–¹æ¡ˆï¼Œå³å¤šä¸ªæœŸæœ›/æ ‡å‡†å·®å¯¹çš„å±€éƒ¨ä¼°è®¡ï¼Œå…¨å±€å‚æ•°æ¨¡å‹æ‹Ÿåˆã€‚</p><p>åœ¨å¤§å¤šæ•°ç›²å»å™ªæ–¹æ³•ä¸­ï¼Œå°†å™ªå£°ä¼°è®¡ä¸éç›²å»å™ªç»“åˆä½¿ç”¨ã€‚Portilla[46ï¼Œ47]é‡‡ç”¨<strong>é«˜æ–¯æ··åˆå°ºåº¦å¯¹æ¯ä¸ªå°ºåº¦çš„å°æ³¢å—è¿›è¡Œå»ºæ¨¡</strong>ï¼Œå¹¶åˆ©ç”¨<strong>è´å¶æ–¯æœ€å°äºŒä¹˜ä¼°è®¡å¹²å‡€çš„å°æ³¢å—</strong>ã€‚åœ¨åˆ†æ®µå¹³æ»‘å›¾åƒæ¨¡å‹çš„åŸºç¡€ä¸Šï¼ŒLiu et al.[32]æå‡ºäº†ä¸€ç§ç»Ÿä¸€çš„è‰²å™ªå£°ä¼°è®¡å’Œå»é™¤æ¡†æ¶ã€‚Gong et al.[15]å°†æ•°æ®æ‹Ÿåˆé¡¹å»ºæ¨¡ä¸ºL1å’ŒL2èŒƒæ•°çš„åŠ æƒå’Œï¼Œå¹¶åˆ©ç”¨å°æ³¢åŸŸä¸­çš„ç¨€ç–æ­£åˆ™åŒ–ç®—å­å¤„ç†æ··åˆæˆ–æœªçŸ¥å™ªå£°ã€‚Lebrunç­‰äºº[28ï¼Œ29]é€šè¿‡å°†æ¯ä¸ªpatchç»„çš„å™ªå£°å»ºæ¨¡ä¸ºé›¶å‡å€¼ç›¸å…³é«˜æ–¯åˆ†å¸ƒï¼Œæå‡ºäº†<strong>éå±€éƒ¨è´å¶æ–¯æ–¹æ³•</strong>çš„æ‰©å±•[27]ã€‚æœ±ç­‰äºº[63]æå‡ºäº†ä¸€ç§<strong>è´å¶æ–¯éå‚æ•°æŠ€æœ¯é€šè¿‡ä½ç§©æ··åˆé«˜æ–¯æ¨¡å‹</strong>æ¥å»é™¤å™ªå£°çš„æ–¹æ³•ã€‚Namç­‰äººã€‚[43]å°†è·¨ä¿¡é“å™ªå£°å»ºæ¨¡ä¸ºå¤šå…ƒé«˜æ–¯æ¨¡å‹ï¼Œå¹¶é‡‡ç”¨<strong>è´å¶æ–¯éå±€éƒ¨å‡å€¼è¿‡æ»¤</strong>[24]è¿›è¡Œå»å™ª[24].[59]æå‡ºäº†ä¸€ç§åˆ©ç”¨é€šé“å†—ä½™çš„å¤šé€šé“åŠ æƒæ ¸èŒƒæ•°æœ€å°åŒ–(MCWNNM)æ¨¡å‹ã€‚ä»–ä»¬è¿›ä¸€æ­¥æå‡ºäº†ä¸€ç§ä¸‰è¾¹åŠ æƒç¨€ç–ç¼–ç (TWSC)æ–¹æ³•ï¼Œç”¨äºæ›´å¥½åœ°å¯¹å™ªå£°å’Œå›¾åƒå…ˆéªŒè¿›è¡Œå»ºæ¨¡[58]ã€‚é™¤Noise Clinic(NC)[28ï¼Œ29]ã€MCWNNM[59]å’ŒTWSC[58]å¤–ï¼Œå¤§å¤šæ•°å»å™ªå™¨çš„ä»£ç å‡ä¸å¯ç”¨ã€‚æˆ‘ä»¬çš„å®éªŒè¡¨æ˜ï¼Œå®ƒä»¬åœ¨å»é™¤çœŸå®å›¾åƒä¸­çš„å™ªå£°æ–¹é¢ä»ç„¶æ˜¯æœ‰é™çš„ã€‚</p><h2 id="3-Proposed-Method">3. Proposed Method</h2><p>è¿™ä¸€éƒ¨åˆ†ä»‹ç»äº†æˆ‘ä»¬çš„CBDNetï¼Œå®ƒç”±ä¸€ä¸ªå™ªå£°ä¼°è®¡å­ç½‘å’Œä¸€ä¸ªéç›²å»å™ªå­ç½‘ç»„æˆã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å™ªå£°æ¨¡å‹å¼•å…¥åˆæˆå«å™ªå›¾åƒçš„ç”Ÿæˆã€‚ç„¶åï¼Œä»‹ç»äº†ç½‘ç»œä½“ç³»ç»“æ„å’Œéå¯¹ç§°æŸå¤±ã€‚æœ€åï¼Œæˆ‘ä»¬è§£é‡Šäº†å¦‚ä½•ç»“åˆåˆæˆå›¾åƒå’ŒçœŸå®å™ªå£°å›¾åƒæ¥è®­ç»ƒCBDNetã€‚</p><h3 id="3-1-çœŸå®å™ªå£°æ¨¡å‹">3.1.çœŸå®å™ªå£°æ¨¡å‹</h3><p>æ­£å¦‚åœ¨[39]ä¸­æ‰€æŒ‡å‡ºçš„ï¼ŒCNNçš„æ¨å¹¿åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®°å¿†è®­ç»ƒæ•°æ®çš„èƒ½åŠ›ã€‚ç°æœ‰çš„CNNå»å™ªå™¨ï¼Œä¾‹å¦‚DnCNN[61]ï¼Œé€šå¸¸ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†çœŸå®çš„å™ªå£°å›¾åƒï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬å¯èƒ½å¯¹AWGN<strong>è¿‡åº¦æ‹Ÿåˆ</strong>ï¼Œè€Œå®é™…çš„å™ªå£°åˆ†å¸ƒä¸é«˜æ–¯åˆ†å¸ƒæœ‰å¾ˆå¤§çš„ä¸åŒã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸çœŸå®çš„å™ªå£°æ¨¡å‹ä¸€èµ·è®­ç»ƒæ—¶ï¼ŒCNNçš„è®°å¿†èƒ½åŠ›å°†æœ‰åŠ©äºä½¿æ‰€å­¦ä¹ çš„æ¨¡å‹å¾ˆå¥½åœ°ç”ŸæˆçœŸå®çš„ç…§ç‰‡ã€‚å› æ­¤ï¼Œå™ªå£°æ¨¡å‹å¯¹ä¿è¯CNNå»å™ªå™¨çš„æ€§èƒ½èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚ï¼Ÿ</p><p>ä¸AWGNä¸åŒï¼Œå®å›¾åƒå™ªå£°é€šå¸¸æ›´å¤æ‚ä¸”ä¾èµ–äºä¿¡å·[35ï¼Œ14]ã€‚å®é™…ä¸Šï¼Œå…‰å­ä¼ æ„Ÿäº§ç”Ÿçš„å™ªå£°å¯ä»¥å»ºæ¨¡ä¸ºæ³Šæ¾å™ªå£°ï¼Œå‰©ä½™çš„é™æ­¢æ‰°åŠ¨å¯ä»¥è¡¨ç¤ºä¸ºé«˜æ–¯å™ªå£°ã€‚å› æ­¤ï¼Œæ³Šæ¾-é«˜æ–¯ä¸ºæˆåƒä¼ æ„Ÿå™¨[14]çš„åŸå§‹æ•°æ®æä¾›äº†ä¸€ä¸ªåˆç†çš„å™ªå£°æ¨¡å‹ï¼Œå¹¶ä¸”å¯ä»¥è¿›ä¸€æ­¥ç”¨å®šä¹‰ä¸ºå¦‚ä¸‹çš„å¼‚æ–¹å·®é«˜æ–¯$n(L)âˆ¼N(0ï¼ŒÏƒ^2(L))$æ¥è¿‘ä¼¼ï¼Œ<br>$$<br>\sigma^2(L) = L\cdot  \sigma^2_s + \sigma^2_c  \quad \quad (1)<br>$$<br>å…¶ä¸­Læ˜¯åŸå§‹åƒç´ çš„è¾ç…§åº¦å›¾åƒã€‚$n(L)=n_s(L)+n_c$æ¶‰åŠä¸¤ä¸ªåˆ†é‡:</p><ul><li><p>å…·æœ‰å™ªå£°æ–¹å·®$Ïƒ^2_c$çš„å¹³ç¨³å™ªå£°åˆ†é‡$n_c$</p></li><li><p>å…·æœ‰ç©ºé—´å˜å¼‚å™ªå£°æ–¹å·®$LÂ·Ïƒ^2_s$çš„ä¾èµ–äºä¿¡å·çš„å™ªå£°åˆ†é‡$n_s$ã€‚</p></li></ul><p>ç„¶è€Œï¼Œå®é™…ç…§ç‰‡é€šå¸¸æ˜¯ç»è¿‡ç›¸æœºå†…å¤„ç†åè·å¾—çš„ï¼Œè¿™è¿›ä¸€æ­¥å¢åŠ äº†å™ªå£°çš„å¤æ‚æ€§ï¼Œä½¿å…¶åœ¨ç©ºé—´å’Œè‰²åº¦ä¸Šå…·æœ‰ç›¸å…³æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘äº†ISPæµæ°´çº¿çš„ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼Œå³å»é©¬èµ›å…‹å’Œä¼½é©¬æ ¡æ­£ï¼Œå¾—åˆ°äº†çœŸå®çš„å™ªå£°æ¨¡å‹:<br>$$<br>y=f(DM(L+n(L))) \quad \quad (2) æœ‰å™ªå£°çš„æœªå‹ç¼©å›¾åƒ<br>$$<br>å…¶ä¸­yè¡¨ç¤ºåˆæˆå™ªå£°å›¾åƒï¼Œ$f(Â·)$è¡¨ç¤ºä»æ–‡çŒ®[16]æä¾›çš„201ä¸ªç›¸æœºå“åº”å‡½æ•°(CRF)ä¸­å‡åŒ€é‡‡æ ·ï¼Œå¾—åˆ°çš„ç›¸æœºå“åº”å‡½æ•°(CRF)ã€‚é‡‡ç”¨$L=Mf^{-1}(X)$ç”±å¹²å‡€å›¾åƒç”Ÿæˆè¾ç…§åº¦å›¾åƒï¼Œ$M(Â·)$è¡¨ç¤ºå°†sRGBå›¾åƒè½¬æ¢ä¸ºBayerå›¾åƒçš„å‡½æ•°ï¼Œ$DM(Â·)$è¡¨ç¤ºå»é©¬èµ›å…‹å‡½æ•°[37]ã€‚è¯·æ³¨æ„ï¼Œ$DM(Â·)$ä¸­çš„æ’å€¼æ¶‰åŠä¸åŒé€šé“å’Œç©ºé—´ä½ç½®çš„åƒç´ ã€‚æ–¹ç¨‹ä¸­çš„åˆæˆå™ªå£°ã€‚å…¬å¼(2)å› æ­¤æ˜¯ä¿¡é“å’Œç©ºé—´ç›¸å…³çš„ã€‚</p><p>æ­¤å¤–ï¼Œä¸ºäº†æ‰©å±•CBDNetç”¨äºå¤„ç†å‹ç¼©å›¾åƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆåˆæˆå™ªå£°å›¾åƒæ—¶åŒ…æ‹¬JPEGå‹ç¼©ï¼Œ<br>$$<br>y = JPEG(f(DM(L + n(L)))) \quad \quad (3) æœ‰å™ªå£°çš„å‹ç¼©å›¾åƒ<br>$$<br>å¯¹äºå«æœ‰å™ªå£°çš„æœªå‹ç¼©å›¾åƒï¼Œæˆ‘ä»¬é‡‡ç”¨å…¬å¼ï¼ˆ2ï¼‰ä¸­çš„æ¨¡å‹ç”Ÿæˆåˆæˆå™ªå£°å›¾åƒã€‚å¯¹äºæœ‰å™ªå£°çš„å‹ç¼©å›¾åƒï¼Œæˆ‘ä»¬åœ¨å…¬å¼ï¼ˆ3ï¼‰ä¸­å®šä¹‰äº†è¯¥æ¨¡å‹ã€‚(3)ã€‚å…·ä½“åœ°ï¼Œ$Ïƒ_s$å’Œ$Ïƒ_c$åˆ†åˆ«ä»[0ï¼Œ0.16]å’Œ[0ï¼Œ0.06]èŒƒå›´å†…å‡åŒ€é‡‡æ ·ã€‚åœ¨JPEGå‹ç¼©ä¸­ï¼Œå“è´¨å› æ•°ä»èŒƒå›´[60,100]ä¸­é‡‡æ ·ã€‚æˆ‘ä»¬æŒ‡å‡ºï¼Œæ²¡æœ‰è€ƒè™‘é‡åŒ–å™ªå£°ï¼Œå› ä¸ºé‡åŒ–å™ªå£°å¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥ï¼Œå¯¹å»å™ªæ•ˆæœæ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„å½±å“[62]ã€‚</p><h3 id="3-2-Network-Architecture">3.2. Network Architecture</h3><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet1.png" alt=""></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒCBDç½‘ç»œåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯å™ªå£°ä¼°è®¡å­ç½‘ç»œ$CNN_E$ï¼Œå’Œéç›²å»å™ªå­ç½‘ç»œ$CNN_D$ï¼›</p><p>$ CNN_E $ä½¿ç”¨å™ªå£°è§‚æµ‹yæ¥äº§ç”Ÿä¼°è®¡å™ªå£°ç”µå¹³å›¾$\hat{\sigma}(y) = F_E(y,W_E) $ï¼Œå…¶ä¸­$W_E$è¡¨ç¤º$CNN_E$çš„ç½‘ç»œå‚æ•°ï¼Œæˆ‘ä»¬ä½¿$CNN_E$çš„è¾“å‡ºä¸ºå™ªå£°æ°´å¹³å›¾ï¼Œå› ä¸º$CNN_E$çš„å¤§å°ä¸è¾“å…¥yç›¸åŒï¼Œå¹¶ä¸”å¯ä»¥ç”¨å®Œå…¨å·ç§¯ç½‘ç»œä¼°è®¡ã€‚</p><p>$CNND$å°†yå’Œ$\hat{\sigma} (y)$ä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°æœ€ç»ˆçš„å»å™ªç»“æœ$\hat{x} = F_D(y,\hat{\sigma} (y);W_D)$ã€‚$W_D$è¡¨ç¤º$CNN_D$å­ç½‘ç»œçš„ç½‘ç»œå‚æ•°ã€‚</p><p>$CNN_E$çš„å¼•å…¥å…è®¸æˆ‘ä»¬åœ¨ä¼°è®¡å™ªå£°æ°´å¹³å›¾$\hat{\sigma} (y)$ä¸­æ”¾å…¥éç›²å»å™ªå­ç½‘ç»œä¹‹å‰å¯¹å…¶è°ƒæ•´ï¼Œåœ¨æ­¤é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ç®€å•çš„äº¤äº’å¼å»å™ªç­–ç•¥ï¼›å³$\hat{\varrho} (y) = \gamma \cdot \hat{\sigma} (y) $</p><h4 id="å…·ä½“ç½‘ç»œç»“æ„">å…·ä½“ç½‘ç»œç»“æ„</h4><p>æˆ‘ä»¬è¿›ä¸€æ­¥è§£é‡Šäº†$CNN_E$å’Œ$CNN_D$çš„ç½‘ç»œç»“æ„ã€‚$CNN_E$é‡‡ç”¨å¹³å¦çš„äº”å±‚å…¨å·ç§¯ç½‘ç»œï¼Œä¸éœ€è¦åˆå¹¶å’Œæ‰¹å½’ä¸€åŒ–æ“ä½œã€‚åœ¨æ¯ä¸€å·ç§¯(Conv)å±‚ä¸­ï¼Œè®¾ç½®é¢‘ç‡é€šé“æ•°ä¸º32ä¸ªï¼Œè¿‡æ»¤å¤§å°ä¸º3Ã—3ã€‚åœ¨æ¯ä¸ªå·ç§¯(Conv)å±‚ä¹‹åå±•å¼€RELUéçº¿æ€§[42]ã€‚å¯¹äº$CNN_D$ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åŒæ—¶ä»¥yå’Œ$\hat Ïƒ(Y)$ä½œä¸ºè¾“å…¥çš„U-Net[51]ç»“æ„æ¥é¢„æµ‹æ— å™ªå£°å¹²å‡€å›¾åƒçš„$\hat x$ã€‚åœ¨[61]ä¹‹åï¼Œé‡‡ç”¨æ®‹å·®å­¦ä¹ ï¼Œé¦–å…ˆå­¦ä¹ æ®‹å·®æ˜ å°„$R(yï¼Œ\hat Ïƒ(Y)ï¼›W_D)$ï¼Œç„¶åé¢„æµ‹$\hat x=y+R(yï¼Œ\hat Ïƒ(Y)ï¼›W_D)$ã€‚å›¾è¿˜ç»™å‡ºäº†CNNEçš„16å±‚Uç½‘ç»“æ„ï¼Œå…¶ä¸­å¼•å…¥äº†<strong>å¯¹ç§°è·³è·ƒè¿æ¥ã€è·¨æ­¥å·ç§¯å’Œè½¬ç½®å·ç§¯</strong>ï¼Œä»¥åˆ©ç”¨å¤šå°ºåº¦ä¿¡æ¯å¹¶æ‰©å¤§æ¥æ”¶èŒƒå›´ã€‚æ‰€æœ‰è¿‡æ»¤çš„å¤§å°éƒ½æ˜¯3Ã—3ã€‚é™¤äº†æœ€åä¸€ä¸ªä¹‹å¤–ï¼Œæ¯ä¸ªè½¬æ¢å±‚ä¹‹åéƒ½ä¼šåº”ç”¨RELUéçº¿æ€§[42]ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬é€šè¿‡å®éªŒå‘ç°ï¼Œæ‰¹<strong>é‡å½’ä¸€åŒ–å¯¹çœŸå®æ„Ÿç…§ç‰‡çš„å™ªå£°å»é™¤å‡ ä¹æ²¡æœ‰å¸®åŠ©ï¼Œéƒ¨åˆ†åŸå› æ˜¯çœŸå®å™ªå£°åˆ†å¸ƒä¸é«˜æ–¯åˆ†å¸ƒæœ‰æ ¹æœ¬çš„ä¸åŒ</strong>ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ï¼Œé€šè¿‡å­¦ä¹ ä»å™ªå£°è§‚æµ‹åˆ°å¹²å‡€å›¾åƒçš„ç›´æ¥æ˜ å°„æ¥è®­ç»ƒå•ç›²CNNå»å™ªå™¨ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚ç„¶è€Œï¼Œæ­£å¦‚æ–‡çŒ®[62ï¼Œ41]ä¸­æŒ‡å‡ºçš„é‚£æ ·ï¼Œ<strong>åŒæ—¶é‡‡ç”¨å™ªå£°å›¾åƒå’Œå™ªå£°æ°´å¹³å›¾ä½œä¸ºè¾“å…¥ï¼Œæœ‰åŠ©äºå°†æ‰€å­¦ä¹ çš„æ¨¡å‹æ¨å¹¿åˆ°å™ªå£°æ¨¡å‹ä¹‹å¤–çš„å›¾åƒï¼Œä»è€Œæœ‰åˆ©äºç›²å»å™ª</strong>ã€‚å®éªŒå‘ç°ï¼Œå¯¹äºä½å™ªå£°å›¾åƒï¼Œå•ç›²CNNå»å™ªå™¨çš„æ€§èƒ½ä¸CBDNetç›¸å½“ï¼Œè€Œå¯¹äºé«˜å™ªå£°å›¾åƒï¼Œå•ç›²CNNå»å™ªå™¨çš„æ€§èƒ½ä¸å¦‚CBDNetã€‚æ­¤å¤–ï¼Œå™ªå£°ä¼°è®¡å­ç½‘ç»œçš„å¼•å…¥ä¹Ÿä½¿å¾—äº¤äº’å¼å»å™ªå’Œéå¯¹ç§°å­¦ä¹ æˆä¸ºå¯èƒ½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®åœ¨CBDNetä¸­åŠ å…¥å™ªå£°ä¼°è®¡å­ç½‘ç»œã€‚ï¼ˆå•ç›²CNNå»å™ªå™¨æ˜¯æŒ‡å•ä¸€å™ªå£°å½¢å¼å˜›ï¼‰</p><h3 id="3-3-Asymmetric-Loss-and-Model-Objective">3.3. Asymmetric Loss and Model Objective</h3><p>å½“è¾“å…¥å™ªå£°ä¸ºSDæ—¶é«˜äºground-truthè¯¯å·®(å³é«˜ä¼°è¯¯å·®)ï¼ŒCNNå’Œä¼ ç»Ÿçš„éç›²å»å™ªå™¨éƒ½è¡¨ç°å‡ºå¾ˆå¥½çš„å»å™ªæ€§èƒ½ï¼ˆå½“åˆæˆçš„å™ªå£°æ¯”çœŸå®æ•°æ®çš„å™ªå£°æ°´å¹³æ›´é«˜ï¼Œåˆ™è®­ç»ƒçš„æ¨¡å‹éƒ½å¯ä»¥å¾ˆå¥½ï¼‰ã€‚è¿™ä¿ƒä½¿æˆ‘ä»¬é‡‡ç”¨éå¯¹ç§°æŸå¤±æ¥æé«˜CBDNetçš„æ³›åŒ–èƒ½åŠ›ã€‚å¦‚FFDNet[62]ä¸­æ‰€è¿°ï¼Œå½“è¾“å…¥å™ªå£°ä¸ºSDæ—¶å’Œground-truthæ˜¯åŒ¹é…çš„ï¼ŒBM3D/FFDNetè·å¾—æœ€ä½³ç»“æœã€‚å½“è¾“å…¥å™ªå£°SDæ—¶ä½äºground-truthï¼ŒBM3D/FFDNetçš„ç»“æœåŒ…å«å¯å¯Ÿè§‰çš„å™ªå£°ã€‚å½“è¾“å…¥å™ªå£°ä¸ºSDæ—¶é«˜äºground-truthè¯¯å·®(å³é«˜ä¼°è¯¯å·®)ï¼Œéšç€è¾“å…¥å™ªå£°SDçš„å¢åŠ BM3D/FFDNeté€šè¿‡æ¸å˜æ¶ˆé™¤ä¸€äº›ä½å¯¹æ¯”åº¦çš„ç»“æ„ï¼Œä»ç„¶å¯ä»¥è¾¾åˆ°ä»¤äººæ»¡æ„çš„ç»“æœï¼Œå› æ­¤ï¼Œéç›²å»å™ªå™¨å¯¹å™ªå£°SDçš„ä½ä¼°è¯¯å·®å¾ˆæ•æ„Ÿï¼Œä½†å¯¹é«˜ä¼°è®¡è¯¯å·®æœ‰è¾ƒå¼ºçš„é²æ£’æ€§ã€‚æœ‰äº†è¿™æ ·çš„ç‰¹æ€§ï¼ŒBM3D/FFDNnetå¯ä»¥é€šè¿‡è®¾ç½®ç›¸å¯¹è¾ƒé«˜çš„è¾“å…¥å™ªå£°SDæ¥ç”¨äºå¯¹çœŸå®ç…§ç‰‡è¿›è¡Œå»å™ªï¼Œè¿™å¯èƒ½è§£é‡Šäº†BM3Dåœ¨éç›²è®¾ç½®ä¸‹åœ¨DNDåŸºå‡†[45]ä¸Šçš„åˆç†æ€§èƒ½ã€‚</p><p>ä¸ºäº†å……åˆ†åˆ©ç”¨ç›²å»å™ªçš„éå¯¹ç§°æ•æ„Ÿæ€§ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§éå¯¹ç§°å™ªå£°ä¼°è®¡æŸå¤±ï¼Œä»¥é¿å…å™ªå£°æ°´å¹³å›¾ä¸Šå‡ºç°ä½ä¼°è¯¯å·®ã€‚ç»™å®šåƒç´ <code>i</code>å¤„çš„ä¼°è®¡å™ªå£°æ°´å¹³$\hat Ïƒ(Y_i)$å’Œ<code>ground-truth</code>$Ïƒ(Y_i)$ï¼Œå½“$\hat Ïƒ(Y_i) &lt; Ïƒ(Y_i) $æ—¶ï¼Œ<strong>åº”å¯¹å®ƒä»¬çš„MSEæ–½åŠ æ›´å¤šæƒ©ç½š</strong>ã€‚(é˜²æ­¢ä½ä¼°å™ªå£°æ°´å¹³)å› æ­¤ï¼Œæˆ‘ä»¬å°†å™ªå£°ä¼°è®¡å­ç½‘ç»œä¸Šçš„ä¸å¯¹ç§°æŸå¤±å®šä¹‰ä¸º</p>$$\mathcal{L_{asymm}} = \sum_i | \alpha- I_{\hat{\sigma}(y_i)-\sigma(y_i)}| \cdot (\hat{\sigma}(y_i)-\sigma(y_i))^2  \quad \quad (4)$$<p><strong>iè¡¨ç¤ºæ¯ä¸ªåƒç´ </strong>ï¼Œè¿™é‡Œå½“eå°äº0æ—¶$I_e=1$ï¼Œeå¤§äºç­‰äº0æ—¶$I_e=0$ï¼Œè®¾ç½®$0 &lt; \alpha &lt; 0.5$,å¦‚æœä½ä¼°äº†å™ªå£°æ°´å¹³ï¼Œåˆ™åˆ¤åˆ«å¼æ˜¯ä¸ºçœŸä¹Ÿå°±æ˜¯ä¸º1ï¼Œåˆ™ç³»æ•°å¤§äº0.5ï¼Œå¦‚æœæ˜¯é«˜ä¼°äº†å™ªå£°æ°´å¹³ï¼Œåˆ™åˆ¤åˆ«å¼ä¸º0ï¼Œç³»æ•°å°äº0.5ï¼Œè¿™æ ·æ±‚å‡ºçš„æŸå¤±å‡½æ•°å¯¹ä½ä¼°å™ªå£°æ°´å¹³çš„æƒ…å†µä¼šæ–½åŠ æ›´å¤§çš„å¤„ç½šã€‚ä½¿å¾—æ¨¡å‹åœ¨çœŸå®å™ªå£°ä¸Šæ³›åŒ–èƒ½åŠ›æ›´å¼ºã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ€»æ–¹å·®ï¼ˆTVï¼‰æ­£åˆ™é¡¹æ¥çº¦æŸ$\sigma(y)$çš„å¹³æ»‘æ€§</p>$$\mathcal{L_{TV}} = \Vert\nabla_h \hat{\sigma}(y)\Vert_2^2+ \Vert\nabla_v \hat{\sigma}(y)\Vert_2^2  \quad \quad (5)$$<p>è¿™é‡Œçš„$\nabla_h(\nabla_v)$è¡¨ç¤ºæ°´å¹³ï¼ˆå‚ç›´ï¼‰æ–¹å‘çš„æ¢¯åº¦è¿ç®—ç¬¦ï¼ˆï¼Ÿè¿™æ ·å¯ä»¥ä½¿å¾—å™ªå£°ä¼°è®¡çš„æ›²çº¿åå·®ä¸å¤ªå¤§ï¼Œé¿å…è¿‡åº¦é«˜ä¼°é€ æˆè¿‡åº¦å¹³æ»‘ï¼Ÿè¿˜æ˜¯ä½¿å¾—å™ªå£°ä¼°è®¡æ›²çº¿æ›´å¹³æ»‘ï¼Ÿï¼‰</p><p>å¯¹äºéç›²å»å™ªå™¨çš„è¾“å‡º$\hat{x}$ï¼Œæˆ‘ä»¬å®šä¹‰é‡å»ºæŸå¤±å‡½æ•°ä¸ºï¼š</p>$$\mathcal{L_{rec}} = \Vert\hat{x} - x\Vert_2^2 \quad \quad (6)$$<p><strong>å› æ­¤CBDnetæ€»ä½“çš„ç›®æ ‡å‡½æ•°ä¸ºï¼š</strong></p>$$\mathcal{L} = \mathcal{L_{rec}}+\mathcal{\lambda_{asymm}}\mathcal{L_{asymm}}+\mathcal{\lambda_{TV}}\mathcal{L_{TV}} \quad \quad (7)$$<p><strong>è¿™é‡Œçš„$\mathcal{\lambda_{asymm}},\mathcal{\lambda_{TV}}$åˆ†åˆ«è¡¨ç¤ºéå¯¹ç§°æŸå¤±å‡½æ•°å’ŒTVæ­£åˆ™åŒ–çš„æŠ˜ä¸­å‚æ•°ã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œé€šè¿‡æœ€å°åŒ–ä¸Šè¿°ç›®æ ‡å‡½æ•°ï¼Œç»™å‡ºäº†CBDNetçš„PSNR/SSIMç»“æœã€‚å¯¹äºè§†è§‰è´¨é‡çš„å®šæ€§è¯„ä»·ï¼Œæˆ‘ä»¬å¯¹CBDnetç½‘ç»œè¿›è¡Œè®­ç»ƒï¼ŒåŒæ—¶å°†VGG-6çš„Relu3_3è¿›ä¸€æ­¥åŠ å…¥åˆ°ç›®æ ‡å‡½æ•°å…¬å¼7ä¸­ã€‚</strong></p><h3 id="3-4-Training-with-Synthetic-and-Real-Noisy-Images">3.4 Training with Synthetic and Real Noisy Images</h3><p>åœ¨3.1èŠ‚å®šä¹‰çš„å™ªå£°æ¨¡å‹å¯ä»¥ç”¨äºåˆæˆä»»æ„æ•°é‡çš„å™ªå£°å›¾åƒï¼ŒåŒæ—¶ï¼Œå¯ä»¥ä¿è¯å¹²å‡€å›¾åƒçš„é«˜è´¨é‡ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå™ªå£°æ¨¡å‹å¹¶ä¸èƒ½å®Œå…¨æè¿°çœŸå®ç…§ç‰‡ä¸­çš„å™ªå£°ï¼Œå¹¸è¿çš„å¼ï¼Œæ ¹æ®æ–‡çŒ®ï¼Œé€šè¿‡å¯¹åŒä¸€åœºæ™¯çš„æ•°ç™¾å¹…å™ªå£°å›¾åƒè¿›è¡Œå¹³å‡ï¼Œå¯ä»¥å¾—åˆ°å‡ ä¹æ— å™ªå£°çš„å›¾åƒï¼Œåœ¨æ–‡çŒ®ä¸­å·²ç»å»ºç«‹äº†å‡ ä¸ªæ•°æ®é›†ã€‚</p><p><strong>ç¼ºç‚¹</strong></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹åœºæ™¯æ˜¯å›ºå®šçš„ï¼Œè·å–å¤§é‡çš„å™ªå£°å›¾åƒä¹Ÿæ˜¯æ˜‚è´µçš„ï¼›</p><p>ç”±äºå¹³å‡æ•ˆåº”ï¼Œå¹²å‡€å›¾åƒä¼šè¿‡åº¦å¹³æ»‘</p><p><strong>å› æ­¤å¯ä»¥å°†åˆæˆçš„å›¾åƒå’ŒçœŸå®çš„å™ªå£°å›¾åƒç»“åˆèµ·æ¥ï¼Œä¸€æé«˜å¯¹çœŸå®ç…§ç‰‡çš„æ³›åŒ–èƒ½åŠ›ã€‚</strong></p><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨3.1èŠ‚ä¸­çš„å™ªå£°æ¨¡å‹ç”Ÿæˆåˆæˆå™ªå£°å›¾åƒï¼Œå¹¶ä½¿ç”¨BSD500[40]ä¸­çš„400å¹…å›¾åƒã€Waterloo[36]ä¸­çš„1600å¹…å›¾åƒå’ŒMIT-Adobe FiveKæ•°æ®é›†[7]ä¸­çš„1600å¹…å›¾åƒä½œä¸ºè®­ç»ƒæ•°æ®ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨rgbå›¾åƒ<code>x</code>æ¥åˆæˆå¹²å‡€çš„åŸå§‹å›¾åƒ$L=mf^{-1}(X)$ä½œä¸ºåå‘ispè¿‡ç¨‹ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸æ–¹ç¨‹(2)æˆ–(3)ç›¸åŒçš„<code>f</code>æ¥ç”Ÿæˆå™ªå£°å›¾åƒã€‚å…¶ä¸­fæ˜¯ä»[16]ä¸­éšæœºæŠ½æ ·çš„CRFï¼Œå¯¹äºçœŸå®çš„å™ªå£°å›¾åƒï¼Œæˆ‘ä»¬åˆ©ç”¨RENOIRæ•°æ®é›†ä¸­çš„120å¹…å›¾åƒ[4]ã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­äº¤æ›¿ä½¿ç”¨äº†ä¸€æ‰¹åˆæˆå›¾åƒå’ŒçœŸå®å™ªå£°å›¾åƒï¼Œå¯¹äºä¸€æ‰¹åˆæˆå›¾åƒï¼ŒEqn(7)æ‰€æœ‰çš„æŸå¤±æœ€å°åŒ–ä»¥æ›´æ–°CBDNetã€‚å¯¹äºä¸€æ‰¹çœŸå®å›¾åƒï¼Œç”±äºæ— æ³•è·å¾—ground-truthå™ªå£°æ°´å¹³mapï¼Œè®­ç»ƒæ—¶åªè€ƒè™‘äº†$\mathcal{L_{rec}}å’Œ\mathcal{L_{TV}}$ã€‚å®éªŒè¯æ˜ï¼Œè¿™ç§è®­ç»ƒæ–¹æ¡ˆèƒ½æœ‰æ•ˆåœ°æé«˜å»å™ªçœŸå®ç…§ç‰‡çš„è§†è§‰è´¨é‡ã€‚</p><h2 id="4-å®éªŒç»“æœ">4 å®éªŒç»“æœ</h2><h3 id="4-1-æµ‹è¯•æ•°æ®é›†">4.1 æµ‹è¯•æ•°æ®é›†</h3><p>é‡‡ç”¨NC12[29]ã€DND[45]å’ŒNAM[43]ä¸‰ä¸ªçœŸå®å™ªå£°å›¾åƒæ•°æ®é›†ï¼š</p><ol><li>NC12åŒ…æ‹¬12ä¸ªå™ªå£°å›¾åƒã€‚æ— æ³•å¾—åˆ°å¯¹åº”çš„å¹²å‡€å›¾åƒï¼Œæˆ‘ä»¬åªæŠ¥å‘Šå»å™ªç»“æœç”¨äºå®šæ€§è¯„ä¼°ã€‚</li><li>DNDåŒ…å«50å¯¹çœŸå®çš„æœ‰å™ªå›¾åƒå’Œå¯¹åº”çš„å‡ ä¹æ— å™ªå£°çš„å›¾åƒï¼ŒDNDåŒ…å«50å¯¹çœŸå®çš„æœ‰å™ªå›¾åƒå’Œå¯¹åº”çš„å‡ ä¹æ— å™ªå£°çš„å›¾åƒã€‚ç±»ä¼¼äº[4]ï¼Œé€šè¿‡å¯¹ä½ISOå›¾åƒè¿›è¡Œä»”ç»†çš„åå¤„ç†ï¼Œå¯ä»¥è·å¾—å‡ ä¹æ— å™ªå£°çš„å›¾åƒã€‚PSNR/SSIMç»“æœæ˜¯é€šè¿‡åœ¨çº¿æäº¤ç³»ç»Ÿè·å¾—çš„ã€‚</li><li>NAMEåŒ…å«11ä¸ªé™æ­¢åœºæ™¯ï¼Œå¯¹äºæ¯ä¸ªåœºæ™¯ï¼Œæ—©æœŸçš„æ— å™ªå£°å›¾åƒæ˜¯500JPEGæœ‰å™ªå›¾åƒçš„å¹³å‡å€¼ã€‚æˆ‘ä»¬å°†è¿™äº›å›¾åƒè£å‰ªæˆ512Ã—512ä¸ªpatchï¼Œå¹¶éšæœºé€‰æ‹©25ä¸ªæ–‘å—è¿›è¡Œè¯„ä¼°æµ‹è¯•ã€‚</li></ol><h3 id="4-2-å®ç°ç»†èŠ‚">4.2 å®ç°ç»†èŠ‚</h3>$$\mathcal{L} = \mathcal{L_{rec}}+\mathcal{\lambda_{asymm}}\mathcal{L_{asymm}}+\mathcal{\lambda_{TV}}\mathcal{L_{TV}} \quad \quad (7)$$<p>åœ¨å…¬å¼7ä¸­çš„å‚æ•°æˆ‘ä»¬è®¾ç½®$\alpha = 0.3,\lambda_1=0.5,\lambda_2=0.05$ï¼Œæ³¨æ„åˆ°æ¥è‡ªNAMçš„å™ªå£°å›¾åƒæ—¶JPEGå‹ç¼©çš„ï¼Œè€ŒDNDçš„å™ªå£°å›¾åƒæ—¶è§£å‹ç¼©çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¬å¼ï¼ˆ2ï¼‰çš„å™ªå£°æ¨¡å‹å¯¹DNDå’ŒNC12å¤„ç†ï¼Œä½¿ç”¨å…¬å¼ï¼ˆ3ï¼‰å¯¹NAMè¿›è¡Œå¤„ç†ã€‚</p><p>åœ¨è®­ç»ƒCBDNetæ—¶ï¼Œé‡‡ç”¨ADAMï¼ŒÎ²1=0.9ï¼Œæ¨¡å‹åˆå§‹åŒ–é‡‡ç”¨[18]ä¸­çš„æ–¹æ³•ã€‚å°æ‰¹é‡çš„å¤§å°ä¸º32ä¸ªï¼Œæ¯ä¸ªpatchçš„å¤§å°ä¸º128Ã—128ã€‚å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œ40ä¸ªå‘¨æœŸçš„è®­ç»ƒï¼Œå…¶ä¸­å‰20ä¸ªå‘¨æœŸçš„å­¦ä¹ ç‡ä¸º$10<sup>{âˆ’3}$ï¼Œç„¶åç”¨$5Ã—10</sup>{âˆ’4}$çš„å­¦ä¹ ç‡å¯¹æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥å¾®è°ƒã€‚ä½¿ç”¨MatConvNetåŒ…[56]åœ¨Nvidia GeForce GTX 1080 Ti GPUä¸Šè®­ç»ƒæˆ‘ä»¬çš„CBDNetå¤§çº¦éœ€è¦ä¸‰å¤©æ—¶é—´ã€‚</p><h3 id="4-3-Comparison-with-State-of-the-arts">4.3 Comparison with State-of-the-arts</h3><p>æˆ‘ä»¬è€ƒè™‘äº†4ä¸ªç›²å»å™ªæ–¹æ³•ï¼šNCï¼ŒNIï¼ŒMCWNNMï¼ŒTWSCã€‚NIæ˜¯ä¸€ä¸ªå•†ä¸šçš„è½¯ä»¶ï¼Œå·²ç»åŒ…å«åœ¨Photoshopå’ŒCorel Paintshopä¸­ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹æ¯”äº†é«˜æ–¯ç›²å»å™ªæ–¹æ³•ï¼ˆCDnCNN-Bï¼‰ï¼Œéç›²å»å™ªæ–¹æ³•ï¼ˆCBM3Dï¼ŒWNNMï¼ŒFFDNetï¼‰ã€‚å½“å°†éç›²å»å™ªå™¨åº”ç”¨äºçœŸå®ç…§ç‰‡æ—¶ï¼Œæˆ‘ä»¬åˆ©ç”¨[9]æ¥ä¼°è®¡å™ªå£°SDã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig3.png" alt=""></p><p><strong>NC12</strong>ï¼šå›¾3ç¤ºå‡ºäº†NC12å›¾åƒçš„ç»“æœã€‚æ‰€æœ‰ç«äº‰çš„æ–¹æ³•åœ¨å»é™¤é»‘æš—åŒºåŸŸçš„å™ªå£°æ–¹é¢éƒ½æ˜¯æœ‰é™çš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒCBDNetåœ¨å»é™¤å™ªå£°çš„åŒæ—¶ä¿ç•™äº†æ˜¾è‘—çš„å›¾åƒç»“æ„ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_tab1.png" alt=""></p><p><strong>DND</strong>ï¼šè¡¨1åˆ—å‡ºäº†åœ¨DNDåŸºå‡†ç½‘ç«™ä¸Šå‘å¸ƒçš„PSNR/SSIMç»“æœã€‚æ¯«æ— ç–‘é—®ï¼ŒCDnCNN-B[61]ä¸èƒ½æ¨å¹¿åˆ°çœŸå®çš„å™ªå£°ç…§ç‰‡ï¼Œå¹¶ä¸”è¡¨ç°å¾—éå¸¸å·®ã€‚è™½ç„¶æä¾›äº†åˆæˆå™ªå£°ï¼Œéç›²é«˜æ–¯å»å™ªå™¨æ¯”å¦‚WNNM[17]ã€BM3D[12]å’ŒFOE[52]ç­‰å› ä¸ºçœŸå®å™ªå£°ä¸AWGNæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå› æ­¤åªèƒ½è·å¾—æœ‰æ•ˆæ€§èƒ½ã€‚MCWNNM[59]å’ŒTWSC[58]æ˜¯ä¸“é—¨ä¸ºçœŸå®ç…§ç‰‡çš„ç›²å»å™ªè€Œè®¾è®¡çš„ï¼Œå¾—ç›ŠäºçœŸå®å™ªå£°æ¨¡å‹å’Œä¸çœŸå®å™ªå£°å›¾åƒçš„ç»“åˆï¼Œä¹Ÿå–å¾—äº†ä»¤äººæ»¡æ„çš„ç»“æœã€‚æˆ‘ä»¬çš„CBDNetè·å¾—äº†æœ€é«˜çš„PSNR/SSIMç»“æœï¼Œå¹¶ä¸”ç•¥å¥½äºMCWNNM[59]å’ŒTWSC[58]ã€‚CBDnetçš„æ€§èƒ½æ˜æ˜¾ä¼˜äºå¦ä¸€ä¸ªåŸºäºCNNçš„å»å™ªå™¨ï¼Œå³CIMMã€‚å¯¹äºä¸€å¹…512Ã—512çš„å›¾åƒï¼ŒCBDNetçš„è¿è¡Œæ—¶é—´çº¦ä¸º0.4sã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig4.png" alt=""></p><p>å›¾4æä¾›äº†DNDå›¾åƒçš„å»å™ªç»“æœã€‚BM3Då’ŒCDnCNN-Bä¸èƒ½å»é™¤çœŸå®å›¾åƒä¸­çš„å¤§éƒ¨åˆ†å™ªå£°ï¼ŒNCã€NIã€MCWNNMå’ŒTWNCä»ç„¶ä¸èƒ½å»é™¤æ‰€æœ‰å™ªå£°ï¼ŒNIä¹Ÿå­˜åœ¨è¿‡å¹³æ»‘æ•ˆåº”ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„CBDNetåœ¨å¹³è¡¡å»å™ªå’Œç»“æ„ä¿æŠ¤æ–¹é¢è¡¨ç°å‡ºè‰¯å¥½æ€§èƒ½ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_tab2.png" alt=""></p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig5.png" alt=""></p><p><strong>Nam</strong>ï¼šå®šé‡å’Œå®šæ€§ç»“æœå¦‚è¡¨2å’Œå›¾5æ‰€ç¤ºã€‚CBDNet(JPEG)çš„æ€§èƒ½è¿œè¿œä¼˜äºCBDNet(å³å³°å€¼ä¿¡å™ªæ¯”ä¸º1.3dB)ï¼Œå¹¶ä¸”ä¸æœ€å…ˆè¿›çš„ç½‘ç»œç›¸æ¯”å–å¾—äº†æœ€å¥½çš„æ€§èƒ½ã€‚</p><h3 id="4-4-æ¶ˆèç ”ç©¶">4.4 æ¶ˆèç ”ç©¶</h3><h4 id="å™ªå£°æ¨¡å‹çš„å½±å“">å™ªå£°æ¨¡å‹çš„å½±å“</h4><p>æˆ‘ä»¬è€ƒè™‘äº†éå‡åŒ€é«˜æ–¯(HG)å’Œç›¸æœºå†…å¤„ç†(ISP)æµæ°´çº¿ä»£æ›¿AWGNæ¥å»ºæ¨¡å›¾åƒå™ªå£°ã€‚åœ¨DNDå’ŒNAMä¸Šï¼Œæˆ‘ä»¬å®ç°äº†å››ç§å™ªå£°æ¨¡å‹ï¼š(I)é«˜æ–¯å™ªå£°(CBDNet(G))ï¼Œ(Ii)å¼‚è´¨é«˜æ–¯(CBDNet(HG))ï¼Œ(Iii)é«˜æ–¯å™ªå£°å’ŒISP(CBD-Net(G+ISP))ï¼Œä»¥åŠ(Iv)å¼‚è´¨é«˜æ–¯å’ŒISP(CBDNet(HG+ISP)ï¼Œå³å®Œæ•´çš„CBDNetã€‚å¯¹äºNAMï¼Œè¿˜åŒ…æ‹¬CBD-NET(JPEG)ã€‚è¡¨3æ˜¾ç¤ºäº†ä¸åŒå™ªå£°æ¨¡å‹çš„PSNR/SSIMç»“æœã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_tab3.png" alt=""></p><h5 id="Gä¸HG">Gä¸HG</h5><p>åœ¨æ²¡æœ‰ISPçš„æƒ…å†µä¸‹ï¼ŒCBDNet(HG)æ¯”CBDNet(G)è·å¾—äº†çº¦0.8âˆ¼çš„1dBå¢ç›Šã€‚å½“åŒ…å«ISPæ—¶ï¼ŒHGçš„å¢ç›Šé€‚ä¸­ï¼Œå³CBDNet(HG+ISP)çš„æ€§èƒ½ä»…æ¯”CBDNet(G+ISP)é«˜0.15dBã€‚</p><h5 id="w-o-ISP">w/o ISP</h5><p>ä¸ä¹‹ç›¸æ¯”ï¼Œ<strong>ISPå¯¹äºçœŸå®å›¾åƒå™ªå£°çš„å»ºæ¨¡æ›´ä¸ºå…³é”®</strong>ã€‚ç‰¹åˆ«åœ°ï¼ŒCBD-Net(G+ISP)çš„æ€§èƒ½æ¯”CBDNet(G)é«˜4.88dBï¼Œè€ŒCBDNet(HG+ISP)çš„æ€§èƒ½æ¯”CBDNet(HG)é«˜3.87dbon DNDã€‚å¯¹äºNAMï¼ŒISPä¸­åŒ…å«JPEGå‹ç¼©è¿›ä¸€æ­¥å¸¦æ¥äº†1.31dBçš„å¢ç›Šã€‚</p><h5 id="åˆæˆå›¾åƒå’ŒçœŸå®å›¾åƒçš„ç»“åˆ">åˆæˆå›¾åƒå’ŒçœŸå®å›¾åƒçš„ç»“åˆ</h5><p>(I)CBDNet(Syn)åªè®­ç»ƒåœ¨åˆæˆå›¾åƒä¸Šï¼›</p><p>(II)CBDNet(Real)åªè®­ç»ƒåœ¨çœŸå®å›¾åƒä¸Š</p><p>å¹¶å°†æˆ‘ä»¬çš„å®Œæ•´CBDNeté‡å‘½åä¸ºCBDNet(ALL)ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig7.png" alt=""></p><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_tab1.png" alt=""></p><p>å›¾7ç¤ºå‡ºäº†è¿™ä¸‰ç§æ–¹æ³•åœ¨NC12å›¾åƒä¸Šçš„å»å™ªç»“æœã€‚å³ä½¿åœ¨å¤§è§„æ¨¡åˆæˆå›¾åƒæ•°æ®é›†ä¸Šè®­ç»ƒï¼ŒCBDNet(Syn)ä»ç„¶ä¸èƒ½å»é™¤æ‰€æœ‰çš„çœŸå®å™ªå£°ï¼Œéƒ¨åˆ†åŸå› æ˜¯å™ªå£°æ¨¡å‹ä¸èƒ½å®Œå…¨åˆ»ç”»çœŸå®å™ªå£°ã€‚CBDNet(Real)å¯èƒ½ä¼šè¿‡åº¦å¹³æ»‘å›¾åƒï¼Œè¿™éƒ¨åˆ†æ˜¯ç”±äºä¸å¤Ÿç²¾ç¡®çš„å¹²å‡€å™ªå£°å½±å“ã€‚æ¯”è¾ƒè€Œè¨€ï¼ŒCBDNet(ALL)åœ¨å»é™¤çœŸå®å™ªå£°çš„åŒæ—¶ä¿æŒäº†é”åŒ–çš„è¾¹ç¼˜ï¼Œä¸‰ç§æ¨¡å‹åœ¨DNDä¸Šçš„å®šé‡ç»“æœå¦‚è¡¨1æ‰€ç¤ºã€‚CBDNet(ALL)è·å¾—äº†æ¯”CBDNet(Syn)å’ŒCBDNet(Real)æ›´å¥½çš„PSNR/SSIMç»“æœã€‚</p><h5 id="éå¯¹ç§°æŸå¤±å‡½æ•°">éå¯¹ç§°æŸå¤±å‡½æ•°</h5><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig8.png" alt=""></p><p>å›¾8æ¯”è¾ƒäº†å…·æœ‰ä¸åŒÎ±å€¼çš„CBDNetçš„å»å™ªç»“æœï¼Œå³Î±=0.5ã€0.4å’Œ0.3ã€‚å½“Î±=0.5æ—¶ï¼ŒCBDNetå¯¹ä½ä¼°è¯¯å·®å’Œé«˜ä¼°è¯¯å·®æ–½åŠ åŒç­‰çš„æƒ©ç½šï¼Œå½“Î±&lt;0.5æ—¶ï¼Œå¯¹ä½ä¼°è¯¯å·®æ–½åŠ æ›´å¤§çš„æƒ©ç½šã€‚ç”±æ­¤å¯è§ï¼Œ<strong>è¾ƒå°çš„Î±(å³0.30)æœ‰åŠ©äºæé«˜CBDNetå¯¹æœªçŸ¥çœŸå®å™ªå£°çš„æ³›åŒ–èƒ½åŠ›</strong>ã€‚</p><h3 id="4-5-äº¤äº’å¼å›¾åƒå»å™ª">4.5 äº¤äº’å¼å›¾åƒå»å™ª</h3><p><img src="https://picture.mulindya.com/Apaper_collect/CBDnet_fig6.png" alt=""></p><p>ç»™å®šä¼°è®¡çš„å™ªå£°æ°´å¹³å›¾$\hatÏƒ(Y)$ï¼Œæˆ‘ä»¬å¼•å…¥ç³»æ•°$Î³(&gt;0)$æ¥äº¤äº’åœ°å°†$\hatÏƒ(Y)$ä¿®æ­£ä¸º$\hat{\varrho} = \gamma \cdot \hat{\sigma} (y) $ã€‚éç›²å»å™ªå­ç½‘ç»œé€šè¿‡å…è®¸ç”¨æˆ·è°ƒæ•´$\gamma $ï¼Œå°†$\hat{\varrho} $å’Œæœ‰å™ªå›¾åƒä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°å»å™ªç»“æœã€‚å›¾6ç¤ºå‡ºäº†ä¸¤ä¸ªçœŸå®çš„DNDå™ªå£°å›¾åƒä»¥åŠä½¿ç”¨ä¸åŒ$\gamma$å€¼è·å¾—çš„ç»“æœã€‚</p><p>è®¾ç½®ç¬¬ä¸€å¼ å›¾çš„$\gamma =0.7$ï¼Œç¬¬äºŒå¼ å›¾çš„$\gamma = 1.3$ï¼ŒCBDNetåˆ†åˆ«åœ¨<strong>ä¿ç•™ç»†èŠ‚çº¹ç†å’Œå»é™¤å¤æ‚å™ªå£°æ–¹é¢</strong>å–å¾—äº†è¾ƒå¥½çš„è§†è§‰æ•ˆæœã€‚å› æ­¤ï¼Œè¿™ç§äº¤äº’æ–¹æ¡ˆå¯ä»¥ä¸ºåœ¨å®é™…åœºæ™¯ä¸­è°ƒæ•´å»å™ªç»“æœæä¾›ä¸€ç§æ–¹ä¾¿çš„æ‰‹æ®µã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>å»å™ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>å»å™ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft324 æ‘†åŠ¨æ’åºâ…¡</title>
    <link href="/2022/03/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft324/"/>
    <url>/2022/03/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft324/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ‘†åŠ¨æ’åºâ…¡</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œå°†å®ƒé‡æ–°æ’åˆ—æˆ nums[0] &lt; nums[1] &gt; nums[2] &lt; nums[3]â€¦ çš„é¡ºåºã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ‰€æœ‰è¾“å…¥æ•°ç»„éƒ½å¯ä»¥å¾—åˆ°æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ç»“æœã€‚</p><p>å¥‡æ•°indexçš„æ•°å­—å¤§äºå·¦å³çš„å¶æ•°indexæ•°å­—</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[1,5,1,1,6,4]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[1,6,1,5,1,4]</span><br>è§£é‡Šï¼š<span class="hljs-string">[1,4,1,5,1,6]</span> åŒæ ·æ˜¯ç¬¦åˆé¢˜ç›®è¦æ±‚çš„ç»“æœï¼Œå¯ä»¥è¢«åˆ¤é¢˜ç¨‹åºæ¥å—ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[1,3,2,2,3,1]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[2,3,1,3,1,2]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= nums.length &lt;= 5 * 104</li><li>0 &lt;= nums[i] &lt;= 5000</li><li>é¢˜ç›®æ•°æ®ä¿è¯ï¼Œå¯¹äºç»™å®šçš„è¾“å…¥ nums ï¼Œæ€»èƒ½äº§ç”Ÿæ»¡è¶³é¢˜ç›®è¦æ±‚çš„ç»“æœ</li></ul><p>**è¿›é˜¶ï¼š**ä½ èƒ½ç”¨ O(n) æ—¶é—´å¤æ‚åº¦å’Œ / æˆ–åŸåœ° O(1) é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ</p><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h3><h4 id="æ’åº-é€†åºç©¿æ’">æ’åº+é€†åºç©¿æ’</h4><p>é¦–å…ˆæ’åºæ•°ç»„ï¼Œå¯¹äºæ’åºåçš„æ•°ç»„çš„å‰éƒ¨åˆ†æ˜¯å¿…ç„¶å°äºç­‰äºæ•°ç»„çš„åéƒ¨åˆ†ï¼Œä¸­é—´å¯èƒ½æœ‰ç›¸ç­‰çš„æƒ…å†µï¼Œåªéœ€è¦å°†æ•°ç»„ååŠéƒ¨åˆ†æ’å…¥å¥‡æ•°ï¼Œå‰åŠéƒ¨åˆ†æ’å…¥å¶æ•°ä½ç½®å³å¯ï¼›ä½†æ˜¯è¦æ³¨æ„ä¸­é—´ç›¸ç­‰çš„éƒ¨åˆ†ï¼Œä½¿ç”¨é€†åºç©¿æ’æŠŠä¸­é—´ä½ç½®çš„æ•°å­—ç©¿æ’æ”¾åˆ°ä¸¤è¾¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wiggleSort</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        Do not return anything, modify nums in-place instead.</span><br><span class="hljs-string">        """</span><br>        Cnums = <span class="hljs-built_in">sorted</span>(nums)<br>        n = <span class="hljs-built_in">len</span>(nums)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(nums),<span class="hljs-number">2</span>): <span class="hljs-comment">#å¥‡æ•°å¤§äºå¶æ•°ä½ç½® å…ˆæ”¾ç½®å¥‡æ•°</span><br>            n -= <span class="hljs-number">1</span><br>            nums[i] = Cnums[n]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums),<span class="hljs-number">2</span>): <span class="hljs-comment">#åæ”¾ç½®å¶æ•° å› ä¸ºä¸­é—´çš„æ•°æ®ä¸€éƒ¨åˆ†åœ¨æ•°ç»„å¤´ï¼Œä¸€éƒ¨åˆ†åœ¨æ•°ç»„å°¾éƒ¨ï¼Œæ‰€ä»¥ä¸­é—´å‡ºç°ç›¸ç­‰çš„æƒ…å†µå°±ä¸ä¼šå½±å“</span><br>            n -= <span class="hljs-number">1</span><br>            nums[i] = Cnums[n] <br>        <span class="hljs-keyword">return</span> nums<br></code></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯å®é™…ä¸Šä¸éœ€è¦æ’åºï¼Œå› ä¸ºåªéœ€è¦æ‰¾åˆ°ä¸­ä½æ•°å³å¯ï¼Œæ— éœ€ä¿è¯ä¸­ä½æ•°çš„å·¦å³éƒ¨åˆ†æ˜¯é¡ºåºçš„ã€‚</p><ul><li>é¦–å…ˆæ‰¾åˆ°ä¸­ä½æ•°ï¼Œå‡†ç¡®è¯´æ˜¯ç¬¬kä¸ªæ•°ï¼ˆä½¿ç”¨å¿«é€Ÿæ’åºæ³•ï¼‰</li><li>ä½¿ç”¨ä¸‰åˆ†æ³•å°†æ•°ç»„åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†å°äºä¸­ä½æ•°ï¼Œç­‰äºä¸­ä½æ•°ï¼Œå¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†</li><li>é€†åºç©¿æ’</li></ul><p>è¿™æ ·æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)+O(n),å³ä¸ºO(N)</p><h3 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h3><h4 id="æ€»ä½“å‡½æ•°">æ€»ä½“å‡½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wiggleSort</span>(<span class="hljs-params">nums</span>):</span><br>    n = <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">if</span> n&lt;=<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> nums<br>    k = (n+<span class="hljs-number">1</span>)//<span class="hljs-number">2</span>-<span class="hljs-number">1</span><br>    mid_value = partition(nums, k, <span class="hljs-number">0</span>, n-<span class="hljs-number">1</span>)<br>    three_way_partition(nums, mid_value)<br>    nums0 = nums.copy()<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        nums[k] = nums0[(n+<span class="hljs-number">1</span>)//<span class="hljs-number">2</span>-<span class="hljs-number">1</span>-k//<span class="hljs-number">2</span>] <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> k%<span class="hljs-number">2</span>) <span class="hljs-keyword">else</span> nums0[(n-<span class="hljs-number">1</span>)-k//<span class="hljs-number">2</span>]<br></code></pre></td></tr></tbody></table></figure><h4 id="å¯»æ‰¾ä¸­ä½æ•°">å¯»æ‰¾ä¸­ä½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">partition</span>(<span class="hljs-params">nums, k, start, end</span>):</span><br>    key = nums[start]<br>    left, right = start, end<br>    <span class="hljs-comment"># print('nums={}, start={}, end={}'.format(nums,start,end))</span><br>    <span class="hljs-comment"># å¾ªç¯ä¸­çš„ä¸å˜é‡: left&lt;right and nums[right]&gt;=key and nums[left]&lt;=key</span><br>    <span class="hljs-keyword">while</span> left &lt; right:<br>        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> nums[right] &gt;= key:<br>            right = right - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> left &lt; right: nums[left],nums[right] = nums[right],nums[left]<br>        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> nums[left] &lt;= key:<br>            left = left + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> left &lt; right: nums[left],nums[right] = nums[right],nums[left]<br><br>    <span class="hljs-keyword">if</span> left == k:<br>        <span class="hljs-keyword">return</span> nums[left]<br>    <span class="hljs-keyword">elif</span> left &gt; k:<br>        <span class="hljs-keyword">return</span> partition(nums, k, start, left-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> partition(nums, k, left+<span class="hljs-number">1</span>, end)<br></code></pre></td></tr></tbody></table></figure><h4 id="ä¸‰åˆ†æ³•">ä¸‰åˆ†æ³•</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#ä¸‰åˆ†æ³•å®ç° {å·¦ä¾§}&lt;=value&lt;={å³ä¾§} ä¸ºä½¿å¾—å·¦å³ä¸¤ä¾§é•¿åº¦è¿‘ä¼¼</span><br><span class="hljs-comment">#æˆ‘ä»¬å– value = numsçš„ç¬¬(n+1)//2 ä¸ªæ•° åŒæ’åºæ–¹æ³•ä¸­å‰åŠæ®µçš„æœ€åä¸€ä¸ªæ•°å­—</span><br><span class="hljs-comment">#å‚æ•°l, ræ˜¯å°äº/å¤§äºvalueçš„å·¦å³ä¸‹æ ‡è¾¹ç•Œ, å³nums[k]&lt;=value for k&lt;=l,nums[k]&gt;=value for k&gt;=r</span><br><span class="hljs-comment">#å‚æ•° i æ˜¯å½“å‰éå†åˆ°çš„æ•°å­—çš„ä¸‹æ ‡ æ ¹æ®å®ƒå’Œvalueçš„å…³ç³» æˆ‘ä»¬ç¡®å®š nums[i]æ˜¯å’Œ l è¿˜æ˜¯å’Œ r äº¤æ¢</span><br><span class="hljs-comment">#ä¸¤ä¸ªç»†èŠ‚ ã€1ã€‘ while i&lt;=rã€2ã€‘ åªæœ‰nums[i]&lt;=value äº¤æ¢ä¹‹åi+=1</span><br>nums = [<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>] <span class="hljs-comment"># mid=2</span><br>value = <span class="hljs-number">2</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">three_way_partition</span>(<span class="hljs-params">nums, value</span>):</span><br>    n=<span class="hljs-built_in">len</span>(nums)<br>    l, r = <span class="hljs-number">0</span>, n-<span class="hljs-number">1</span><br>    i = <span class="hljs-number">0</span><br>    <span class="hljs-comment">#ä¸èƒ½è®©iè¶Šè¿‡r å¦åˆ™å¦‚æœnums[l]&lt;=nums[r]&lt;nums[i] ä¼šåœ¨ä¸‹ä¸€æ¬¡ä¸­è®©å³ä¾§æ›´å¤§çš„æ•°å­—è¢«æ¢åˆ°å·¦ä¾§</span><br>    <span class="hljs-keyword">while</span> i&lt;=r: <br>        <span class="hljs-keyword">if</span> nums[i]&lt;value:<br>            nums[l],nums[i]=nums[i],nums[l]<br>            l+=<span class="hljs-number">1</span><br>            i+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> nums[i]&gt;value: <span class="hljs-comment">#åœ¨è¿™ç§æƒ…å†µä¸‹iä¸è¦ç§»åŠ¨ å› ä¸ºäº¤æ¢è¿‡æ¥çš„æ•°å­—nums[r]å¯èƒ½ä»æ˜¯&gt;value</span><br>            nums[r],nums[i]=nums[i],nums[r]<br>            r-=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            i+=<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h4 id="é€†åºç©¿æ’">é€†åºç©¿æ’</h4><p>é€†åºä¹‹åçš„é¡ºåº: (n+1)//2-1 â€¦1 || (n-1)â€¦(n+1)//2<br>ç©¿æ’ä¹‹åçš„é¡ºåº: (n+1)//2-1, (n-1), (n+1)//2-1, (n-2),â€¦, 1, (n+1)//2<br>(æœ€åä¸¤ä¸ªå…ƒç´ ä¹Ÿå¯èƒ½æ˜¯(n+1)//2ï¼Œ1ï¼‰<br>kå¶æ•°ï¼šind[0] - ind[k] = k//2 æ‰€ä»¥ ind[k] = ind[0]-k//2 = (n+1)//2-1-k//2<br>kå¥‡æ•°: ind[1] - ind[k] = k//2 æ‰€ä»¥ ind[k] = ind[1]-k//2 = (n-1)-k//2</p>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>ä¸­ä½æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>ä¸­ä½æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop_Microsoft56 åˆå¹¶åŒºé—´</title>
    <link href="/2022/03/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft56/"/>
    <url>/2022/03/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft56/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åˆå¹¶åŒºé—´</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»¥æ•°ç»„ intervals è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º intervals[i] = [starti, endi] ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šintervals = [[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">6</span>],[<span class="hljs-number">8</span>,<span class="hljs-number">10</span>],[<span class="hljs-number">15</span>,<span class="hljs-number">18</span>]]<br>è¾“å‡ºï¼š[[<span class="hljs-number">1</span>,<span class="hljs-number">6</span>],[<span class="hljs-number">8</span>,<span class="hljs-number">10</span>],[<span class="hljs-number">15</span>,<span class="hljs-number">18</span>]]<br>è§£é‡Šï¼šåŒºé—´ [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>] å’Œ [<span class="hljs-number">2</span>,<span class="hljs-number">6</span>] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [<span class="hljs-number">1</span>,<span class="hljs-number">6</span>].<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šintervals = <span class="hljs-string">[[1,4],[4,5]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,5]]</span><br>è§£é‡Šï¼šåŒºé—´ [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>] å’Œ [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= intervals.length &lt;= 104</li><li>intervals[i].length == 2</li><li>0 &lt;= starti &lt;= endi &lt;= 104</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é¦–å…ˆå¯¹listæ’åºï¼ˆæ ¹æ®æ¯ä¸ªé—´éš”çš„startï¼‰ç„¶åä½¿ç”¨åŒæŒ‡é’ˆåˆ¤æ–­æ˜¯å¦åˆå¹¶åŒºé—´å³å¯ã€‚ä½¿ç”¨<code>key=lambda x:x[0]</code>æ¥æŒ‡å®šæ’åºçš„æ ¹æ®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge</span>(<span class="hljs-params">self, intervals: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        intervals = <span class="hljs-built_in">sorted</span>(intervals,key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">0</span>])<br>        result = []<br>        start,end = intervals[<span class="hljs-number">0</span>] <span class="hljs-comment">#å¯ä»¥ç›´æ¥èµ‹å€¼åˆ°ä¸¤ä¸ªå˜é‡</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> intervals:<br>            <span class="hljs-keyword">if</span> item[<span class="hljs-number">0</span>]&lt;=end <span class="hljs-keyword">and</span> item[<span class="hljs-number">1</span>]&gt;end:<br>                end = item[<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">elif</span> item[<span class="hljs-number">0</span>]&gt;end:<br>                result.append([start,end])<br>                start,end = item[<span class="hljs-number">0</span>],item[<span class="hljs-number">1</span>]<br>        result.append([start,end])<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>åŒæŒ‡é’ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>åŒæŒ‡é’ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CodeTop microsoft3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <link href="/2022/03/07/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft3/"/>
    <url>/2022/03/07/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/CodeTop/CodeTop-Microsoft3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = "abcabcbb"</span><br><span class="hljs-section">è¾“å‡º: 3 </span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = "bbbbb"</span><br><span class="hljs-section">è¾“å‡º: 1</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = "pwwkew"</span><br><span class="hljs-section">è¾“å‡º: 3</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯&nbsp;"wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br>&nbsp;    è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ<span class="hljs-string">"pwke"</span>&nbsp;æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= s.length &lt;= 5 * 104</code></li><li><code>s</code> ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¿™é“é¢˜ä¸»è¦ç”¨åˆ°æ€è·¯æ˜¯ï¼šæ»‘åŠ¨çª—å£</p><ul><li>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ï¼Ÿ</li></ul><p>å…¶å®å°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—,æ¯”å¦‚ä¾‹é¢˜ä¸­çš„ abcabcbbï¼Œè¿›å…¥è¿™ä¸ªé˜Ÿåˆ—ï¼ˆçª—å£ï¼‰ä¸º abc æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œå½“å†è¿›å…¥ aï¼Œé˜Ÿåˆ—å˜æˆäº† abcaï¼Œè¿™æ—¶å€™ä¸æ»¡è¶³è¦æ±‚ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ç§»åŠ¨è¿™ä¸ªé˜Ÿåˆ—ï¼</p><ul><li>å¦‚ä½•ç§»åŠ¨ï¼Ÿ</li></ul><p>æˆ‘ä»¬åªè¦æŠŠé˜Ÿåˆ—çš„å·¦è¾¹çš„å…ƒç´ ç§»å‡ºå°±è¡Œäº†ï¼Œç›´åˆ°é‡å¤å­—ç¬¦ä¹‹åã€‚</p><p>ä¸€ç›´ç»´æŒè¿™æ ·çš„é˜Ÿåˆ—ï¼Œæ‰¾å‡ºé˜Ÿåˆ—å‡ºç°æœ€é•¿çš„é•¿åº¦æ—¶å€™ï¼Œæ±‚å‡ºè§£ï¼</p><blockquote><p>è¿™é‡Œè¦ä½¿ç”¨åˆ°pythonçš„setï¼Œæ·»åŠ å…ƒç´ ä½¿ç”¨addï¼Œå»é™¤å…ƒç´ ä½¿ç”¨removeï¼ŒæŸ¥æ‰¾å…ƒç´ æ˜¯å¦åœ¨å…¶ä¸­ä½¿ç”¨in</p></blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#ä½¿ç”¨æ»‘åŠ¨çª—å£</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s:<span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        left,maxLength,curLength = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        sset = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-keyword">for</span> right <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">while</span> s[right] <span class="hljs-keyword">in</span> sset: <span class="hljs-comment">#åˆ¤æ–­æ˜¯å¦åœ¨setä¸­O(1)å³å¯ï¼Œå¦‚æœåœ¨ssetä¸­å°†leftç§»åŠ¨åˆ°é‡å¤å­—ç¬¦åé¢æ‰€ä»¥æ˜¯while</span><br>                sset.remove(s[left]) <span class="hljs-comment"># ç§»é™¤è¯¥å…ƒç´ </span><br>                left += <span class="hljs-number">1</span><br>                curLength -= <span class="hljs-number">1</span><br>            sset.add(s[right]) <span class="hljs-comment">#æ·»åŠ è‡³setä¸­</span><br>            curLength += <span class="hljs-number">1</span><br>            maxLength = <span class="hljs-built_in">max</span>(maxLength,curLength)<br>        <span class="hljs-keyword">return</span> maxLength<br></code></pre></td></tr></tbody></table></figure><ul><li>ä»€ä¹ˆç±»å‹çš„é¢˜ç›®ä½¿ç”¨æ»‘åŠ¨çª—å£å‘¢ï¼Ÿ</li></ul><p>å¦‚æœæˆ‘ä»¬ä¾æ¬¡é€’å¢åœ°æšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½®ï¼Œé‚£ä¹ˆå­ä¸²çš„ç»“æŸä½ç½®ä¹Ÿæ˜¯é€’å¢çš„ï¼›è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ã€Œæ»‘åŠ¨çª—å£ã€æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>defaultdict</code>ç±»ï¼Œä½¿ç”¨<code>from collections import defaultdict</code>,ä½¿ç”¨<code>defaultdict</code>çš„å¥½å¤„æ˜¯å¦‚æœä¸åœ¨è¯¥å­—å…¸ä¸­ä¼šè¿”å›å®šä¹‰çš„é»˜è®¤å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type s: str</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br>        lookup = defaultdict(<span class="hljs-built_in">int</span>)<br>        start = <span class="hljs-number">0</span><br>        end = <span class="hljs-number">0</span><br>        max_len = <span class="hljs-number">0</span><br>        counter = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> end &lt; <span class="hljs-built_in">len</span>(s):<br>            <span class="hljs-keyword">if</span> lookup[s[end]] &gt; <span class="hljs-number">0</span>: <span class="hljs-comment">#å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒçš„å…ƒç´ ä½¿ç”¨counterè®°å½•</span><br>                counter += <span class="hljs-number">1</span><br>            lookup[s[end]] += <span class="hljs-number">1</span><br>            end += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> counter &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">if</span> lookup[s[start]] &gt; <span class="hljs-number">1</span>:<br>                    counter -= <span class="hljs-number">1</span><br>                lookup[s[start]] -= <span class="hljs-number">1</span><br>                start += <span class="hljs-number">1</span><br>            max_len = <span class="hljs-built_in">max</span>(max_len, end - start)<br>        <span class="hljs-keyword">return</span> max_len<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>CodeTop</category>
      
      <category>å¾®è½¯</category>
      
      <category>æ»‘åŠ¨çª—å£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CodeTop</tag>
      
      <tag>å¾®è½¯</tag>
      
      <tag>æ»‘åŠ¨çª—å£</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤–åˆŠå¯’å‡å°è¯¾--Gaming Share the data</title>
    <link href="/2022/03/04/english/gaming-share-the-data/"/>
    <url>/2022/03/04/english/gaming-share-the-data/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¯’å‡å°è¯¾Gaming Share the dataæ•´ç†</p></blockquote><h2 id="åŸæ–‡">åŸæ–‡</h2><h2 id="å•è¯">å•è¯</h2><p>video games ç”µå­æ¸¸æˆ</p><p>makers of video games = video games developers = video game companies ç”µå­æ¸¸æˆå…¬å¸ã€ç”µå­æ¸¸æˆå¼€å‘å•†/åˆ¶é€ å•†ã€‚</p><p>addictive ç—…ç†æ€§çš„ä¸Šç˜¾ï¼Œç±»ä¼¼æ¯’ç˜¾</p><ul><li>compulsive<ul><li>a compulsive mobile phone user æ‰‹æœºé‡åº¦ç”¨æˆ·</li><li>â€œæ´ç™–â€å°±å¯ä»¥è¯´ compulsively neat and clean.</li><li>æœ‰æ—¶å¯ä»¥å¼•ç”³ä¸º very interesting/attractiveï¼ˆå¼•äººå…¥èƒœçš„ï¼‰</li></ul></li><li>despite  è¡¨ç¤ºâ€œå°½ç®¡â€ï¼Œæ³¨æ„åé¢åŠ åè¯æˆ–åŠ¨åè¯ã€‚</li><li>manual<ul><li>å½¢å®¹è¯ï¼Œè¡¨ç¤ºâ€œç”¨æ‰‹çš„ã€ä½“åŠ›çš„â€ï¼Œè·Ÿ mental ç›¸å¯¹<ul><li>The trend away from manual labor has continued. ä½“åŠ›åŠ³åŠ¨è½¬ä¸ºè„‘åŠ›åŠ³åŠ¨çš„è¶‹åŠ¿ä»åœ¨ç»§ç»­ã€‚</li></ul></li><li>â€œæ‰‹å†Œã€æŒ‡å—â€<ul><li>The classification manual explains that by the time the agency declares a famine, the highest category, it will be too late to avert the worst consequences â€œbecause many will have diedâ€.è¿™æœ¬åˆ†ç±»æ‰‹å†Œè§£é‡Šè¯´ï¼Œå½“æœºæ„å®£å¸ƒé¢ä¸´é¥¥è’ï¼ˆæœ€é«˜ç­‰çº§çš„ç¾éš¾ï¼‰æ—¶ï¼Œå†é‡‡å–è¡ŒåŠ¨ä¸ºæ—¶å¤ªæ™šï¼Œå› ä¸ºå·²ç»æœ‰å¾ˆå¤šäººæ­»äº¡ã€‚</li></ul></li></ul></li><li><strong>sprout</strong><ul><li>åŠ¨è¯ï¼Œæœ¬ä¹‰æ˜¯æŒ‡å¶å­ã€èŠ½æˆ–æ¤æ ªçš„â€œå‘èŠ½ã€ç”Ÿé•¿â€<ul><li>Most seeds can wait out the dry, unwelcoming seasons until conditions are right and they sprout.å¤§å¤šæ•°ç§å­å¯ä»¥ç†¬è¿‡å¹²ç‡¥ã€ä¸¥é…·çš„å­£èŠ‚ï¼Œç­‰å¾…æ¡ä»¶é€‚åˆæ—¶å‘èŠ½ã€‚</li></ul></li><li>â€œå‘èŠ½ã€ç”Ÿé•¿â€å¼•ç”³å‡ºâ€œå‡ºç°ã€æ¶Œç°â€çš„å«ä¹‰<ul><li>Clinics are sprouting around the world çš„æ„æ€å°±æ˜¯è¯Šæ‰€åœ¨ä¸–ç•Œå„åœ°æ¶Œç°å‡ºæ¥</li></ul></li></ul></li><li><strong>cure</strong><ul><li>â€œæ²»ç–—â€å¼•ç”³å‡ºâ€œçŸ«æ­£ã€æ”¹æ­£(æŸäººçš„ä¸è‰¯è¡Œä¸º)â€çš„æ„æ€ï¼Œç”¨æ³•ä¸º cure sb of sthã€‚to stop sb from behaving in a particular way, especially a way that is bad or annoying.<ul><li>Nothing could cure her of her impatience with Anna.å¥¹å°±æ˜¯æ”¹ä¸äº†å¯¹å®‰å¨œçš„ä¸è€çƒ¦æ€åº¦ã€‚</li></ul></li></ul></li></ul><h2 id="çŸ­è¯­">çŸ­è¯­</h2><ul><li>welcome  == to be glad to accept something ä¹æ„æ¥çº³ã€æ¬£ç„¶æ¥å—<ul><li>ä¾‹å¥ï¼šIâ€™d welcome any suggestions.</li></ul></li><li>happen to sb  æŒ‡â€œå‘ç”Ÿåœ¨æŸäººèº«ä¸Šâ€</li><li><strong>å¤šå¹´æ¥</strong><ul><li>åœ°é“è‹±è¯­ä¸­å¾€å¾€è¯´ for years/ages ä¼šçœç•¥many</li></ul></li><li>æŠ±æ€¨  complain å¯ä»¥å’Œ grumble æ›¿æ¢<ul><li>complain of sth</li><li>complain that+å¥å­ã€‚</li></ul></li><li>be addicted to è¡¨ç¤ºâ€œä¸Šç˜¾â€ï¼Œè¿™é‡Œçš„toæ˜¯ä»‹è¯ï¼Œåé¢åŠ åè¯æˆ–åŠ¨åè¯</li><li>come into force æŒ‡â€œç”Ÿæ•ˆâ€ï¼Œå¯ä»¥åŒ come into effect æ›¿æ¢ã€‚</li></ul><h2 id="å¥å‹">å¥å‹</h2><ul><li><p>A gains recognition from B â€œAä»Bé‚£é‡Œè·å¾—æ‰¿è®¤â€ï¼Œå³â€œBæ‰¿è®¤Aâ€ã€‚</p></li><li><p>recognition</p><ul><li>change beyond recognition è¡¨ç¤ºâ€œå·¨å˜â€ï¼ˆå˜å¾—è®©äººè®¤ä¸å‡ºæ¥ï¼‰<ul><li>But in the last ten or fifteen years China has changed beyond all recognition.ä½†åœ¨è¿‡å»10-15å¹´é‡Œï¼Œä¸­å›½å‘ç”Ÿäº†ç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚</li></ul></li><li>gain recognition fromâ€¦ å°±æ˜¯â€œä»â€¦é‚£é‡Œè·å¾—æ‰¿è®¤â€<ul><li>He gained recognition from rocket scientists worldwide. ä»–å¾—åˆ°äº†å…¨çƒç«ç®­ç§‘å­¦å®¶çš„è®¤å¯ã€‚</li></ul></li></ul></li><li><p>wayåé¢åŠ å®šè¯­ä»å¥ï¼Œæœ‰ä¸‰ç§å½¢å¼ï¼š</p><blockquote><p>(1) way + in which + å®šè¯­ä»å¥</p><p>ä¾‹å¦‚ï¼šShe was pleased with the way in which he had accepted her criticism.</p><p>(2) way + that +å®šè¯­ä»å¥</p><p>ä¾‹å¦‚ï¼šThey didnâ€™t do it in the way that we do now.</p><p>(3) way + å®šè¯­ä»å¥</p><p>ä¾‹å¦‚ï¼šHe didnâ€™t speak the way I do.</p><p>ä½†ä¸€èˆ¬æ¥è¯´ï¼Œin which æˆ– that å¾€å¾€çœç•¥ï¼Œç›´æ¥è¯´ã€Œway+å®šè¯­ä»å¥ã€ï¼Œè¿™æ ·æ›´åŠ ç®€ç»ƒã€‚</p></blockquote></li></ul>]]></content>
    
    
    <categories>
      
      <category>è‹±è¯­</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‹±è¯­</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ”¶é›†è¿‘å¹´å»å™ªèµ„æ–™</title>
    <link href="/2022/03/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E6%80%BB%E7%BB%93/collect-papersOfACPDnet/"/>
    <url>/2022/03/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E6%80%BB%E7%BB%93/collect-papersOfACPDnet/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åŸºäº<a href="https://readpaper.com/pdf-annotate/note?noteId=652422328685277184&amp;pdfId=630634874308022272"><strong>Adaptive Consistency Prior based Deep Network for Image Denoising</strong></a>è®ºæ–‡å‡ºå‘ï¼Œä»å¼•ç”¨æ–‡çŒ®æŸ¥æ‰¾2020ï¼Œ2021å¹´ä»½å‘è¡¨çš„è®ºæ–‡ï¼Œä»¥åŠè¢«å¼•ç”¨çš„è®ºæ–‡ã€‚æ•´ç†å…¶æ‘˜è¦ï¼Œç»“è®ºï¼Œå’Œå…¶ä»–é‡è¦å›¾è¡¨ã€‚</p></blockquote><h2 id="å¼•ç”¨-ğŸµ">å¼•ç”¨ ğŸµ</h2><p>[5] Meng Chang, Qi Li, Huajun Feng, and Zhihai Xu. Spatial-adaptive network for single image denoising. In EuropeanConference on Computer Vision (ECCV), pages 171â€“187,Sep. 2020.</p><p>[24] Yoonsik Kim, Jae Woong Soh, Gu Yong Park, and Nam IkCho. Transfer learning from synthetic to real-noise denoisingwith adaptive instance normalization. In IEEE Conferenceon Computer Vision and Pattern Recognition (CVPR), pages3482â€“3492, Jun. 2020. 1, 2, 8</p><p>[29] Xiaoyao Li, Yicong Zhou, Jing Zhang, and Lianhong Wang.Multipatch unbiased distance non-local adaptive means withwavelet shrinkage. IEEE Transactions on Image Processing,29:157â€“169, 2020. 1</p><p>[49] Chunwei Tian, Yong Xu, Zuoyong Li, Wangmeng Zuo,Lunke Fei, and Hong Liu. Attention-guided cnn for imagedenoising. Neural Networks, 124:117â€“129, 2020. 7, 8</p><p>[50] Chunwei Tian, Yong Xu, and Wangmeng Zuo. Image de-noising using deep cnn with batch renormalization. NeuralNetworks, 121:461â€“473, 2020. 7, 8</p><p>[54] Ting Xie, Shutao Li, and Bin Sun. Hyperspectral images de-noising via nonconvex regularized low-rank and sparse ma-trix decomposition. IEEE Transactions on Image Process-ing, 29:44â€“56, 2020. 1</p><p><a href="https://readpaper.com/paper/3090412929">Spatial-Adaptive Network for Single Image Denoising</a></p><p><a href="https://readpaper.com/paper/3008207168">Transfer Learning from Synthetic to Real-Noise Denoising with Adaptive Instance Normalization</a></p><p><a href="https://readpaper.com/paper/2963279247">Multipatch Unbiased Distance Non-Local Adaptive Means With Wavelet Shrinkage</a></p><p><a href="https://readpaper.com/paper/2999653953">Attention-guided CNN for image denoising.</a></p><p><a href="https://readpaper.com/paper/2971719842">Image denoising using deep CNN with batch renormalization.</a></p><p><a href="https://readpaper.com/paper/2959148625">Hyperspectral Images Denoising via Nonconvex Regularized Low-Rank and Sparse Matrix Decomposition</a></p><h2 id="è¢«å¼•ç”¨-ğŸƒ">è¢«å¼•ç”¨ ğŸƒ</h2><p><a href="https://readpaper.com/paper/3213415572">CAR - Cityscapes Attributes Recognition A Multi-category Attributes Dataset for Autonomous Vehicles.</a></p><p><a href="https://readpaper.com/paper/3212228063">Restormer: Efficient Transformer for High-Resolution Image Restoration.</a></p><p><a href="https://readpaper.com/paper/3199857585">Dynamic Attentive Graph Learning for Image Restoration</a></p><h2 id="æ€»ç»“-ğŸ¾">æ€»ç»“ ğŸ¾</h2><h3 id="é—®é¢˜">é—®é¢˜</h3><ol><li>å·ç§¯ç¥ç»ç½‘ç»œå»å™ªæ–¹æ³•ä¼šäº§ç”Ÿè¿‡å¹³æ»‘ä¼ªå½±ã€‚æ›´æ·±å±‚æ¬¡çš„ç½‘ç»œç»“æ„å¯ä»¥ç¼“è§£è¿™äº›é—®é¢˜ï¼Œä½†ä»£ä»·æ˜¯é¢å¤–çš„è®¡ç®—å¼€é”€ã€‚</li><li>çœŸå®å™ªå£°çš„ç»Ÿè®¡é‡ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œå¹¶ä¸”åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½æ˜¯å˜åŒ–çš„ï¼Œå› æ­¤çœŸå®å™ªå£°çš„å»å™ªæ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚</li><li>æ·±å·ç§¯ç¥ç»ç½‘ç»œç ”ç©¶é€šå¸¸è‡´åŠ›äºé€šè¿‡ææ·±çš„CNNæ¥æé«˜å»å™ªæ€§èƒ½ï¼Œä½†éšç€æ·±åº¦çš„å¢åŠ ï¼Œæµ…å±‚å¯¹æ·±å±‚çš„å½±å“ä¼šå‡å¼±ã€‚</li><li>æ·±å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨å›¾åƒå»å™ªé¢†åŸŸå­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š(1)ç”¨äºå»å™ªä»»åŠ¡çš„æ·±å±‚CNNè®­ç»ƒéå¸¸å›°éš¾ï¼›(2)å¤§éƒ¨åˆ†æ·±å±‚CNNå­˜åœ¨æ€§èƒ½é¥±å’Œé—®é¢˜ã€‚</li><li>è™½ç„¶Transformeræ¨¡å‹ç¼“è§£äº†CNNçš„ç¼ºç‚¹(å³æ¥æ”¶èŒƒå›´æœ‰é™ï¼Œå¯¹è¾“å…¥å†…å®¹ä¸é€‚åº”)ï¼Œä½†å…¶è®¡ç®—å¤æ‚åº¦éšç©ºé—´åˆ†è¾¨ç‡å‘ˆäºŒæ¬¡æ›²çº¿å¢é•¿ï¼Œ<strong>å› æ­¤ä¸é€‚ç”¨äºå¤§å¤šæ•°æ¶‰åŠé«˜åˆ†è¾¨ç‡å›¾åƒçš„å›¾åƒæ¢å¤ä»»åŠ¡ã€‚</strong></li><li>è‡ªç„¶å›¾åƒçš„éå±€éƒ¨è‡ªç›¸ä¼¼æ€§å·²è¢«è¯æ˜æ˜¯å›¾åƒæ¢å¤çš„æœ‰æ•ˆå…ˆéªŒã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ç°æœ‰çš„æ·±åº¦éå±€éƒ¨æ–¹æ³•ä¸ºæ¯ä¸ªæŸ¥è¯¢é¡¹åˆ†é…å›ºå®šæ•°é‡çš„é‚»å±…ï¼Œå¿½ç•¥äº†éå±€éƒ¨ç›¸å…³æ€§çš„åŠ¨æ€æ€§ã€‚è€Œä¸”ï¼Œéå±€éƒ¨ç›¸å…³é€šå¸¸æ˜¯åŸºäºåƒç´ çš„ï¼Œå®¹æ˜“å—åˆ°å›¾åƒé€€åŒ–çš„å½±å“è€Œäº§ç”Ÿåå·®ã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>å¯¹åº”çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ol><li>ç©ºé—´è‡ªé€‚åº”å»å™ªç½‘ç»œï¼Œè®¾è®¡äº†ä¸€ç§æ®‹å·®ç©ºé—´è‡ªé€‚åº”å—ï¼Œå¹¶å¼•å…¥å¯å˜å½¢å·ç§¯å¯¹ç©ºé—´ç›¸å…³ç‰¹å¾è¿›è¡Œé‡‡æ ·åŠ æƒã€‚é‡‡ç”¨ä¸Šä¸‹æ–‡å—çš„ç¼–è§£ç å™¨ç»“æ„æ¥æ•è·å¤šå°ºåº¦ä¿¡æ¯ã€‚é€šè¿‡ä»ç²—åˆ°ç»†è¿›è¡Œå»å™ªå¤„ç†ã€‚</li><li>ä¸€ç§æ³›åŒ–è‰¯å¥½çš„å»å™ªç»“æ„å’Œä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆï¼›é‡‡ç”¨è‡ªé€‚åº”å®ä¾‹å½’ä¸€åŒ–æ–¹æ³•æ„å»ºå»å™ªå™¨ï¼Œå¯¹ç‰¹å¾å›¾è¿›è¡Œè§„åˆ™åŒ–ï¼Œé˜²æ­¢ç½‘ç»œè¿‡åº¦æ‹Ÿåˆåˆ°è®­ç»ƒé›†ã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆï¼Œå®ƒå°†ä»åˆæˆå™ªå£°æ•°æ®ä¸­å­¦ä¹ åˆ°çš„çŸ¥è¯†è½¬ç§»åˆ°çœŸå®å™ªå£°å»å™ªå™¨ä¸Šã€‚</li><li>ä¸€ç§æ³¨æ„åŠ›å¼•å¯¼çš„å»å™ªå·ç§¯ç¥ç»ç½‘ç»œ(AD-Net)ï¼Œä¸»è¦åŒ…æ‹¬ç¨€ç–block(SB)ã€ç‰¹å¾å¢å¼ºblock(FEB)ã€å…³æ³¨åº¦block(AB)å’Œé‡æ„block(RB)ã€‚</li><li>æå‡ºäº†ä¸€ç§è¢«ç§°ä¸ºæ‰¹å¤„ç†-é‡æ•´åŒ–å»å™ªç½‘ç»œ(BRDNet)çš„æ–°å‹ç½‘ç»œçš„è®¾è®¡ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬ç»“åˆä¸¤ä¸ªç½‘ç»œæ¥å¢åŠ ç½‘ç»œçš„å®½åº¦ï¼Œä»è€Œè·å¾—æ›´å¤šçš„ç‰¹å¾ã€‚ç”±äºæ‰¹é‡é‡æ•´åŒ–è¢«èåˆåˆ°BRDNetä¸­ï¼Œå¯ä»¥è§£å†³å†…éƒ¨åå˜é‡ç§»ä½å’Œå°æ‰¹é‡é—®é¢˜ã€‚ä¸ºäº†ä¾¿äºç½‘ç»œè®­ç»ƒï¼Œè¿˜é‡‡ç”¨äº†æ•´ä½“å‰©ä½™å­¦ä¹ çš„æ–¹å¼ã€‚åˆ©ç”¨è†¨èƒ€å·ç§¯æ¥æå–æ›´å¤šçš„ä¿¡æ¯ç”¨äºå»å™ªä»»åŠ¡ã€‚</li><li>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æœ‰æ•ˆçš„Transformeræ¨¡å‹ï¼Œå®ƒåœ¨æ„å»ºæ¨¡å—(å¤šå¤´å¤„ç†å’Œå‰é¦ˆç½‘ç»œ)ä¸­è¿›è¡Œäº†å‡ ä¸ªå…³é”®è®¾è®¡ï¼Œä»¥ä¾¿åœ¨æ•è·è¿œè·ç¦»åƒç´ äº¤äº’çš„åŒæ—¶ï¼Œä»ç„¶é€‚ç”¨äºå¤§å›¾åƒã€‚æˆ‘ä»¬çš„æ¨¡å‹åä¸ºRestoration Transformer(Restormer)ï¼›</li><li>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŠ¨æ€æ³¨æ„åŠ›å›¾å­¦ä¹ æ¨¡å‹(DAGL)æ¥æ¢ç´¢å›¾åƒæ¢å¤ä¸­æ–‘å—çº§çš„åŠ¨æ€éå±€éƒ¨æ€§ã€‚</li></ol><h2 id="æ–‡çŒ®å…·ä½“åˆ†æ-ğŸ“¢">æ–‡çŒ®å…·ä½“åˆ†æ ğŸ“¢</h2><h3 id="Spatial-Adaptive-Network-for-Single-ImageDenoising">Spatial-Adaptive Network for Single ImageDenoising</h3><h4 id="æ‘˜è¦">æ‘˜è¦</h4><p>å·ç§¯ç¥ç»ç½‘ç»œåœ¨å›¾åƒå»å™ªä»»åŠ¡ä¸­å¯ä»¥å–å¾—è¾ƒå¥½çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œç”±äºå—å±€éƒ¨åˆšæ€§å·ç§¯è¿ç®—çš„é™åˆ¶ï¼Œè¿™äº›æ–¹æ³•ä¼šäº§ç”Ÿè¿‡å¹³æ»‘ä¼ªå½±ã€‚æ›´æ·±å±‚æ¬¡çš„ç½‘ç»œç»“æ„å¯ä»¥ç¼“è§£è¿™äº›é—®é¢˜ï¼Œä½†ä»£ä»·æ˜¯é¢å¤–çš„è®¡ç®—å¼€é”€ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„ç©ºé—´è‡ªé€‚åº”å»å™ªç½‘ç»œ(SAD-NET)ï¼Œç”¨äºæœ‰æ•ˆåœ°å»é™¤å•å¹…å›¾åƒçš„ç›²å™ªã€‚ä¸ºäº†é€‚åº”ç©ºé—´çº¹ç†å’Œè¾¹ç¼˜çš„å˜åŒ–ï¼Œè®¾è®¡äº†ä¸€ç§æ®‹å·®ç©ºé—´è‡ªé€‚åº”å—ï¼Œå¹¶å¼•å…¥å¯å˜å½¢å·ç§¯å¯¹ç©ºé—´ç›¸å…³ç‰¹å¾è¿›è¡Œé‡‡æ ·åŠ æƒã€‚é‡‡ç”¨ä¸Šä¸‹æ–‡å—çš„ç¼–è§£ç å™¨ç»“æ„æ¥æ•è·å¤šå°ºåº¦ä¿¡æ¯ã€‚é€šè¿‡ä»ç²—åˆ°ç»†è¿›è¡Œå»å™ªå¤„ç†ï¼Œå¾—åˆ°äº†é«˜è´¨é‡çš„æ— å™ªå£°å›¾åƒï¼Œå¹¶å°†è¯¥æ–¹æ³•åº”ç”¨äºåˆæˆå›¾åƒå’ŒçœŸå®å«å™ªå›¾åƒæ•°æ®ï¼Œå®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å®šé‡å’Œè§†è§‰ä¸Šéƒ½ä¼˜äºç›®å‰æœ€å…ˆè¿›çš„å»å™ªæ–¹æ³•ã€‚</p><h4 id="ç»“è®º">ç»“è®º</h4><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç©ºé—´è‡ªé€‚åº”å»å™ªç½‘ç»œæ¥è¿›è¡Œæœ‰æ•ˆçš„å»å™ªã€‚è¯¥ç½‘ç»œç”±å¤šå°ºåº¦æ®‹å·®ç©ºé—´è‡ªé€‚åº”å—æ„æˆï¼Œæ ¹æ®å›¾åƒçš„å†…å®¹å’Œçº¹ç†ç‰¹å¾æŠ½å–ç›¸å…³ç‰¹å¾è¿›è¡ŒåŠ æƒã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥ä¸Šä¸‹æ–‡blockæ¥æ•æ‰å¤šå°ºåº¦ä¿¡æ¯ï¼Œå¹¶å®ç°åç§»é‡ä¼ é€’ï¼Œä»¥æ›´å‡†ç¡®åœ°ä¼°è®¡é‡‡æ ·ä½ç½®ã€‚æˆ‘ä»¬å‘ç°ï¼Œç©ºé—´è‡ªé€‚åº”èƒ½åŠ›çš„å¼•å…¥å¯ä»¥åœ¨å¼ºå™ªå£°ä¸‹çš„å¤æ‚åœºæ™¯ä¸­å­˜å‚¨æ›´ä¸°å¯Œçš„ç»†èŠ‚ã€‚æ‰€æå‡ºçš„SADNetåœ¨åˆæˆå’ŒçœŸå®å™ªå£°å›¾åƒä¸Šéƒ½å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œå¹¶ä¸”å…·æœ‰é€‚ä¸­çš„è¿è¡Œæ—¶é—´ã€‚</p><h4 id="æç‚¼">æç‚¼</h4><h5 id="é—®é¢˜-2">é—®é¢˜</h5><p>ç”±äºå—å±€éƒ¨åˆšæ€§å·ç§¯è¿ç®—çš„é™åˆ¶ï¼Œå·ç§¯ç¥ç»ç½‘ç»œå»å™ªæ–¹æ³•ä¼šäº§ç”Ÿè¿‡å¹³æ»‘ä¼ªå½±ã€‚æ›´æ·±å±‚æ¬¡çš„ç½‘ç»œç»“æ„å¯ä»¥ç¼“è§£è¿™äº›é—®é¢˜ï¼Œä½†ä»£ä»·æ˜¯é¢å¤–çš„è®¡ç®—å¼€é”€ã€‚</p><h5 id="æ–¹æ³•">æ–¹æ³•</h5><p>æå‡ºäº†ä¸€ç§æ–°çš„<strong>ç©ºé—´è‡ªé€‚åº”å»å™ªç½‘ç»œ</strong>(SAD-NET)ï¼Œç”¨äºæœ‰æ•ˆåœ°å»é™¤å•å¹…å›¾åƒçš„ç›²å™ªã€‚ä¸ºäº†é€‚åº”ç©ºé—´çº¹ç†å’Œè¾¹ç¼˜çš„å˜åŒ–ï¼Œè®¾è®¡äº†ä¸€ç§æ®‹å·®ç©ºé—´è‡ªé€‚åº”å—ï¼Œå¹¶å¼•å…¥å¯å˜å½¢å·ç§¯å¯¹ç©ºé—´ç›¸å…³ç‰¹å¾è¿›è¡Œé‡‡æ ·åŠ æƒã€‚é‡‡ç”¨ä¸Šä¸‹æ–‡å—çš„ç¼–è§£ç å™¨ç»“æ„æ¥æ•è·å¤šå°ºåº¦ä¿¡æ¯ã€‚é€šè¿‡ä»ç²—åˆ°ç»†è¿›è¡Œå»å™ªå¤„ç†ï¼Œå¾—åˆ°äº†é«˜è´¨é‡çš„æ— å™ªå£°å›¾åƒã€‚</p><h5 id="ç»†èŠ‚">ç»†èŠ‚</h5><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect1_1.png" alt=""></p><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect1_2.png" alt=""></p><h5 id="æˆæœ">æˆæœ</h5><p>è¯¥æ–¹æ³•åº”ç”¨äºåˆæˆå›¾åƒå’ŒçœŸå®å«å™ªå›¾åƒæ•°æ®ï¼Œå®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å®šé‡å’Œè§†è§‰ä¸Šéƒ½ä¼˜äºç›®å‰æœ€å…ˆè¿›çš„å»å™ªæ–¹æ³•ã€‚æˆ‘ä»¬å‘ç°ï¼Œç©ºé—´è‡ªé€‚åº”èƒ½åŠ›çš„å¼•å…¥å¯ä»¥åœ¨å¼ºå™ªå£°ä¸‹çš„å¤æ‚åœºæ™¯ä¸­å­˜å‚¨æ›´ä¸°å¯Œçš„ç»†èŠ‚ã€‚SADNetåœ¨åˆæˆå’ŒçœŸå®å™ªå£°å›¾åƒä¸Šéƒ½å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œå¹¶ä¸”å…·æœ‰é€‚ä¸­çš„è¿è¡Œæ—¶é—´ã€‚</p><h3 id="Transfer-Learning-from-Synthetic-to-Real-Noise-Denoising-with-Adaptive-Instance-Normalization-â­ï¸">Transfer Learning from Synthetic to Real-Noise Denoising with Adaptive Instance Normalization  â­ï¸</h3><h4 id="æ‘˜è¦-2">æ‘˜è¦</h4><p>ç”±äºçœŸå®å™ªå£°çš„ç»Ÿè®¡é‡ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œå¹¶ä¸”åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½æ˜¯å˜åŒ–çš„ï¼Œå› æ­¤çœŸå®å™ªå£°çš„å»å™ªæ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚ä¸ºäº†åº”å¯¹å„ç§å¤æ‚çš„çœŸå®å™ªå£°ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ³›åŒ–è‰¯å¥½çš„å»å™ªç»“æ„å’Œä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬é‡‡ç”¨è‡ªé€‚åº”å®ä¾‹å½’ä¸€åŒ–æ–¹æ³•æ„å»ºå»å™ªå™¨ï¼Œå¯¹ç‰¹å¾å›¾è¿›è¡Œè§„åˆ™åŒ–ï¼Œé˜²æ­¢ç½‘ç»œè¿‡åº¦æ‹Ÿåˆåˆ°è®­ç»ƒé›†ã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆï¼Œå®ƒå°†ä»åˆæˆå™ªå£°æ•°æ®ä¸­å­¦ä¹ åˆ°çš„çŸ¥è¯†è½¬ç§»åˆ°çœŸå®å™ªå£°å»å™ªå™¨ä¸Šã€‚ä»æ‰€æå‡ºçš„è½¬ç§»å­¦ä¹ ä¸­ï¼Œåˆæˆå™ªå£°å»å™ªå™¨å¯ä»¥ä»å„ç§åˆæˆå™ªå£°æ•°æ®ä¸­å­¦ä¹ ä¸€èˆ¬ç‰¹å¾ï¼Œè€ŒçœŸå®å™ªå£°å»å™ªå™¨å¯ä»¥ä»çœŸå®æ•°æ®ä¸­å­¦ä¹ çœŸå®å™ªå£°ç‰¹å¾ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œæœ¬æ–‡æå‡ºçš„å»å™ªæ–¹æ³•å…·æœ‰å¾ˆå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œåœ¨å·²å‘è¡¨çš„Darmstadtå™ªå£°æ•°æ®é›†(DND)å»å™ªæ–¹æ³•ä¸­ï¼Œç”¨åˆæˆå™ªå£°è®­ç»ƒçš„ç½‘ç»œå–å¾—äº†æœ€å¥½çš„å»å™ªæ•ˆæœã€‚æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æå‡ºçš„è½¬ç§»å­¦ä¹ æ–¹æ¡ˆé€šè¿‡ä½¿ç”¨å¾ˆå°‘çš„æ ‡è®°æ•°æ®è¿›è¡Œå­¦ä¹ ï¼Œå¯¹çœŸå®å™ªå£°å›¾åƒå…·æœ‰å¾ˆå¼ºçš„é²æ£’æ€§ã€‚</p><h4 id="ç»“è®º-2">ç»“è®º</h4><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„RNå»å™ªçš„æ¶ˆå™ªå™¨å’Œè¿ç§»å­¦ä¹ æ–¹æ¡ˆã€‚è¯¥å»å™ªå™¨é‡‡ç”¨AINå¯¹ç½‘ç»œè¿›è¡Œæ­£åˆ™åŒ–å¤„ç†ï¼ŒåŒæ—¶é˜²æ­¢ç½‘ç»œè¿‡æ‹Ÿåˆåˆ°SNã€‚è¿ç§»å­¦ä¹ ä¸»è¦æ˜¯åˆ©ç”¨RNæ•°æ®æ›´æ–°AINæ¨¡å—ï¼Œè°ƒæ•´æ•°æ®åˆ†å¸ƒã€‚ä»å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œæå‡ºçš„å»å™ªæ–¹æ¡ˆå³ä½¿ç”¨SNè®­ç»ƒï¼Œä¹Ÿèƒ½å¾ˆå¥½åœ°æ¨å¹¿åˆ°RNä¸Šã€‚å¹¶ä¸”ï¼Œè¯¥ä¼ é€’å­¦ä¹ æ–¹æ¡ˆå¯ä»¥æœ‰æ•ˆåœ°ä½¿SNæ¶ˆå™ªå™¨é€‚åº”RNæ¶ˆå™ªå™¨ï¼Œå¹¶ä¸”å‡ ä¹ä¸éœ€è¦ç”¨å®æ•°å™ªå£°å¯¹è¿›è¡Œé¢å¤–çš„è®­ç»ƒã€‚æˆ‘ä»¬å°†åœ¨https://github.com/terryoo/AINDNetä¸Šå…¬å¼€æˆ‘ä»¬çš„ä»£ç ï¼Œä»¥ä¾›è¿›ä¸€æ­¥ç ”ç©¶å’Œæ¯”è¾ƒã€‚</p><h4 id="æç‚¼-2">æç‚¼</h4><h5 id="é—®é¢˜-3">é—®é¢˜</h5><p>ç”±äºçœŸå®å™ªå£°çš„ç»Ÿè®¡é‡ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œå¹¶ä¸”åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½æ˜¯å˜åŒ–çš„ï¼Œå› æ­¤çœŸå®å™ªå£°çš„å»å™ªæ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚</p><h5 id="æ–¹æ³•-2">æ–¹æ³•</h5><p>ä¸ºäº†åº”å¯¹å„ç§å¤æ‚çš„çœŸå®å™ªå£°ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ³›åŒ–è‰¯å¥½çš„å»å™ªç»“æ„å’Œä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬é‡‡ç”¨è‡ªé€‚åº”å®ä¾‹å½’ä¸€åŒ–æ–¹æ³•æ„å»ºå»å™ªå™¨ï¼Œå¯¹ç‰¹å¾å›¾è¿›è¡Œè§„åˆ™åŒ–ï¼Œé˜²æ­¢ç½‘ç»œè¿‡åº¦æ‹Ÿåˆåˆ°è®­ç»ƒé›†ã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸€ç§è¿ç§»å­¦ä¹ æ–¹æ¡ˆï¼Œå®ƒå°†ä»åˆæˆå™ªå£°æ•°æ®ä¸­å­¦ä¹ åˆ°çš„çŸ¥è¯†è½¬ç§»åˆ°çœŸå®å™ªå£°å»å™ªå™¨ä¸Šã€‚ä»æ‰€æå‡ºçš„è½¬ç§»å­¦ä¹ ä¸­ï¼Œåˆæˆå™ªå£°å»å™ªå™¨å¯ä»¥ä»å„ç§åˆæˆå™ªå£°æ•°æ®ä¸­å­¦ä¹ ä¸€èˆ¬ç‰¹å¾ï¼Œè€ŒçœŸå®å™ªå£°å»å™ªå™¨å¯ä»¥ä»çœŸå®æ•°æ®ä¸­å­¦ä¹ çœŸå®å™ªå£°ç‰¹å¾ã€‚</p><h5 id="ç»†èŠ‚-2">ç»†èŠ‚</h5><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect2_1.png" alt=""></p><p>å»å™ªå™¨çš„å›¾ç¤ºã€‚å™ªå£°æ°´å¹³ä¼°è®¡å™¨å’Œé‡æ„ç½‘ç»œéƒ½æ˜¯åŸºäºUç½‘çš„ç»“æ„ï¼Œå› æ­¤ç‰¹å¾å›¾é€šè¿‡å¹³å‡æ± /è½¬ç½®å·ç§¯è¿›è¡Œé™/å‡é‡‡æ ·ã€‚æˆ‘ä»¬å°†æ¯ä¸ªå°ºåº¦æ¸©åº¦å›¾è¡¨ç¤ºä¸º1/sï¼Œå…¶ä¸­så¯ä»¥æ˜¯1ã€2å’Œ4ã€‚é‡å»ºç½‘ç»œä¸­è¡¨ç¤ºçš„æ‰€æœ‰å·ç§¯éƒ½æ˜¯3Ã—3æ ¸ï¼Œé™¤æœ€åä¸€æ¬¡å·ç§¯å¤–å…·æœ‰64Sä¸ªç‰¹å¾å›¾ã€‚å™ªå£°ç”µå¹³ä¼°è®¡å™¨çš„ç‰¹å¾è¡¨ç¤ºä¹Ÿç”±32ä¸ªé€šé“çš„3Ã—3å·ç§¯ç»„æˆï¼Œå™ªå£°ç”µå¹³æ˜ å°„ç”±3ä¸ªé€šé“è¾“å‡ºçš„3Ã—3å·ç§¯å¾—åˆ°ã€‚æ€»å‚æ•°ä¸º1370ä¸‡ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect2_2.png" alt=""></p><p>æ‰€å»ºè®®çš„å…·æœ‰ç›¸åº”æ ¸å¤§å°(K)ã€ç‰¹å¾å°ºåº¦(S)å’Œç‰¹å¾æ•°ç›®(N)çš„AIN-ResBlockçš„å›¾ç¤ºã€‚æ³¨æ„ï¼Œnæ ¹æ®sçº¿æ€§å¢åŠ ã€‚Leaky RELUç”¨äºæ¿€æ´»å‡½æ•°ã€‚è§„èŒƒ(çº¢è‰²)blockè¡¨ç¤ºä¿¡é“æ–¹å¼çš„ç©ºé—´å½’ä¸€åŒ–blockã€‚Average-Poolå°†Ïƒ(Y)çš„å¤§å°è°ƒæ•´ä¸ºä¸hçš„å¤§å°ç›¸åŒã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect2_3.png" alt=""></p><p>è¿ç§»å­¦ä¹ æ¨¡å¼å›¾ç¤ºï¼ŒAINæ¨¡å—ã€å™ªå£°ç”µå¹³ä¼°è®¡å™¨å’Œä¸Šæ¬¡å·ç§¯ä»…åœ¨å­¦ä¹ RNæ•°æ®æ—¶æ›´æ–°ã€‚ä¸ºäº†æ›´å¥½åœ°å¯è§†åŒ–ï¼Œæˆ‘ä»¬åœ¨æ­¤å›¾ä¸­çœç•¥äº†å™ªå£°çº§ä¼°è®¡å™¨ã€‚</p><h5 id="æˆæœ-2">æˆæœ</h5><p>å®éªŒç»“æœè¡¨æ˜ï¼Œæœ¬æ–‡æå‡ºçš„å»å™ªæ–¹æ³•å…·æœ‰å¾ˆå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œåœ¨å·²å‘è¡¨çš„Darmstadtå™ªå£°æ•°æ®é›†(DND)å»å™ªæ–¹æ³•ä¸­ï¼Œç”¨åˆæˆå™ªå£°è®­ç»ƒçš„ç½‘ç»œå–å¾—äº†æœ€å¥½çš„å»å™ªæ•ˆæœã€‚æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æå‡ºçš„è½¬ç§»å­¦ä¹ æ–¹æ¡ˆé€šè¿‡ä½¿ç”¨å¾ˆå°‘çš„æ ‡è®°æ•°æ®è¿›è¡Œå­¦ä¹ ï¼Œå¯¹çœŸå®å™ªå£°å›¾åƒå…·æœ‰å¾ˆå¼ºçš„é²æ£’æ€§ã€‚ä»å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œæå‡ºçš„å»å™ªæ–¹æ¡ˆå³ä½¿ç”¨SNè®­ç»ƒï¼Œä¹Ÿèƒ½å¾ˆå¥½åœ°æ¨å¹¿åˆ°RNä¸Šã€‚å¹¶ä¸”ï¼Œè¯¥ä¼ é€’å­¦ä¹ æ–¹æ¡ˆå¯ä»¥æœ‰æ•ˆåœ°ä½¿SNæ¶ˆå™ªå™¨é€‚åº”RNæ¶ˆå™ªå™¨ï¼Œå¹¶ä¸”å‡ ä¹ä¸éœ€è¦ç”¨å®æ•°å™ªå£°å¯¹è¿›è¡Œé¢å¤–çš„è®­ç»ƒã€‚</p><h2 id="Multipatch-Unbiased-Distance-Non-Local-Adaptive-Means-With-Wavelet-Shrinkage">Multipatch Unbiased Distance Non-Local Adaptive Means With Wavelet Shrinkage</h2><h4 id="æ‘˜è¦-3">æ‘˜è¦</h4><p>ç°æœ‰çš„è®¸å¤šéå±€éƒ¨å‡å€¼æ–¹æ³•æˆ–è€…ä½¿ç”¨æ¬§æ°è·ç¦»æ¥åº¦é‡é¢ç‰‡ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œæˆ–è€…åªè®¡ç®—æƒ$Ï‰_{ij}$ä¸€æ¬¡å¹¶åœ¨éšåçš„å»å™ªè¿­ä»£ä¸­ä¿æŒä¸å˜ï¼Œæˆ–è€…åªåˆ©ç”¨å»å™ªå›¾åƒçš„ç»“æ„ä¿¡æ¯æ¥æ›´æ–°æƒ$Ï‰_{ij}$ã€‚è¿™å¯èƒ½å¯¼è‡´å»å™ªæ€§èƒ½æœ‰é™ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§éå±€éƒ¨è‡ªé€‚åº”ç¥ç»ç½‘ç»œ(NLAM)å›¾åƒå»å™ªæ–¹æ³•ã€‚NLAMå°†æƒé‡$Ï‰_{ij}$ä½œä¸ºä¼˜åŒ–å˜é‡ï¼Œè¿­ä»£æ›´æ–°å…¶å€¼ï¼Œå¼•å…¥åƒç´ -åƒç´ ã€é¢ç‰‡-é¢ç‰‡å’Œè€¦åˆæ— åè·ç¦»ä¸‰ç§æ— åè·ç¦»ã€‚ä¸æ¬§å‡ é‡Œå¾·è·ç¦»ç›¸æ¯”ï¼Œè¿™äº›æ— åè·ç¦»åœ¨åº¦é‡å›¾åƒåƒç´ /å—ç›¸ä¼¼æ€§æ–¹é¢æ›´ä¸ºç¨³å¥ã€‚åˆ©ç”¨è€¦åˆæ— åè·ç¦»ï¼Œæå‡ºäº†æ— åè·ç¦»éå±€éƒ¨è‡ªé€‚åº”ç¥ç»ç½‘ç»œ(UD-NLAM)ã€‚ç”±äºUD-NLAMåªä½¿ç”¨å•ä¸ªå—å¤§å°æ¥è®¡ç®—æƒé‡$Ï‰_{ij}$ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥äº†å¤šå—UD-NLAM(MUD-NLAM)æ¥é€‚åº”ä¸åŒçš„å™ªå£°æ°´å¹³ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜å»å™ªæ€§èƒ½ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„å°æ³¢æ”¶ç¼©å»å™ªæ–¹æ³•MUD-NLAM(MUD-NLAM-WS)ï¼Œå®éªŒç»“æœè¡¨æ˜ï¼ŒMUD-NLAMã€UD-NLAMå’ŒMUD-NLAMçš„å»å™ªæ€§èƒ½å‡ä¼˜äºç°æœ‰çš„NLMæ–¹æ³•ï¼Œå…¶ä¸­MUD-NLAM-WSçš„å»å™ªæ•ˆæœä¼˜äºç°æœ‰çš„å»å™ªæ–¹æ³•ã€‚</p><h4 id="ç»“è®º-3">ç»“è®º</h4><p>æœ¬æ–‡ä»‹ç»äº†éå±€éƒ¨è‡ªé€‚åº”æ–¹æ³•(NLAM)åœ¨å›¾åƒå»å™ªä¸­çš„åº”ç”¨ã€‚è¯¥ç®—æ³•å°†æƒé‡$Ï‰_{ij}$ä½œä¸ºä¸€ä¸ªè‡ªé€‚åº”äºå›¾åƒå†…å®¹çš„ä¼˜åŒ–å˜é‡ï¼Œé€šè¿‡æµ‹é‡å›¾åƒå—çš„ç›¸ä¼¼åº¦ï¼Œåœ¨æ¯æ¬¡å»å™ªè¿­ä»£ä¸­æ›´æ–°æƒé‡Ï‰ijã€‚ç„¶åå®šä¹‰äº†ä¸‰ç§æ— åè·ç¦»ï¼Œå³åƒç´ -åƒç´ æ— åè·ç¦»ã€å—-å—æ— åè·ç¦»å’Œè€¦åˆæ— åè·ç¦»ã€‚ç”±äºè¿™äº›è·ç¦»åŒ…å«äº†å™ªå£°å›¾åƒå’Œå»å™ªå›¾åƒåœ¨æ¯æ¬¡è¿­ä»£ä¸­çš„ç»“æ„ä¿¡æ¯ï¼Œå› æ­¤æ¯”ä¼ ç»Ÿçš„æ¬§å‡ é‡Œå¾·è·ç¦»å…·æœ‰æ›´å¼ºçš„é²æ£’æ€§æ¥åº¦é‡å›¾åƒåƒç´ /å—çš„ç›¸ä¼¼æ€§ã€‚åˆ©ç”¨è€¦åˆçš„æ— åè·ç¦»ï¼Œæå‡ºäº†æ— åè·ç¦»éå±€éƒ¨è‡ªé€‚åº”å‡å€¼(UD-NLAM)ï¼Œå¹¶å°†UD-NLAMæ‰©å±•åˆ°å…¶å¤šé¢ä½“ç‰ˆæœ¬ï¼Œä»¥é€‚åº”ä¸åŒçš„å™ªå£°æ°´å¹³ï¼Œæå‡ºäº†å¤šé¢ä½“UD-NLAM(MUD-NLAM)ã€‚åœ¨ç»¼åˆå°æ³¢æ”¶ç¼©çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æå‡ºäº†ä¸€ç§æ–°çš„å»å™ªæ–¹æ³•â€“MUD-NLAMåŠ å°æ³¢æ”¶ç¼©å»å™ªæ–¹æ³•(MUD-NLAM-WS)ã€‚æˆ‘ä»¬ä¸ç°æœ‰çš„å‡ ç§å»å™ªæ–¹æ³•è¿›è¡Œäº†å¤§é‡çš„å¯¹æ¯”å®éªŒï¼Œå®šé‡è¯„ä»·å’Œè§†è§‰æ¯”è¾ƒè¡¨æ˜ï¼ŒNLAMæ–¹æ³•ä¼˜äºç°æœ‰çš„ä¸€äº›åŸºäºNLMçš„å»å™ªæ–¹æ³•ã€‚UD-NLAMå’ŒMUD-NLAMè¿›ä¸€æ­¥æé«˜äº†NLAMçš„å»å™ªæ€§èƒ½ï¼ŒMUD-NLAM-WSåœ¨å»å™ªå’Œç»†èŠ‚ä¿æŠ¤ä¸¤ä¸ªæ–¹é¢éƒ½ä¼˜äºä¸ä¹‹ç«äº‰çš„æœ€å…ˆè¿›çš„å»å™ªæ–¹æ³•ã€‚ç”±äºæ‰€æå‡ºçš„æ–¹æ³•ä¾§é‡äºç°åº¦å›¾åƒå»å™ªï¼Œå› æ­¤æˆ‘ä»¬çš„ä¸‹ä¸€æ­¥å·¥ä½œå°†ç ”ç©¶å¦‚ä½•å°†æ‰€æå‡ºçš„æ–¹æ³•æ‰©å±•åˆ°å½©è‰²å›¾åƒå»å™ªã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€ç§æ–°çš„è·ç¦»å‡†åˆ™æ¥åº¦é‡ä¸¤ä¸ªå½©è‰²å›¾åƒåƒç´ /å—ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚æ­¤å¤–ï¼Œå°†å¤–åœ°æ–¹æ³•èå…¥æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿæ˜¯å€¼å¾—æ¢ç´¢çš„ã€‚</p><h4 id="æç‚¼-3">æç‚¼</h4><h5 id="é—®é¢˜-4">é—®é¢˜</h5><p>ç°æœ‰çš„è®¸å¤šéå±€éƒ¨å‡å€¼æ–¹æ³•æˆ–è€…ä½¿ç”¨æ¬§æ°è·ç¦»æ¥åº¦é‡é¢ç‰‡ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œæˆ–è€…åªè®¡ç®—æƒ$Ï‰_{ij}$ä¸€æ¬¡å¹¶åœ¨éšåçš„å»å™ªè¿­ä»£ä¸­ä¿æŒä¸å˜ï¼Œæˆ–è€…åªåˆ©ç”¨å»å™ªå›¾åƒçš„ç»“æ„ä¿¡æ¯æ¥æ›´æ–°æƒ$Ï‰_{ij}$ã€‚è¿™å¯èƒ½å¯¼è‡´å»å™ªæ€§èƒ½æœ‰é™ã€‚</p><h5 id="æ–¹æ³•-3">æ–¹æ³•</h5><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§éå±€éƒ¨è‡ªé€‚åº”ç¥ç»ç½‘ç»œ(NLAM)å›¾åƒå»å™ªæ–¹æ³•ã€‚NLAMå°†æƒé‡$Ï‰_{ij}$ä½œä¸ºä¼˜åŒ–å˜é‡ï¼Œè¿­ä»£æ›´æ–°å…¶å€¼ï¼Œå¼•å…¥åƒç´ -åƒç´ ã€é¢ç‰‡-é¢ç‰‡å’Œè€¦åˆæ— åè·ç¦»ä¸‰ç§æ— åè·ç¦»ã€‚ä¸æ¬§å‡ é‡Œå¾·è·ç¦»ç›¸æ¯”ï¼Œè¿™äº›æ— åè·ç¦»åœ¨åº¦é‡å›¾åƒåƒç´ /å—ç›¸ä¼¼æ€§æ–¹é¢æ›´ä¸ºç¨³å¥ã€‚åˆ©ç”¨è€¦åˆæ— åè·ç¦»ï¼Œæå‡ºäº†æ— åè·ç¦»éå±€éƒ¨è‡ªé€‚åº”ç¥ç»ç½‘ç»œ(UD-NLAM)ã€‚ç”±äºUD-NLAMåªä½¿ç”¨å•ä¸ªå—å¤§å°æ¥è®¡ç®—æƒé‡$Ï‰_{ij}$ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥äº†å¤šå—UD-NLAM(MUD-NLAM)æ¥é€‚åº”ä¸åŒçš„å™ªå£°æ°´å¹³ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜å»å™ªæ€§èƒ½ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„å°æ³¢æ”¶ç¼©å»å™ªæ–¹æ³•MUD-NLAM(MUD-NLAM-WS)</p><h5 id="æˆæœ-3">æˆæœ</h5><p>å®éªŒç»“æœè¡¨æ˜ï¼ŒMUD-NLAMã€UD-NLAMå’ŒMUD-NLAMçš„å»å™ªæ€§èƒ½å‡ä¼˜äºç°æœ‰çš„NLMæ–¹æ³•ï¼Œå…¶ä¸­MUD-NLAM-WSçš„å»å™ªæ•ˆæœä¼˜äºç°æœ‰çš„å»å™ªæ–¹æ³•ã€‚</p><h3 id="Attention-guided-CNN-for-image-denoising-â­ï¸">Attention-guided CNN for image denoising. â­ï¸</h3><h4 id="æ‘˜è¦-4">æ‘˜è¦</h4><p>æ·±å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨ä½çº§è®¡ç®—æœºè§†è§‰é¢†åŸŸå¼•èµ·äº†äººä»¬æå¤§çš„å…´è¶£ã€‚ç ”ç©¶é€šå¸¸è‡´åŠ›äºé€šè¿‡ææ·±çš„CNNæ¥æé«˜å»å™ªæ€§èƒ½ï¼Œä½†éšç€æ·±åº¦çš„å¢åŠ ï¼Œæµ…å±‚å¯¹æ·±å±‚çš„å½±å“ä¼šå‡å¼±ã€‚å—æ­¤å¯å‘ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ³¨æ„åŠ›å¼•å¯¼çš„å»å™ªå·ç§¯ç¥ç»ç½‘ç»œ(AD-Net)ï¼Œä¸»è¦åŒ…æ‹¬ç¨€ç–block(SB)ã€ç‰¹å¾å¢å¼ºblock(FEB)ã€å…³æ³¨åº¦block(AB)å’Œé‡æ„block(RB)ã€‚å…·ä½“åœ°è¯´ï¼ŒSBé€šè¿‡ä½¿ç”¨è†¨èƒ€å·ç§¯å’Œæ™®é€šå·ç§¯æ¥æ¶ˆé™¤å™ªå£°ï¼Œä»è€Œåœ¨æ€§èƒ½å’Œæ•ˆç‡ä¹‹é—´è¿›è¡ŒæŠ˜è¡·ã€‚FEBé€šè¿‡é•¿è·¯å¾„ç»¼åˆå…¨å±€å’Œå±€éƒ¨ç‰¹å¾ä¿¡æ¯ï¼Œå¢å¼ºäº†å»å™ªæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚ABç”¨äºç²¾ç»†æå–éšè—åœ¨å¤æ‚èƒŒæ™¯ä¸­çš„å™ªå£°ä¿¡æ¯ï¼Œå¯¹äºå¤æ‚çš„å™ªå£°å›¾åƒï¼Œç‰¹åˆ«æ˜¯çœŸå®çš„å™ªå£°å›¾åƒï¼Œç»“åˆå»å™ªæ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚æ­¤å¤–ï¼ŒFEBä¸ABç›¸ç»“åˆï¼Œæé«˜äº†è®­ç»ƒå»å™ªæ¨¡å‹çš„æ•ˆç‡ï¼Œé™ä½äº†è®­ç»ƒçš„å¤æ‚åº¦ã€‚æœ€åï¼ŒRBçš„ç›®æ ‡æ˜¯é€šè¿‡å¾—åˆ°çš„å™ªå£°æ˜ å°„å’Œç»™å®šçš„å™ªå£°å›¾åƒæ¥æ„é€ å¹²å‡€çš„å›¾åƒã€‚æ­¤å¤–ï¼Œç»¼åˆå®éªŒè¡¨æ˜ï¼Œæ‰€æå‡ºçš„Adnetåœ¨ä¸‰ä¸ªä»»åŠ¡(å³åˆæˆå’ŒçœŸå®å™ªå£°å›¾åƒä»¥åŠç›²å»å™ª)ä¸­éƒ½æœ‰å¾ˆå¥½çš„æ€§èƒ½ï¼Œæ— è®ºæ˜¯å®šé‡è¯„ä¼°è¿˜æ˜¯å®šæ€§è¯„ä¼°éƒ½æ˜¯å¦‚æ­¤ã€‚Adnetçš„ä»£ç å¯ä»¥åœ¨http://www.yongxu.org/lunwen.html.ä¸Šè®¿é—®</p><h4 id="ç»“è®º-4">ç»“è®º</h4><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ³¨æ„åŠ›å¼•å¯¼çš„CNNå»å™ªæ–¹æ³•å’ŒADNETå›¾åƒå»å™ªæ–¹æ³•ã€‚Adnetçš„ä¸»è¦ç»„ä»¶æ‰®æ¼”ä»¥ä¸‹è§’è‰²ã€‚SBåŸºäºè†¨èƒ€å·ç§¯å’Œæ™®é€šå·ç§¯ï¼Œå¯ä»¥åœ¨å»å™ªæ€§èƒ½å’Œæ•ˆç‡ä¹‹é—´è¿›è¡ŒæŠ˜è¡·ï¼›FEBé€šè¿‡å…¨å±€ä¿¡æ¯å’Œå±€éƒ¨ä¿¡æ¯çš„ååŒä½œç”¨æ¥å¢å¼ºæ¨¡å‹å¯¹å«å™ªå›¾åƒçš„è¡¨ç¤ºèƒ½åŠ›ã€‚ABç®—æ³•èƒ½å¤Ÿæå–éšè—åœ¨å¤æ‚èƒŒæ™¯ä¸­çš„æ½œåœ¨å™ªå£°ä¿¡æ¯ï¼Œå¯¹å¤æ‚å™ªå£°å›¾åƒï¼Œå¦‚å«ç›²å™ªå£°å›¾åƒå’ŒçœŸå®å™ªå£°å›¾åƒéƒ½æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚åœ¨æ‰§è¡Œå®Œä¸Šè¿°ç»„ä»¶åï¼Œæ‰§è¡ŒRBä»¥è·å¾—æ‰€å¾—åˆ°çš„å¹²å‡€å›¾åƒã€‚ç”±äºé‡‡ç”¨ABå¯¹FEBè¿›è¡Œåˆå¹¶ï¼Œå› æ­¤å¯ä»¥æé«˜è®­ç»ƒå»å™ªæ¨¡å‹çš„æ•ˆç‡å’Œå¤æ‚åº¦ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œæœ¬æ–‡æå‡ºçš„Adnetç®—æ³•åœ¨å›¾åƒå»å™ªæ–¹é¢å…·æœ‰å¾ˆå¥½çš„å®šæ€§å’Œå®šé‡è¯„ä»·æ•ˆæœã€‚</p><h4 id="æç‚¼-4">æç‚¼</h4><h5 id="é—®é¢˜-5">é—®é¢˜</h5><p>æ·±å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨ä½çº§è®¡ç®—æœºè§†è§‰é¢†åŸŸå¼•èµ·äº†äººä»¬æå¤§çš„å…´è¶£ã€‚ç ”ç©¶é€šå¸¸è‡´åŠ›äºé€šè¿‡ææ·±çš„CNNæ¥æé«˜å»å™ªæ€§èƒ½ï¼Œä½†éšç€æ·±åº¦çš„å¢åŠ ï¼Œæµ…å±‚å¯¹æ·±å±‚çš„å½±å“ä¼šå‡å¼±ã€‚</p><h5 id="æ–¹æ³•-4">æ–¹æ³•</h5><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ³¨æ„åŠ›å¼•å¯¼çš„å»å™ªå·ç§¯ç¥ç»ç½‘ç»œ(AD-Net)ï¼Œä¸»è¦åŒ…æ‹¬ç¨€ç–block(SB)ã€ç‰¹å¾å¢å¼ºblock(FEB)ã€å…³æ³¨åº¦block(AB)å’Œé‡æ„block(RB)ã€‚å…·ä½“åœ°è¯´ï¼ŒSBé€šè¿‡ä½¿ç”¨è†¨èƒ€å·ç§¯å’Œæ™®é€šå·ç§¯æ¥æ¶ˆé™¤å™ªå£°ï¼Œä»è€Œåœ¨æ€§èƒ½å’Œæ•ˆç‡ä¹‹é—´è¿›è¡ŒæŠ˜è¡·ã€‚FEBé€šè¿‡é•¿è·¯å¾„ç»¼åˆå…¨å±€å’Œå±€éƒ¨ç‰¹å¾ä¿¡æ¯ï¼Œå¢å¼ºäº†å»å™ªæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚ABç”¨äºç²¾ç»†æå–éšè—åœ¨å¤æ‚èƒŒæ™¯ä¸­çš„å™ªå£°ä¿¡æ¯ï¼Œå¯¹äºå¤æ‚çš„å™ªå£°å›¾åƒï¼Œç‰¹åˆ«æ˜¯çœŸå®çš„å™ªå£°å›¾åƒï¼Œç»“åˆå»å™ªæ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚æ­¤å¤–ï¼ŒFEBä¸ABç›¸ç»“åˆï¼Œæé«˜äº†è®­ç»ƒå»å™ªæ¨¡å‹çš„æ•ˆç‡ï¼Œé™ä½äº†è®­ç»ƒçš„å¤æ‚åº¦ã€‚æœ€åï¼ŒRBçš„ç›®æ ‡æ˜¯é€šè¿‡å¾—åˆ°çš„å™ªå£°æ˜ å°„å’Œç»™å®šçš„å™ªå£°å›¾åƒæ¥æ„é€ å¹²å‡€çš„å›¾åƒã€‚</p><h5 id="ç»†èŠ‚-3">ç»†èŠ‚</h5><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect4_1.png" alt=""></p><p>Adnetçš„ä¸»è¦ç»„ä»¶æ‰®æ¼”ä»¥ä¸‹è§’è‰²ã€‚SBåŸºäºè†¨èƒ€å·ç§¯å’Œæ™®é€šå·ç§¯ï¼Œå¯ä»¥åœ¨å»å™ªæ€§èƒ½å’Œæ•ˆç‡ä¹‹é—´è¿›è¡ŒæŠ˜è¡·ï¼›FEBé€šè¿‡å…¨å±€ä¿¡æ¯å’Œå±€éƒ¨ä¿¡æ¯çš„ååŒä½œç”¨æ¥å¢å¼ºæ¨¡å‹å¯¹å«å™ªå›¾åƒçš„è¡¨ç¤ºèƒ½åŠ›ã€‚ABç®—æ³•èƒ½å¤Ÿæå–éšè—åœ¨å¤æ‚èƒŒæ™¯ä¸­çš„æ½œåœ¨å™ªå£°ä¿¡æ¯ï¼Œå¯¹å¤æ‚å™ªå£°å›¾åƒï¼Œå¦‚å«ç›²å™ªå£°å›¾åƒå’ŒçœŸå®å™ªå£°å›¾åƒéƒ½æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚åœ¨æ‰§è¡Œå®Œä¸Šè¿°ç»„ä»¶åï¼Œæ‰§è¡ŒRBä»¥è·å¾—æ‰€å¾—åˆ°çš„å¹²å‡€å›¾åƒã€‚ç”±äºé‡‡ç”¨ABå¯¹FEBè¿›è¡Œåˆå¹¶ï¼Œå› æ­¤å¯ä»¥æé«˜è®­ç»ƒå»å™ªæ¨¡å‹çš„æ•ˆç‡å’Œå¤æ‚åº¦ã€‚</p><h5 id="æˆæœ-4">æˆæœ</h5><p>ç»¼åˆå®éªŒè¡¨æ˜ï¼Œæ‰€æå‡ºçš„Adnetåœ¨ä¸‰ä¸ªä»»åŠ¡(å³åˆæˆå’ŒçœŸå®å™ªå£°å›¾åƒä»¥åŠç›²å»å™ª)ä¸­éƒ½æœ‰å¾ˆå¥½çš„æ€§èƒ½ï¼Œæ— è®ºæ˜¯å®šé‡è¯„ä¼°è¿˜æ˜¯å®šæ€§è¯„ä¼°éƒ½æ˜¯å¦‚æ­¤ã€‚</p><h3 id="Image-denoising-using-deep-CNN-with-batch-renormalization">Image denoising using deep CNN with batch renormalization.</h3><h4 id="æ‘˜è¦-5">æ‘˜è¦</h4><p>æ·±å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨å›¾åƒå»å™ªé¢†åŸŸå¼•èµ·äº†æå¤§çš„å…³æ³¨ã€‚ç„¶è€Œï¼Œå­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š(1)ç”¨äºå»å™ªä»»åŠ¡çš„æ·±å±‚CNNè®­ç»ƒéå¸¸å›°éš¾ï¼›(2)å¤§éƒ¨åˆ†æ·±å±‚CNNå­˜åœ¨æ€§èƒ½é¥±å’Œé—®é¢˜ã€‚åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§è¢«ç§°ä¸ºæ‰¹å¤„ç†-é‡æ•´åŒ–å»å™ªç½‘ç»œ(BRDNet)çš„æ–°å‹ç½‘ç»œçš„è®¾è®¡ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬ç»“åˆä¸¤ä¸ªç½‘ç»œæ¥å¢åŠ ç½‘ç»œçš„å®½åº¦ï¼Œä»è€Œè·å¾—æ›´å¤šçš„ç‰¹å¾ã€‚ç”±äºæ‰¹é‡é‡æ•´åŒ–è¢«èåˆåˆ°BRDNetä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³å†…éƒ¨åå˜é‡ç§»ä½å’Œå°æ‰¹é‡é—®é¢˜ã€‚ä¸ºäº†ä¾¿äºç½‘ç»œè®­ç»ƒï¼Œè¿˜é‡‡ç”¨äº†æ•´ä½“å‰©ä½™å­¦ä¹ çš„æ–¹å¼ã€‚åˆ©ç”¨è†¨èƒ€å·ç§¯æ¥æå–æ›´å¤šçš„ä¿¡æ¯ç”¨äºå»å™ªä»»åŠ¡ã€‚å¤§é‡çš„å®éªŒç»“æœè¡¨æ˜ï¼ŒBRD-Netçš„å»å™ªæ•ˆæœä¼˜äºç›®å‰æœ€å…ˆè¿›çš„å›¾åƒå»å™ªæ–¹æ³•ã€‚BRDnetçš„ä»£ç å¯ä»¥åœ¨http://www.yongxu.org/lunwen.html.ä¸Šè®¿é—®</p><h4 id="ç»“è®º-5">ç»“è®º</h4><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºæ¨¡å‹çš„CNNå»å™ªå™¨BRDNetï¼Œå®ƒç»“åˆäº†ä¸¤ç§ä¸åŒçš„ç½‘ç»œæ¥æé«˜å›¾åƒå»å™ªæ€§èƒ½ã€‚æ­¤å¤–ï¼ŒBRDNetä½¿ç”¨BRNã€RLå’Œè†¨èƒ€å·ç§¯æ¥æé«˜å»å™ªæ€§èƒ½ï¼Œä½¿æ¨¡å‹æ›´å®¹æ˜“è®­ç»ƒã€‚BRNä¸ä»…ç”¨äºåŠ é€ŸBRDNetçš„æ”¶æ•›ï¼Œè€Œä¸”ç”¨äºè§£å†³å°æ‰¹é‡é—®é¢˜ã€‚åœ¨BRDNetä¸­ï¼ŒRLè¢«ç”¨æ¥åˆ†ç¦»å™ªå£°å’Œæœ‰å™ªå›¾åƒï¼Œå¹¶è·å¾—æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚æ‰©å¼ çš„å·ç§¯å¯ä»¥æ‰©å¤§æ¥å—èŒƒå›´ä»¥è·å¾—æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•ä¸å…¶å®ƒå›¾åƒå»å™ªæ–¹æ³•ç›¸æ¯”ï¼Œå…·æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚åœ¨æœªæ¥ï¼Œæˆ‘ä»¬è®¡åˆ’ä½¿ç”¨å…·æœ‰å…ˆéªŒçŸ¥è¯†çš„CNNæ¥å¤„ç†æ›´å¤æ‚çš„çœŸå®å™ªå£°å›¾åƒå»å™ªï¼Œä¾‹å¦‚å¾®å…‰å›¾åƒå’Œæ¨¡ç³Šå›¾åƒã€‚</p><h4 id="æç‚¼-5">æç‚¼</h4><h5 id="é—®é¢˜-6">é—®é¢˜</h5><p>æ·±å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨å›¾åƒå»å™ªé¢†åŸŸå¼•èµ·äº†æå¤§çš„å…³æ³¨ã€‚ç„¶è€Œï¼Œå­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š(1)ç”¨äºå»å™ªä»»åŠ¡çš„æ·±å±‚CNNè®­ç»ƒéå¸¸å›°éš¾ï¼›(2)å¤§éƒ¨åˆ†æ·±å±‚CNNå­˜åœ¨æ€§èƒ½é¥±å’Œé—®é¢˜ã€‚</p><h5 id="æ–¹æ³•-5">æ–¹æ³•</h5><p>æå‡ºäº†ä¸€ç§è¢«ç§°ä¸ºæ‰¹å¤„ç†-é‡æ•´åŒ–å»å™ªç½‘ç»œ(BRDNet)çš„æ–°å‹ç½‘ç»œçš„è®¾è®¡ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬ç»“åˆä¸¤ä¸ªç½‘ç»œæ¥å¢åŠ ç½‘ç»œçš„å®½åº¦ï¼Œä»è€Œè·å¾—æ›´å¤šçš„ç‰¹å¾ã€‚ç”±äºæ‰¹é‡é‡æ•´åŒ–è¢«èåˆåˆ°BRDNetä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³å†…éƒ¨åå˜é‡ç§»ä½å’Œå°æ‰¹é‡é—®é¢˜ã€‚ä¸ºäº†ä¾¿äºç½‘ç»œè®­ç»ƒï¼Œè¿˜é‡‡ç”¨äº†æ•´ä½“å‰©ä½™å­¦ä¹ çš„æ–¹å¼ã€‚åˆ©ç”¨è†¨èƒ€å·ç§¯æ¥æå–æ›´å¤šçš„ä¿¡æ¯ç”¨äºå»å™ªä»»åŠ¡ã€‚</p><h5 id="ç»†èŠ‚-4">ç»†èŠ‚</h5><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect5_1.png" alt=""></p><p>æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºæ¨¡å‹çš„CNNå»å™ªå™¨BRDNetï¼Œå®ƒç»“åˆäº†ä¸¤ç§ä¸åŒçš„ç½‘ç»œæ¥æé«˜å›¾åƒå»å™ªæ€§èƒ½ã€‚æ­¤å¤–ï¼ŒBRDNetä½¿ç”¨BRNã€RLå’Œè†¨èƒ€å·ç§¯æ¥æé«˜å»å™ªæ€§èƒ½ï¼Œä½¿æ¨¡å‹æ›´å®¹æ˜“è®­ç»ƒã€‚BRNä¸ä»…ç”¨äºåŠ é€ŸBRDNetçš„æ”¶æ•›ï¼Œè€Œä¸”ç”¨äºè§£å†³å°æ‰¹é‡é—®é¢˜ã€‚åœ¨BRDNetä¸­ï¼ŒRLè¢«ç”¨æ¥åˆ†ç¦»å™ªå£°å’Œæœ‰å™ªå›¾åƒï¼Œå¹¶è·å¾—æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚æ‰©å¼ çš„å·ç§¯å¯ä»¥æ‰©å¤§æ¥å—èŒƒå›´ä»¥è·å¾—æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><h5 id="æˆæœ-5">æˆæœ</h5><p>å¤§é‡çš„å®éªŒç»“æœè¡¨æ˜ï¼ŒBRD-Netçš„å»å™ªæ•ˆæœä¼˜äºç›®å‰æœ€å…ˆè¿›çš„å›¾åƒå»å™ªæ–¹æ³•ã€‚</p><h5 id="å±•æœ›">å±•æœ›</h5><p>åœ¨æœªæ¥ï¼Œæˆ‘ä»¬è®¡åˆ’ä½¿ç”¨å…·æœ‰å…ˆéªŒçŸ¥è¯†çš„CNNæ¥å¤„ç†æ›´å¤æ‚çš„çœŸå®å™ªå£°å›¾åƒå»å™ªï¼Œä¾‹å¦‚å¾®å…‰å›¾åƒå’Œæ¨¡ç³Šå›¾åƒã€‚</p><h3 id="Hyperspectral-Images-Denoising-via-Nonconvex-Regularized-Low-Rank-and-Sparse-Matrix-Decomposition">Hyperspectral Images Denoising via Nonconvex Regularized Low-Rank and Sparse Matrix Decomposition</h3><h4 id="æ‘˜è¦-6">æ‘˜è¦</h4><p>é«˜å…‰è°±å›¾åƒåœ¨æˆåƒè¿‡ç¨‹ä¸­ç»å¸¸å—åˆ°å„ç§å™ªå£°çš„å½±å“ï¼ŒåŒ…æ‹¬é«˜æ–¯å™ªå£°ã€è„‰å†²å™ªå£°ã€æ¡çº¹å™ªå£°ç­‰ï¼Œè¿™äº›å¤æ‚çš„å™ªå£°ä¼šå›°æ‰°åç»­çš„é«˜å…‰è°±å›¾åƒå¤„ç†ã€‚é€šå¸¸ï¼Œå¤§å¤šæ•°HSIå»å™ªæ–¹æ³•éƒ½æ˜¯ç”¨å‡¸èŒƒæ•°çº¦æŸæ¥æè¿°ç¨€ç–ä¼˜åŒ–é—®é¢˜ï¼Œè¿™ä¼šè¿‡åº¦æƒ©ç½šè¾ƒå¤§çš„å‘é‡è¾“å…¥ï¼Œå¹¶å¯èƒ½å¯¼è‡´æœ‰åè§£ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ç§éå‡¸æ­£åˆ™ä½ç§©ç¨€ç–çŸ©é˜µåˆ†è§£(NonRLRS)æ–¹æ³•ç”¨äºHSISå»å™ªï¼Œå®ƒèƒ½åŒæ—¶å»é™¤é«˜æ–¯å™ªå£°ã€è„‰å†²å™ªå£°ã€æ­»çº¿å’Œæ¡çº¹ã€‚éRLRSçš„ç›®çš„æ˜¯å°†é€€åŒ–çš„HSIåˆ†è§£æˆå…·æœ‰é²æ£’æ€§çš„ä½ç§©ç¨€ç–æˆåˆ†ï¼Œå¹¶ä»¥çŸ©é˜µçš„å½¢å¼è¡¨ç¤ºã€‚ä¸ºäº†å¢å¼ºå›ºæœ‰ä½é˜¶ç»“æ„å’Œç¨€ç–ç ´åçš„ç¨€ç–æ€§ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„éå‡¸æ­£åˆ™åŒ–å­â€“å½’ä¸€åŒ–ç½šå‡½æ•°ï¼Œå®ƒå¯ä»¥è‡ªé€‚åº”åœ°æ”¶ç¼©æ¯ä¸ªæ¡ç›®ã€‚æ­¤å¤–ï¼Œè¿˜æå‡ºäº†ä¸€ç§åŸºäºä¼˜åŒ–æœ€å°åŒ–(MM)çš„æœ‰æ•ˆç®—æ³•æ¥æ±‚è§£ç”±æ­¤äº§ç”Ÿçš„éå‡¸ä¼˜åŒ–é—®é¢˜ã€‚å…·ä½“åœ°è¯´ï¼ŒMMç®—æ³•åœ¨æ¯æ¬¡è¿­ä»£ä¸­é¦–å…ˆç”¨ä»£ç†ä¸Šç•Œæ›¿æ¢éå‡¸ç›®æ ‡å‡½æ•°ï¼Œç„¶åå°†æ„é€ çš„ä»£ç†å‡½æ•°æœ€å°åŒ–ï¼Œä»è€Œä½¿éå‡¸é—®é¢˜èƒ½å¤Ÿåœ¨é‡åŠ æƒæŠ€æœ¯çš„æ¡†æ¶ä¸‹æ±‚è§£ã€‚ä»¿çœŸæ•°æ®å’Œå®é™…æ•°æ®çš„å®éªŒç»“æœè¡¨æ˜äº†è¯¥æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p><h4 id="ç»“è®º-6">ç»“è®º</h4><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„éRLRSç®—æ³•ï¼Œç”¨äºåœ¨HSIå»å™ªåº”ç”¨ä¸­åŒæ—¶æ£€æµ‹å¹²å‡€çš„HSIä½é˜¶ç»“æ„å’Œç¨€ç–è…èš€ã€‚åœ¨éÎµä¸­å¼•å…¥äº†è‡ªé€‚åº”æ”¶ç¼©æ¯ä¸ªæ¡ç›®çš„éå½’ä¸€åŒ–RLRSæƒ©ç½šï¼Œä½¿å…¶èƒ½å¤Ÿæ›´å‡†ç¡®åœ°ä»å—å¤šç§ç±»å‹å™ªå£°æ±¡æŸ“çš„é€€åŒ–HSIä¸­æå–ä½ç§©ç¨€ç–æˆåˆ†ã€‚æ­¤å¤–ï¼Œé‡‡ç”¨åŸºäºMMçš„ç®—æ³•æœ‰æ•ˆåœ°è§£å†³äº†æ‰€æå‡ºçš„éRLRSé—®é¢˜ã€‚MMç®—æ³•æ˜¯è¿­ä»£å®ç°çš„ï¼Œå®ƒé¦–å…ˆç”¨ç›®æ ‡å‡½æ•°çš„éå‡¸åˆ†é‡çš„ä¸Šç•Œæ›¿æ¢ç›®æ ‡å‡½æ•°çš„éå‡¸åˆ†é‡ï¼Œç„¶åæœ€å°åŒ–æ„é€ çš„ä»£ç†ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•å¯ä»¥åŒæ—¶å»é™¤é«˜æ–¯å™ªå£°ã€è„‰å†²å™ªå£°ã€æ­»çº¿å’Œæ¡å¸¦ï¼Œ</p><h5 id="å±•æœ›-2">å±•æœ›</h5><p>åœ¨æœªæ¥çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å°†æŠŠè¯¥æ–¹æ³•æ‰©å±•åˆ°å…¶ä»–ç±»å‹çš„åº”ç”¨ï¼Œå¦‚èƒŒæ™¯æå–ã€ç›®æ ‡æ£€æµ‹ã€å‹ç¼©æ„ŸçŸ¥ç­‰ã€‚æ­¤å¤–ï¼Œæ–½åŠ åœ¨HSIåƒç´ ä¸Šçš„ç©ºé—´è°±çº¦æŸå°†è¢«ç”¨äºHSIå»å™ª</p><h4 id="æç‚¼-6">æç‚¼</h4><h5 id="é—®é¢˜-7">é—®é¢˜</h5><p>é«˜å…‰è°±å›¾åƒåœ¨æˆåƒè¿‡ç¨‹ä¸­ç»å¸¸å—åˆ°å„ç§å™ªå£°çš„å½±å“ï¼ŒåŒ…æ‹¬é«˜æ–¯å™ªå£°ã€è„‰å†²å™ªå£°ã€æ¡çº¹å™ªå£°ç­‰ï¼Œè¿™äº›å¤æ‚çš„å™ªå£°ä¼šå›°æ‰°åç»­çš„é«˜å…‰è°±å›¾åƒå¤„ç†ã€‚é€šå¸¸ï¼Œå¤§å¤šæ•°HSIå»å™ªæ–¹æ³•éƒ½æ˜¯ç”¨å‡¸èŒƒæ•°çº¦æŸæ¥æè¿°ç¨€ç–ä¼˜åŒ–é—®é¢˜ï¼Œè¿™ä¼šè¿‡åº¦æƒ©ç½šè¾ƒå¤§çš„å‘é‡è¾“å…¥ï¼Œå¹¶å¯èƒ½å¯¼è‡´æœ‰åè§£ã€‚</p><h5 id="æ–¹æ³•-6">æ–¹æ³•</h5><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§éå‡¸æ­£åˆ™ä½ç§©ç¨€ç–çŸ©é˜µåˆ†è§£(NonRLRS)æ–¹æ³•ç”¨äºHSISå»å™ªï¼Œå®ƒèƒ½åŒæ—¶å»é™¤é«˜æ–¯å™ªå£°ã€è„‰å†²å™ªå£°ã€æ­»çº¿å’Œæ¡çº¹ã€‚éRLRSçš„ç›®çš„æ˜¯å°†é€€åŒ–çš„HSIåˆ†è§£æˆå…·æœ‰é²æ£’æ€§çš„ä½ç§©ç¨€ç–æˆåˆ†ï¼Œå¹¶ä»¥çŸ©é˜µçš„å½¢å¼è¡¨ç¤ºã€‚ä¸ºäº†å¢å¼ºå›ºæœ‰ä½é˜¶ç»“æ„å’Œç¨€ç–ç ´åçš„ç¨€ç–æ€§ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„éå‡¸æ­£åˆ™åŒ–å­â€“å½’ä¸€åŒ–ç½šå‡½æ•°ï¼Œå®ƒå¯ä»¥è‡ªé€‚åº”åœ°æ”¶ç¼©æ¯ä¸ªæ¡ç›®ã€‚æ­¤å¤–ï¼Œè¿˜æå‡ºäº†ä¸€ç§åŸºäºä¼˜åŒ–æœ€å°åŒ–(MM)çš„æœ‰æ•ˆç®—æ³•æ¥æ±‚è§£ç”±æ­¤äº§ç”Ÿçš„éå‡¸ä¼˜åŒ–é—®é¢˜ã€‚å…·ä½“åœ°è¯´ï¼ŒMMç®—æ³•åœ¨æ¯æ¬¡è¿­ä»£ä¸­é¦–å…ˆç”¨ä»£ç†ä¸Šç•Œæ›¿æ¢éå‡¸ç›®æ ‡å‡½æ•°ï¼Œç„¶åå°†æ„é€ çš„ä»£ç†å‡½æ•°æœ€å°åŒ–ï¼Œä»è€Œä½¿éå‡¸é—®é¢˜èƒ½å¤Ÿåœ¨é‡åŠ æƒæŠ€æœ¯çš„æ¡†æ¶ä¸‹æ±‚è§£ã€‚</p><h5 id="æˆæœ-6">æˆæœ</h5><p>ä»¿çœŸæ•°æ®å’Œå®é™…æ•°æ®çš„å®éªŒç»“æœè¡¨æ˜äº†è¯¥æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p><h3 id="CAR-Cityscapes-Attributes-Recognition-A-Multi-category-Attributes-Dataset-for-Autonomous-Vehicles">CAR - Cityscapes Attributes Recognition A Multi-category Attributes Dataset for Autonomous Vehicles.</h3><h4 id="æ‘˜è¦-7">æ‘˜è¦</h4><p>è‡ªåŠ¨é©¾é©¶æ±½è½¦æ˜¯äº¤é€šè¿è¾“çš„æœªæ¥ã€‚éšç€è¿™ä¸€é¢†åŸŸçš„è¿›æ­¥ï¼Œä¸–ç•Œè¶Šæ¥è¶Šæ¥è¿‘å®‰å…¨é“è·¯ï¼Œå‡ ä¹æ²¡æœ‰å‘ç”Ÿäº‹æ•…çš„å¯èƒ½æ€§ï¼Œå¹¶æ¶ˆé™¤äº†äººä¸ºé”™è¯¯ã€‚ç„¶è€Œï¼Œè¦è¾¾åˆ°å¥å£®æ€§æ°´å¹³ï¼Œè¿˜éœ€è¦è¿›è¡Œå¤§é‡çš„ç ”ç©¶å’Œå¼€å‘ã€‚ä¸€ä¸ªé‡è¦çš„æ–¹é¢æ˜¯å……åˆ†ç†è§£ä¸€ä¸ªåœºæ™¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç»†èŠ‚ã€‚å› ä¸ºåœºæ™¯ä¸­ç‰©ä½“çš„æŸäº›ç‰¹å¾(å±æ€§)(ä¾‹å¦‚é©¾é©¶å‘˜çš„è¡Œä¸º)å¯¹äºæ­£ç¡®çš„å†³ç­–æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ç„¶è€Œï¼Œç›®å‰çš„ç®—æ³•å­˜åœ¨å±æ€§ä¸°å¯Œã€è´¨é‡ä¸é«˜çš„é—®é¢˜ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„å±æ€§è¯†åˆ«æ•°æ®é›†â€“åŸå¸‚æ™¯è§‚å±æ€§è¯†åˆ«(CAR)ã€‚æ–°æ•°æ®é›†é€šè¿‡åœ¨æ¯ä¸ªå›¾åƒä¸­æ·»åŠ å¯¹è±¡å±æ€§çš„é™„åŠ ä½†é‡è¦çš„æ³¨é‡Šå±‚æ¥æ‰©å±•ä¼—æ‰€å‘¨çŸ¥çš„æ•°æ®é›†CiteScenesã€‚ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»æ³¨é‡Šäº†è¶…è¿‡32000ä¸ªä¸åŒç±»åˆ«çš„å®ä¾‹(è½¦è¾†ã€Pedes-Triansç­‰)ã€‚è¯¥æ•°æ®é›†å…·æœ‰ç»“æ„åŒ–å’Œå®šåˆ¶çš„ç¨æ”¶ç»æµï¼Œå…¶ä¸­æ¯ä¸ªç±»åˆ«éƒ½æœ‰å…¶è‡ªå·±çš„ä¸€ç»„å¯èƒ½çš„å±æ€§ã€‚é‡èº«å®šåšçš„åˆ†ç±»é›†ä¸­åœ¨æœ€æœ‰åˆ©äºå¼€å‘æ›´å¥½çš„è‡ªåŠ¨é©¾é©¶ç®—æ³•çš„å±æ€§ä¸Šï¼Œè¿™äº›ç®—æ³•ä¾èµ–äºå‡†ç¡®çš„è®¡ç®—æœºè§†è§‰å’Œåœºæ™¯ç†è§£ã€‚æˆ‘ä»¬è¿˜ä¸ºæ•°æ®é›†åˆ›å»ºäº†APIï¼Œä»¥æ–¹ä¾¿CARçš„ä½¿ç”¨ã€‚è¯¥æ¥å£å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®https://github.com/kareem-metwaly/CAR-API</p><h4 id="ç»“è®º-7">ç»“è®º</h4><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œç§°ä¸ºCityscapes Attributes Recognition(CAR)ã€‚CARé€šè¿‡å‘æ•°æ®é›†çš„æ¯ä¸ªå›¾åƒä¸­çš„æ¯ä¸ªå¯¹è±¡æ·»åŠ å±æ€§æ¥è¡¥å……å·²ç»å­˜åœ¨çš„åŸå¸‚æ™¯è§‚æ•°æ®é›†ã€‚è¿™å¯¼è‡´äº†å¯¹åœºæ™¯çš„å®Œæ•´ç†è§£ï¼Œè¿™åœ¨è‡ªåŠ¨é©¾é©¶æ±½è½¦çš„æŸäº›æƒ…å†µä¸‹æ˜¯è‡³å…³é‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œæ— äººé©¾é©¶è½¦è¾†éœ€è¦äº†è§£é™„è¿‘è¡Œäººçš„é¢„æœŸè¡Œä¸ºã€‚æ•°æ®é›†åŒ…å«32,729ä¸ªå®ä¾‹ã€‚æ•°æ®é›†è¢«åˆ’åˆ†ä¸ºæ‹¥æœ‰æ›´å¤§çš„å±æ€§é¢„æµ‹æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®é›†åªå…³æ³¨ä¸é©¾é©¶ç›¸å…³çš„ç±»åˆ«ï¼Œè¿™å¯¹äºè‡ªåŠ¨é©¾é©¶æ±½è½¦é¢†åŸŸæ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å°†ä¸ºè®¡ç®—æœºè§†è§‰å¸¦æ¥æ›´å¯æŒç»­ã€æ›´å¯é çš„ç®—æ³•ã€‚</p><h4 id="æç‚¼-7">æç‚¼</h4><h5 id="é—®é¢˜-8">é—®é¢˜</h5><p>è‡ªåŠ¨é©¾é©¶æ±½è½¦æ˜¯äº¤é€šè¿è¾“çš„æœªæ¥ã€‚éšç€è¿™ä¸€é¢†åŸŸçš„è¿›æ­¥ï¼Œä¸–ç•Œè¶Šæ¥è¶Šæ¥è¿‘å®‰å…¨é“è·¯ï¼Œå‡ ä¹æ²¡æœ‰å‘ç”Ÿäº‹æ•…çš„å¯èƒ½æ€§ï¼Œå¹¶æ¶ˆé™¤äº†äººä¸ºé”™è¯¯ã€‚ç„¶è€Œï¼Œè¦è¾¾åˆ°å¥å£®æ€§æ°´å¹³ï¼Œè¿˜éœ€è¦è¿›è¡Œå¤§é‡çš„ç ”ç©¶å’Œå¼€å‘ã€‚ä¸€ä¸ªé‡è¦çš„æ–¹é¢æ˜¯å……åˆ†ç†è§£ä¸€ä¸ªåœºæ™¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç»†èŠ‚ã€‚å› ä¸ºåœºæ™¯ä¸­ç‰©ä½“çš„æŸäº›ç‰¹å¾(å±æ€§)(ä¾‹å¦‚é©¾é©¶å‘˜çš„è¡Œä¸º)å¯¹äºæ­£ç¡®çš„å†³ç­–æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ç„¶è€Œï¼Œç›®å‰çš„ç®—æ³•å­˜åœ¨å±æ€§ä¸°å¯Œã€è´¨é‡ä¸é«˜çš„é—®é¢˜ã€‚</p><h3 id="Restormer-Efficient-Transformer-for-High-Resolution-Image-Restoration-â­ï¸">Restormer: Efficient Transformer for High-Resolution Image Restoration â­ï¸</h3><h4 id="æ‘˜è¦-8">æ‘˜è¦</h4><p>ç”±äºå·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨ä»å¤§è§„æ¨¡æ•°æ®ä¸­å­¦ä¹ å¯æ¨å¹¿çš„å›¾åƒå…ˆéªŒçŸ¥è¯†æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œè¿™äº›æ¨¡å‹å·²è¢«å¹¿æ³›åº”ç”¨äºå›¾åƒæ¢å¤å’Œç›¸å…³ä»»åŠ¡ã€‚æœ€è¿‘ï¼Œå¦ä¸€ç±»ç¥ç»ç»“æ„ï¼ŒTransformerï¼Œåœ¨è‡ªç„¶è¯­è¨€å’Œé«˜çº§è§†è§‰ä»»åŠ¡ä¸Šè¡¨ç°å‡ºæ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚è™½ç„¶Transformeræ¨¡å‹ç¼“è§£äº†CNNçš„ç¼ºç‚¹(å³æ¥æ”¶èŒƒå›´æœ‰é™ï¼Œå¯¹è¾“å…¥å†…å®¹ä¸é€‚åº”)ï¼Œä½†å…¶è®¡ç®—å¤æ‚åº¦éšç©ºé—´åˆ†è¾¨ç‡å‘ˆäºŒæ¬¡æ›²çº¿å¢é•¿ï¼Œå› æ­¤ä¸é€‚ç”¨äºå¤§å¤šæ•°æ¶‰åŠé«˜åˆ†è¾¨ç‡å›¾åƒçš„å›¾åƒæ¢å¤ä»»åŠ¡ã€‚åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æœ‰æ•ˆçš„Transformeræ¨¡å‹ï¼Œå®ƒåœ¨æ„å»ºæ¨¡å—(å¤šå¤´å¤„ç†å’Œå‰é¦ˆç½‘ç»œ)ä¸­è¿›è¡Œäº†å‡ ä¸ªå…³é”®è®¾è®¡ï¼Œä»¥ä¾¿åœ¨æ•è·è¿œè·ç¦»åƒç´ äº¤äº’çš„åŒæ—¶ï¼Œä»ç„¶é€‚ç”¨äºå¤§å›¾åƒã€‚æˆ‘ä»¬çš„æ¨¡å‹åä¸º(Restormer)ï¼Œå®ç°äº†å›¾åƒå»å™ªã€å•å›¾åƒè¿åŠ¨å»æ¨¡ç³Šã€æ•£ç„¦å»æ¨¡ç³Š(å•åƒç´ å’ŒåŒåƒç´ æ•°æ®)å’Œå›¾åƒå»å™ª(é«˜æ–¯ç°åº¦/å½©è‰²å»å™ªå’ŒçœŸå®å›¾åƒå»å™ª)ç­‰å‡ ä¸ªå›¾åƒæ¢å¤ä»»åŠ¡çš„æœ€æ–°æˆæœã€‚æºä»£ç å’Œé¢„å…ˆåŸ¹è®­çš„æ¨¡å‹å¯åœ¨https://github.com/swz30/Restormerè·å¾—ã€‚</p><h4 id="ç»“è®º-8">ç»“è®º</h4><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§å›¾åƒæ¢å¤Transformeræ¨¡å‹Restormerï¼Œè¯¥æ¨¡å‹åœ¨å¤„ç†é«˜åˆ†è¾¨ç‡å›¾åƒæ—¶è®¡ç®—æ•ˆç‡å¾ˆé«˜ã€‚æˆ‘ä»¬å¯¹Transformer blockçš„æ ¸å¿ƒéƒ¨ä»¶è¿›è¡Œäº†å…³é”®è®¾è®¡ï¼Œä»¥æ”¹è¿›åŠŸèƒ½èšåˆå’Œè½¬æ¢ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬çš„å¤šDconvå¤´éƒ¨è½¬ç½®æ³¨æ„(MDTA)æ¨¡å—é€šè¿‡åº”ç”¨è·¨é¢‘é“çš„è‡ªæˆ‘æ³¨æ„è€Œä¸æ˜¯ç©ºé—´ç»´åº¦æ¥éšå«åœ°å»ºæ¨¡å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå› æ­¤å…·æœ‰çº¿æ€§å¤æ‚åº¦è€Œä¸æ˜¯äºŒæ¬¡å¤æ‚åº¦ã€‚æ­¤å¤–ï¼Œæå‡ºçš„é—¨æ§DConvå‰é¦ˆç½‘ç»œ(GDFN)å¼•å…¥äº†ä¸€ç§é—¨æ§æœºåˆ¶æ¥å®ç°å—æ§çš„ç‰¹å¾å˜æ¢ã€‚ä¸ºäº†å°†CNNçš„å¼ºåº¦èå…¥åˆ°Transformeræ¨¡å‹ä¸­ï¼ŒMDTAå’ŒGDFNæ¨¡å‹éƒ½åŒ…æ‹¬ç”¨äºç¼–ç ç©ºé—´å±€éƒ¨ä¸Šä¸‹æ–‡çš„æ·±åº¦å·ç§¯ã€‚åœ¨16ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„å¹¿æ³›å®éªŒè¡¨æ˜ï¼ŒRestormeråœ¨ä¼—å¤šå›¾åƒæ¢å¤ä»»åŠ¡ä¸­å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚</p><h4 id="æç‚¼-8">æç‚¼</h4><h5 id="é—®é¢˜-9">é—®é¢˜</h5><p>ç”±äºå·ç§¯ç¥ç»ç½‘ç»œ(CNNs)åœ¨ä»å¤§è§„æ¨¡æ•°æ®ä¸­å­¦ä¹ å¯æ¨å¹¿çš„å›¾åƒå…ˆéªŒçŸ¥è¯†æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œè¿™äº›æ¨¡å‹å·²è¢«å¹¿æ³›åº”ç”¨äºå›¾åƒæ¢å¤å’Œç›¸å…³ä»»åŠ¡ã€‚æœ€è¿‘ï¼Œå¦ä¸€ç±»ç¥ç»ç»“æ„ï¼ŒTransformerï¼Œåœ¨è‡ªç„¶è¯­è¨€å’Œé«˜çº§è§†è§‰ä»»åŠ¡ä¸Šè¡¨ç°å‡ºæ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚è™½ç„¶Transformeræ¨¡å‹ç¼“è§£äº†CNNçš„ç¼ºç‚¹(å³æ¥æ”¶èŒƒå›´æœ‰é™ï¼Œå¯¹è¾“å…¥å†…å®¹ä¸é€‚åº”)ï¼Œä½†å…¶è®¡ç®—å¤æ‚åº¦éšç©ºé—´åˆ†è¾¨ç‡å‘ˆäºŒæ¬¡æ›²çº¿å¢é•¿ï¼Œ<strong>å› æ­¤ä¸é€‚ç”¨äºå¤§å¤šæ•°æ¶‰åŠé«˜åˆ†è¾¨ç‡å›¾åƒçš„å›¾åƒæ¢å¤ä»»åŠ¡ã€‚</strong></p><h5 id="æ–¹æ³•-7">æ–¹æ³•</h5><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æœ‰æ•ˆçš„Transformeræ¨¡å‹ï¼Œå®ƒåœ¨æ„å»ºæ¨¡å—(å¤šå¤´å¤„ç†å’Œå‰é¦ˆç½‘ç»œ)ä¸­è¿›è¡Œäº†å‡ ä¸ªå…³é”®è®¾è®¡ï¼Œä»¥ä¾¿åœ¨æ•è·è¿œè·ç¦»åƒç´ äº¤äº’çš„åŒæ—¶ï¼Œä»ç„¶é€‚ç”¨äºå¤§å›¾åƒã€‚æˆ‘ä»¬çš„æ¨¡å‹åä¸ºRestoration Transformer(Restormer)ï¼›</p><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect8_1.png" alt=""></p><p>ç”¨äºé«˜åˆ†è¾¨ç‡å›¾åƒæ¢å¤çš„Restormeræ¶æ„ã€‚æˆ‘ä»¬çš„æ¢å¤å™¨ç”±å¤šå°ºåº¦åˆ†å±‚è®¾è®¡ç»„æˆï¼Œå¢åŠ äº†é«˜æ•ˆçš„Transformeræ¨¡å—ã€‚Transformer blockçš„æ ¸å¿ƒæ¨¡å—æ˜¯ï¼š(A)å¤šDConvå¤´éƒ¨è½¬ç½®æ³¨æ„åŠ›ï¼Œå…¶æ‰§è¡Œ(ç©ºé—´ä¸°å¯Œçš„)è·¨é€šé“çš„æŸ¥è¯¢-å…³é”®ç‰¹å¾äº¤äº’ï¼Œè€Œä¸æ˜¯åœ¨ç©ºé—´ç»´åº¦ä¸Šï¼›ä»¥åŠ(B)é—¨æ§-DConvå‰é¦ˆç½‘ç»œï¼Œå…¶æ‰§è¡Œå—æ§çš„ç‰¹å¾å˜æ¢ï¼Œå³å…è®¸æœ‰ç”¨ä¿¡æ¯è¿›ä¸€æ­¥ä¼ æ’­ã€‚</p><h5 id="æˆæœ-7">æˆæœ</h5><p>å®ç°äº†å›¾åƒå»å™ªã€å•å›¾åƒè¿åŠ¨å»æ¨¡ç³Šã€æ•£ç„¦å»æ¨¡ç³Š(å•åƒç´ å’ŒåŒåƒç´ æ•°æ®)å’Œå›¾åƒå»å™ª(é«˜æ–¯ç°åº¦/å½©è‰²å»å™ªå’ŒçœŸå®å›¾åƒå»å™ª)ç­‰å‡ ä¸ªå›¾åƒæ¢å¤ä»»åŠ¡çš„æœ€æ–°æˆæœã€‚æºä»£ç å’Œé¢„å…ˆåŸ¹è®­çš„æ¨¡å‹å¯åœ¨https://github.com/swz30/Restormerè·å¾—ã€‚åœ¨16ä¸ªåŸºå‡†æ•°æ®é›†ä¸Šçš„å¹¿æ³›å®éªŒè¡¨æ˜ï¼ŒRestormeråœ¨ä¼—å¤šå›¾åƒæ¢å¤ä»»åŠ¡ä¸­å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚</p><h3 id="Dynamic-Attentive-Graph-Learning-for-Image-Restoration">Dynamic Attentive Graph Learning for Image Restoration</h3><h4 id="æ‘˜è¦-9">æ‘˜è¦</h4><p>è‡ªç„¶å›¾åƒçš„éå±€éƒ¨è‡ªç›¸ä¼¼æ€§å·²è¢«è¯æ˜æ˜¯å›¾åƒæ¢å¤çš„æœ‰æ•ˆå…ˆéªŒã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ç°æœ‰çš„æ·±åº¦éå±€éƒ¨æ–¹æ³•ä¸ºæ¯ä¸ªæŸ¥è¯¢é¡¹åˆ†é…å›ºå®šæ•°é‡çš„é‚»å±…ï¼Œå¿½ç•¥äº†éå±€éƒ¨ç›¸å…³æ€§çš„åŠ¨æ€æ€§ã€‚è€Œä¸”ï¼Œéå±€éƒ¨ç›¸å…³é€šå¸¸æ˜¯åŸºäºåƒç´ çš„ï¼Œå®¹æ˜“å—åˆ°å›¾åƒé€€åŒ–çš„å½±å“è€Œäº§ç”Ÿåå·®ã€‚é’ˆå¯¹è¿™äº›ä¸è¶³ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§åŠ¨æ€æ³¨æ„åŠ›å›¾å­¦ä¹ æ¨¡å‹(DAGL)æ¥æ¢ç´¢å›¾åƒæ¢å¤ä¸­æ–‘å—çº§çš„åŠ¨æ€éå±€éƒ¨æ€§ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ”¹è¿›çš„å›¾æ¨¡å‹æ¥æ‰§è¡Œé€å—å›¾å·ç§¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„é‚»åŸŸæ•°ç›®æ˜¯åŠ¨æ€çš„å’Œè‡ªé€‚åº”çš„ã€‚è¿™æ ·ï¼Œå›¾åƒå†…å®¹å¯ä»¥é€šè¿‡å…¶è¿é€šé‚»åŸŸçš„æ•°ç›®è‡ªé€‚åº”åœ°å¹³è¡¡è¿‡å…‰æ»‘å’Œè¿‡å°–é”çš„ä¼ªå½±ï¼Œè€Œé€å—çš„éå±€éƒ¨ç›¸å…³æ€§å¯ä»¥å¢å¼ºæ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹ã€‚åœ¨åˆæˆå›¾åƒå»å™ªã€çœŸå®å›¾åƒå»å™ªã€å›¾åƒå»é©¬èµ›å…‹å’Œå‹ç¼©ä¼ªå½±å‡å°‘ç­‰å„ç§å›¾åƒæ¢å¤ä»»åŠ¡ä¸Šçš„å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„DAGLå¯ä»¥äº§ç”Ÿæœ€å…ˆè¿›çš„ç»“æœï¼Œå…·æœ‰è¾ƒé«˜çš„ç²¾åº¦å’Œè§†è§‰è´¨é‡ã€‚æºä»£ç å¯ä»¥åœ¨https://github.com/jianzhangcs/DAGL.ä¸Šæ‰¾åˆ°ã€‚</p><h4 id="ç»“è®º-9">ç»“è®º</h4><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§æ”¹è¿›çš„ç”¨äºå›¾åƒæ¢å¤çš„å›¾æ³¨æ„æ¨¡å‹ã€‚ä¸ä»¥å¾€çš„éå±€éƒ¨å›¾åƒæ¢å¤æ–¹æ³•ä¸åŒï¼Œè¯¥æ¨¡å‹å¯ä»¥ä¸ºæ¯ä¸ªæŸ¥è¯¢é¡¹åˆ†é…ä¸€å®šæ•°é‡çš„é‚»åŸŸï¼Œå¹¶åŸºäºç‰¹å¾å—æ„é€ è¿œç¨‹ç›¸å…³å…³ç³»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æå‡ºçš„åŠ¨æ€æ³¨æ„å›¾å­¦ä¹ å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ°å…¶ä»–è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚æ‰©å±•å®éªŒè¡¨æ˜ï¼Œè¯¥æ¨¡å‹åœ¨åˆæˆå›¾åƒå»å™ªã€çœŸå®å›¾åƒå»å™ªã€å›¾åƒå»é©¬èµ›å…‹å’Œå‹ç¼©ä¼ªå½±å‡å°‘ç­‰å¹¿æ³›çš„å›¾åƒæ¢å¤ä»»åŠ¡ä¸­å–å¾—äº†æœ€å¥½çš„æ€§èƒ½ã€‚</p><h4 id="æç‚¼-9">æç‚¼</h4><h5 id="é—®é¢˜-10">é—®é¢˜</h5><p>è‡ªç„¶å›¾åƒçš„éå±€éƒ¨è‡ªç›¸ä¼¼æ€§å·²è¢«è¯æ˜æ˜¯å›¾åƒæ¢å¤çš„æœ‰æ•ˆå…ˆéªŒã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ç°æœ‰çš„æ·±åº¦éå±€éƒ¨æ–¹æ³•ä¸ºæ¯ä¸ªæŸ¥è¯¢é¡¹åˆ†é…å›ºå®šæ•°é‡çš„é‚»å±…ï¼Œå¿½ç•¥äº†éå±€éƒ¨ç›¸å…³æ€§çš„åŠ¨æ€æ€§ã€‚è€Œä¸”ï¼Œéå±€éƒ¨ç›¸å…³é€šå¸¸æ˜¯åŸºäºåƒç´ çš„ï¼Œå®¹æ˜“å—åˆ°å›¾åƒé€€åŒ–çš„å½±å“è€Œäº§ç”Ÿåå·®ã€‚</p><h5 id="æ–¹æ³•-8">æ–¹æ³•</h5><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŠ¨æ€æ³¨æ„åŠ›å›¾å­¦ä¹ æ¨¡å‹(DAGL)æ¥æ¢ç´¢å›¾åƒæ¢å¤ä¸­æ–‘å—çº§çš„åŠ¨æ€éå±€éƒ¨æ€§ã€‚å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ”¹è¿›çš„å›¾æ¨¡å‹æ¥æ‰§è¡Œé€å—å›¾å·ç§¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„é‚»åŸŸæ•°ç›®æ˜¯åŠ¨æ€çš„å’Œè‡ªé€‚åº”çš„ã€‚è¿™æ ·ï¼Œå›¾åƒå†…å®¹å¯ä»¥é€šè¿‡å…¶è¿é€šé‚»åŸŸçš„æ•°ç›®è‡ªé€‚åº”åœ°å¹³è¡¡è¿‡å…‰æ»‘å’Œè¿‡å°–é”çš„ä¼ªå½±ï¼Œè€Œé€å—çš„éå±€éƒ¨ç›¸å…³æ€§å¯ä»¥å¢å¼ºæ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/paper-collect10_1.png" alt=""></p><p>æå‡ºäº†åŠ¨æ€æ³¨æ„åŠ›å›¾å­¦ä¹ æ¨¡å‹(DAGL)ã€‚ç‰¹å¾æå–æ¨¡å—(FEM)åˆ©ç”¨æ®‹å·®åˆ†å—æ¥æå–æ·±å±‚ç‰¹å¾ã€‚åŸºäºå›¾çš„ç‰¹å¾èšé›†æ¨¡å—(GFAM)æ„å»ºå…·æœ‰åŠ¨æ€è¿æ¥çš„å›¾ï¼Œå¹¶è¿›è¡Œé¢ç‰‡çŠ¶çš„å›¾å·ç§¯ã€‚å…·æœ‰å¤šä¸ªå¤´çš„å¹¿ä¹‰FAM(M-GFAM)è”åˆèšé›†æ¥è‡ªä¸åŒè¡¨ç¤ºå­ç©ºé—´çš„ä¿¡æ¯ã€‚</p><h5 id="æˆæœ-8">æˆæœ</h5><p>åœ¨åˆæˆå›¾åƒå»å™ªã€çœŸå®å›¾åƒå»å™ªã€å›¾åƒå»é©¬èµ›å…‹å’Œå‹ç¼©ä¼ªå½±å‡å°‘ç­‰å„ç§å›¾åƒæ¢å¤ä»»åŠ¡ä¸Šçš„å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„DAGLå¯ä»¥äº§ç”Ÿæœ€å…ˆè¿›çš„ç»“æœï¼Œå…·æœ‰è¾ƒé«˜çš„ç²¾åº¦å’Œè§†è§‰è´¨é‡ã€‚æºä»£ç å¯ä»¥åœ¨https://github.com/jianzhangcs/DAGL.ä¸Šæ‰¾åˆ°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>æ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>æ€»ç»“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer55-2 å¹³è¡¡äºŒå‰æ ‘</title>
    <link href="/2022/03/02/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer55-2/"/>
    <url>/2022/03/02/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer55-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¹³è¡¡äºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œåˆ¤æ–­è¯¥æ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚å¦‚æœæŸäºŒå‰æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æ·±åº¦ç›¸å·®ä¸è¶…è¿‡1ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ç»™å®šäºŒå‰æ ‘ [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br><br>    <span class="hljs-number">3</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>    /  <span class="hljs-string">\</span><br>   <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br>è¿”å› <span class="hljs-literal">true</span> ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ç»™å®šäºŒå‰æ ‘ [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>]<br><br>       <span class="hljs-number">1</span><br>      / <span class="hljs-string">\</span><br>     <span class="hljs-number">2</span>   <span class="hljs-number">2</span><br>    / <span class="hljs-string">\</span><br>   <span class="hljs-number">3</span>   <span class="hljs-number">3</span><br>  / <span class="hljs-string">\</span><br> <span class="hljs-number">4</span>   <span class="hljs-number">4</span><br>è¿”å›&nbsp;<span class="hljs-literal">false</span> ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= æ ‘çš„ç»“ç‚¹ä¸ªæ•° &lt;= 10000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸­åºéå†çš„æ€æƒ³å¾—åˆ°ä¸€æ£µæ ‘çš„æ·±åº¦ä¸º<code>max(left,right)+1</code>ï¼Œé¦–å…ˆå¾—åˆ°å·¦å³å­æ ‘çš„æ·±åº¦ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå–æœ€å¤§å€¼åŠ ä¸€å³ä¸ºæ­¤æ ¹çš„æ ‘æ·±åº¦ã€‚åŒæ—¶æ³¨æ„å‰ªæï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isBalanced</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#åˆ¤æ–­æ·±åº¦ï¼Œå¦‚æœå­æ ‘ä¸å¹³è¡¡å°±è¿”å›-1</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-comment">#ä¸ºç©ºæ—¶æ·±åº¦ä¸º0</span><br>            left = func(root.left)<br>            <span class="hljs-keyword">if</span> left==-<span class="hljs-number">1</span>:<span class="hljs-keyword">return</span> -<span class="hljs-number">1</span> <span class="hljs-comment">#å‰ªæ</span><br>            right = func(root.right)<br>            <span class="hljs-keyword">if</span> right == -<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span> <span class="hljs-comment">#å‰ªæ</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(left,right)+<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(left-right)&lt;=<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        <br>        <span class="hljs-keyword">if</span> func(root)==-<span class="hljs-number">1</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep learning on image denoising--An overview</title>
    <link href="/2022/03/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%BC%E8%BF%B0/%E8%87%AA%E7%84%B6%E5%9B%BE%E5%83%8F%E5%8E%BB%E5%99%AA%E7%BB%BC%E8%BF%B0/"/>
    <url>/2022/03/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%BC%E8%BF%B0/%E8%87%AA%E7%84%B6%E5%9B%BE%E5%83%8F%E5%8E%BB%E5%99%AA%E7%BB%BC%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ‰å…³è‡ªç„¶å›¾åƒå»å™ªçš„ä¸€ç¯‡ç»¼è¿°Deep learning on image denoisingâ€“An overview.åœ¨æ­¤è®°å½•å’Œæ€»ç»“æ­¤ç¯‡è®ºæ–‡çš„è¦ç‚¹ï¼›èšç„¦äºå›¾åƒå»å™ªçš„æ–¹æ³•ï¼Œæˆæœï¼ŒåŒºåˆ«ï¼ŒåŠ¨æœºå’Œå±•æœ›ã€‚</p></blockquote><h1>Deep learning on image denoising</h1><p>2020å‘è¡¨ 156è¢«å¼•ç”¨</p><h2 id="æ‘˜è¦">æ‘˜è¦</h2><h4 id="æ·±åº¦å­¦ä¹ å»å™ª">æ·±åº¦å­¦ä¹ å»å™ª</h4><p>åŸºäºæ·±åº¦å­¦ä¹ çš„åˆ¤åˆ«å­¦ä¹ å¯ä»¥å¾ˆå¥½åœ°è§£å†³é«˜æ–¯å™ªå£°é—®é¢˜ã€‚åŸºäºæ·±åº¦å­¦ä¹ çš„ä¼˜åŒ–æ¨¡å‹å¯¹çœŸå®å™ªå£°çš„ä¼°è®¡æ˜¯æœ‰æ•ˆçš„ã€‚</p><h4 id="åˆ†ç±»æ–¹æ³•">åˆ†ç±»æ–¹æ³•</h4><p>1ï¼Œå¯¹åŠ æ€§ç™½å™ªå£°å›¾åƒçš„æ·±å±‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)</p><p>2ï¼ŒçœŸå®å™ªå£°å›¾åƒçš„æ·±å±‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)</p><p>3ï¼Œç›²å»å™ªå›¾åƒçš„æ·±å±‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)</p><p>4ï¼Œæ··åˆå™ªå£°å›¾åƒçš„æ·±å±‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ã€‚</p><p>å®ƒä»¬åˆ†åˆ«<strong>ä»£è¡¨</strong>äº†å™ªå£°å›¾åƒã€æ¨¡ç³Šå›¾åƒå’Œä½åˆ†è¾¨ç‡å›¾åƒçš„ç»„åˆã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ†æäº†ä¸åŒç±»å‹æ·±åº¦å­¦ä¹ æ–¹æ³•çš„<strong>åŠ¨æœºå’ŒåŸç†</strong>ã€‚ä»å®šé‡å’Œå®šæ€§åˆ†æä¸¤ä¸ªæ–¹é¢å¯¹å…¬å¼€æ•°æ®é›†å»å™ªçš„æœ€æ–°æ–¹æ³•è¿›è¡Œäº†<strong>æ¯”è¾ƒ</strong>ã€‚</p><h4 id="å…³æ³¨ç‚¹">å…³æ³¨ç‚¹</h4><ul><li>å®šæ€§å®šé‡çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>å¦‚ä½•è¡¨ç¤ºï¼Ÿå¯¹åº”å…³ç³»å¦‚ä½•ï¼Ÿ</li></ul><h2 id="ç»“è®º">ç»“è®º</h2><h3 id="æ–‡ç« æ€»ç»“">æ–‡ç« æ€»ç»“</h3><p>æœ¬æ–‡å¯¹ç”¨äºå›¾åƒå»å™ªçš„æ·±åº¦ç½‘ç»œè¿›è¡Œäº†æ¯”è¾ƒã€ç ”ç©¶å’Œæ€»ç»“ã€‚</p><ul><li>æ·±åº¦å­¦ä¹ ç”¨äºå›¾åƒå»å™ªçš„<strong>åŸºæœ¬æ¡†æ¶</strong>ã€‚</li><li>åˆ†æ<strong>å™ªå£°ä»»åŠ¡</strong>çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼ŒåŒ…æ‹¬åŠ æ€§ç™½å™ªå£°å›¾åƒã€ç›²å»å™ªã€çœŸå®å™ªå£°å›¾åƒå’Œæ··åˆå™ªå£°å›¾åƒï¼›</li><li>é’ˆå¯¹æ¯ä¸€ç±»å™ªå£°ä»»åŠ¡ï¼Œåˆ†æäº†ç½‘ç»œå»å™ªçš„<strong>åŠ¨å› å’ŒåŸç†</strong>ã€‚</li><li>æ¯”è¾ƒä¸åŒç½‘ç»œåœ¨åŸºå‡†æ•°æ®é›†ä¸Šçš„å»å™ªæ•ˆæœã€æ•ˆç‡å’Œè§†è§‰<strong>æ•ˆæœ</strong>ï¼›</li><li>ä¸åŒç±»å‹çš„å™ªå£°ä¸‹ï¼Œå¯¹ä¸åŒç±»å‹çš„å›¾åƒå»å™ªæ–¹æ³•è¿›è¡Œäº†<strong>äº¤å‰æ¯”è¾ƒ</strong>ã€‚</li><li>æœ‰å¾…è¿›ä¸€æ­¥ç ”ç©¶çš„é¢†åŸŸï¼Œè®¨è®ºå›¾åƒå»å™ªé¢ä¸´çš„<strong>æŒ‘æˆ˜</strong>ã€‚</li></ul><h3 id="æŒ‘æˆ˜ä¸å±•æœ›">æŒ‘æˆ˜ä¸å±•æœ›</h3><p>åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œé«˜æ–¯å™ªå£°å›¾åƒå»å™ªæŠ€æœ¯å·²ç»å–å¾—äº†å¾ˆå¤§çš„æˆåŠŸï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜æ–¯å™ªå£°æ˜¯è§„åˆ™çš„æƒ…å†µä¸‹ã€‚</p><h4 id="ç°å®æ¡ä»¶">ç°å®æ¡ä»¶</h4><ul><li><p>å™ªå£°æ˜¯å¤æ‚å’Œä¸è§„åˆ™çš„ã€‚ï¼ˆæ”¹è¿›ç¡¬ä»¶è®¾å¤‡ï¼Œä»¥ä¾¿æ›´å¥½åœ°æŠ‘åˆ¶å™ªå£°ï¼Œä»¥è·å–é«˜è´¨é‡çš„å›¾åƒéå¸¸é‡è¦ï¼‰</p></li><li><p>è·å–çš„å›¾åƒå¯èƒ½ä¼šå‡ºç°æ¨¡ç³Šã€ä½åˆ†è¾¨ç‡å’ŒæŸåçš„æƒ…å†µã€‚</p></li></ul><h4 id="æŒ‘æˆ˜">æŒ‘æˆ˜</h4><ul><li>å¦‚ä½•æœ‰æ•ˆåœ°ä»å åŠ çš„å™ªå£°å›¾åƒä¸­æ¢å¤å‡ºæ½œåœ¨çš„å¹²å‡€å›¾åƒæ˜¯è‡³å…³é‡è¦çš„ã€‚</li><li>ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯æ¥å­¦ä¹ ç‰¹å¾éœ€è¦ground-truthï¼Œä½†è·å¾—çš„çœŸå®å™ªå£°å›¾åƒæ²¡æœ‰ground-truthã€‚</li></ul><h2 id="å¼•å…¥">å¼•å…¥</h2><h3 id="è¿‘50å¹´çš„å‘å±•">è¿‘50å¹´çš„å‘å±•</h3><p><strong>æ¢ç´¢é˜¶æ®µ</strong>ï¼ˆä¼ ç»Ÿï¼‰ï¼šéçº¿æ€§å’Œéè‡ªé€‚åº”æ»¤æ³¢å™¨è¢«ç”¨äºå›¾åƒåº”ç”¨ã€‚ä¸çº¿æ€§æ»¤æ³¢å™¨ä¸åŒï¼Œéçº¿æ€§æ»¤æ³¢å™¨å¯ä»¥ä¿ç•™è¾¹ç¼˜ä¿¡æ¯ä»¥æŠ‘åˆ¶å™ªå£°ã€‚è‡ªé€‚åº”éçº¿æ€§æ»¤æ³¢å™¨ä¾èµ–äºå±€éƒ¨ä¿¡å™ªæ¯”æ¥å¯¼å‡ºé€‚å½“çš„åŠ æƒå› å­ï¼Œç”¨äºä»è¢«åŠ æ€§éšæœºã€ä¿¡å·ç›¸å…³ã€è„‰å†²å™ªå£°å’ŒåŠ æ€§éšæœºå™ªå£°çš„ç»„åˆæ‰€æ±¡æŸ“çš„å›¾åƒä¸­å»é™¤å™ªå£°ã€‚éè‡ªé€‚åº”æ»¤æ³¢å™¨å¯ä»¥åŒæ—¶ä½¿ç”¨è¾¹ç¼˜ä¿¡æ¯å’Œä¿¡å™ªæ¯”ä¿¡æ¯æ¥ä¼°è®¡å™ªå£°ã€‚</p><p><strong>æœºå™¨å­¦ä¹ </strong>ï¼šæœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œå¦‚åŸºäºç¨€ç–çš„æ–¹æ³•ï¼Œè¢«æˆåŠŸåœ°åº”ç”¨äºå›¾åƒå»å™ªã€‚ä¸€ç§éå±€éƒ¨é›†ä¸­å¼ç¨€ç–è¡¨ç¤ºæ–¹æ³•åˆ©ç”¨éå±€éƒ¨è‡ªç›¸ä¼¼æ€§å¯¹ç¨€ç–æ–¹æ³•è¿›è¡Œä¼˜åŒ–ï¼Œè·å¾—äº†è¾ƒé«˜çš„å›¾åƒå»å™ªæ€§èƒ½ï¼›é™ä½æˆæœ¬ï¼šé‡‡ç”¨å­—å…¸å­¦ä¹ æ–¹æ³•å¿«é€Ÿè¿‡æ»¤å»å™ªã€‚æ¢å¤æ½œåœ¨cleanå›¾åƒç»†èŠ‚ä¿¡æ¯ï¼šå…ˆéªŒçŸ¥è¯†(å³æ€»å˜å¼‚æ­£åˆ™åŒ–)å¯ä»¥å¹³æ»‘å™ªå£°å›¾åƒï¼Œä»¥å¤„ç†å—æ±¡æŸ“çš„å›¾åƒã€‚</p><p><strong>æ›´å¤šè¡¥å……</strong>ï¼šé©¬å°”å¯å¤«éšæœºåœºï¼ˆMRFï¼‰ï¼ŒåŠ æƒæ ¸èŒƒæ•°æœ€å°åŒ–ï¼ˆWNNMï¼‰ï¼Œå­¦ä¹ åŒæ—¶ç¨€ç–ç¼–ç ï¼ˆLSSCï¼‰ï¼Œæ”¶ç¼©åœºçº§è”ï¼ˆCSFï¼‰ï¼Œå¯è®­ç»ƒéçº¿æ€§ååº”æ‰©æ•£ï¼ˆTNRDï¼‰å’Œæ¢¯åº¦ç›´æ–¹å›¾ä¼°è®¡å’Œä¿å­˜ï¼ˆGHEP)</p><h5 id="ç¼ºç‚¹">ç¼ºç‚¹</h5><p>ä¸Šè¿°å¤§å¤šæ•°æ–¹æ³•åœ¨å›¾åƒå»å™ªæ–¹é¢éƒ½å–å¾—äº†ç›¸å½“å¥½çš„æ€§èƒ½ï¼Œä½†å®ƒä»¬ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼ŒåŒ…æ‹¬éœ€è¦æµ‹è¯•é˜¶æ®µçš„ä¼˜åŒ–æ–¹æ³•ã€æ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠé’ˆå¯¹å•ä¸ªå»å™ªä»»åŠ¡çš„ç‰¹å®šæ¨¡å‹ã€‚</p><h3 id="æ·±åº¦å­¦ä¹ ">æ·±åº¦å­¦ä¹ </h3><p>æå‡ºçš„å»å™ªå·¥ä½œé¦–å…ˆä½¿ç”¨å…·æœ‰å·²çŸ¥<strong>ç§»ä½ä¸å˜æ¨¡ç³Šå‡½æ•°å’ŒåŠ æ€§å™ªå£°</strong>çš„ç¥ç»ç½‘ç»œæ¥æ¢å¤æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚</p><p>åç»­ä½¿ç”¨åŠ æƒå› å­å»é™¤å¤æ‚å™ªå£°ï¼Œä¸ºäº†é™ä½è®¡ç®—ä»£ä»·ï¼Œä½¿ç”¨<em><strong>å‰é¦ˆç½‘ç»œ</strong></em>æŠ˜ä¸­å»å™ªæ•ˆæœå’Œæ€§èƒ½ã€‚å‰é¦ˆç¥ç»ç½‘ç»œåˆ©ç”¨Kuwahara filterså¯¹å›¾åƒè¿›è¡Œå¹³æ»‘å¤„ç†ï¼ˆç±»ä¼¼å·ç§¯ï¼‰ï¼Œè¿˜è¯æ˜å‡æ–¹è¯¯å·®(MSE)æ˜¯ALOSå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ç¥ç»ç½‘ç»œæ‰€ç‰¹æœ‰çš„ã€‚</p><h4 id="ä¼˜åŒ–ç®—æ³•">ä¼˜åŒ–ç®—æ³•</h4><p>éšåï¼Œä½¿ç”¨æ›´å¤šçš„ä¼˜åŒ–ç®—æ³•æ¥åŠ é€Ÿè®­ç»ƒç½‘ç»œçš„æ”¶æ•›ï¼Œæé«˜å»å™ªæ€§èƒ½</p><ul><li>æœ€å¤§ç†µå’ŒåŸå¯¹å¶La-grangianä¹˜æ€§å› å­ç›¸ç»“åˆæ¥<strong>å¢å¼ºç¥ç»ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›</strong>ï¼›</li><li>å°†è´ªå©ªç®—æ³•å’Œå¼‚æ­¥ç®—æ³•åº”ç”¨åˆ°ç¥ç»ç½‘ç»œä¸­ï¼Œè®¾è®¡äº†ä¸€ç§æ–°çš„ç½‘ç»œç»“æ„ï¼Œé€šè¿‡å¢åŠ æ·±åº¦æˆ–æ”¹å˜æ¿€æ´»å‡½æ•°æ¥æ¶ˆé™¤å™ªå£°æ¥<strong>æƒè¡¡é€Ÿåº¦å’Œæ•ˆæœ</strong>ï¼›</li><li>CENNsä¸»è¦åˆ©ç”¨å¸¦æœ‰æ¨¡æ¿çš„èŠ‚ç‚¹æ¥æ±‚å–å¹³å‡å‡½æ•°ï¼Œæœ‰æ•ˆåœ°æŠ‘åˆ¶å™ªå£°ã€‚ä½†éœ€è¦æ‰‹åŠ¨è®¾ç½®æ¨¡æ¿å‚æ•°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‘å±•äº†<strong>æ¢¯åº¦ä¸‹é™æ³•</strong>ã€‚</li></ul><h5 id="ç¼ºç‚¹-2">ç¼ºç‚¹</h5><p>ç½‘ç»œä¸å…è®¸æ·»åŠ æ–°çš„æ’ä»¶ï¼Œè¿™é™åˆ¶äº†å®ƒä»¬åœ¨ç°å®ä¸–ç•Œä¸­çš„åº”ç”¨</p><h4 id="å·ç§¯ç¥ç»ç½‘ç»œ">å·ç§¯ç¥ç»ç½‘ç»œ</h4><h5 id="ç“¶é¢ˆ">ç“¶é¢ˆ</h5><ol><li>æ·±å±‚CNNä¼šäº§ç”Ÿæ¶ˆå¤±çš„æ¢¯åº¦ã€‚</li><li>æ¿€æ´»å‡½æ•°å¦‚Sigmoidå’Œtanhå¯¼è‡´è¾ƒé«˜çš„è®¡ç®—æˆæœ¬ã€‚</li><li>ç¡¬ä»¶å¹³å°ä¸æ”¯æŒå¤æ‚ç½‘ç»œã€‚</li></ol><h5 id="è½¬æŠ˜">è½¬æŠ˜</h5><p>åœ¨2012å¹´å‘ç”Ÿäº†å˜åŒ–ï¼ŒAlexNetåœ¨å½“å¹´çš„ImageNetå¤§è§„æ¨¡è§†è§‰è¯†åˆ«æŒ‘æˆ˜(ILSVRC)ã€‚æ­¤åï¼Œæ·±åº¦ç½‘ç»œç»“æ„(å¦‚VGGå’ŒGoogLeNet)è¢«å¹¿æ³›åº”ç”¨äºå›¾åƒã€è§†é¢‘ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œè¯­éŸ³å¤„ç†ç­‰é¢†åŸŸï¼Œå°¤å…¶æ˜¯ä½çº§è®¡ç®—æœºè§†è§‰ã€‚</p><h5 id="å¼•å…¥å›¾åƒå»å™ª">å¼•å…¥å›¾åƒå»å™ª</h5><p>æ·±åº¦ç½‘ç»œåœ¨2015å¹´é¦–æ¬¡åº”ç”¨äºå›¾åƒå»å™ªã€‚æ‰€æå‡ºçš„ç½‘ç»œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ç”¨äºæ¶ˆé™¤å™ªå£°çš„å‚æ•°ã€‚æ­¤åï¼Œæ·±åº¦ç½‘ç»œè¢«å¹¿æ³›åº”ç”¨äºè¯­éŸ³ã€è§†é¢‘å’Œå›¾åƒæ¢å¤ã€‚</p><p>é‡‡ç”¨å¤šæ¬¡å·ç§¯å’Œåå·ç§¯çš„æ–¹æ³•æŠ‘åˆ¶å™ªå£°ï¼Œæ¢å¤é«˜åˆ†è¾¨ç‡å›¾åƒã€‚ä¸ºäº†é€šè¿‡æ¨¡å‹å¤„ç†å¤šä¸ªä½å±‚ä»»åŠ¡ï¼Œæå‡ºäº†ä¸€ç§ç”±å·ç§¯ã€æ‰¹å½’ä¸€åŒ–(BN)ã€æ ¡æ­£çº¿æ€§å•å…ƒ(RELU)å’Œæ®‹å·®å­¦ä¹ (RL)ç»„æˆçš„å»å™ªCNN(DnCNN)æ¥å¤„ç†å›¾åƒå»å™ªã€è¶…åˆ†è¾¨ç‡å’ŒJPEGå›¾åƒå»å—ã€‚è€ƒè™‘åˆ°å»å™ªæ€§èƒ½å’Œé€Ÿåº¦çš„æŠ˜è¡·ã€‚</p><h6 id="å½©è‰²å›¾åƒå™ªå£°">å½©è‰²å›¾åƒå™ªå£°</h6><p>å½©è‰²éå±€éƒ¨ç½‘ç»œ(CNLNet)å°†éå±€éƒ¨è‡ªç›¸ä¼¼æ€§(NLSS)å’ŒCNNç›¸ç»“åˆï¼Œæœ‰æ•ˆåœ°å»é™¤äº†å½©è‰²å›¾åƒå™ªå£°ã€‚</p><p>DnCNNï¼š<a href="https://readpaper.com/paper/2508457857">https://readpaper.com/paper/2508457857</a> ï¼ˆ2017å¹´å‘è¡¨ï¼Œ3793è¢«å¼•ç”¨ï¼‰</p><p>CNLNetï¼š<a href="https://readpaper.com/paper/2550616896%EF%BC%882016%E5%B9%B4%E5%8F%91%E8%A1%A8%EF%BC%8C9%E8%A2%AB%E5%BC%95%E7%94%A8%EF%BC%89">https://readpaper.com/paper/2550616896ï¼ˆ2016å¹´å‘è¡¨ï¼Œ9è¢«å¼•ç”¨ï¼‰</a></p><h5 id="blind-denoising">blind denoising</h5><p>ä¸€ç§å¿«é€Ÿçµæ´»çš„å»å™ªCNN(FFDNet)æå‡ºäº†ä¸åŒçš„å™ªå£°æ°´å¹³ï¼Œå¹¶å°†å«å™ªå›¾åƒå—ä½œä¸ºå»å™ªç½‘ç»œçš„è¾“å…¥ï¼Œä»¥æé«˜å»å™ªé€Ÿåº¦ï¼Œ<strong>è¿›è¡Œblindå»å™ª</strong>ã€‚</p><h6 id="ä¸æˆå¯¹çš„å™ªå£°å›¾åƒ">ä¸æˆå¯¹çš„å™ªå£°å›¾åƒ</h6><ul><li><p>ä¸ºäº†å¤„ç†ä¸æˆå¯¹çš„å™ªå£°å›¾åƒï¼Œç”Ÿæˆå¯¹æŠ—ç½‘ç»œ(GAN)CNNç›²å»å™ªå™¨(GCBD)è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå®ƒé¦–å…ˆç”Ÿæˆground-truthï¼Œç„¶åå°†è·å¾—çš„ground-truthè¾“å…¥åˆ°GANä¸­è®­ç»ƒå»å™ªå™¨ã€‚</p></li><li><p>å·ç§¯ç›²å»å™ªç½‘ç»œ(CBDNet)é€šè¿‡ä¸¤ä¸ªå­ç½‘ç»œæ¥å»é™¤ç»™å®šçš„çœŸå®å™ªå£°å›¾åƒä¸­çš„å™ªå£°ï¼Œå…¶ä¸­ä¸€ä¸ªå­ç½‘ç»œè´Ÿè´£ä¼°è®¡çœŸå®å«å™ªå›¾åƒçš„å™ªå£°ï¼Œå¦ä¸€ä¸ªå­ç½‘ç»œè´Ÿè´£è·å–æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚</p></li><li><p>å¯¹äºæ›´å¤æ‚çš„å—æ±¡æŸ“å›¾åƒï¼Œå‘å±•äº†ä¸€ç§æ·±åº¦å³æ’å³ç”¨è¶…åˆ†è¾¨ç‡(DPSR)æ–¹æ³•æ¥ä¼°è®¡æ¨¡ç³Škenelå’Œå™ªå£°ï¼Œå¹¶æ¢å¤é«˜åˆ†è¾¨ç‡å›¾åƒã€‚</p></li></ul><p>FFDNetï¼š<a href="https://readpaper.com/paper/2764207251">https://readpaper.com/paper/2764207251</a> ï¼ˆ2018å¹´å‘è¡¨ 899è¢«å¼•ç”¨ï¼‰</p><p>GCBDï¼š<a href="https://readpaper.com/paper/2798278116">https://readpaper.com/paper/2798278116</a> ï¼ˆ2018å¹´å‘è¡¨ 294è¢«å¼•ç”¨ï¼‰</p><p>CBDNetï¼š<a href="https://readpaper.com/paper/2832157980">https://readpaper.com/paper/2832157980</a> ï¼ˆ2018å¹´å‘è¡¨ 9è¢«å¼•ç”¨ï¼‰</p><p>DPSRï¼š<a href="https://readpaper.com/paper/2929525177">https://readpaper.com/paper/2929525177</a> ï¼ˆ2019å¹´å‘è¡¨ 0è¢«å¼•ç”¨ï¼‰</p><h4 id="è®ºæ–‡ç»„ç»‡">è®ºæ–‡ç»„ç»‡</h4><ul><li><p>ç¬¬äºŒéƒ¨åˆ†è®¨è®ºäº†æµè¡Œçš„å›¾åƒåº”ç”¨çš„æ·±åº¦å­¦ä¹ æ¡†æ¶;(<a href="#%E5%8E%BB%E5%99%AA%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6">Fundamental frameworks of deep learning methods for image denoising</a>)</p></li><li><p>ç¬¬ä¸‰éƒ¨åˆ†ä»‹ç»äº†æ·±åº¦å­¦ä¹ åœ¨å›¾åƒå»å™ªä¸­çš„ä¸»è¦åˆ†ç±»ï¼Œå¹¶å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œäº†æ¯”è¾ƒåˆ†æ;(<a href="#%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF%E5%9C%A8%E5%9B%BE%E5%83%8F%E5%8E%BB%E5%99%AA%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">Deep learning techniques in image denoising</a>)</p></li><li><p>ç¬¬å››èŠ‚æä¾›äº†è¿™äº›å»å™ªæ–¹æ³•çš„æ€§èƒ½æ¯”è¾ƒ;(Experimental results)</p></li><li><p>ç¬¬äº”èŠ‚è®¨è®ºäº†ä»ç„¶å­˜åœ¨çš„æŒ‘æˆ˜å’Œæ½œåœ¨çš„ç ”ç©¶æ–¹å‘;(Discussion)</p></li><li><p>ç¬¬å…­èŠ‚ç»™å‡ºäº†ä½œè€…çš„ç»“è®º;(<a href="#%E7%BB%93%E8%AE%BA">Conclusion</a>)</p></li></ul><h2 id="å»å™ªåŸºç¡€æ¡†æ¶">å»å™ªåŸºç¡€æ¡†æ¶</h2><p>è¿™ä¸€éƒ¨åˆ†è®¨è®ºæ·±åº¦å­¦ä¹ ï¼ŒåŒ…æ‹¬å®ƒèƒŒåçš„æ€æƒ³ã€ä¸»è¦çš„ç½‘ç»œæ¡†æ¶(æŠ€æœ¯)ä»¥åŠç¡¬ä»¶å’Œè½¯ä»¶ï¼Œè¿™æ˜¯æœ¬è°ƒæŸ¥æ¶µç›–çš„æ·±å…¥å­¦ä¹ å›¾åƒå»å™ªæŠ€æœ¯çš„åŸºç¡€ã€‚</p><h3 id="æœºå™¨å­¦ä¹ ">æœºå™¨å­¦ä¹ </h3><p>æœºå™¨å­¦ä¹ æ–¹æ³•åˆ†ä¸ºç›‘ç£å­¦ä¹ æ–¹æ³•ã€åŠç›‘ç£å­¦ä¹ æ–¹æ³•å’Œéç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p><ul><li><p>æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•ä½¿ç”¨ç»™å®šçš„æ ‡ç­¾ä½¿è·å¾—çš„ç‰¹å¾æ›´æ¥è¿‘ç›®æ ‡ï¼Œä»¥ä¾¿å­¦ä¹ å‚æ•°å’Œè®­ç»ƒå»å™ªæ¨¡å‹ã€‚<br>$$<br>y=x+\mu \<br>x:å¹²å‡€å›¾åƒï¼Œy:å™ªå£°å›¾åƒï¼Œ\muï¼šæ ‡å‡†å·®ä¸º\sigmaçš„AWGN<br>$$</p><ul><li>é€šè¿‡ä¸Šè¿°å…¬å¼å’Œè´å¶æ–¯çŸ¥è¯†ï¼Œå­¦ä¹ é™å™ªæ¨¡å‹çš„å‚æ•°ä¾èµ–äºé…å¯¹${x_k,y_k}^N_{k=1}$ï¼Œ$x_k$å’Œ$y_k$åˆ†åˆ«ä»£è¡¨ç¬¬kä¸ªå¹²å‡€å›¾åƒå’Œå™ªå£°å›¾åƒï¼ŒNæ˜¯æ€»æ•°ã€‚å¤„ç†å¯ä»¥è¡¨ç¤ºä¸º$x_k=f(y_k,\theta,m)ï¼Œå…¶ä¸­\thetaæ˜¯å‚æ•°ï¼Œmæ˜¯ç»™å®šçš„å™ªå£°ç­‰çº§$ã€‚</li></ul></li><li><p>æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ä½¿ç”¨ç»™å®šçš„è®­ç»ƒæ ·æœ¬ï¼Œå¯»æ‰¾patternï¼ˆè€Œä¸æ˜¯æ ‡ç­¾åŒ¹é…ï¼‰ï¼Œå¹¶å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œè¯¸å¦‚å¯¹çœŸå®çš„ä½åˆ†è¾¨ç‡å›¾åƒè¿›è¡Œè§£é…å¯¹ã€‚æœ€è¿‘æå‡ºçš„å¾ªç¯å†…å¾ªç¯GaN(CinCGAN)ç®—æ³•é¦–å…ˆä¼°è®¡é«˜åˆ†è¾¨ç‡å›¾åƒä½œä¸ºæ ‡ç­¾ï¼Œç„¶ååˆ©ç”¨è·å¾—çš„æ ‡ç­¾å’ŒæŸå¤±å‡½æ•°è®­ç»ƒè¶…åˆ†è¾¨ç‡æ¨¡å‹ã€‚</p></li><li><p>åŠç›‘ç£å­¦ä¹ æ–¹æ³•å°†ç»™å®šæ•°æ®åˆ†å¸ƒä¸­çš„æ¨¡å‹åº”ç”¨äºæ„å»ºå­¦ä¹ å™¨æ¥æ ‡è®°æœªæ ‡è®°çš„æ ·æœ¬ã€‚<strong>è¿™ç§æœºåˆ¶åœ¨å°æ ·æœ¬ä»»åŠ¡(å¦‚åŒ»å­¦è¯Šæ–­)ä¸­æ›´å—é’ç</strong>ã€‚åŠç›‘ç£å­¦ä¹ <strong>æ­£å¼¦å›¾</strong>æ¢å¤ç½‘ç»œ(SLSR-NET)å¯ä»¥é€šè¿‡ç›‘ç£ç½‘ç»œä»æˆå¯¹çš„æ­£å¼¦å›¾ä¸­å­¦ä¹ ç‰¹å¾åˆ†å¸ƒï¼Œç„¶åé€šè¿‡æ— ç›‘ç£ç½‘ç»œå°†æ‰€è·å¾—çš„ç‰¹å¾åˆ†å¸ƒä»æœªæ ‡è®°çš„ä½å‰‚é‡æ­£å¼¦å›¾è½¬æ¢ä¸ºé«˜ä¿çœŸæ­£å¼¦å›¾ã€‚</p></li></ul><p>æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼š</p><p><strong><a href="https://readpaper.com/paper/2592929672">A survey on deep learning in medical image analysis</a></strong>ï¼ˆ2017å‘è¡¨ 6840è¢«å¼•ç”¨ï¼‰</p><p>A Local Consensus Index Scheme for Random-Valued Impulse Noise Detection Systems ï¼ˆ2021å‘è¡¨ 13è¢«å¼•ç”¨ ï¼‰</p><p><a href="https://readpaper.com/paper/2946875605">Shared Linear Encoder-Based Multikernel Gaussian Process Latent Variable Model for Visual Classification</a> ï¼ˆ2021å‘è¡¨ 10è¢«å¼•ç”¨ ï¼‰</p><p>æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼š</p><p><a href="https://readpaper.com/paper/2605205826">Unsupervised holistic image generation from key local patches</a> ï¼ˆ2018å‘è¡¨ 8è¢«å¼•ç”¨ï¼‰</p><p><a href="https://readpaper.com/paper/2962903125">Unsupervised Image Super-Resolution Using Cycle-in-Cycle Generative Adversarial Networks</a>ï¼ˆ2018å‘è¡¨ 210è¢«å¼•ç”¨ï¼‰</p><p>åŠç›‘ç£å­¦ä¹ æ–¹æ³•ï¼š</p><p><a href="https://readpaper.com/paper/2979557921">Semi-Supervised Learning for Low-Dose CT Image Restoration with Hierarchical Deep Generative Adversarial Network</a> (HD-GAN) ï¼ˆ2019å‘è¡¨ 6è¢«å¼•ç”¨ï¼‰</p><p><a href="https://readpaper.com/paper/3011790227">Semi-supervised learned sinogram restoration network for low-dose CT image reconstruction</a>ï¼ˆ2020å‘è¡¨ 4è¢«å¼•ç”¨ï¼‰</p><h3 id="ç¥ç»ç½‘ç»œ">ç¥ç»ç½‘ç»œ</h3><p>å¦‚æœä¸€ä¸ªç¥ç»ç½‘ç»œçš„å±‚æ•°è¶…è¿‡ä¸‰å±‚ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºæ·±åº¦ç¥ç»ç½‘ç»œï¼Œå †å è‡ªåŠ¨ç¼–ç å™¨(SARS)å’Œæ·±åº¦ä¿¡å¿µç½‘ç»œ(DBN)æ˜¯å…¸å‹çš„æ·±åº¦ç¥ç»ç½‘ç»œã€‚ä»–ä»¬åœ¨æ— ç›‘ç£çš„æƒ…å†µä¸‹ä½¿ç”¨å åŠ å±‚å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå–å¾—äº†è‰¯å¥½çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œè¿™äº›ç½‘ç»œçš„å®ç°å¹¶ä¸ç®€å•ï¼Œéœ€è¦å¤§é‡çš„äººå·¥è®¾ç½®æ‰èƒ½å®ç°æœ€ä½³æ¨¡å‹ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæå‡ºäº†ç«¯åˆ°ç«¯çš„è¿æ¥ç½‘ç»œï¼ˆç‰¹åˆ«æ˜¯CNNï¼‰ã€‚CNNsåœ¨å›¾åƒå¤„ç†ï¼Œç‰¹åˆ«æ˜¯å›¾åƒå»å™ªé¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚</p><h4 id="å·ç§¯ç¥ç»ç½‘ç»œ-2">å·ç§¯ç¥ç»ç½‘ç»œ</h4><h5 id="AlexNet">AlexNet</h5><p>æå‡ºçš„AlexNetæ˜¯æ·±åº¦å­¦ä¹ çš„é‡Œç¨‹ç¢‘ã€‚å®ƒçš„æˆåŠŸæœ‰å‡ ä¸ªåŸå› ã€‚</p><ol><li>å›¾å½¢å¤„ç†å•å…ƒ(GPU)æä¾›äº†å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ã€‚</li><li>éšæœºè£å‰ª(å³ä¸¢å¼ƒ)è§£å†³äº†è¿‡æ‹Ÿåˆé—®é¢˜ï¼›</li><li>Reluæé«˜äº†éšæœºæ¢¯åº¦ä¸‹é™(SGD)çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯Sigmoidã€‚</li><li>æ•°æ®å¢å¼ºæ–¹æ³•è¿›ä¸€æ­¥è§£å†³äº†è¿‡æ‹Ÿåˆé—®é¢˜ã€‚</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>è™½ç„¶AlexNetå–å¾—äº†å¾ˆå¥½çš„æ€§èƒ½ï¼Œä½†ç”±äºå…¶åºå¤§çš„å·ç§¯å†…æ ¸ï¼Œå®ƒéœ€è¦å¤§é‡çš„å†…å­˜ã€‚è¿™é™åˆ¶äº†å®ƒåœ¨ç°å®ä¸–ç•Œä¸­çš„åº”ç”¨ï¼Œæ¯”å¦‚åœ¨æ™ºèƒ½ç›¸æœºä¸­ã€‚åœ¨æ­¤ä¹‹åï¼Œåœ¨2014-2016å¹´é—´ï¼Œä¸ºäº†æé«˜æ€§èƒ½å’Œé™ä½è®¡ç®—æˆæœ¬ï¼Œæ›´å€¾å‘äºé‡‡ç”¨å…·æœ‰å°è¿‡æ»¤å™¨çš„æ›´æ·±å±‚æ¬¡çš„ç½‘ç»œä½“ç³»ç»“æ„ã€‚</p><h5 id="GoogLeNet">GoogLeNet</h5><p>éšç€æ›´æ·±å±‚æ¬¡ç½‘ç»œçš„æˆåŠŸï¼Œç ”ç©¶è½¬å‘å¢åŠ å®ƒä»¬çš„<strong>å®½åº¦</strong>ã€‚GoogLeNetå¢åŠ äº†å®½åº¦ä»¥æé«˜å›¾åƒåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚æ­¤å¤–ï¼ŒGoogLeNetè¿˜å°†ä¸€ä¸ªè¾ƒå¤§çš„å·ç§¯æ ¸å˜æ¢ä¸ºä¸¤ä¸ªè¾ƒå°çš„å·ç§¯æ ¸ï¼Œä»¥å‡å°‘å‚æ•°æ•°é‡å’Œè®¡ç®—é‡ã€‚GoogLeNetè¿˜ä½¿ç”¨äº†Inistationæ¨¡å—å’ŒInceptionæ¨¡å—ã€‚</p><h5 id="ResNet">ResNet</h5><p>VGGå’ŒGoogLeNetæ–¹æ³•å¯¹äºå›¾åƒåº”ç”¨æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒä»¬æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼šå¦‚æœç½‘ç»œå¾ˆæ·±ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸ï¼›ä»¥åŠå¦‚æœç½‘ç»œå¾ˆæ·±ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸ï¼›å¦‚æœç½‘ç»œè¿‡å®½ï¼Œå¯èƒ½ä¼šå‡ºç°è¿‡åº¦æ‹Ÿåˆçš„ç°è±¡ã€‚</p><p>ä¸ºäº†å…‹æœè¿™äº›é—®é¢˜ï¼Œ2016å¹´æå‡ºResnetã€‚æ¯ä¸ªblocké€šè¿‡åœ¨ResNetä¸­åŠ å…¥æ®‹å·®å­¦ä¹ æ“ä½œæ¥æé«˜å›¾åƒè¯†åˆ«æ€§èƒ½ã€‚</p><h4 id="æ€»ç»“">æ€»ç»“</h4><p>è‡ª2014å¹´ä»¥æ¥ï¼Œæ·±åº¦ç½‘ç»œå·²å¹¿æ³›åº”ç”¨äºçœŸå®ä¸–ç•Œçš„å›¾åƒåº”ç”¨ï¼Œä¾‹å¦‚é¢éƒ¨è¯†åˆ«å’ŒåŒ»ç–—è¯Šæ–­ã€‚</p><p>ç„¶è€Œï¼Œåœ¨è®¸å¤šåº”ç”¨ä¸­ï¼Œæ•è·çš„å›¾åƒ(ä¾‹å¦‚çœŸå®çš„å™ªå£°å›¾åƒ)æ˜¯ä¸å¤Ÿçš„ï¼Œå¹¶ä¸”æ·±å±‚CNNåœ¨å›¾åƒåº”ç”¨ä¸­çš„æ€§èƒ½å¾€å¾€å¾ˆå·®ã€‚ä¸ºæ­¤ï¼ŒGansåº”è¿è€Œç”Ÿã€‚GANSç”±ä¸¤ä¸ªç½‘ç»œç»„æˆï¼šç”Ÿæˆæ€§ç½‘ç»œå’Œé‰´åˆ«æ€§ç½‘ç»œã€‚äº§ç”Ÿå¼ç½‘ç»œ(ä¹Ÿç§°ä¸ºç”Ÿæˆå™¨)ç”¨äºæ ¹æ®è¾“å…¥æ ·æœ¬ç”Ÿæˆæ ·æœ¬ã€‚åˆ¤åˆ«ç½‘ç»œ(ä¹Ÿç§°ä¸ºé‰´åˆ«å™¨)ç”¨äºåˆ¤æ–­è¾“å…¥æ ·æœ¬å’Œç”Ÿæˆæ ·æœ¬çš„çœŸå®æ€§ã€‚è¿™ä¸¤ä¸ªç½‘ç»œæ˜¯å¯¹æŠ—æ€§çš„ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœé‰´åˆ«å™¨èƒ½å¤Ÿå‡†ç¡®åŒºåˆ†çœŸå®æ ·æœ¬å¹¶ä»ç”Ÿæˆå™¨ç”Ÿæˆæ ·æœ¬ï¼Œåˆ™è®¤ä¸ºè®­ç»ƒçš„æ¨¡å‹å·²å®Œæˆã€‚å›¾6ä¸­å¯ä»¥çœ‹åˆ°GaNçš„ç½‘ç»œç»“æ„ã€‚ç”±äºå…¶æ„å»ºè¡¥å……è®­ç»ƒæ ·æœ¬çš„èƒ½åŠ›ï¼ŒGaNå¯¹äºå°æ ·æœ¬ä»»åŠ¡éå¸¸æœ‰æ•ˆï¼Œä¾‹å¦‚é¢éƒ¨è¯†åˆ«å’Œå¤æ‚å™ªå£°å›¾åƒå»å™ªã€‚è¿™äº›CNNæ˜¯å›¾åƒå»å™ªçš„åŸºæœ¬ç½‘ç»œã€‚</p><h3 id="è½¯ç¡¬ä»¶ä½¿ç”¨">è½¯ç¡¬ä»¶ä½¿ç”¨</h3><h4 id="ç¡¬ä»¶">ç¡¬ä»¶</h4><p>æ·±åº¦å­¦ä¹ æˆåŠŸçš„ä¸€ä¸ªåŸå› æ˜¯GPUã€‚GPUé‡‡ç”¨CUDAã€OpenCLå’ŒcuDNNå¹³å°ï¼Œå¢å¼ºäº†å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œé€Ÿåº¦æ¯”CPUå¿«10~30å€ã€‚GPUç”±NVIDIAæ˜¾å¡(å³GTX 680ã€GTX 980ã€GTX 1070ã€GTX 1070Tiã€GTX1080ã€GTX 1080Tiã€RTX2070ã€RTX 2080ã€RTX 2080Tiã€Tesla K40cã€Tesla K80ã€Quadro M6000ã€Quadro GP100ã€QuadroP6000å’ŒTesla V100)å’ŒAMD(å³Radeon Vega 64)ç»„æˆã€‚</p><h4 id="è½¯ä»¶">è½¯ä»¶</h4><p>æ·±åº¦å­¦ä¹ è½¯ä»¶å¯ä»¥æä¾›è°ƒç”¨GPUçš„æ¥å£ã€‚ç›®å‰æµè¡Œçš„è½¯ä»¶åŒ…æœ‰ï¼š</p><p>(1) åŸºäºC<ins>çš„Caffeï¼Œæä¾›C</ins>ã€Pythonå’ŒMatlabæ¥å£ï¼Œæ—¢å¯ä»¥åœ¨CPUä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨GPUä¸Šè¿è¡Œã€‚å®ƒè¢«å¹¿æ³›ç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚ç„¶è€Œï¼Œå®ƒè¦æ±‚å¼€å‘äººå‘˜æŒæ¡C++ã€‚</p><p>(2) Theanoæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å¤§è§„æ¨¡ç¥ç»ç½‘ç»œçš„æ•°å­¦è¡¨è¾¾å¼ç¼–è¯‘å™¨ã€‚Theanoæä¾›äº†Pythonæ¥å£ï¼Œç”¨äºå›¾åƒçš„è¶…åˆ†è¾¨ç‡ã€å»å™ªå’Œåˆ†ç±»ã€‚</p><p>(3) MatConvernetæä¾›äº†Matlabæ¥å£ã€‚å®ƒå¯ç”¨äºå›¾åƒåˆ†ç±»ã€å»å™ªå’Œè¶…åˆ†è¾¨ç‡ï¼Œä»¥åŠè§†é¢‘è·Ÿè¸ªã€‚ä½†è¿™éœ€è¦æŒæ¡Matlabã€‚</p><p>(4) TensorFlowæ˜¯ä¸€ä¸ªç›¸å¯¹é«˜é˜¶çš„æœºå™¨å­¦ä¹ åº“ã€‚å®ƒæ¯”Theanoforç¼–è¯‘é€Ÿåº¦æ›´å¿«ã€‚TensorFlowæä¾›C++å’ŒPythonæ¥å£ï¼Œç”¨äºç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†ç±»ã€å»å™ªå’Œè¶…åˆ†è¾¨ç‡ã€‚</p><p>(5) åŸºäºTensorFlowå’ŒTheanoçš„KERASåœ¨Pythonä¸­å®ç°ï¼Œå¹¶æä¾›Pythonæ¥å£ã€‚å®ƒå¯ä»¥ç”¨äºå›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†è¾¨ç‡ã€å›¾åƒå»å™ªå’ŒåŠ¨ä½œè¯†åˆ«ã€‚</p><p>(6) PyTorchæ˜¯ç”¨Pythonå®ç°çš„ï¼Œå¹¶æä¾›äº†Pythonæ¥å£ã€‚å®ƒåº”ç”¨äºå›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²ã€åŠ¨ä½œè¯†åˆ«ã€å›¾åƒè¶…åˆ†è¾¨ç‡ã€å›¾åƒå»å™ªå’Œè§†é¢‘è·Ÿè¸ªã€‚</p><h2 id="æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨å›¾åƒå»å™ªä¸­çš„åº”ç”¨">æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨å›¾åƒå»å™ªä¸­çš„åº”ç”¨</h2><h3 id="åŠ æ€§ç™½å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯">åŠ æ€§ç™½å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯</h3><p>ç”±äºçœŸå®å™ªå£°å›¾åƒçš„ä¸è¶³ï¼ŒåŠ æ€§ç™½å™ªå£°å›¾åƒ(AWNI)è¢«å¹¿æ³›ç”¨äºè®­ç»ƒå»å™ªæ¨¡å‹ã€‚AWNIåŒ…æ‹¬é«˜æ–¯ã€æ³Šæ¾ã€æ¤’ç›ã€èƒ¡æ¤’å’Œä¹˜æ€§å™ªå£°å›¾åƒã€‚ç”¨äºAWNIå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯æœ‰å‡ ç§ï¼ŒåŒ…æ‹¬CNN/NNã€CNN/NNä¸æ™®é€šç‰¹å¾æå–æ–¹æ³•çš„ç»“åˆä»¥åŠä¼˜åŒ–æ–¹æ³•ä¸CNN/NNçš„ç»“åˆã€‚</p><h4 id="CNN-NN-åœ¨AWNIå»å™ªä¸­çš„åº”ç”¨">CNN/NN åœ¨AWNIå»å™ªä¸­çš„åº”ç”¨</h4><p>è‡ªåŠ¨ç‰¹å¾æå–æ–¹æ³•å¯ä»¥åœ¨é™ä½å›¾åƒåº”ç”¨çš„è®¡ç®—æˆæœ¬æ–¹é¢å‘æŒ¥é‡è¦ä½œç”¨ã€‚ä¸ºæ­¤ï¼Œå·²å¼€å‘å‡ºç”¨äºå›¾åƒå»å™ªçš„CNNï¼ŒZhangæå‡ºDnCNNæ¥è§£å†³å¤šä¸ªä½çº§è§†è§‰ä»»åŠ¡ï¼Œå³é€šè¿‡CNNçš„å›¾åƒå»å™ªã€è¶…åˆ†è¾¨ç‡å’Œå»å—ã€æ‰¹å½’ä¸€åŒ–å’Œæ®‹å·®å­¦ä¹ æŠ€æœ¯ã€‚Wangç­‰äººè¿˜æå‡ºäº†ç”¨äºå›¾åƒå»å™ªçš„æ›´æ·±å±‚CNNçš„æ®‹å·®å­¦ä¹ ã€‚ç„¶è€Œï¼Œæ›´æ·±å±‚çš„CNNæŠ€æœ¯ä¾èµ–äºæ›´æ·±çš„å±‚ï¼Œè€Œä¸æ˜¯æµ…å±‚ï¼Œè¿™å¯¼è‡´äº†é•¿æœŸçš„ä¾èµ–é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäººä»¬æå‡ºäº†å‡ ç§åŸºäºä¿¡å·çš„æ–¹æ³•ã€‚Tai æå‡ºåˆ©ç”¨é€’å½’å’Œé—¨å•å…ƒè‡ªé€‚åº”åœ°æŒ–æ˜æ›´ç²¾ç¡®çš„ç‰¹å¾å¹¶æ¢å¤æ¸…æ™°çš„å›¾åƒã€‚å—ä½é˜¶HankelçŸ©é˜µçš„å¯å‘ï¼ŒYe et alæä¾›äº†å·ç§¯æ¡†æ¶ï¼Œé€šè¿‡å·ç§¯å±€éƒ¨åŸºå’Œéå±€éƒ¨åŸºæ¥è§£é‡Šä¿¡å·å¤„ç†å’Œæ·±åº¦å­¦ä¹ ä¹‹é—´çš„è”ç³»ã€‚ä¸ºäº†è§£å†³ä¸å……åˆ†çš„å™ªå£°å›¾åƒ(å³é«˜å…‰è°±å›¾åƒå’ŒåŒ»å­¦å›¾åƒ)ï¼Œæœ€è¿‘çš„ä¸€äº›å·¥ä½œè¯•å›¾é€šè¿‡ä½¿ç”¨æ”¹è¿›çš„CNNæ¥æå–æ›´å¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œè¢ç­‰äººå°†æ·±åº¦CNNã€æ®‹å·®å­¦ä¹ å’Œå¤šå°ºåº¦çŸ¥è¯†ç›¸ç»“åˆï¼Œå¯¹é«˜å…‰è°±å™ªå£°å›¾åƒè¿›è¡Œå»å™ªå¤„ç†ã€‚ç„¶è€Œï¼Œè¿™äº›å»ºè®®çš„CNNå¯¼è‡´äº†è®¡ç®—æˆæœ¬å’Œå†…å­˜æ¶ˆè€—çš„å¢åŠ ï¼Œè¿™ä¸åˆ©äºç°å®ä¸–ç•Œçš„åº”ç”¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç°è±¡ï¼ŒGholizadehç­‰äººåœ¨ä¸å¢åŠ CTå›¾åƒå»å™ªæˆæœ¬çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨è†¨èƒ€å·ç§¯æ¥æ‰©å¤§æ¥æ”¶èŒƒå›´å’Œå‡å°ç½‘ç»œæ·±åº¦ã€‚Lianç­‰äººæå‡ºäº†ä¸€ç§åŸºäºå¤šå°ºåº¦äº¤å‰è·¯å¾„çº§è”çš„æ®‹å·®ç½‘ç»œæ¥æŠ‘åˆ¶å™ªå£°ã€‚ä¸Šè¿°æ–¹æ³•å¤§å¤šä¾èµ–äºæ”¹è¿›çš„CNNæ¥å¤„ç†å™ªå£°ã€‚å› æ­¤ï¼Œè®¾è®¡ç½‘ç»œæ¶æ„å¯¹äºå›¾åƒå»å™ªéå¸¸é‡è¦ã€‚</p><p>æ”¹å˜ç½‘ç»œæ¶æ„åŒ…å«ä¸‹åˆ—æ–¹æ³•ï¼š</p><ul><li>ä»ä¸€ä¸ªCNNçš„å¤šä¸ªè¾“å…¥èåˆç‰¹å¾<ul><li>åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒéƒ¨åˆ†ä½œä¸ºè¾“å…¥</li><li>åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒè§†è§’ä½œä¸ºè¾“å…¥</li><li>åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒé€šé“ä½œä¸ºè¾“å…¥</li></ul></li><li>æ”¹å˜æŸå¤±å‡½æ•°â€”â€”æ ¹æ®è‡ªç„¶å›¾åƒçš„ç‰¹å¾è®¾è®¡ä¸åŒçš„æŸå¤±å‡½æ•°æå–æ›´é²æ£’çš„ç‰¹å¾<ul><li>Chen et al. [34]ç»“åˆæ¬§å¼å’Œæ„ŸçŸ¥æŸå¤±å‡½æ•°æŒ–æ˜æ›´å¤šè¾¹ç¼˜ä¿¡æ¯</li></ul></li><li>æå‡CNNçš„æ·±åº¦æˆ–å®½åº¦<ul><li>å¢åŠ ç½‘ç»œæ·±åº¦</li><li>å¢åŠ ç½‘ç»œå®½åº¦</li></ul></li><li>å¢åŠ ä¸€äº›è¾…åŠ©æ’ä»¶<ul><li>æ¿€æ´»å‡½æ•°</li><li>æ‰©å¼ å·ç§¯</li><li>å…¨è¿æ¥å±‚</li><li>æ± åŒ–</li></ul></li><li>å¼•å…¥è·³è¿æˆ–è€…çº§è”æ“ä½œ<ul><li>skip connection</li><li>cascade operation</li></ul></li></ul><p>å…·ä½“åœ°è¯´ï¼Œ</p><ol><li>ç¬¬ä¸€ç§æ–¹æ³•åŒ…æ‹¬ä¸‰ç§ç±»å‹ï¼šä¸€ä¸ªæ ·æœ¬çš„ä¸åŒéƒ¨åˆ†ä½œä¸ºæ¥è‡ªä¸åŒç½‘ç»œçš„å¤šä¸ªè¾“å…¥ï¼›ä¸€ä¸ªæ ·æœ¬ä½œä¸ºè¾“å…¥çš„ä¸åŒè§†è§’ï¼Œä¾‹å¦‚å¤šå°ºåº¦ï¼›ä»¥åŠCNNçš„ä¸åŒé¢‘é“ä½œä¸ºè¾“å…¥ã€‚</li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯æ ¹æ®è‡ªç„¶å›¾åƒçš„ç‰¹ç‚¹è®¾è®¡ä¸åŒçš„æŸå¤±å‡½æ•°ï¼Œä»¥æå–æ›´ç¨³å¥çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼ŒChenç­‰äººè”åˆEU-CLIEDINEå‡½æ•°å’Œæ„ŸçŸ¥æŸå¤±å‡½æ•°ï¼ŒæŒ–æ˜æ›´å¤šçš„è¾¹ç¼˜ä¿¡æ¯ï¼Œç”¨äºå›¾åƒå»å™ªã€‚</li><li>ç¬¬ä¸‰ç§æ–¹æ³•é€šè¿‡å¢åŠ ç½‘ç»œçš„æ·±åº¦æˆ–å®½åº¦æ¥å¢å¤§æ¥æ”¶é‡çš„å¤§å°ä»¥æé«˜å»å™ªæ€§èƒ½ã€‚</li><li>ç¬¬å››ç§æ–¹æ³•åˆ©ç”¨æ’ä»¶ï¼Œå¦‚æ¿€æ´»å‡½æ•°ã€è†¨èƒ€å·ç§¯ã€å…¨è¿æ¥å±‚å’Œåˆå¹¶æ“ä½œæ¥å¢å¼ºCNNçš„è¡¨è¾¾èƒ½åŠ›ã€‚</li><li>ç¬¬äº”ç§æ–¹æ³•åˆ©ç”¨è·³è·ƒè¿æ¥æˆ–çº§è”æ“ä½œæ¥ä¸ºCNNä¸­çš„æ·±å±‚æä¾›è¡¥å……ä¿¡æ¯ã€‚</li></ol><p>è¡¨1æä¾›äº†ç”¨äºAWNIå»å™ªçš„CNNçš„æ¦‚è¿°ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_1.png" alt=""></p><h4 id="CNN-NNå’Œå¸¸ç”¨ç‰¹å¾æå–çš„AWNIçš„å»å™ªæ–¹æ³•">CNN/NNå’Œå¸¸ç”¨ç‰¹å¾æå–çš„AWNIçš„å»å™ªæ–¹æ³•</h4><p>ç‰¹å¾æå–åœ¨å›¾åƒå¤„ç†ä¸­ç”¨æ¥è¡¨ç¤ºæ•´å¹…å›¾åƒï¼Œå¯¹æœºå™¨å­¦ä¹ éå¸¸é‡è¦ã€‚ç„¶è€Œï¼Œç”±äºæ·±åº¦å­¦ä¹ æŠ€æœ¯æ˜¯é»‘ç›’æŠ€æœ¯ï¼Œå®ƒä»¬ä¸å…è®¸é€‰æ‹©ç‰¹å¾ï¼Œå› æ­¤ä¸èƒ½ä¿è¯æ‰€è·å¾—çš„ç‰¹å¾æ˜¯æœ€å¥å£®çš„ã€‚å—é—®é¢˜çš„å¯å‘ï¼Œ<strong>ç ”ç©¶äº†å°†å¸¸ç”¨ç‰¹å¾æå–æ–¹æ³•åµŒå…¥åˆ°ç¥ç»ç½‘ç»œä¸­</strong>ï¼Œä»¥è¾¾åˆ°å›¾åƒå»å™ªçš„ç›®çš„ã€‚ä»–ä»¬è¿™æ ·åšçš„åŸå› æœ‰äº”ä¸ªï¼š</p><ol><li>å¼±è¾¹ç¼˜ä¿¡æ¯å™ªå£°å›¾åƒ</li><li>éçº¿æ€§å™ªå£°å›¾åƒ</li><li>é«˜ç»´å™ªå£°å›¾åƒ</li><li>ä¸æ˜¾è‘—å™ªå£°å›¾åƒï¼Œ</li><li>è¾ƒé«˜çš„è®¡ç®—ä»£ä»·ã€‚</li></ol><ul><li><p>å¯¹äºå¼±è¾¹ç¼˜ä¿¡æ¯å™ªå£°å›¾åƒï¼Œå…³ç­‰äººæå‡ºäº†åŸºäºå˜æ¢åŸŸçš„CNNæ–¹æ³•ã€‚ç„¶è€Œï¼Œå®ƒä»¬åœ¨æ¶ˆé™¤å™ªéŸ³æ–¹é¢å¹¶ä¸æœ‰æ•ˆã€‚å…·ä½“åœ°è¯´ï¼Œåœ¨æ–‡çŒ®<strong>Multi-level Wavelet-CNN for Image Restoration</strong>ä¸­ï¼Œæå‡ºçš„æ–¹æ³•ä½¿ç”¨å°æ³¢æ–¹æ³•å’ŒU-ç½‘æ¥æ¶ˆé™¤è†¨èƒ€å·ç§¯çš„ç½‘æ ¼æ•ˆåº”ï¼Œä»¥æ‰©å¤§å›¾åƒæ¢å¤çš„æ¥æ”¶èŒƒå›´ã€‚</p></li><li><p>å¯¹äºéçº¿æ€§å™ªå£°å›¾åƒï¼Œå¸¦æœ‰æ ¸æ–¹æ³•çš„CNNè¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚è¿™äº›æ–¹æ³•ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥ä½¿ç”¨CNNè¿›è¡Œç‰¹å¾æå–ã€‚ç¬¬äºŒæ­¥åˆ©ç”¨æ ¸æ–¹æ³•å°†å¾—åˆ°çš„éçº¿æ€§ç‰¹å¾è½¬åŒ–ä¸ºçº¿æ€§ç‰¹å¾ã€‚ç¬¬ä¸‰æ­¥åˆ©ç”¨æ®‹å·®å­¦ä¹ æ„é€ æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚</p></li><li><p>å¯¹äºé«˜ç»´å™ªå£°å›¾åƒï¼Œæå‡ºäº†CNNä¸é™ç»´ç›¸ç»“åˆçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼ŒKhawç­‰äººé‡‡ç”¨åŸºäºä¸»æˆåˆ†åˆ†æ(PCA)çš„ç»†èƒç¥ç»ç½‘ç»œ(CNN)è¿›è¡Œå›¾åƒå»å™ªã€‚è¿™åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥é‡‡ç”¨å·ç§¯è¿ç®—æå–ç‰¹å¾ã€‚ç¬¬äºŒæ­¥åˆ©ç”¨ä¸»æˆåˆ†åˆ†æå¯¹æ‰€è·å¾—çš„ç‰¹å¾è¿›è¡Œé™ç»´ã€‚ç¬¬ä¸‰æ­¥é‡‡ç”¨å·ç§¯çš„æ–¹æ³•å¯¹PCAå¾—åˆ°çš„ç‰¹å¾è¿›è¡Œå¤„ç†ï¼Œé‡å»ºå‡ºå¹²å‡€çš„å›¾åƒã€‚</p></li><li><p>å¯¹äºå™ªå£°ä¸æ˜æ˜¾çš„å›¾åƒï¼Œä¿¡å·å¤„ç†å¯ä»¥æŒ‡å¯¼CNNæå–æ˜¾è‘—ç‰¹å¾[94,103,174ï¼Œ2]ã€‚å…·ä½“åœ°è¯´ï¼Œè·³è¿‡è¿æ¥æ˜¯ä¿¡å·å¤„ç†çš„å…¸å‹æ“ä½œã€‚</p></li><li><p>å¯¹äºæ¶‰åŠé«˜è®¡ç®—æˆæœ¬çš„ä»»åŠ¡ï¼Œå…·æœ‰å›¾åƒåƒç´ å…³ç³»æ€§è´¨çš„CNNåœ¨é™ä½å¤æ‚åº¦æ–¹é¢éå¸¸æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼ŒAhnç­‰äººé‡‡ç”¨å…·æœ‰éå±€éƒ¨è‡ªç›¸ä¼¼æ€§çš„ç»†èƒç¥ç»ç½‘ç»œ(CNN)å¯¹å™ªå£°è¿›è¡Œè¿‡æ»¤å»å™ªï¼Œå…¶ä¸­ç»™å®šå™ªå£°å›¾åƒçš„ç›¸ä¼¼ç‰¹å¾å¯ä»¥åŠ å¿«ç‰¹å¾æå–çš„é€Ÿåº¦ï¼Œé™ä½è®¡ç®—æˆæœ¬.</p></li></ul><p>å…³äºè¿™äº›æ–¹æ³•çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥è§è¡¨2ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_2.png" alt=""></p><h4 id="æœ€ä¼˜åŒ–æ–¹æ³•ä¸CNN-NNç›¸ç»“åˆçš„AWNIå»å™ª">æœ€ä¼˜åŒ–æ–¹æ³•ä¸CNN/NNç›¸ç»“åˆçš„AWNIå»å™ª</h4><p>æœºå™¨å­¦ä¹ ä½¿ç”¨ä¼˜åŒ–æŠ€æœ¯å’Œåˆ¤åˆ«æ€§å­¦ä¹ æ–¹æ³•æ¥å¤„ç†å›¾åƒåº”ç”¨ã€‚è™½ç„¶ä¼˜åŒ–æ–¹æ³•åœ¨ä¸åŒçš„ä½å±‚è§†è§‰ä»»åŠ¡ä¸Šéƒ½æœ‰å¾ˆå¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•éœ€è¦æ‰‹åŠ¨è®¾ç½®å‚æ•°ï¼Œéå¸¸è€—æ—¶ã€‚åˆ¤åˆ«æ€§å­¦ä¹ æ–¹æ³•å›¾åƒæ¢å¤é€Ÿåº¦å¿«ï¼Œä½†å¯¹ä½æ°´å¹³è§†è§‰ä»»åŠ¡ä¸çµæ´»ã€‚ä¸ºäº†åœ¨æ•ˆç‡å’Œçµæ´»æ€§ä¹‹é—´å®ç°æŠ˜è¡·ï¼Œæå‡ºäº†ä¸€ç§åŸºäºåˆ¤åˆ«å­¦ä¹ ä¼˜åŒ–çš„å›¾åƒåº”ç”¨æ–¹æ³•ï¼Œå¦‚å›¾åƒå»å™ªã€‚<strong>åŸºäºæ­£åˆ™é¡¹æŸå¤±å‡½æ•°çš„å…ˆéªŒçŸ¥è¯†CNNæ˜¯å›¾åƒå»å™ªä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯åˆ†ä¸ºæé«˜å»å™ªé€Ÿåº¦å’Œæ”¹å–„å»å™ªæ€§èƒ½ä¸¤å¤§ç±»ã€‚</strong></p><p>ä¸ºäº†æé«˜å»å™ªé€Ÿåº¦ï¼Œåˆ©ç”¨CNNçš„ä¼˜åŒ–æ–¹æ³•æ˜¯å¿«é€Ÿæ‰¾åˆ°å›¾åƒå»å™ªæœ€ä¼˜è§£çš„æœ‰æ•ˆå·¥å…·ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨æœ€å¤§åéªŒæ¦‚ç‡(MAP)æ–¹æ³•çš„GaNè¢«ç”¨æ¥ä¼°è®¡å™ªå£°å’Œå¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œå¦‚å›¾åƒä¿®å¤å’Œè¶…åˆ†è¾¨ç‡ã€‚åŸºäºç»éªŒçš„è´ªå©ªç®—æ³•å’Œä½¿ç”¨CNNçš„è¿ç§»å­¦ä¹ ç­–ç•¥å¯ä»¥åŠ é€Ÿé—ä¼ ç®—æ³•ä»¥è·å¾—å¹²å‡€çš„å›¾åƒã€‚å™ªå£°å›¾åƒå’Œå™ªå£°çº§æ˜ å°„æ˜¯CNNçš„è¾“å…¥ï¼Œåœ¨é¢„æµ‹å™ªå£°æ–¹é¢æ‰§è¡Œé€Ÿåº¦æ›´å¿«ã€‚</p><p>ä¸ºæé«˜å»å™ªæ€§èƒ½ï¼Œé‡‡ç”¨ç¥ç»ç½‘ç»œ(CNN)ç»„åˆä¼˜åŒ–æ–¹æ³•å¯¹å«å™ªå›¾åƒè¿›è¡Œå¹³æ»‘å¤„ç†ã€‚å…·æœ‰å…¨å˜å·®å»å™ªçš„CNNé™ä½äº†å™ªå£°åƒç´ çš„å½±å“ã€‚å°†åˆ†è£‚Bregmanè¿­ä»£ç®—æ³•ä¸CNNç›¸ç»“åˆï¼Œå¯ä»¥é€šè¿‡å›¾åƒæ·±åº¦å¯¹åƒç´ è¿›è¡Œå¢å¼ºï¼Œå¾—åˆ°ä¸€å¹…æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚å…·æœ‰ç‰¹å¾åŒ¹é…çš„ä¸¤é˜¶æ®µCNNå¯ä»¥æ›´å¥½åœ°æ¢å¤å¹²å‡€å›¾åƒçš„ç»†èŠ‚ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯å™ªå£°å›¾åƒã€‚é‡‡ç”¨æœ€è¿‘é‚»ç®—æ³•çš„GANåœ¨è¿‡æ»¤å¹²å‡€å›¾åƒä¸­çš„å™ªå£°å›¾åƒæ–¹é¢æ˜¯æœ‰æ•ˆçš„ã€‚ä¸€ç§ç»„åˆçš„CNNä½¿ç”¨æ³¢å‰ç¼–ç é€šè¿‡å˜æ¢åŸŸæ¥å¢å¼ºæ½œåœ¨æ¸…æ´å›¾åƒçš„åƒç´ ã€‚æ–‡çŒ®æ˜¾ç¤ºäº†å…¶ä»–æœ‰æ•ˆçš„å»å™ªæ–¹æ³•ã€‚è¡¨3æ˜¾ç¤ºäº†ä¼˜åŒ–æ–¹æ³•å’ŒCNN/NNåœ¨AWNIå»å™ªä¸­ç»„åˆçš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_3.png" alt=""></p><h3 id="çœŸå®å™ªå£°å›¾åƒå»å™ªä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯">çœŸå®å™ªå£°å›¾åƒå»å™ªä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯</h3><p>ç”¨äºå›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¸»è¦æœ‰ä¸¤ç§ï¼šå•ä¸€çš„ç«¯åˆ°ç«¯CNNå’Œå…ˆéªŒçŸ¥è¯†ä¸CNNçš„ç»“åˆã€‚</p><p>å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ï¼Œæ”¹å˜ç½‘ç»œç»“æ„æ˜¯ä»ç»™å®šçš„çœŸå®æŸåå›¾åƒä¸­å»é™¤å™ªå£°çš„æœ‰æ•ˆæ–¹æ³•ã€‚å¤šå°ºåº¦çŸ¥è¯†æ˜¯å›¾åƒå»å™ªçš„æœ‰æ•ˆæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œç”±å·ç§¯ã€REUå’ŒRLç»„æˆçš„CNNé‡‡ç”¨ä¸åŒçš„ç›¸ä½ç‰¹å¾æ¥å¢å¼ºå¾®å…‰å›¾åƒå»å™ªæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚ä¸ºäº†å…‹æœæ¨¡ç³Šå’Œè™šå‡çš„å›¾åƒä¼ªå½±ï¼Œæå‡ºäº†ä¸€ç§å…·æœ‰è·³è·ƒè¿æ¥çš„åŒUç½‘ç”¨äºCTå›¾åƒé‡å»ºã€‚ä¸ºäº†è§£å†³èµ„æºçº¦æŸé—®é¢˜ï¼Œç­‰äººæå‡ºäº†è§£å†³æ–¹æ¡ˆä½¿ç”¨å…·æœ‰æ‰¹é‡é‡æ•´åŒ–ã€RLå’Œè†¨èƒ€å·ç§¯çš„åŒé‡CNNæ¥å¤„ç†çœŸå®çš„å™ªå£°å›¾åƒã€‚åŸºäºå…‰å›¾åƒçš„æ€§è´¨ï¼Œä¸¤ä¸ªCNNåˆ©ç”¨å„å‘å¼‚æ€§è§†å·®åˆ†ææ¥ç”ŸæˆçœŸå®å™ªå£°å›¾åƒçš„ç»“æ„è§†å·®ä¿¡æ¯ã€‚åœ¨å¼±å…‰æ¡ä»¶ä¸‹ä½¿ç”¨CNNè§£æé¥æ„Ÿå’ŒåŒ»å­¦å›¾åƒè¢«è¯æ˜æ˜¯æœ‰æ•ˆçš„ã€‚ä¸ºäº†æå–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¾ªç¯è¿æ¥è¢«ç”¨æ¥å¢å¼ºå¯¹çœŸå®ä¸–ç•Œä¸­çš„æŸåå›¾åƒçš„è¡¨ç¤ºèƒ½åŠ›ã€‚ä¸ºäº†å¤„ç†æœªçŸ¥çš„å™ªå£°å›¾åƒï¼Œåˆ©ç”¨æ®‹å·®ç»“æ„æ¥ä¿ƒè¿›ä½é¢‘ç‰¹å¾ï¼Œç„¶åå¯ä»¥åº”ç”¨æ³¨æ„æœºåˆ¶ä»é€šé“ä¸­æå–æ›´å¤šæ½œåœ¨çš„ç‰¹å¾ã€‚ä¸ºäº†äº§ç”Ÿå«å™ªå›¾åƒï¼Œæœ‰ä¸€ç§æŠ€æœ¯ä½¿ç”¨æ¨¡æ‹Ÿæ‘„åƒç®¡é“æ¥æ„å»ºé€€åŒ–æ¨¡å‹ï¼Œä»¥ä¾¿è¿‡æ»¤(Alipay)è·å¾—çœŸå®çš„å«å™ªå›¾åƒã€‚ä¸ºäº†è§£å†³å«å™ªå›¾åƒæ— é…å¯¹çš„æ— å™ªå£°å›¾åƒçš„é—®é¢˜ï¼Œä¸€ç§åµŒå…¥æ— ç›‘ç£å­¦ä¹ æ–¹æ³•åˆ°cnnä¸­çš„æ–¹æ³•åœ¨å›¾åƒå»å™ªä¸Šæ˜¯æœ‰æ•ˆçš„ã€‚è‡ªæ´½çš„GaNé¦–å…ˆä½¿ç”¨ä¸€ä¸ªCNNæ¥ä¼°è®¡ç»™å®šå™ªå£°å›¾åƒçš„å™ªå£°ä½œä¸ºä¸€ä¸ªæ ‡ç­¾ï¼Œç„¶ååº”ç”¨å¦ä¸€ä¸ªCNNå’Œæ‰€å¾—åˆ°çš„æ ‡ç­¾æ¥å»é™¤å…¶ä»–å™ªå£°å›¾åƒçš„å™ªå£°ã€‚è¿™ä¸€æ¦‚å¿µä¹Ÿå·²æ‰©å±•åˆ°ä¸€èˆ¬çš„CNNã€‚Noise2InversemMethodä½¿ç”¨CNNæ ¹æ®å‘¨å›´çš„å™ªéŸ³åƒç´ é¢„æµ‹å™ªéŸ³åƒç´ çš„å€¼ã€‚**åˆå¹¶åˆ°3Dè‡ªç›‘ç£ç½‘ç»œä¸­çš„æ³¨æ„æœºåˆ¶å¯ä»¥æé«˜ä»åŒ»å­¦å™ªå£°å›¾åƒä¸­å»é™¤å™ªå£°çš„æ•ˆç‡ã€‚**æœ‰å…³ä¸Šè¿°ç ”ç©¶çš„æ›´è¯¦ç»†èµ„æ–™å‚è§è¡¨4ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_4.png" alt=""></p><p>å°†CNNå’Œå…ˆéªŒçŸ¥è¯†ç›¸ç»“åˆçš„æ–¹æ³•å¯ä»¥æ›´å¥½åœ°å¤„ç†çœŸå®å™ªå£°å›¾åƒä¸­çš„é€Ÿåº¦å’Œå¤æ‚å™ªå£°ä»»åŠ¡ã€‚å¼ ç­‰äººæå‡ºäº†åˆ©ç”¨åŠäºŒæ¬¡åˆ†è£‚(HQS)å’Œç»†èƒç¥ç»ç½‘ç»œ(CNN)å¯¹ç»™å®šçš„çœŸå®å«å™ªå›¾åƒè¿›è¡Œå™ªå£°ä¼°è®¡çš„æ–¹æ³•ã€‚Guoç­‰äººæå‡ºäº†ä¸€ç§ä¸‰é˜¶æ®µå»å™ªæ–¹æ³•ã€‚</p><ol><li>ç¬¬ä¸€é˜¶æ®µä½¿ç”¨é«˜æ–¯å™ªå£°å’Œç›¸æœºå†…å¤„ç†æµæ°´çº¿æ¥åˆæˆå™ªå£°å›¾åƒã€‚å°†åˆæˆçš„å™ªå£°å›¾åƒå’ŒçœŸå®çš„å™ªå£°å›¾åƒè¿›è¡Œèåˆï¼Œä»¥æ›´å¥½åœ°è¡¨ç¤ºçœŸå®çš„å™ªå£°å›¾åƒã€‚</li><li>ç¬¬äºŒé˜¶æ®µé‡‡ç”¨å…·æœ‰éå¯¹ç§°æ€»å˜åˆ†æŸå¤±çš„å­ç½‘ç»œæ¥ä¼°è®¡çœŸå®å«å™ªå›¾åƒçš„å™ªå£°ã€‚</li><li>ç¬¬ä¸‰é˜¶æ®µåˆ©ç”¨åŸå§‹å«å™ªå›¾åƒï¼Œä¼°è®¡å™ªå£°ï¼Œæ¢å¤æ½œåœ¨çš„å¹²å‡€å›¾åƒã€‚</li></ol><p>ä¸ºäº†è§£å†³ä¸æˆå¯¹å™ªå£°å›¾åƒçš„é—®é¢˜ï¼Œä»¥åŠç›‘ç£çš„æ–¹å¼å‘å±•äº†CNNå’Œå…ˆéªŒçŸ¥è¯†çš„ç»„åˆã€‚åˆ†å±‚æ·±å±‚GaN(HD-GAN)é¦–å…ˆä½¿ç”¨èšç±»ç®—æ³•å¯¹æ¯ä¸ªæ‚£è€…çš„CTè¿›è¡Œå¤šç±»åˆ«åˆ†ç±»ï¼Œç„¶åé€šè¿‡æ”¶é›†ä¸åŒæ‚£è€…çš„åŒä¸€ç±»åˆ«çš„å›¾åƒæ¥æ„å»ºæ•°æ®é›†ã€‚æœ€åï¼Œä½¿ç”¨GaNå¯¹è·å¾—çš„æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œä»¥è¿›è¡Œå›¾åƒå»å™ªå’Œåˆ†ç±»ã€‚ç±»ä¼¼çš„æ–¹æ³•åœ¨3Dæ˜ å°„ä¸­è¡¨ç°è‰¯å¥½ã€‚</p><p>å…·æœ‰ä¿¡é“å…ˆéªŒçŸ¥è¯†çš„CNNå¯¹äºå¾®å…‰å›¾åƒå¢å¼ºæ˜¯æœ‰æ•ˆçš„ï¼Œè¡¨5æ˜¾ç¤ºäº†å…³äºä¸Šè¿°ç ”ç©¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_5.png" alt=""></p><h3 id="æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨ç›²é™å™ªä¸­çš„åº”ç”¨">æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨ç›²é™å™ªä¸­çš„åº”ç”¨</h3><p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå›¾åƒå¾ˆå®¹æ˜“è¢«ç ´åï¼Œå™ªå£°ä¹Ÿå¾ˆå¤æ‚ã€‚å› æ­¤ï¼Œç›²å»å™ªæŠ€æœ¯éå¸¸é‡è¦ã€‚FFDNetä½¿ç”¨å™ªå£°ç”µå¹³å’Œå™ªå£°ä½œä¸ºCNNçš„è¾“å…¥æ¥è®­ç»ƒæœªçŸ¥å™ªå£°å›¾åƒçš„å»å™ªå™¨ã€‚éšåï¼Œæå‡ºäº†å‡ ç§è§£å†³ç›²å»å™ªé—®é¢˜çš„æ–¹æ³•ã€‚Kenzoç­‰äººæå‡ºçš„ä¸€ç§æˆåƒå™¨ä»¶æœºæ„ã€‚åˆ©ç”¨è½¯æ€§æ”¶ç¼©è°ƒæ•´å™ªå£°æ°´å¹³è¿›è¡Œç›²å»å™ªã€‚å¯¹äºæœªé…å¯¹çš„å™ªå£°å›¾åƒï¼Œä½¿ç”¨CNNä¼°è®¡å™ªå£°è¢«è¯æ˜æ˜¯æœ‰æ•ˆçš„ã€‚Yangç­‰äººä½¿ç”¨å·²çŸ¥çš„å™ªå£°æ°´å¹³è®­ç»ƒå»å™ªå™¨ï¼Œç„¶ååˆ©ç”¨è¯¥å»å™ªå™¨æ¥ä¼°è®¡å™ªå£°æ°´å¹³ã€‚ä¸ºäº†è§£å†³éšæœºå™ªå£°è¡°å‡çš„é—®é¢˜ï¼Œé‡‡ç”¨å…·æœ‰RLçš„ç»†èƒç¥ç»ç½‘ç»œå¯¹è¿‡æ»¤å¤åˆå™ªå£°è¿›è¡Œå¤„ç†ã€‚æ”¹å˜ç½‘ç»œç»“æ„å¯ä»¥æé«˜ç›²å»å™ªçš„å»å™ªæ€§èƒ½ã€‚é©¬ç¼è¾¾Â·åŸƒå¡”å°”æå‡ºå¯¹æ’å‡»æœªçŸ¥å™ªå£°é‡‡ç”¨è‡ªåŠ¨ç¼–ç å™¨ã€‚å¯¹äºæ··åˆå™ªå£°ï¼Œçº§è”ç¥ç»ç½‘ç»œèƒ½æœ‰æ•ˆå»é™¤åŠ æ€§é«˜æ–¯ç™½å™ªå£°(AWGN)å’Œè„‰å†²å™ªå£°ã€‚è¡¨6æ˜¾ç¤ºäº†æœ‰å…³è¿™äº›å»å™ªæ–¹æ³•çš„æ›´å¤šä¿¡æ¯ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_6.png" alt=""></p><h3 id="æ··åˆå™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯">æ··åˆå™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯</h3><p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ•è·çš„å›¾åƒä¼šå—åˆ°å¤æ‚ç¯å¢ƒçš„å½±å“ã€‚å—æ­¤å¯å‘ï¼Œå‡ ä½ç ”ç©¶äººå‘˜æå‡ºäº†æ··åˆå™ªå£°å›¾åƒå»å™ªæŠ€æœ¯ã€‚Liç­‰äººæå‡ºå°†CNNä¸ç¿˜æ›²å¯¼å¼•ç›¸ç»“åˆæ¥è§£å†³å™ªå£°ã€æ¨¡ç³Šå’ŒJPEGå‹ç¼©é—®é¢˜ã€‚å¼ ç­‰äººä½¿ç”¨ä¸€ç§æ¨¡å‹æ¥å¤„ç†å™ªå£°ã€æ¨¡ç³Šæ ¸å’Œä½åˆ†è¾¨ç‡å›¾åƒç­‰å¤šç§é€€åŒ–é—®é¢˜ã€‚ä¸ºäº†å¢å¼ºåŸå§‹ä¼ æ„Ÿå™¨æ•°æ®ï¼ŒKokkinosç­‰äººæå‡ºäº†ä¸€ç§åŸºäºæ®‹å·®ç»†èƒç¥ç»ç½‘ç»œçš„å›¾åƒå»é©¬èµ›å…‹å’Œå»å™ªè¿­ä»£ç®—æ³•ã€‚ä¸ºäº†å¤„ç†ä»»æ„æ¨¡ç³Šæ ¸ï¼Œå¼ ç­‰äººæå‡ºé‡‡ç”¨çº§è”å»æ¨¡ç³Šå’Œå•å¹…å›¾åƒè¶…åˆ†è¾¨ç‡(SISR)ç½‘ç»œæ¥æ¢å¤å³æ’å³ç”¨è¶…åˆ†è¾¨ç‡å›¾åƒã€‚è¡¨7ç»™å‡ºäº†è¿™äº›æ··åˆå™ªå£°å›¾åƒå»å™ªæ–¹æ³•ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_7.png" alt=""></p><h4 id="çªå‘å™ªå£°">çªå‘å™ªå£°</h4><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå›¾åƒæºå¸¦çš„ä¿¡æ¯æ˜¯æœ‰é™çš„ï¼Œè¿™åœ¨å®é™…åº”ç”¨ä¸­æ˜¯ä¸åˆ©çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œçªå‘æŠ€æœ¯è¢«å¼€å‘å‡ºæ¥ã€‚ç„¶è€Œï¼Œçˆ†è£‚å—åˆ°å™ªå£°å’Œç›¸æœºæŠ–åŠ¨çš„å½±å“ï¼Œå¢åŠ äº†å®æ–½å®é™…ä»»åŠ¡çš„éš¾åº¦ã€‚æœ€è¿‘ï¼Œç”¨äºçªå‘å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€æœ¯å¼•èµ·äº†äººä»¬çš„æå¤§å…´è¶£ï¼Œå³é€å¸§å»é™¤å™ªå£°ã€‚é€’å½’å…¨å·ç§¯æ·±åº¦ç¥ç»ç½‘ç»œå¯ä»¥å¯¹ä»»æ„é•¿åº¦åºåˆ—ä¸­æ‰€æœ‰å¸§çš„å™ªå£°è¿›è¡Œè¿‡æ»¤å»å™ªï¼Œå°†ç»†èƒç¥ç»ç½‘ç»œä¸æ ¸æ–¹æ³•ç›¸ç»“åˆå¯ä»¥æé«˜çªå‘å™ªå£°å›¾åƒçš„å»å™ªæ€§èƒ½ã€‚é’ˆå¯¹å¤æ‚èƒŒæ™¯å™ªå£°å›¾åƒï¼Œæå‡ºäº†ä¸€ç§ç»“åˆæ ¸å’ŒCNNçš„æ³¨æ„åŠ›æœºåˆ¶æ¥å¢å¼ºå…³é”®ç‰¹å¾å¯¹çªå‘å›¾åƒå»å™ªçš„æ•ˆæœï¼ŒåŠ å¿«äº†è®­ç»ƒé€Ÿåº¦ã€‚å¯¹äºå¾®å…‰æ¡ä»¶ï¼Œä½¿ç”¨CNNå°†ç»™å®šçš„çªå‘å™ªå£°å›¾åƒæ˜ å°„åˆ°sRGBè¾“å‡ºå¯ä»¥è·å¾—å¤šå¸§å»å™ªå›¾åƒåºåˆ—ã€‚ä¸ºäº†é™ä½ç½‘ç»œå¤æ‚æ€§ï¼Œå…·æœ‰æ®‹å·®å­¦ä¹ çš„CNNç›´æ¥è®­ç»ƒå»å™ªæ¨¡å‹ï¼Œè€Œä¸æ˜¯æ˜¾å¼çš„å¯¹é½è¿‡ç¨‹ã€‚è¡¨8åˆ—å‡ºäº†è¿™äº›çªå‘å»å™ªæ–¹æ³•ã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_8.png" alt=""></p><h4 id="è§†é¢‘å™ªå£°">è§†é¢‘å™ªå£°</h4><p>ç±»ä¼¼äºçªå‘å›¾åƒï¼Œè§†é¢‘æ£€æµ‹è¢«åˆ†è§£åˆ°æ¯ä¸€å¸§ä¸­ã€‚å› æ­¤ï¼ŒåŠ æ€§ç™½å™ªå£°å›¾åƒå»å™ªã€å®å™ªå£°å›¾åƒå»å™ªã€ç›²å»å™ªã€æ··åˆå™ªå£°å›¾åƒå»å™ªç­‰æ·±å…¥ç ”ç©¶æŠ€æœ¯ä¹Ÿé€‚ç”¨äºè§†é¢‘å»å™ªã€‚é‡ç°çš„ç¥ç»ç½‘ç»œåˆ©ç”¨ç«¯åˆ°ç«¯çš„CNNä»è¢«ç ´åçš„è§†é¢‘ä¸­å»é™¤å™ªå£°ã€‚ä¸ºäº†æé«˜è§†é¢‘å»å™ªæ•ˆæœï¼Œé™ä½è§†é¢‘å†—ä½™åº¦æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ã€‚ä¸€ç§éå±€éƒ¨æ‹¼æ¥èåˆçš„CNNå¯ä»¥æœ‰æ•ˆåœ°æŠ‘åˆ¶è§†é¢‘å’Œå›¾åƒå»å™ªçš„å™ªå£°ã€‚åœ¨è§†é¢‘å»å™ªä¸­ï¼ŒCNNç»“åˆæ—¶é—´ä¿¡æ¯åœ¨æ€§èƒ½å’Œè®­ç»ƒæ•ˆç‡ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚å¯¹äºç›²è§†é¢‘å»å™ªï¼Œä¸¤çº§CNNè¢«è¯æ˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ç¬¬ä¸€é˜¶æ®µé€šè¿‡å¾®è°ƒé¢„å…ˆè®­ç»ƒçš„AWGNå»å™ªç½‘ç»œæ¥è®­ç»ƒè§†é¢‘å»å™ªæ¨¡å‹ã€‚ç¬¬äºŒé˜¶æ®µåˆ©ç”¨å¾—åˆ°çš„è§†é¢‘å»å™ªæ¨¡å‹å¾—åˆ°æ½œåœ¨çš„å¹²å‡€è§†é¢‘ã€‚è¿™äº›è§†é¢‘å»å™ªæ–¹æ³•å¦‚è¡¨9æ‰€ç¤ºã€‚</p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_9.png" alt=""></p><h2 id="å®éªŒç»“æœ">å®éªŒç»“æœ</h2><h3 id="æ•°æ®é›†">æ•°æ®é›†</h3><h4 id="è®­ç»ƒé›†">è®­ç»ƒé›†</h4><p>è®­ç»ƒé›†åˆ’åˆ†ä¸ºä¸¤ç±»ï¼šç°åº¦å™ªå£°å’Œå½©è‰²å™ªå£°å›¾åƒã€‚</p><p>ç°åº¦å™ªå£°å›¾åƒæ•°æ®é›†å¯ç”¨äºè®­ç»ƒé«˜æ–¯å»å™ªå™¨å’Œç›²å»å™ªå™¨ã€‚åŒ…æ‹¬BSD400å’ŒWaterloo Exploration Databaseã€‚BSD400ç”±400å¼ .pngæ ¼å¼çš„å›¾åƒç»„æˆï¼Œå¹¶è£å‰ªåˆ°180*180ç”¨äºè®­ç»ƒä¸€ä¸ªå»å™ªæ¨¡å‹ã€‚Waterloo Exploration Databaseç”±4744ä¸ª.pngæ ¼å¼çš„è‡ªç„¶å›¾åƒç»„æˆã€‚</p><p>å½©è‰²å™ªå£°å›¾åƒåŒ…æ‹¬BSD432ï¼ŒWaterloo Exploration Databaseå’ŒpolyU-Real-World-Noisy-Imagesæ•°æ®é›†ã€‚polyU-Real-World-Noisy-Imagesç”±100ä¸ªçœŸå®å™ªå£°å›¾åƒç»„æˆï¼Œå°ºå¯¸2784*1856ï¼Œç”±5ä¸ªæ‘„å½±æœºè·å¾—ï¼šNikon D800ï¼ŒCanon 5D Mark â…¡ï¼ŒSony A7 â…¡ï¼Œ Canon 80Då’ŒCanon 600Dã€‚</p><h4 id="æµ‹è¯•é›†">æµ‹è¯•é›†</h4><p>æµ‹è¯•é›†åŒ…å«ç°åº¦å™ªå£°å’Œå½©è‰²å™ªå£°å›¾åƒæ•°æ®é›†ã€‚</p><p>ç°åº¦å™ªå£°æ•°æ®é›†ç”±Set12å’ŒBSD68ç»„æˆã€‚Set12åŒ…å«12ä¸ªåœºæ™¯ã€‚BSD68åŒ…å«68ä¸ªè‡ªç„¶å›¾åƒã€‚å®ƒä»¬ç”¨äºæµ‹è¯•é«˜æ–¯å»å™ªå™¨å’Œç›²å™ªå£°å»å™ªå™¨ã€‚</p><p>å½©è‰²å™ªå£°æ•°æ®é›†åŒ…å«CBSD68ï¼ŒKodak24ï¼ŒMcMasterï¼Œccï¼ŒDNDï¼ŒNC12ï¼ŒSIDDå’ŒNamã€‚Kodak24å’ŒMcMasteråˆ†åˆ«åŒ…å«24å’Œ18ä¸ªå½©è‰²å™ªå£°å›¾åƒã€‚ccåŒ…å«15ä¸ªä¸åŒISOï¼ˆ1600ï¼Œ3200ï¼Œ6400ï¼‰çš„çœŸå®å™ªå£°å›¾åƒã€‚DNDåŒ…å«50ä¸ªçœŸå®å™ªå£°å›¾åƒï¼Œå¹²å‡€å›¾åƒç”±ä½ISOæ•è·å›¾åƒã€‚NC12åŒ…å«12ä¸ªå™ªå£°å›¾åƒå¹¶ä¸”æ²¡æœ‰groud-truthå¹²å‡€å›¾åƒã€‚SIDDåŒ…å«æ¥è‡ªæ™ºèƒ½æ‰‹æœºçš„çœŸå®å™ªå£°å›¾åƒï¼Œç”±320ä¸ªå™ªå£°ã€ground-truchå›¾åƒå¯¹æ„æˆã€‚NamåŒ…å«11ä¸ªåœºæ™¯ï¼Œä»¥JPEGæ ¼å¼ä¿å­˜ã€‚</p><h3 id="å®éªŒç»“æœ-2">å®éªŒç»“æœ</h3><p>ä¸ºäº†éªŒè¯ä¸€äº›æ–¹æ³•çš„å»å™ªè¡¨ç°ï¼Œåœ¨Set12, BSD68, CBSD68, Kodak24, McMaster, DND, SIDD, Nam, ccå’ŒNC12æ•°æ®é›†ä¸Šè¿›è¡Œäº†å®šé‡å®šæ€§è¯„ä¼°ã€‚å®šé‡è¯„ä¼°ä¸»è¦ä½¿ç”¨ä¸åŒå»å™ªå™¨çš„PSNRå€¼æ¥æµ‹è¯•å»å™ªæ•ˆæœã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åˆ©ç”¨å»å™ªä¸€å¼ å›¾åƒçš„æ—¶é—´æ¥æ”¯æŒPSNRçš„å®šé‡è¯„ä¼°ã€‚å®šæ€§è¯„ä¼°é‡‡ç”¨ç›´è§‚çš„å›¾å½¢è¡¨ç¤ºæ¢å¤åçš„å¹²å‡€å›¾åƒã€‚</p><h4 id="åŠ æ€§ç™½å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§">åŠ æ€§ç™½å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§</h4><p>å»å™ªæ–¹æ³•çš„å¯¹æ¯”åº”è¯¥è€ƒè™‘åŠ æ€§ç™½å™ªå£°ï¼ŒåŒ…æ‹¬ï¼šé«˜æ–¯ã€æ³Šæ¾ã€å¾®å…‰å™ªå£°å’Œç›ã€èƒ¡æ¤’å™ªå£°ï¼Œæ‰€æœ‰è¿™äº›çš„å™ªå£°æ°´å¹³éƒ½æœ‰å¾ˆå¤§çš„ä¸åŒã€‚å¦å¤–ï¼Œå¾ˆå¤šæ–¹æ³•ä½¿ç”¨ä¸åŒçš„å·¥å…·ï¼Œå¯¹å»å™ªç»“æœå½±å“å¾ˆå¤§ã€‚åŸºäºè¿™äº›åŸå› ï¼Œé€‰æ‹©<strong>å…¸å‹é«˜æ–¯å™ªå£°</strong>æ¥æµ‹è¯•å»å™ªè¡¨ç°ã€‚æ­¤å¤–ï¼Œå¤§å¤šæ•°æ–¹æ³•ä½¿ç”¨PSNRä½œä¸ºå®šé‡æŒ‡æ ‡ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨ BSD68, Set12, CBSD68, Kodak24å’ŒMcMasteræ•°æ®é›†æ¥æµ‹è¯•å¯¹äºåŠ æ€§ç™½å™ªå£°æ·±åº¦å­¦ä¹ æŠ€å·§çš„å»å™ªè¡¨ç°ã€‚</p><p>ã€å…·æœ‰ä¸åŒå™ªå£°æ°´å¹³çš„ä¸åŒç½‘ç»œç”¨äºç°åº¦åŠ æ³•ç™½å™ªå£°å›¾åƒå»å™ªçš„PSNRå€¼ã€‚ELDRN[165]è¡¨ç°æœ€å¥½ã€‘</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_17_Table_10.png" alt=""></p><p>ã€ä¸ºç†è§£ä¸åŒæ–¹æ³•çš„å»å™ªè¡¨ç°ï¼Œä½¿ç”¨FSIMï¼ˆfeature similarity indexï¼Œç‰¹å¾ç›¸ä¼¼æ€§æŒ‡æ•°ï¼‰ä½œä¸ºè§†è§‰è´¨é‡æŒ‡æ ‡æ¥è¿›è¡Œåœ¨BSD68ä¸Šä¸åŒå™ªå£°æ°´å¹³çš„å®éªŒã€‘</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_17_Table_11.png" alt=""></p><p>ã€ä¸ºæµ‹è¯•ä¸åŒç½‘ç»œå¤„ç†å•ä¸ªç°åº¦åŠ æ€§ç™½å™ªå£°å›¾åƒçš„èƒ½åŠ›ï¼Œåœ¨Set12ä¸Šè¿›è¡Œå®éªŒã€‘</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_19_Table_12.png" alt=""></p><p>ã€ä¸åŒå»å™ªæ–¹æ³•å¯¹å½©è‰²åŠ æ€§ç™½å™ªå£°å›¾åƒçš„å»å™ªè¡¨ç°ã€‘</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_20_Table_13.png" alt=""></p><p>ã€ä¸åŒæ–¹æ³•å›¾åƒå»å™ªçš„æ•ˆç‡ã€‘</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_20_Table_14.png" alt=""></p><p>å¯¹äºå®šæ€§åˆ†æï¼Œå¯¹ä¸åŒæ–¹æ³•æ”¾å¤§æ½œåœ¨å¹²å‡€å›¾åƒçš„ä¸€ä¸ªåŒºåŸŸã€‚è§‚å¯Ÿå¾—è¶Šæ¸…æ™°ï¼Œè¯´æ˜å»å™ªæ•ˆæœè¶Šå¥½ã€‚</p><h4 id="çœŸå®å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§">çœŸå®å™ªå£°å›¾åƒå»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§</h4><p>åŸºäºDND,SIDD,Nam,CCæ•°æ®é›†ã€‚ä¸ä½¿ç”¨NC12æ•°æ®é›†çš„åŸå› æ˜¯NC12çš„ground-truthå¹²å‡€å›¾åƒä¸å¯è·å¾—ã€‚</p><p>ä¸ºäº†å¸®åŠ©æ›´å¥½ç†è§£è¿™äº›æ–¹æ³•ï¼Œå¢åŠ äº†ä¸€äº›ä¼ ç»Ÿå»å™ªæ–¹æ³•ï¼Œæ¯”å¦‚BM3Dä½œä¸ºæ¯”è¾ƒæ–¹æ³•ã€‚</p><p>ä»è¡¨15ã€16å¯çœ‹å‡ºï¼Œ<strong>DRDNåœ¨DNDå’ŒSSIDä¸Šå¯¹çœŸå®å™ªå£°å»å™ªè·å¾—äº†æœ€å¥½ç»“æœã€‚</strong></p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_23_Table_15.png" alt=""></p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_24_Table_16.png" alt=""></p><p>ä»è¡¨17çœ‹å‡ºï¼Œ<strong>å¯¹äºå‹ç¼©å™ªå£°å›¾åƒï¼ŒAGANè·å¾—äº†å¾ˆå¥½çš„è¡¨ç°ã€‚</strong></p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_24_Table_17.png" alt=""></p><p>ä»è¡¨18çœ‹å‡ºï¼Œ<strong>å¯¹äºä¸åŒISOå€¼çš„çœŸå®å™ªå£°å›¾åƒï¼ŒSDNetå’ŒBRDNetè·å¾—äº†æœ€ä½³å’Œæ­¤ä½³å»å™ªè¡¨ç°ã€‚</strong></p><p><img src="https://picture.mulindya.com/Apaper_collect/review_denoise_18.png" alt=""></p><h4 id="ç›²å»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§">ç›²å»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§</h4><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå™ªå£°åœ¨ç°å®ä¸–ç•Œä¸­æ˜¯å¤æ‚çš„ï¼Œä¸å—è§„åˆ™çš„çº¦æŸã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç›²å»å™ªæŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯æ·±åº¦å­¦ä¹ æŠ€æœ¯è¢«å¼€å‘å‡ºæ¥çš„åŸå› ã€‚æ¯”è¾ƒä¸åŒæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å»å™ªæ€§èƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>å®éªŒé‡‡ç”¨DnCNNã€FFDNetã€Adnetã€SCNNå’ŒG2G1ç­‰å…ˆè¿›çš„å»å™ªæ–¹æ³•åœ¨BSD68å’ŒSet12ä¸Šè¿›è¡Œå®éªŒè®¾è®¡ã€‚</p><p><strong>FFDNetå’ŒAdnetåœ¨ç›²å»å™ªæ–¹é¢ä¼˜äºå…¶ä»–æ–¹æ³•</strong>ï¼Œåˆ†åˆ«å¦‚è¡¨19å’Œè¡¨20æ‰€ç¤ºã€‚</p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_24_Table_19.png" alt=""></p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_25_Table_20.png" alt=""></p><h4 id="æ··åˆå™ªå£°å»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§">æ··åˆå™ªå£°å»å™ªçš„æ·±åº¦å­¦ä¹ æŠ€å·§</h4><p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼ŒæŸåçš„å›¾åƒå¯èƒ½åŒ…å«ä¸åŒç§ç±»çš„å™ªå£°ï¼Œè¿™ä½¿å¾—æ¢å¤æ½œåœ¨çš„å¹²å‡€å›¾åƒéå¸¸å›°éš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäººä»¬æå‡ºäº†åŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å¤šé€€åŒ–æ€æƒ³ã€‚å¦‚è¡¨21æ‰€ç¤ºï¼Œ<strong>WarpNetä¸å…¶ä»–æµè¡Œæ–¹æ³•å¯¹æ¯”ï¼ˆå¦‚DnCNNå’ŒMemNetï¼‰ï¼Œæœ‰å¾ˆå¼ºçš„ç«äº‰åŠ›ã€‚</strong></p><p><img src="https://pdf.cdn.readpaper.com/parsed/fetch_target/64bef38470b7fc1bb5a95a95938c2ac5_25_Table_21.png" alt=""></p><h2 id="Discussion">Discussion</h2><p>æŒ‡å‡ºæœªæ¥ç ”ç©¶çš„æ½œåœ¨åŒºåŸŸå’Œä¸€äº›ç›®å‰æœªè§£å†³çš„é—®é¢˜ã€‚</p><p>åŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å›¾åƒå»å™ªä¸»è¦æ˜¯ä¸ºäº†<strong>æé«˜å»å™ªæ€§èƒ½å’Œæ•ˆç‡ï¼Œå®Œæˆå¤æ‚çš„å»å™ªä»»åŠ¡</strong>ã€‚</p><p>æ”¹å–„å»å™ª<strong>æ€§èƒ½</strong>çš„è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><strong>å¢å¤§æ„Ÿå—é‡</strong>å¯ä»¥æ•è·æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å¢å¤§æ„Ÿå—é‡å¯ä»¥é€šè¿‡æ‰©å¤§ç½‘ç»œæ·±åº¦å’Œå®½åº¦å®Œæˆã€‚ä½†è¿™ä¼šå¯¼è‡´é«˜è®¡ç®—ä»£ä»·å’Œæ›´å¤šå†…å­˜æ¶ˆè€—ã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯<strong>è†¨èƒ€å·ç§¯</strong>ï¼Œä¸ä»…å¯ä»¥è·å¾—æ›´å¥½çš„è¡¨ç°å’Œæ•ˆç‡ï¼Œè¿˜å¯ä»¥æœ‰æ•ˆåœ°æŒ–æ˜æ›´å¤šè¾¹ç¼˜ä¿¡æ¯ã€‚</li><li>ä½¿ç”¨CNNçš„åŒæ—¶è¿˜<strong>ä½¿ç”¨é¢å¤–ä¿¡æ¯ï¼ˆä¹Ÿç§°å…ˆéªŒçŸ¥è¯†ï¼‰<strong>æ˜¯ä¾¿äºè·å–æ›´ç²¾ç¡®ç‰¹å¾çš„æœ‰æ•ˆæ–¹æ³•ã€‚é€šè¿‡</strong>è®¾è®¡æŸå¤±å‡½æ•°</strong>å®ç°ã€‚</li><li><strong>ç»“åˆå±€éƒ¨å’Œå…¨å±€ä¿¡æ¯</strong>å¯ä»¥å¢å¼ºæ·±å±‚å¯¹æµ…å±‚çš„è®°å¿†èƒ½åŠ›ï¼Œä»è€Œæ›´å¥½åœ°å¯¹æŠ—å™ªå£°ã€‚ä¸¤ä¸ªè§£å†³æ–¹æ³•æ˜¯<strong>æ®‹å·®æ“ä½œå’Œé€’å½’æ“ä½œ</strong>ã€‚</li><li>å¯ä»¥ä½¿ç”¨<strong>å•ä¸€çš„å¤„ç†æ–¹æ³•</strong>æ¥æŠ‘åˆ¶å™ªå£°ã€‚å°†å•ä¸€çš„åŠ å·¥æŠ€æœ¯èåˆåˆ°æ·±åº¦CNNä¸­ï¼Œå¯ä»¥è·å¾—ä¼˜å¼‚çš„æ€§èƒ½ã€‚<strong>ä¾‹å¦‚ï¼Œå°æ³¢æŠ€æœ¯</strong>è¢«èšé›†åˆ°U-Netä¸­æ¥å¤„ç†å›¾åƒæ¢å¤[137]ã€‚</li><li><strong>æ•°æ®å¢å¼º</strong>ï¼Œå¦‚æ°´å¹³ç¿»è½¬ã€å‚ç›´ç¿»è½¬å’Œé¢œè‰²æŠ–åŠ¨ï¼Œå¯ä»¥å¸®åŠ©å»å™ªæ–¹æ³•å­¦ä¹ æ›´å¤šç±»å‹çš„å™ªå£°ï¼Œä»è€Œå¢å¼ºå»å™ªæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚å¦å¤–ï¼Œåˆ©ç”¨GANæ„é€ è™šæ‹Ÿå™ªå£°å›¾åƒä¹Ÿæœ‰åˆ©äºå›¾åƒå»å™ªã€‚</li><li><strong>è¿ç§»å­¦ä¹ ã€å›¾æœç´¢å’Œç¥ç»ç»“æ„æœç´¢</strong>ç­‰æ–¹æ³•å¯ä»¥è·å¾—è¾ƒå¥½çš„å»å™ªæ•ˆæœã€‚</li><li><strong>æ”¹è¿›ç¡¬ä»¶æˆ–æ‘„åƒæœºåˆ¶</strong>å¯ä»¥é™ä½å™ªå£°å¯¹é‡‡é›†å›¾åƒçš„å½±å“ã€‚</li></ol><p><strong>å‹ç¼©æ·±åº¦ç¥ç»ç½‘ç»œ</strong>åœ¨æé«˜å»å™ª<strong>æ•ˆç‡</strong>æ–¹é¢å–å¾—äº†å¾ˆå¤§çš„æˆåŠŸã€‚<strong>å‡å°æ·±å±‚ç¥ç»ç½‘ç»œçš„æ·±åº¦æˆ–å®½åº¦</strong>å¯ä»¥é™ä½è¿™äº›ç½‘ç»œåœ¨å›¾åƒå»å™ªä¸­çš„å¤æ‚åº¦ã€‚æ­¤å¤–ï¼Œä½¿ç”¨<strong>å°å·ç§¯æ ¸å’Œåˆ†ç»„å·ç§¯</strong>å¯ä»¥å‡å°‘å‚æ•°çš„æ•°é‡ï¼Œä»è€ŒåŠ å¿«è®­ç»ƒé€Ÿåº¦ã€‚<strong>ä¸é™ç»´æ–¹æ³•çš„èåˆ</strong>ï¼Œæ¯”å¦‚CNNä¸PCAçš„ç»“åˆï¼Œä¹Ÿå¯ä»¥æé«˜å»å™ªæ•ˆç‡ã€‚</p><p>å¯¹äº<strong>å¤æ‚çš„å«å™ªå›¾åƒ</strong>ï¼Œ<strong>åˆ†æ­¥å¤„ç†</strong>æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸¤æ­¥æœºåˆ¶æ˜¯å¤„ç†ä½åˆ†è¾¨ç‡å™ªå£°å›¾åƒçš„ä¸€ç§æ–¹å¼ï¼Œç¬¬ä¸€æ­¥æ¶‰åŠç”±CNNæ¢å¤é«˜åˆ†è¾¨ç‡å›¾åƒã€‚ç¬¬äºŒæ­¥ï¼Œç”¨å¦ä¸€ä¸ªæ–°çš„CNNè¿‡æ»¤æ¥æ¶ˆé™¤é«˜åˆ†è¾¨ç‡å›¾åƒçš„å™ªå£°ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªCNNé€šè¿‡çº§è”æ“ä½œå®ç°ã€‚è¿™ç§ä¸¤æ­¥æœºåˆ¶æ˜¯<strong>æ— ç›‘ç£å™ªå£°ä»»åŠ¡</strong>çš„ç†æƒ³é€‰æ‹©ï¼Œä¾‹å¦‚çœŸå®å™ªå£°å›¾åƒå’Œç›²å»å™ªã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€æ­¥ä¾èµ–äºå…·æœ‰ä¼˜åŒ–ç®—æ³•çš„CNNï¼Œå³æœ€å¤§åéªŒï¼Œä»¥ä¼°è®¡å™ªå£°ä¸ºåœ°é¢äº‹å®(ç§°ä¸ºæ ‡ç­¾)ã€‚ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨å¦ä¸€ç§CNNï¼Œè·å¾—åœ°é¢çœŸå®æƒ…å†µï¼Œè®­ç»ƒå»å™ªæ¨¡å‹ï¼Œç”¨äºçœŸå™ªå£°å›¾åƒå»å™ªæˆ–ç›²å»å™ªï¼›ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨å¦ä¸€ç§CNNï¼Œè®­ç»ƒå»å™ªæ¨¡å‹ï¼Œç”¨äºçœŸå™ªå£°å›¾åƒå»å™ªæˆ–ç›²å»å™ªã€‚<strong>èåˆåˆ°CNNä¸­çš„è‡ªç›‘ç£å­¦ä¹ </strong>æ˜¯<strong>çœŸå®å™ªå£°å›¾åƒå»å™ªæˆ–ç›²å»å™ª</strong>çš„ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p>è™½ç„¶æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨è¿™ä¸‰ç§åœºæ™¯ä¸­éƒ½å–å¾—äº†å¾ˆå¤§çš„æˆåŠŸï¼Œä½†åœ¨å›¾åƒå»å™ªé¢†åŸŸä»ç„¶å­˜åœ¨<strong>æŒ‘æˆ˜</strong>ã€‚è¿™äº›æªæ–½åŒ…æ‹¬ï¼š</p><ol><li>æ›´æ·±çš„ç½‘ç»œéœ€è¦<strong>æ›´å¤šçš„å†…å­˜</strong>èµ„æº</li><li><strong>è®­ç»ƒæ›´æ·±çš„å»å™ªç½‘ç»œ</strong>å¯¹äºçœŸå®å™ªå£°å›¾åƒã€æ— é…å¯¹çš„å™ªå£°å›¾åƒã€å¤šé™è´¨ä»»åŠ¡<strong>ä¸æ˜¯ä¸€ä¸ªç¨³å®šçš„è§£å†³æ–¹æ³•</strong></li><li>çœŸå®å™ªå£°å›¾åƒä¸æ˜¯å®¹æ˜“æ•æ‰çš„ï¼Œ<strong>è®­ç»ƒæ ·æœ¬ä¸è¶³</strong></li><li>æ·±åº¦CNNs<strong>å¾ˆéš¾è§£å†³æ— ç›‘ç£</strong>å»å™ªä»»åŠ¡</li><li>éœ€è¦<strong>æ›´ç²¾ç¡®çš„</strong>å»å™ªä»»åŠ¡<strong>æŒ‡æ ‡</strong>ï¼ŒPSNRã€SSIMæ˜¯æµè¡Œçš„å›¾åƒæ¢å¤æŒ‡æ ‡ã€‚<strong>å³°å€¼ä¿¡å™ªæ¯”(PSNR)å­˜åœ¨è¿‡åº¦å¹³æ»‘çš„é—®é¢˜ï¼Œå¾ˆéš¾è¯†åˆ«éš¾ä»¥åŒºåˆ†çš„å›¾åƒã€‚SSIMä¾èµ–äºäº®åº¦ã€å¯¹æ¯”åº¦å’Œç»“æ„ï¼Œå› æ­¤ä¸èƒ½å‡†ç¡®åœ°è¯„ä»·å›¾åƒçš„æ„ŸçŸ¥è´¨é‡ã€‚</strong></li></ol>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>ç»¼è¿°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>ç»¼è¿°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RuntimeError--expected dtype Double but got dtype Float</title>
    <link href="/2022/02/25/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/buildnet-runerror1/"/>
    <url>/2022/02/25/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/buildnet-runerror1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨æ­å»ºå»å™ªç½‘ç»œè®­ç»ƒçš„æ—¶å€™å‡ºç°RuntimeError: expected dtype Double but got dtype Float</p></blockquote><h2 id="é—®é¢˜æè¿°-â›…ï¸">é—®é¢˜æè¿° â›…ï¸</h2><p>åˆ©ç”¨<a href="https://so.csdn.net/so/search?q=Pytorch&amp;spm=1001.2101.3001.7020">Pytorch</a>æ¡†æ¶è‡ªå·±æ„å»ºç½‘ç»œç»“æ„ï¼Œåœ¨ç¨‹åºè¿è¡Œåˆ°â€œloss.backward()â€çš„æ—¶å€™æŠ¥é”™ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">RuntimeError: expected dtype Double but got dtype Float<br></code></pre></td></tr></tbody></table></figure><p>é€šè¿‡æŸ¥è¯¢èµ„æ–™å¾—çŸ¥ï¼Œè¯¥é”™è¯¯æ¥è‡ªäºè¾“å…¥æ•°æ®çš„<a href="https://so.csdn.net/so/search?q=%E7%B1%BB%E5%9E%8B&amp;spm=1001.2101.3001.7020">ç±»å‹</a>å’Œæ¨¡å‹å‚æ•°ç±»å‹ä¸ä¸€è‡´ã€‚å› æ­¤æœ€å¥½åœ¨ç¨‹åºå¼€å§‹ç»Ÿä¸€æ•°æ®ç±»å‹ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ-ğŸ”…">è§£å†³æ–¹æ¡ˆ ğŸ”…</h2><h3 id="ç»Ÿä¸€ä¸ºDoubleTensor">ç»Ÿä¸€ä¸ºDoubleTensor</h3><p>Pytorché‡Œçš„<a href="https://so.csdn.net/so/search?q=tensor&amp;spm=1001.2101.3001.7020">tensor</a>åˆ›å»ºæ—¶é»˜è®¤æ˜¯Torch.FloatTensorç±»å‹ï¼ˆtorch.float32),</p><p>å¯é€šè¿‡åœ¨importè¯­å¥åå¢åŠ è¯­å¥</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.set_default_tensor_type(torch.DoubleTensor)<br></code></pre></td></tr></tbody></table></figure><p>è¿™æ ·ä¹‹ååˆ›å»ºçš„å˜é‡ç±»å‹éƒ½æ˜¯<a href="https://so.csdn.net/so/search?q=Double&amp;spm=1001.2101.3001.7020">Double</a>ç±»å‹(torch.float64)ã€‚ä¸è¿‡è¿™æ ·ä¹Ÿæœ‰äº›å ç”¨å†…å­˜å¼€é”€ã€‚</p><h3 id="ç»Ÿä¸€ä¸ºFloatTensor">ç»Ÿä¸€ä¸ºFloatTensor</h3><p>å¦‚æœæƒ³è¦åˆ›å»ºå˜é‡ç±»å‹éƒ½æ˜¯<a href="https://so.csdn.net/so/search?q=Float&amp;spm=1001.2101.3001.7020">Float</a>ç±»å‹ï¼Œåœ¨importåå¢åŠ è¯­å¥</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.set_default_tensor_type(torch.FloatTensor)<br></code></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯è¿™æ ·å·ç§¯æ“ä½œä¹Ÿä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºnumpyçš„é»˜è®¤æ•°æ®ç±»å‹ä¸ºfloat64ï¼Œè¿™æ ·åˆ›å»ºçš„tensorè¿˜æ˜¯ä¸ºdoubleç±»å‹ï¼Œè¿˜æ˜¯ä¼šå¯¼è‡´ç±»å‹ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>å› æ­¤å¦‚æœæƒ³è¦é¡¹ç›®ä¸­<a href="https://so.csdn.net/so/search?q=%E5%8F%82%E6%95%B0&amp;spm=1001.2101.3001.7020">å‚æ•°</a>ç±»å‹éƒ½ä¸ºFloatç±»å‹ï¼Œä¸ä»…è¦åŠ </p><figure class="highlight elm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">torch</span>.set_default_tensor_<span class="hljs-keyword">type</span>(torch.<span class="hljs-type">FloatTensor</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¿˜è¦å°†æ•°æ®è½¬åŒ–ä¸ºfloat32çš„æ ¼å¼ï¼š</p><p>è½¬åŒ–ä¸ºtensorç±»å‹æ—¶ï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">images = torch.<span class="hljs-constructor">Tensor(<span class="hljs-params">images</span>)</span>.<span class="hljs-built_in">float</span><span class="hljs-literal">()</span> #å¢åŠ .<span class="hljs-built_in">float</span><span class="hljs-literal">()</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨è®­ç»ƒæ•°æ®æ—¶ï¼š</p><figure class="highlight sqf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf">inputs, <span class="hljs-built_in">targets</span> = inputs.<span class="hljs-keyword">to</span>(device).<span class="hljs-keyword">to</span>(torch.float32), <span class="hljs-built_in">targets</span>.<span class="hljs-keyword">to</span>(device, non_blocking=<span class="hljs-literal">True</span>).<span class="hljs-keyword">to</span>(torch.float32)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ¥é”™è§£å†³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æŠ¥é”™è§£å†³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ä¸­çš„ç›¸å…³æ¦‚å¿µ</title>
    <link href="/2022/02/24/machine_learning/%E7%9B%91%E7%9D%A3%E6%A6%82%E5%BF%B5/"/>
    <url>/2022/02/24/machine_learning/%E7%9B%91%E7%9D%A3%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœºå™¨å­¦ä¹ ä¸­å¤§ä½“å¯ä»¥æŠŠä»»åŠ¡åˆ†ä¸ºç›‘ç£å­¦ä¹ ï¼Œæ— ç›‘ç£å­¦ä¹ ã€‚åœ¨æˆ‘ä»¬çš„å­¦ä¹ å’Œèµ„æ–™æŸ¥é˜…ä¸­ä¼šå‡ºç°ï¼ŒåŠç›‘ç£ï¼Œè‡ªç›‘ç£ï¼Œå¼±ç›‘ç£è¿™æ ·çš„è¯æ±‡ï¼Œè®©äººå¿ƒç”Ÿç–‘æƒ‘ï¼Œåœ¨æ­¤è¿›è¡Œä¸€ä¸ªæ¢³ç†ã€‚ä»¥ä¸Šå„ä¸ªæ¦‚å¿µçš„åˆ†ç±»å¹¶ä¸æ˜¯ä¸¥æ ¼äº’æ–¥çš„ã€‚</p></blockquote><h2 id="ç›‘ç£å’Œæ— ç›‘ç£-ğŸµ">ç›‘ç£å’Œæ— ç›‘ç£ ğŸµ</h2><ul><li>æœ‰ç›‘ç£ï¼šç”¨æœ‰æ ‡ç­¾çš„æ•°æ®è®­ç»ƒï¼›</li><li>æ— ç›‘ç£ï¼šç”¨æ— æ ‡ç­¾çš„æ•°æ®è®­ç»ƒï¼›</li></ul><blockquote><p>è¿™ä¸¤è€…å…¶æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºæ¨¡å‹åœ¨è®­ç»ƒæ—¶æ˜¯å¦éœ€è¦äººå·¥æ ‡æ³¨çš„æ ‡ç­¾ä¿¡æ¯ã€‚ç›‘ç£å­¦ä¹ åˆ©ç”¨å¤§é‡çš„æ ‡æ³¨æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œæ¨¡å‹çš„é¢„æµ‹å’Œæ•°æ®çš„çœŸå®æ ‡ç­¾äº§ç”ŸæŸå¤±åè¿›è¡Œåå‘ä¼ æ’­ï¼Œé€šè¿‡ä¸æ–­çš„å­¦ä¹ ï¼Œæœ€ç»ˆå¯ä»¥è·å¾—è¯†åˆ«æ–°æ ·æœ¬çš„èƒ½åŠ›ã€‚<br>æ— ç›‘ç£å­¦ä¹ ä¸ä¾èµ–ä»»ä½•æ ‡ç­¾å€¼ï¼Œé€šè¿‡å¯¹æ•°æ®å†…åœ¨ç‰¹å¾çš„æŒ–æ˜ï¼Œæ‰¾åˆ°æ ·æœ¬é—´çš„å…³ç³»ï¼Œæ¯”å¦‚èšç±»ç›¸å…³çš„ä»»åŠ¡ã€‚</p></blockquote><ul><li>åŠç›‘ç£ï¼šåŒæ—¶ç”¨æœ‰æ ‡ç­¾å’Œæ— æ ‡ç­¾çš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚ä¹Ÿå°±æ˜¯æ•°æ®é›†ä¸­å°éƒ¨åˆ†æ•°æ®æ˜¯å¸¦æ ‡ç­¾çš„ï¼›å…ˆå‰é€šå¸¸æ˜¯ä¸¤é˜¶æ®µçš„è®­ç»ƒï¼Œå…ˆç”¨ï¼ˆè¾ƒå°è§„æ¨¡çš„ï¼‰æœ‰æ ‡ç­¾æ•°æ®è®­ç»ƒä¸€ä¸ªTeacheræ¨¡å‹ï¼Œå†ç”¨è¿™ä¸ªæ¨¡å‹å¯¹ï¼ˆè¾ƒå¤§è§„æ¨¡çš„ï¼‰æ— æ ‡ç­¾æ•°æ®é¢„æµ‹ä¼ªæ ‡ç­¾ï¼Œä½œä¸ºStudentæ¨¡å‹çš„è®­ç»ƒæ•°æ®ï¼›ç›®å‰å·²ç»æœ‰å¾ˆå¤šç›´æ¥end-to-endåœ°è®­ç»ƒï¼Œå¤§å¤§å‡å°‘åŠç›‘ç£è®­ç»ƒçš„å·¥ä½œï¼›</li></ul><h2 id="è‡ªç›‘ç£å­¦ä¹ -â˜ï¸">è‡ªç›‘ç£å­¦ä¹  â˜ï¸</h2><ul><li><p>è‡ªç›‘ç£ï¼šåœ¨æ— æ ‡æ³¨æ•°æ®ä¸Šè®­ç»ƒï¼Œé€šè¿‡ä¸€äº›æ–¹æ³•è®©æ¨¡å‹å­¦ä¹ åˆ°æ•°æ®çš„inner representationï¼Œå†æ¥ä¸‹æ¸¸ä»»åŠ¡ï¼Œä¾‹å¦‚åŠ ä¸€ä¸ªmlpä½œä¸ºåˆ†ç±»å™¨ç­‰ã€‚ä½†æ¥äº†ä¸‹æ¸¸ä»»åŠ¡ä¹‹åè¿˜æ˜¯éœ€è¦åœ¨ç‰¹å®šçš„æœ‰æ ‡ç­¾æ•°æ®ä¸Šfinetuneï¼Œåªæ˜¯æœ‰æ—¶å€™å¯ä»¥é€‰æ‹©æŠŠå‰é¢çš„å±‚å®Œå…¨å›ºå®šï¼Œåªfinetuneåé¢æ¥çš„ç½‘ç»œçš„å‚æ•°ã€‚</p><p>è‡ªç›‘ç£å­¦ä¹ æ˜¯ç›‘ç£å­¦ä¹ çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå®ƒä¸ä¼—ä¸åŒï¼Œå€¼å¾—å•ç‹¬åˆ†ä¸ºä¸€ç±»ã€‚è‡ªç›‘ç£å­¦ä¹ æ˜¯æ²¡æœ‰äººå·¥æ ‡æ³¨æ ‡ç­¾çš„ç›‘ç£å­¦ä¹ ï¼Œå¯ä»¥å°†å®ƒçœ‹ä½œæ²¡æœ‰äººç±»å‚ä¸çš„ç›‘ç£å­¦ä¹ ã€‚æ ‡ç­¾ä»ç„¶å­˜åœ¨ï¼ˆå› ä¸ºæ€»è¦æœ‰ä»€ä¹ˆä¸œè¥¿æ¥ç›‘ç£å­¦ä¹ è¿‡ç¨‹ï¼‰ï¼Œä½†å®ƒä»¬æ˜¯ä»è¾“å…¥æ•°æ®ä¸­ç”Ÿæˆçš„ï¼Œé€šå¸¸ä½¿ç”¨å¯å‘å¼ç®—æ³•ç”Ÿæˆçš„ã€‚</p></li></ul><blockquote><p>å’Œæ— ç›‘ç£å­¦ä¹ ä¸åŒï¼Œè‡ªç›‘ç£å­¦ä¹ ä¸»è¦æ˜¯åˆ©ç”¨è¾…åŠ©ä»»åŠ¡ï¼ˆpretextï¼‰ä»å¤§è§„æ¨¡çš„æ— ç›‘ç£æ•°æ®ä¸­æŒ–æ˜è‡ªèº«çš„ç›‘ç£ä¿¡æ¯ï¼Œé€šè¿‡è¿™ç§æ„é€ çš„ç›‘ç£ä¿¡æ¯å¯¹ç½‘ç»œè¿›è¡Œè®­ç»ƒï¼Œä»è€Œå¯ä»¥å­¦ä¹ åˆ°å¯¹ä¸‹æ¸¸ä»»åŠ¡æœ‰ä»·å€¼çš„è¡¨å¾ã€‚æ¢å¥è¯è¯´è‡ªç›‘ç£å­¦ä¹ çš„ç›‘ç£ä¿¡æ¯ä¸æ˜¯äººå·¥æ ‡æ³¨çš„ï¼Œè€Œæ˜¯ç®—æ³•åœ¨å¤§è§„æ¨¡æ— ç›‘ç£æ•°æ®ä¸­è‡ªåŠ¨æ„é€ ç›‘ç£ä¿¡æ¯ï¼Œæ¥è¿›è¡Œç›‘ç£å­¦ä¹ æˆ–è®­ç»ƒã€‚</p></blockquote><h2 id="å¼±ç›‘ç£å­¦ä¹ -ğŸ">å¼±ç›‘ç£å­¦ä¹  ğŸ</h2><ul><li>å¼±ç›‘ç£ï¼šç”¨åŒ…å«å™ªå£°çš„æœ‰æ ‡ç­¾æ•°æ®è®­ç»ƒã€‚å¼±ç›‘ç£å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ ç›¸æ¯”ï¼Œå…¶ä½¿ç”¨æœ‰é™çš„ã€å«æœ‰å™ªå£°çš„æˆ–è€…æ ‡æ³¨ä¸å‡†ç¡®çš„æ•°æ®æ¥è¿›è¡Œæ¨¡å‹å‚æ•°çš„è®­ç»ƒã€‚</li></ul><p>ä¹Ÿå°±æ˜¯è¯´è¿™ç§ç›‘ç£å­¦ä¹ çš„æ•°æ®çš„ç¼˜æ•…ï¼Œæ˜¯ä¸€ç§æœ‰é™æœ‰ç“¶é¢ˆçš„å­¦ä¹ ã€‚æ¥æè¿°ä¸€ä¸ªä»»åŠ¡æ¯”è¾ƒå›°éš¾ï¼Œå¹¶åœ¨è¿™ç§å­¦ä¹ ä»»åŠ¡ä¸­å°†å…¶ç»Ÿç§°ä¸ºå¼±ç›‘ç£å­¦ä¹ ã€‚</p><p>æŒ‰ç…§æ•°æ®çš„æ ‡æ³¨ç¨‹åº¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼šä¸å®Œå…¨ç›‘ç£ã€ä¸ç¡®åˆ‡ç›‘ç£ã€ä¸å‡†ç¡®ç›‘ç£ã€‚</p><p><strong>1ï¼ä¸å®Œå…¨ç›‘ç£</strong><br>è‹¥æ ·æœ¬ä¸­å­˜åœ¨éƒ¨åˆ†æ•°æ®å…·æœ‰æ ‡æ³¨ä¿¡æ¯ï¼Œè€Œå‰©ä½™éƒ¨åˆ†åˆ™ä¸å…·å¤‡æœ‰æ•ˆçš„æ ‡æ³¨ï¼Œè¿™ç§ä¸ºä¸å®Œå…¨ç›‘ç£ã€‚è¿›ä¸€æ­¥ï¼Œå¦‚æœå¯¹äºé€‰å®šçš„æœªæ ‡æ³¨æ•°æ®ï¼Œå­˜åœ¨ä¸€ä¸ªç³»ç»Ÿèƒ½å¤Ÿç»™å‡ºæ•°æ®çš„æ­£ç¡®æ ‡ç­¾ï¼Œå³å…·å¤‡æŸ¥è¯¢åŠŸèƒ½ï¼Œåˆ™ä¸ºä¸å®Œå…¨ç›‘ç£ä¸­çš„ä¸»åŠ¨å­¦ä¹ ï¼Œå…¶ä½™çš„å¯åˆ’åˆ†ä¸ºåŠç›‘ç£å­¦ä¹ çš„èŒƒå›´ã€‚<br>åœ¨åŠç›‘ç£å­¦ä¹ ä¸­ï¼Œå¯¹äºæ•°æ®çš„åˆ†å¸ƒå­˜åœ¨ä¸¤ç§åŸºæœ¬å‡è®¾ï¼šèšç±»å‡è®¾å’Œæµè¡Œå‡è®¾ã€‚å‰è€…å‡è®¾æ ·æœ¬ç©ºé—´å­˜åœ¨å†…åœ¨çš„èšç±»ç»“æ„ï¼Œå› æ­¤åŒä¸€èšç±»ä¸­æ ·æœ¬çš„æ ‡ç­¾åº”è¯¥ç›¸åŒï¼›è€Œåè€…åˆ™è®¤ä¸ºæ•°æ®åˆ†å¸ƒåœ¨ä¸€ä¸ªæµè¡Œä¸Šï¼Œåœ¨æµè¡Œä¸Šç›¸è¿‘çš„æ ·æœ¬å…·æœ‰ç›¸ä¼¼çš„é¢„æµ‹ç»“æœã€‚</p><p><strong>2ï¼ä¸ç¡®åˆ‡ç›‘ç£</strong><br>å½“æ•°æ®åªå…·æœ‰ç²—ç²’åº¦çš„æ ‡ç­¾æ—¶ï¼Œè¢«ç§°ä¸ºä¸ç¡®åˆ‡ç›‘ç£ã€‚ä¾‹å¦‚åœ¨äººè„¸è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œåªå¯¹æ ·æœ¬ä¸­æ˜¯å¦å«æœ‰äººè„¸è¿›è¡Œè¯´æ˜ï¼Œä½†ä¸æä¾›äººè„¸çš„å…·ä½“ä½ç½®ï¼Œä¾¿æ˜¯ä¸€ç§å…¸å‹çš„ä¸ç¡®åˆ‡ç›‘ç£çš„é—®é¢˜ã€‚</p><p><strong>3ï¼ä¸å‡†ç¡®ç›‘ç£</strong><br>å³æ ·æœ¬è™½æœ‰å…·æœ‰æ ‡ç­¾ï¼Œä½†å¹¶ä¸å‡†ç¡®ã€‚é€ æˆè¿™ç§ç°è±¡çš„åŸå› æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚æ ‡æ³¨éš¾åº¦å¤§ã€æ ‡æ³¨äººå‘˜è‡ªèº«æ°´å¹³æœ‰é™ç­‰ã€‚</p><p><strong>å¼±ç›‘ç£å­¦ä¹ åœ¨åŒ»å­¦å½±åƒä¸­çš„åº”ç”¨</strong></p><p>åŒ»å­¦å½±åƒå› æ ‡æ³¨è¦æ±‚é«˜ã€æ•°æ®æ”¶é›†å›°éš¾ç­‰ç‰¹ç‚¹ï¼Œå¾ˆéš¾æ”¶é›†å…·æœ‰å¤§é‡æœ‰æ•ˆæ ‡æ³¨çš„åŒ»å­¦å½±åƒï¼Œå› æ­¤å¾ˆå¤šåŒ»å­¦å½±åƒåˆ†æçš„å·¥ä½œå‡é‡‡ç”¨å¼±ç›‘ç£å­¦ä¹ çš„æ€è·¯å°è¯•è§£å†³é—®é¢˜ã€‚å¼±ç›‘ç£å­¦ä¹ åœ¨æ ‡ç­¾æœ‰é™çš„æƒ…å†µä¸‹ï¼Œè¿›è¡ŒåŒ»å­¦å½±åƒçš„å¤„ç†ï¼Œè¿›è€Œå®ç°ç–¾ç—…çš„åˆ†ç±»ã€ç—…ç¶çš„å®šä½åŠåˆ†å‰²å¤šç§ä»»åŠ¡ã€‚</p><h2 id="å¼ºåŒ–å­¦ä¹ -ğŸ“ ">å¼ºåŒ–å­¦ä¹  ğŸ“ </h2><ul><li>å¼ºåŒ–å­¦ä¹ ä¸€ç›´ä»¥æ¥è¢«äººä»¬æ‰€å¿½è§†ï¼Œä½†éšç€googleçš„DeepMindå…¬å¸å°†å…¶æˆåŠŸåº”ç”¨äºå­¦ä¹ ç©Atariæ¸¸æˆï¼ˆä»¥åŠåæ¥å­¦ä¹ ä¸‹å›´æ£‹å¹¶è¾¾åˆ°æœ€é«˜æ°´å¹³ï¼‰ï¼Œæœºå™¨å­¦ä¹ çš„è¿™ä¸€åˆ†æ”¯å¼€å§‹å—åˆ°å¤§é‡å…³æ³¨ã€‚</li></ul><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæ™ºèƒ½ä½“ï¼ˆagentï¼‰æ¥æ”¶æœ‰å…³ç¯å¢ƒçš„ä¿¡æ¯ï¼Œå¹¶å­¦ä¼šé€‰æ‹©ä½¿æŸç§å¥–åŠ±æœ€å¤§åŒ–çš„è¡ŒåŠ¨ã€‚ä¾‹å¦‚ï¼Œç¥ç»ç½‘ç»œä¼šâ€œè§‚å¯Ÿâ€è§†é¢‘æ¸¸æˆçš„å±å¹•ï¼Œå¹¶è¾“å‡ºæ¸¸æˆæ“ä½œï¼Œç›®çš„æ˜¯å°½å¯èƒ½å¾—é«˜åˆ†ï¼Œè¿™ç§ç¥ç»ç½‘ç»œå¯ä»¥é€šè¿‡å¼ºåŒ–å­¦ä¹ æ¥è®­ç»ƒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬å…«ç« ç¬”è®°--è¿ç§»å­¦ä¹ </title>
    <link href="/2022/02/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML8/"/>
    <url>/2022/02/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML8/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚æœ¬ç« çš„å†…å®¹åŒ…æ‹¬è¿ç§»å­¦ä¹ ï¼Œå¯¹è§†è§‰ï¼ŒNLPä¸¤ä¸ªæ–¹é¢çš„å¾®è°ƒã€‚</p></blockquote><h1>ç¬¬å…«ç« </h1><h2 id="8-1-è¿ç§»å­¦ä¹ -ğŸ’§">8.1 è¿ç§»å­¦ä¹  ğŸ’§</h2><p>â€¢ Motivation<br>â€¢ Exploit a model trained on one task for a related task<br>â€¢ Popular in deep learning as DNNs are data hungry and training cost is high<br>â€¢ Approaches<br>â€¢ Feature extraction (e.g. Word2Vec, ResNet-50 feature, I3D feature)<br>â€¢ Train a model on a related task and reuse it<br>â€¢ Fine-tuning from a pertained model (focus of this lecture)<br>â€¢ Related to<br>â€¢ Semi-supervised learning  åŠç›‘ç£å­¦ä¹ <br>â€¢ In the extreme, zero-shot / few-shot learning<br>â€¢ Multi-task learning, where some labeled data is available for each task å¤šä»»åŠ¡å­¦ä¹ </p><ul><li>é€”å¾„ï¼š<ul><li>è®­ç»ƒå¥½æ¨¡å‹ä½œä¸ºç‰¹å¾æŠ½å–çš„æ¨¡å—</li><li>åœ¨ç›¸å…³ä»»åŠ¡ä¸Šè®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç›´æ¥åœ¨å¦å¤–ä¸€ä¸ªä»»åŠ¡ä¸Šä½¿ç”¨è¯¥æ¨¡å‹</li><li>å¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒ</li></ul></li></ul><h2 id="8-2-è®¡ç®—æœºè§†è§‰ä¸Šçš„åº”ç”¨-ğŸŒ¼">8.2 è®¡ç®—æœºè§†è§‰ä¸Šçš„åº”ç”¨ ğŸŒ¼</h2><h3 id="8-2-1-Transferring-Knowledge">8.2.1 Transferring Knowledge</h3><p>â€¢ There exists large-scale labeled CV datasets<br>â€¢ Especially for image classification, the cheapest one to label<br>â€¢ Transfer knowledge from models trained on these datasets to your CV applications (with 10-100X smaller data)</p><p>æ¯”å¦‚ï¼šImageNetæœ‰120ä¸‡å›¾ç‰‡1000ç±»å›¾ç‰‡</p><h3 id="8-2-2-é¢„è®­ç»ƒæ¨¡å‹">8.2.2 é¢„è®­ç»ƒæ¨¡å‹</h3><ul><li>Partition a neural network into:<br>â€¢ A feature extractor (encoder) maps raw pixels into linearly separable features<br>â€¢ A linear classifier (decoder) makes decisions</li><li>Pre-trained model<br>â€¢ a neural network trained on a large-scale and general enough dataset</li><li>The feature extractor may generalize well to<br>â€¢ other datasets (e.g. medical/satellite images)<br>â€¢ other tasks (e.g. object detection, segmentation)</li></ul><p>å¯ä»¥æŠŠç¥ç»ç½‘ç»œåˆ†æˆä¸¤å— encoder + decoderï¼Œè¿™æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µã€‚</p><p>encoderå°±æ˜¯ä¸€ç§ç‰¹å¾æå–å™¨ï¼ŒæŠŠåŸå§‹åƒç´ è½¬æ¢ä¸ºè¯­ä¹‰ç©ºé—´ä¸­çº¿æ€§å¯åˆ†çš„ç‰¹å¾ï¼ˆæµ…è¡¨ç¤º/è¯­ä¹‰è¡¨ç¤ºï¼‰ï¼›</p><p>decoder æ˜¯å¯¹ç¼–ç å™¨çš„è¡¨ç¤ºè¿›è¡Œä¸€äº›å†³ç­–è½¬åŒ–ä¸ºæ ‡å·ç©ºé—´ï¼›</p><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-1.png" alt=""></p><p>æ¯”å¦‚è¯´ä¸Šå›¾è¿™ä¸ªç½‘ç»œç»“æ„ï¼Œå¯ä»¥æŠŠä¸‹é¢çš„L-1å±‚ä½œä¸ºencocderï¼Œæœ€åä¸€å±‚å¯ä»¥ä½œä¸ºdecoderã€‚</p><p>é¢„è®­ç»ƒæ¨¡å‹å¯ä»¥ç†è§£ä¸ºåœ¨å¤§å‹æ•°æ®é›†ä¸Šè®­ç»ƒè¿‡çš„ï¼Œå› æ­¤æ˜¯å…·æœ‰ä¸€å®šåˆ†æ³›åŒ–èƒ½åŠ›çš„ã€‚åœ¨imagenetä¸Šè®­ç»ƒå¥½çš„ç¥ç»ç½‘ç»œå…·æœ‰ä¸€å®šçš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œè™½ç„¶å®ƒæ˜¯è‡ªç„¶å›¾ç‰‡ï¼Œä½†æ˜¯æ¢åˆ°åŒ»å­¦æ•°æ®ï¼Œå«æ˜Ÿå›¾ç‰‡ä¹Ÿæ˜¯æœ‰ä¸€å®šå¸®åŠ©çš„ã€‚</p><h3 id="8-2-3-Fine-Tuning">8.2.3 Fine-Tuning</h3><p>ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯å°†é¢„è®­ç»ƒæ¨¡å‹åªè¿›è¡Œç‰¹å¾æå–ï¼Œä¹Ÿå°±æ˜¯encoderéƒ¨åˆ†ã€‚</p><ul><li>Initialize the new model:<br>â€¢ Initialize the feature extractor with the feature extractor parameters of a pre-trained model<br>â€¢ Randomly initialize the output layer<br>â€¢ Start the parameter optimization near a local minimal</li><li>Train with a small learning rate with just a few epochs<br>â€¢   Regularize the search space</li></ul><p>å¾®è°ƒæ¯”ç›´æ¥æ›¿æ¢encoderæ›´æœ‰æ•ˆã€‚</p><p>åœ¨æ–°çš„ä»»åŠ¡ä¸Šæ„å»ºæ–°çš„æ¨¡å‹ï¼Œä½†æ˜¯ä»–çš„æ¶æ„å’Œé¢„è®­ç»ƒæ¨¡å‹æœ‰ä¸€è‡´çš„åœ°æ–¹ï¼Œå†å»åˆå§‹åŒ–æ¨¡å‹ï¼›</p><p>åˆå§‹åŒ–è¡¨ç¤ºçš„æ˜¯æŠŠé¢„è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡å¤åˆ¶åˆ°é‚£äº›ä¸€è‡´çš„åœ°æ–¹ï¼Œè€Œå¯¹decoderéƒ¨åˆ†éšæœºåˆå§‹åŒ–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼›</p><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-2.png" alt=""></p><p>ç„¶åå†è¿›è¡Œè®­ç»ƒï¼Œå¯¹äºå¦‚ä½•è®­ç»ƒä¹Ÿæœ‰ä¸€äº›æŠ€å·§ï¼Œé€šè¿‡åˆå§‹åŒ–encoderæƒé‡ï¼Œå¯ä»¥ä½¿å¾—è‡ªå·±çš„æƒé‡å€¼å·²ç»æ¯”è¾ƒæ¥è¿‘æœ€ä¼˜è§£äº†ï¼Œè¿™ä¸ªæ—¶å€™è®­ç»ƒå¯ä»¥<strong>ä½¿ç”¨æ¯”è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œé‡‡ç”¨æ›´å°çš„epochï¼Œæˆ–è€…å†»ç»“éƒ¨åˆ†å±‚</strong>ï¼Œä½¿å¾—æœç´¢ç©ºé—´æ›´å°ï¼Œé¿å…æ¢¯åº¦åç¦»ã€‚å› ä¸ºæ³›åŒ–è¯¯å·®å’Œè®­ç»ƒè¯¯å·®æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬è¦è®©æ³›åŒ–è¯¯å·®æ›´å¥½ã€‚</p><h3 id="8-2-4-Freeze-Bottom-Layers">8.2.4 Freeze Bottom Layers</h3><ul><li>Neural networks learn hierarchical features<br>â€¢ Low-level features are universal, generalize well, e.g. curves /edges / blobs<br>â€¢ High-level features are more task and dataset specific, e.g. classification labels</li><li>Freeze bottom layers during fine tuning Train the top layers from scratch<br>â€¢ Keep low-level universal features intact<br>â€¢ Focus on learning task specific features<br>â€¢ A strong regularizer</li></ul><p>é™åˆ¶æœç´¢ç©ºé—´ä¹Ÿå¯ä»¥ä½¿ç”¨å†»ç»“çš„æ–¹æ³•ï¼Œåœ¨ä¸‹é¢çš„å±‚æ˜¯å­¦ä¹ åƒç´ åº•å±‚çš„ç‰¹å¾ï¼Œæ¯”å¦‚é¢œè‰²ï¼Œçº¹ç†ï¼Œè¿™ç§ç‰¹å¾æå–æ˜¯å¯ä»¥å†»ç»“çš„ï¼Œè¶Šå¾€ä¸Šè¶Šé è¿‘è¯­ä¹‰ç›¸å…³çš„ç‰¹å¾.</p><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-3.png" alt=""></p><p>å¯¹äºç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªå¾ˆå¹³æ»‘çš„è¿‡ç¨‹ä»ä¸‹è€Œä¸Šæ…¢æ…¢å­¦ä¹ ä»»åŠ¡ï¼›ä¹Ÿå°±æ˜¯è¯´å¯¹ä¸‹é¢å‡ å±‚å¯ä»¥å›ºå®šä½ï¼›å¦‚æœåº”ç”¨å’Œé¢„è®­ç»ƒæ•°æ®å·®åˆ«æ¯”è¾ƒå¤§ï¼Œå¯ä»¥å°‘å›ºå®šå‡ å±‚ã€‚</p><h3 id="8-2-5-find-Pre-trained-Models">8.2.5 find Pre-trained Models</h3><p>â€¢ Tensorflow Hub: <a href="https://tfhub.dev/">https://tfhub.dev/</a><br>â€¢ Tensorflow models submitted by users<br>â€¢ TIMM:  <a href="https://github.com/rwightman/pytorch-image-models">https://github.com/rwightman/pytorch-image-models</a>  æœ€è¿‘æ¯”è¾ƒæµè¡Œï¼Œæ•´ç†æ¯”è¾ƒæ¸…æ™°ï¼Œä½†æ˜¯æ¨¡å‹æ€§èƒ½ä¸€èˆ¬èˆ¬<br>â€¢ PyTorch models collected by Ross Wightman</p><p>ä¹Ÿæœ‰modelhub modelzoo</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> timm<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br>model = timm.creat_model(<span class="hljs-string">'resnet18'</span>,pretrained=<span class="hljs-literal">True</span>) <span class="hljs-comment">#æ¨¡å‹å’Œé¢„è®­ç»ƒæ¨¡å‹æƒé‡</span><br>model.fc = nn.Linear(model.fc.in_features,n_classes) <span class="hljs-comment">#ä¿®æ”¹æœ€åä¸€å±‚ ä¸ªäººæ•°æ®é›†n_classes é»˜è®¤éšæœºåˆå§‹åŒ–</span><br><span class="hljs-comment"># Train model as a normal training job </span><br><span class="hljs-comment">#å›ºå®šå±‚å°±æ˜¯å¯¹å…¶å­¦ä¹ ç‡æ”¹æˆ0</span><br></code></pre></td></tr></tbody></table></figure><h3 id="8-2-6-åº”ç”¨">8.2.6 åº”ç”¨</h3><ul><li>Fine-tuning pre-trained models (on ImageNet) is widely used in various CV applications:<br>â€¢ Detection/segmentation (similar images but different targets)<br>â€¢ Medical/satellite images (same task but very different<br>images)</li><li>Fine-tuning accelerates convergence</li><li>Though not always improve accuracy<br>â€¢ Training from scratch could get a similar accuracy, especially when the target dataset is also large</li></ul><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-4.png" alt=""></p><p>å¾®è°ƒåŠ é€Ÿäº†æ”¶æ•›ï¼Œå¯¹ä»»åŠ¡ä¸åŒï¼Œæ•°æ®é›†ä¸åŒéƒ½èƒ½å¾—åˆ°ä¸é”™çš„æ•ˆæœï¼›å½“æ•°æ®é›†å’Œé¢„è®­ç»ƒæ•°æ®é›†å·®åˆ«éå¸¸å¤§ä¸ä¸€å®šä¼šæå‡ç²¾åº¦ï¼Œä½†æ˜¯ä¸ä¼šå˜å·®ã€‚</p><h3 id="8-2-7-æ€»ç»“">8.2.7 æ€»ç»“</h3><p>â€¢ Pre-train models on large-scale datasets (often image classification)<br>â€¢ Initialize weights with pre-trained models for down-stream tasks<br>â€¢ Fine-tuning accelerates converges and (sometimes) improves<br>accuracy</p><p>åœ¨å¤§å‹æ•°æ®é›†ä¸Šé¢„è®­ç»ƒæ¨¡å‹ï¼Œå¼•å…¥åˆ°è‡ªèº«çš„ä»»åŠ¡ä¸­ï¼Œå†è¿›è¡Œå¾®è°ƒã€‚è®¡ç®—æœºè§†è§‰ä¸­å¯¹æ­¤æœ‰è¾ƒå¥½çš„åº”ç”¨æ€§ã€‚</p><h2 id="8-3-NLPä¸­çš„å¾®è°ƒ-â›³ï¸">8.3 NLPä¸­çš„å¾®è°ƒ â›³ï¸</h2><h3 id="8-3-1-è‡ªç›‘ç£é¢„è®­ç»ƒ">8.3.1 è‡ªç›‘ç£é¢„è®­ç»ƒ</h3><p>â€¢ No large-scale labeled NLP dataset<br>â€¢ Large quantities of unlabeled documents<br>â€¢ Wikipedia, ebooks, crawled webpages<br>â€¢ Self-supervised pre-training<br>â€¢ Generate â€œpseudo labelâ€ and use supervised learning task<br>â€¢ Common tasks for NLP<br>â€¢ Language model (LM): predict next word. e.g. I like your hat  é¢„æµ‹ä¸‹ä¸€ä¸ªè¯<br>â€¢ Masked language model (MLM): random masked word prediction. e.g. I like your hat ç±»ä¼¼å®Œå‹å¡«ç©ºï¼ˆæ›´å®¹æ˜“ï¼‰</p><p>åœ¨NLPä¸­ä¸å­˜åœ¨å¤§å‹æ•°æ®é›†é¢„è®­ç»ƒæ¨¡å‹ï¼Œå­˜åœ¨å¤§é‡çš„æ— æ ‡æ³¨çš„æ–‡æ¡£ã€‚åœ¨NLPä¸€èˆ¬ä¼šä½¿ç”¨è‡ªç›‘ç£æ¥äº§ç”Ÿä¼ªæ ‡å·ã€‚</p><p>å¯ä»¥ä½¿ç”¨LMï¼ˆè¯­è¨€æ¨¡å‹ï¼‰å’ŒMLMï¼ˆå¸¦æ©ç çš„è¯­è¨€æ¨¡å‹ï¼‰æ¥ç”Ÿæˆæ ‡å·ã€‚</p><h3 id="8-3-2-é¢„è®­ç»ƒæ¨¡å‹">8.3.2 é¢„è®­ç»ƒæ¨¡å‹</h3><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-5.png" alt=""></p><ul><li>è¯åµŒå…¥ï¼ˆæ¯”è¾ƒæ—§ï¼‰ï¼Œåœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­æŒ‘ä¸€ä¸ªyï¼Œç”¨å·¦å³çš„è¯æ¥é¢„æµ‹yï¼Œçª—å£å¤§å°ä¸ºnï¼Œyç”¨uæ¥è¡¨ç¤ºï¼Œä¸Šä¸‹æ–‡ç”¨vè¡¨ç¤ºã€‚å¾—åˆ°yå’Œä¸Šä¸‹æ–‡çš„å…³ç³»ã€‚åœ¨é¢„æµ‹æ—¶ä½¿ç”¨è¯å…¸ä¸­çš„yå–æœ€å¤§åŒ–CBOWï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­å¿ƒè¯æ¥é¢„æµ‹å‘¨å›´è¯ã€‚å‘é‡ç©ºé—´å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šåæ˜ è¯çš„ç›¸ä¼¼åº¦ã€‚å¯ä»¥ä½¿ç”¨æŸä¸ªè¯å‘¨å›´çš„è¯æ”¾å…¥å…¬å¼å¾—åˆ°è¯¥è¯ä½œä¸ºä¸­å¿ƒè¯çš„ç‰¹å¾å‘é‡è¡¨ç¤ºã€‚</li><li>åŸºäºTransformerçš„é¢„è®­ç»ƒæ¨¡å‹ï¼ˆæœ€è¿‘ç«çƒ­ï¼‰<ul><li><strong>BERTï¼šTransformerçš„ç¼–ç å™¨ï¼Œè®­ç»ƒæ—¶ä½¿ç”¨å¸¦æ©ç çš„è¯é¢„æµ‹ã€‚ç¼–ç å™¨æ—¶åŒå‘çš„æ¨¡å‹ï¼Œæ‰€ä»¥éœ€è¦å¸¦æ©ç ï¼›</strong></li><li><strong>GPTï¼šè§£ç å™¨æ—¶ä¸€ä¸ªä»å·¦å¯¹å³çš„æ¨¡å‹ï¼Œå¯ä»¥ç”¨äºé¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼›</strong></li><li><strong>T5ï¼šåŸºäºç¼–ç å™¨å’Œè§£ç å™¨çš„æ¶æ„ã€‚</strong></li></ul></li></ul><h3 id="8-3-3-BERT">8.3.3 BERT</h3><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-6.png" alt=""></p><p>ä½¿ç”¨ä¸¤ä¸ªè®­ç»ƒä»»åŠ¡ï¼š</p><ul><li>ä½¿ç”¨masked tokenç›–ä½éƒ¨åˆ†è¯æ¥é¢„æµ‹ï¼›</li><li>ä¸€æ¬¡å¤„ç†ä¸¤ä¸ªå¥å­ï¼Œå¯ä»¥ç›¸è¿ä¸ºæ­£ä¾‹ï¼Œæ— ç›¸è¿å…³ç³»ä¸ºè´Ÿä¾‹ã€‚</li></ul><p>æ¯ä¸ªè¯ä¼šå¾—åˆ°å‘é‡è¡¨ç¤ºï¼Œè¿˜æœ‰ä¸€ä¸ªåˆ†ç±»clsæ¥åˆ†ç±»ä¸¤ä¸ªå¥å­æ˜¯å¦ç›¸è¿</p><h3 id="8-3-4-BERTå¾®è°ƒ">8.3.4 BERTå¾®è°ƒ</h3><p><img src="https://picture.mulindya.com/Blog_PracticeML/pML8-7.png" alt=""></p><p>å¾—åˆ°é¢„è®­ç»ƒæ¨¡å‹ä¹‹åå¯ä»¥è¿›è¡Œå¾®è°ƒäº†ï¼Œå¾®è°ƒçš„æ–¹æ³•å’ŒCVæ¯”è¾ƒç›¸ä¼¼ã€‚æŠŠBERTçš„æœ€åä¸€å±‚æ¥å¾®è°ƒï¼Œä»–æ˜¯æ ¹æ®ä»»åŠ¡çš„ä¸åŒè€Œä¸åŒã€‚å°†æœ€åä¸€å±‚éšæœºåˆå§‹åŒ–ï¼Œå†ä½¿ç”¨å°çš„å­¦ä¹ ç‡å¾®è°ƒã€‚</p><h3 id="8-3-5-å®è·µ">8.3.5 å®è·µ</h3><p>â€¢ BERT fine-tuning on small datasets can be unstable<br>â€¢ BERT removed bias correction steps in Adam<br>â€¢ Too few (=3) epochs<br>â€¢ Randomly initializing some top transformer layers help<br>â€¢ Features learned by top layers are too specific to the pre-training tasks<br>â€¢ The cutoff depends on downstream tasks</p><p>BERTå¾®è°ƒç»“æœå¾ˆä¸ç¨³å®šï¼Œæ˜¯ç”±äºAdamåœ¨æ¨¡å‹å‰æœŸçš„ç³»æ•°ä¼°è®¡ä¸å‡†ç¡®ï¼Œè¿™ä¸ªå‚æ•°å¯¹BERTæ— ä¼¤å¤§é›…ï¼Œå› ä¸ºæ•°æ®é‡åºå¤§ï¼Œä½†æ˜¯åœ¨è‡ªå·±çš„å°æ•°æ®é›†ä¸Šä½¿ç”¨æ—¶ä½¿ç”¨å®Œæ•´ç‰ˆçš„Adamï¼ŒBERTé»˜è®¤å¯¹ä»»åŠ¡æ—¶è®­ç»ƒ3æ¬¡ï¼Œä½†æ˜¯åœ¨å®é™…æ²¡æœ‰æ”¶æ•›ï¼Œå¾®è°ƒæ—¶å»ºè®®å¤šè®­ç»ƒå‡ è½®ã€‚</p><p>å¯¹äºTransformerå’ŒCNNæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œå¯¹äºåº•å±‚æ—¶è¯­ä¹‰å±‚æ¬¡ä¿¡æ¯ï¼Œè¶Šå‘ä¸Šå’Œæ ‡æ³¨ç©ºé—´ä¼šæ›´ç›¸ä¼¼ã€‚æ‰€ä»¥åŒæ ·å°†ä¸‹é¢çš„å±‚å†»ç»“ï¼Œè®­ç»ƒä¸Šé¢çš„å±‚ã€‚</p><h3 id="8-3-6-å¯»æ‰¾NLPé¢„è®­ç»ƒæ¨¡å‹">8.3.6 å¯»æ‰¾NLPé¢„è®­ç»ƒæ¨¡å‹</h3><p>â€¢ HuggingFace: a collection of pre-trained transformer models on<br>both PyTorch and TensorFlow</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer <br><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForSequenceClassification <br>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">"bert-base-cased"</span>) <br>inputs = tokenizer(sentences, padding=<span class="hljs-string">"max_length"</span>, truncation=<span class="hljs-literal">True</span>) <br>model = AutoModelForSequenceClassification.from_pretrained( <br>â€œbert-base-cased<span class="hljs-string">", num_labels=2) </span><br><span class="hljs-string"># Train model on inputs as a normal training job </span><br><span class="hljs-string"></span><br></code></pre></td></tr></tbody></table></figure><p>ç›®å‰å¸¸è§çš„NLPæ¨¡å‹æ¯”è¾ƒä¸»æµçš„æ˜¯HuggingFaceçš„transformersåŒ…ã€‚</p><p>NLP<strong>å…³é”®ç‚¹</strong>ï¼šå¦‚ä½•æŠŠæ–‡æ¡£è¡¨ç¤ºä¸ºä¸€ä¸ªä¸ªçš„è¯/è¯å…ƒ/token.è¿™ä¸€æ­¥å–å†³äºæ¨¡å‹ã€‚ä¸åŒçš„æ¨¡å‹æœ‰ä¸åŒçš„è¡¨ç¤ºæ–¹æ³•ï¼Œéœ€è¦æŠŠå¯¹åº”çš„å­—å…¸ç”¨ç›¸åŒçš„æ–¹å¼è¡¨ç¤ºï¼Œå¦åˆ™æ— æ³•å¯¹åº”ï¼Œå¹¶ä¸”ä»»åŠ¡ä¸åŒä¹Ÿå¯¹åº”çš„ä¸åŒã€‚</p><h3 id="8-3-7-åº”ç”¨">8.3.7 åº”ç”¨</h3><p>â€¢ â€œ(BERT) obtains new state-of-the-art results on eleven natural language processing tasksâ€, including<br>â€¢ If a sequence of words is a grammatical English sentence<br>â€¢ Sentiment of sentences from movie reviews<br>â€¢ Sentences/questions in a pair are semantically equivalent, or similar<br>â€¢ If the premise entails the hypothesis<br>â€¢ Find the span of the answer for a question<br>â€¢ â€œ(T5) achieve state-of-the-art results on many benchmarks covering<br>summarization, question answering, text classification, and moreâ€</p><p>BERTæ˜¯ç¼–ç å™¨çš„æ¶æ„ï¼Œæ‰€ä»¥æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œæ¯”å¦‚inputä¸ºä¸€æ®µè¯ç”Ÿæˆä¸€æ®µæ–°çš„å¥å­å°±æ¯”è¾ƒéš¾å®ç°ã€‚</p><p>é€‚åˆäºï¼š</p><ul><li><p>åˆ¤æ–­å¥å­å¥æ³•æ˜¯å¦æ­£ç¡®ï¼›</p></li><li><p>ç”µå½±çš„è¯„è®ºä¸ºæ­£é¢è¿˜æ˜¯è´Ÿé¢ï¼›</p></li><li><p>ä¸¤å¥è¯æˆ–æ˜¯ä¸¤ä¸ªé—®é¢˜æ˜¯å¦è¯­ä¹‰ç­‰ä»·ï¼›</p></li><li><p>å‡è®¾å’Œç»“è®ºä¹‹é—´æ˜¯å¦å­˜åœ¨åŠ å¼ºå…³ç³»ï¼›</p></li><li><p>åœ¨é—®é¢˜ä¸­æ˜¯å¦å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆçš„èŒƒå›´ï¼›</p></li></ul><h3 id="8-3-8-æ€»ç»“">8.3.8 æ€»ç»“</h3><p>â€¢ Self-supervised pre-training for NLP models<br>â€¢ A common task is (masked) language model<br>â€¢ BERT is a giant transformer encoder<br>â€¢ Downstream tasks fine-tune BERT with a consistent manner</p><p>NLPçš„é¢„è®­ç»ƒä½¿ç”¨è‡ªç›‘ç£æ¥å®Œæˆã€‚</p><ul><li><strong>BERTï¼šTransformerçš„ç¼–ç å™¨ï¼Œè®­ç»ƒæ—¶ä½¿ç”¨å¸¦æ©ç çš„è¯é¢„æµ‹ã€‚ç¼–ç å™¨æ—¶åŒå‘çš„æ¨¡å‹ï¼Œæ‰€ä»¥éœ€è¦å¸¦æ©ç ï¼›</strong></li><li><strong>GPTï¼šè§£ç å™¨æ—¶ä¸€ä¸ªä»å·¦å¯¹å³çš„æ¨¡å‹ï¼Œå¯ä»¥ç”¨äºé¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼›</strong></li><li><strong>T5ï¼šåŸºäºç¼–ç å™¨å’Œè§£ç å™¨çš„æ¶æ„ã€‚</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer61 æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­</title>
    <link href="/2022/02/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer61/"/>
    <url>/2022/02/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer61/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»è‹¥å¹²å‰¯æ‰‘å…‹ç‰Œä¸­éšæœºæŠ½ 5 å¼ ç‰Œï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªé¡ºå­ï¼Œå³è¿™5å¼ ç‰Œæ˜¯ä¸æ˜¯è¿ç»­çš„ã€‚2ï½10ä¸ºæ•°å­—æœ¬èº«ï¼ŒAä¸º1ï¼ŒJä¸º11ï¼ŒQä¸º12ï¼ŒKä¸º13ï¼Œè€Œå¤§ã€å°ç‹ä¸º 0 ï¼Œå¯ä»¥çœ‹æˆä»»æ„æ•°å­—ã€‚A ä¸èƒ½è§†ä¸º 14ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1,2,3,4,5]</span><br><span class="hljs-section">è¾“å‡º: True</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [0,0,1,2,5]</span><br><span class="hljs-section">è¾“å‡º: True</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ•°ç»„é•¿åº¦ä¸º 5</li><li>æ•°ç»„çš„æ•°å–å€¼ä¸º [0, 13]</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isStraight</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        new_nums = <span class="hljs-built_in">sorted</span>(nums)<br>        target = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>            <span class="hljs-keyword">if</span> new_nums[i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> target==-<span class="hljs-number">1</span>: <span class="hljs-comment">#æ›´æ–°0ä¸ªæ•° ä¹Ÿæ˜¯èµ·å§‹é0index</span><br>                target = i<br>            <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> new_nums[i]!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> new_nums[i]==new_nums[i-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        need = (new_nums[<span class="hljs-number">4</span>]-new_nums[target]-(<span class="hljs-number">5</span>-target)+<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> need&lt;=target<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœºå™¨å­¦ä¹ å…¬å¼æ¨å¯¼--Introduction</title>
    <link href="/2022/02/18/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%99%BD%E6%9D%BF%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/1.Intro_Math/"/>
    <url>/2022/02/18/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%99%BD%E6%9D%BF%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/1.Intro_Math/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•æœºå™¨å­¦ä¹ å…¬å¼æ¨å¯¼çš„æ–‡æ¡£ï¼Œå¥½å¥½å­¦æ•°å­¦å“¦~<br>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1aE411o7qd?p=2&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1aE411o7qd?p=2&amp;spm_id_from=pageDriver</a><br>è¯­é›€æ–‡æ¡£ï¼š<a href="https://www.yuque.com/books/share/f4031f65-70c1-4909-ba01-c47c31398466/hu0291">https://www.yuque.com/books/share/f4031f65-70c1-4909-ba01-c47c31398466/hu0291</a></p></blockquote><h1>Introduction</h1><p>å¯¹æ¦‚ç‡çš„è¯ é‡Šæœ‰ä¸¤å¤§å­¦æ´¾ï¼Œä¸€ç§æ˜¯é¢‘ç‡æ´¾å¦ä¸€ç§æ˜¯è´å¶æ–¯æ´¾ã€‚åé¢æˆ‘ä»¬å¯¹è§‚æµ‹é›†é‡‡ç”¨ä¸‹é¢è®°å·ï¼š</p>$$X_{N\times p}=(x_{1},x_{2},\cdots,x_{N})^{T},x_{i}=(x_{i1},x_{i2},\cdots,x_{ip})^{T}$$ <p>è¿™ä¸ªè®°å·è¡¨ç¤ºæœ‰ $N$ ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬éƒ½æ˜¯ $p$ ç»´å‘é‡ã€‚å…¶ä¸­æ¯ä¸ªè§‚æµ‹éƒ½æ˜¯ç”± $p(x|\theta)$ ç”Ÿæˆçš„ã€‚</p><h2 id="é¢‘ç‡æ´¾çš„è§‚ç‚¹">é¢‘ç‡æ´¾çš„è§‚ç‚¹</h2><p>$p(x|\theta)$ ä¸­çš„ $\theta$ æ˜¯ä¸€ä¸ªæœªçŸ¥å¸¸é‡ã€‚å¯¹äº $N$ ä¸ªè§‚æµ‹æ¥è¯´è§‚æµ‹é›†çš„æ¦‚ç‡ä¸º</p>$$p(X|\theta)\mathop{=}\limits _{iid}\prod\limits _{i=1}^{N}p(x_{i}|\theta))$$<p>ä¸ºäº†æ±‚ $\theta$ çš„å¤§å°ï¼Œæˆ‘ä»¬é‡‡ç”¨æœ€å¤§å¯¹æ•°ä¼¼ç„¶MLEçš„æ–¹æ³•ï¼š</p>$$\theta_{MLE}=\mathop{argmax}\limits _{\theta}\log p(X|\theta)\mathop{=}\limits _{iid}\mathop{argmax}\limits _{\theta}\sum\limits _{i=1}^{N}\log p(x_{i}|\theta)$$<p>å‡è®¾æ¯ä¸ªæ ·æœ¬$x_i$éƒ½æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒ(iid)äº$p(x_i| \theta)$,é‚£ä¹ˆæœ‰$P(X| \theta) = \prod_{i=1}^N p(x_i| \theta)$,å¯¹ä¸¤è¾¹å–å¯¹æ•°è¿ä¹˜å°±å˜æˆè¿åŠ ã€‚</p><p>é¢‘ç‡æ´¾æ¨¡å‹æ¼”åŒ–ä¸ºç»Ÿè®¡æœºå™¨å­¦ä¹ ï¼Œå…³é”®æ˜¯ä¼˜åŒ–é—®é¢˜ï¼Œå¦‚è®¾è®¡æ¨¡å‹ï¼Œloss functionï¼Œalgorithmã€‚</p><h2 id="è´å¶æ–¯æ´¾çš„è§‚ç‚¹">è´å¶æ–¯æ´¾çš„è§‚ç‚¹</h2><p>è´å¶æ–¯æ´¾è®¤ä¸º $p(x|\theta)$ ä¸­çš„ $\theta$ ä¸æ˜¯ä¸€ä¸ªå¸¸é‡**ã€‚è¿™ä¸ª $\theta$ æ»¡è¶³ä¸€ä¸ªé¢„è®¾çš„åˆ†å¸ƒ $\theta\sim p(\theta)$** ï¼Œè¿™ä¸ªé¢„è®¾çš„åˆ†å¸ƒå°±æ˜¯å…ˆéªŒï¼Œè€Œè¿™ä¸ªå…ˆéªŒæ˜¯å¯ä»¥é€šè¿‡è´å¶æ–¯å…¬å¼ç”±åéªŒå¾—åˆ°ã€‚äºæ˜¯æ ¹æ®è´å¶æ–¯å®šç†ä¾èµ–è§‚æµ‹é›†å‚æ•°çš„åéªŒå¯ä»¥å†™æˆï¼š</p>$$p(\theta|X)=\frac{p(X|\theta)\cdot p(\theta)}{p(X)}=\frac{p(X|\theta)\cdot p(\theta)}{\int\limits _{\theta}p(X|\theta)\cdot p(\theta)d\theta}$$<p>ä¸ºäº†æ±‚ $\theta$ çš„å€¼ï¼Œæˆ‘ä»¬è¦æœ€å¤§åŒ–è¿™ä¸ªå‚æ•°åéªŒMAPï¼ˆæœ€å¤§åéªŒæ¦‚ç‡ä¼°è®¡ï¼‰ï¼š</p>$$\theta_{MAP}=\mathop{argmax}\limits _{\theta}p(\theta|X)=\mathop{argmax}\limits _{\theta}p(X|\theta)\cdot p(\theta)$$<p>å…¶ä¸­ç¬¬äºŒä¸ªç­‰å·æ˜¯ç”±äºåˆ†æ¯å’Œ $\theta$ æ²¡æœ‰å…³ç³»ã€‚æ±‚è§£è¿™ä¸ª $\theta$ å€¼åè®¡ç®—</p>$$\frac{p(X|\theta)\cdot p(\theta)}{\int\limits _{\theta}p(X|\theta)\cdot p(\theta)d\theta}$$<p>ï¼Œå°±å¾—åˆ°äº†å‚æ•°çš„åéªŒæ¦‚ç‡ã€‚å…¶ä¸­ $p(X|\theta)$ å«ä¼¼ç„¶ï¼Œæ˜¯æˆ‘ä»¬çš„æ¨¡å‹åˆ†å¸ƒã€‚å¾—åˆ°äº†å‚æ•°çš„åéªŒåˆ†å¸ƒåï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªåˆ†å¸ƒç”¨äºé¢„æµ‹è´å¶æ–¯é¢„æµ‹ï¼š</p>$$p(x_{new}|X)=\int\limits _{\theta}p(x_{new}|\theta)\cdot p(\theta|X)d\theta$$ <p>å…¶ä¸­ç§¯åˆ†ä¸­çš„è¢«ä¹˜æ•°æ˜¯æ¨¡å‹ï¼Œä¹˜æ•°æ˜¯åéªŒåˆ†å¸ƒã€‚</p><p>è´å¶æ–¯æ¨¡å‹è¿›è€Œå‘å±•ä¸ºæ¦‚ç‡å›¾æ¨¡å‹ï¼Œå…³é”®å°±æ˜¯æ±‚ç§¯åˆ†ï¼ˆæ¯”å¦‚å¸¸ç”¨çš„MCMCï¼Œè’™ç‰¹å¡æ´›æ–¹æ³•ï¼‰ã€‚</p><h2 id="å°ç»“">å°ç»“</h2><p>é¢‘ç‡æ´¾å’Œè´å¶æ–¯æ´¾åˆ†åˆ«ç»™å‡ºäº†ä¸€ç³»åˆ—çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚é¢‘ç‡æ´¾çš„è§‚ç‚¹å¯¼å‡ºäº†ä¸€ç³»åˆ—çš„ç»Ÿè®¡æœºå™¨å­¦ä¹ ç®—æ³•è€Œè´å¶æ–¯æ´¾å¯¼å‡ºäº†æ¦‚ç‡å›¾ç†è®ºã€‚åœ¨åº”ç”¨é¢‘ç‡æ´¾çš„ MLE æ–¹æ³•æ—¶æœ€ä¼˜åŒ–ç†è®ºå æœ‰é‡è¦åœ°ä½ã€‚è€Œè´å¶æ–¯æ´¾çš„ç®—æ³•æ— è®ºæ˜¯åéªŒæ¦‚ç‡çš„å»ºæ¨¡è¿˜æ˜¯åº”ç”¨è¿™ä¸ªåéªŒè¿›è¡Œæ¨æ–­æ—¶ç§¯åˆ†å æœ‰é‡è¦åœ°ä½ã€‚å› æ­¤é‡‡æ ·ç§¯åˆ†æ–¹æ³•å¦‚ MCMC æœ‰å¾ˆå¤šåº”ç”¨ã€‚</p><h1>MathBasics</h1><h2 id="é«˜æ–¯åˆ†å¸ƒ">é«˜æ–¯åˆ†å¸ƒ</h2><h3 id="ä¸€ç»´æƒ…å†µ-MLE">ä¸€ç»´æƒ…å†µ MLE</h3><p>é«˜æ–¯åˆ†å¸ƒåœ¨æœºå™¨å­¦ä¹ ä¸­å æœ‰ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚åœ¨ MLE æ–¹æ³•ä¸­ï¼š</p>$$\theta=(\mu,\Sigma)=(\mu,\sigma^{2}),\theta_{MLE}=\mathop{argmax}\limits _{\theta}\log p(X|\theta)\mathop{=}\limits _{iid}\mathop{argmax}\limits _{\theta}\sum\limits _{i=1}^{N}\log p(x_{i}|\theta)$$<p>ä¸€èˆ¬åœ°ï¼Œé«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°å†™ä¸ºï¼š</p>$$p(x|\mu,\Sigma)=\frac{1}{(2\pi)^{p/2}|\Sigma|^{1/2}}e^{-\frac{1}{2}(x-\mu)^{T}\Sigma^{-1}(x-\mu)}  $$<p>å…¶ä¸­ $\Sigma$è¡¨ç¤ºåˆ†å¸ƒçš„åæ–¹å·®çŸ©é˜µï¼Œåœ¨ä¸€ç»´çš„æƒ…å†µå…¶åæ–¹å·®çŸ©é˜µå³ä¸ºè¯¥æ–¹å·®çš„1X1çŸ©é˜µã€‚</p><p>å¸¦å…¥ MLE ä¸­æˆ‘ä»¬è€ƒè™‘ä¸€ç»´çš„æƒ…å†µ</p>$$\log p(X|\theta)=\sum\limits _{i=1}^{N}\log p(x_{i}|\theta)=\sum\limits _{i=1}^{N}\log\frac{1}{\sqrt{2\pi}\sigma}\exp(-(x_{i}-\mu)^{2}/2\sigma^{2})$$<p>é¦–å…ˆå¯¹ $\mu$ çš„æå€¼å¯ä»¥å¾—åˆ° ï¼š</p>$$\mu_{MLE}=\mathop{argmax}\limits _{\mu}\log p(X|\theta)=\mathop{argmax}\limits _{\mu}\sum\limits _{i=1}^{N}(x_{i}-\mu)^{2}$$ <p>äºæ˜¯ï¼š</p>$$\frac{\partial}{\partial\mu}\sum\limits _{i=1}^{N}(x_{i}-\mu)^{2}=0\longrightarrow\mu_{MLE}=\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}$$<p>å°±å¯ä»¥å¾—åˆ°$\mu$çš„ä¼°è®¡å€¼ã€‚</p><p>å…¶æ¬¡å¯¹ $\theta$ ä¸­çš„å¦ä¸€ä¸ªå‚æ•° $\sigma$ ï¼Œæœ‰ï¼š</p>$$\begin{align}\sigma_{MLE}=\mathop{argmax}\limits _{\sigma}\log p(X|\theta)&amp;=\mathop{argmax}\limits _{\sigma}\sum\limits _{i=1}^{N}[-\log\sigma-\frac{1}{2\sigma^{2}}(x_{i}-\mu)^{2}]\nonumber\\&amp;=\mathop{argmin}\limits _{\sigma}\sum\limits _{i=1}^{N}[\log\sigma+\frac{1}{2\sigma^{2}}(x_{i}-\mu)^{2}]\end{align}$$<p>äºæ˜¯ï¼š</p>$$\frac{\partial}{\partial\sigma}\sum\limits _{i=1}^{N}[\log\sigma+\frac{1}{2\sigma^{2}}(x_{i}-\mu)^{2}]=0\longrightarrow\sigma_{MLE}^{2}=\frac{1}{N}\sum\limits _{i=1}^{N}(x_{i}-\mu)^{2}$$<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„æ¨å¯¼ä¸­ï¼Œé¦–å…ˆå¯¹ $\mu$ æ±‚ MLEï¼Œ ç„¶ååˆ©ç”¨è¿™ä¸ªç»“æœæ±‚ $\sigma_{MLE}$ ï¼Œå› æ­¤å¯ä»¥é¢„æœŸçš„æ˜¯å¯¹æ•°æ®é›†æ±‚æœŸæœ›æ—¶ $\mathbb{E}<em>{\mathcal{D}}[\mu</em>{MLE}]$ æ˜¯æ— åå·®çš„ï¼š</p>$$\mathbb{E}_{\mathcal{D}}[\mu_{MLE}]=\mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}]=\frac{1}{N}\sum\limits _{i=1}^{N}\mathbb{E}_{\mathcal{D}}[x_{i}]=\mu$$<p>ä½†æ˜¯å½“å¯¹ $\sigma_{MLE}$ æ±‚ æœŸæœ›çš„æ—¶å€™ç”±äºä½¿ç”¨äº†<strong>å•ä¸ªæ•°æ®é›†</strong>çš„ $\mu_{MLE}$,å…¶æ–¹å·®ä¼šæ¯”çœŸå®çš„æ–¹å·®æ›´å°ï¼Œå› æ­¤å¯¹æ‰€æœ‰æ•°æ®é›†æ±‚æœŸæœ›çš„æ—¶å€™æˆ‘ä»¬ä¼šå‘ç° $\sigma_{MLE}$ æ˜¯ æœ‰åçš„ï¼š</p>$$\begin{align}\mathbb{E}_{\mathcal{D}}[\sigma_{MLE}^{2}]&amp;=\mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}(x_{i}-\mu_{MLE})^{2}]=\mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}(x_{i}^{2}-2x_{i}\mu_{MLE}+\mu_{MLE}^{2})\nonumber\\&amp;=\mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}^{2}-\mu_{MLE}^{2}]=\mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}^{2}-\mu^{2}+\mu^{2}-\mu_{MLE}^{2}]\nonumber\\&amp;= \mathbb{E}_{\mathcal{D}}[\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}^{2}-\mu^{2}]-\mathbb{E}_{\mathcal{D}}[\mu_{MLE}^{2}-\mu^{2}]=\sigma^{2}-(\mathbb{E}_{\mathcal{D}}[\mu_{MLE}^{2}]-\mu^{2})\nonumber\\&amp;=\sigma^{2}-(\mathbb{E}_{\mathcal{D}}[\mu_{MLE}^{2}]-\mathbb{E}_{\mathcal{D}}^{2}[\mu_{MLE}])=\sigma^{2}-Var[\mu_{MLE}]\nonumber\\&amp;=\sigma^{2}-Var[\frac{1}{N}\sum\limits _{i=1}^{N}x_{i}]=\sigma^{2}-\frac{1}{N^{2}}\sum\limits _{i=1}^{N}Var[x_{i}]=\frac{N-1}{N}\sigma^{2}\end{align}$$<p>æ‰€ä»¥ï¼š</p>$$\hat{\sigma}^{2}=\frac{1}{N-1}\sum\limits _{i=1}^{N}(x_{i}-\mu)^{2}$$]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>å…¬å¼æ¨å¯¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å…¬å¼æ¨å¯¼</tag>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®ºæ–‡ä¸­çš„å„ç§åŠ å™ªæ–¹å¼</title>
    <link href="/2022/02/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/paper-noise/"/>
    <url>/2022/02/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E5%8E%BB%E5%99%AA/paper-noise/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•´ç†è®ºæ–‡ä¸­çš„åŠ å™ªæ–¹å¼</p><p>å‚è€ƒè®ºæ–‡å…·ä½“å¦‚ä¸‹ï¼š</p><p><strong>Adaptive Consistency Prior based Deep Network for Image Denoising</strong><br>Paperï¼š<a href="https://readpaper.com/pdf-annotate/note?noteId=652422328685277184&amp;pdfId=630634874308022272">https://readpaper.com/pdf-annotate/note?noteId=652422328685277184&amp;pdfId=630634874308022272</a> (ç¬”è®°)<br>Codeï¼š<a href="https://github.com/chaoren88/DeamNet/tree/827c736dec2fe675e7bf4de06c3f026d9aaf4dbf">https://github.com/chaoren88/DeamNet/tree/827c736dec2fe675e7bf4de06c3f026d9aaf4dbf</a></p><p><strong>Unpaired Learning of Deep Image Denoising</strong><br>Paperï¼š<a href="https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123610732.pdf">https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123610732.pdf</a><br>Codeï¼š<a href="https://github.com/majedelhelou/SFM">https://github.com/majedelhelou/SFM</a></p><p><strong>Learning Graph-Convolutional Representations for Point Cloud Denoising</strong><br>Paperï¼š<a href="https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123650103.pdf">https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123650103.pdf</a><br>Codeï¼š<a href="https://github.com/diegovalsesia/GPDNet">https://github.com/diegovalsesia/GPDNet</a></p><p><strong>Spatial-Adaptive Network for Single Image Denoising</strong><br>Paperï¼š<a href="https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123750171.pdf">https://www.ecva.net/papers/eccv_2020/papers_ECCV/papers/123750171.pdf</a><br>Code:<a href="https://github.com/JimmyChame/SADNet">https://github.com/JimmyChame/SADNet</a></p></blockquote><h2 id="1ï¼ŒAdaptive-Consistency-Prior-based-Deep-Network-for-Image-Denoising">1ï¼ŒAdaptive Consistency Prior based Deep Network for Image Denoising</h2><h4 id="å®éªŒéƒ¨åˆ†">å®éªŒéƒ¨åˆ†</h4><p>åˆ†ä¸ºå¯¹åˆæˆå™ªå£°æ•°æ®é›†å’ŒçœŸå®æ•°æ®é›†ä¸Šå»å™ªä¸¤ä¸ªæ¨¡å—ã€‚</p><p><strong>å™ªå£°ç±»å‹</strong>ï¼š åŠ æ€§é«˜æ–¯ç™½å™ªå£°AWGN(Additive White Gaussian Noise)  ï¼ˆåœ¨è®ºæ–‡ä¸­æåˆ°çš„å¼ºåº¦å¯¹æ¯” 15, 25 and 50.ï¼‰</p><ul><li>è®­ç»ƒéƒ¨åˆ†</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">parser.add_argument(<span class="hljs-string">"--noiseL"</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">25</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">'noise level'</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train</span>(<span class="hljs-params">epoch</span>):</span><br>    epoch_loss = <span class="hljs-number">0</span><br>    model.train()<br>    <span class="hljs-keyword">for</span> iteration, batch <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(training_data_loader, <span class="hljs-number">1</span>):<br>        target = Variable(batch)<br>        noise = torch.FloatTensor(target.size()).normal_(mean=<span class="hljs-number">0</span>, std=opt.val_noiseL / <span class="hljs-number">255.</span>)<br>        <span class="hljs-built_in">input</span> = target + noise<br>        .....<br></code></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•éƒ¨åˆ†ï¼ˆåˆæˆï¼‰</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">parser.add_argument(<span class="hljs-string">"--test_noiseL"</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">15</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">'noise level used on test set'</span>) <span class="hljs-comment">#å™ªå£°å¼ºåº¦</span><br>opt = parser.parse_args()<br><br>ISource = torch.Tensor(Img)    <br><span class="hljs-comment"># noise</span><br>noise = torch.FloatTensor(ISource.size()).normal_(mean=<span class="hljs-number">0</span>, std=opt.test_noiseL / <span class="hljs-number">255.</span>) <span class="hljs-comment">#é«˜æ–¯å™ªå£°</span><br><span class="hljs-comment"># noisy image</span><br>INoisy = ISource + noise <span class="hljs-comment">#åŠ æ€§</span><br>ISource, INoisy = Variable(ISource.cuda()), Variable(INoisy.cuda())<br></code></pre></td></tr></tbody></table></figure><p>çœŸå®æ•°æ®é›†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__getitem__</span>(<span class="hljs-params">self, index</span>):</span><br>    clean = Image.<span class="hljs-built_in">open</span>(self.path[index])<br><br>    <span class="hljs-keyword">if</span> self.transform:<br>        clean = self.transform(clean)<br><br>    noise = torch.randn(clean.size()).mul_(self.sigma/<span class="hljs-number">255.0</span>) <span class="hljs-comment">#å™ªå£°ï¼Ÿ</span><br>    noisy = clean + noise<br>    noisy = torch.clamp(noisy, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)<br>    <span class="hljs-keyword">return</span> noisy, clean<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿™é‡ŒåŠ å™ªä»£ç å­˜ç–‘</p><p>è®ºæ–‡ä¸­å¯¹çœŸå®æ•°æ®é›†çš„å»å™ªç»†èŠ‚ä¸­å†™é“ï¼š</p><p>ç”±äºçœŸå®å™ªå£°é€šå¸¸æ˜¯ä¿¡å·ç›¸å…³çš„ï¼Œå¹¶ä¸”éšç€æ‘„åƒæœºå†…ç®¡çº¿çš„ä¸åŒï¼ŒçœŸå®å›¾åƒå»å™ªé€šå¸¸æ˜¯ä¸€é¡¹æå…·æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ï¼Œä¸ºäº†è¿›ä¸€æ­¥å±•ç¤ºDeamNetå¯¹çœŸå®å™ªå£°çš„æ³›åŒ–èƒ½åŠ›ï¼Œé€‰æ‹©DNDåŸºå‡†ã€SIDDåŸºå‡†å’ŒRNI15æ•°æ®é›†ä½œä¸ºæµ‹è¯•æ•°æ®é›†ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºDNDå’ŒSIDDåŸºå‡†ï¼Œå‡ ä¹æ— å™ªéŸ³çš„å›¾åƒä¸æ˜¯å…¬å¼€çš„ï¼Œä½†PSNR/SSIMç»“æœå¯ä»¥é€šè¿‡ä»–ä»¬çš„åœ¨çº¿æœåŠ¡å™¨è·å¾—ã€‚è€Œå¯¹äºRNI15ï¼Œåªæœ‰å™ªå£°å›¾åƒå¯ç”¨ã€‚</p></blockquote><h4 id="åˆæˆå™ªå£°æ•°æ®é›†ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰">åˆæˆå™ªå£°æ•°æ®é›†ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰</h4><p><strong>è®­ç»ƒæ•°æ®é›†</strong>åŒ…æ‹¬ï¼š</p><ol><li><p>the Berke-ley Segmentation Dataset (BSD)  æ˜¯ä¸ºå›¾åƒåˆ†å‰²å’Œè¾¹ç•Œæ£€æµ‹çš„ç ”ç©¶æä¾›ç»éªŒåŸºç¡€çš„æ•°æ®é›†ï¼ŒåŒ…å«æ¥è‡ª 30 ä¸ªäººç±»å—è¯•è€…çš„ 1000 ä¸ªæ‰‹å·¥æ ‡è®°çš„ 1000 ä¸ª Corel æ•°æ®é›†å›¾åƒçš„åˆ†å‰²ï¼Œå…¶ä¸­ä¸€åŠçš„åˆ†å‰²æ˜¯é€šè¿‡å‘ä¸»ä½“å‘ˆç°å½©è‰²å›¾åƒè€Œè·å¾—çš„; å¦ä¸€åŠæ¥è‡ªå‘ˆç°ç°åº¦å›¾åƒã€‚</p></li><li><p>Div2Kï¼šæ•°æ®é›†æœ‰1000å¼ é«˜æ¸…å›¾(2Kåˆ†è¾¨ç‡)ï¼Œå…¶ä¸­800å¼ ä½œä¸ºè®­ç»ƒï¼Œ100å¼ ä½œä¸ºéªŒè¯ï¼Œ100 å¼ ä½œä¸ºæµ‹è¯•ã€‚</p></li></ol><p>ä¸‰ä¸ªæ ‡å‡†<strong>åŸºçº¿æ•°æ®é›†</strong>è¿›è¡Œäº†è¯„ä¼° ï¼ˆæŒ‡æ ‡ï¼šPSNR and SSIMï¼‰</p><ol><li><p>Set12ï¼šæ•°å­—å›¾åƒå¤„ç†å¸¸ç”¨æ•°æ®é›†Set12ï¼Œ12å¼ ç°åº¦å›¾ï¼ˆå«lenaï¼Œcameramanï¼Œhouseï¼Œpepperï¼Œfishstarï¼Œmonarchï¼Œairplaneï¼Œparrotï¼Œbarbaraï¼Œshipï¼Œmanï¼Œcoupleï¼‰ï¼Œ01-07æ˜¯256*256,08-12æ˜¯512*512.</p></li><li><p>BSD68  æ•°å­—å›¾åƒå¤„ç†å¸¸ç”¨æ•°æ®é›†BSD68ï¼Œ68å¼ ç°åº¦å›¾ï¼Œå¤§å°ä¸ä¸€ã€‚</p></li><li><p>Urban100  ï¼šä¸€ä¸ªç”¨äºè¶…åˆ†è¾¨ç‡å’Œå›¾åƒé‡å»ºçš„æ•°æ®é›† Urban100ï¼Œæ€»è®¡100å¼ å»ºç­‘é«˜æ¸…å›¾ç‰‡ï¼ŒåŒæ—¶å¯¹åº”äº†100å¼ é™ä½åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚</p></li></ol><h4 id="çœŸå®å™ªå£°æ•°æ®é›†">çœŸå®å™ªå£°æ•°æ®é›†</h4><h5 id="è®­ç»ƒæ•°æ®é›†">è®­ç»ƒæ•°æ®é›†</h5><ol><li>SIDDï¼šæ™ºèƒ½æ‰‹æœºå›¾åƒå»å™ªæ•°æ®é›†ï¼ˆSIDDï¼‰ä½¿ç”¨5ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„æ™ºèƒ½æ‰‹æœºæ‘„åƒå¤´ï¼Œä»10ä¸ªåœºæ™¯ä¸­æå–çº¦30000ä¸ªå™ªå£°å›¾åƒï¼Œå¹¶ç”Ÿæˆå®ƒä»¬çœŸå®çš„åœºæ™¯å›¾åƒã€‚</li><li>RENOIRï¼šä¸€ä¸ªçœŸå®çš„å›¾åƒé™å™ªæ•°æ®é›†ï¼ŒåŒ…å«äº†3ä¸ªå­æ•°æ®é›†ï¼Œåˆ†åˆ«æ˜¯Xiaomi Mi3ï¼ŒCanon S90ï¼ŒCanon T3iæ‹æ‘„ï¼Œæ‹¥æœ‰ä½å™ªå’Œé«˜å™ªå¯¹æ¯”å›¾ã€‚</li></ol><h5 id="æµ‹è¯•æ•°æ®é›†">æµ‹è¯•æ•°æ®é›†</h5><ul><li><p>DNDï¼šæ˜¯ç”±50å¹…çœŸå®ä¸–ç•Œçš„å™ªå£°å›¾åƒç»„æˆçš„ï¼Œä½†æ²¡æœ‰å‡ ä¹æ²¡æœ‰å™ªå£°çš„å¯¹åº”å›¾åƒã€‚é€šå¸¸ï¼Œå¯ä»¥é€šè¿‡å°†å»å™ªå›¾åƒä¸Šä¼ åˆ°DNDç½‘ç«™æ¥è·å¾—PSNR/SSIMç»“æœã€‚</p></li><li><p>SIDDï¼šæä¾›320å¯¹å™ªå£°å›¾åƒå’Œè¿‘æ— å™ªå£°å›¾åƒç”¨äºè®­ç»ƒï¼Œ1280ä¸ªå›¾åƒpatchç”¨äºéªŒè¯ã€‚PSNR/SSIMç»“æœå¯ä»¥é€šè¿‡å°†å»å™ªå›¾åƒæäº¤åˆ°SIDDç½‘ç«™è·å¾—ã€‚</p></li><li><p>RNI15ï¼šæä¾›äº†15å¹…çœŸå®å™ªå£°å›¾åƒã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ°é¢çœŸå®çš„å¹²å‡€å›¾åƒä¸å¯ç”¨ï¼Œå› æ­¤æˆ‘ä»¬åªå±•ç¤ºRNI15çš„è§†è§‰ç»“æœã€‚</p></li></ul><h4 id="æ•°æ®å¢å¼º">æ•°æ®å¢å¼º</h4><p>æˆ‘ä»¬å°†è¿™äº›è®­ç»ƒå›¾åƒå¯¹éšæœºè£å‰ªæˆå¤§å°ä¸º128Ã—128çš„å°å—ã€‚ä¸ºäº†å¢åŠ è®­ç»ƒæ ·æœ¬ï¼Œé‡‡ç”¨äº†180åº¦çš„æ—‹è½¬å’Œæ°´å¹³ç¿»è½¬ã€‚</p><h4 id="å¯¹æ¯”ç½‘ç»œ">å¯¹æ¯”ç½‘ç»œ</h4><ul><li><p>TNRD</p></li><li><p>DnCNN</p></li><li><p>FFDNet</p></li><li><p>RED</p></li><li><p>MemNet</p></li><li><p>UNLNet</p></li><li><p>CFSNet</p></li><li><p>N3Net</p></li><li><p>ADNet</p></li><li><p>BRDNet</p></li><li><p>RIDNet</p></li></ul><h5 id="åˆæˆæ•°æ®é›†æ•ˆæœ">åˆæˆæ•°æ®é›†æ•ˆæœ</h5><p><img src="https://picture.mulindya.com/deamnet1.png" alt=""></p><h5 id="çœŸå®æ•°æ®é›†æ•ˆæœ">çœŸå®æ•°æ®é›†æ•ˆæœ</h5><p><img src="https://picture.mulindya.com/deamnet2.png" alt=""></p><h2 id="2ï¼ŒUnpaired-Learning-of-Deep-Image-Denoising">2ï¼ŒUnpaired Learning of Deep Image Denoising</h2><ul><li><p>AWGN                                       (ä»£ç ä¸­ä¸ºgaussian)</p></li><li><p>heteroscedastic Gaussian  ï¼ˆä»£ç ä¸­ä¸ºpoisson_gaussianï¼‰</p></li></ul><p><img src="C:%5CUsers%5C86137%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220216152531550.png" alt="image-20220216152531550"></p><ul><li>å‚æ•° $\alpha$  å’Œ$\sigma$  åˆ†åˆ«è¡¨ç¤ºæ··åˆå™ªå£°ä¸­Poissonåˆ†é‡å’ŒGaussianåˆ†é‡çš„å¼ºåº¦ã€‚</li><li>multivariate Gaussian        ï¼ˆä»£ç ä¸­ä¸ºmultivariate_gaussianï¼‰å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ</li></ul><h3 id="ä»£ç ">ä»£ç </h3><p>è·¯å¾„ï¼šDBSN/dbsn_cocor/data/dn_dataset.py</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DnDataset</span>(<span class="hljs-params">BaseDataset</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, opt, split, dataset_name, noiseL</span>):</span><br>        <span class="hljs-built_in">super</span>(DnDataset, self).__init__(opt, split, dataset_name)        <br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(noiseL) == <span class="hljs-number">1</span>:<br>            self.noiseL = noiseL[<span class="hljs-number">0</span>]<br>            self.get_noiseL = self._get_noiseL_1<br>        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(noiseL) == <span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">if</span> self.noise_type.lower==<span class="hljs-string">'gaussian'</span>:<br>                self.noiseL = noiseL<br>                self.get_noiseL = self._get_noiseL_2<br>            <span class="hljs-keyword">else</span>:<br>                self.noiseL = noiseL<br>                self.get_noiseL = self._get_noiseL_1<br>        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(noiseL) == <span class="hljs-number">3</span>:<br>            self.noiseL_p = [noiseL[<span class="hljs-number">0</span>], noiseL[<span class="hljs-number">1</span>]]<br>            self.noiseL_g = [noiseL[<span class="hljs-number">0</span>], noiseL[<span class="hljs-number">2</span>]]<br>            self.get_noiseL_p = self._get_noiseL_p<br>            self.get_noiseL_g = self._get_noiseL_g<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'noiseL should have one or two or three values'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="AWGN">AWGN</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_add_noise_gaussian</span>(<span class="hljs-params">self, img</span>):</span><br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(seed=<span class="hljs-number">0</span>)<br>    noise = np.random.normal(<span class="hljs-number">0</span>, self.get_noiseL()/<span class="hljs-number">255.</span>,<br>                            img.shape).astype(np.float32) <br>    <span class="hljs-keyword">return</span> img + noise <br></code></pre></td></tr></tbody></table></figure><h4 id="heteroscedastic-Gaussian">heteroscedastic Gaussian</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_add_noise_poisson_gaussian</span>(<span class="hljs-params">self, img</span>):</span><br>    <span class="hljs-comment"># implemented in paper</span><br>    noiseLevel = [v/<span class="hljs-number">255.</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self.get_noiseL()]<br>    sigma_s = noiseLevel[<span class="hljs-number">0</span>]<br>    sigma_c = noiseLevel[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(seed=<span class="hljs-number">0</span>)<br>    n1 = np.random.randn(*img.shape)*sigma_s*img<br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(seed=<span class="hljs-number">0</span>)<br>    n2 = np.random.randn(*img.shape)*sigma_c<br>    noise = (n1 + n2).astype(np.float32)<br>    <span class="hljs-keyword">return</span> img + noise <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_add_noise_poisson_gaussian_blind</span>(<span class="hljs-params">self, img</span>):</span><br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(seed=<span class="hljs-number">0</span>)<br>    sigma_s = [v/<span class="hljs-number">255.</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self.get_noiseL_p()]<br>    sigma_c = [v/<span class="hljs-number">255.</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self.get_noiseL_g()]<br>    noiseL = np.sqrt((sigma_s**<span class="hljs-number">2</span>)*img+(sigma_c**<span class="hljs-number">2</span>))<br>    noise = (np.random.randn(*img.shape)*noiseL).astype(np.float32)<br>    <span class="hljs-keyword">return</span> img + noise <br></code></pre></td></tr></tbody></table></figure><h4 id="multivariate-Gaussian">multivariate Gaussian</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_add_noise_multivariate_gaussian</span>(<span class="hljs-params">self, img</span>):</span><br>    _,H,W=img.shape<br>    L=<span class="hljs-number">75</span>/<span class="hljs-number">255</span><br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(seed=<span class="hljs-number">0</span>)<br>        D=np.diag(np.random.rand(<span class="hljs-number">3</span>))<br>        np.random.seed(<span class="hljs-number">0</span>)<br>        U=orth(np.random.rand(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>))<br>    <span class="hljs-keyword">else</span>:<br>        D=np.diag(np.random.rand(<span class="hljs-number">3</span>))<br>        U=orth(np.random.rand(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>))<br>    tmp = np.matmul(D, U)<br>    tmp = np.matmul(U.T,np.matmul(D, U))<br>    tmp = (L**<span class="hljs-number">2</span>)*tmp<br>    noiseSigma=np.<span class="hljs-built_in">abs</span>(tmp)<br>    <span class="hljs-keyword">if</span> self.split == <span class="hljs-string">'val'</span>:<br>        np.random.seed(<span class="hljs-number">0</span>)<br>    noise = np.random.multivariate_normal([<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], noiseSigma, (H,W)).astype(np.float32)<br>    noise = noise.transpose(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> img + noise    <br></code></pre></td></tr></tbody></table></figure><h2 id="3ï¼ŒStochastic-Frequency-Masking-to-Improve-Super-Resolution-and-Denoising-Networks">3ï¼ŒStochastic Frequency Masking to Improve Super-Resolution and Denoising Networks</h2><h3 id="å™ªå£°ç±»å‹">å™ªå£°ç±»å‹</h3><p>è®ºæ–‡ä¸­çš„æåˆ°çš„ä¸¤ç§å™ªå£°**AWGN(å¼ºåº¦ 10 20 30 40 50 60 70 80 90 100 )Poisson-Gaussian **</p><h3 id="è®­ç»ƒä»£ç ä¸­åŠ å™ª">è®­ç»ƒä»£ç ä¸­åŠ å™ª</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ADD Noise</span><br>img_train = data<br>            <br>noise = torch.zeros(img_train.size())<br>noise_level_train = torch.zeros(img_train.size())<br>stdN = np.random.uniform(noiseL_B[<span class="hljs-number">0</span>], noiseL_B[<span class="hljs-number">1</span>], size=noise.size()[<span class="hljs-number">0</span>])<br>sizeN = noise[<span class="hljs-number">0</span>,:,:,:].size()<br>            <br><span class="hljs-comment"># Noise Level map preparation (each step)</span><br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(noise.size()[<span class="hljs-number">0</span>]):<br>    noise[n,:,:,:] = torch.FloatTensor(sizeN).normal_(mean=<span class="hljs-number">0</span>, std=stdN[n]/<span class="hljs-number">255.</span>)<br>    noise_level_value = stdN[n] / noiseL_B[<span class="hljs-number">1</span>]<br>    noise_level_train[n,:,:,:] = torch.FloatTensor( np.ones(sizeN) )<br>    noise_level_train[n,:,:,:] = noise_level_train[n,:,:,:] * noise_level_value<br>noise_level_train = Variable(noise_level_train.cuda())<br><br><span class="hljs-comment"># Modifying the frequency content of the added noise (Low or High only)</span><br><span class="hljs-keyword">if</span> opt.mask_train_noise <span class="hljs-keyword">in</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]):<br>    noise_mask = get_mask_low_high(w=sizeN[<span class="hljs-number">1</span>], h=sizeN[<span class="hljs-number">2</span>], radius_perc=<span class="hljs-number">0.5</span>, mask_mode=opt.mask_train_noise)<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(noise.size()[<span class="hljs-number">0</span>]):<br>        noise_dct = dct(dct(noise[n,<span class="hljs-number">0</span>,:,:].data.numpy(), axis=<span class="hljs-number">0</span>, norm=<span class="hljs-string">'ortho'</span>), axis=<span class="hljs-number">1</span>, norm=<span class="hljs-string">'ortho'</span>)<br>        noise_dct = noise_dct * noise_mask<br>        noise_numpy = idct(idct(noise_dct, axis=<span class="hljs-number">0</span>, norm=<span class="hljs-string">'ortho'</span>), axis=<span class="hljs-number">1</span>, norm=<span class="hljs-string">'ortho'</span>)<br>        noise[n,<span class="hljs-number">0</span>,:,:] = torch.from_numpy(noise_numpy)<br><span class="hljs-keyword">elif</span> opt.mask_train_noise == <span class="hljs-number">3</span>: <span class="hljs-comment">#Brownian noise</span><br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(noise.size()[<span class="hljs-number">0</span>]):<br>        noise_numpy = gaussian_filter(noise[n,<span class="hljs-number">0</span>,:,:].data.numpy(), sigma=<span class="hljs-number">3</span>)<br>        noise[n,<span class="hljs-number">0</span>,:,:] = torch.from_numpy(noise_numpy)<br></code></pre></td></tr></tbody></table></figure><h3 id="testä»£ç ä¸­åŠ å™ª">testä»£ç ä¸­åŠ å™ª</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_varying_noise</span>(<span class="hljs-params">image_size, noise_std_min, noise_std_max</span>):</span><br>    <span class="hljs-string">''' outputs a noise image of size image_size, with varying noise levels, ranging from noise_std_min to noise_std_max</span><br><span class="hljs-string">    the noise level increases linearly with the number of rows in the image '''</span><br>    noise = torch.FloatTensor(image_size).normal_(mean=<span class="hljs-number">0</span>, std=<span class="hljs-number">0</span>).cuda()<br><br>    row_size = torch.Size([image_size[<span class="hljs-number">0</span>], image_size[<span class="hljs-number">1</span>], image_size[<span class="hljs-number">2</span>]])<br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(image_size[<span class="hljs-number">3</span>]):<br>        std_value = noise_std_min + (noise_std_max-noise_std_min) * (row/(image_size[<span class="hljs-number">3</span>]*<span class="hljs-number">1.0</span>-<span class="hljs-number">1</span>))<br>        noise[:,:,:,row] = torch.FloatTensor(row_size).normal_(mean=<span class="hljs-number">0</span>, std=std_value/<span class="hljs-number">255.</span>).cuda()<br><br>    <span class="hljs-keyword">return</span> noise<br>åç»­å›¾ç‰‡åŠ ä¸Šå™ªå£°<br></code></pre></td></tr></tbody></table></figure><h2 id="4ï¼ŒSpatial-Adaptive-Network-for-Single-Image-Denoising">4ï¼ŒSpatial-Adaptive Network for Single Image Denoising</h2><h3 id="åˆæˆå™ªå£°">åˆæˆå™ªå£°</h3><p>æµ‹è¯•æ•°æ®é›†ï¼šBSD68ï¼ŒKODAK24</p><p><strong>å™ªå£°ï¼šåœ¨é—´éš™ä¸­åŠ å…¥ä¸åŒå™ªå£°æ°´å¹³çš„AWGN å™ªå£°å¼ºåº¦å–å€¼30 50 70</strong></p><p>æ–¹æ³•ï¼š</p><p>â€‹ä¼ ç»Ÿï¼šBM3Då’ŒCBM3D</p><p>â€‹cnnï¼šDnCNN[35]ã€MemNet[27]ã€FFDNet[36]ã€RNaN[37]å’ŒRIDNet[4]ï¼Œ SADNetï¼ˆè®ºæ–‡æå‡ºçš„æ–¹æ³•ï¼‰</p><h3 id="çœŸå®å™ªå£°">çœŸå®å™ªå£°</h3><p>æµ‹è¯•æ•°æ®é›†ï¼šDND[25]ã€SIDD[1]å’ŒNAM[22]</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>å»å™ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>å»å™ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç²¾è¯»Adaptive Consistency Prior based Deep Network for Image Denoising</title>
    <link href="/2022/02/14/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/paperer-DeamNet/"/>
    <url>/2022/02/14/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/paperer-DeamNet/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ç¯‡2021å¹´å‘è¡¨åœ¨cvpræœŸåˆŠä¸Šçš„æ–‡ç« ï¼Œè€å¸ˆè¯´å¯ä»¥å¤šå…³æ³¨ä»–çš„åŠ å™ªæ–¹å¼å’Œæ–‡ç« çš„å®éªŒå¯¹æ¯”æ–¹æ³•ï¼Œæ­£å¥½ä»¥æ­¤ä¸ºä¾‹ï¼Œæ¥ç²¾è¯»æ­¤æ–‡ç« ä»¥ä½œè®²è§£ã€‚</p><p>ç°å¸¸niceï¼ é˜…è¯»pdfæ–‡ç« çš„ç½‘ç«™https://readpaper.com/</p></blockquote><h3 id="ç¬¬ä¸€é">ç¬¬ä¸€é</h3><p><strong>é‡ç‚¹ï¼šæ ‡é¢˜-&gt; æ‘˜è¦ -&gt; ç»“è®ºçš„é¡ºåºï¼› ç›®çš„æ˜¯å¤§æ¦‚äº†è§£æ–‡ç« ï¼Œåšå‡ºå–èˆï¼›</strong></p><p><strong>tipsï¼šå¯ä»¥å¤§æ¦‚çœ‹çœ‹å›¾è¡¨ï¼Œäº†è§£å…³é”®çš„æ–¹æ³•ã€‚</strong></p><h4 id="é¢„è§ˆ">é¢„è§ˆ</h4><ol><li><p>æ ‡é¢˜ï¼šAdaptive Consistency Prior based Deep Network for Image Denoising</p><p>â€‹åŸºäºè‡ªé€‚åº”ä¸€è‡´æ€§å…ˆéªŒçš„æ·±åº¦ç½‘ç»œå›¾åƒå»å™ª</p></li><li><p>æ‘˜è¦ï¼š</p><p><strong>æ€»ç»“</strong> :ä½œè€…æå‡ºäº†ACP+Deam å¯ä»¥åœ¨åˆæˆå™ªå£°å’ŒçœŸå®å™ªå£°çš„å›¾ç‰‡é™å™ªä¸Šå–å¾—å¥½çš„ç»“æœã€‚</p><p><strong>é—®é¢˜ç°çŠ¶</strong>ï¼šå¦‚ä½•å°†ä¼ ç»Ÿæ–¹æ³•èå…¥åˆ°ç½‘ç»œè®¾è®¡ä¸­åŒæ—¶æé«˜å¯è§£é‡Šæ€§ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæ‚¬è€Œæœªå†³çš„é—®é¢˜ã€‚</p><p><strong>æ–¹æ³•</strong> :æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºæ¨¡å‹çš„å»å™ªæ–¹æ³•æ¥æŒ‡å¯¼å»å™ªç½‘ç»œçš„è®¾è®¡ï¼Œé¦–å…ˆï¼Œé€šè¿‡åœ¨ä¼ ç»Ÿçš„ä¸€è‡´æ€§å…ˆéªŒä¸­å¼•å…¥éçº¿æ€§æ»¤æ³¢ç®—å­ã€å¯é æ€§çŸ©é˜µå’Œé«˜ç»´ç‰¹å¾å˜æ¢å‡½æ•°ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„è‡ªé€‚åº”ä¸€è‡´æ€§å…ˆéªŒ(ACP)ã€‚å…¶æ¬¡ï¼Œé€šè¿‡å°†ACPé¡¹å¼•å…¥æœ€å¤§åéªŒæ¡†æ¶ï¼Œæå‡ºäº†ä¸€ç§åŸºäºæ¨¡å‹çš„å»å™ªæ–¹æ³•ï¼Œå¹¶å°†è¯¥æ–¹æ³•ç”¨äºæŒ‡å¯¼ç½‘ç»œè®¾è®¡ï¼Œå¾—åˆ°äº†ä¸€ç§æ–°çš„ç«¯åˆ°ç«¯å¯è®­ç»ƒã€å¯è§£é‡Šçš„æ·±åº¦å»å™ªç½‘ç»œã€‚</p></li><li><p>ç»“è®ºï¼š</p><p><strong>æ€»ç»“</strong> :æå‡ºäº†Deamnetæ·±åº¦ç½‘ç»œæ¥å›¾åƒå»å™ªã€‚</p><p><strong>åˆ›æ–°ç‚¹</strong> :ä¸ç°æœ‰çš„å¤§å¤šæ•°æ·±åº¦ç½‘ç»œå»å™ªæ–¹æ³•ä¸åŒï¼Œæˆ‘ä»¬å°†æ–°çš„ACPé¡¹ï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰å¼•å…¥åˆ°ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œç„¶ååˆ©ç”¨unfoldingç­–ç•¥åˆ©ç”¨ä¼˜åŒ–è¿‡ç¨‹æ¥æŒ‡å¯¼æ·±åº¦ç½‘ç»œçš„è®¾è®¡ã€‚</p><p><strong>æˆæœ</strong> :åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å¯è§£é‡Šæ€§ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥ç½‘ç»œå…·æœ‰é¢†å…ˆçš„å»å™ªæ€§èƒ½ã€‚</p></li><li><p>å…¶ä»–</p><p>æŸ¥çœ‹ä»–çš„å›¾è¡¨å¯ä»¥å‘ç°ä»–çš„å·¥ä½œéå¸¸çš„è¯¦ç»†ï¼Œå¯¹å„ç§ç½‘ç»œï¼Œå„ç§æ•°æ®é›†è¿›è¡Œäº†å„ç§æ•ˆæœçš„å¯¹æ¯”ï¼Œä»å›¾åƒï¼Œæ•°æ®é›†ï¼Œå™ªå£°å¼ºåº¦ï¼ŒPSNRï¼ŒSSIMï¼Œè¿è¡Œæ—¶é—´ï¼Œå‚æ•°å¤§å°å„ä¸ªæ–¹é¢è¿›è¡Œå¯¹æ¯”ï¼Œå€¼å¾—å­¦ä¹ ã€‚</p></li></ol><h4 id="æ€è·¯">æ€è·¯</h4><p>æ–‡ç« çš„æ€è·¯ï¼š<strong>å°†ä¼ ç»Ÿçš„é™å™ªæ–¹æ³•å’Œæ·±åº¦å­¦ä¹ ç½‘ç»œç»“åˆ</strong></p><ul><li>åœ¨ä¼ ç»Ÿçš„ä¸€è‡´æ€§å…ˆéªŒä¸­å¼•å…¥éçº¿æ€§æ»¤æ³¢ç®—å­ã€å¯é æ€§çŸ©é˜µå’Œé«˜ç»´ç‰¹å¾å˜æ¢å‡½æ•°ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„è‡ªé€‚åº”ä¸€è‡´æ€§å…ˆéªŒ(ACP)</li><li>é€šè¿‡å°†ACPé¡¹å¼•å…¥æœ€å¤§åéªŒæ¡†æ¶ï¼Œæå‡ºäº†ä¸€ç§åŸºäºæ¨¡å‹çš„å»å™ªæ–¹æ³•ï¼Œå¹¶å°†è¯¥æ–¹æ³•ç”¨äºæŒ‡å¯¼ç½‘ç»œè®¾è®¡ï¼Œå¾—åˆ°å»å™ªç½‘ç»œã€‚</li></ul><h4 id="æ€è€ƒ">æ€è€ƒ</h4><p>å…³æ³¨ç‚¹ï¼šæ€è€ƒå™ªå£°æ˜¯æ€ä¹ˆåŠ çš„ï¼Œç”¨äº†å“ªå‡ ç§å™ªå£°ï¼Ÿ</p><h3 id="ç¬¬äºŒé">ç¬¬äºŒé</h3><p><strong>é‡ç‚¹ï¼šä»å¤´åˆ°å°¾è¯»ï¼Œä¸ç”¨å…³æ³¨å¾—å¤ªç»†èŠ‚ï¼Œä¸»è¦ç›®çš„æ˜¯æ¸…æ™°äº†è§£å›¾è¡¨å«ä¹‰ã€‚</strong></p><p><strong>tipsï¼šåœˆå‡ºæ„Ÿå…´è¶£çš„æ–‡çŒ®ã€‚</strong></p><h4 id="Introduce">Introduce</h4><p>å¦‚æœå¯¹è¿™ä¸ªé¢†åŸŸä¸æ˜¯éå¸¸äº†è§£ï¼Œå°±å¯ä»¥å¥½å¥½çœ‹çœ‹Introduceä¸­çš„å†…å®¹ï¼Œä¸€èˆ¬ä¼šå¯¹è¯¥é¢†åŸŸç ”ç©¶é—®é¢˜è¿›è¡Œæ€»ç»“å’Œæ¢³ç†ã€‚å¯ä»¥æ ‡è®°å‡ºæ„Ÿå…´è¶£çš„æ–‡çŒ®ã€‚</p><p>åœ¨Introduceä¸­æå‡ºçš„å‡ ç§å»å™ªæ–¹æ³•ï¼Œå¯¹è¿™ä¸‰ç§æ–¹æ³•çš„å«ä¹‰å’Œç›¸å…³ç®—æ³•ç®€è¦ä»‹ç»ï¼š</p><ul><li><p>filtering-based methods</p><ul><li><p>åŸç†ï¼šç”±äºå›¾åƒä¸­æœ‰å¾ˆå¤šç›¸ä¼¼ç‰©ï¼Œå¯ä»¥ä½¿ç”¨éå±€éƒ¨ç›¸ä¼¼å—æ¥å»é™¤å™ªå£°ï¼Œæ¯”å¦‚NLMå’ŒBM3Dï¼Œå„ç§éå±€éƒ¨æ»¤æ³¢æ–¹æ³•åº”è¿è€Œç”Ÿã€‚</p></li><li><p>é—®é¢˜ï¼šè¾“å‡ºæ¨¡ç³Šï¼Œå»å™ªæ–¹æ³•ä¸­çš„è¶…å‚æ•°éš¾ä»¥è°ƒæ•´ã€‚</p></li></ul></li><li><p>model-based methods</p><ul><li><p>åŸç†ï¼šåŸºäºæ¨¡å‹çš„æ–¹æ³•é€šå¸¸å°†å»å™ªä»»åŠ¡æè¿°ä¸ºåŸºäºåéªŒI(MAP)çš„æœ€å¤§ä¼˜åŒ–é—®é¢˜ï¼Œå…¶æ€§èƒ½ä¸»è¦å–å†³äºå›¾åƒå…ˆéªŒã€‚</p></li><li><p>å‰æï¼šåœ¨å‡è®¾å›¾åƒå—å¯ä»¥ç”¨é€‚å½“çš„åŸºå‡½æ•°ç¨€ç–è¡¨ç¤ºçš„å‰æä¸‹ã€‚</p></li><li><p>æ–¹æ³•ï¼šæå‡ºç¨€ç–å…ˆéªŒï¼Œæœ€è¿‘ï¼Œæå‡ºäº†ä¸€ç§åŸºäºä¸‰è¾¹åŠ æƒç¨€ç–ç¼–ç çš„çœŸå®å›¾åƒå»å™ªæ–¹æ³•ã€‚æ ¹æ®è‡ªç„¶å›¾åƒä¸­éå±€éƒ¨ç›¸ä¼¼å—æ„æˆçš„çŸ©é˜µå…·æœ‰ä½ç§©çš„ç‰¹ç‚¹ï¼Œæå‡ºäº†å¾ˆå¤šåŸºäºä½ç§©å…ˆéªŒçš„å›¾åƒå»å™ªæ–¹æ³•ï¼Œè¿˜æœ‰IRçš„åŠ æƒæ ¸èŒƒæ•°æœ€å°åŒ–(WNNM)æ–¹æ³•ã€‚æ­¤å¤–è¿˜æœ‰å›¾çš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚</p></li><li><p>å¥½å¤„ï¼šåŸºäºæ¨¡å‹çš„æ–¹æ³•å…·æœ‰å¾ˆå¼ºçš„æ•°å­¦æ¨å¯¼èƒ½åŠ›ã€‚</p></li><li><p>é—®é¢˜ï¼š1ï¼Œåœ¨æ¢å¤å¼ºå™ªå£°ä¸‹çš„çº¹ç†ç»“æ„æ—¶ï¼Œæ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ã€‚2ï¼Œç”±äºè¿­ä»£ä¼˜åŒ–çš„é«˜åº¦å¤æ‚æ€§ï¼Œå®ƒä»¬é€šå¸¸å¾ˆè€—æ—¶ã€‚</p></li></ul></li><li><p>learning-based methods</p><ul><li>å®šä¹‰ï¼šåŸºäºå­¦ä¹ çš„æ–¹æ³•ä¾§é‡äºä»å™ªå£°å›¾åƒåˆ°å¹²å‡€å›¾åƒçš„æ½œåœ¨æ˜ å°„å­¦ä¹ ï¼Œå¯åˆ†ä¸ºä¼ ç»Ÿçš„åŸºäºå­¦ä¹ çš„æ–¹æ³•å’ŒåŸºäºæ·±åº¦ç½‘ç»œçš„æ–¹æ³•ã€‚</li><li>è¯„ä»·ï¼šç”±äºåŸºäºæ·±åº¦ç½‘ç»œçš„å»å™ªæ–¹æ³•æ¯”åŸºäºæ»¤æ³¢ã€åŸºäºæ¨¡å‹å’ŒåŸºäºä¼ ç»Ÿå­¦ä¹ çš„æ–¹æ³•å–å¾—äº†æ›´å¥½çš„å»å™ªæ•ˆæœï¼Œå®ƒä»¬å·²æˆä¸º<strong>ä¸»æµ</strong>çš„å»å™ªæ–¹æ³•ã€‚</li><li>é—®é¢˜ï¼šå¤§å¤šæ•°æ·±åº¦ç½‘ç»œæ–¹æ³•çš„ä½“ç³»ç»“æ„éƒ½æ˜¯ç»éªŒæ€§è®¾è®¡çš„ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘ä¼ ç»Ÿç®—æ³•çš„æˆæœï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé¢ä¸´ç€å¯è§£é‡Šæ€§è¾ƒå¼±çš„é—®é¢˜ã€‚</li></ul></li><li><p>æœ€è¿‘ï¼Œä¹Ÿæœ‰äººæå‡ºäº†ç”¨æ·±åº¦ç½‘ç»œå±•å¼€æ¥å®ç°ä¸€äº›ä¼ ç»Ÿçš„æ–¹æ³•ã€‚</p></li></ul><p>ä½œè€…ä¸»è¦å·¥ä½œæ˜¯æå‡ºä¸€ç§æ–°çš„åŸºäºæ¨¡å‹çš„å»å™ªæ–¹æ³•ï¼Œå¹¶æ·±å…¥ç ”ç©¶è¯¥æ–¹æ³•çš„æ¨ç†è¿‡ç¨‹ï¼Œä¸ºå…¶å»å™ªCNN(DeamNet)çš„è®¾è®¡æä¾›å‚è€ƒã€‚</p><blockquote><p>è¿™é‡Œæˆ‘å¯¹ä½œè€…æå‡ºçš„æ–¹æ³•æœ‰ä¸€äº›ç–‘é—®ï¼ŒåŸºäºæ¨¡å‹å’ŒåŸºäºå­¦ä¹ çš„å»å™ªæ–¹æ³•çš„æœ¬è´¨åŒºåˆ«åœ¨å“ªé‡Œï¼Œä½œè€…çš„å·¥ä½œâ€å»å™ªçš„CNNè®¾è®¡æä¾›å‚è€ƒâ€œæ¶‰åŠåˆ°å·ç§¯ç¥ç»ç½‘ç»œï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯åŸºäºæ¨¡å‹çš„å»å™ªæ–¹æ³•å‘¢ï¼Ÿ</p><p>åœ¨ Proposed Methodéƒ¨åˆ†ä½œè€…é˜è¿°äº†è‡ªå·±çš„è®¾è®¡æ€æƒ³ï¼Œè¿™ä¸€éƒ¨åˆ†æ¶‰åŠçš„å…¬å¼å¾ˆå¤šï¼Œå…¶å®å¯¹ä½œè€…æ‰€æå‡ºçš„æ–¹æ³•å’Œæˆ‘è‡ªèº«çš„ç ”ç©¶å†…å®¹ä¸æ˜¯éå¸¸çš„å¥‘åˆï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å¯ä»¥ç®€è¦çœ‹çœ‹ï¼Œæˆ‘ä¸»è¦çš„ç›®çš„è¿˜æ˜¯å¯¹å®ƒçš„å®éªŒä¸­å™ªå£°å’Œæ•°æ®éƒ¨åˆ†æ›´åŠ æ„Ÿå…´è¶£ã€‚</p></blockquote><h4 id="è®¾è®¡æ€æƒ³">è®¾è®¡æ€æƒ³</h4><ul><li><p>Adaptive Consistency Prior for Denoising</p><ul><li>è‡ªé€‚åº”ä¸€è‡´æ€§å…ˆéªŒç®—æ³•åœ¨å»å™ªä¸­çš„åº”ç”¨,æœ¬æ–‡æå‡ºäº†ä¸€ç§ç«¯åˆ°ç«¯çš„å¯è®­ç»ƒå±•å¼€ç½‘ç»œï¼Œè¯¥ç½‘ç»œèƒ½å¤Ÿè‡ªé€‚åº”åœ°å­¦ä¹ è¿™äº›ç®—å­ã€‚</li></ul></li><li><p>Deep Unfolding Denoising Network</p><ul><li>DeamNetçš„ä½“ç³»ç»“æ„ã€‚å®ƒç”±ç‰¹å¾åŸŸ(FD)æ¨¡å—ã€é‡æ„æ¨¡å—ã€åŸºäºéçº¿æ€§è¿ç®—(NLO)å­ç½‘ç»œçš„Kä¸ªè¿­ä»£é˜¶æ®µå’ŒåŒå…ƒç´ æ³¨æ„æœºåˆ¶(DEAM)æ¨¡å—ç»„æˆ.</li><li>åœ¨é«˜ç»´FDä¸­è¿›è¡Œå»å™ªå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š1)å¯ä»¥å°†åŸå§‹çš„å™ªå£°ç©ºé—´æ½œåœ¨åœ°å˜æ¢åˆ°FDç©ºé—´ï¼Œåœ¨FDç©ºé—´ä¸­å¯ä»¥æ›´å®¹æ˜“åœ°é™ä½å™ªå£°ï¼Œä»è€Œè·å¾—æ¯”åƒç´ åŸŸæ›´ç²¾ç»†çš„å›¾åƒç»†èŠ‚ã€‚â€œè¡¥å……ææ–™â€ä¸­çš„å®éªŒè¯¦ç»†è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼›2ï¼‰ä½¿ç”¨é«˜ç»´FDæ¨¡å—è¿˜å¯ä»¥å¢åŠ ç‰¹å¾é€šé“æ•°å¹¶ä¸”å¢å¼ºç¥ç»ç½‘ç»œä¸­çš„ä¿¡æ¯æµä¼ è¾“æ¥å¾—åˆ°æ›´é«˜çš„æ€§èƒ½ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼ ç»Ÿçš„æ·±åº¦å±•å¼€ç½‘ç»œåœ¨ä½ç»´å›¾åƒç©ºé—´è¿›è¡Œè¿­ä»£å»å™ªï¼›3)é€šè¿‡å°†åœ°é¢çœŸå®å›¾åƒä¸é€€åŒ–å›¾åƒä¹‹é—´çš„æ®‹å·®è§†ä¸ºå¾…é™å™ªçš„éƒ¨åˆ†ï¼Œè¯¥ç­–ç•¥è¿˜å¯ä»¥ä½¿ç½‘ç»œæ›´é€‚ç”¨äºå…¶ä»–çº¢å¤–åº”ç”¨ã€‚</li><li>åœ¨ä¼ ç»Ÿçš„æ³¨æ„æœºåˆ¶ä¸­ï¼Œä½é¢‘åˆ†æ”¯çš„é‡è¦æ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè¢«å¿½è§†äº†ã€‚ç›¸åï¼Œå¦‚æœä½é¢‘åˆ†æ”¯å¯¹æ½œåœ¨ç‰¹å¾çš„æè¿°ä¸ç†æƒ³ï¼Œåˆ™DEAMå¯ä»¥è‡ªé€‚åº”åœ°å¢åŠ æ®‹ç•™åˆ†æ”¯çš„ç‰¹å¾æƒé‡ï¼Œåä¹‹äº¦ç„¶ã€‚æ­¤å¤–ï¼ŒDEAMä¸­çš„åˆå§‹ç‰¹å¾ä¿¡æ¯å¯ç”¨æ€§å’Œè·¨å±‚ç‰¹å¾äº¤äº’å¯ä»¥è¿›ä¸€æ­¥å¢å¼ºç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ã€‚</li></ul></li></ul><h4 id="å®éªŒéƒ¨åˆ†">å®éªŒéƒ¨åˆ†</h4><p>åˆ†ä¸ºå¯¹åˆæˆå™ªå£°æ•°æ®é›†å’ŒçœŸå®æ•°æ®é›†ä¸Šå»å™ªä¸¤ä¸ªæ¨¡å—ã€‚</p><p><strong>å™ªå£°ç±»å‹</strong>ï¼š åŠ æ€§é«˜æ–¯ç™½å™ªå£°AWGN(Additive White Gaussian Noise)  ï¼ˆåœ¨è®ºæ–‡ä¸­æåˆ°çš„å¼ºåº¦å¯¹æ¯” 15, 25 and 50.ï¼‰</p><ul><li>è®­ç»ƒéƒ¨åˆ†</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">parser.add_argument(<span class="hljs-string">"--noiseL"</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">25</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">'noise level'</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train</span>(<span class="hljs-params">epoch</span>):</span><br>    epoch_loss = <span class="hljs-number">0</span><br>    model.train()<br>    <span class="hljs-keyword">for</span> iteration, batch <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(training_data_loader, <span class="hljs-number">1</span>):<br>        target = Variable(batch)<br>        noise = torch.FloatTensor(target.size()).normal_(mean=<span class="hljs-number">0</span>, std=opt.val_noiseL / <span class="hljs-number">255.</span>)<br>        <span class="hljs-built_in">input</span> = target + noise<br>        .....<br></code></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•éƒ¨åˆ†ï¼ˆåˆæˆï¼‰</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">parser.add_argument(<span class="hljs-string">"--test_noiseL"</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">15</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">'noise level used on test set'</span>) <span class="hljs-comment">#å™ªå£°å¼ºåº¦</span><br>opt = parser.parse_args()<br><br>ISource = torch.Tensor(Img)    <br><span class="hljs-comment"># noise</span><br>noise = torch.FloatTensor(ISource.size()).normal_(mean=<span class="hljs-number">0</span>, std=opt.test_noiseL / <span class="hljs-number">255.</span>) <span class="hljs-comment">#é«˜æ–¯å™ªå£°</span><br><span class="hljs-comment"># noisy image</span><br>INoisy = ISource + noise <span class="hljs-comment">#åŠ æ€§</span><br>ISource, INoisy = Variable(ISource.cuda()), Variable(INoisy.cuda())<br></code></pre></td></tr></tbody></table></figure><p>çœŸå®æ•°æ®é›†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__getitem__</span>(<span class="hljs-params">self, index</span>):</span><br>    clean = Image.<span class="hljs-built_in">open</span>(self.path[index])<br><br>    <span class="hljs-keyword">if</span> self.transform:<br>        clean = self.transform(clean)<br><br>    noise = torch.randn(clean.size()).mul_(self.sigma/<span class="hljs-number">255.0</span>) <span class="hljs-comment">#å™ªå£°ï¼Ÿ</span><br>    noisy = clean + noise<br>    noisy = torch.clamp(noisy, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)<br>    <span class="hljs-keyword">return</span> noisy, clean<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿™é‡ŒåŠ å™ªä»£ç å­˜ç–‘</p><p>è®ºæ–‡ä¸­å¯¹çœŸå®æ•°æ®é›†çš„å»å™ªç»†èŠ‚ä¸­å†™é“ï¼š</p><p>ç”±äºçœŸå®å™ªå£°é€šå¸¸æ˜¯ä¿¡å·ç›¸å…³çš„ï¼Œå¹¶ä¸”éšç€æ‘„åƒæœºå†…ç®¡çº¿çš„ä¸åŒï¼ŒçœŸå®å›¾åƒå»å™ªé€šå¸¸æ˜¯ä¸€é¡¹æå…·æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ï¼Œä¸ºäº†è¿›ä¸€æ­¥å±•ç¤ºDeamNetå¯¹çœŸå®å™ªå£°çš„æ³›åŒ–èƒ½åŠ›ï¼Œé€‰æ‹©DNDåŸºå‡†ã€SIDDåŸºå‡†å’ŒRNI15æ•°æ®é›†ä½œä¸ºæµ‹è¯•æ•°æ®é›†ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºDNDå’ŒSIDDåŸºå‡†ï¼Œå‡ ä¹æ— å™ªéŸ³çš„å›¾åƒä¸æ˜¯å…¬å¼€çš„ï¼Œä½†PSNR/SSIMç»“æœå¯ä»¥é€šè¿‡ä»–ä»¬çš„åœ¨çº¿æœåŠ¡å™¨è·å¾—ã€‚è€Œå¯¹äºRNI15ï¼Œåªæœ‰å™ªå£°å›¾åƒå¯ç”¨ã€‚</p></blockquote><h4 id="åˆæˆå™ªå£°æ•°æ®é›†ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰">åˆæˆå™ªå£°æ•°æ®é›†ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰</h4><p><strong>è®­ç»ƒæ•°æ®é›†</strong>åŒ…æ‹¬ï¼š</p><ol><li><p>the Berke-ley Segmentation Dataset (BSD)  æ˜¯ä¸ºå›¾åƒåˆ†å‰²å’Œè¾¹ç•Œæ£€æµ‹çš„ç ”ç©¶æä¾›ç»éªŒåŸºç¡€çš„æ•°æ®é›†ï¼ŒåŒ…å«æ¥è‡ª 30 ä¸ªäººç±»å—è¯•è€…çš„ 1000 ä¸ªæ‰‹å·¥æ ‡è®°çš„ 1000 ä¸ª Corel æ•°æ®é›†å›¾åƒçš„åˆ†å‰²ï¼Œå…¶ä¸­ä¸€åŠçš„åˆ†å‰²æ˜¯é€šè¿‡å‘ä¸»ä½“å‘ˆç°å½©è‰²å›¾åƒè€Œè·å¾—çš„; å¦ä¸€åŠæ¥è‡ªå‘ˆç°ç°åº¦å›¾åƒã€‚</p></li><li><p>Div2Kï¼šæ•°æ®é›†æœ‰1000å¼ é«˜æ¸…å›¾(2Kåˆ†è¾¨ç‡)ï¼Œå…¶ä¸­800å¼ ä½œä¸ºè®­ç»ƒï¼Œ100å¼ ä½œä¸ºéªŒè¯ï¼Œ100 å¼ ä½œä¸ºæµ‹è¯•ã€‚</p></li></ol><p>ä¸‰ä¸ªæ ‡å‡†<strong>åŸºçº¿æ•°æ®é›†</strong>è¿›è¡Œäº†è¯„ä¼° ï¼ˆæŒ‡æ ‡ï¼šPSNR and SSIMï¼‰</p><ol><li><p>Set12ï¼šæ•°å­—å›¾åƒå¤„ç†å¸¸ç”¨æ•°æ®é›†Set12ï¼Œ12å¼ ç°åº¦å›¾ï¼ˆå«lenaï¼Œcameramanï¼Œhouseï¼Œpepperï¼Œfishstarï¼Œmonarchï¼Œairplaneï¼Œparrotï¼Œbarbaraï¼Œshipï¼Œmanï¼Œcoupleï¼‰ï¼Œ01-07æ˜¯256*256,08-12æ˜¯512*512.</p></li><li><p>BSD68  æ•°å­—å›¾åƒå¤„ç†å¸¸ç”¨æ•°æ®é›†BSD68ï¼Œ68å¼ ç°åº¦å›¾ï¼Œå¤§å°ä¸ä¸€ã€‚</p></li><li><p>Urban100  ï¼šä¸€ä¸ªç”¨äºè¶…åˆ†è¾¨ç‡å’Œå›¾åƒé‡å»ºçš„æ•°æ®é›† Urban100ï¼Œæ€»è®¡100å¼ å»ºç­‘é«˜æ¸…å›¾ç‰‡ï¼ŒåŒæ—¶å¯¹åº”äº†100å¼ é™ä½åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚</p></li></ol><h4 id="çœŸå®å™ªå£°æ•°æ®é›†">çœŸå®å™ªå£°æ•°æ®é›†</h4><h5 id="è®­ç»ƒæ•°æ®é›†">è®­ç»ƒæ•°æ®é›†</h5><ol><li>SIDDï¼šæ™ºèƒ½æ‰‹æœºå›¾åƒå»å™ªæ•°æ®é›†ï¼ˆSIDDï¼‰ä½¿ç”¨5ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„æ™ºèƒ½æ‰‹æœºæ‘„åƒå¤´ï¼Œä»10ä¸ªåœºæ™¯ä¸­æå–çº¦30000ä¸ªå™ªå£°å›¾åƒï¼Œå¹¶ç”Ÿæˆå®ƒä»¬çœŸå®çš„åœºæ™¯å›¾åƒã€‚</li><li>RENOIRï¼šä¸€ä¸ªçœŸå®çš„å›¾åƒé™å™ªæ•°æ®é›†ï¼ŒåŒ…å«äº†3ä¸ªå­æ•°æ®é›†ï¼Œåˆ†åˆ«æ˜¯Xiaomi Mi3ï¼ŒCanon S90ï¼ŒCanon T3iæ‹æ‘„ï¼Œæ‹¥æœ‰ä½å™ªå’Œé«˜å™ªå¯¹æ¯”å›¾ã€‚</li></ol><h5 id="æµ‹è¯•æ•°æ®é›†">æµ‹è¯•æ•°æ®é›†</h5><ul><li><p>DNDï¼šæ˜¯ç”±50å¹…çœŸå®ä¸–ç•Œçš„å™ªå£°å›¾åƒç»„æˆçš„ï¼Œä½†æ²¡æœ‰å‡ ä¹æ²¡æœ‰å™ªå£°çš„å¯¹åº”å›¾åƒã€‚é€šå¸¸ï¼Œå¯ä»¥é€šè¿‡å°†å»å™ªå›¾åƒä¸Šä¼ åˆ°DNDç½‘ç«™æ¥è·å¾—PSNR/SSIMç»“æœã€‚</p></li><li><p>SIDDï¼šæä¾›320å¯¹å™ªå£°å›¾åƒå’Œè¿‘æ— å™ªå£°å›¾åƒç”¨äºè®­ç»ƒï¼Œ1280ä¸ªå›¾åƒpatchç”¨äºéªŒè¯ã€‚PSNR/SSIMç»“æœå¯ä»¥é€šè¿‡å°†å»å™ªå›¾åƒæäº¤åˆ°SIDDç½‘ç«™è·å¾—ã€‚</p></li><li><p>RNI15ï¼šæä¾›äº†15å¹…çœŸå®å™ªå£°å›¾åƒã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ°é¢çœŸå®çš„å¹²å‡€å›¾åƒä¸å¯ç”¨ï¼Œå› æ­¤æˆ‘ä»¬åªå±•ç¤ºRNI15çš„è§†è§‰ç»“æœã€‚</p></li></ul><h4 id="æ•°æ®å¢å¼º">æ•°æ®å¢å¼º</h4><p>æˆ‘ä»¬å°†è¿™äº›è®­ç»ƒå›¾åƒå¯¹éšæœºè£å‰ªæˆå¤§å°ä¸º128Ã—128çš„å°å—ã€‚ä¸ºäº†å¢åŠ è®­ç»ƒæ ·æœ¬ï¼Œé‡‡ç”¨äº†180åº¦çš„æ—‹è½¬å’Œæ°´å¹³ç¿»è½¬ã€‚</p><h4 id="å¯¹æ¯”ç½‘ç»œ">å¯¹æ¯”ç½‘ç»œ</h4><ul><li><p>TNRD</p></li><li><p>DnCNN</p></li><li><p>FFDNet</p></li><li><p>RED</p></li><li><p>MemNet</p></li><li><p>UNLNet</p></li><li><p>CFSNet</p></li><li><p>N3Net</p></li><li><p>ADNet</p></li><li><p>BRDNet</p></li><li><p>RIDNet</p></li></ul><h5 id="åˆæˆæ•°æ®é›†æ•ˆæœ">åˆæˆæ•°æ®é›†æ•ˆæœ</h5><p><img src="https://picture.mulindya.com/deamnet1.png" alt=""></p><h5 id="çœŸå®æ•°æ®é›†æ•ˆæœ">çœŸå®æ•°æ®é›†æ•ˆæœ</h5><p><img src="https://picture.mulindya.com/deamnet2.png" alt=""></p><h3 id="ç¬¬ä¸‰é">ç¬¬ä¸‰é</h3><p><strong>é‡ç‚¹ï¼šè¯¦ç»†äº†è§£æ–‡ç« ï¼Œå¹¶ä¸”æ‹“å±•åˆ°è‡ªå·±ï¼Œç»™è‡ªå·±è®¾ç½®é—®é¢˜ï¼Œå­¦ä¼šâ€œè„‘è¡¥â€</strong>ã€‚</p><p><strong>tips: åœ¨æ–‡ç« æœ€åä½œè€…ä¼šæåˆ°æ–‡ç« æœ‰ä¸€äº›æ²¡æœ‰ç»§ç»­ç ”ç©¶çš„åœ°æ–¹ï¼Œå¯ä»¥è®°å½•è‡ªå·±çš„æ€è€ƒã€‚</strong></p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>é˜…è¯»æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>é˜…è¯»æ–¹æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…‰å­è®¡æ•°CTé‡å»ºç®—æ³•</title>
    <link href="/2022/02/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/CT/%E5%85%89%E5%AD%90%E8%AE%A1%E6%95%B0CT%E9%87%8D%E5%BB%BA%E7%AE%97%E6%B3%95/"/>
    <url>/2022/02/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/CT/%E5%85%89%E5%AD%90%E8%AE%A1%E6%95%B0CT%E9%87%8D%E5%BB%BA%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŸ¥æ‰¾ç›¸å…³è®ºæ–‡ï¼Œæ•´ç†å…¶æ€æƒ³ã€‚</p></blockquote><h1>å…‰å­è®¡æ•°CTé‡å»ºç®—æ³•</h1><h2 id="ä¸€ï¼Œå…‰å­è®¡æ•°CTä¸ä¼ ç»ŸCTçš„åŒºåˆ«">ä¸€ï¼Œå…‰å­è®¡æ•°CTä¸ä¼ ç»ŸCTçš„åŒºåˆ«</h2><p><strong>ä¼ ç»ŸXçº¿CT</strong>ç³»ç»Ÿåˆ©ç”¨ç”µè·ç§¯åˆ†æ¢æµ‹å™¨è¿›è¡Œä¿¡å·æ£€æµ‹ï¼Œ<strong>å…‰å­æƒé‡ä¸å…¶èƒ½é‡æˆæ­£æ¯”ï¼Œè¾ƒé«˜èƒ½é‡çš„å…‰å­è¢«èµ‹äºˆè¾ƒå¤§çš„æƒé‡</strong>ã€‚ç„¶è€Œï¼Œé‡å»ºå›¾åƒçš„å¯¹æ¯”åº¦ä¸»è¦å–å†³äºè¾ƒä½èƒ½é‡çš„å…‰å­ï¼Œå› æ­¤<strong>ç”µè·ç§¯åˆ†æ¢æµ‹æ–¹å¼å°†å¯¼è‡´é‡å»ºå›¾åƒå¯¹æ¯”åº¦ä¸‹é™</strong>ã€‚</p><p>è¿‘æœŸç ”å‘çš„<strong>å…‰å­è®¡æ•°æ¢æµ‹å™¨</strong>å…·æœ‰èƒ½é‡åˆ†è¾¨èƒ½åŠ›ï¼Œå®ƒç”±åŠå¯¼ä½“æ¢æµ‹å™¨åŠå¿«é€Ÿä¸“ç”¨é›†æˆç”µè·¯ç»„æˆï¼Œåœ¨åŒ»å­¦è¯Šæ–­Xçº¿èƒ½é‡èŒƒå›´å†…å…·æœ‰è¾ƒé«˜çš„é‡å­æ•ˆç‡ï¼Œ<strong>å¯çµæ´»è®¾ç½®èƒ½é‡é˜ˆå€¼ï¼Œå¹¶å¯æ¶ˆé™¤ä½èƒ½ç”µå­å­¦å™ªå£°çš„å¹²æ‰°ï¼Œé€šè¿‡å¯¹è¢«æ£€ç‰©ä½“çš„ä¸€æ¬¡æ‰«æå¯ä»¥åŒæ—¶è·å¾—å¤šä¸ªèƒ½é‡æ®µçš„å…‰å­è®¡æ•°</strong>ã€‚</p><p><strong>ä¼ ç»ŸCT</strong> é‡‡ç”¨ç§¯åˆ†å¼æ¢æµ‹å™¨é‡‡é›†æŠ•å½±æ•°æ® ï¼Œåæ˜ çš„æ˜¯<strong>ç‰©ä½“çš„å¹³å‡è¡°å‡ç‰¹æ€§</strong> ï¼Œä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šé€ æˆä¿¡æ¯æŸå¤± ï¼Œæ— æ³•å¯¹ç‰©ä½“è¿›è¡Œè¾ƒå¥½çš„å®šæ€§å®šé‡æµ‹é‡ã€‚</p><p><strong>åŸºäºå…‰å­è®¡æ•°æ¢æµ‹å™¨çš„èƒ½è°±CT</strong> é€šè¿‡è®¾å®šå¤šä¸ªèƒ½é‡å“åº”é˜ˆå€¼èƒ½å¤Ÿæ¢æµ‹ä¸åŒèƒ½é‡èŒƒå›´å†…çš„Xå°„çº¿å…‰å­ ï¼Œé‡‡é›†æ›´å¤šè¢«æµ‹ç‰©ä½“çš„ç‰©è´¨ç»„æˆä¿¡æ¯ ï¼Œæœ‰åŠ©äºè¯†åˆ«ä¸åŒç‰©ç†ç‰¹æ€§çš„ææ–™ ï¼ŒåŸºäºæ­¤ ï¼Œ<strong>èƒ½è°±CT è¢«å¹¿æ³›çš„åº”ç”¨äºå°ç—…ç¶ã€ä½å¯¹æ¯”åº¦ç»“æ„ä»¥åŠå¾®ç»†ç»“æ„çš„æˆåƒã€‚</strong></p><p>PCDæŠ€æœ¯æ¶ˆé™¤äº†ç”µå­å™ªå£°ï¼Œæä¾›äº†æ¯”ä¼ ç»ŸCTæ¢æµ‹å™¨<strong>æ›´é«˜çš„ä¿¡å™ªæ¯”</strong>ã€‚</p><p>ç„¶è€Œï¼ŒPCDæŠ€æœ¯ä»ç„¶å­˜åœ¨ä¸¤ä¸ªä¸»è¦çš„é—®é¢˜ï¼Œé¦–å…ˆï¼Œ<strong>å•ä¸ªèƒ½é‡é€šé“åªåŒ…å«æ€»å…‰å­çš„ä¸€å°éƒ¨åˆ†</strong>ï¼›å…¶æ¬¡ï¼Œ<strong>å¤§éƒ¨åˆ†PCD åªèƒ½æ‰¿å—æœ‰é™çš„è®¡æ•°ç‡ï¼Œ<strong>æ‰€ä»¥ä»PCD è·å¾—çš„å¤šé€šé“æŠ•å½±é€šå¸¸åŒ…å«</strong>éå¸¸å¼ºçš„æ³Šæ¾å™ªå£°</strong>ã€‚</p><h2 id="äºŒï¼Œæ–‡çŒ®æŸ¥æ‰¾æ¥æº">äºŒï¼Œæ–‡çŒ®æŸ¥æ‰¾æ¥æº</h2><ul><li><p><a href="https://www.cttacn.org.cn/">CTç†è®ºä¸åº”ç”¨ç ”ç©¶</a></p></li><li><p><a href="http://www.diagnoschina.com/newest/zazhi_id-2">ä¸­å›½CTå’ŒMRIæ‚å¿—</a></p></li><li><p><a href="http://lcfsx.chinabidingnews.cn/">ä¸´åºŠæ”¾å°„å­¦æ‚å¿—</a></p></li><li><p><a href="http://ywlc.chinajournal.net.cn/WKB3/WebPublication/wkTextContent.aspx?colType=4&amp;tp=gklb">ä¸­å›½è¯ç‰©ä¸ä¸´åºŠ</a></p></li><li><p>ä¸œå—å¤§å­¦å­¦æŠ¥</p></li><li><p>å…‰è°±å­¦ä¸å…‰è°±åˆ†æ</p></li><li><p>å…‰ç”µå·¥ç¨‹</p></li><li><p>ä¸­å›½åŒ»å­¦ç‰©ç†å­¦æ‚å¿—</p></li></ul><h2 id="ä¸‰ï¼Œé’ˆå¯¹å…‰å­è®¡æ•°CTé‡å»ºç®—æ³•">ä¸‰ï¼Œé’ˆå¯¹å…‰å­è®¡æ•°CTé‡å»ºç®—æ³•</h2><p><img src="https://picture.mulindya.com/CT_paper6.png" alt=""></p><h3 id="3-1-æŠ•å½±åŠ æƒé‡å»º">3.1 æŠ•å½±åŠ æƒé‡å»º</h3><p>ä»æŠ•å½±æ­£å¼¦å›¾ä¸­æå–å™ªå£°ä¿¡æ¯ï¼Œæ„é€ å…³äºæƒé‡çš„å¯¹æ¯”å™ªå£°æ¯”ï¼ˆCNRï¼‰ä¼˜åŒ–å‡½æ•°ï¼Œæ±‚è§£æœ€ä¼˜æƒé‡ï¼Œåˆ©ç”¨æƒé‡è¿›è¡ŒæŠ•å½±åŠ æƒå›¾åƒé‡å»ºã€‚</p><ul><li>åŸºäº<strong>æŠ•å½±åŠ æƒ</strong>çš„å¤šèƒ½å…‰å­è®¡æ•°Xçº¿CTå…¨èƒ½è°±å›¾åƒé‡å»ºæ”¹è¿›æ–¹æ³•[1]</li></ul><p>é’ˆå¯¹åŒ…å«ä¸åŒå¯¹æ¯”ææ–™çš„3ç§æ¨¡ä½“è¿›è¡ŒæŠ•å½±ä»¿çœŸâ€“&gt;è·å¾—åŒ…å«æ³Šæ¾å’Œé«˜æ–¯å™ªå£°çš„æŠ•å½±æ­£å¼¦å›¾â€“&gt;ä»æŠ•å½±æ­£å¼¦å›¾ä¸­æå–å™ªå£°ä¿¡æ¯â€“&gt;æ„é€ å…³äºæƒé‡çš„<strong>å¯¹æ¯”å™ªå£°æ¯”</strong>ä¼˜åŒ–å‡½æ•°â€“&gt;æ±‚è§£ä½¿å¯¹æ¯”å™ªå£°æ¯”æœ€ä¼˜çš„æƒé‡â€“&gt;åˆ©ç”¨è¯¥æƒé‡è¿›è¡ŒæŠ•å½±åŠ æƒå›¾åƒé‡å»º</p><p>å™ªå£°æ¥æºï¼šä¸ ï¼¸çº¿ç›¸å…³çš„å™ªå£°ï¼ŒåŒ…æ‹¬ï¼¸çº¿å…‰å­æ•°éšæœºå˜åŒ–å¼•èµ·çš„å™ªå£°ã€ï¼¸ çº¿è¿›è¡Œå…‰ç”µè½¬æ¢æ—¶äº§ç”Ÿçš„å™ªå£°ç­‰ï¼Œè¿™äº›å™ªå£°æœä»æ³Šæ¾éšæœºåˆ†å¸ƒï¼Œç§°ä¸ºæ³Šæ¾å™ªå£°ï¼›æ­¤å¤–ï¼Œè¿˜å­˜åœ¨ä¸ ï¼¸ çº¿æ— å…³çš„å™ªå£°ï¼Œå¦‚æˆåƒç³»ç»Ÿä¸­æ¢æµ‹å™¨å•å…ƒçš„ç”µå­å™ªå£°ã€æ¢æµ‹å™¨è¯»å‡ºç”µè·¯çš„è¯»å‡ºå™ªå£°ç­‰ï¼Œè¿™éƒ¨åˆ†å™ªå£°çš„å¹…åº¦æœä»é«˜æ–¯æ¦‚ç‡å¯†åº¦åˆ†å¸ƒï¼Œç§°ä¸ºé«˜æ–¯å™ªå£°ã€‚</p><h3 id="3-2-å›¾åƒåŠ æƒé‡å»º">3.2 å›¾åƒåŠ æƒé‡å»º</h3><p>åˆ©ç”¨æŸä¸€ç§é‡å»ºç®—æ³•å°†å„èƒ½é‡æ®µæŠ•å½±æ•°æ®è½¬æ¢ä¸ºå›¾åƒï¼Œå¯¹å›¾åƒè¿›è¡ŒåŠ æƒæ±‚å’Œã€‚</p><ul><li>åŸºäº<strong>å›¾åƒåŠ æƒ</strong>çš„å¤šèƒ½å…‰å­è®¡æ•°Xçº¿CTå…¨èƒ½è°±å›¾åƒé‡å»ºæ”¹è¿›æ–¹æ³•[2]</li></ul><p>å¯¹æ¯ä¸ªèƒ½é‡æ®µçš„æŠ•å½±æ•°æ®é‡‡ç”¨<strong>æœ€å¤§åéªŒæ¦‚ç‡ï¼ˆMAPï¼‰ç»Ÿè®¡é‡å»ºç®—æ³•</strong>è¿›è¡Œå›¾åƒé‡å»ºâ€“&gt;å¯¹å„èƒ½é‡æ®µå›¾åƒè¿›è¡Œä¼˜åŒ–åŠ æƒæ±‚å’Œï¼Œè·å¾—å…¨èƒ½è°±å›¾åƒã€‚</p><p>MAPç»Ÿè®¡é‡å»ºç®—æ³•å¯æ˜¾è‘—æé«˜å…¨èƒ½è°±é‡å»ºå›¾åƒçš„å¯¹æ¯”å™ªå£°æ¯”ï¼ˆCNRï¼‰ã€‚</p><p>æ ¹æ®æ¯ä¸ªèƒ½é‡æ®µå›¾åƒä¸­å¯¹æ¯”ææ–™å’ŒèƒŒæ™¯ææ–™è¡°å‡ç³»æ•°å·®å¼‚æ„é€ æƒé‡ï¼Œç„¶åå°†æƒé‡èµ‹äºˆæ¯ä¸ªèƒ½é‡æ®µå›¾åƒè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°å…¨èƒ½è°±é‡å»ºå›¾åƒï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>å›¾åƒåŠ æƒæˆåƒæ³•</strong>ã€‚</p><ul><li>å¤šèƒ½å…‰å­è®¡æ•°X-CTèƒ½é‡åŠ æƒå›¾åƒé‡å»ºæ–¹æ³•[3]</li></ul><p>å¯¹å„èƒ½é‡æ®µæŠ•å½±è¿›è¡Œ<strong>FBP</strong>é‡å»ºï¼Œå¹¶å°†å„FBPé‡å»ºå›¾åƒåŠ æƒæ±‚å’Œè·å¾—æœ€ç»ˆçš„é‡å»ºå›¾åƒã€‚</p><h3 id="3-3-æ­£åˆ™åŒ–çº¦æŸé¡¹çš„è¿­ä»£ç±»é‡å»º">3.3 æ­£åˆ™åŒ–çº¦æŸé¡¹çš„è¿­ä»£ç±»é‡å»º</h3><ul><li>å¤šé€šé“è”åˆçš„å¹¿ä¹‰æ€»å˜åˆ†èƒ½è°±CTé‡å»º[4]</li></ul><p>å‹ç¼©æ„ŸçŸ¥ç†è®ºçš„å‡ºç°ï¼Œä½¿<strong>æ­£åˆ™åŒ–çº¦æŸé¡¹çš„è¿­ä»£ç±»é‡å»ºç®—æ³•</strong>å‘æŒ¥å‡ºå·¨å¤§çš„æ½œåŠ›ã€‚èƒ½è°± CT é‡å»ºä¸­ï¼Œæ­£åˆ™åŒ–çº¦æŸé¡¹ä»¥<strong>å…ˆéªŒå›¾åƒå¼•å¯¼å’Œç¨€ç–æ€§æ¡ä»¶</strong>ä¸ºä¸»ã€‚å…ˆéªŒå›¾åƒå¼•å¯¼ä»¥ Yu é‡‡ç”¨å…¨å…‰è°±å›¾åƒä½œä¸ºå…ˆéªŒå›¾åƒçš„å‹ç¼©æ„ŸçŸ¥(prior image constrained compressed sensingï¼ŒPICCS)ç®—æ³•ä¸ºä»£è¡¨ï¼Œç¨€ç–æ€§æ¡ä»¶åŒ…æ‹¬å…¨å˜åˆ†ã€ç´§æ¡†æ¶ã€å°æ³¢å’Œå­—å…¸å­¦ä¹ ç­‰å·²è¢«åº”ç”¨äº CT é‡å»ºï¼Œå¹¶å–å¾—äº†ä¸åŒç¨‹åº¦çš„æˆåŠŸã€‚å—ç©ºé—´åŸŸä¿¡æ¯ç›¸å…³æ€§çš„å¯å‘ï¼ŒZhangç­‰å°†æ€»å˜åˆ†ä¸èƒ½è°±å‡å€¼ç›¸ç»“åˆï¼Œæé«˜é‡å»ºå›¾åƒçš„è´¨é‡ã€‚Li ç­‰æå‡ºä¸€ç§èƒ½è°±éå±€éƒ¨å‡å€¼çš„æ–¹æ³•ï¼Œåˆ©ç”¨å›¾åƒç›¸å…³æ€§æ¥æŠ‘åˆ¶å™ªå£°å’Œæ¡çº¹ä¼ªå½±ã€‚Hu ç­‰åˆ©ç”¨å¼ é‡å­—å…¸å—çš„ç¨€ç–æ€§è¡¨ç¤ºæ¥æé«˜é‡å»ºè´¨é‡ã€‚é™ˆä½©å›ç­‰æå‡ºä¸€ç§æ€»å˜åˆ†ä¸ä¼ ç»Ÿå¼ é‡å­—å…¸å­¦ä¹ ç»“åˆçš„é‡å»ºç®—æ³•ï¼Œå¯è¿›ä¸€æ­¥æ¢å¤å›¾åƒçš„å¾®å°ç»“æ„ï¼Œæœ‰æ•ˆæŠ‘åˆ¶å™ªå£°ã€‚ä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨èƒ½è°± CT åœ¨èƒ½é‡è½´æ–¹å‘çš„ä¿¡æ¯ç›¸å…³æ€§ï¼ŒRigieç­‰å°†æ€»å˜åˆ†å‘çŸ¢é‡å»¶ä¼¸ï¼Œæå‡ºäº†æ€»æ ¸å˜åˆ†(total nuclear variationï¼ŒTNV)æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå¯ä»¥æ›´å¥½åœ°ä¿å­˜å›¾åƒç‰¹å¾ã€‚Niu ç­‰æå‡ºäº†ä¸€ç§alpha å‘æ•£çº¦æŸçš„å¹¿ä¹‰æ€»å˜åˆ†(total generalized variationï¼ŒTGV)æ–¹æ³•ç”¨äºç¨€ç–è§†è§’X å°„çº¿CT å›¾åƒé‡å»ºï¼Œæœ‰æ•ˆåœ°æ¶ˆé™¤æ€»å˜åˆ†æ­£åˆ™åŒ–ä¸­ç»å¸¸å‡ºç°çš„é˜¶æ¢¯çŠ¶å’Œæ–‘ç‰‡çŠ¶ä¼ªå½±ã€‚</p><p>åœ¨é‡å»ºè¿‡ç¨‹ä¸­ï¼Œé€šé“æ•°çš„å¢åŠ ä¼šé€ æˆå•é€šé“ä¸­å…‰å­æ•°å‡å°‘ï¼Œä»è€Œå¯¼è‡´é‡å»ºå›¾åƒè´¨é‡ä¸‹é™ï¼Œéš¾ä»¥æ»¡è¶³å®é™…éœ€æ±‚ã€‚</p><p>æœ¬æ–‡ä»èƒ½è°± CT é‡å»ºçš„è§’åº¦å‡ºå‘ï¼Œå°†å¹¿ä¹‰æ€»å˜åˆ†å‘çŸ¢é‡å»¶ä¼¸ï¼Œåˆ©ç”¨å¥‡å¼‚å€¼çš„ç¨€ç–æ€§ï¼Œä¿ƒè¿›å›¾åƒæ¢¯åº¦çš„çº¿æ€§ä¾èµ–ï¼Œæå‡ºä¸€ç§**åŸºäºæ ¸èŒƒæ•°çš„å¤šé€šé“è”åˆTGVï¼ˆå¹¿ä¹‰æ€»å˜åˆ†ï¼‰**çš„èƒ½è°± CT é‡å»ºç®—æ³•ã€‚</p><ul><li>å…‰å­æ¢æµ‹å™¨CTä½æµé€Ÿä½å‰‚é‡CTPAå›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä¼°[5]</li></ul><h3 id="3-4-åŸºäºæ·±åº¦å­¦ä¹ çš„é‡å»º">3.4 åŸºäºæ·±åº¦å­¦ä¹ çš„é‡å»º</h3><p>ç¥ç»ç½‘ç»œç›´æ¥æå–å›¾åƒä¸­å™ªå£°çš„ç‰¹å¾ä¿¡æ¯ï¼Œé€šè¿‡ä¸æ ‡å‡†å›¾åƒä½œå¯¹æ¯”æŠ‘åˆ¶è®­ç»ƒå›¾åƒä¸­çš„å™ªå£°ã€‚</p><ul><li>åŸºäºå…¨å·ç§¯é‡‘å­—å¡”æ®‹å·®ç½‘ç»œçš„èƒ½è°± CT å›¾åƒé™å™ªç ”ç©¶[6]</li></ul><p>å°†å…¨å·ç§¯ç½‘ç»œå’Œé‡‘å­—å¡”æ®‹å·®ç½‘ç»œç»“åˆä¸ºå…¨å·ç§¯é‡‘å­—å¡”æ®‹å·®ç½‘ç»œï¼ˆFCPRNï¼‰</p><p>åˆ©ç”¨èƒ½è°±CT åœ¨ä¸åŒçš„èƒ½é‡èŒƒå›´æ‰«æå°é¼ æ ·æœ¬ ï¼Œä½¿ç”¨ FDK ç®—æ³•å’ŒåŸºäºå‹ç¼©æ„ŸçŸ¥çš„Split-Bregmanç®—æ³•è¿›è¡Œé‡å»ºå¹¶åˆ†åˆ«ä½œä¸ºè®­ç»ƒæ•°æ®å’Œæ ‡ç­¾æ•°æ®è®­ç»ƒå…¨å·ç§¯é‡‘å­—å¡”æ®‹å·®ç½‘ç»œã€‚</p><p>ä¸DNCNã€REDCNNè¿›è¡Œå¯¹æ¯”ã€‚</p><p>æ¨¡å‹å¯¹FDKç®—æ³•é‡å»ºå‡ºçš„å›¾åƒè¿›è¡Œé™å™ªï¼Œç”±æ­¤æé«˜èƒ½è°±CTå›¾åƒé™å™ªæ•ˆç‡ï¼Œä¿è¯èƒ½è°±CTé‡å»ºå›¾åƒçš„è´¨é‡ã€‚</p><p>åœ¨èƒ½è°±CT å›¾åƒé™å™ªç ”ç©¶æ–¹é¢ ï¼Œç°å¤šé‡‡ç”¨è¿­ä»£é‡å»ºç®—æ³•å¯¹æŠ•å½±æ•°æ®è¿›è¡Œé‡å»ºä»¥æŠ‘åˆ¶å™ªå£°ã€‚ä¾‹å¦‚ Clarkç­‰ç»“åˆå›¾åƒçš„ç¨€ç–ç‰¹æ€§å’Œèƒ½è°±CT å›¾åƒç›¸å…³æ€§ä»¥æ„å»ºé‡å»ºç›®æ ‡å‡½æ•° ï¼Œæé«˜äº†èƒ½è°±CT å›¾åƒé‡å»ºæ•ˆæœã€‚ Rigieå’Œ Riviereç­‰æå‡ºäº†ä¸€ç§åŸºäºçŸ¢é‡å…¨å˜åˆ†ï¼ˆTVï¼‰çš„èƒ½è°±CT é‡å»ºç®—æ³•ã€‚ä¸Šè¿°å›¾åƒé‡å»ºé™å™ªç®—æ³•å¯ä»¥è¾ƒå¥½çš„æŠ‘åˆ¶èƒ½è°±CT é‡å»ºå›¾åƒä¸­çš„å™ªå£° ï¼Œä½†ç®—æ³•å¤æ‚åº¦è¾ƒé«˜ã€è®¡ç®—æ—¶é—´è¾ƒé•¿ã€‚</p><p>è¿‘å¹´æ¥ ï¼Œæ·±åº¦å­¦ä¹ åœ¨ CT å›¾åƒé™å™ªé¢†åŸŸä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚ç¥ç»ç½‘ç»œå¯ä»¥ç›´æ¥æå–å›¾åƒä¸­å™ªå£°çš„ç‰¹å¾ä¿¡æ¯ ï¼Œè¿›è€Œé€šè¿‡ä¸æ ‡å‡†å›¾åƒä½œå¯¹æ¯”æŠ‘åˆ¶è®­ç»ƒå›¾åƒä¸­çš„å™ªå£°ã€‚ä¾‹å¦‚ Chenç­‰ç ”ç©¶ä¸€ç§ CT å›¾åƒå»å™ªçš„æµ…å±‚å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ ï¼ŒåŸºäºè¯¥ç½‘ç»œæå‡ºäº†æ®‹å·®ç¼–ç å™¨-è§£ç å™¨å·ç§¯ç¥ç»ç½‘ç»œ ï¼Œå¹¶ä½¿ç”¨åå·ç§¯ç½‘ç»œå’Œå¿«æ·è¿æ¥ä»¥å¢å¼ºç½‘ç»œé™å™ªæ€§èƒ½ã€‚</p><h2 id="å››ï¼Œå…‰å­è®¡æ•°CTé‡å»ºä¸ä¼ ç»ŸCTé‡å»ºçš„åŒºåˆ«">å››ï¼Œå…‰å­è®¡æ•°CTé‡å»ºä¸ä¼ ç»ŸCTé‡å»ºçš„åŒºåˆ«</h2><h3 id="4-1-æŠ•å½±">4.1 æŠ•å½±</h3><ul><li><p>ä¼ ç»ŸCTï¼šé€šè¿‡å¯¹æŠ•å½±æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬è‡ªé€‚åº”æ»¤æ³¢ã€å‡æ–¹çš„æ»¤æ³¢ ï¼ŒåŸºäºå›¾åƒ K-L å˜æ¢çš„åŠ æƒæœ€å°å‡æ–¹å’Œå™ªå£°åˆ†ç¦»æ»¤æ³¢ç­‰ã€‚è¿‘æ¥çš„ç ”ç©¶é‡ç‚¹åœ¨äºå­¦ä¹ å‹ç¨€ç–è¡¨ç¤ºæ–¹æ³•ã€‚</p></li><li><p>å…‰å­è®¡æ•°CTï¼šä»æŠ•å½±æ­£å¼¦å›¾ä¸­æå–å™ªå£°ä¿¡æ¯ï¼Œæ„é€ å…³äºæƒé‡çš„å¯¹æ¯”å™ªå£°æ¯”ï¼ˆCNRï¼‰ä¼˜åŒ–å‡½æ•°ï¼Œæ±‚è§£æœ€ä¼˜æƒé‡ï¼Œåˆ©ç”¨æƒé‡è¿›è¡ŒæŠ•å½±åŠ æƒå›¾åƒé‡å»ºã€‚</p></li></ul><h3 id="4-2-å›¾åƒ">4.2 å›¾åƒ</h3><ul><li><p>ä¼ ç»ŸCTï¼š</p><ul><li>ä¼ ç»Ÿï¼šåŸºäºéå±€éƒ¨å‡å€¼ï¼ˆNLMï¼‰ã€‚ä»é«˜è´¨é‡CTå›¾åƒä¸­æå–æœ‰æ•ˆçš„ç‰¹å¾ä¿¡æ¯ï¼Œä¸ºä½è´¨é‡çš„CTå›¾åƒå¤„ç†æä¾›å…ˆéªŒæŒ‡å¯¼ã€‚</li><li>åŸºäºæ·±åº¦å­¦ä¹ ï¼šç½‘ç»œæ¡†æ¶æ”¹è¿›ï¼ˆCNNã€GANã€RNNï¼‰ï¼ŒåŠŸèƒ½æ¨¡å—è®¾è®¡ï¼ˆæ³¨æ„åŠ›æ¨¡å—ï¼‰ï¼Œè®­ç»ƒç­–ç•¥æ”¹è¿›ï¼ˆæœ‰ç›‘ç£ã€æ— ç›‘ç£ï¼‰</li></ul></li><li><p>å…‰å­è®¡æ•°CTï¼š</p><ul><li>åˆ©ç”¨æŸä¸€ç§é‡å»ºç®—æ³•å°†å„èƒ½é‡æ®µæŠ•å½±æ•°æ®è½¬æ¢ä¸ºå›¾åƒï¼Œå¯¹å›¾åƒè¿›è¡ŒåŠ æƒæ±‚å’Œã€‚</li><li>ç¥ç»ç½‘ç»œç›´æ¥æå–å›¾åƒä¸­å™ªå£°çš„ç‰¹å¾ä¿¡æ¯ï¼Œé€šè¿‡ä¸æ ‡å‡†å›¾åƒä½œå¯¹æ¯”æŠ‘åˆ¶è®­ç»ƒå›¾åƒä¸­çš„å™ªå£°ã€‚ç±»ä¼¼äºä¼ ç»ŸCTä¸­åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ã€‚</li></ul></li></ul><h3 id="4-3-è¿­ä»£é‡å»º">4.3 è¿­ä»£é‡å»º</h3><ul><li><p>ä¼ ç»ŸCTï¼š</p><ul><li><p>ä¼ ç»Ÿï¼š</p><ul><li><p>è§£æé‡å»ºï¼šFBPã€FDK</p></li><li><p>è¿­ä»£é‡å»ºï¼š</p><ul><li><p>ä»£æ•°è¿­ä»£</p></li><li><p>ç»Ÿè®¡è¿­ä»£ï¼ˆSIRï¼Œé‡å»ºæ•ˆæœæœ€å¥½ï¼‰</p><p>ä¸ç¨€ç–å­¦ä¹ è¡¨ç¤ºçº¦æŸç»“åˆï¼Œæœ€å¸¸ç”¨çš„æ˜¯TVï¼ˆæ€»å˜åˆ†ï¼‰çº¦æŸè¿­ä»£é‡å»ºå’ŒåŸºäºç‰¹å¾å­—å…¸å­¦ä¹ è¿›è¡Œç¨€ç–è¡¨ç¤ºã€‚</p></li></ul></li></ul></li><li><p>åŸºäºæ·±åº¦å­¦ä¹ ï¼šå­¦ä¹ FBPã€å­¦ä¹ æ­£åˆ™é¡¹ã€å­¦ä¹ è¿­ä»£æ±‚è§£</p></li></ul></li><li><p>å…‰å­è®¡æ•°CT:</p><ul><li>æ­£åˆ™åŒ–çº¦æŸé¡¹çš„è¿­ä»£é‡å»º<ul><li>å…ˆéªŒå›¾åƒå¼•å¯¼</li><li>ç¨€ç–æ€§æ¡ä»¶ï¼šæ€»å˜åˆ†ã€ç´§æ¡†æ¶ã€å°æ³¢ã€å­—å…¸å­¦ä¹ </li></ul></li></ul></li></ul><h2 id="äº”ï¼Œå…‰å­è®¡æ•°CTä¸´åºŠåº”ç”¨">äº”ï¼Œå…‰å­è®¡æ•°CTä¸´åºŠåº”ç”¨</h2><h3 id="5-1-èƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•">5.1  èƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•</h3><p>2022 å¹´ 2 æœˆæ­¦æ±‰å¸‚è‚ºç§‘åŒ»é™¢æ”¾å°„ç§‘å‘è¡¨çš„ä¸€ç¯‡æ–‡ç« [7]</p><ul><li><p>ç›®çš„ï¼šæ¢è®¨åŸºäºèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½å‰‚é‡CTæ£€æŸ¥ä¸­çš„åº”ç”¨ã€‚</p></li><li><p>æ–¹æ³•ï¼šé€‰å–2019å¹´4æœˆè‡³6æœˆæ­¦æ±‰å¸‚è‚ºç§‘åŒ»é™¢ç¡®è¯Šçš„70ä¾‹ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½œä¸ºç ”ç©¶å¯¹è±¡ã€‚åˆæ£€é‡‡ç”¨å¸¸è§„å‰‚é‡ç»„ï¼šç®¡ç”µå‹110 kVï¼Œå‚è€ƒç®¡ç”µæµ52 mAsï¼Œæ»¤æ³¢åæŠ•å½±ï¼ˆFBPï¼‰é‡å»ºå›¾åƒï¼›å¤æ£€é‡‡ç”¨ä½å‰‚é‡ç»„ï¼ˆèƒ½è°±çº¯åŒ–ï¼‰ï¼šç®¡ç”µå‹Sn 110 kVï¼Œå‚è€ƒç®¡ç”µæµ73 mAsï¼Œæ­£å¼¦å›¾è¿­ä»£é‡å»ºï¼ˆSAFIREï¼‰ã€‚æ¯”è¾ƒä¸¤ç»„å›¾åƒä¸»è§‚è¯„åˆ†ã€å‡ä¸»åŠ¨è„‰CTå€¼ã€å›¾åƒå™ªå£°ã€SNRåŠè¾å°„å‰‚é‡å·®å¼‚ã€‚</p></li><li><p>ç»“æœï¼šä¸¤ç»„å›¾åƒä¸»è§‚è¯„åˆ†ç›¸æ¯”æ— å·®å¼‚ï¼Œæ»¡è¶³ä¸´åºŠè¯Šæ–­è¦æ±‚ã€‚ä¸¤ç»„å‡ä¸»åŠ¨è„‰CTå€¼æ— å·®å¼‚ï¼›ä½å‰‚é‡ç»„å›¾åƒSNRä½äºå¸¸è§„å‰‚é‡ç»„ã€‚ä½å‰‚é‡ç»„EDï¼ˆ0.36Â±0.15ï¼‰mSvä¸å¸¸è§„å‰‚é‡ç»„ï¼ˆ2.35Â±0.73ï¼‰mSvç›¸æ¯”é™ä½çº¦84.7ï¼…ã€‚</p></li><li><p><strong>ç»“è®ºï¼šèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…æ£€æŸ¥ä¸­èƒ½å¤Ÿæ˜¾è‘—é™ä½æ‚£è€…æ‰€å—è¾å°„å‰‚é‡ï¼ŒåŒæ—¶å›¾åƒè´¨é‡ä¹Ÿèƒ½æ»¡è¶³ä¸´åºŠè¯Šæ–­è¦æ±‚ã€‚</strong></p></li></ul><h3 id="5-2-å…‰å­æ¢æµ‹å™¨CTä½æµé€Ÿä½å‰‚é‡CTPAå›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä¼°">5.2 å…‰å­æ¢æµ‹å™¨CTä½æµé€Ÿä½å‰‚é‡CTPAå›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä¼°</h3><p>2021å¹´ä¸­å›½åŒ»å­¦ç§‘å­¦é™¢åŒ—äº¬åå’ŒåŒ»å­¦é™¢åŒ—äº¬åå’ŒåŒ»é™¢æ”¾å°„ç§‘[5]</p><ul><li>ç›®çš„ï¼šå®¢è§‚è¯„ä¼°åº”ç”¨å…‰å­æ¢æµ‹å™¨CTè¡Œä½æµé€Ÿä½å‰‚é‡å¯¹æ¯”å‰‚CTè‚ºåŠ¨è„‰é€ å½±(CTPA)ä¸åŒå•èƒ½è°±ä¸‹çš„å›¾åƒè´¨é‡ï¼Œæ¢ç©¶CTPAçš„æœ€ä½³å•èƒ½è°±å›¾åƒã€‚</li><li>æ–¹æ³•ï¼šçº³å…¥è¡ŒCTPAæ£€æŸ¥çš„æ‚£è€…47ä¾‹ï¼Œ æ‰€æœ‰æ‚£è€…å‡ç”¨å…‰å­æ¢æµ‹å™¨CTè¿›è¡ŒCTPAæ‰«æï¼Œæ‰«æèŒƒå›´è‡ªèƒ¸å»“å…¥å£è‡³è†ˆè‚Œæ°´å¹³ï¼Œä»¥10 keVé—´è·é‡å»º9ä¸ªå•èƒ½è°±å›¾åƒï¼Œåˆ†åˆ«ä¸º40ã€50ã€60ã€70ã€80ã€90ã€100ã€110ã€120 keVçš„å›¾åƒã€‚åœ¨è‚ºåŠ¨è„‰ä¸»å¹²(PA)ã€å³è‚ºåŠ¨è„‰ä¸»å¹²(RP)ã€å·¦è‚ºåŠ¨è„‰ä¸»å¹²(LP)ã€å³è‚ºä¸Šå¶åŠ¨è„‰(URP)ã€å³è‚ºä¸‹å¶åŠ¨è„‰(LRP)ã€å·¦è‚ºä¸Šå¶åŠ¨è„‰(ULP)ã€å·¦è‚ºä¸‹å¶åŠ¨è„‰(LLP)å‹¾ç”»20 mm2æ„Ÿå…´è¶£åŒºï¼Œè®°å½•å„ä¸ªæ„Ÿå…´è¶£åŒºåŠå³ä¸»æ°”ç®¡ã€èƒŒé˜”è‚Œç»„ç»‡çš„CTå€¼å’Œæ ‡å‡†å·®ï¼Œè®¡ç®—ä¸åŒèƒ½è°±ç­‰çº§ä¸‹å›¾åƒçš„ä¿¡å™ªæ¯”(SNR)ã€å¯¹æ¯”å™ªå£°æ¯”(CNR)ã€‚é‡‡ç”¨Wilcoxonç§©å’Œæ£€éªŒå¯¹æ¯”ä¸åŒå•èƒ½è°±ç­‰çº§çš„CTå€¼ã€SNRå’ŒCNRã€‚</li><li>ç»“æœï¼šå•èƒ½è°±40 keVæ—¶è‚ºåŠ¨è„‰ä¸»å¹²CTå€¼594. 17 HU(434.16ï½829.52) HUã€SNR16.88(7.35 ï½30.12)å’ŒCNR 15.63 (6.7 ï½ 26.54)ï¼Œå‡æ˜¾è‘—é«˜äº50 ï½ 120 keVèƒ½çº§ç»„ï¼ŒZ( PAã€LAã€RA)=5.968ï¼ŒPï¼œ0.05å·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ã€‚å•èƒ½è°±40 keVæ—¶RPã€LPã€URPã€LRPã€ULPã€LLPçš„CTå€¼å‡æ˜¾è‘—é«˜äº50 ï½ 120 keVç»„ï¼ŒZ(URPã€LRPã€ULPã€LLP) =5.968ï¼ŒPï¼œ0.05å·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ã€‚</li><li><strong>ç»“è®ºï¼šåº”ç”¨å…‰å­æ¢æµ‹å™¨CTè¡Œä½æµé€Ÿä½å‰‚é‡å¯¹æ¯”å‰‚CTPAï¼Œå¯è·å¾—é«˜å¯¹æ¯”åº¦ã€é«˜ä¿¡å™ªæ¯”çš„å›¾åƒï¼Œæœ€ä½³å•èƒ½è°±ç­‰çº§ä¸º40 keVã€‚åº”ç”¨å…‰å­æ¢æµ‹å™¨CTå¯å¼¥è¡¥è‚ºåŠ¨è„‰å¼ºåŒ–ä¸ä½³å¯¼è‡´æ— æ³•è¯Šæ–­çš„éš¾é¢˜ï¼Œèƒ½è¿›ä¸€æ­¥å‡å°‘å¯¹æ¯”å‰‚ä¸è‰¯äº‹ä»¶çš„å‘ç”Ÿï¼Œå€¼å¾—ä¸´åºŠæ¨å¹¿åº”ç”¨ã€‚</strong></li></ul><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><p>[1] å‘¨æ­£ä¸œ,ç®¡ç»æ—,ä½™å­ä¸½,ç­‰. åŸºäºæŠ•å½±åŠ æƒçš„å¤šèƒ½å…‰å­è®¡æ•°Xçº¿CTå…¨èƒ½è°±å›¾åƒé‡å»ºæ”¹è¿›æ–¹æ³•[J]. ä¸œå—å¤§å­¦å­¦æŠ¥ï¼ˆè‡ªç„¶ç§‘å­¦ç‰ˆï¼‰,2016,46(6):1126-1131. DOI:10.3969/j.issn.1001-0505.2016.06.003.</p><p>[2] å‘¨æ­£ä¸œ,ç®¡ç»æ—,æ¶‚ä½³ä¸½,ç­‰. åŸºäºå›¾åƒåŠ æƒçš„å¤šèƒ½å…‰å­è®¡æ•°Xçº¿CTå…¨èƒ½è°±å›¾åƒé‡å»ºæ”¹è¿›æ–¹æ³•[J]. ä¸œå—å¤§å­¦å­¦æŠ¥ï¼ˆè‡ªç„¶ç§‘å­¦ç‰ˆï¼‰,2017,47(5):892-896. DOI:10.3969/j.issn.1001-0505.2017.05.009.</p><p>[3] ä½™å­ä¸½,å‘¨æ­£ä¸œ,å¼ é›¯é›¯,ç­‰. å¤šèƒ½å…‰å­è®¡æ•°X-CTèƒ½é‡åŠ æƒå›¾åƒé‡å»ºæ–¹æ³•[J]. ä¸­å›½åŒ»å­¦ç‰©ç†å­¦æ‚å¿—,2016,33(2):141-145. DOI:10.3969/j.issn.1005-202X.2016.02.007.</p><p>[4] è¿ç¥¥åª›,å­”æ…§å,æ½˜æ™‹å­,ç­‰. å¤šé€šé“è”åˆçš„å¹¿ä¹‰æ€»å˜åˆ†èƒ½è°±CTé‡å»º[J]. å…‰ç”µå·¥ç¨‹,2021(9). DOI:10.12086/oee.2021.210211.</p><p>[5] æœåé˜³,å®‹ä¼Ÿ,éš‹æ˜•,ç­‰. å…‰å­æ¢æµ‹å™¨CTä½æµé€Ÿä½å‰‚é‡CTPAå›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä¼°[J]. ä¸´åºŠæ”¾å°„å­¦æ‚å¿—,2021,40(3):470-475.</p><p>[6] ä»»å­¦æ™º,ä½•é¹,é¾™é‚¹è£,ç­‰. åŸºäºå…¨å·ç§¯é‡‘å­—å¡”æ®‹å·®ç½‘ç»œçš„èƒ½è°±CTå›¾åƒé™å™ªç ”ç©¶[J]. å…‰è°±å­¦ä¸å…‰è°±åˆ†æ,2021(9). DOI:10.3964/j.issn.1000-0593(2021)09-2950-06.</p><p>[7] å§œä¸€, ç”°è‘µ, æ²™æ™‹ç’, ç­‰. åŸºäºèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½å‰‚é‡CTæ£€æŸ¥ä¸­çš„åº”ç”¨[J]. CTç†è®ºä¸åº”ç”¨ç ”ç©¶, 2022, 31(1): 95-101. DOI: 10.15953/j.1004-4140.2022.31.01.11</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>CT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>CT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç ”ç©¶æ–°æ„åº¦å’Œè®ºæ–‡æ€è·¯æ–¹æ³•</title>
    <link href="/2022/02/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/how-output-paper/"/>
    <url>/2022/02/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/how-output-paper/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒææ²çš„ç›¸å…³è§†é¢‘</p><p><a href="https://www.bilibili.com/video/BV1ea41127Bq?spm_id_from=333.999.0.0">ç ”ç©¶æ–°æ„åº¦çš„äº”å¤§è¯¯è§£</a></p><p><a href="https://www.bilibili.com/video/BV1qq4y1z7F2?spm_id_from=333.999.0.0">å¦‚ä½•æ‰¾è®ºæ–‡æ€è·¯1â€“æ‰“è¡¥ä¸æ³•</a></p></blockquote><h2 id="æ–‡ç« çš„æ–°æ„åº¦â€‹-ğŸ”">æ–‡ç« çš„æ–°æ„åº¦â€‹ ğŸ”</h2><p>å¯èƒ½åœ¨å‘è¡¨æ–‡ç« çš„æ—¶å€™ï¼Œç»å¸¸ä¼šè¢«åæ§½æ–‡ç« çš„æ–°æ„åº¦ä¸å¤Ÿã€‚</p><p>$ç ”ç©¶ä»·å€¼=æ–°æ„åº¦ \times æœ‰æ•ˆæ€§ \times é—®é¢˜å¤§å°$</p><p>æœ‰æ•ˆæ€§å¯ä»¥ç”¨å®éªŒç»“æœçš„å¥½åè¡¡é‡ï¼Œé—®é¢˜å¤§å°å¯ä»¥åœ¨ç ”ç©¶é¢†åŸŸä¸­æœ‰å¤šå°‘ç ”ç©¶è€…ï¼Œå‘è¡¨äº†å¤šå°‘ç¯‡è®ºæ–‡æ¥å¤§è‡´è¡¡é‡ã€‚</p><p>æŸ¥é˜…ä¸€ä½å­¦æœ¯å¤§ä½¬Michael Blackçš„ä¸€ç¯‡åšå®¢ ç§‘å­¦ä¸­çš„æ–°æ„åº¦ ï¼ˆ<a href="https://perceiving-systems.blog/en/news/novelty-in-science">Novelty in Science</a>ï¼‰ä»–çš„å‰¯æ ‡é¢˜æ˜¯A guide for reviewers ç»™å®¡ç¨¿äººçš„æŒ‡å—ã€‚</p><p><img src="https://picture.mulindya.com/read_paper-1.png" alt=""></p><p>I see reviewers regularly mistake <strong>complexity</strong>, <strong>difficulty</strong>, and <strong>technicality</strong> for <strong>novelty</strong>. In science reviewing, novelty seems to imply these things. We might be better served by removing the word â€œnoveltyâ€ from the review instructions and replacing it with <em><strong>beauty</strong></em>.</p><p>å®¡ç¨¿äººç»å¸¸ä¼šæŠŠå¤æ‚åº¦ï¼Œå›°éš¾åº¦å’ŒæŠ€æœ¯åº¦ä¸æ–°æ„åº¦ææ··ï¼Œä»–å»ºè®®åœ¨è¯„å®¡æ—¶æŠŠæ–°æ„åº¦æ‹¿æ‰ï¼Œæ¢æˆ<em>ä¼˜ç¾</em>ã€‚</p><p>å¯¹äºç†è®ºç ”ç©¶è€…è€Œè¨€ï¼Œä¹‹å‰æ‰€è¯´çš„åˆ¤æ–­ä»·å€¼çš„æ–¹æ³•å°±å¤±æ•ˆäº†å“¦~ï¼Œå¯¹ç†è®ºç ”ç©¶çš„åˆ¤æ–­ä¸€èˆ¬ä¼šä½¿ç”¨ä¸¤ä¸ªè¯ï¼Œæ·±åˆ»å’Œä¼˜ç¾ï¼Œæ·±åˆ»å°±æ˜¯è¯´æ˜¯å¦æ­ç¤ºäº†æœ¬è´¨çš„ä¸œè¥¿ï¼Œä¼˜ç¾æ˜¯æŒ‡å®šç†çš„æœ¬èº«å’Œå…¶ç›¸å…³çš„è¯æ˜æ˜¯å¦æœ‰ç¾æ„Ÿï¼Œä¼˜ç¾çš„å¥½å¤„æ˜¯æŠŠæŠ€æœ¯æ€§å’Œå¤æ‚æ€§å‰¥é™¤</p><p>æ¥çœ‹çœ‹å®¡ç¨¿äººå¯¹äºnoveltyçš„è¯¯åŒº</p><h3 id="Novelty-as-complexity"><strong>Novelty as complexity</strong></h3><p>The simplicity of an idea is often confused with a lack of novelty when exactly the opposite is often true.  A common review critique is</p><p><em>The idea is very simple. It just changes one term in the loss and everything else is the same as prior work.</em></p><p><strong>If nobody thought to change that one term, then it is <em>ipso facto</em> novel.</strong> The inventive insight is to realize that a small change could have a big effect and to formulate the new loss.</p><p>Such reviews lead my students to say that we should make an idea appear more complex so that reviewers will find it of higher value.  <strong>I value simplicity over unnecessary complexity; the simpler the better.</strong> Taking an existing network and replacing one thing is better science than concocting a whole new network just to make it look more complex.</p><p>è¯¯åŒºä¸€ï¼šç”¨å¤æ‚åº¦è¡¡é‡æ–°æ„åº¦ï¼›åº”è¯¥æ˜¯å¤§é“è‡³ç®€ï¼</p><h3 id="Novelty-as-difficulty"><strong>Novelty as difficulty</strong></h3><p>Itâ€™s hard to get a paper into a top conference, therefore reviewers often feel that the ideas and technical details must be difficult.  The authors have to shed blood, sweat, and tears to deserve a paper. Inexperienced reviewers, in particular, like to see that the authors have really worked hard.</p><p>Formulating a simple idea means stripping away the unnecessary to reveal the core of something. This is one of the most useful things that a scientist can do.</p><p><strong>A simple idea can be important. But it can also be trivial</strong>ï¼ˆæ˜¾ç„¶çš„ï¼‰. This is where reviewers struggle. A trivial idea is an unimportant idea. If a paper has a simple idea that works better than the state of the art, then it is most likely not trivial.  The authors are onto something and the field will be interested.</p><p>è¯¯åŒºäºŒï¼šç”¨å›°éš¾åº¦è¡¡é‡æ–°æ„åº¦ï¼›ç®€å•æœ‰æ•ˆè¯æ˜æœ€æ ¸å¿ƒçš„ä¸œè¥¿ã€‚æ–¹æ³•ç®€å•ä½†éå¸¸æœ‰æ•ˆ</p><h3 id="Novelty-as-surprise"><strong>Novelty as surprise</strong></h3><p>Novelty and surprise are closely related. A novel idea is a surprising one by definition â€“ itâ€™s one that nobody in the field thought of.  But there is a flip side to this as surprise is a fleeting emotion. If you hear a good idea, there is a moment of surprise and then, the better it is, the more obvious it may seem. A common review:</p><p><em>The idea is obvious because the authors just combined two well known ideas.</em></p><p>Obvious is the opposite of novelty. So, if an idea is obvious <em>after</em> youâ€™ve heard it, reviewers quickly assume it isnâ€™t novel.  The novelty, however, must be evaluated <em>before</em> the idea existed. The inventive novelty was to have the idea in the first place.  If it is easy to explain and obvious in hindsight, this in no way diminishes the creativity (and novelty) of the idea.</p><p>è¯¯åŒºä¸‰ï¼šç”¨æƒŠè®¶ç¨‹åº¦è¡¡é‡æ–°æ„åº¦ï¼›Aï¼ŒBè¢«æå‡ºï¼Œä¸èƒ½è¯´A+Bæœ‰æ•ˆæœå°±ä¸å¤Ÿåˆ›æ–°äº†ã€‚</p><h3 id="Novelty-as-technical-novelty"><strong>Novelty as technical novelty</strong></h3><p>The most common misconception of reviewers is that novelty pertains to technical details. Novelty (and value) come in many forms in papers. A new dataset can be novel if it does something no other dataset has done, even if all the methods used to generate the dataset are well known. A new use of an old method can be novel if nobody ever thought to use it this way. Replacing a complex algorithm with a simple one provides insight.</p><p>Novelty reveals itself in as many ways as beauty. Before critiquing a paper for a lack to technical novelty ask yourself if the true novelty lies elsewhere.</p><p>è¯¯åŒºå››ï¼šæŠ€æœ¯æ–°æ„ä»£è¡¨æ–°æ„åº¦ï¼›è€æ–¹æ³•ç”¨åœ¨æ–°é¢†åŸŸå°±æ˜¯æœ‰åˆ›æ–°;</p><h3 id="Novelty-as-usefulness-or-value"><strong>Novelty as usefulness or value</strong></h3><p>Not all novel ideas are useful. Just the property of being new does not connote value.  We want new ideas that lead us somewhere.  Here, reviewers need to be very careful.  Itâ€™s very hard to know where a new idea wi</p><p>ll take the field because any predictions that we make are based on the field as it is today.</p><p>A common review I get is</p><p><em>The authors describe a new method but I donâ€™t know why anyone needs this.</em></p><p>Lack of utility is indeed an issue but it is very hard to assess with a new idea. Reviewers should be careful here and aware that we all have limited imagination.</p><p>è¯¯åŒºäº”ï¼šç”¨æœ‰æ•ˆæ€§æˆ–ä»·å€¼æ¥è¡¡é‡æ–°æ„åº¦ï¼›</p><h4 id="ä½œè€…è§è§£">ä½œè€…è§è§£</h4><p>æ–°æ„åº¦ä¸ç­‰äº  å¤æ‚åº¦ï¼Œå›°éš¾åº¦ï¼ŒæƒŠè®¶åº¦ï¼ŒæŠ€æœ¯æ–°æ„ï¼Œæœ‰æ•ˆæ€§</p><p>æ–°æ„åº¦ çº¦ç­‰äº ä¼˜ç¾</p><p>è¦æ‡‚å¾—æ¬£èµ</p><h2 id="å¦‚ä½•å¯»æ‰¾ç ”ç©¶æƒ³æ³•-ğŸ’¡">å¦‚ä½•å¯»æ‰¾ç ”ç©¶æƒ³æ³• ğŸ’¡</h2><h3 id="æ‰“è¡¥ä¸æ³•">æ‰“è¡¥ä¸æ³•</h3><p>åœ¨è¯»è®ºæ–‡çš„æ—¶å€™ï¼Œè¯»çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•…äº‹ï¼Œåœ¨è‡ªå·±æ¢ç´¢ideaçš„æ—¶å€™ï¼Œå°±éœ€è¦æŠŠåŸæ–‡ç« çš„ä¸œè¥¿æç‚¼ï¼Œæ”¹è¿›å®ƒçš„ä¸è¶³ä¹‹å¤„ï¼Œå†è®²å¥½ä¸€ä¸ªæ•…äº‹ï¼Œå‹‡äºå°è¯•ã€‚å¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤šæƒ³æ³•ï¼Œå…³é”®åœ¨äºéªŒè¯ï¼Œåšå®éªŒå»çœ‹å“ªä¸€ä¸ªæ•ˆæœæœ€å¥½ï¼Œå¾ˆå¤šæ—¶å€™æ€è€ƒç†è®ºå¾—å‡ºçš„ç›´è§‰åœ¨åšå®éªŒçš„æ—¶å€™å‘ç°å¹¶ä¸æ˜¯é‚£ä¹ˆå›äº‹ï¼Œä½†æ˜¯é€šè¿‡è§‚å¯Ÿå®éªŒç»“æœï¼Œå¯ä»¥å¾—åˆ°ä¸€äº›æ–°çš„æƒ³æ³•ï¼Œç„¶åå†å¼€å§‹åšå®éªŒï¼Œå¯ä»¥å†å®éªŒä¸­å‘ç°ä¸€äº›æƒ³æ³•ã€‚å¾ˆå¤šæ—¶å€™ï¼Œå…¶å®æ¯ä¸ªideaå¯¹è‡ªå·±æœ€åéƒ½æœ‰ä¸€å®šçš„è´¡çŒ®ï¼ŒæŠŠè¿™äº›ä¸œè¥¿ç³…åˆèµ·æ¥ï¼Œä¹Ÿå¯ä»¥å½¢æˆä¸€ç¯‡æ–‡ç« ã€‚</p><p>å¥½å¤„æ˜¯æ¯”è¾ƒå¥½ä¸Šæ‰‹ï¼Œé—¨æ§›ä¸å¤ªé«˜ã€‚</p><p>æ¯”å¦‚è¯´ä½•æºæ˜21å¹´11æœˆä»½MAEè¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯ç³…åˆäº†ä¸¤ä¸ªä¸œè¥¿ï¼Œç¼ºå°‘ä¸€ä¸ªæ•ˆæœéƒ½ä¼šå¤§æ‰“æŠ˜æ‰£ï¼›è¿™äº›è¡¥ä¸çš„ä½œç”¨å°±æ˜¯è®©æœ€åçš„æ•ˆæœæœ‰æå‡ã€‚</p><p>MAE</p><ul><li>åŸºäºVIT+BERT<ul><li>é®ä½æ›´å¤šçš„å›¾ç‰‡å—<ul><li>ç¼–ç æ—¶åªå¤„ç†æ²¡æœ‰é®ä½çš„</li></ul></li></ul></li><li>ç”¨Transfomeræ¥è¾“å‡ºï¼ˆè§£ç ï¼‰</li></ul><p>ä½†æ˜¯ä¹Ÿè¦æ³¨æ„ä¸è¦åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šæ‰“ä¸Šå¤ªå¤šè¡¥ä¸ï¼Œå¦‚æœæ‚ä¹±çš„å¡«å……ä¼šæ˜¾å¾—ideaä¸å¤Ÿä¼˜é›…ã€‚æœ€å¥½åœ¨æ‰“è¡¥ä¸çš„æ—¶å€™ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæ•…äº‹å°†è‡ªå·±çš„æƒ³æ³•ä¸²èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¦æœ‰é€»è¾‘ï¼Œè®²å¥½æ•…äº‹ï¼Œä¸è¦æœ‰å¤ªå¼ºçš„è¿å’Œæ„Ÿã€‚</p><p>éš¾ç‚¹æ˜¯ï¼šè¿™ç§æ–¹æ³•å¯¹å†™ä½œæ˜¯ä¸€ä¸ªè€ƒéªŒï¼Œæœ‰æ—¶å¯ä»¥æŠŠä¸å¤ªé‡è¦çš„è¡¥ä¸æ‹¿æ‰ï¼Œåœ¨æœ€åé€‰æ‹©å“ªäº›è®ºæ–‡æ‰“è¡¥ä¸ä¹Ÿæ˜¯å¾ˆæœ‰è®²ç©¶çš„ï¼Œé€‰æ‹©çš„è®ºæ–‡è¦æ–°ï¼Œç©ºé—´è¦å¤§ã€‚å¦‚æœä¸€ç¯‡è®ºæ–‡æœ¬èº«å°±æ˜¯æ‰“äº†è¡¥ä¸ï¼Œå†å»æ”¹è¿›å°±å¾ˆéš¾æœ‰å¾ˆå¥½çš„æˆå°±ï¼Œå› ä¸ºä½œè€…åœ¨è¿›è¡Œè‡ªå·±çš„æ”¹è¿›å°±å¯èƒ½è¯•è¿‡å¾ˆå¤šæ–¹æ³•äº†ã€‚æœ€å¥½æ˜¯é€‰ä¸€äº›è„‘æ´æ¯”è¾ƒæ‰“çš„è®ºæ–‡ï¼Œæ¯”å¦‚è¯´VITåˆšå‡ºæ¥ï¼Œé©¬ä¸Šå°±æœ‰å¾ˆå¤šäººå»è·Ÿè¿›åšå®éªŒï¼Œå› ä¸ºVITçš„æ€æƒ³æ¯”è¾ƒæ–°ï¼Œé‡Œé¢æ²¡æœ‰åšè¿‡çš„æƒ³æ³•å¾ˆå¤šï¼Œè¿™ç§æ–¹æ³•å¯¹ç¡¬ä»¶è¦æ±‚ä¹Ÿæ¯”è¾ƒé«˜ï¼Œå¯¹è´¢åŠ›è¦æ±‚è¾ƒé«˜ã€‚</p><p>åè¿‡æ¥æ¥è®²ï¼Œä¹Ÿå¯ä»¥å»åšä¸€äº›æ¯”è¾ƒæ–°çš„æ¨¡å‹ï¼Œè¿›è¡Œä¸€äº›æ”¹è¿›ä½¿å¾—è®­ç»ƒæ›´å¿«ï¼Œè½¬æ¢æ€è·¯è®©è®­ç»ƒæ›´å¿«æ›´ä¾¿å®œï¼Œè€Œä¸æ˜¯æ‰§ç€äºç²¾åº¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>é˜…è¯»æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>é˜…è¯»æ–¹æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•è¯»è®ºæ–‡</title>
    <link href="/2022/02/10/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/read-paper/"/>
    <url>/2022/02/10/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/read-paper/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¯¼å¸ˆè¯´å¸Œæœ›æˆ‘ä»¬å¯ä»¥å‘ä¸€ç¯‡è´¨é‡å¾ˆå¥½çš„è®ºæ–‡ï¼Œä»¥åä¸å…ä¼šç»å¸¸çœ‹æ–‡çŒ®ï¼Œæœ‰çš„æ—¶å€™çœ‹è®ºæ–‡æŠ“ä¸ä½é‡ç‚¹ï¼ŒèŠ±è´¹å¾ˆä¹…å¾ˆä¹…çš„æ—¶é—´å¯èƒ½éƒ½ä¸èƒ½å¯¹è¿™ä¸ªé—®é¢˜æœ‰æ¸…æ™°çš„äº†è§£ã€‚æˆ–è€…æœ€åå‘ç°è¿™ç¯‡è®ºæ–‡å¹¶ä¸æ˜¯æˆ‘çœŸæ­£éœ€è¦çš„ï¼›å¯¹äºç²¾è¯»å’Œç•¥è¯»çš„æ–¹æ³•ä¹Ÿä¼šæœ‰æ‰€ç–‘æƒ‘ã€‚æ¥çœ‹çœ‹å­¦æœ¯å¤§ä½¬æ²ç¥ï¼Œä»–æ¨èæ˜¯æ€ä¹ˆå»è¯»è®ºæ–‡å­~å­¦ä¹ ä¸€ä¸‹ä¸‹å˜¿å˜¿ã€‚</p></blockquote><blockquote><p>å‚è€ƒå´æ©è¾¾ï¼Œææ²çš„ç›¸å…³è§†é¢‘</p><p>cs230 <a href="https://www.bilibili.com/video/BV195411Y7ms/?spm_id_from=333.788.recommend_more_video.11">å¦‚ä½•è¯»è®ºæ–‡</a></p><p>æ²ç¥ï¼š</p><p><a href="https://www.bilibili.com/video/BV1H44y1t75x?spm_id_from=333.999.0.0">å¦‚ä½•è¯»è®ºæ–‡</a></p><p><a href="https://www.bilibili.com/video/BV1oL411c7Us?spm_id_from=333.999.0.0">å¦‚ä½•åˆ¤æ–­ç ”ç©¶å·¥ä½œçš„ä»·å€¼</a></p></blockquote><h2 id="å¦‚ä½•æŸ¥æ‰¾æ–‡çŒ®ğŸ”">å¦‚ä½•æŸ¥æ‰¾æ–‡çŒ®ğŸ”</h2><p>è°·æ­Œå­¦æœ¯ï¼Œé¡¶åˆŠï¼ŒarXivï¼ŒMedium postsï¼ŒGithub post</p><h2 id="è¯»è®ºæ–‡çš„æ­¥éª¤-ğŸ“®">è¯»è®ºæ–‡çš„æ­¥éª¤ ğŸ“®</h2><p>ç¼–åˆ¶è®ºæ–‡æ¸…å• ï¼ˆarXivï¼ŒMedium postsï¼ŒGithub postï¼‰</p><p>éšæœºå¼€å§‹é˜…è¯»</p><p>éšæœºå‡ ç¯‡è®ºæ–‡å¼€å§‹ï¼Œå¿«é€Ÿæµè§ˆå¹¶ç†è§£æ¯ç¯‡è®ºæ–‡çš„10%ï¼Œç„¶åæŒ‘é€‰åˆ°å€¼å¾—é˜…è¯»çš„æ–‡ç« èŠ±æ—¶é—´ç»§ç»­é˜…è¯»å¹¶ç†è§£æ•´ç¯‡æ–‡ç« ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯èƒ½åœ¨å‚è€ƒæ–‡çŒ®ä¸­æ‰¾åˆ°ç»§ç»­ç ”ç©¶çš„è®ºæ–‡ç»§ç»­é˜…è¯»ã€‚é˜…è¯»çš„åŒæ—¶ï¼Œå›é¡¾å……å®å‰é¢çš„æ–‡ç« ã€‚å†éšæœºæŒ‘é€‰è®ºæ–‡ï¼Œâ€¦,ä»¥æ­¤å¾ªç¯ã€‚</p><p>è¿™æ ·å°±å¯ä»¥æ…¢æ…¢æŒæ¡æƒ³è¦å­¦ä¹ çš„ç ”ç©¶ä¸»é¢˜ã€‚</p><p>5-20 papers      å¯¹è¯¥ç ”ç©¶é¢†åŸŸæœ‰åŸºæœ¬çš„äº†è§£ï¼Œå¯ä»¥åšä¸€äº›å·¥ä½œï¼Œåº”ç”¨ä¸€äº›ç®—æ³•ã€‚</p><p>50-100 papers  è¶³ä»¥å¯¹è¯¥é¢†åŸŸæœ‰å¾ˆå¥½çš„ç†è§£ï¼Œè¶³ä»¥è¿›è¡Œç ”ç©¶æˆ–æ˜¯å¤„äºå‰æ²¿ã€‚</p><h2 id="è®ºæ–‡çš„æ„æˆ-ğŸ“™">è®ºæ–‡çš„æ„æˆ ğŸ“™</h2><ul><li><strong>TITLE</strong>  æ ‡é¢˜</li><li><strong>ABSTRACT</strong> æ‘˜è¦</li><li><strong>INDEX TERMS</strong> å…³é”®è¯</li><li><strong>INTRODUCTION</strong> å¯¼è¨€</li><li><strong>MATERIALS AND METHODS</strong>  æå‡ºçš„ç®—æ³•</li><li><strong>EXPERIENCE</strong> å®éªŒ</li><li><strong>CONCLUSION</strong> ç»“è®º</li></ul><p>ç»å¤§å¤šæ•°çš„æ–‡ç« éƒ½æ˜¯è¿™ç§æ ¼å¼ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªå…«è‚¡æ–‡çš„ç»“æ„ã€‚</p><h2 id="è¯»æ–‡çŒ®çš„æ–¹æ³•-âœï¸">è¯»æ–‡çŒ®çš„æ–¹æ³• âœï¸</h2><p>å½“ç„¶ä½ æ˜¯å¯ä»¥ä»å¤´è¯»åˆ°å°¾ï¼Œä½†æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šè®ºæ–‡æœ‰è¿™ä¹ˆå¤šï¼Œå¦‚æœéƒ½æ˜¯ä»å¤´è¯»åˆ°å°¾çš„è¯ï¼Œæ—¶é—´ä¸Šæ˜¯ä¸å€¼å½“çš„ï¼Œå¹¶ä¸”ä½ è¦æ‰¾çš„æ–‡ç« å¯èƒ½å°±æ˜¯ä¸€å°éƒ¨åˆ†ï¼Œè¦å¿«é€Ÿçš„ç­›é€‰å‡ºä½ è‡ªå·±éœ€è¦çš„æ–‡ç« ï¼Œç„¶åå¯¹ä»–è¿›è¡Œç²¾åº¦ã€‚</p><p>è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚ä½•èŠ±ä¸‰éæ¥è¯»ä¸€éè®ºæ–‡ï¼</p><p><strong>åŸåˆ™ï¼šä»é«˜æ•ˆä¿¡æ¯å†…å®¹å‡ºå‘ï¼Œç„¶åå†å»å»¶ç”³ã€‚</strong></p><h3 id="ç¬¬ä¸€é">ç¬¬ä¸€é</h3><p><strong>é‡ç‚¹ï¼šæ ‡é¢˜-&gt; æ‘˜è¦ -&gt; ç»“è®ºçš„é¡ºåºï¼› ç›®çš„æ˜¯å¤§æ¦‚äº†è§£æ–‡ç« ï¼Œåšå‡ºå–èˆï¼›</strong></p><p><strong>tipsï¼šå¯ä»¥å¤§æ¦‚çœ‹çœ‹å›¾è¡¨ï¼Œäº†è§£å…³é”®çš„æ–¹æ³•ã€‚</strong></p><p>è¿™ä¸ªæ—¶å€™åªéœ€è¦å…³æ³¨æ ‡é¢˜å’Œæ‘˜è¦ï¼Œè¯»å®Œæ‘˜è¦ä¹‹åç›´æ¥è·³åˆ°ç»“è®ºéƒ¨åˆ†ï¼›</p><ul><li><p>é¦–å…ˆäº†è§£è¿™ä¸ªæ–‡ç« çš„<strong>æ ‡é¢˜</strong>æ˜¯ä»€ä¹ˆï¼Œå’Œæˆ‘ä»¬è¦æŸ¥æ‰¾çš„å†…å®¹æ˜¯ä¸æ˜¯ç›¸å…³çš„ã€‚</p></li><li><p>ç„¶åå‘¢ï¼Œå†çœ‹ä¸€çœ¼<strong>æ‘˜è¦</strong>ï¼Œæ‘˜è¦å°±æ˜¯æ¯”è¾ƒç²¾ç‚¼çš„ä»‹ç»ä¸€ä¸‹è¿™ç¯‡æ–‡ç« ã€‚</p></li><li><p>æœ€åç›´æ¥è·³åˆ°<strong>ç»“è®º</strong>ï¼Œç»“è®ºé€šå¸¸æ¥è¯´ï¼Œæ˜¯å’Œæ‘˜è¦ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¼šæŠŠæ‘˜è¦é‡Œé¢æå‡ºçš„ä¸€ä¸¤ä¸ªé—®é¢˜ç”¨ä¸€äº›å®é™…çš„ç»“è®ºï¼Œå®é™…çš„æ•°å­—æ¥è¯æ˜ä¸€ä¸‹ã€‚</p></li></ul><p>å½“ä½ è¯»å®Œè¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå°±å¯ä»¥å¤§è‡´çŸ¥é“è¿™ç¯‡æ–‡ç« æ˜¯åœ¨è®²è¿°ä»€ä¹ˆå†…å®¹äº†ï¼Œçœ‹æ˜¯å¦ç¬¦åˆè‡ªå·±çš„è¯‰æ±‚ã€‚å†å¯ä»¥è·³åˆ°å®éªŒéƒ¨åˆ†ï¼Œçœ‹ä¸€ä¸‹ä¸€äº›å…³é”®çš„å›¾å’Œè¡¨ï¼›è¿˜å¯ä»¥è·³åˆ°æ–¹æ³•çš„å›¾è¡¨çœ‹çœ‹è¿™ç¯‡æ–‡ç« çš„å…³é”®æ–¹æ³•ã€‚</p><p>è¿™ä¸€éé€šå¸¸éœ€è¦10åˆ†é’Ÿçš„æ—¶é—´å¯ä»¥<strong>å¤§æ¦‚äº†è§£è¿™ç¯‡æ–‡ç« å¤§æ¦‚åœ¨è®²ä»€ä¹ˆ</strong>ï¼Œè´¨é‡å¦‚ä½•ï¼Œç»“æœæ€ä¹ˆæ ·ï¼Œæ–¹æ³•çœ‹ä¸Šå»æ€ä¹ˆæ ·ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯å¦é€‚åˆè‡ªå·±ï¼Œç¡®å®šè¦ä¸è¦ç»§ç»­è¯»ä¸‹å»ã€‚æˆ–è€…è¿™ç¯‡æ–‡ç« è´¨é‡ä¸é«˜ï¼Œå’Œè‡ªå·±æ²¡æœ‰å¤ªå¤šå…³ç³»ï¼Œå†…å®¹ä¸æ„Ÿå…´è¶£ï¼Œå°±å¯ä»¥æ”¾åˆ°ä¸€è¾¹ã€‚</p><p>è¯•ç€å›ç­”ï¼šï¼ˆå‰ä¸¤é¡¹å³å¯ï¼‰</p><p>ä½œè€…è¯•å›¾å®Œæˆä»€ä¹ˆï¼Ÿ</p><p>å…³é”®è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä½ å¯ä»¥ç”¨åˆ°ä»€ä¹ˆï¼Ÿ</p><p>æœ‰å“ªäº›å‚è€ƒæ–‡çŒ®å¯ä»¥ç»§ç»­å­¦ä¹ ï¼Ÿ</p><h3 id="ç¬¬äºŒé">ç¬¬äºŒé</h3><p><strong>é‡ç‚¹ï¼šä»å¤´åˆ°å°¾è¯»ï¼Œä¸ç”¨å…³æ³¨å¾—å¤ªç»†èŠ‚ï¼Œä¸»è¦ç›®çš„æ˜¯æ¸…æ™°äº†è§£å›¾è¡¨å«ä¹‰ã€‚</strong></p><p><strong>tipsï¼šä¸è¦åœç•™åœ¨æ•°å­¦ä¸Šï¼Œåªéœ€ç»§ç»­é˜…è¯»ï¼Œç•¥è¯»æ•°å­¦ï¼Œåœˆå‡ºæ„Ÿå…´è¶£çš„æ–‡çŒ®</strong></p><p>å¯¹æ•´ä¸ªæ–‡ç« è¿‡ä¸€éï¼Œå¯ä»¥æ²¿ç€æ ‡é¢˜è¯»åˆ°æœ€åï¼Œè¿™ä¸€éä¸ç”¨æ³¨æ„å¤ªå¤šç»†èŠ‚ï¼Œæ¯”å¦‚å…¬å¼è¯æ˜æˆ–è€…å¾ˆç»†èŠ‚çš„éƒ¨åˆ†å¯ä»¥å¿½ç•¥ï¼Œä¸»è¦æ˜¯ææ¸…æ¥š<strong>é‡è¦çš„å›¾è¡¨</strong>ï¼Œè¦æ¸…æ¥šæ¯ä¸ªå­—ï¼ŒçŸ¥é“ä»–åˆ°åº•æ˜¯åœ¨å¹²ä»€ä¹ˆã€‚æ¯”å¦‚æ–¹æ³•ä¸­çš„æµç¨‹å›¾æ˜¯ä»€ä¹ˆæ ·å­ï¼Œç®—æ³•çš„å›¾æ˜¯ä»€ä¹ˆç»“æ„ï¼Œç»†è‡´åˆ°å®éªŒä¸­å›¾çš„xè½´ï¼Œyè½´æ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªç‚¹çš„å«ä¹‰æ˜¯ä»€ä¹ˆã€‚ä½œè€…æå‡ºçš„æ–¹æ³•æ˜¯å¦‚ä½•å’Œå…¶ä»–äººæ–¹æ³•å¯¹æ¯”çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„å·®è·æœ‰å¤šå¤§ã€‚</p><p>è¿™ä¸€éè¯»å®Œä¹‹åå¯èƒ½è¿˜æ˜¯å¯¹æ–‡ç« å¾ˆæ¨¡ç³Šï¼Œæ²¡æœ‰ç‰¹åˆ«ææ‡‚å®ƒåœ¨å¹²ä»€ä¹ˆï¼Œä½†æ˜¯æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºå·²ç»å¯¹æ•´ä¸ªè®ºæ–‡çš„å„ä¸ªéƒ¨åˆ†æœ‰äº†å¤§æ¦‚çš„äº†è§£ã€‚åŒæ—¶ï¼Œåœ¨è¿™ä¸€éé˜…è¯»æ—¶ï¼Œå¯ä»¥æŠŠç›¸å…³çš„æ–‡çŒ®åœˆå‡ºæ¥ï¼Œæ¯”å¦‚è¯´ä½œè€…åœ¨é˜è¿°æŸä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯æŸæŸä¹‹å‰æå‡ºæ¥çš„ï¼Œä½œè€…åˆæ˜¯åœ¨æŸæŸçš„æ–¹æ³•ä¸Šæ”¹è¿›çš„ï¼Œå¦‚æœä½ å‘ç°è¿™äº›å¼•ç”¨çš„é‡è¦çš„æ–‡çŒ®ä½ æ²¡æœ‰è¯»è¿‡ï¼Œä¸å¤ªäº†è§£ï¼Œå°±æŠŠä»–åœˆå‡ºæ¥ã€‚</p><p>è¿™æ—¶å€™ä½ å·²ç»çŸ¥é“ä½œè€…è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œç»“æœæ€ä¹ˆæ ·ï¼Œå¤§æ¦‚ç”¨äº†ä»€ä¹ˆæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ç« ä½ è§‰å¾—å¤ªéš¾äº†ï¼Œè¯»ä¸å¤ªæ‡‚å¾—è¯ï¼Œå¯ä»¥é€‰æ‹©å»è¯»ä»–å¼•ç”¨çš„é‚£äº›æ–‡ç« ï¼Œä¹‹å‰çš„ä¸€äº›å·¥ä½œå¯èƒ½é—¨æ§›æ›´ä½ä¸€äº›ï¼Œè¯»å®Œä¹‹åå†å›è¿‡æ¥è¯»è¿™ç¯‡æ–‡ç« ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœè§‰å¾—è‡ªå·±ä¸éœ€è¦äº†è§£å¾—é‚£ä¹ˆæ·±ï¼Œåšçš„æ–¹å‘è·Ÿè¿™ä¸ªä¸å¤ªä¸€æ ·ï¼Œä¸éœ€è¦å®Œå…¨ææ‡‚è®ºæ–‡ï¼Œé‚£ä¹ˆè¯»åˆ°è¿™é‡Œå°±å¯ä»¥äº†ã€‚å¦‚æœè¿™ç¯‡æ–‡ç« æ¯”è¾ƒå…³é”®ï¼Œæƒ³è¦å……åˆ†é˜…è¯»ï¼Œå°±å¯ä»¥è¿›è¡Œç¬¬ä¸‰éé˜…è¯»ã€‚</p><p>å†æ¬¡è¯•ç€å›ç­”ï¼š</p><p>ä½œè€…è¯•å›¾å®Œæˆä»€ä¹ˆï¼Ÿ</p><p>å…³é”®è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä½ å¯ä»¥ç”¨åˆ°ä»€ä¹ˆï¼Ÿ</p><p>æœ‰å“ªäº›å‚è€ƒæ–‡çŒ®å¯ä»¥ç»§ç»­å­¦ä¹ ï¼Ÿ</p><h3 id="ç¬¬ä¸‰é">ç¬¬ä¸‰é</h3><p><strong>é‡ç‚¹ï¼šè¯¦ç»†äº†è§£æ–‡ç« ï¼Œå¹¶ä¸”æ‹“å±•åˆ°è‡ªå·±ï¼Œç»™è‡ªå·±è®¾ç½®é—®é¢˜ï¼Œå­¦ä¼šâ€œè„‘è¡¥â€</strong></p><p><strong>tips: åœ¨æ–‡ç« æœ€åä½œè€…ä¼šæåˆ°æ–‡ç« æœ‰ä¸€äº›æ²¡æœ‰ç»§ç»­ç ”ç©¶çš„åœ°æ–¹ï¼Œå¯ä»¥è®°å½•è‡ªå·±çš„æ€è€ƒ</strong></p><p>æœ€è¯¦ç»†çš„ä¸€éï¼Œå¯¹æ¯ä¸€å¥è¯ï¼Œæ¯ä¸€æ®µäº†è§£æ¸…æ¥šï¼Œå¯ä»¥æƒ³è±¡è‡ªå·±å»å®ç°è¿™ç¯‡æ–‡ç« ã€‚æ¯”å¦‚è¯´ï¼Œä½œè€…è¯´æå‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œç”¨ä»€ä¹ˆæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½ å¯ä»¥å¸¦å…¥è§’è‰²ï¼Œå¦‚æœæ˜¯æˆ‘æ¥åšè¿™ä»¶äº‹æƒ…åº”è¯¥æ€ä¹ˆåŠï¼Œæˆ‘å¯ä»¥ç”¨ä»€ä¹ˆæ–¹æ³•æ¥å®ç°è¿™ä¸ªç›®çš„ï¼Œä¸»åŠ¨ç»™è‡ªå·±è®¾ç½®é—®é¢˜ã€‚ä½œè€…åœ¨é˜è¿°å®éªŒçš„è¿‡ç¨‹ï¼Œä½ ä¹Ÿå¯ä»¥é—®è‡ªå·±ï¼Œå¦‚æœæ˜¯è‡ªå·±æˆ‘åº”è¯¥æ€ä¹ˆåšï¼Œèƒ½ä¸èƒ½æ¯”ä»–åšå¾—æ›´å¥½ã€‚åœ¨æ–‡ç« æœ€åä½œè€…ä¼šæåˆ°æ–‡ç« æœ‰ä¸€äº›æ²¡æœ‰ç»§ç»­ç ”ç©¶çš„åœ°æ–¹ï¼Œç•™åˆ°äº†ä»¥åï¼Œå¯ä»¥æ‹“å±•åˆ°è‡ªå·±ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å¾€å‰ç»§ç»­æ¨è¿›æˆæœã€‚</p><p>æœ€ä½³çŠ¶æ€æ˜¯ï¼šçœ‹å®Œä¹‹åå°±å¥½åƒæ˜¯è‡ªå·±åšè¿‡ä¸€éä¸€æ ·ï¼Œè¿™æ ·ï¼Œå¯¹è¿™ç¯‡æ–‡ç« çš„ç»†èŠ‚å°±äº†è§£çš„éå¸¸æ¸…æ¥šå•¦ï¼å…³ä¸Šæ–‡ç« ä¹Ÿå¯ä»¥å›å¿†å‡ºå¾ˆå¤šç»†èŠ‚çš„åœ°æ–¹ã€‚</p><p>å†åŸºäºä»–åšç ”ç©¶ï¼Œæˆ–è€…ä¹‹åå†å‘å¤§å®¶æåˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå¯ä»¥è¯¦ç»†å’Œåˆ«äººå¤è¿°ä¸€éäº†</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>ç¬¬ä¸€éçš„èŠ±æ—¶æœ€å°‘ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œæµ·é€‰ï¼›</p><p>ç¬¬äºŒéå¯¹è®ºæ–‡åšç²¾é€‰ï¼›</p><p>ç¬¬ä¸‰æ­¥æ˜¯é‡ç‚¹ç ”è¯»è®ºæ–‡ï¼›</p><h2 id="ä»€ä¹ˆæ˜¯å¥½çš„ç ”ç©¶å·¥ä½œ-ğŸ†">ä»€ä¹ˆæ˜¯å¥½çš„ç ”ç©¶å·¥ä½œ ğŸ†</h2><p>æˆ‘ä»¬è‡ªå·±åœ¨åšç ”ç©¶çš„æ—¶å€™ï¼Œä¼šæ€è€ƒç°åœ¨çš„ç»“æœæ˜¯å¦è¶³å¤Ÿå‘è¡¨ä¸€ç¯‡è®ºæ–‡ï¼Œèƒ½å¤ŸæŠ•ä»€ä¹ˆçº§åˆ«çš„æœŸåˆŠæˆ–è€…ä¼šè®®ï¼Œåœ¨å†™è®ºæ–‡çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ€è€ƒåº”è¯¥æ€ä¹ˆæ ·å»è®²è¿°è‡ªå·±çš„æ•…äº‹ä½¿å¾—è¯»è€…æ›´å®¹æ˜“çœ‹åˆ°ç ”ç©¶å·¥ä½œçš„æ„ä¹‰ã€‚</p><p>æ‰€ä»¥å¦‚ä½•å»åˆ¤æ–­ä¸€ä¸ªå·¥ä½œçš„æ„ä¹‰å‘¢ï¼Ÿåˆå¦‚ä½•å†™å¥½ä¸€ä¸ªæ•…äº‹å‘¢ï¼Ÿ</p><p>æ ¸å¿ƒï¼š</p><p>ç”¨æœ‰<strong>æ–°æ„</strong>çš„æ–¹æ³•</p><p><strong>æœ‰æ•ˆ</strong>çš„è§£å†³ä¸€ä¸ª</p><p><strong>ç ”ç©¶</strong>é—®é¢˜</p><ul><li><strong>ç ”ç©¶</strong></li></ul><p>è¿™é‡Œå…³æ³¨æŠ€æœ¯ç±»é—®é¢˜ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±» ç ”ç©¶ç±»å’Œå·¥ç¨‹ç±»é—®é¢˜ã€‚</p><p>ç»å¤§éƒ¨åˆ†é—®é¢˜å±äºå·¥ç¨‹é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å·¥ç¨‹é—®é¢˜ï¼Ÿ</p><p>æ¯”å¦‚è¯´</p><p>ç®—æ³•å¾ˆå å†…å­˜ï¼Œåœ¨è®¡ç®—èµ„æºä¸Šæ— æ³•æ»¡è¶³ã€‚</p><p>æƒ³æ³•ï¼šé‚£ä¹ˆç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ èƒ½ä¸èƒ½ä¹°å†…å­˜ï¼Œç¬¬äºŒæ˜¯èƒ½ä¸èƒ½ä¼˜åŒ–ç®—æ³•ï¼Œä½¿å¾—åœ¨ä¸æ”¹å˜å…³é”®ç®—æ³•çš„åŒæ—¶èŠ‚çœå†…å­˜ã€‚</p><p>æ¨¡å‹çš„ç²¾åº¦ä¸å¤Ÿã€‚</p><p>æƒ³æ³•ï¼šæ˜¯å¦å¯ä»¥å¤šæ ‡ä¸€äº›æ•°æ®æ¥è§£å†³é—®é¢˜ï¼Œæˆ–è€…åœ¨é‡‡æ ·æ•°æ®çš„æ—¶å€™ç”¨æ›´å¥½çš„ä¼ æ„Ÿå™¨ã€‚</p><p>åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œå¦‚æœå¯ä»¥æå‡ºå‡ ä¸ªæ–¹æ¡ˆï¼Œè€Œä¸”è¿™äº›æ–¹æ¡ˆåœ¨æ²¡æœ‰å°è¯•çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç¡®å®šè¿™äº›æ–¹æ¡ˆæ˜¯å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è§£å†³é—®é¢˜ã€‚é‚£ä¹ˆè¿™ç§é—®é¢˜æ˜¯å·¥ç¨‹ç±»é—®é¢˜</p><p>å¯¹äºç ”ç©¶é—®é¢˜è€Œè¨€ï¼Œæ˜¯æ›´åŠ å›°éš¾çš„é—®é¢˜ï¼Œä½ æ˜¯å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆæ ·è§£å†³å®ƒï¼Œæˆ–è€…æ˜¯ä½ æœ‰ä¸€äº›æƒ³æ³•å’Œæ–¹æ¡ˆï¼Œä½†æ˜¯åœ¨çœŸæ­£å°è¯•ä¹‹å‰ï¼Œä½ ä¸çŸ¥é“è¿™ä¸ªæƒ³æ³•æ˜¯å¦å¯è¡Œã€‚è€Œä¸€èˆ¬çš„ç ”ç©¶é—®é¢˜ï¼Œå‰é¢æ‰€è¯´çš„é‚£äº›æƒ³æ³•é€šå¸¸æ˜¯ä¸å¯è¡Œçš„ã€‚</p><ul><li><strong>æœ‰æ•ˆ</strong></li></ul><p>æœ‰æ•ˆæ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œä¸æ˜¯ä¸€ä¸ªç»å¯¹çš„æ¦‚å¿µï¼›æœ‰æ•ˆæ€§æ˜¯æŒ‡çš„ç›¸æ¯”ä¹‹å‰çš„å·¥ä½œï¼Œè§£å†³æŸä¸ªé—®é¢˜çš„æœ‰æ•ˆæ€§æœ‰æ‰€æå‡ã€‚</p><ul><li><strong>æ–°æ„</strong></li></ul><p>è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œå› ä¸ºå°±ç®—æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ–°æ„çš„ä¸œè¥¿ï¼Œæå‡ºè¢«å¤§å®¶ç†ŸçŸ¥ä¹‹åå°±ä¸å†æœ‰æ–°æ„äº†ã€‚æ‰€ä»¥æ–°æ„æŒ‡çš„æ˜¯åœ¨ç ”ç©¶ç¤¾åŒºé‡Œé¢ï¼Œå¯¹å¤§å¤šæ•°ç ”ç©¶è€…è€Œè¨€ï¼Œä½ çš„æƒ³æ³•æ˜¯æœ‰æ–°æ„çš„ã€‚è¿™é‡Œå¹¶ä¸è¦æ±‚æ‰€æå‡ºçš„æ–¹æ³•ï¼Œä¹‹å‰éƒ½æ²¡æœ‰äººæåˆ°è¿‡ï¼Œå¾ˆæœ‰å¯èƒ½åœ¨å¾ˆå¤šå¹´å‰åˆ«äººå·²ç»ç”¨è¿‡çš„ï¼Œåªæ˜¯ç›®å‰å¤§å®¶æ²¡æœ‰å…³æ³¨äº†ï¼›å¦å¤–åœ¨åˆ«çš„é¢†åŸŸç ”ç©¶è€…æå‡ºçš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ä½ æ‰€åœ¨çš„ç ”ç©¶é¢†åŸŸå¤§å®¶å¯¹è¿™ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯éå¸¸äº†è§£ã€‚è¿™ä¹Ÿå¯ä»¥ä½œä¸ºè®ºæ–‡çš„æ–°æ„ã€‚</p><p>è¿™ä¸‰ä¸ªæ–¹é¢å¯ä»¥è¡¡é‡ä¸€ç¯‡æ–‡ç« çš„æ„ä¹‰ã€‚</p><p>åœ¨å†™æ–‡ç« çš„æ—¶å€™ï¼Œç ”ç©¶å·¥ä½œåº”è¯¥æ€»ç»“æˆè¿™ä¹ˆä¸€å¥è¯ï¼šä½¿ç”¨äº†â€¦æ–¹æ³•ï¼Œâ€¦æœ‰æ•ˆçš„è§£å†³äº†â€¦ç ”ç©¶é—®é¢˜ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œåœ¨æ‘˜è¦éƒ¨åˆ†ï¼Œè¦å¼•å‡º è§£å†³ä»€ä¹ˆç ”ç©¶é—®é¢˜ ï¼› æ–¹æ³•çš„æ–°æ„åœ¨å“ªé‡Œï¼›ç»“æœå¦‚ä½•ï¼›</p><h3 id="ä»·å€¼">ä»·å€¼</h3><p>ä¸€ä¸ªç ”ç©¶å·¥ä½œçš„$ç ”ç©¶ä»·å€¼=æ–°æ„åº¦ \times æœ‰æ•ˆæ€§ \times é—®é¢˜å¤§å°$</p><p>ä¸è¿‡åè¿‡æ¥è€Œè¨€ï¼Œä»·å€¼æ˜¯ä»è€…è§ä»æ™ºè€…è§æ™ºï¼Œå¾ˆéš¾å‡†ç¡®å®šä¹‰ä¸€é¡¹ç ”ç©¶æˆæœçš„ä»·å€¼æœ‰å¤šå°‘ã€‚</p><h4 id="é—®é¢˜å¤§å°æ¡£æ¬¡">é—®é¢˜å¤§å°æ¡£æ¬¡</h4><ul><li><p>1        å°      æ¯”å¦‚åœ¨å‰é¢å·¥ä½œçš„æŸä¸€ä¸ªç‚¹ä¸Šè¿›è¡Œæ”¹è¿›</p></li><li><p>10      ä¸­ç­‰  æ¯”å¦‚åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸæŸä¸€ä¸ªè§†è§‰çš„å­ä»»åŠ¡åšå‡ºæˆæœ</p></li><li><p>100    å¤§      æ¯”å¦‚æå‡æœºå™¨å¯¹å›¾ç‰‡çš„ç†è§£ï¼Œæœºå™¨éšæ–‡å­—çš„ç†è§£</p></li><li><p>â€¦</p></li><li><p>10000  æ›´å¤§  æ¯”å¦‚è§£å†³é€šç”¨çš„äººå…±æ™ºèƒ½</p></li></ul><h4 id="æœ‰æ•ˆæ€§æ¡£æ¬¡">æœ‰æ•ˆæ€§æ¡£æ¬¡</h4><ul><li><p>1     å°        æ¯”å¦‚æ¨¡å‹ç²¾åº¦æ¯”ä¹‹å‰çš„ç ”ç©¶å¥½ä¸€ç‚¹ç‚¹</p></li><li><p>10   ä¸­ç­‰    æ¯”å¦‚ä¸€é¡¹é•¿æœŸçš„å·¥ä½œåœ¨ä¸€å¹´ä¹‹å†…åœ¨æŸä¸€æ•°æ®é›†ä¸Šçš„ç²¾åº¦å‘å‰æ¨è¿›äº†10ä¸ªç‚¹ï¼Œæœ¬ç¯‡è®ºæ–‡çš„å·¥ä½œå‘å‰æ¨è¿›äº†1ä¸ªç‚¹</p></li><li><p>100  é«˜       æ¯”å¦‚ä¸€é¡¹å·¥ä½œå°±åƒç ”ç©¶å°†ç²¾åº¦æå‡äº†5ä¸ªç‚¹æˆ–è€…10ä¸ªç‚¹</p></li></ul><p>å¯¹äºé—®é¢˜çš„ä¸åŒï¼Œæœ‰æ•ˆæ€§çš„å®šä¹‰ä¹Ÿä¸åŒï¼Œä½†å¯¹äºæŠ€æœ¯é—®é¢˜è€Œè¨€ï¼Œé€šå¸¸æŒ‡å…³å¿ƒä¸‰ä¸ªé—®é¢˜</p><ol><li>ç²¾åº¦é«˜ï¼Œæ•ˆæœå¥½</li><li>è§„æ¨¡å¤§ï¼Œæˆæœ¬é™ä½</li><li>å®‰å…¨ï¼Œ æ¯”å¦‚æ•°æ®éšç§ï¼Œæ¨¡å‹éšç§ï¼Œè”é‚¦å­¦ä¹ å°±æ˜¯è¿½æ±‚å®‰å…¨æå‡ºæ¥çš„</li></ol><h4 id="æ–°æ„åº¦æ¡£æ¬¡">æ–°æ„åº¦æ¡£æ¬¡</h4><ul><li><p>1       è¡¨ç¤ºå¤§å®¶å¯¹æ­¤æ–¹æ³•æ²¡æœ‰å¾ˆæ„å¤– æ¯”å¦‚æå‡ºçš„æ–¹æ³•å¤§å®¶éƒ½äº†è§£ï¼Œä¹Ÿå¯ä»¥é¢„æ–™åˆ°ä½¿ç”¨åˆ°å®ƒçš„ç»“æœå¦‚ä½•</p></li><li><p>10    æœ‰ä¸€å®šçš„æ–°æ„åº¦ï¼Œæ¯”å¦‚ç”¨æŸä¸ªæŠ€æœ¯è§£å†³äº†è¿˜ä¸é”™çš„é—®é¢˜</p></li><li><p>100  ä½¿ç”¨çš„æŠ€æœ¯å…¶ä»–ç ”ç©¶è€…ä¸å¤ªç†Ÿæ‚‰ï¼Œå¤§å®¶ä¼šè§‰å¾—æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨</p></li></ul><p>å¯¹æŠ€æœ¯ç±»å·¥ä½œæ¥è®²ï¼Œå¾ˆéš¾æœ‰ä¸€ä¸ªæŠ€æœ¯ä¹‹å‰ä»æ¥æ²¡æœ‰å‡ºç°è¿‡ï¼Œæ–°æ„åº¦åªæ˜¯å¯¹äºè¯¥é¢†åŸŸçš„è¯»è€…è€Œè¨€ï¼Œæ–‡ç« çš„æ–°æ„åº¦æœ‰å¤šé«˜ã€‚</p><h4 id="å®é™…ç°å®">å®é™…ç°å®</h4><p>åœ¨äººå·¥æ™ºèƒ½è¿™ä¸ªæ–¹é¢ï¼Œ</p><p>$ç ”ç©¶ä»·å€¼=æ–°æ„åº¦ \times æœ‰æ•ˆæ€§ \times é—®é¢˜å¤§å°$</p><p>å¾ˆå¤šæ—¶å€™ï¼Œä¸€ç¯‡æ–‡ç« å¾ˆéš¾æŠŠä¸‰ä¸ªæ–¹é¢éƒ½åšå¾—ç‰¹åˆ«å¥½ï¼Œç”šè‡³æŠŠä¸¤ä¸ªæ–¹é¢åšåˆ°é«˜æ°´å¹³éƒ½æ˜¯å¾ˆéš¾çš„äº‹æƒ…ï¼›æ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸¤ä¸ªæŒ‡æ ‡ä¸Šï¼Œåšåˆ°å·®ä¸å¤šçš„æ°´å¹³ä¹Ÿå¾ˆå¥½äº†ã€‚å¦‚æœè¦å‘è¡¨åœ¨ä¸€æµçš„ä¼šè®®æˆ–æ‚å¿—ä¸Šï¼Œç ”ç©¶ä»·å€¼éœ€è¦è¾¾åˆ°1000ï¼›å¦‚æœæœ‰ä¸¤ä¸ª10ï¼Œä¹Ÿå€¼å¾—å†™æ–‡ç« å‘è¡¨ï¼Œä¹Ÿå¯ä»¥ç»ƒä¹ å†™ä½œã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>é˜…è¯»æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>é˜…è¯»æ–¹æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬ä¸ƒç« ç¬”è®°</title>
    <link href="/2022/02/09/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML7/"/>
    <url>/2022/02/09/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML7/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚è¿™ä¸€ç« ä¸»è¦æ˜¯è®²ç¥ç»ç½‘ç»œä¸­çš„å½’ä¸€åŒ–ï¼Œæ®‹å·®è¿æ¥ä»¥åŠæ³¨æ„åŠ›æœºåˆ¶ã€‚</p></blockquote><h1>ç¬¬ä¸ƒç«  â€‹å½’ä¸€åŒ–ğŸ’œ</h1><h2 id="7-1-æ·±åº¦å­¦ä¹ -ğŸ¶">7.1 æ·±åº¦å­¦ä¹  ğŸ¶</h2><p>Deep Network Tuning<br>â€¢ DL is a programming language to extract information from data<br>â€¢ Some values will be filled by data later<br>â€¢ Differentiable<br>â€¢ Various design patterns, from layers to network architecture<br>â€¢ Here we talk about some of them</p><p>å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ï¼Œæ¨¡æ¿ä¸­çš„å‚æ•°æ˜¯æ ¹æ®æ•°æ®å’Œç›®æ ‡å­¦ä¹ å¾—åˆ°çš„ï¼Œå› æ­¤å…¶æœ‰å¾ˆå¤šæ¨¡å¼ã€‚</p><h2 id="7-2-Batch-Normalizationï¼ˆæ‰¹é‡å½’ä¸€åŒ–ï¼‰-ğŸŒŠ">7.2 Batch Normalizationï¼ˆæ‰¹é‡å½’ä¸€åŒ–ï¼‰ ğŸŒŠ</h2><p>â€¢ Standardizing data makes the loss smother for linear methods<br>â€¢Smooth: $ âˆ¥âˆ‡f(x)âˆ’ âˆ‡f(y)âˆ¥^2 â‰¤ Î²âˆ¥xâˆ’yâˆ¥^2 $<br>â€¢A smaller $Î²$  allows a larger learning rate</p><p>â€‹â€¢ Does not help deep NN</p><p>â€¢ Batch Normalization (BN) standards inputs for internal layers</p><p>â€‹â€¢ Improves the smoothness to make training easier</p><p>â€¢ (Still controversial why BN works)</p><p>å¯¹äºçº¿æ€§å›å½’è€Œè¨€æ ‡å‡†åŒ–çš„ä½œç”¨æ˜¯ä½¿å¾—æ•°æ®å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼›ä½œç”¨æ˜¯ä½¿å¾—æŸå¤±å‡½æ•°æ›´åŠ å¹³æ»‘ï¼Œå¹³æ»‘å°±æ˜¯$ âˆ¥âˆ‡f(x)âˆ’ âˆ‡f(y)âˆ¥^2 â‰¤ Î²âˆ¥xâˆ’yâˆ¥^2 $â€‹â€‹â€‹â€‹â€‹â€‹ ï¼Œæ„å‘³ç€åœ¨ä¼˜åŒ–æ—¶æ±‚æ¢¯åº¦æ›´æ–°æ—¶æ›´ç¨³å®šï¼Œå¯ä»¥è°ƒæ•´ä½¿å¾—å­¦ä¹ ç‡ç¨å¾®å¤§ã€‚ä½†æ˜¯å¯¹äºç¥ç»ç½‘ç»œè€Œè¨€ï¼Œç”±äºç¥ç»ç½‘ç»œå­˜åœ¨éšè—å±‚ï¼Œå­˜åœ¨éçº¿æ€§å°±ä¸èƒ½å¯¹ä¸­é—´å±‚èµ·åˆ°ä½œç”¨ï¼Œå¯èƒ½åªèƒ½å¯¹æœ€åä¸€å±‚çº¿æ€§å±‚æœ‰å¸®åŠ©ã€‚</p><p>å› æ­¤éœ€è¦BNå±‚æ¥å¯¹ä¸­é—´å±‚è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–ï¼Œä½¿å¾—å‡½æ•°æ›´å®¹æ˜“æ”¶æ•›ã€‚å…¶å®BNå±‚çš„è®ºæ–‡æå‡ºå¹¶ä¸æ˜¯æ­¤ä½œç”¨ï¼Œå­˜åœ¨äº‰è®®ï¼Œä½†æ˜¯ç°åœ¨ç ”ç©¶é¢†åŸŸå‘ç°BNå±‚çš„ä½œç”¨å®é™…ä¸Šå°±è¯´æ•°æ®æ ‡å‡†åŒ–ã€‚</p><h2 id="7-3-å…·ä½“æœºåˆ¶-ğŸ">7.3 å…·ä½“æœºåˆ¶ ğŸ</h2><p><img src="https://picture.mulindya.com/ParacticeML7-1.png" alt=""></p><p>å¯ä»¥å°†å…¶æ‹†è§£ä¸º4æ­¥ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯reshapeï¼šå¦‚æœè¾“å‡ºä¸æ˜¯2Då°±å°†å…¶è½¬åŒ–ä¸º2DçŸ©é˜µï¼Œæ¯”å¦‚è¯´n,c,w,hå°±ä¼šè½¬åŒ–ä¸ºnwhä¹˜ä»¥cï¼Œå¯ä»¥ç†è§£cä¸ºç‰¹å¾æ•°ï¼Œæ¯ä¸ªé€šé“è¯†åˆ«ä¸åŒçš„æ¨¡å¼ï¼Œå¯ä»¥å°†æ ·æœ¬å‹åˆ°ä¸€ç»´ã€‚</p><p>ç¬¬äºŒæ­¥æ˜¯Normalizeï¼šä¹Ÿå°±æ˜¯æ ‡å‡†åŒ–ï¼Œå¯¹æ¯ä¸€åˆ—çš„æ•°æ®æ ‡å‡†åŒ–ã€‚ï¼ˆæ€»å…±æœ‰cåˆ—ï¼‰</p><p>ç¬¬ä¸‰æ­¥æ˜¯Recoveryï¼šå¯¹åˆšåˆšåšå®Œçš„æ ‡å‡†åŒ–çš„æ•°æ®è¿›è¡Œåæ ‡å‡†åŒ–ï¼Œé€šè¿‡å¯å­¦ä¹ çš„å‚æ•°$\gamma \ \beta$ æ¥è¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œèµ·åˆ°ä¸€å®šç¨‹åº¦ä¸Šçš„è¿˜åŸã€‚</p><p>ç¬¬å››æ­¥æ˜¯å°†å¾—åˆ°çš„ç»“æœçš„ç»´åº¦è¿˜åŸåˆ°åŸå§‹ç»´åº¦ã€‚</p><p>è¿™é‡Œä¸¥è°¨æ¥è¯´åº”è¯¥æ˜¯Batch Standardizationï¼Œå› ä¸ºå°±ç»Ÿè®¡ä¸Šè€Œè¨€æ˜¯æ ‡å‡†åŒ–ã€‚</p><h2 id="7-4-å…·ä½“ä»£ç -ğŸƒ">7.4 å…·ä½“ä»£ç  ğŸƒ</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batch_norm</span>(<span class="hljs-params">X, gamma, beta, moving_mean, moving_var, eps, momentum</span>):</span> <br>    <span class="hljs-comment">#Xæ˜¯äºŒç»´æˆ–è€…4ç»´çš„å‘é‡ gammaå’Œbetaæ˜¯å¯å­¦çš„å‘é‡ moving_meanï¼Œmoving_varæ˜¯å­˜ç€åç»­é¢„æµ‹ä½¿ç”¨ epsæ˜¯ä¸ºäº†é¿å…é™¤é›¶ momentumæ˜¯å…¨å±€çš„å†²é‡</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> torch.is_grad_enabled(): <span class="hljs-comment"># In prediction mode æ²¡æœ‰æ¢¯åº¦æ˜¯é¢„æµ‹æ¨¡å¼ è¿™é‡Œä½¿ç”¨çš„æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­å­˜çš„å…¨å±€å‡å€¼å’Œæ–¹å·®</span><br>    X_hat = (X - moving_mean) / torch.sqrt(moving_var + eps) <br><span class="hljs-keyword">else</span>: <br><span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(X.shape) <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>) <br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(X.shape) == <span class="hljs-number">2</span>:<br>        mean = X.mean(dim=<span class="hljs-number">0</span>) <span class="hljs-comment">#å¯¹æ¯ä¸€åˆ—æ±‚å‡å€¼</span><br>            var = ((X - mean)**<span class="hljs-number">2</span>).mean(dim=<span class="hljs-number">0</span>) <br>        <span class="hljs-keyword">else</span>: <br>        mean = X.mean(dim=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), keepdim=<span class="hljs-literal">True</span>) <br>        var = ((X - mean)**<span class="hljs-number">2</span>).mean(dim=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), keepdim=<span class="hljs-literal">True</span>) <br>        X_hat = (X - mean) / torch.sqrt(var + eps) <br>        moving_mean = momentum * moving_mean + (<span class="hljs-number">1.0</span> - momentum) * mean<br>        moving_var = momentum * moving_var + (<span class="hljs-number">1.0</span> - momentum) * var<br>    Y = gamma * X_hat + beta<br>    <span class="hljs-keyword">return</span> Y, moving_mean, moving_var<br></code></pre></td></tr></tbody></table></figure><h2 id="7-5-Layer-Normalizationï¼ˆå±‚å½’ä¸€åŒ–ï¼‰-ğŸ">7.5 Layer Normalizationï¼ˆå±‚å½’ä¸€åŒ–ï¼‰ ğŸ</h2><p>â€¢ If apply to RNN, BN needs maintain separated moving statistics for each time step</p><p>â€‹â€¢ Problematic for very long sequences during inference</p><p>â€¢ Layer normalization reshapes input  $ Xâˆˆ â„^{nÃ—p}â†’Xâ€²âˆˆ â„^{pÃ—n} $â€‹ or $ Xâˆˆ â„^{nÃ—cÃ—wÃ—h}â†’Xâ€²âˆˆ â„^{cwhÃ—n}$â€‹ , rest is same with BN</p><p>â€‹â€¢ Normalizing within each example, up to current time step</p><p>â€‹ â€¢ Consistent between training and inference</p><p>â€‹â€¢ Popularized by Transformers</p><p>ä¸»è¦æ˜¯ç”¨äºå¾ªç¯ç¥ç»ç½‘ç»œ</p><p>å‡è®¾å¥å­é•¿åº¦æ˜¯pï¼Œè¿›è¡Œpæ¬¡mlpï¼Œæ¯ä¸ªæ—¶é—´æ­¥éª¤æ˜¯æŠŠå½“å‰çš„çŸ©é˜µï¼ˆæ ·æœ¬ä¹˜ä»¥ç‰¹å¾ï¼‰ä»¥åŠæ”¾å…¥mlpï¼Œæ¯ä¸ªå¥å­ä¹Ÿæ˜¯ä¸ç­‰é•¿çš„ï¼Œåœ¨æ¯ä¸€ä¸ªæ—¶é—´æ­¥éœ€è¦ç”¨å‡å€¼æ–¹å·®å’Œå‚æ•°$\gamma  \beta$â€‹â€‹â€‹â€‹â€‹â€‹,è€Œåœ¨ä¸åŒæ—¶é—´æ­¥ä»–ä»¬çš„å·®åˆ«æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œâ€‹â€‹ä½†æ˜¯BNåº”è¯¥æ˜¯å¯¹å½“å‰çš„æ•°æ®è¿›è¡Œç¨³å®šçš„æ–¹å·®ä¼°è®¡ï¼Œå¦‚æœå‡å€¼æ–¹å·®æŠ–åŠ¨æ¯”è¾ƒå¤§çš„è¯ï¼Œå°±å¤±å»äº†æ ‡å‡†åŒ–çš„æ„ä¹‰ï¼Œå¹¶ä¸”åœ¨é¢„æµ‹çš„æ—¶å€™å¦‚æœå‡ºç°é•¿åº¦æ›´é•¿çš„å¥å­ï¼Œæ•ˆæœå°±ä¸å¥½äº†ã€‚å±‚å½’ä¸€åŒ–å°±æ˜¯å¯¹æ¯ä¸€ä¸ªå°å•å…ƒåšæ ‡å‡†åŒ–ã€‚æ¯”å¦‚è¯´ä¸€ä¸ªå¥å­ï¼Œä¸€å¼ å›¾åƒã€‚åœ¨é¢„æµ‹çš„æ—¶å€™æ— é¡»å…¨å±€çš„ä¿¡æ¯ï¼Œåœ¨RNNå’ŒTransformerä¸­æ•ˆæœå¾ˆå¥½ï¼Œåœ¨CNNä¸Šå¯èƒ½æ²¡æœ‰ä»€ä¹ˆæ•ˆæœã€‚</p><h2 id="7-6-æ›´å¤šå½’ä¸€åŒ–-ğŸ”‘">7.6 æ›´å¤šå½’ä¸€åŒ– ğŸ”‘</h2><p>More Normalizationsâ€¢ Modify â€œreshapeâ€, e.g</p><p>.â€¢InstanceNorm:$ n \times c \times w \times h \to wh \times cn$â€‹ æ¯ä¸€ä¸ªä½ç½®</p><p>â€¢GroupNorm: $ n \times c \times w \times h \to swh \times gn $â€‹  with $ c = sg$â€‹  å¯¹cåˆ†ç»„â€‹</p><p>â€¢ CrossNorm: swap mean/std between a pair of features äº¤æ¢meanå’Œstd</p><p>â€¢ Modify â€œnormalizeâ€: e.g. whitening  ä½¿ç”¨ç™½åŒ–ï¼Œä¸ä»…ä»…ä½¿å¾—å‡å€¼ä¸º0æ–¹å·®ä¸º1ï¼Œè€Œä¸”ä½¿å¾—ç‰¹å¾ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¿›è¡ŒPCAé™ç»´</p><p>â€¢Modify â€œrecoveryâ€: e.g.  $\gamma \ \beta$â€‹â€‹â€‹â€‹ replace  with a dense layer å¯ä»¥æŠŠå‚æ•°æ”¹æˆçº¿æ€§å±‚ç”šè‡³mlpå»è¿˜åŸ</p><p>â€¢ Apply to weights or gradients ï¼ˆNormalizationsä¸»è¦å¯¹å±‚çš„è¾“å…¥ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹æƒé‡wæˆ–è€…æ¢¯åº¦æ¥æ ‡å‡†åŒ–ï¼‰</p><p>æœ€è¿‘å‘ç°åœ¨GANï¼ŒAdversarial Attackä¸­ä½¿ç”¨BNæ•ˆæœä¸å¥½ï¼Œé’ˆå¯¹ä¸åŒçš„é—®é¢˜è¦é€‰æ‹©åˆé€‚çš„Normalizationsçš„æŠ€æœ¯ã€‚</p><h2 id="7-7-Summary-ğŸ“§">7.7 Summary ğŸ“§</h2><p>â€¢ Normalizing inputs of internal layers makes deep NNs easier to train</p><p>â€¢ A normalization layer performs three steps: r<strong>eshape input, normalize data, recovery with learnable parameters</strong>  é€šç”¨æ­¥éª¤</p><p>â€‹â€¢ Notable examples include Batch Normalization for CNNs, Layer Normalization for Transformers ç°åœ¨å¾ˆå¤šäººå‘ç°åœ¨CNNä¸Šä¸ç”¨BNä¹Ÿæ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ã€‚</p><p>Normalizing å¯ä»¥æŠŠä¸­é—´å±‚çš„æ•°å€¼æ›´ç¨³å®šï¼Œä½¿å¾—æŸå¤±å‡½æ•°æ›´åŠ å¹³æ»‘ï¼Œä½¿å¾—ç½‘ç»œçš„è®­ç»ƒæ›´åŠ å®¹æ˜“ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯¹å‡†ç¡®ç‡æ²¡æœ‰å¤ªå¤§å½±å“ï¼Œä½†æ˜¯å¯ä»¥è®©æ›²çº¿æ›´åŠ ç¨³å®šå¹³æ»‘ã€‚å…¶å®ç¥ç»ç½‘ç»œå¹¶ä¸ä¸€å®šéœ€è¦ä½¿ç”¨BNï¼Œå¯ä»¥è¿›è¡Œä¸€äº›å…¶ä»–çš„æ“ä½œï¼Œæ¯”å¦‚å¯¹æ¢¯åº¦è¿›è¡ŒClippingï¼Œä½¿å…¶ä¸è¦å¤ªå¤§ã€‚å¹¶ä¸”å…¶å®BNåœ¨è®¡ç®—ä¸Šï¼Œåœ¨å®ç°ä¸Šä¼šå¸¦æ¥å¾ˆå¤§çš„é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡27 ç§»é™¤å…ƒç´ </title>
    <link href="/2022/02/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode27/"/>
    <url>/2022/02/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode27/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç§»é™¤å…ƒç´ </p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚</p><p>å…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p><p>è¯´æ˜:</p><p>ä¸ºä»€ä¹ˆè¿”å›æ•°å€¼æ˜¯æ•´æ•°ï¼Œä½†è¾“å‡ºçš„ç­”æ¡ˆæ˜¯æ•°ç»„å‘¢?</p><p>è¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„æ˜¯ä»¥ã€Œå¼•ç”¨ã€æ–¹å¼ä¼ é€’çš„ï¼Œè¿™æ„å‘³ç€åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</p><p>ä½ å¯ä»¥æƒ³è±¡å†…éƒ¨æ“ä½œå¦‚ä¸‹:</p><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// nums æ˜¯ä»¥â€œå¼•ç”¨â€æ–¹å¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯¹å®å‚ä½œä»»ä½•æ‹·è´</span><br><span class="hljs-keyword">int</span> <span class="hljs-built_in">len</span> = removeElement(nums, val);<br><br><span class="hljs-comment">// åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</span><br><span class="hljs-comment">// æ ¹æ®ä½ çš„å‡½æ•°è¿”å›çš„é•¿åº¦, å®ƒä¼šæ‰“å°å‡ºæ•°ç»„ä¸­ è¯¥é•¿åº¦èŒƒå›´å†… çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>; i++) {<br>&nbsp; &nbsp; <span class="hljs-built_in">print</span>(nums[i]);<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">nums</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-attr">val</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span>, <span class="hljs-attr">nums</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]<br>è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ <span class="hljs-number">2</span>, å¹¶ä¸” nums ä¸­çš„å‰ä¸¤ä¸ªå…ƒç´ å‡ä¸º <span class="hljs-number">2</span>ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°è¿”å›çš„æ–°é•¿åº¦ä¸º <span class="hljs-number">2</span> ï¼Œè€Œ <span class="hljs-attr">nums</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>] æˆ– <span class="hljs-attr">nums</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]ï¼Œä¹Ÿä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">0,1,2,2</span>,<span class="hljs-number">3,0,4,2</span>], val = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span>, nums = [<span class="hljs-number">0,1,4,0</span>,<span class="hljs-number">3</span>]<br>è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ <span class="hljs-number">5</span>, å¹¶ä¸” nums ä¸­çš„å‰äº”ä¸ªå…ƒç´ ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>ã€‚æ³¨æ„è¿™äº”ä¸ªå…ƒç´ å¯ä¸ºä»»æ„é¡ºåºã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= nums.length &lt;= 100</code></li><li><code>0 &lt;= nums[i] &lt;= 50</code></li><li><code>0 &lt;= val &lt;= 100</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åªéœ€è®°å½•å½“å‰è¯¥å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­è°ƒæ•´ä½ç½®å³å¯ã€‚æœ€åè¿”å›çš„æ˜¯å‰©ä¸‹çš„æ•°ç»„é•¿åº¦ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">removeElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], val: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        x = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i]== val: x += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: nums[i-x] = nums[i]<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(nums)-x<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¶…ä½å‰‚é‡é«˜åˆ†è¾¨ç‡æˆåƒç®—æ³•</title>
    <link href="/2022/02/07/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/CT/CT-paper/"/>
    <url>/2022/02/07/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/CT/CT-paper/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŸ¥æ‰¾ç›¸å…³è®ºæ–‡ï¼Œæ•´ç†å…¶æ€æƒ³ã€‚</p></blockquote><h2 id="ä¸€ï¼Œ-ç›®çš„">ä¸€ï¼Œ ç›®çš„</h2><h3 id="è¶…ä½å‰‚é‡Xå°„çº¿æ˜¾å¾®CTç³»ç»Ÿç ”åˆ¶">è¶…ä½å‰‚é‡Xå°„çº¿æ˜¾å¾®CTç³»ç»Ÿç ”åˆ¶</h3><p>è®¾è®¡å¹¶ç ”åˆ¶è¶…ä½å‰‚é‡ç°éªŒCTæˆåƒç³»ç»ŸåŠæ ¸å¿ƒéƒ¨ä»¶ï¼Œæ˜ç¡®çºµå‘æˆåƒä¸åŒç”µç¦»è¾å°„å¯¹åŠ¨ç‰©å„ç»„ç»‡å™¨å®˜ç»“æ„ä¸åŠŸèƒ½çš„å½±å“ï¼Œå®ç°ä½è¾å°„å‰‚é‡æ¡ä»¶ä¸‹çš„é«˜åˆ†è¾¨ç‡æˆåƒã€‚</p><h2 id="äºŒï¼Œ-æ–‡çŒ®æŸ¥æ‰¾æ¥æº">äºŒï¼Œ æ–‡çŒ®æŸ¥æ‰¾æ¥æº</h2><ul><li><a href="https://www.cttacn.org.cn/">CTç†è®ºä¸åº”ç”¨ç ”ç©¶</a></li><li><a href="http://www.diagnoschina.com/newest/zazhi_id-2">ä¸­å›½CTå’ŒMRIæ‚å¿—</a></li><li><a href="http://lcfsx.chinabidingnews.cn/">ä¸´åºŠæ”¾å°„å­¦æ‚å¿—</a></li><li>IEEE</li><li>Nature</li><li><a href="https://linkspringer.53yu.com/">Springer</a></li><li><a href="https://www.sciencedirect.com/">sciencedirect</a></li></ul><h2 id="ä¸‰ï¼Œä½å‰‚é‡CTæˆåƒç®—æ³•">ä¸‰ï¼Œä½å‰‚é‡CTæˆåƒç®—æ³•</h2><p>å·²æœ‰çš„ç ”ç©¶å·¥ä½œå¤§ä½“å¯å½’ç»“ä¸ºä¸‰å¤§ç±»ï¼šæŠ•å½±æ•°æ®å¤„ç†ï¼Œè¿­ä»£é‡å»ºç®—æ³•å’Œå›¾åƒåå¤„ç†æ–¹æ³•ã€‚</p><p><img src="https://picture.mulindya.com/CT_paper1.png" alt=""></p><p><img src="https://picture.mulindya.com/CT_paper5.png" alt=""></p><h2 id="å››ï¼ŒCTæˆåƒåº”ç”¨è¿›å±•">å››ï¼ŒCTæˆåƒåº”ç”¨è¿›å±•</h2><p>ä¸ºæé«˜ä½å‰‚é‡æ‰«ææ¡ä»¶ä¸‹çš„æˆåƒè´¨é‡ï¼Œç§‘ç ”ç•Œå’Œå·¥ä¸šç•Œçš„ç ”ç©¶äººå‘˜å¯¹ CT æˆåƒç®—æ³•é“¾ä¸­çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œäº†ç›¸åº”ç ”ç©¶ï¼Œæå‡ºå¤§é‡æœ‰æ•ˆçš„ç®—æ³•ã€‚ç›®å‰é’ˆå¯¹ CT æˆåƒä¸­çš„å™ªå£°ä¼ªå½±æŠ‘åˆ¶é—®é¢˜ï¼Œå·²æœ‰çš„ç ”ç©¶å·¥ä½œå¤§ä½“å¯å½’ç»“ä¸ºä¸‰å¤§ç±»ï¼šæŠ•å½±æ•°æ®å¤„ç†ï¼Œè¿­ä»£é‡å»ºç®—æ³•å’Œå›¾åƒåå¤„ç†æ–¹æ³• ã€‚ç‰¹å¾å­¦ä¹ æ–¹æ³•åœ¨åŒ»å­¦å›¾åƒå¤„ç†é¢†åŸŸä¸­å¾—åˆ°äº†è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ï¼Œæˆä¸ºè¿‘å¹´æ¥åŒ»å­¦å›¾åƒå¤„ç†çš„é‡è¦æ–¹æ³•ä¹‹ä¸€ï¼Œå¹¶ä¸”å·²ç»é€æ­¥åœ°åº”ç”¨åœ¨ CT æˆåƒç ”ç©¶ä¸­ï¼Œå¤§å¤§åŠ é€Ÿäº† CT æˆåƒæŠ€æœ¯çš„å‘å±•ï¼Œä¸»è¦è¡¨ç°åœ¨ç¨€ç–è¡¨ç¤ºå­¦ä¹  CT æˆåƒæŠ€æœ¯å’Œæ·±åº¦å­¦ä¹  CT æˆåƒæŠ€æœ¯ä¸¤æ–¹é¢ã€‚ä»¥ä¸‹æˆ‘ä»¬å°†é‡ç‚¹ä» 3 ç§é«˜è´¨é‡ CT æˆåƒæ–¹æ³•ä»‹å…¥ï¼Œåˆ†æç°é˜¶æ®µçš„ CT æˆåƒç ”ç©¶ç°çŠ¶ã€‚</p><h3 id="4-1-æŠ•å½±æ•°æ®é¢„å¤„ç†">4.1 æŠ•å½±æ•°æ®é¢„å¤„ç†</h3><p>â€‹åœ¨ä½å‰‚é‡æ‰«ææ¡ä»¶ä¸‹ï¼ˆä½ç®¡ç”µæµã€ç®¡ç”µå‹ï¼Œæœ‰é™è§’åº¦ï¼‰ï¼ŒæŠ•å½±æ•°æ®ä¼šå—åˆ°å™ªå£°å¹²æ‰°ï¼Œå‡ºç°ä¼ªå½±ï¼Œç”šè‡³ç¼ºå¤±ç­‰ç°è±¡ã€‚æŠ•å½±æ•°æ®çš„é¢„å¤„ç†é€šå¸¸å°±æ˜¯é‡‡ç”¨æ•°æ®å»å™ªã€å¤åŸç­‰æ‰‹æ®µï¼Œå¯¹æ‰«æåçš„åŸå§‹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—çš„å¤„ç†ï¼Œä»¥å°½å¯èƒ½æé«˜æŠ•å½±æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿›è€Œæé«˜é‡å»ºå›¾åƒè´¨é‡ï¼Œè¯¥ç±»ç®—æ³•åˆè¢«ç§°ä½œé‡å»ºå‰â€œé¢„å¤„ç†ç®—æ³•â€ã€‚</p><p>â€‹<strong>æ—©æœŸ</strong>ï¼Œäººä»¬æå‡ºäº†å¤§é‡çš„æŠ•å½±æ•°æ®é¢„å¤„ç†æ–¹æ³•ï¼Œå¦‚<strong>è‡ªé€‚åº”æ»¤æ³¢ï¼ŒåŠ æƒæœ€å°å‡æ–¹çš„æ»¤æ³¢ ï¼ŒåŸºäºå›¾åƒ K-L å˜æ¢çš„åŠ æƒæœ€å°å‡æ–¹å’Œå™ªå£°åˆ†ç¦»æ»¤æ³¢</strong>ç­‰ã€‚éšç€ç ”ç©¶çš„æ·±å…¥ï¼Œå­¦ä¹ å‹ç¨€ç–è¡¨ç¤ºæ–¹æ³•åœ¨æŠ•å½±æ•°æ®é¢„å¤„ç†æ–¹é¢å·²æœ‰ä¸€å®šçš„åº”ç”¨ï¼Œä¾‹å¦‚Shtok ç­‰åˆ©ç”¨ K-SVD å­—å…¸å¯¹ä½å‰‚é‡æŠ•å½±æ•°æ®è¿›è¡Œç¨€ç–è¡¨ç¤ºè¿›è€Œå»å™ªï¼Œå¯å®ç°å‡å°‘ä½å‰‚é‡é‡å»ºå›¾åƒä¸­ä¼ªå½±çš„ç›®çš„ã€‚Stojanovic ç­‰å°†æŠ•å½±å¼¦å›¾å¹³æ»‘æŠ€æœ¯å’Œå­¦ä¹ å‹å­—å…¸ç¨€ç–è¡¨ç¤ºç›¸äº’ç»“åˆï¼Œæ¥é™ä½æŠ•å½±æ•°æ®å™ªå£°ä»è€Œæé«˜é‡å»ºæ•ˆæœã€‚Li ç­‰å°†å­—å…¸å­¦ä¹ æ–¹æ³•åº”ç”¨äºæŠ•å½±å›¾ä¿®è¡¥ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ç¨€ç–è§’åº¦æˆåƒä¸­çš„ä¼ªå½±ã€‚Shen ç­‰æå‡ºäº†ä¸€ç§è¿‘ä¼¼çš„ç¨€ç–å­¦ä¹ åŠè¡¨ç¤ºæ¨¡å‹ï¼Œå®ç°äº†å¿«é€Ÿå¼¦å›¾ä¿®è¡¥ï¼Œåœ¨ä¸å½±å“é‡å»ºå›¾åƒåˆ†è¾¨ç‡çš„æƒ…å†µä¸‹æé«˜é‡å»ºæ•ˆæœã€‚Zhang ç­‰æ ¹æ®å™ªå£°ç‰¹æ€§è¿›ä¸€æ­¥æå‡ºäº†æŠ•å½±åŸŸçš„å­—å…¸å­¦ä¹ æ–¹æ³•æ¥é™ä½å™ªå£°æé«˜ä½å‰‚é‡ CT æˆåƒè´¨é‡ã€‚Karimi ç­‰åŸºäºä¸‰ç»´æŠ•å½±æ•°æ®çš„ç›¸ä¼¼æ€§ï¼Œæ„å»ºè”åˆç¨€ç–è¡¨ç¤ºï¼Œå¯¹é”¥æŸæŠ•å½±æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå¾—åˆ°äº†è¾ƒå¥½çš„å»å™ªæ•ˆæœã€‚Liu ç­‰ ä»ä¿æŒæŠ•å½±æ•°æ®ä¸€è‡´æ€§å‡ºå‘ï¼Œæå‡ºä¸€ç§æŠ•å½±æ•°æ®åŒºåˆ«æ€§ç‰¹å¾è¡¨ç¤ºçš„æ–¹æ³•ï¼Œæœ‰æ•ˆåœ°é™ä½äº†æŠ•å½±æ•°æ®ä¸­çš„å™ªå£°å¹¶æé«˜äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚æ·±åº¦å­¦ä¹ æ–¹é¢ï¼ŒPark ç­‰æå‡ºäº†åŸºäºå¼¦å›¾ä¸€è‡´æ€§çš„å­¦ä¹ æ¨¡å‹ï¼Œå¯æœ‰æ•ˆåœ°é™ä½é‡å»ºå›¾åƒä¸­çš„å°„æŸç¡¬åŒ–ä¼ªå½±ç°è±¡ã€‚éšåï¼Œè¯¥å›¢é˜Ÿåœ¨è¿™ä¸€åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åº”ç”¨äºé‡‘å±ä¼ªå½±çš„å»é™¤ï¼Œå–å¾—äº†æ˜æ˜¾çš„æ•ˆæœã€‚Lee ç­‰å°†æŠ•å½±è§’åº¦é—´å·®å€¼å’Œæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œç›¸ç»“åˆï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜ç¨€ç–è§’åº¦é‡å»ºå›¾åƒè´¨é‡ã€‚Anirudh ç­‰é€šè¿‡è®¾è®¡ä¸€ç§æœ‰æ•ˆçš„äºŒç»´å·ç§¯ç¥ç»ç½‘ç»œæ¥ä¿®å¤æœ‰é™è§’åº¦æ‰«æä¸‹çš„æŠ•å½±æ•°æ®ç¼ºå¤±ï¼Œé€šè¿‡å°†æœ‰é™è§’åº¦æ‰«æçš„æŠ•å½±æ•°æ®è¡¥å…¨çš„ç­–ç•¥æ¥æé«˜æˆåƒè´¨é‡ã€‚</p><p>â€‹ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç±»æ–¹æ³•ç›´æ¥å¯¹åŸå§‹æŠ•å½±æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå°†å™ªå£°æŠ‘åˆ¶å’Œå›¾åƒé‡å»ºçœ‹ä½œä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„è¿‡ç¨‹ï¼Œä¾¿äºç³»ç»Ÿé›†æˆï¼ŒæŠ•å½±åŸŸé¢„å¤„ç†æ–¹æ³•çš„è®¡ç®—å¤æ‚åº¦å°äºè¿­ä»£é‡å»ºæ–¹æ³•ï¼Œç›¸æ¯”äºè¿­ä»£é‡å»ºç®—æ³•å…·æœ‰è¾ƒå¤§ä¼˜åŠ¿ï¼Œå¹¶ä¸”å®¹æ˜“é›†æˆå…¥æˆåƒç®—æ³•é“¾ä¸­ã€‚ä½†æ˜¯æŠ•å½±åŸŸå¤„ç†è¿‡ç¨‹å®¹æ˜“å‡ºç°æ•°æ®ä¸ä¸€è‡´ã€æ¬ æ ¡æ­£ã€è¿‡æ ¡æ­£ç­‰ç°è±¡ï¼Œä»è€Œä½¿å¾—é‡å»ºå›¾åƒå¤±çœŸï¼Œæˆ–è€…å‡ºç°æ–°çš„ä¼ªå½±å’Œå™ªå£°ç­‰ã€‚å› æ­¤ï¼Œæ ¹æ®æŠ•å½±æ•°æ®ä¸­çš„å™ªå£°ç‰¹æ€§æ¥è®¾è®¡å¿«é€Ÿæœ‰æ•ˆè€Œä¿æŒæ•°æ®ä¸€è‡´æ€§çš„ç®—æ³•ï¼Œååˆ†é‡è¦ã€‚</p><h3 id="4-2-å›¾åƒé‡å»º">4.2 å›¾åƒé‡å»º</h3><p>â€‹ç”±äºè®¡ç®—æœºè¿ç®—èƒ½åŠ›çš„æé«˜ï¼Œè¿­ä»£ç®—æ³•çš„å®ç”¨æ€§è¶Šæ¥è¶Šå¼ºã€‚ä¸è§£æé‡å»ºç›¸æ¯”ï¼Œè¿­ä»£é‡å»ºå…·æœ‰å¯¹å™ªå£°ä¸æ•æ„Ÿï¼Œç‰©ç†æ¨¡å‹å‡†ç¡®ã€æ˜“äºæ·»åŠ æ­£åˆ™é¡¹ç­‰ä¼˜ç‚¹ï¼Œä½¿å¾—å®ƒåœ¨ä½å‰‚é‡æ‰«ææ¡ä»¶ä¸‹æ›´å…·æœ‰ä¼˜åŠ¿ã€‚è¿­ä»£é‡å»ºç®—æ³•ä¸­ï¼Œå°†å…ˆéªŒä¿¡æ¯ä½œä¸ºæ­£åˆ™é¡¹ï¼Œå¹¶å¼•å…¥ç›®æ ‡å‡½æ•°å¯ä»¥æŠ‘åˆ¶å™ªå£°å’Œä¿æŒç»“æ„ä¿¡æ¯ï¼Œæé«˜æ±‚è§£ç¨³å®šæ€§ã€‚å› æ­¤ï¼Œ<strong>åŸºäºæ­£åˆ™é¡¹çš„ç»Ÿè®¡è¿­ä»£é‡å»ºç®—æ³•æ˜¯ç›®å‰çš„ä¸€ä¸ªç ”ç©¶é‡ç‚¹ã€‚</strong></p><h4 id="4-2-1-ä¼ ç»Ÿçš„é‡å»ºæ–¹æ³•">4.2.1 ä¼ ç»Ÿçš„é‡å»ºæ–¹æ³•</h4><p>â€‹CT æˆåƒæŠ€æœ¯çš„æ ¸å¿ƒæ˜¯é‡å»ºç®—æ³•ï¼Œ<strong>å…¸å‹çš„é‡å»ºç®—æ³•åŒ…æ‹¬è§£ææ³•å’Œè¿­ä»£æ³•</strong>ã€‚ç”±äºå…·å¤‡ç®—æ³•ç®€å•ã€è®¡ç®—é€Ÿåº¦å¿«ç­‰çš„ä¼˜ç‚¹ï¼Œ**è§£ææ³•ä¸­çš„FBP ä¸FDKï¼ˆfeldkamp-daivs-kressï¼‰åˆ†åˆ«æˆä¸ºäº†äºŒç»´å’Œä¸‰ç»´ CT ç³»ç»Ÿçš„ä¸»æµé€‰æ‹©ã€‚**ç„¶è€Œï¼Œè§£ææ³•å¯¹æŠ•å½±æ•°æ®çš„å®Œå¤‡æ€§è¦æ±‚è¾ƒé«˜ï¼Œä¸”å¯¹å™ªå£°éå¸¸æ•æ„Ÿï¼Œåœ¨ç¨€ç–è§’åº¦æˆ–æœ‰é™è§’åº¦æ‰«ææ¡ä»¶ä¸‹çš„é‡å»ºç»“æœå¾€å¾€ä¼šå—åˆ°ä¸¥é‡çš„ä¼ªå½±å’Œå™ªå£°æ±¡æŸ“ã€‚è¿­ä»£æ³•å°†å¾…é‡å»ºå›¾åƒä½œä¸ºæœªçŸ¥é‡ï¼Œåœ¨å›¾åƒåŸŸå»ºç«‹ç›®æ ‡å‡½æ•°ï¼Œå¹¶é€šè¿‡è¿­ä»£æ±‚è§£æ¥è·å–å¾…é‡å»ºå›¾åƒã€‚æ ¹æ®ç›®æ ‡å‡½æ•°å»ºç«‹çš„æ–¹å¼ä¸åŒï¼Œ<strong>è¿­ä»£ç®—æ³•å¯åˆ†ä¸ºä»£æ•°è¿­ä»£æ³•å’Œç»Ÿè®¡è¿­ä»£é‡å»ºç®—æ³•</strong>ï¼ˆstatistical iterative reconstructionï¼ŒSIRï¼‰ã€‚ä»£æ•°è¿­ä»£æ³•èƒ½å¤ŸèŠ‚çœå†…å­˜ä¸”é‡å»ºé€Ÿåº¦å¿«ï¼Œç„¶è€Œé‡å»ºåçš„å›¾åƒè´¨é‡å¹¶ä¸ç†æƒ³ã€‚ä¸ä¼ ç»Ÿçš„è§£ææ³•å’Œä»£æ•°è¿­ä»£æ³•ç›¸æ¯”ï¼Œ<strong>SIRçš„é‡å»ºæ•ˆæœæ›´å¥½ã€‚</strong></p><p>â€‹ä¼´éšç€å‹ç¼©æ„ŸçŸ¥ç†è®ºçš„å‘å±•ï¼Œç ”ç©¶å‘ç°ç»Ÿè®¡é‡å»ºç®—æ³•å¯ä»¥ä¸ç¨€ç–å­¦ä¹ è¡¨ç¤ºçš„çº¦æŸå¾ˆå¥½åœ°ç»“åˆèµ·æ¥ï¼Œä»è€Œèƒ½å¤Ÿæœ‰æ•ˆæé«˜é‡å»ºå›¾åƒçš„è´¨é‡ã€‚åœ¨è¿™ç±»æ–¹æ³•ä¸­ï¼Œæœ€å¸¸ç”¨çš„ç¨€ç–è¡¨ç¤ºæ–¹æ³•æ˜¯ TV çº¦æŸè¿­ä»£é‡å»ºï¼Œå®ƒå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘ CT å›¾åƒä¸­çš„å™ªå£°ä¼ªå½±ã€‚ä½†æ˜¯ TV çº¦æŸè¿­ä»£é‡å»ºéš¾ä»¥æœ‰æ•ˆå¤„ç†å…·æœ‰å¤æ‚ç»“æ„ä¿¡æ¯çš„å›¾åƒï¼Œè¯¥æ–¹æ³•åœ¨ä½å‰‚é‡ CT å›¾åƒé‡å»ºä¸­ä¼šä¸å¯é¿å…åœ°å¼•å…¥å—çŠ¶ä¼ªå½±å’Œä¸¢å¤±ç»†èŠ‚ã€‚å¦å¤–ï¼ŒåŸºäºç‰¹å¾å­—å…¸å­¦ä¹ è¿›è¡Œç¨€ç–è¡¨ç¤ºçš„æ–¹æ³•ä¹Ÿå·²ç»åº”ç”¨äºåŒ»å­¦å›¾åƒé‡å»ºè¿‡ç¨‹ä¸­ï¼Œç›¸æ¯”äº TV çº¦æŸï¼Œç‰¹å¾å­—å…¸å­¦ä¹ æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°å¤„ç†å›¾åƒå±€éƒ¨ç»†èŠ‚ï¼Œèƒ½å¤Ÿè·å¾—æ›´é«˜è´¨é‡å›¾åƒã€‚ä¾‹å¦‚ Xu ç­‰é¦–æ¬¡å°†å…¨å±€å­—å…¸ä»¥åŠè‡ªé€‚åº”å­¦ä¹ åº”ç”¨äºä½å‰‚é‡ CTé‡å»ºä¸­ï¼Œå¾—åˆ°äº†è¾ƒé«˜çš„å›¾åƒè´¨é‡å¹¶ä¸”ä¿æŒäº†è¾ƒå¥½çš„ç»†èŠ‚ã€‚éšåå‡ºç°äº†ä¸€äº›æ”¹è¿›ç ”ç©¶ï¼Œä¾‹å¦‚Lu ç­‰æå‡ºå¯¹å¶å­—å…¸ã€Bai ç­‰æå‡ºçš„å¤šå°ºåº¦å­—å…¸ç­‰éƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº† CT å›¾åƒé‡å»ºæ•ˆæœã€‚Chen ç­‰æ ¹æ®äººä½“ç»„ç»‡ç»“æ„å’Œå™ªå£°ä¼ªå½±ä¹‹é—´çš„ç‰¹å¾ä¸ä¸€è‡´æ€§ï¼Œæå‡ºäº†åŸºäºåŒºåˆ«æ€§ç‰¹å¾è¡¨ç¤ºçš„ä½å‰‚é‡ CT å›¾åƒå¤„ç†ç®—æ³•ï¼Œè¯¥ç®—æ³•ä½¿ç”¨å«æœ‰è§£å‰–ç»“æ„ç‰¹å¾å’Œå™ªå£°ä¼ªå½±ç‰¹å¾çš„æ··åˆå­—å…¸ï¼Œé€šè¿‡ç«äº‰æ€§çš„åŒºåˆ«æ€§ç¨€ç–è¡¨ç¤ºå®ç°äº†å¯¹å™ªå£°å’Œä¼ªå½±çš„æœ‰æ•ˆå»é™¤ï¼Œå®éªŒè¯æ˜è¯¥åŒºåˆ«æ€§ç‰¹å¾è¡¨ç¤ºç®—æ³•æ—¢èƒ½é€šè¿‡å›¾åƒç©ºé—´åå¤„ç†ï¼Œä¹Ÿèƒ½é€šè¿‡æŠ•å½±ç©ºé—´å‰å¤„ç†æ¥æé«˜ä½å‰‚é‡ CT å›¾åƒè´¨é‡ï¼Œå…·æœ‰è¾ƒå¥½çš„æ‰©å±•æ€§ã€‚æœ€è¿‘ï¼ŒLiu ç­‰ä½¿ç”¨å­—å…¸å­¦ä¹ çš„ä¸‰ç»´ç‰¹å¾æ¥çº¦æŸè¿­ä»£é‡å»ºï¼Œå¯å¤§å¹…åº¦çš„æé«˜é‡å»ºå›¾åƒè´¨é‡ã€‚</p><h4 id="4-2-2-åŸºäºæ·±åº¦å­¦ä¹ çš„é‡å»ºæ–¹æ³•">4.2.2 åŸºäºæ·±åº¦å­¦ä¹ çš„é‡å»ºæ–¹æ³•</h4><p><img src="https://picture.mulindya.com/CT_paper2.png" alt=""></p><p>â€‹ç¬¬â… ç±»æ–¹æ³•å°†æ·±åº¦å­¦ä¹ ç”¨äºå®ç°è§£æé‡å»ºä¸­çš„æ»¤æ³¢åæŠ•å½±æ“ä½œï¼Œä¸»è¦ç ”ç©¶å¦‚ä½•é‡‡ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆconvolutional neural networkï¼ŒCNNï¼‰å®ç°æŠ•å½±åŸŸä¸å›¾åƒåŸŸçš„ç›´æ¥æ˜ å°„ã€‚æ­¤ç±»æ–¹æ³•ä¸€èˆ¬é‡‡ç”¨ç½‘ç»œè®­ç»ƒçš„æ–¹å¼å®ç°è§£æé‡å»ºä¸­çš„æ»¤æ³¢ä¸åæŠ•å½±æ“ä½œï¼Œå®ƒä»¬å¯ä»¥åˆ†ä¸ºæŠ•å½±åŸŸç½‘ç»œ + BP å’ŒæŠ•å½±åŸŸç½‘ç»œ + BP + å›¾åƒåŸŸç½‘ç»œä¸¤ç±»ã€‚</p><p>â€‹ç¬¬â…¡ç±»æ–¹æ³•å°†æ·±åº¦å­¦ä¹ ç”¨äºå®ç° SIR ä¸­çš„æ­£åˆ™é¡¹åŠŸèƒ½ã€‚ä¸ä¼ ç»Ÿ SIR ç®—æ³•éœ€è¦äººå·¥è®¾è®¡æ­£åˆ™åŒ–é¡¹ä¸åŒï¼Œæ­¤ç±»æ–¹æ³•ä¸­èƒ½å¤Ÿåæ˜  CT å›¾åƒå…ˆéªŒä¿¡æ¯çš„æ­£åˆ™é¡¹æ˜¯å¯å­¦ä¹ çš„ã€‚æ ¹æ®ç½‘ç»œæ¨¡å‹æ˜¯å¦éœ€è¦é¢„å…ˆè®­ç»ƒï¼Œå¯å°†è¿™ç±»æ–¹æ³•åˆ†ä¸º model-based ç±»é‡å»ºæ–¹æ³•å’Œ plug-and-play ç±»é‡å»ºæ–¹æ³•ã€‚</p><p>â€‹ç¬¬ â…¢ç±»æ–¹æ³•æ˜¯åŸºäº CNN çš„è¿­ä»£å±•å¼€ç±»ç®—æ³•ï¼Œä¸»è¦ç ”ç©¶å¦‚ä½•é‡‡ç”¨æ·±åº¦å­¦ä¹ ç½‘ç»œæ¨¡å—é€šè¿‡ç½‘ç»œè®­ç»ƒçš„æ–¹å¼å®ç° SIR ä¸­çš„è¿­ä»£æ±‚è§£è¿‡ç¨‹ã€‚ â‘  ä¸€éƒ¨åˆ†ç ”ç©¶è€…è‡´åŠ›äºç ”ç©¶é‡‡ç”¨ç«¯åˆ°ç«¯çš„è®­ç»ƒæ–¹å¼å®ç°è¿­ä»£æ±‚è§£è¿‡ç¨‹å¯å­¦ä¹ ã€‚</p><p>â€‹Hammernik ç­‰æå‡ºäº†ä¸€ç§æ·±åº¦å­¦ä¹ çš„é‡å»ºç½‘ç»œæ¶æ„ï¼Œèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æœ‰é™è§’åº¦ CT å›¾åƒé‡å»ºè´¨é‡ã€‚Kelly ç­‰é€šè¿‡<strong>æ·±åº¦ç‰¹å¾å­¦ä¹ </strong>ï¼Œæ¥å¼•å¯¼ä¸å®Œå…¨æŠ•å½±æ•°æ®çš„é‡å»ºï¼Œèƒ½æœ‰æ•ˆåœ°å‡å°‘ä¸å®Œå…¨æŠ•å½±é‡å»ºå¸¦æ¥çš„ä¼ªå½±ã€‚Zhao ç­‰æå‡ºäº†ä¸€ç§è½»é‡åŒ–çš„å·ç§¯ç¥ç»ç½‘ç»œæ¶æ„ï¼Œé€šè¿‡è”åˆä¼˜åŒ–å„å±‚ç½‘ç»œå‚æ•°ï¼Œæ¥å®ç°ç¨€ç–è§’åº¦ CT å›¾åƒé‡å»ºï¼Œå–å¾—äº†è¾ƒä¼ ç»Ÿçš„ç‰¹å¾å­—å…¸æ•ˆæœæ›´å¥½çš„å›¾åƒã€‚Gjesteby ç­‰é€šè¿‡é‡‡ç”¨æ·±åº¦ç¥ç»ç½‘ç»œçš„æ–¹å¼ï¼Œå­¦ä¹ é«˜è´¨é‡çš„ CT å›¾åƒç‰¹å¾ä»¥å¼•å¯¼ CT å›¾åƒé‡å»ºï¼ŒæŠ‘åˆ¶é‡å»ºè¿‡ç¨‹ä¸­çš„é‡‘å±ä¼ªå½±ã€‚Ramesh ç­‰ é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæ¥æå–é«˜è´¨é‡ CT å›¾åƒçš„ä¸­çš„å…ˆéªŒä¿¡æ¯ï¼Œå¹¶å°†å…¶ç”¨äºé‡å»ºä¸­ï¼Œè¯¥å…ˆéªŒä¿¡æ¯å…·æœ‰è‰¯å¥½çš„è‡ªé€‚åº”æ€§ï¼Œåœ¨å™ªå£°ä¼ªå½±æŠ‘åˆ¶å’Œå›¾åƒç»†èŠ‚ä¿æŒæ–¹é¢å–å¾—è¾ƒå¥½çš„å¹³è¡¡ã€‚Ye ç­‰é€šè¿‡è®¾è®¡å«æœ‰ä¸²è”çš„ ReLU æ¿€æ´»å‡½æ•°ç»“æ„çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œæ¥æ¢ç´¢æ·±åº¦å­¦ä¹ åœ¨é€†é—®é¢˜æ±‚è§£ä¸­çš„é€šç”¨æ¡†æ¶ï¼Œå¹¶å°†å…¶åº”ç”¨äºåŒ»å­¦å›¾åƒé‡å»ºä¸­ã€‚Chen ç­‰å°†ç»Ÿè®¡è¿­ä»£é‡å»ºä¸­çš„å…ˆéªŒé¡¹æ›¿æ¢ä¸ºå¤šä¸ªçº§è”çš„æ®‹å·®ç½‘ç»œï¼Œè®¾è®¡å‡ºä¸€ç§å­¦ä¹ ä¸“å®¶è¯„ä¼°çš„é‡å»ºç½‘ç»œ LEARNï¼Œå¹¶ç”¨äºç¨€ç–è§’åº¦ CT é‡å»ºï¼Œå®éªŒç»“æœè¡¨æ˜åœ¨ 50 ä¸ªè¿­ä»£çº§è”åï¼Œèƒ½æœ‰æ•ˆåœ°å‡å°‘é‡å»ºä¼ªå½±æé«˜å›¾åƒè´¨é‡ã€‚Adler ç­‰åˆ©ç”¨å¯¹å¶å…³ç³»ï¼Œå°†é‡å»ºé—®é¢˜è½¬æ¢ä¸ºä¸€ä¸ªè¿‘ä¼¼çš„å¯¹å¶é—®é¢˜ï¼Œå¹¶ç”¨ç¥ç»ç½‘ç»œæ¥æ›¿ä»£å¯¹å¶çš„æ±‚è§£ï¼Œæå‡ºäº†ä¸€ç§åŸå§‹å¯¹å¶é‡å»ºæ–¹æ³•ï¼Œä»¿çœŸå®éªŒç»“æœè¡¨æ˜åœ¨å™ªå£°æŠ‘åˆ¶å’Œç»†èŠ‚ä¿æŒä¸Šè¦ä¼˜äº TV é‡å»ºç®—æ³•ï¼Œå¹¶ä¸”èƒ½åœ¨ä»… 10 å€ FBP é‡å»ºæ—¶é—´ä¸‹å–å¾—è‰¯å¥½çš„å›¾åƒè´¨é‡ï¼Œå…·æœ‰ä¸€å®šçš„åº”ç”¨å‰æ™¯ã€‚åŸºäºæ­£åˆ™åŒ–é¡¹çš„ç»Ÿè®¡è¿­ä»£ç±»ç®—æ³•ï¼Œå®ƒä»æŠ•å½±æ•°æ®çš„ç»Ÿè®¡ç‰¹æ€§ä»¥åŠ CT å›¾åƒçš„ç‰¹å®šå…ˆéªŒä¿¡æ¯çš„è§’åº¦å‡ºå‘ï¼Œé€šè¿‡ä¼˜åŒ–é‡å»ºé€†é—®é¢˜çš„ç›®æ ‡å‡½æ•°ï¼Œå¯ä»¥è·å¾—è´¨é‡è¾ƒå¥½çš„é‡å»ºå›¾åƒã€‚ä½†æ˜¯è¿™ç±»ç®—æ³•é¢ä¸´çš„ä¸»è¦é—®é¢˜æœ‰ï¼šè¶…å‚æ•°å¤šï¼Œéš¾ä»¥è‡ªé€‚åº”ä¼˜åŒ–ï¼›ç®—æ³•å¤æ‚åº¦é«˜ï¼Œéœ€è¦é‡å¤è¿›è¡Œè¿­ä»£è®¡ç®—ï¼›å…ˆéªŒä¿¡æ¯å…·æœ‰ä¸ç¨³å®šæ€§ï¼Œæ— æ³•è·å¾—ç»Ÿä¸€æ¡†æ¶ä¸‹çš„æ­£åˆ™é¡¹ç­‰ï¼Œä½¿å¾—è¿­ä»£é‡å»ºåœ¨å®é™…ä¸´åºŠåº”ç”¨åœºæ™¯éš¾ä»¥å……åˆ†å‘æŒ¥å…¶ä»·å€¼ã€‚è¿™äº›éƒ½æ˜¯æœªæ¥ç ”ç©¶çš„é‡è¦æ–¹å‘åŠçƒ­ç‚¹ã€‚</p><h3 id="4-3-å›¾åƒåå¤„ç†">4.3 å›¾åƒåå¤„ç†</h3><p>â€‹åœ¨å›¾åƒåŸŸï¼Œä»¥æŠ‘åˆ¶å›¾åƒä¸­å™ªå£°å’Œä¼ªå½±ä¸ºç ”ç©¶ç›®æ ‡ï¼Œç›´æ¥å¯¹é‡å»ºå›¾åƒè¿›è¡Œå¤„ç†çš„æ–¹æ³•ç§°ä¸ºåå¤„ç†æ–¹æ³•ã€‚ç”±äºå…¶åœ¨å›¾åƒåŸŸè¿›è¡Œæ“ä½œï¼Œä¸ä¾èµ–äºåŸå§‹æŠ•å½±æ•°æ®ï¼Œå¯ç§»æ¤æ€§è¾ƒå¼ºï¼Œä¾¿äºæ¨å¹¿ï¼Œåå¤„ç†æ–¹æ³•å·²ç»æˆä¸º LDCT æˆåƒé¢†åŸŸçš„çƒ­ç‚¹ç ”ç©¶æ–¹å‘ã€‚åå¤„ç†ç®—æ³•ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š<strong>ä¼ ç»Ÿåå¤„ç†ç®—æ³•ä¸åŸºäºæ·±åº¦å­¦ä¹ çš„åå¤„ç†æ–¹æ³•ã€‚</strong></p><h4 id="4-3-1-ä¼ ç»Ÿåå¤„ç†ç®—æ³•">4.3.1 ä¼ ç»Ÿåå¤„ç†ç®—æ³•</h4><p>â€‹åœ¨æ·±åº¦å­¦ä¹ è¢«å¹¿æ³›åº”ç”¨ä¹‹å‰ï¼ŒLDCT å›¾åƒä¼ªå½±æŠ‘åˆ¶ä¸»è¦é€šè¿‡ä¼ ç»Ÿåå¤„ç†æ–¹æ³•æ¥å®ç°ã€‚ç»å…¸ç®—æ³•ä¸­ï¼Œç”±äºèƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨å›¾åƒåƒç´ ä¹‹é—´çš„ç»“æ„ç›¸ä¼¼æ€§ï¼Œ<strong>åŸºäºéå±€éƒ¨å‡å€¼ï¼ˆnon-localmeansï¼ŒNLMï¼‰åŠå…¶æ”¹è¿›å½¢å¼çš„æ–¹æ³•</strong>å–å¾—äº†è¾ƒå¥½çš„é™å™ªæ•ˆæœã€‚</p><p>â€‹è¿™äº›æ–¹æ³•çš„ä¸»è¦æ€æƒ³éƒ½æ˜¯ä»**é«˜è´¨é‡ CT å›¾åƒä¸­æå–æœ‰æ•ˆçš„ç‰¹å¾ä¿¡æ¯ï¼Œä¸ºä½è´¨é‡çš„ CT å›¾åƒå¤„ç†æä¾›å…ˆéªŒæŒ‡å¯¼ï¼ŒæœåŠ¡äºæˆåƒã€‚**å…¶ä¸­ï¼ŒåŸºäºç‰¹å¾å­—å…¸çš„ç¨€ç–å­¦ä¹ è¡¨ç¤ºæŠ€æœ¯ç»“åˆäº†å›¾åƒçš„å…ˆéªŒä¿¡æ¯ï¼ŒåŠéå±€éƒ¨å¤„ç†ç®—æ³•çš„ä¼˜åŠ¿ï¼Œå–å¾—äº†ä¼˜å¼‚çš„æ•ˆæœã€‚Chen ç­‰æå‡ºçš„åŸºäºå¤§å°ºåº¦é‚»åŸŸéå±€éƒ¨å‡å€¼æ»¤æ³¢çš„LDCT ä¼ªå½±æŠ‘åˆ¶æ–¹æ³•ï¼Œè€ƒè™‘äº†å¤§å°ºåº¦çª—å£å†…åƒç´ ç»“æ„çš„ç›¸ä¼¼æ€§ï¼Œä¼ªå½±æŠ‘åˆ¶æ•ˆæœè¾ƒå¥½ã€‚æ­¤å¤–ï¼Œä¹Ÿæœ‰è®¸å¤šåœ¨å˜æ¢åŸŸè¿›è¡Œ LDCT å›¾åƒé™å™ªçš„æ¢ç´¢ï¼Œå¦‚åŸºäºå¤šå°ºåº¦å¥‡å¼‚ç‚¹æ£€æµ‹çš„ LDCT å›¾åƒå°æ³¢å»å™ªç®—æ³•ã€åœ¨å°æ³¢åŸŸå¯¹ NLM æ–¹æ³•è¿›è¡Œæ”¹è¿›çš„ä¸‰ç»´å—åŒ¹é…æ»¤æ³¢ç®—æ³•å’ŒåŸºäºç¨€ç–è¡¨ç¤ºå’Œå­—å…¸å­¦ä¹ çš„æ–¹æ³•ä¹Ÿæ˜¯LDCT å›¾åƒé™å™ªé¢†åŸŸè¿‘å¹´çš„ç ”ç©¶çƒ­ç‚¹ã€‚ä¼ ç»Ÿæ–¹æ³•è¿˜åŒ…æ‹¬è‡ªé€‚åº”å¤šå°ºåº¦å…¨å˜åˆ† LDCT å›¾åƒé™å™ªæ–¹æ³•ã€åŸºäºCurvelet åŒçº¿æ€§æ’å€¼çš„ LDCT å›¾åƒé™å™ªæ–¹æ³•ç­‰ã€‚è¿™äº›ä¼ ç»Ÿç®—æ³•ä¸»è¦è¿ç”¨æ•°å­¦åˆ†æã€ç°ä»£ä¿¡å·å¤„ç†ä¸æ•°å­—å›¾åƒå¤„ç†ç­‰ç†è®ºæ¥è§£å†³ CT å›¾åƒé™å™ªé—®é¢˜ï¼Œç®—æ³•åŸç†è¿‡äºä¾èµ–äººå·¥è®¾è®¡éš¾ä»¥çµæ´»è°ƒæ•´ï¼Œå…¶æ€§èƒ½æœ‰è¾ƒå¤§çš„å±€é™æ€§ã€‚</p><h4 id="4-3-2-åŸºäºæ·±åº¦å­¦ä¹ çš„-LDCT-å›¾åƒåå¤„ç†æ–¹æ³•">4.3.2 åŸºäºæ·±åº¦å­¦ä¹ çš„ <strong>LDCT</strong> å›¾åƒåå¤„ç†æ–¹æ³•</h4><p>â€‹è¿‘å¹´ï¼Œç ”ç©¶è€…ä»¬å°è¯•é‡‡ç”¨æ·±åº¦å­¦ä¹ è§£å†³ LDCT å›¾åƒä¼ªå½±å™ªå£°æŠ‘åˆ¶é—®é¢˜ã€‚å­¦è€…ä»¬çš„ç ”ç©¶çƒ­ç‚¹ä¸»è¦é›†ä¸­åœ¨ç½‘ç»œæ¡†æ¶æ”¹è¿›ã€è®­ç»ƒç­–ç•¥æ”¹è¿›åŠåŠŸèƒ½æ¨¡å—è®¾è®¡ç­‰æ–¹é¢ã€‚</p><p><img src="https://picture.mulindya.com/CT_paper3.png" alt=""></p><p>â€‹éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨å·¥ä¸šç•ŒåŠå­¦æœ¯ç•Œçš„è“¬å‹ƒå‘å±•ï¼Œåœ¨ CT å›¾åƒå¤„ç†é¢†åŸŸä¹Ÿå¾—åˆ°äº†åˆæ­¥åº”ç”¨ã€‚æœ€æ—©ï¼ŒHarmeling ç­‰æå‡ºåˆ©ç”¨å¤šå±‚æ„ŸçŸ¥æœºç½‘ç»œå­¦ä¹ å«å™ªå£°ä¼ªå½±çš„å›¾åƒä¸é«˜è´¨é‡å›¾åƒä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå®ç°å¯¹è‡ªç„¶å›¾åƒè¿›è¡Œå™ªå£°æŠ‘åˆ¶ï¼Œå…¶å¤„ç†ç»“æœå‘ˆç°ä¸ BM3D ç®—æ³•ç›¸æ¥è¿‘çš„æ•ˆæœã€‚ä½å‰‚é‡ CT æˆåƒé¢†åŸŸä¸­ï¼ŒChen ç­‰æå‡ºå°†ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œç”¨äºä½å‰‚é‡ CT å›¾åƒåå¤„ç†è¿‡ç¨‹ä¸­æ¥é™ä½å›¾åƒå™ªå£°ï¼Œå–å¾—äº†ä¼˜å¼‚çš„æˆç»©ï¼›éšåè¯¥å›¢é˜Ÿä¸­ Yang ç­‰åœ¨æ­¤åŸºç¡€ä¸Šé‡‡ç”¨æ®‹å·®ç½‘ç»œæ¶æ„æ¥è¿›ä¸€æ­¥æé«˜ä½å‰‚é‡ CT å›¾åƒè´¨é‡ï¼›Wu ç­‰æå‡ºçº§è”å¤šä¸ªå·ç§¯ç¥ç»ç½‘ç»œæ¥æé«˜å›¾åƒè´¨é‡ï¼›Kang ç­‰æå‡ºåˆ©ç”¨æ–¹å‘æ³¢å˜æ¢å¯¹ä½å‰‚é‡ CT å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œå†è¾“å…¥åˆ° U-net è¿›è¡Œè®­ç»ƒçš„ç­–ç•¥ï¼Œå¯è¿›ä¸€æ­¥æé«˜ä½å‰‚é‡ CT å›¾åƒçš„é™å™ªæ•ˆæœï¼›Chen ç­‰ å°†è‡ªç¼–ç ç¥ç»ç½‘ç»œåº”ç”¨äºä½å‰‚é‡ CT å›¾åƒé™å™ªï¼Œæå‡ºæ®‹å·®ç¼–ç è§£ç ç½‘ç»œç»“æ„ï¼Œèƒ½åœ¨ä¿æŒå›¾åƒç»†èŠ‚çš„åŒæ—¶æœ‰æ•ˆé™ä½å™ªå£°ã€‚</p><p>â€‹Wolterink ç­‰å°†ç”Ÿæˆå¯¹æŠ—ç½‘ç»œåº”ç”¨äºä½å‰‚é‡å¿ƒè„ CT é™å™ªä¸­ï¼Œå‘ç°ç”Ÿæˆå¯¹æŠ—ç½‘ç»œèƒ½å¤Ÿäº§ç”Ÿä¸å¸¸è§„å‰‚é‡ CT çº¹ç†æ¥è¿‘çš„å›¾åƒï¼›Yang ç­‰åœ¨ç¥ç»ç½‘ç»œçš„ç›®æ ‡å‡½æ•°ä¸­ä½¿ç”¨æ„ŸçŸ¥æŸå¤±å‡½æ•°ï¼ˆPerceptual Lossï¼‰ï¼Œè€Œéä¼ ç»Ÿçš„å‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°ï¼Œå¹¶æ¯”è¾ƒç”¨å·ç§¯ç¥ç»ç½‘ç»œå’Œç”Ÿæˆå¯¹æŠ—ç½‘ç»œå¯¹ä½å‰‚é‡ CT å›¾åƒé™å™ªçš„æ•ˆæœï¼Œå‘ç°è¯¥æŸå¤±å‡½æ•°èƒ½ä¿ç•™äº†æ›´å¤šçš„å…³é”®ç»†èŠ‚ï¼Œå¯è¿›ä¸€æ­¥æå‡å¤„ç†å›¾åƒçš„å¯¹æ¯”åº¦ã€‚WÃ¼rfl ç­‰æå‡º FBP é‡å»ºç®—æ³•ä»¥åŠè¿­ä»£é‡å»ºç®—æ³•å¯ä»¥ç­‰ä»·åœ°ç”¨ç¥ç»ç½‘ç»œæ¥è¡¨ç¤ºï¼Œè¡¨æ˜ä½¿ç”¨ç¥ç»ç½‘ç»œæ¥å®ç°ä»æŠ•å½±æ•°æ®ç›´æ¥åˆ°å›¾åƒçš„å¯è¡Œæ€§ã€‚Han ç­‰æå‡ºäº†ä¸€ç§åŸºäºæŒç»­æ€§åŒæºåˆ†æçš„æ®‹å·®å­¦ä¹ æ–¹æ³•æ¥å¤„ç†å‹ç¼©æ„ŸçŸ¥çš„ CT é‡å»ºå›¾åƒã€‚Yin ç­‰é€šè¿‡è®¾è®¡ä¸åŒçš„ç¥ç»ç½‘ç»œä»æŠ•å½±åŸŸå’Œå›¾åƒåŸŸä¸¤æ–¹é¢åŒæ—¶è¿›è¡Œå¤„ç†ï¼Œèƒ½æå¤§ç¨‹åº¦åœ°æŠ‘åˆ¶ä½å‰‚é‡ CT ä¸­çš„å™ªå£°ï¼Œå¹¶ä¿ç•™æ›´å¤šçš„è§£å‰–ç»†èŠ‚ä¿¡æ¯ã€‚ç ”ç©¶è¡¨æ˜ï¼ŒCT å›¾åƒä¸­çš„å™ªå£°å’Œä¼ªå½±åˆ†å¸ƒæƒ…å†µè¾ƒä¸ºå¤æ‚ï¼Œä¸åŒè®¾å¤‡ä¹‹é—´çš„å·®å¼‚è¾ƒå¤§ï¼Œå¯¹å…¶è¿›è¡Œç²¾ç¡®çš„åˆ†æå’Œå»ºæ¨¡å…·æœ‰ä¸€å®šçš„å›°éš¾ã€‚å› æ­¤ï¼Œä» CT å›¾åƒå™ªå£°ã€ä¼ªå½±ã€æ­£å¸¸ç»“æ„ä»¥åŠç—…ç¶åŒºåŸŸç­‰è§’åº¦å‡ºå‘ï¼Œæ¥è®¾è®¡ç›¸åº”çš„å¤„ç†ç½‘ç»œä»ç„¶å°†æ˜¯æ·±åº¦å­¦ä¹ åœ¨ä½å‰‚é‡ CT æˆåƒé¢†åŸŸçš„ç ”ç©¶é‡ç‚¹ã€‚</p><h3 id="4-4-æ€»ç»“">4.4 æ€»ç»“</h3><p><img src="https://picture.mulindya.com/CT_paper4.png" alt=""></p><p>â€‹é’ˆå¯¹ä½å‰‚é‡ CT æˆåƒæ‰€é¢ä¸´çš„å›¾åƒè´¨é‡ä¸‹é™é—®é¢˜ï¼Œç›®å‰åŸºç¡€æ€§çš„æˆåƒç®—æ³•ç ”ç©¶å·¥ä½œä¸»è¦åŒ…æ‹¬æŠ•å½±æ•°æ®é¢„å¤„ç†ã€é‡å»ºç®—æ³•æ”¹è¿›å’Œåå¤„ç†ä¸‰ä¸ªæ–¹é¢ã€‚</p><p>â€‹å…¶ä¸­æŠ•å½±åŸŸç›¸å…³æ–¹æ³•ä¸å›¾åƒé‡å»ºæ˜¯ç›¸äº’ç‹¬ç«‹è¿‡ç¨‹ï¼Œæœ‰åˆ©äºå¹¶è¡ŒåŒ–çš„é›†æˆï¼Œä½†æŠ•å½±ç©ºé—´æ•°æ®å¤„ç†æ˜“å¯¼è‡´æ•°æ®è¿‡æ ¡æ­£çš„ç°è±¡ï¼›åŸºäºç»Ÿè®¡è¿­ä»£ç®—æ³•è€ƒè™‘äº†æŠ•å½±æ•°æ®çš„ç»Ÿè®¡ç‰¹æ€§å’Œ CT å›¾åƒç‰¹å®šçš„å…ˆéªŒä¿¡æ¯ï¼Œä½†ç®—æ³•å¤æ‚åº¦é«˜ã€è¶…å‚æ•°å¤šã€å…ˆéªŒä¿¡æ¯ä¸ç¨³å®šæ€§ã€è®¡ç®—æˆæœ¬å¤§ç­‰ï¼Œéš¾ä»¥æ»¡è¶³å®é™…ä¸´åºŠéœ€æ±‚ï¼›</p><p>â€‹å›¾åƒåå¤„ç†ç®—æ³•å¤„ç†é€Ÿåº¦å¿«ï¼Œå¯ç§»æ¤æ€§è¾ƒå¼ºï¼Œä½†å¤„ç†èƒ½åŠ›æœ‰é™ã€‚ç›®å‰ï¼Œç¨€ç–å­¦ä¹ å¤„ç†æ¨¡å‹æ±‚è§£æ–¹æ³•è™½ç„¶èƒ½å¤Ÿæä¾›æ¯”ä¼ ç»Ÿé‡å»ºç®—æ³•æˆ–å›¾åƒå¤„ç†æ–¹æ³•æ›´å¥½çš„å™ªå£°æŠ‘åˆ¶æ•ˆæœï¼Œä½†å¯¹å¼ºåº¦è¾ƒå¤§çš„å™ªå£°æˆ–ä¼ªå½±æŠ‘åˆ¶å¾€å¾€æ•ˆæœæ¬ ä½³ï¼ˆå¼ºåº¦è¾ƒå¤§çš„å™ªå£°æˆ–ä¼ªå½±ç‰¹å¾å¾€å¾€å…³è”æ¯”è¾ƒå¤§çš„ç³»æ•°ï¼Œéš¾ä»¥åœ¨ç¨€ç–ç³»æ•°æ±‚è§£ä¸­è¢«æŠ‘åˆ¶ï¼‰ã€‚å¦å¤–ï¼Œå¯¹äºåŸå­æ•°é‡è¾ƒå¤šçš„å­—å…¸æƒ…å†µä¸‹æ±‚è§£å­—å…¸ä¸­åŸå­ç¨€ç–ç³»æ•°æ—¶è®¡ç®—å¤æ‚åº¦è¾ƒå¤§ã€‚åŒæ—¶å­—å…¸è¡¨ç¤ºä¸­å¯¹å›¾åƒç©ºé—´åˆ†è¾¨ç‡çš„å½±å“ä»ç„¶æœ‰å¾…æ›´æ·±å…¥çš„ç ”ç©¶ã€‚</p><p>â€‹æ·±åº¦å­¦ä¹ çš„ä¸»è¦ç¼ºç‚¹æ˜¯å…¶å¤„ç†ä¸é€æ˜çš„â€œé»‘ç›’å­â€ç‰¹æ€§ï¼Œä¸€èˆ¬é€šè¿‡åå¤ç»éªŒæ€§çš„â€œè¯•é”™â€å’Œâ€œè¯•å¯¹â€æ¥è®¾è®¡æ­å»ºç½‘ç»œï¼Œåœ¨ä½å‰‚é‡ CT æˆåƒä¸­çš„åº”ç”¨è¿˜ä¸»è¦é›†ä¸­åœ¨å›¾åƒåå¤„ç†æˆ–è€…ä»¥å…ˆéªŒç‰¹å¾å½¢å¼å¼•å…¥è¿­ä»£é‡å»ºè¿™ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶åœ¨å›¾åƒåå¤„ç†ä¸­çš„æ•ˆæœå—åˆ¶äºå·²ç»ä¸¥é‡é€€åŒ–çš„ä½å‰‚é‡ CT å›¾åƒï¼Œè€Œåœ¨è¿­ä»£é‡å»ºä¸­çš„åº”ç”¨å—åˆ°è¿­ä»£é‡å»ºç±»ç®—æ³•æ‰€éœ€çš„è®¡ç®—å¤æ‚åº¦çš„åˆ¶çº¦ã€‚éšç€è®¡ç®—èƒ½åŠ›çš„æå‡å’Œå­¦ä¹ æ¨¡å‹ç†è®ºçš„å®Œå–„ï¼ŒåŸºäºç‰¹å¾å­¦ä¹ ç±»çš„é«˜è´¨é‡ CT æˆåƒç®—æ³•ç ”ç©¶å¿…å°†æˆä¸ºæœ¬é¢†åŸŸç ”ç©¶çš„çƒ­ç‚¹æ–¹å‘ã€‚è¿„ä»Šä¸ºæ­¢ï¼Œè®¸å¤šç ”ç©¶å›¢é˜Ÿå’Œ CT ç ”å‘åˆ¶é€ å•†å·²ç»åœ¨æ·±åº¦ç‰¹å¾å­¦ä¹ çš„æˆåƒæ–¹é¢å¼€å±•è¿›è¡Œäº†åˆæ­¥çš„ç ”ç©¶å’Œæ¢ç´¢ï¼ŒéªŒè¯äº†å…¶åœ¨ä¸´åºŠ CT æˆåƒä¸­çš„æ½œåŠ›å’Œä»·å€¼ã€‚</p><h2 id="äº”ï¼Œå…·ä½“é˜è¿°æ–¹æ³•">äº”ï¼Œå…·ä½“é˜è¿°æ–¹æ³•</h2><h3 id="5-1-èƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•">5.1 èƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•</h3><p>æ­¤ä¸º2022 å¹´ 2 æœˆæ­¦æ±‰å¸‚è‚ºç§‘åŒ»é™¢æ”¾å°„ç§‘å‘è¡¨çš„ä¸€ç¯‡æ–‡ç« ã€‚</p><ul><li><p>ç›®çš„ï¼šæ¢è®¨åŸºäºèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½å‰‚é‡CTæ£€æŸ¥ä¸­çš„åº”ç”¨ã€‚</p></li><li><p>æ–¹æ³•ï¼šé€‰å–2019å¹´4æœˆè‡³6æœˆæ­¦æ±‰å¸‚è‚ºç§‘åŒ»é™¢ç¡®è¯Šçš„70ä¾‹ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½œä¸ºç ”ç©¶å¯¹è±¡ã€‚åˆæ£€é‡‡ç”¨å¸¸è§„å‰‚é‡ç»„ï¼šç®¡ç”µå‹110 kVï¼Œå‚è€ƒç®¡ç”µæµ52 mAsï¼Œæ»¤æ³¢åæŠ•å½±ï¼ˆFBPï¼‰é‡å»ºå›¾åƒï¼›å¤æ£€é‡‡ç”¨ä½å‰‚é‡ç»„ï¼ˆèƒ½è°±çº¯åŒ–ï¼‰ï¼šç®¡ç”µå‹Sn 110 kVï¼Œå‚è€ƒç®¡ç”µæµ73 mAsï¼Œæ­£å¼¦å›¾è¿­ä»£é‡å»ºï¼ˆSAFIREï¼‰ã€‚æ¯”è¾ƒä¸¤ç»„å›¾åƒä¸»è§‚è¯„åˆ†ã€å‡ä¸»åŠ¨è„‰CTå€¼ã€å›¾åƒå™ªå£°ã€SNRåŠè¾å°„å‰‚é‡å·®å¼‚ã€‚</p></li><li><p>ç»“æœï¼šä¸¤ç»„å›¾åƒä¸»è§‚è¯„åˆ†ç›¸æ¯”æ— å·®å¼‚ï¼Œæ»¡è¶³ä¸´åºŠè¯Šæ–­è¦æ±‚ã€‚ä¸¤ç»„å‡ä¸»åŠ¨è„‰CTå€¼æ— å·®å¼‚ï¼›ä½å‰‚é‡ç»„å›¾åƒSNRä½äºå¸¸è§„å‰‚é‡ç»„ã€‚ä½å‰‚é‡ç»„EDï¼ˆ0.36Â±0.15ï¼‰mSvä¸å¸¸è§„å‰‚é‡ç»„ï¼ˆ2.35Â±0.73ï¼‰mSvç›¸æ¯”é™ä½çº¦84.7ï¼…ã€‚</p></li><li><p><strong>ç»“è®ºï¼šèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…æ£€æŸ¥ä¸­èƒ½å¤Ÿæ˜¾è‘—é™ä½æ‚£è€…æ‰€å—è¾å°„å‰‚é‡ï¼ŒåŒæ—¶å›¾åƒè´¨é‡ä¹Ÿèƒ½æ»¡è¶³ä¸´åºŠè¯Šæ–­è¦æ±‚ã€‚</strong></p></li></ul><p>â€‹    æ–‡çŒ®æŠ¥é“è¯å®é‡‡ç”¨<strong>è¿­ä»£é‡å»ºæŠ€æœ¯</strong>åœ¨<strong>ä½å‰‚é‡ CT æ‰«æ</strong>æ—¶å¯æ˜¾è‘—é™ä½å›¾åƒå™ªå£°ï¼Œæé«˜å›¾åƒè´¨é‡ã€‚ä»¥å¾€å¤§å¤šæ•°åŒ»é™¢ç ”ç©¶ä½å‰‚é‡ CT æ‰«æé‡‡ç”¨<strong>é™ä½ç®¡ç”µå‹æˆ–ç®¡ç”µæµæŠ€æœ¯</strong>çš„æ–¹æ³•ï¼Œè€Œå¯¹äºé‡‡ç”¨<strong>èƒ½è°±çº¯åŒ–æŠ€æœ¯</strong>çš„æ–¹æ³•æ¥ç ”ç©¶ä½å‰‚é‡ CT æ‰«æå´é²œæœ‰æŠ¥é“ã€‚</p><p>â€‹    ä»¥å¾€å¤§éƒ¨åˆ†ç ”ç©¶å­¦è€…é‡‡ç”¨é™ä½ç®¡ç”µå‹æˆ–ç®¡ç”µæµçš„æ–¹æ³•æ¥è¾¾åˆ°é™ä½è¾å°„å‰‚é‡çš„ç›®çš„ï¼Œè€Œæœ¬ç ”ç©¶ä½å‰‚é‡ç»„é‡‡ç”¨è¥¿é—¨å­å…¬å¸ç‹¬åˆ›ç ”åˆ¶çš„èƒ½è°±çº¯åŒ–æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯åŸç†æ˜¯ç”¨ç‰¹æ®Šé”¡æ»¤è¿‡æ¿æ”¾ç½®äº X çº¿çƒç®¡å‰æ–¹ï¼Œå°† X çº¿çš„è¾å°„èƒ½é‡é¢‘è°±å›¾ä¸­ä½èƒ½é‡éƒ¨åˆ†çš„æˆªæ­¢èƒ½é‡æé«˜ï¼Œä»è€Œä½¿ X çº¿èƒ½è°±å˜çª„ï¼Œèƒ½é‡å¢åŠ ï¼Œä½¿ä¹‹æ›´æ¥è¿‘ CT æˆåƒç†è®ºè¦æ±‚çš„å…‰å­èƒ½é‡çš„å‡ä¸€æ€§ï¼Œæœ‰æ•ˆæé«˜ X çº¿çš„åˆ©ç”¨ç‡ï¼Œä»è€Œå‡å°‘æ‚£è€…æ‰€å—è¾å°„å‰‚é‡ã€‚</p><p>â€‹    ä½å‰‚é‡ CT æ‰«æè™½æ˜¾è‘—é™ä½æ‚£è€…æ‰€å—è¾å°„å‰‚é‡ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ å›¾åƒå™ªå£°ï¼Œå›¾åƒåˆ†è¾¨ç‡ä¸‹é™ï¼Œå¯¼è‡´å›¾åƒè´¨é‡æ— æ³•è¾¾åˆ°ä¸´åºŠè¯Šæ–­è¦æ±‚ã€‚ä¼ ç»Ÿçš„ FBP æ˜¯ç›®å‰ä¸´åºŠåº”ç”¨è¾ƒä¸ºå¹¿æ³›çš„ä¸€ç§é‡å»ºç®—æ³•ï¼Œå®ƒå¯¹é‡å»ºæ•°æ®è¦æ±‚è¾ƒé«˜ï¼Œé€šè¿‡å¯¹æ¯ç»„æŠ•å½±å€¼è¿›è¡Œæ ¡å‡†ã€æ»¤æ³¢ã€åŠ æƒåŠåæŠ•å½±ï¼Œä½†æ˜¯å½“è¾å°„å‰‚é‡é™ä½æ—¶ï¼Œäººä½“æˆåƒæ‰€éœ€çš„ X çº¿å…‰å­æ•°ç›®ä¼šå‡å°‘ï¼Œå›¾åƒå™ªå£°å°±ä¼šç›¸åº”åœ°å¢åŠ ã€‚<strong>å› æ­¤ä½å‰‚é‡æ‰«æé‡‡ç”¨ FBP é‡å»ºç®—æ³•æ¥ä¿è¯å›¾åƒè´¨é‡çš„æ–¹æ³•æ˜¯ä¸å¯è¡Œçš„ã€‚</strong></p><p>â€‹     è¿‘å¹´ï¼Œè¿­ä»£é‡å»ºç®—æ³•æ‰€å…·æœ‰é™ä½å™ªå£°å’Œä¿è¯å›¾åƒè´¨é‡çš„ç‰¹ç‚¹è€Œé€æ¸è¢«ä¸´åºŠåŠæ”¾å°„ä¸“å®¶è®¤å¯ã€‚æœ‰å…³ç ”ç©¶è¡¨æ˜åœ¨å„¿å†…ç§‘æ‚£å„¿èƒ¸éƒ¨ CT æ£€æŸ¥ä¸­åº”ç”¨ ASIR æŠ€æœ¯å¯åœ¨ç¡®ä¿å›¾åƒè´¨é‡çš„åŒæ—¶é™ä½è¾å°„å‰‚é‡ï¼›256 å±‚ iCTIMR é‡å»ºæŠ€æœ¯åœ¨è‚ºåŠ¨è„‰ CTA æ£€æŸ¥ä¸­å›¾åƒè´¨é‡èƒ½å¤Ÿæ»¡è¶³ä¸´åºŠè¯Šæ–­éœ€æ±‚ï¼ŒåŒæ—¶æœ‰æ•ˆåœ°é™ä½æ‚£è€…è¾å°„å‰‚é‡ã€‚</p><p>â€‹    æœ¬ç ”ç©¶é‡‡ç”¨æ­£å¼¦å›¾ç¡®å®šè¿­ä»£é‡å»ºç®—æ³•(sinogram affirmed iterative reconstructionï¼ŒSAFIRE)ï¼ŒSAFIREæ˜¯è¿­ä»£é‡å»ºç®—æ³•ä¹‹ä¸€ï¼Œæ¯”ä¼ ç»Ÿæ»¤æ³¢åæŠ•å½±ç®—æ³•(FBP)æœ‰æ›´ä¼˜çš„é™å™ªæ•ˆæœï¼Œå¯¹ä½kVæ‰«æçš„å›¾åƒè¿›è¡Œé‡å»ºï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä½¿å™ªå£°é™ä½ï¼Œä»è€Œä¿è¯å›¾åƒè´¨é‡ã€‚å®ƒå±äºè¿‘å¹´æ¥å‡ºç°çš„ä¸€ç§æ–°å‹çš„åŸºäºåŸå§‹æ•°æ®çš„é‡å»ºç®—æ³•ï¼Œè¯¥ç®—æ³•å¯ä»¥å°†åŸå§‹æ•°æ®ä¸­çš„å™ªå£°æŠ•å°„åˆ°å›¾åƒä¸­ï¼Œåˆ©ç”¨åå¤æ’å…¥æ–¹æ³•å»é™¤å™ªå£°ï¼Œé€šè¿‡å¤šæ¬¡è¿­ä»£æ¥å»é™¤ä¼ªå½±ã€å‡å°‘å™ªå£°ï¼Œæé«˜å›¾åƒåˆ†è¾¨ç‡ã€‚</p><h3 id="5-2-è‡ªé€‚åº”ç»Ÿè®¡è¿­ä»£é‡å»ºæŠ€æœ¯åœ¨å„¿å†…ç§‘æ‚£å„¿èƒ¸éƒ¨CTæ£€æŸ¥ä¸­çš„åº”ç”¨">5.2 è‡ªé€‚åº”ç»Ÿè®¡è¿­ä»£é‡å»ºæŠ€æœ¯åœ¨å„¿å†…ç§‘æ‚£å„¿èƒ¸éƒ¨CTæ£€æŸ¥ä¸­çš„åº”ç”¨</h3><p>è‡ªé€‚åº”ç»Ÿè®¡è¿­ä»£é‡å»º(ASIR)æŠ€æœ¯æ˜¯åŸºäºå›¾åƒæ•°æ®ç©ºé—´ä¸æŠ•å½±æ•°æ®ç©ºé—´çš„ä¸€ç§æ–°å‹CTé‡å»ºç®—æ³•ï¼Œä¸ä¼ ç»Ÿçš„æ»¤æ³¢åæŠ•å½±(FBP)æŠ€æœ¯æ¯”è¾ƒï¼Œå¯åœ¨ä¿è¯CTé‡å»ºåå›¾åƒè´¨é‡åŠä¸å½±å“ä¸´åºŠè¯Šæ–­çš„å‰æä¸‹ï¼Œå¤§å¹…é™ä½è¾å°„å‰‚é‡ã€‚</p><p>CTæ£€æŸ¥æ–¹æ³•ï¼š  æ‚£å„¿å–ä»°å§ä½ï¼Œå¹³é™å‘¼å¸ä¸‹è¿›è¡Œæ‰«æï¼Œæ‰«æèŒƒå›´è‡ªèƒ¸å»“å…¥å£è‡³è†ˆè‚Œæ°´å¹³ã€‚å¯¹äºæ— æ³•é…åˆçš„ä½é¾„æ‚£å„¿ï¼Œæ£€æŸ¥å‰ç»™äºˆ10%æ°´åˆæ°¯é†›(0.5mL/kg)å£æœã€‚ç ”ç©¶ç»„é‡‡ç”¨ç¾å›½GEå…¬å¸å®çŸ³èƒ½è°±CT(Discovery  CT750HD)æ‰«æä»ªï¼Œæ‰«æå‚æ•°ï¼šç®¡ç”µå‹120kVï¼Œèºè·1.375:1ï¼Œè½¬é€Ÿ0.8s/rï¼Œè‡ªåŠ¨ç®¡ç”µæµè°ƒèŠ‚æŠ€æœ¯(ATCM)è®¾ç½®ç®¡ç”µæµ10ï½350mAã€‚æ ¹æ®æ‚£å„¿å¹´é¾„è®¾ç½®å™ªå£°æŒ‡æ•°(NI)ï¼Œ1ï½12ä¸ªæœˆNIå€¼11ï¼Œ1ï½3å²NIå€¼13ï¼Œ4ï½6å²NIå€¼15ã€‚æ‰€å¾—åŸå§‹æ•°æ®é€šè¿‡30%  ASIRä¸70% FBPæ··åˆé‡å»ºå›¾åƒã€‚å¯¹ç…§ç»„é‡‡ç”¨ç¾å›½GEå…¬å¸Lightspeed  VCTæ‰«æä»ªï¼Œæ‰«æèŒƒå›´ã€å‚æ•°åŒç ”ç©¶ç»„ï¼Œå™ªå£°æŒ‡æ•°8HUã€‚æ‰€å¾—åŸå§‹æ•°æ®é‡‡ç”¨FBPæŠ€æœ¯é‡å»ºå›¾åƒã€‚</p><h3 id="5-3-åŸºäºç‰¹å¾å­¦ä¹ çš„ä½å‰‚é‡CTæˆåƒç®—æ³•">5.3 åŸºäºç‰¹å¾å­¦ä¹ çš„ä½å‰‚é‡CTæˆåƒç®—æ³•</h3><p>â€‹åœ¨å½±åƒå¤§æ•°æ®ç¯å¢ƒä¸‹ï¼ŒåŸºäºç‰¹å¾å­¦ä¹ æ–¹æ³•çš„ä½å‰‚é‡ CT æˆåƒæœ‰ç€æ›´å¹¿é˜”çš„å‘å±•ç©ºé—´ã€‚åŸºäºç‰¹å¾å­¦ä¹ çš„ä½å‰‚é‡ CT æˆåƒç®—æ³•å¯å¤§è‡´åˆ†ä¸ºå­¦ä¹ æµ…å±‚ç‰¹å¾çš„ç¨€ç–å­¦ä¹ ç®—æ³•å’Œå­¦ä¹ æ·±å±‚ç‰¹å¾çš„æ·±åº¦å­¦ä¹ ç®—æ³•ã€‚ç¨€ç–å­¦ä¹ åœ¨ç‰¹å¾è¯†åˆ«ã€çº¹ç†åˆ†ç±»å’Œå›¾åƒå»å™ªç­‰é¢†åŸŸä¸­å—åˆ°å¹¿æ³›å…³æ³¨ï¼Œè¯¥æ–¹æ³•æ˜¯é€šè¿‡ä¸€å®šçš„æ–¹å¼ä»æ ·æœ¬æ•°æ®ä¸­æ„é€ çš„è¿‡å®Œå¤‡å­—å…¸ï¼Œå¹¶åˆ©ç”¨å­—å…¸ä¸­çš„ç‰¹å¾åŸå­ï¼Œå¯¹å¾…è¡¨ç¤ºæ•°æ®è¿›è¡Œç¨€ç–ç¼–ç ã€‚è€Œæ·±åº¦å­¦ä¹ çš„æ–¹æ³•æ˜¯è®¾è®¡ä¸€ä¸ªå¤šå±‚çš„æ·±åº¦å·ç§¯ç½‘ç»œæ¥å®ç°å¯¹æ•°æ®çš„é«˜æ•ˆä¿¡æ¯ç‰¹å¾æŠ½å–ï¼Œåˆ†æå’Œå¤„ç†ã€‚é€šè¿‡å­¦ä¹ è®­ç»ƒå»ºç«‹æ ·æœ¬æ•°æ®ä¸æ ‡ç­¾æ•°æ®ç‰¹å¾é›†çš„æ˜ å°„å…³ç³»ã€‚ç¨€ç–å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„æ–¹æ³•åœ¨ä½å‰‚é‡ CT æˆåƒæ–¹é¢éƒ½å¾—åˆ°äº†ä¸€å®šçš„åº”ç”¨ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><p>[1] å§œä¸€, ç”°è‘µ, æ²™æ™‹ç’, ç­‰. åŸºäºèƒ½è°±çº¯åŒ–ç»“åˆè¿­ä»£é‡å»ºç®—æ³•åœ¨ç»§å‘æ€§è‚ºç»“æ ¸æ‚£è€…ä½å‰‚é‡CTæ£€æŸ¥ä¸­çš„åº”ç”¨[J]. CTç†è®ºä¸åº”ç”¨ç ”ç©¶, 2022, 31(1): 95-101. DOI: 10.15953/j.1004-4140.2022.31.01.11</p><p>[2] åˆ˜è¿›, èµµå€©éš†, å°¹ç›¸ç‘, é¡¾äº‘æ³¢, åº·å­£æ§, é™ˆé˜³. åŸºäºç‰¹å¾å­¦ä¹ çš„ä½å‰‚é‡CTæˆåƒç®—æ³•ç ”ç©¶è¿›å±•[J]. CTç†è®ºä¸åº”ç”¨ç ”ç©¶, 2019, 28(3): 393-406. doi: 10.15953/j.1004-4140.2019.28.03.14</p><p>[3] é©¬æ¡‚å¨œ,æ±Ÿå¥‡ç¦,éŸ©è,ç­‰. SAFIREé‡å»ºè”åˆCARE kVæŠ€æœ¯åœ¨ä¸»åŠ¨è„‰CTä½å‰‚é‡æˆåƒä¸­çš„ä¸´åºŠåº”ç”¨[J]. ä¸´åºŠæ”¾å°„å­¦æ‚å¿—,2018,37(10):1755-1759.</p><p>[4] èƒ¡å…‰ç‰,ç«¥å’Œå¹³,å¶æ°¸ç¿,ç­‰. è‡ªé€‚åº”ç»Ÿè®¡è¿­ä»£é‡å»ºæŠ€æœ¯åœ¨å„¿å†…ç§‘æ‚£å„¿èƒ¸éƒ¨CTæ£€æŸ¥ä¸­çš„åº”ç”¨[J]. ä¸­å›½CTå’ŒMRIæ‚å¿—,2020(11). DOI:10.3969/j.issn.1672-5131.2020.11.019.</p><p>[5] åˆ˜è¿›,èµµå€©éš†,å°¹ç›¸ç‘,ç­‰. åŸºäºç‰¹å¾å­¦ä¹ çš„ä½å‰‚é‡CTæˆåƒç®—æ³•ç ”ç©¶è¿›å±•[J]. CTç†è®ºä¸åº”ç”¨ç ”ç©¶,2019,28(3):393-406. DOI:10.15953/j.1004-4140.2019.28.03.14.</p><p>[6] éŸ©æ³½èŠ³, ä¸Šå®˜å®, å¼ é›„, ç­‰. åŸºäºæ·±åº¦å­¦ä¹ çš„ä½å‰‚é‡CTæˆåƒç®—æ³•ç ”ç©¶è¿›å±•[J]. CTç†è®ºä¸åº”ç”¨ç ”ç©¶, 2022, 31(1): 117-134. DOI: 10.15953/j.1004-4140.2022.31.01.14</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>CT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>CT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer68-1 äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</title>
    <link href="/2022/02/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer68-1/"/>
    <url>/2022/02/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer68-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€</p><p>ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘:  root = [6,2,8,0,4,7,9,null,null,3,5]</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">    <span class="hljs-number">6</span><br>  /   <span class="hljs-string">\</span> <br> <span class="hljs-number">2</span>     <span class="hljs-number">8</span><br>/ <span class="hljs-string">\</span>   / <span class="hljs-string">\</span><br><span class="hljs-number">0</span>  <span class="hljs-number">4</span>  <span class="hljs-number">7</span>  <span class="hljs-number">9</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥: <span class="hljs-attr">root</span> = [<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">p</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">q</span> = <span class="hljs-number">8</span><br>è¾“å‡º: <span class="hljs-number">6</span> <br>è§£é‡Š: èŠ‚ç‚¹ <span class="hljs-number">2</span> å’ŒèŠ‚ç‚¹ <span class="hljs-number">8</span> çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ <span class="hljs-number">6</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥: <span class="hljs-attr">root</span> = [<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">p</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">q</span> = <span class="hljs-number">4</span><br>è¾“å‡º: <span class="hljs-number">2</span><br>è§£é‡Š: èŠ‚ç‚¹ <span class="hljs-number">2</span> å’ŒèŠ‚ç‚¹ <span class="hljs-number">4</span> çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ <span class="hljs-number">2</span>, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚</li><li>pã€q ä¸ºä¸åŒèŠ‚ç‚¹ä¸”å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æœç´¢æ ‘ä¸­ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¿™é‡Œæ˜¯äºŒå‰æœç´¢æ ‘ï¼Œåªéœ€è¦è¿™ä¸¤ä¸ªèŠ‚ç‚¹åœ¨å·¦å³å³å¯ï¼Œå¦‚æœä¸¤ä¸ªåœ¨å·¦å­æ ‘å°±æœç´¢å·¦å­æ ‘ï¼Œå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åœ¨å³å­æ ‘å°±æœç´¢å³å­æ ‘ã€‚åªç”¨æ ¹æ®å¤§å°æ¯”è¾ƒå³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å®šä¹‰é—­åŒ…å‡½æ•°æ¥æŸ¥æ‰¾rootã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        x,y = p.val,q.val<br>        <span class="hljs-keyword">if</span> x&gt;y:<br>            x,y = y,x<br>        self.parent = <span class="hljs-number">0</span><br>        self.find = <span class="hljs-literal">False</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root <span class="hljs-keyword">or</span> self.find:<span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span> (root.val==x <span class="hljs-keyword">or</span> root.val==y) <span class="hljs-keyword">or</span> (x&lt;root.val <span class="hljs-keyword">and</span> y&gt;root.val):<br>                self.parent = root<br>                self.find = <span class="hljs-literal">True</span><br>                <span class="hljs-keyword">return</span> <br>            <span class="hljs-built_in">print</span>()<br>            <span class="hljs-keyword">if</span> x&gt;root.val:func(root.right)<br>            <span class="hljs-keyword">else</span>:func(root.left)<br>        func(root)<br>        <span class="hljs-keyword">return</span> self.parent<br></code></pre></td></tr></tbody></table></figure><ul><li>ç›´æ¥ä½¿ç”¨é€’å½’</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        <span class="hljs-keyword">if</span> root.val &lt; p.val <span class="hljs-keyword">and</span> root.val &lt; q.val:<br>            <span class="hljs-keyword">return</span> self.lowestCommonAncestor(root.right, p, q)<br>        <span class="hljs-keyword">if</span> root.val &gt; p.val <span class="hljs-keyword">and</span> root.val &gt; q.val:<br>            <span class="hljs-keyword">return</span> self.lowestCommonAncestor(root.left, p, q)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨å¾ªç¯å‡½æ•°</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">self, root: <span class="hljs-string">'TreeNode'</span>, p: <span class="hljs-string">'TreeNode'</span>, q: <span class="hljs-string">'TreeNode'</span></span>) -&gt; 'TreeNode':</span><br>        <span class="hljs-keyword">if</span> p.val &gt; q.val: p, q = q, p <span class="hljs-comment"># ä¿è¯ p.val &lt; q.val</span><br>        <span class="hljs-keyword">while</span> root:<br>            <span class="hljs-keyword">if</span> root.val &lt; p.val: <span class="hljs-comment"># p,q éƒ½åœ¨ root çš„å³å­æ ‘ä¸­</span><br>                root = root.right <span class="hljs-comment"># éå†è‡³å³å­èŠ‚ç‚¹</span><br>            <span class="hljs-keyword">elif</span> root.val &gt; q.val: <span class="hljs-comment"># p,q éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸­</span><br>                root = root.left <span class="hljs-comment"># éå†è‡³å·¦å­èŠ‚ç‚¹</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer54 äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹</title>
    <link href="/2022/02/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer54/"/>
    <url>/2022/02/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer54/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­ç¬¬ <code>k</code> å¤§çš„èŠ‚ç‚¹çš„å€¼ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">è¾“å…¥: root = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">2</span>], k = <span class="hljs-number">1</span><br>   <span class="hljs-number">3</span><br>  / <span class="hljs-string">\</span><br> <span class="hljs-number">1</span>   <span class="hljs-number">4</span><br>  <span class="hljs-string">\</span><br>   <span class="hljs-number">2</span><br>è¾“å‡º: <span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livescript">è¾“å…¥: root = [<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">1</span>], k = <span class="hljs-number">3</span><br>       <span class="hljs-number">5</span><br>      / <span class="hljs-string">\</span><br>     <span class="hljs-number">3</span>   <span class="hljs-number">6</span><br>    / <span class="hljs-string">\</span><br>   <span class="hljs-number">2</span>   <span class="hljs-number">4</span><br>  /<br> <span class="hljs-number">1</span><br>è¾“å‡º: <span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 â‰¤ k â‰¤ äºŒå‰æœç´¢æ ‘å…ƒç´ ä¸ªæ•°</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æŒ‰ç…§ä¸­åºéå†å¯ä»¥å¾—åˆ°äºŒå‰æœç´¢æ ‘çš„é¡ºåºçš„åºåˆ—ï¼Œè¿™é‡Œç”¨å…¨å±€éå†resæ¥è®°å½•åºå·ï¼Œå› ä¸ºè¿™é‡Œæ˜¯ç¬¬Kå¤§å› æ­¤æ˜¯å…ˆéå†å³å­æ ‘å†éå†å·¦å­æ ‘ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">kthLargest</span>(<span class="hljs-params">self, root: TreeNode, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        self.res = <span class="hljs-number">0</span><br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">funcMid</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root <span class="hljs-keyword">or</span> self.res&gt;=k :<span class="hljs-keyword">return</span><br>            funcMid(root.right)<br>            self.res += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> self.res==k:self.result = root.val<br>            funcMid(root.left)<br>        <span class="hljs-comment">#ä¸­åºéå† å¾—åˆ°æœ‰é¡ºåºçš„åºåˆ—</span><br>        <br>        self.result = <span class="hljs-number">0</span><br>        funcMid(root)<br>        <span class="hljs-keyword">return</span> self.result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬å…­ç« ç¬”è®° Tuning</title>
    <link href="/2022/02/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML6/"/>
    <url>/2022/02/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML6/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚è¿™ä¸€ç« çš„å†…å®¹ä¸»è¦æ˜¯å¯¹å»ºç«‹çš„æ¨¡å‹è¿›è¡ŒTuningï¼ŒåŒ…æ‹¬æ¨¡å‹è°ƒå‚ï¼Œè¶…å‚æ•°ä¼˜åŒ–ï¼Œç½‘ç»œæ¶æ„æœç´¢ã€‚</p></blockquote><h1>ç¬¬å…­ç« </h1><h2 id="6-1-æ¨¡å‹è°ƒå‚-ğŸ¾">6.1 æ¨¡å‹è°ƒå‚ ğŸ¾</h2><h3 id="6-1-1-Manual-Hyperparameter-Tuning">6.1.1 Manual Hyperparameter Tuning</h3><ul><li><p>Start with a good baseline, e.g. default settings in high-quality toolkits, values reported in papers</p></li><li><p>Tune a value, retrain the model to see the changes</p></li><li><p>Repeat multiple times to gain insights about</p><p>â€¢ Which hyperparameters are important å“ªäº›å‚æ•°æ¯”è¾ƒé‡è¦</p><p>â€¢ How sensitive the model to hyperparameters æ•æ„Ÿåº¦</p><p>â€¢ What are the good ranges  æ‰¾å¯»å¥½çš„åŒºé—´</p></li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¼šä»ä¸€ä¸ªå¥½çš„åŸºçº¿å¼€å§‹ï¼Œæ‰¾å¯»å·¥å…·åŒ…æœ‰ä¸€ä¸ªå¤§è‡´çš„å‚æ•°ï¼Œæˆ–è€…å‚è€ƒç›¸å…³è®ºæ–‡ä¸­ï¼Œç›¸å…³æ•°æ®é›†ä¸­çš„å‚æ•°è®¾ç½®ï¼Œå†åœ¨éªŒè¯é›†ä¸Šå¯¹æ¯”ç»“æœã€‚</p><p>å½“SGDè°ƒå‚è°ƒçš„æ¯”è¾ƒå¥½çš„æ—¶å€™é€šå¸¸æ¯”Adamè¦æ›´å¥½ï¼Œä½†æ˜¯Adamå¯¹å­¦ä¹ ç‡ä¸é‚£ä¹ˆæ•æ„Ÿï¼Œæ›´å¥½è°ƒå‚ã€‚</p><h4 id="å‚æ•°çš„è®°å½•å’Œä¿å­˜">å‚æ•°çš„è®°å½•å’Œä¿å­˜</h4><ul><li><p>Needs careful experiment management</p></li><li><p>Save your training logs and hyperparameters to compare, share and reproduce later</p></li></ul><p>â€¢ The simplest way is saving logs in text and put key metrics in Excel</p><p>â€¢ Better options exist, e.g. <strong>tenesorboard and weights &amp; bias</strong></p><ul><li><p>Reproducing is hard, it relates to</p><p>â€¢ Environment (hardware &amp; library)</p><p>â€¢ Code</p><p>â€¢ Randomness (seed)</p></li></ul><p>æœ€å¥½è®°å½•å¥½è‡ªå·±çš„è®­ç»ƒæ—¥å¿—ï¼Œå„ç§å‚æ•°è®¾ç½®åˆ©äºé‡å¤ã€‚</p><p>æ¨èçš„å·¥å…·ï¼štenesorboard and weights &amp; biasï¼ˆwandbï¼‰</p><p>é‡å¤å®éªŒæ˜¯æ¯”è¾ƒéš¾å®ç°ï¼Œå› ä¸ºå®éªŒå’Œç¡¬ä»¶ï¼ŒåŒ…ç¯å¢ƒï¼Œä»£ç ï¼Œ<strong>éšæœºç§å­</strong>ç›¸å…³ã€‚å®åœ¨åšä¸åˆ°çš„é‡å¤å®éªŒï¼Œæƒ³è¦è¾¾åˆ°æ•ˆæœå¯ä»¥ä½¿ç”¨å¤šä¸ªæ¨¡å‹è¿›è¡ŒEnsembleèåˆèµ·æ¥ã€‚</p><h3 id="6-1-2-æœºå™¨è°ƒå‚">6.1.2 æœºå™¨è°ƒå‚</h3><p><img src="https://picture.mulindya.com/ParacticeML6-1.png" alt=""></p><p>åœ¨å°çš„ä»»åŠ¡ä¸Šå¯ä»¥ä½¿ç”¨æœºå™¨è°ƒå‚ã€‚</p><h4 id="AutoML">AutoML</h4><p><img src="https://picture.mulindya.com/ParacticeML6-2.png" alt=""></p><p>åœ¨æ¨¡å‹é€‰æ‹©è¿™ä¸€å—ï¼ŒAutoMLæœ‰æ‰€å‘å±•ã€‚</p><h3 id="6-1-3-æ€»ç»“">6.1.3 æ€»ç»“</h3><p>â€¢ Hyperparameter tuning aims to find a set of good values</p><p>â€¢ Itâ€™s time consuming as data preprocessing</p><p>â€¢ There is a trend to use algorithm for tuning</p><p>è°ƒæ•´å‚æ•°çš„ç›®çš„æ˜¯æ‰¾ä¸€ç»„å¥½çš„å‚æ•°å€¼ï¼Œç°åœ¨æ›´å€¾å‘äºä½¿ç”¨ç®—æ³•æ¥Tuningã€‚</p><h2 id="6-2-è¶…å‚æ•°ä¼˜åŒ–-ğŸŒ»">6.2 è¶…å‚æ•°ä¼˜åŒ– ğŸŒ»</h2><p><img src="https://picture.mulindya.com/ParacticeML6-3.png" alt=""></p><h3 id="6-2-1-HPO-algorithms-Black-box-or-Multi-fidelity">6.2.1 HPO algorithms: Black-box or Multi-fidelity</h3><ul><li>Black-box: treats a training job as a black-box in HPOï¼› é»‘ç›’</li></ul><p>â€‹â€¢ Completes the training process for each trial</p><ul><li>Multi-fidelity: modifies the training job to speed up the search</li></ul><p>â€¢ Train on subsampled datasets</p><p>â€¢ Reduce model size (e.g less #layers, #channels)</p><p>â€¢ Stop bad configuration earlier</p><p>è°ƒå‚çš„trickï¼šåœ¨å°æ•°æ®é›†ï¼Œå‡å°‘æ¨¡å‹çš„sizeï¼Œè®­ç»ƒçš„æ—¶å€™å‡å°‘epochï¼›</p><p>è¿™æ ·å¯ä»¥å¾ˆå¿«çš„å¯¹å‚æ•°çš„æ•ˆæœæœ‰ä¸€äº›æ¯”è¾ƒå’Œå¯¹æ¯”ã€‚</p><p><img src="https://picture.mulindya.com/ParacticeML6-4.png" alt=""></p><h3 id="6-2-2-å¸¸è§çš„HPOç­–ç•¥">6.2.2 å¸¸è§çš„HPOç­–ç•¥</h3><ol><li><p>ç½‘æ ¼æœç´¢ Grid Search</p><p>æš´åŠ›ç©·ä¸¾ï¼ŒæŠŠæ‰€æœ‰çš„ç»„åˆè¿‡ä¸€éå¾—åˆ°æœ€å¥½çš„ç»“æœ</p></li><li><p>éšæœºæœç´¢ Random Search</p><p>å¾ªç¯næ¬¡ï¼Œéšæœºé€‰æ‹©è¶…å‚æ•°çš„ç»„åˆï¼Œåœ¨æ²¡æœ‰å¾ˆå¥½çš„å¤´ç»ªçš„æ—¶å€™å¯ä»¥å…ˆé€‰æ‹©éšæœºæœç´¢æ¥ç¡®å®šå‚æ•°å€¼</p></li></ol><p><img src="https://picture.mulindya.com/ParacticeML6-5.png" alt=""></p><h3 id="6-2-3-ï¼ˆBOï¼‰-Bayesian-Optimization">6.2.3 ï¼ˆBOï¼‰ Bayesian Optimization</h3><p>â€¢<strong>BO</strong>: Iteratively learn a mapping from HP to objective function.  Based on previous trials. Select the next trial based on the current estimation.</p><p>â€¢<strong>Surrogate model</strong></p><p>â€‹â€¢ Estimate how the objective function depends on HP</p><p>â€‹â€¢ Probabilistic regression models: Random forest, Gaussian process, â€¦</p><p>è´å¶æ–¯ä¼˜åŒ–ï¼Œç›®å‰åº”ç”¨å¾—ä¸å¤ªå¹¿æ³›ï¼Œäº†è§£ä¸€ä¸‹</p><h3 id="6-2-4-Successive-Halving-ï¼ˆSHç®—æ³•ï¼‰">6.2.4 Successive Halving ï¼ˆSHç®—æ³•ï¼‰</h3><p><img src="https://picture.mulindya.com/ParacticeML6-6.png" alt=""></p><p>æœ‰å¾ˆå¤šè¶…å‚æ•°å¾—é€‰æ‹©ï¼Œé¦–å…ˆé€‰æ‹©nç»„ä¸ªè¶…å‚æ•°ï¼Œè®­ç»ƒmä¸ªepochï¼Œæ·˜æ±°n/2ç»„è¶…å‚æ•°ï¼Œç„¶åå†è®­ç»ƒæ›´å¤šä¸€ç‚¹epoch 2mæ¬¡epochï¼Œè¿™æ ·æ¯ä¸€æ¬¡çš„é€‰å–è®¡ç®—å¼€é”€æ˜¯å·®ä¸å¤šçš„ã€‚</p><h3 id="6-2-5-Hyperbandï¼ˆå®é™…ä¸­å¯ç”¨ï¼‰">6.2.5 Hyperbandï¼ˆå®é™…ä¸­å¯ç”¨ï¼‰</h3><p><img src="https://picture.mulindya.com/ParacticeML6-7.png" alt=""></p><p>SHä¸­é€‰å¤§çš„nï¼Œå°çš„mã€‚Hyperbandå®é™…ä¸Šæ˜¯å°†å¤šä¸ªSHç»“åˆèµ·æ¥ï¼Œç„¶ååœ¨å‰é¢é€‰å–çš„è¶…å‚æ•°ä¸­é€‰å–å‡åŠnæ•°ç›®çš„æ¯”è¾ƒå¥½çš„å‚æ•°ç»„åˆï¼ŒåŒå€mï¼Œç›®çš„æ˜¯å¤šè·‘ä¸€è·‘ï¼Œç»™ç¬¬ä¸€æ¬¡åœ¨å°‘é‡epochçš„å‚æ•°å†æ¬¡ç¡®è®¤çš„æœºä¼šã€‚è¿™æ ·åœ¨nå’Œmçš„é€‰å–ä¸Šå°±ä¸ä¼šé‚£ä¹ˆæ•æ„Ÿäº†ã€‚</p><h3 id="6-2-6-æ€»ç»“">6.2.6 æ€»ç»“</h3><ul><li><p>Black-box HPO: grid/<strong>random search</strong>, bayesian optimization</p></li><li><p>Multi-fidelity HPO: Successive Halving, <strong>Hyperband</strong></p></li><li><p>In practice, start with random search</p></li><li><p>Beware there are <strong>top performers</strong></p><p>â€¢ You can find them by mining your training logs, or what common configurations used in paper/code</p></li></ul><p>å†æ¬¡è¯´æ˜è°ƒå‚çš„trickï¼šåœ¨å°æ•°æ®é›†ï¼Œå‡å°‘æ¨¡å‹çš„sizeï¼Œè®­ç»ƒçš„æ—¶å€™å‡å°‘epochï¼›</p><p>è¿™æ ·å¯ä»¥å¾ˆå¿«çš„å¯¹å‚æ•°çš„æ•ˆæœæœ‰ä¸€äº›æ¯”è¾ƒå’Œå¯¹æ¯”ã€‚</p><p>æ€»æœ‰å‡ ä¸ªæ¨¡å‹å‡ ç»„å‚æ•°åœ¨æ‰€æœ‰çš„æ•°æ®é›†ä»»åŠ¡éƒ½è¡¨ç°å¾—æ¯”è¾ƒå¥½ï¼Œåœ¨è®ºæ–‡å’Œæ¯”èµ›ä¸­è®°å½•ä¸‹æ¯”è¾ƒå¥½å¾—å‚æ•°ç»„åˆï¼Œåªç”¨è¯•è¯•è¿™äº›å‚æ•°å³å¯ã€‚</p><h2 id="6-3-ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼‰ğŸ„">6.3 ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼‰ğŸ„</h2><h3 id="6-3-1-æ¦‚å¿µ">6.3.1 æ¦‚å¿µ</h3><p>æ¨¡å‹æ¶æ„çš„æœç´¢Neural Architecture Search (NAS)</p><ul><li>A neural network has different types of hyperparameters:</li></ul><p>â€¢ Topological structure: resnet-ish, mobilenet-ish, #layers</p><p>â€¢ Individual layers: kernel_size, #channels in convolutional layer, #hidden_outputs in dense/recurrent layers</p><ul><li>NAS automates the design of neural network</li></ul><p>â€‹â€¢ How to specify the search space of NN</p><p>â€‹â€¢ How to explore the search space</p><p>â€‹â€¢ Performance estimation</p><p><img src="https://picture.mulindya.com/ParacticeML6-8.png" alt=""></p><p>NASçš„å·¥ä½œæ˜¯å°½é‡ä½¿å¾—æ¨¡å‹æ¶æ„çš„é€‰æ‹©è‡ªåŠ¨åŒ–</p><h3 id="6-3-2-ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ¥NAS">6.3.2 ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ¥NAS</h3><p><img src="https://picture.mulindya.com/ParacticeML6-9.png" alt=""></p><p>ä½¿ç”¨RNNæ¥ç”Ÿæˆæ¨¡å‹çš„æ¶æ„ï¼Œå¾—åˆ°çš„åé¦ˆæ˜¯æ¨¡å‹çš„ç²¾åº¦ï¼Œä½†æ˜¯å¼ºåŒ–å­¦ä¹ å¾ˆè´µï¼Œå®é™…ä¸Šä¸å¤ªé€‚ç”¨ã€‚</p><h3 id="6-3-3-One-shotæ–¹æ³•ï¼ˆæ›´å®ç”¨ï¼‰">6.3.3 One-shotæ–¹æ³•ï¼ˆæ›´å®ç”¨ï¼‰</h3><ul><li><p>Combines the learning of architecture and model params</p></li><li><p>Construct and train a single model presents a wide variety of architectures</p></li><li><p>Evaluate candidate architectures</p><p>â€¢ Only care about the candidate ranking</p><p>â€¢ Use a proxy metric: the accuracy after a few epochs</p></li><li><p>Re-train the most promising candidate from scratch</p></li></ul><p>åŒæ—¶å­¦ä¹ ç½‘ç»œæ¶æ„çš„å‚æ•°å’Œå…¶ä¸­çš„è¶…å‚æ•°ï¼Œè®­ç»ƒä¸€ä¸ªå·¨å¤§çš„æ¨¡å‹ï¼Œæ¯ä¸ªå­æ¨¡å‹çš„æ¶æ„å’Œè¶…å‚æ•°ä¹Ÿå¯ä»¥å¾—åˆ°ã€‚å®é™…ä¸Šåªéœ€è¦å¾—åˆ°æ¨¡å‹å¯¹å‰é¢å¾—æ¨¡å‹æœ‰æå‡å³å¯ã€‚</p><h4 id="ä¾‹å­-Differentiable-Architecture-Search">ä¾‹å­ Differentiable Architecture Search</h4><p><img src="https://picture.mulindya.com/ParacticeML6-10.png" alt=""></p><p>ä½¿ç”¨softmaxæ¥åˆ¤å®šå­è·¯ï¼Œæ¯ä¸€å±‚æœ‰å¾ˆå¤šå€™é€‰å±‚ï¼Œæ¯”å¦‚Lå±‚çš„ç¬¬iä¸ªå€™é€‰è¾“å‡ºä¸º$O_i<sup>l$ç„¶åé€šè¿‡å¯¹æƒé‡å‚æ•°aé€šè¿‡softmaxå¯ä»¥è·å¾—${\alpha}</sup>l$â€‹â€‹â€‹åŠ æƒæ±‚å’Œå¾—åˆ°â€‹â€‹å€¼èµ‹å€¼mä»½ç»™åˆ°Lï¼Œé€šè¿‡è®­ç»ƒä¹‹åå¾—åˆ°çš„aå¯ä»¥æ¥é€‰æ‹©å¥½çš„å•å…ƒï¼ˆå•å…ƒå¯¹åº”çš„aè¶Šå¤§è¶Šå¥½ï¼‰</p><h3 id="6-3-4-Scaling-CNNsï¼ˆæ›´ç®€å•å®ç”¨ï¼‰">6.3.4 Scaling CNNsï¼ˆæ›´ç®€å•å®ç”¨ï¼‰</h3><p><img src="https://picture.mulindya.com/ParacticeML6-11.png" alt=""></p><p>EfficientNetå°±æ˜¯è¿™æ ·çš„æ–¹æ³•æœç´¢å‡ºæ¥çš„ï¼Œä½†æ˜¯Scaling CNNsè¿™ä¸ªæ–¹æ³•æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œåªå¯¹äºå°éƒ¨åˆ†çš„ç¥ç»ç½‘ç»œä½¿ç”¨ï¼Œå…·ä½“æ˜¯å¯¹äºå·ç§¯ç¥ç»ç½‘ç»œã€‚</p><p>è°ƒèŠ‚ç½‘ç»œçš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p><p>æ›´å¤šå±‚ï¼Œæ›´å¤šchannelï¼Œæ›´å¤§çš„è¾“å…¥åˆ†è¾¨ç‡ï¼›</p><p>Efficientnetå»ºè®®ç»„åˆè°ƒèŠ‚è¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå½“ç½‘ç»œæ·±åº¦å˜æ·±æ—¶é€šé“æ•°ä¹Ÿå¯ä»¥ç›¸åº”å˜å¤šï¼ŒåŒæ ·resolutionä¹Ÿå¯¹åº”å˜å¤šã€‚é€šè¿‡4ä¸ªå‚æ•°æ¥è°ƒèŠ‚è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><h3 id="6-3-5-ç ”ç©¶æ–¹å‘">6.3.5 ç ”ç©¶æ–¹å‘</h3><ul><li><p>Explainability of NAS result</p></li><li><p>Search architecture to fit into edge devices</p><p>â€¢ Edge devices are more and more powerful, data privacy concerns</p><p>â€¢ But they are very diverse (CPU/GPU/DSP, 100x performance difference) and have power constraints</p></li></ul><p>â€¢ Minimize both model loss and hardware latency</p><p>â€‹â€¢E.g. minimize $ lossÃ—log(latency)^Î² $â€‹</p><ul><li>To what extend can we automates the entire ML workflow?</li></ul><h3 id="6-3-6-æ€»ç»“">6.3.6 æ€»ç»“</h3><ul><li>NAS searches a NN architecture for a customizable goal</li></ul><p>â€‹ â€¢ Maximize accuracy or meet latency constraints on particular hardware</p><ul><li>NAS is practical to use now:</li></ul><p>â€‹â€¢ Compound depth, width, resolution scaling</p><p>â€‹â€¢ Differentiable one-hot neural network</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer48 æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²</title>
    <link href="/2022/01/25/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer48/"/>
    <url>/2022/01/25/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer48/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·ä»å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²ï¼Œè®¡ç®—è¯¥æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: "abcabcbb"</span><br><span class="hljs-section">è¾“å‡º: 3 </span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: "bbbbb"</span><br><span class="hljs-section">è¾“å‡º: 1</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: "pwwkew"</span><br><span class="hljs-section">è¾“å‡º: 3</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯&nbsp;"wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br>&nbsp;    è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ<span class="hljs-string">"pwke"</span>&nbsp;æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>s.length &lt;= 40000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’+å“ˆå¸Œè¡¨çš„æ–¹æ³•</p><ul><li><strong>å“ˆå¸Œè¡¨ dic ç»Ÿè®¡ï¼š</strong> æŒ‡é’ˆ jéå†å­—ç¬¦ sï¼Œå“ˆå¸Œè¡¨ç»Ÿè®¡å­—ç¬¦ s[j]<strong>æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</strong> ã€‚</li><li>æ›´æ–°å·¦æŒ‡é’ˆ i ï¼š æ ¹æ®ä¸Šè½®å·¦æŒ‡é’ˆ i å’Œ dic[s[j]]ï¼Œæ¯è½®æ›´æ–°å·¦è¾¹ç•Œ i ï¼Œä¿è¯åŒºé—´ [i + 1, j]å†…æ— é‡å¤å­—ç¬¦ä¸”æœ€å¤§ã€‚</li><li><strong>æ›´æ–°ç»“æœ resï¼š</strong> å–ä¸Šè½® reså’Œæœ¬è½®åŒæŒ‡é’ˆåŒºé—´ [i + 1,j]çš„å®½åº¦ï¼ˆå³ j - iï¼‰ä¸­çš„æœ€å¤§å€¼ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dic, res, i = {}, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> s[j] <span class="hljs-keyword">in</span> dic:<br>                i = <span class="hljs-built_in">max</span>(dic[s[j]], i) <span class="hljs-comment"># æ›´æ–°å·¦æŒ‡é’ˆ i</span><br>            dic[s[j]] = j <span class="hljs-comment"># å“ˆå¸Œè¡¨è®°å½•</span><br>            res = <span class="hljs-built_in">max</span>(res, j - i) <span class="hljs-comment"># æ›´æ–°ç»“æœ</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer53-â…¡ 0~n-1ç§ç¼ºå°‘çš„æ•°å­—</title>
    <link href="/2022/01/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer53-2/"/>
    <url>/2022/01/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer53-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>0~n-1ç§ç¼ºå°‘çš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€ä¸ªé•¿åº¦ä¸ºn-1çš„é€’å¢æ’åºæ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°å­—éƒ½åœ¨èŒƒå›´0ï½n-1ä¹‹å†…ã€‚åœ¨èŒƒå›´0ï½n-1å†…çš„nä¸ªæ•°å­—ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ•°å­—ä¸åœ¨è¯¥æ•°ç»„ä¸­ï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [0,1,3]</span><br><span class="hljs-section">è¾“å‡º: 2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: [<span class="hljs-number">0,1,2,3</span>,<span class="hljs-number">4,5,6,7</span>,<span class="hljs-number">9</span>]<br>è¾“å‡º: <span class="hljs-number">8</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= æ•°ç»„é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨äºŒåˆ†æ³•æ¥æŸ¥æ‰¾å°±å¥½å•¦~ï¼Œå¦‚æœæ˜¯å‡ºç°åœ¨ç¼ºå¤±æ•°å­—ä¹‹å‰çš„æ•°å­—å°±ä¼šå’Œä¸‹æ ‡ç›¸åŒï¼Œå¦‚æœæ˜¯åœ¨ç¼ºå¤±æ•°å­—ä¹‹åå°±ä¼šæ¯”ä¸‹æ ‡è¦å¤§1ï¼Œæ ¹æ®è¿™ä¸€ç‰¹æ€§æ¥æŸ¥æ‰¾è¿™ä¸ªç¼ºå¤±æ•°å­—ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">missingNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i,j = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i&lt;=j:<br>            m = (i+j)//<span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> nums[m]==m:i = m+<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: j = m-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> i <span class="hljs-comment">#è¿”å›iä¸‹æ ‡å³å¯</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æŸ¥æ‰¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>äºŒåˆ†æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬äº”ç« ç¬”è®°</title>
    <link href="/2022/01/24/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML5/"/>
    <url>/2022/01/24/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚è¿™ä¸€ç« çš„ä¸­å¿ƒæ˜¯æ¨¡å‹èåˆï¼Œä¹Ÿå°±æ˜¯Model Combinationï¼Œä¸»è¦è®²è§£æ–¹å·®å’Œåå·®ï¼Œbaggingï¼Œboostingï¼Œstackingçš„æ…¨å¿µå’Œç®—æ³•ï¼</p></blockquote><h1>ç¬¬äº”ç« </h1><h2 id="5-1-æ–¹å·®å’Œåå·®-ğŸŒ–">5.1 æ–¹å·®å’Œåå·® ğŸŒ–</h2><h3 id="5-1-1-æ¦‚å¿µ">5.1.1 æ¦‚å¿µ</h3><p>ç»Ÿè®¡å­¦ä¹ ä¸­ä½¿ç”¨æ–¹å·®å’Œåå·®æ¥è¡¡é‡æ¨¡å‹ã€‚</p><p><img src="https://picture.mulindya.com/ParacticeML5-1.png" alt=""></p><p>è®­ç»ƒçš„æ¨¡å‹å¯¹äºæ ·æœ¬å¾—åˆ°çš„é¢„æµ‹å€¼ï¼Œé‡‡æ ·5æ¬¡æ•°æ®è®­ç»ƒ5ä¸ªæ¨¡å‹çš„åˆ°çš„5ä¸ªç»“æœå€¼ï¼Œé»„è‰²åŒºåŸŸæ˜¯å®¹å¿çš„åŒºåŸŸï¼›</p><p>åå·®æ˜¯å­¦ä¹ åˆ°çš„æ¨¡å‹å’ŒçœŸå®çš„æ¨¡å‹å¾—åˆ°çš„è§£çš„å·®è·ï¼›</p><p>æ–¹å·®æ˜¯æ¯æ¬¡å­¦ä¹ åˆ°çš„ä¸œè¥¿çš„å·®åˆ«æœ‰å¤šå¤§ã€‚</p><h3 id="5-1-2-é‡è¦å…¬å¼">5.1.2 é‡è¦å…¬å¼</h3><p><img src="https://picture.mulindya.com/ParacticeML5-2.png" alt=""></p><p>Biasä¸ºç¬¬ä¸€é¡¹ï¼ŒVarä¸ºç¬¬ä¸‰é¡¹ï¼Œå¯ä»¥éœ€è¦ä½¿å¾—æ¨¡å‹çš„æ–¹å·®å’Œåå·®å°½å¯èƒ½çš„å°ã€‚è¿™ä¸ªå…¬å¼ç°å¸¸é‡è¦ğŸ”ï¼</p><h3 id="5-1-3-æ¨¡å‹ä¼˜åŒ–æ–¹æ³•">5.1.3 æ¨¡å‹ä¼˜åŒ–æ–¹æ³•</h3><p><img src="https://picture.mulindya.com/ParacticeML5-3.png" alt=""></p><p>éšç€æ¨¡å‹è¶Šå¤æ‚ï¼Œåå·®ä¼šé€’å‡ï¼Œè€Œæ–¹å·®ä¼šé€’å¢ï¼Œå› ä¸ºä¼šè¿‡æ‹Ÿåˆï¼Œæ¨¡å‹å¯¹äºå°çš„æ‰°åŠ¨ä¼šå¯¹ç»“æœæ‰°åŠ¨å¾ˆå¤§ã€‚</p><p>å¦‚æœè¦å¾—åˆ°å¥½çš„æ¨¡å‹ï¼Œå¢å¼ºæ³›åŒ–èƒ½åŠ›ï¼Œå°±éœ€è¦æŠŠåå·®ï¼Œæ–¹å·®ï¼Œå™ªå£°éƒ½é™ä½ã€‚</p><p><img src="https://picture.mulindya.com/ParacticeML5-4.png" alt=""></p><ul><li><p>é™ä½åå·®ï¼šå¤æ‚æ¨¡å‹ï¼Œboostingï¼ŒStackingï¼›</p></li><li><p>é™ä½æ–¹å·®ï¼šç®€å•æ¨¡å‹ï¼Œæ­£åˆ™åŒ–å‚æ•°ï¼ŒBaggingï¼ŒStackingï¼›</p></li><li><p>é™ä½å™ªéŸ³ï¼šå¢å¼ºæ•°æ®è´¨é‡ï¼›</p></li></ul><p>å…¶ä¸­Boostingï¼ŒStacking,Baggingæ˜¯Ensemble Learningä¹Ÿå°±æ˜¯é›†æˆå­¦ä¹ ã€‚<strong>æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨å¤šä¸ªæ¨¡å‹æ¥æå‡é¢„æµ‹æ€§èƒ½~</strong></p><h3 id="5-1-4-æ€»ç»“">5.1.4 æ€»ç»“</h3><ul><li>Decompose model generalization error into bias,variance and intrinsic error</li><li>Ensemble learning combines mutiple models to reduce both bias and variance</li></ul><p>å°†æ¨¡å‹çš„æ³›åŒ–è¯¯å·®åˆ†è§£æˆæ–¹å·®ï¼Œåå·®çš„å¹³æ–¹ï¼Œé‡‡é›†æ•°æ®è¯¯å·®ã€‚</p><p>å¯ä»¥ä½¿ç”¨é›†æˆæ¨¡å‹æ¥é™ä½æ–¹å·®å’Œåå·®ã€‚</p><h2 id="5-2-Bagging-ğŸ”®">5.2 Bagging ğŸ”®</h2><h3 id="5-2-1-æ¦‚å¿µ">5.2.1 æ¦‚å¿µ</h3><p>Baggingæ˜¯ç”Ÿäº§è¯ï¼Œæ¥è‡ªäºBootstrap Aggrgrating</p><ul><li><p>Learn  base learners in parallel, combine to reduce model variance</p></li><li><p>Each base learner is trained on a bootstrap sample<br>â€¢Given a dataset of  examples, create a sample by randomly sampling examples with replacement<br>â€¢Around å…¬å¼1 unique examples will be sampled use the out-of-bag examples for validation</p>   $$  å…¬å¼1: \ 1-\frac{1}{e} \approx 63\%  $$   </li><li><p>Combine learners by averaging the outputs (regression) or majority voting (classification)</p></li><li><p>Random forest: bagging with decision trees<br>â€¢ usually select random subset of features for each bootstrap sample</p></li></ul><p>å°†nä¸ªæ¨¡å‹åšé¢„æµ‹ï¼Œå›å½’å¯ä»¥å¾—åˆ°çš„ç»“æœåšå¹³å‡ï¼Œåˆ†ç±»å¯ä»¥ä½¿ç”¨nä¸ªæ¨¡å‹å¾—åˆ°çš„ç»“æœæ¥æŠ•ç¥¨å–æœ€å¤§ç»Ÿè®¡æ•°çš„ç»“æœã€‚</p><p>bootstrapé‡‡æ · ä¹Ÿå°±æ˜¯éšæœºæ”¾å›é‡‡æ ·å¾—åˆ°è®­ç»ƒçš„æ¨¡å‹ï¼Œè¿™æ ·çš„é‡‡æ ·æ–¹å¼å¤§æ¦‚å«æœ‰äº†63%çš„åŸå§‹æ ·æœ¬ï¼Œå‰©ä¸‹çš„37%æ˜¯é‡å¤æ ·æœ¬ï¼Œout of bagå‰©ä¸‹æ²¡æœ‰é‡‡æ ·çš„åŸå§‹æ ·æœ¬å¯ä»¥ä½œä¸ºéªŒè¯é›†ã€‚</p><h3 id="5-2-2-ä»£ç ">5.2.2 ä»£ç </h3><p><img src="https://picture.mulindya.com/ParacticeML5-5.png" alt=""></p><p><code>__init__</code>æ–¹æ³•æ˜¯åˆå§‹åŒ–nä¸ªå­¦ä¹ å™¨ï¼š<code>clone</code>å¯ä»¥æŠŠä¸€ä¸ª<code>base_learner</code>å¤åˆ¶næ¬¡ï¼Œå› ä¸ºæ¨¡å‹ä¸æ˜¯shareæƒé‡çš„ï¼Œæ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨<code>[base_learner for _ in range(n_leaners)]</code>ã€‚</p><p><code>fit</code>æ–¹æ³•æ˜¯è®­ç»ƒå­¦ä¹ å™¨ï¼š<code>fit</code>ä¸­çš„<code>example</code>æ˜¯åœ¨mä¸ªæ ·æœ¬ä¸­åˆæœ‰æ”¾å›éšæœºé€‰æ‹©mä¸ªæ ·æœ¬ã€‚ç„¶åè®­ç»ƒnä¸ªè®­ç»ƒæ¨¡å‹ã€‚</p><p><code>predict</code>æ–¹æ³•æ˜¯ï¼šé¢„æµ‹æ˜¯ç»™xæ¥å¾—åˆ°predï¼Œå­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè½¬ä¸ºarrayåœ¨ç¬¬ä¸€ä¸ªç»´åº¦æ±‚å‡å€¼ã€‚</p><h3 id="5-2-3-æœ¬è´¨">5.2.3 æœ¬è´¨</h3><p><img src="https://picture.mulindya.com/ParacticeML5-6.png" alt=""></p><p>Bagginé™ä½äº†æ¨¡å‹çš„æ–¹å·®ï¼Œå°¤å…¶æ˜¯ä¸ç¨³å®šçš„å­¦ä¹ å™¨ï¼Œå› æ­¤æ³›åŒ–èƒ½åŠ›ä¼šå¢å¼ºï¼Œå¤§æ–¹å·®çš„æ¨¡å‹å¯ä»¥ç§°ä½œUnstable Learnerã€‚</p><p>ä¸‹é¢å…¬å¼ä¸­çš„$f(x)$ä¸æ˜¯éšæœºå˜é‡æ˜¯ç¡®å®šçš„ï¼Œå› æ­¤æ˜¯å¯ä»¥åŒ–æˆ$\hat{f}(x)^2$â€‹â€‹,è¿™é‡Œæ²¡æœ‰çœ‹æ‡‚ğŸ˜µï¼Œå•ä¸ªå°äºç­‰äºå¤šä¸ªfçš„æœŸæœ›ã€‚</p><h3 id="5-2-4-Unstable-Learners">5.2.4 Unstable Learners</h3><p>éšæœºæ£®æ—ä¹Ÿå°±æ˜¯é™ä½äº†æ–¹å·®ï¼Œä½†æ˜¯æ²¡æœ‰å¢åŠ åå·®å’Œå™ªå£°ï¼›</p><p>åœ¨ä½¿ç”¨baggingçš„æ—¶å€™ä½¿ç”¨ä¸ç¨³å®šçš„Learnerä¼šæœ‰æ˜¾è‘—æå‡æ³›åŒ–æ€§èƒ½çš„æ•ˆæœï¼Œå†³ç­–æ ‘ä¸æ˜¯ç¨³å®šçš„æ¨¡å‹ï¼Œæ•°æ®ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆé€‰å–å“ªäº›ç‰¹å¾åˆ‡å¼€åˆ†æ”¯ä¼šå¾ˆä¸ä¸€æ ·ï¼Œçº¿æ€§å›å½’ç›¸å¯¹æ˜¯æ¯”è¾ƒç¨³å®šçš„æ¨¡å‹ï¼Œåæ–¹å·®çŸ©é˜µï¼ˆæœ€å°ç‰¹å¾å€¼å’Œæœ€å¤§ç‰¹å¾å€¼çš„æ¯”ï¼‰æ¯”è¾ƒå¥½çš„æ¨¡å‹ç›¸å¯¹æ¯”è¾ƒç¨³å®š</p><p><img src="https://picture.mulindya.com/ParacticeML5-7.png" alt=""></p><h3 id="5-2-5-æ€»ç»“">5.2.5 æ€»ç»“</h3><ul><li><p>Bagging train multiple learner on data by bootstrap sampling(éšæœºæ”¾å›é‡‡æ ·)</p></li><li><p>Bagging reduce variance,especially for unstable learners</p><p>å¯¹äºä¸ç¨³å®šçš„æ¨¡å‹ï¼Œæ¯”å¦‚å†³ç­–æ ‘æ•ˆæœæœ€ä½³ï¼Œæ¯”å¦‚éšæœºæ£®æ—</p></li></ul><h2 id="5-3-Boosting">5.3 Boosting</h2><h3 id="5-3-1-å®šä¹‰">5.3.1 å®šä¹‰</h3><p><img src="https://picture.mulindya.com/ParacticeML5-14.png" alt=""></p><p>Boostingæ˜¯ä¸ºäº†é™ä½æ¨¡å‹çš„åå·®ï¼ŒBaggingæ˜¯ä¸ºäº†é™ä½æ¨¡å‹çš„æ–¹å·®ã€‚</p><p>Boostingæ˜¯å°†åå·®æ¯”è¾ƒå¤§çš„æ¨¡å‹ï¼ˆweak learnersï¼‰å°†å…¶ç»„åˆæˆä¸€ä¸ªæ¯”è¾ƒå¼ºçš„æ¨¡å‹</p><h3 id="5-3-2-Gradient-Boosting">5.3.2 Gradient Boosting</h3><p><img src="https://picture.mulindya.com/ParacticeML5-15.png" alt=""></p><p>è¿™é‡Œæ³¨æ„æ˜¯åœ¨æ®‹å·®ä¸Šå­¦ä¹ ï¼Œä¹Ÿå°±æ˜¯æ ·æœ¬æœ¬èº«ï¼Œç‰¹å¾ä¸å˜åŒ–ï¼Œåªæœ‰æ ‡å·å˜äº†ï¼Œæ ‡å·ä¸º$y_i-H_t(s_i)$â€‹,ä¹Ÿå°±æ˜¯å‰é¢æ¨¡å‹æ²¡æœ‰å­¦å¤Ÿçš„éƒ¨åˆ†ç„¶ååŠ åˆ°å½“å‰çš„æ¨¡å‹ä¸­ç»§ç»­Boostingï¼Œåœ¨åŠ å…¥æ–°çš„$\hat{h_t}_(x)$â€‹(ä¸Šé¢å…¬å¼ä¸­çš„fæ˜¯æ²ç¥ç¬”è¯¯äº†)æ—¶å‰æœ‰ä¸€ä¸ª$\eta$â€‹â€‹â€‹ä½œä¸ºæ­£åˆ™é¡¹â€‹é¿å…è¿‡æ‹Ÿåˆï¼Œ<strong>å¯ä»¥å°†$ \eta $â€‹â€‹â€‹â€‹â€‹è®¾ç½®ä¸º0.1æˆ–è€…0.å‡ ï¼Œé¿å…ä¸€æ¬¡æ€§æ‹Ÿåˆå¤ªè¿‡ã€‚</strong></p><p>æ®‹å·®ç­‰äºæ±‚æŸå¤±å¯¹å‡½æ•°æ¢¯åº¦çš„è´Ÿæ–¹å‘ï¼Œæ‹Ÿåˆç­‰ä»·ä¸ æ¯æ¬¡å­¦ä¹ ä¸€ä¸ªæ–°çš„htæ˜¯å»æ‹Ÿåˆè´Ÿæ¢¯åº¦çš„æ–¹å‘ï¼Œä»¥å‰çš„æ¢¯åº¦ä¸‹é™æ˜¯ä½¿ç”¨è´Ÿçš„å¯¼æ•°æ¢¯åº¦ä¹˜ä»¥å­¦ä¹ ç‡åŠ åˆ°æƒé‡ä¸­ï¼Œç”±äºè¿™é‡Œæ˜¯å­¦ä¹ çš„å‡½æ•°ï¼Œåœ¨è¿™é‡Œä¸æ˜¯åŠ åˆ°æƒé‡ä¸­ï¼Œè€Œæ˜¯åŠ åˆ°å‡½æ•°ä¸­ã€‚ä¸åŒçš„Lå¯é‡‡å–ä¸åŒçš„Boostingçš„ç®—æ³•ã€‚</p><h3 id="5-3-3-å®ç°ä»£ç ">5.3.3 å®ç°ä»£ç </h3><p><img src="https://picture.mulindya.com/ParacticeML5-16.png" alt=""></p><p><code>fit</code>æ–¹æ³•æ˜¯é¦–å…ˆå°†y copyåˆ°residualä¸­ï¼Œç„¶åè®­ç»ƒæ¨¡å‹ï¼ˆX,residualï¼‰,ç„¶åæ›´æ–°æ®‹å·®å½¢å¼ï¼›</p><p><code>predict</code>æ—¶éœ€è¦æ±‚å’Œä¹˜ä»¥å­¦ä¹ ç‡æ—¶ä¸ºäº†åŠ æƒæ¯ä¸ªå¼±å­¦ä¹ å™¨çš„ç»“æœã€‚</p><h4 id="5-3-4-Gradient-Boosting-Decision-Trees-GBDT">5.3.4 Gradient Boosting Decision Trees(GBDT)</h4><p><img src="https://picture.mulindya.com/ParacticeML5-17.png" alt=""></p><p>Boostingå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›æ­£åˆ™åŒ–ï¼›æˆ‘ä»¬éœ€è¦ä¸€äº›å¼±æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å°‘å±‚çš„å†³ç­–æ ‘ï¼ˆæˆ–å…¶ä»–æ¨¡å‹ï¼‰æˆ–è€…åœ¨å°‘é‡çš„ç‰¹å¾ä¸Šå­¦ä¹ çš„æ¨¡å‹ã€‚è¿™é‡Œæ²¡æœ‰è¿‡æ‹Ÿåˆä¸€ä¸ªæ˜¯å–å¾—æ¨¡å‹éƒ½æ˜¯å¾ˆå¼±ï¼Œå¦å¤–å­¦ä¹ ç‡å–ä¸º0.1.</p><h3 id="5-3-5-æ€»ç»“">5.3.5 æ€»ç»“</h3><ul><li><p>Boosting combines weak learners into a strong one to reduce bias</p></li><li><p>Gradient Boosting learns weak learners by fitting the residuals</p><p>å¼±æ¨¡å‹ç»„åˆæˆå¼ºæ¨¡å‹é™ä½åå·®</p></li></ul><h2 id="5-4-Stacking-ğŸ”‹">5.4 Stacking ğŸ”‹</h2><h3 id="5-4-1-å®šä¹‰">5.4.1 å®šä¹‰</h3><p><img src="https://picture.mulindya.com/ParacticeML5-8.png" alt=""></p><p>å¯ä»¥èåˆ<strong>ä¸åŒç§</strong>æ¨¡å‹ï¼Œç„¶åConcatç»“æœå†è¿›è¡Œçº¿æ€§ç»„åˆä¹Ÿå°±æ˜¯å…¨è¿æ¥å±‚ï¼Œæ—¢å¯ä»¥é™ä½åå·®ï¼Œä¹Ÿå¯ä»¥é™ä½æ–¹å·®ï¼Œåœ¨ç«èµ›ä¸­å¸¸ç”¨æ­¤æ–¹æ³•ã€‚</p><h4 id="å¯¹æ¯”Bagging">å¯¹æ¯”Bagging</h4><ul><li><p>ç±»ä¼¼Baggingç»„åˆæ¨¡å‹æŠ•ç¥¨ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯ä¸åŒç§ç±»çš„æ¨¡å‹æ¥èåˆã€‚</p></li><li><p>ä¸éœ€è¦Bootstrapæ¥è·å–å¤šæ ·æ€§å› ä¸ºæ¨¡å‹æœ¬èº«å°±å…·æœ‰å¤šæ ·æ€§ï¼›</p></li><li><p>æ¨¡å‹ä¸ä¸€æ ·åœ¨ç‰¹å¾æå–ä¹Ÿä¼šä¸ä¸€æ ·ã€‚</p></li></ul><h3 id="5-4-2-Stacking-result">5.4.2 Stacking result</h3><p><img src="https://picture.mulindya.com/ParacticeML5-9.png" alt=""></p><p>éœ€è¦æ³¨æ„æ¨¡å‹çš„é€‰å–ã€‚</p><h3 id="5-4-3-å¤šå±‚Stacking">5.4.3 å¤šå±‚Stacking</h3><p>ä¹‹å‰çš„stackingä¸»è¦æ˜¯é™ä½æ–¹å·®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤šå±‚çš„æ–¹æ³•é™ä½åå·®</p><p><img src="https://picture.mulindya.com/ParacticeML5-10.png" alt=""></p><p>ä¸‹ä¸€å±‚çš„æ¨¡å‹æ˜¯ä¸Šä¸€å±‚çš„è¾“å‡ºç»“æœï¼ŒåŸå§‹ç‰¹å¾åŠ ä¸Šæ¨¡å‹è¾“å‡ºç»“æœæ¥concatã€‚å¤šå±‚çš„stackingå¾ˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå®¹æ˜“è¿‡åº¦æ³¨æ„å™ªéŸ³ï¼Œéœ€è¦å‡è½»è¿‡æ‹Ÿåˆã€‚</p><h3 id="5-4-4-å‡è½»è¿‡æ‹Ÿåˆ">5.4.4 å‡è½»è¿‡æ‹Ÿåˆ</h3><p><img src="https://picture.mulindya.com/ParacticeML5-11.png" alt=""></p><h4 id="ä¸é‡å¤æ•°æ®">ä¸é‡å¤æ•°æ®</h4><p>å¯ä»¥æŠŠæ•°æ®åˆ†æˆä¸¤å—Aï¼ŒBï¼Œåœ¨Aä¸Šè®­ç»ƒç¬¬ä¸€å±‚çš„æ¨¡å‹ï¼Œåœ¨Bå¾—åˆ°é¢„æµ‹çš„ç»“æœåœ¨åŠ ä¸ŠBçš„æœ¬èº«ç”¨äºç¬¬äºŒå±‚æ¨¡å‹çš„è®­ç»ƒã€‚è¿™æ ·æ¯ä¸€å±‚æ•°æ®çš„è®­ç»ƒé›†æ˜¯ä¸è€¦åˆçš„ï¼Œç¼ºç‚¹æ˜¯æ¯ä¸€å±‚åªèƒ½ä½¿ç”¨ä¸€åŠçš„æ•°æ®ã€‚</p><h4 id="é‡å¤KæŠ˜Bagging">é‡å¤KæŠ˜Bagging</h4><p>ç±»ä¼¼äº¤å‰éªŒè¯å°†æ•°æ®åˆ†æˆKä»½ï¼Œåœ¨k-1ä¸Šè®­ç»ƒï¼Œåœ¨iä¸ŠåšéªŒè¯ï¼Œè¿™æ ·å¯ä»¥è®­ç»ƒkä¸ªæ¨¡å‹ï¼Œå°†å¾—åˆ°çš„ç»“æœå¯ä»¥ç»„æˆå’ŒåŸå§‹æ•°æ®ä¸€æ ·çš„å¤§å°ï¼Œä½†æ˜¯é¢„æµ‹éƒ½æ˜¯æ²¡æœ‰å†æ¬¡å‚ä¸å½“å‰æ¨¡å‹è®­ç»ƒçš„ï¼Œå†è¿›å…¥åˆ°ä¸‹ä¸€å±‚è®­ç»ƒï¼ŒåŒæ—¶ä¸‹ä¸€å±‚å¯ä»¥çœ‹åˆ°æ•´ä¸ªæ ·æœ¬çš„é¢„æµ‹åŒæ—¶éƒ½æ²¡æœ‰å‚åŠ ï¼Œè®­ç»ƒnæ¬¡å°±ä¸€å±‚ä¹‹ä¸­çš„å°æ¨¡å‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ•°æ®ï¼Œè¿™æ ·å®é™…ä¸Šå°±è®­ç»ƒäº†k*nä¸ªæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´nä¸ªæ¨¡å‹å¹¶æ’æˆä¸ºä¸€å±‚ï¼Œç„¶åä½¿ç”¨kæˆäº¤å‰ï¼Œä½¿å¾—æ¯ä¸€æ¬¡è®­ç»ƒå°æ¨¡å‹çœ‹åˆ°çš„æ•°æ®ä¸åŒã€‚ç„¶åå†æ±‚å¹³å‡è¾“å‡ºåˆ°ä¸‹ä¸€å±‚ã€‚</p><h3 id="5-4-5-ä»£ç å®ä¾‹">5.4.5 ä»£ç å®ä¾‹</h3><p><img src="https://picture.mulindya.com/ParacticeML5-12.png" alt=""></p><h3 id="5-4-6-æ€»ç»“">5.4.6 æ€»ç»“</h3><ul><li><p>Stacking combine multiple learners to reduce variance</p></li><li><p>Stacking learners in multiple levels to reduce bias</p><ul><li>Repeated K-fold bagging:fully utilize data and alleviate overfitting</li></ul><p>å¤šå±‚å‡è½»åå·®ï¼Œå¤šä¸ªæ¨¡å‹å‡è½»æ–¹å·®</p></li></ul><h2 id="5-5-æ¨¡å‹èåˆæ€»ç»“-ğŸ“«">5.5 æ¨¡å‹èåˆæ€»ç»“ ğŸ“«</h2><ul><li>é›†æˆå­¦ä¹ çš„æ–¹æ³•æ¥é™ä½åå·®å’Œæ–¹å·®</li></ul><p><img src="https://picture.mulindya.com/ParacticeML5-13.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer58-2 å·¦æ—‹è½¬å­—ç¬¦ä¸²</title>
    <link href="/2022/01/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer58-2/"/>
    <url>/2022/01/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer58-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å·¦æ—‹è½¬å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å­—ç¬¦ä¸²çš„å·¦æ—‹è½¬æ“ä½œæ˜¯æŠŠå­—ç¬¦ä¸²å‰é¢çš„è‹¥å¹²ä¸ªå­—ç¬¦è½¬ç§»åˆ°å­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚è¯·å®šä¹‰ä¸€ä¸ªå‡½æ•°å®ç°å­—ç¬¦ä¸²å·¦æ—‹è½¬æ“ä½œçš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè¾“å…¥å­—ç¬¦ä¸²"abcdefg"å’Œæ•°å­—2ï¼Œè¯¥å‡½æ•°å°†è¿”å›å·¦æ—‹è½¬ä¸¤ä½å¾—åˆ°çš„ç»“æœ"cdefgab"ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥: <span class="hljs-attr">s</span> = <span class="hljs-string">"abcdefg"</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">2</span><br>è¾“å‡º: <span class="hljs-string">"cdefgab"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥: <span class="hljs-attr">s</span> = <span class="hljs-string">"lrloseumgh"</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">6</span><br>è¾“å‡º: <span class="hljs-string">"umghlrlose"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= k &lt; s.length &lt;= 10000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseLeftWords</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-keyword">return</span> s[n:]+s[:n]<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœä¸å…è®¸ä½¿ç”¨åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„æ‹¼æ¥</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseLeftWords</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        res = <span class="hljs-string">""</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-built_in">len</span>(s)):<br>            res += s[i]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            res += s[i]<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><p>ä»£ç ç®€æ´å¯ä»¥ç›´æ¥æ±‚ä½™è¿ç®—</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseLeftWords</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        res = <span class="hljs-string">""</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, n + <span class="hljs-built_in">len</span>(s)):<br>            res += s[i % <span class="hljs-built_in">len</span>(s)]<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ–¹æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer53-1 åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—â… </title>
    <link href="/2022/01/22/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer53-1/"/>
    <url>/2022/01/22/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer53-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—â… </p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»Ÿè®¡ä¸€ä¸ªæ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: nums = [5,7,7,8,8,10], target = 8</span><br><span class="hljs-section">è¾“å‡º: 2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: nums = [5,7,7,8,8,10], target = 6</span><br><span class="hljs-section">è¾“å‡º: 0</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= nums.length &lt;= 105</li><li>-109&nbsp;&lt;= nums[i]&nbsp;&lt;= 109</li><li>nums&nbsp;æ˜¯ä¸€ä¸ªéé€’å‡æ•°ç»„</li><li>-109&nbsp;&lt;= target&nbsp;&lt;= 109</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥éå†ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        result = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> item==target:<br>                result += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></tbody></table></figure><p>æ³¨æ„åˆ°è¿™é‡Œæ˜¯æ’åºå¥½çš„æ•°ç»„å¯ä»¥ç›´æ¥æ‰¾å¯»ä¸¤ä¸ªæ•°å­—çš„æœ€å·¦è¾¹æˆ–è€…æœ€å³è¾¹å†æ±‚å·®</p><p>æ±‚æœ€å·¦ä¾§çš„indexï¼Œå¯ä»¥ç”¨<code>func(target)- func(target-1)</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#äºŒåˆ†æ³•</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">tar</span>):</span><br>            i, j = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> i&lt;=j: <span class="hljs-comment">#å½“æ•°ç»„åªæœ‰ä¸€ä¸ªæ•°å­—æ—¶ [1] æ‰¾å¯»0 </span><br>                m = (i+j)//<span class="hljs-number">2</span><br>                <span class="hljs-keyword">if</span> nums[m]&lt;=tar: <span class="hljs-comment">#æ‰¾å¯»æœ€å³ç‚¹</span><br>                    i = m+<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:j = m-<span class="hljs-number">1</span>  <br>            <span class="hljs-built_in">print</span>(i,j) <br>            <span class="hljs-keyword">return</span> j<br>        <span class="hljs-keyword">return</span> func(target)- func(target-<span class="hljs-number">1</span>)<br><br></code></pre></td></tr></tbody></table></figure><p>æ³¨æ„æ¨¡æ¿ï¼Œ<code>i&lt;=j</code>,è¿”å›<code>j</code></p><p>æ±‚æœ€å³ä¾§çš„indexï¼Œå¯ä»¥ç”¨<code>func(target+1)- func(target)</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-comment">#äºŒåˆ†æ³•</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">tar</span>):</span><br>            i, j = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> i&lt;=j: <span class="hljs-comment">#å½“æ•°ç»„åªæœ‰ä¸€ä¸ªæ•°å­—æ—¶ [1] æ‰¾å¯»0 </span><br>                m = (i+j)//<span class="hljs-number">2</span><br>                <span class="hljs-keyword">if</span> nums[m]&lt;=tar: <span class="hljs-comment">#æ‰¾å¯»æœ€å³ç‚¹</span><br>                    i = m+<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:j = m-<span class="hljs-number">1</span>  <br>            <span class="hljs-built_in">print</span>(i,j) <br>            <span class="hljs-keyword">return</span> j<br>        <span class="hljs-keyword">return</span> func(target)- func(target-<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æŸ¥æ‰¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>äºŒåˆ†æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer52 ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹</title>
    <link href="/2022/01/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer52/"/>
    <url>/2022/01/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer52/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªé“¾è¡¨ï¼Œæ‰¾å‡ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer52-1.png" alt=""></p><p>åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer52-2.png" alt=""></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">intersectVal</span> = <span class="hljs-number">8</span>, <span class="hljs-attr">listA</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">listB</span> = [<span class="hljs-number">5</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">skipA</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">skipB</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼šReference of the node <span class="hljs-keyword">with</span> <span class="hljs-attr">value</span> = <span class="hljs-number">8</span><br>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º <span class="hljs-number">8</span> ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º <span class="hljs-number">0</span>ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]ï¼Œé“¾è¡¨ B ä¸º [<span class="hljs-number">5</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ <span class="hljs-number">2</span> ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ <span class="hljs-number">3</span> ä¸ªèŠ‚ç‚¹ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer52-3.png" alt=""></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">intersectVal</span>&nbsp;= <span class="hljs-number">2</span>, <span class="hljs-attr">listA</span> = [<span class="hljs-number">0</span>,<span class="hljs-number">9</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>], <span class="hljs-attr">listB</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>], <span class="hljs-attr">skipA</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">skipB</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼šReference of the node <span class="hljs-keyword">with</span> <span class="hljs-attr">value</span> = <span class="hljs-number">2</span><br>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º <span class="hljs-number">2</span> ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º <span class="hljs-number">0</span>ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [<span class="hljs-number">0</span>,<span class="hljs-number">9</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]ï¼Œé“¾è¡¨ B ä¸º [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ <span class="hljs-number">3</span> ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ <span class="hljs-number">1</span> ä¸ªèŠ‚ç‚¹ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer52-4.png" alt=""></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">intersectVal</span> = <span class="hljs-number">0</span>, <span class="hljs-attr">listA</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>], <span class="hljs-attr">listB</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">skipA</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">skipB</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-literal">null</span><br>è¾“å…¥è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>]ï¼Œé“¾è¡¨ B ä¸º [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>]ã€‚ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º <span class="hljs-number">0</span>ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚<br>è§£é‡Šï¼šè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› <span class="hljs-literal">null</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› null.</li><li>åœ¨è¿”å›ç»“æœåï¼Œä¸¤ä¸ªé“¾è¡¨ä»é¡»ä¿æŒåŸæœ‰çš„ç»“æ„ã€‚</li><li>å¯å‡å®šæ•´ä¸ªé“¾è¡¨ç»“æ„ä¸­æ²¡æœ‰å¾ªç¯ã€‚</li><li>ç¨‹åºå°½é‡æ»¡è¶³ O(n) æ—¶é—´å¤æ‚åº¦ï¼Œä¸”ä»…ç”¨ O(1) å†…å­˜ã€‚</li><li>æœ¬é¢˜ä¸ä¸»ç«™ 160 é¢˜ç›¸åŒï¼š<a href="https://leetcode-cn.com/problems/intersection-of-two-linked-lists/">https://leetcode-cn.com/problems/intersection-of-two-linked-lists/</a></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¿™é“é¢˜åˆšæ‹¿åˆ°è§‰å¾—å¾ˆç®€å•ï¼Œå¯ä»¥æŠŠæ•°å­—ç”¨æ•°ç»„å­˜ä¸‹æ¥ï¼Œç„¶åä»åå‘å‰æ‰¾å¯»å…¬å…±èŠ‚ç‚¹ã€‚ä½†æ˜¯æœ‰ä¸€é¡¹è¦æ±‚<code>ç¨‹åºå°½é‡æ»¡è¶³ O(n) æ—¶é—´å¤æ‚åº¦ï¼Œä¸”ä»…ç”¨ O(1) å†…å­˜ã€‚</code>å¾ˆéš¾æ»¡è¶³ã€‚</p><p>çœ‹å¤§ä½¬çš„é¢˜è§£çœŸæ˜¯å¦™ä¸å¯è¨€ï¼Œç”šè‡³è¿˜è¢«è™äº†</p><blockquote><p>ã€Šä½ çš„åå­—ã€‹</p><p>ä½ å˜æˆæˆ‘ï¼Œèµ°è¿‡æˆ‘èµ°è¿‡çš„è·¯ã€‚<br>æˆ‘å˜æˆä½ ï¼Œèµ°è¿‡ä½ èµ°è¿‡çš„è·¯ã€‚<br>ç„¶åæˆ‘ä»¬ä¾¿ç›¸é‡äº†â€¦</p></blockquote><p>ä½¿ç”¨åŒæŒ‡é’ˆAï¼ŒBï¼›å½“ä»–ä»¬åŒæ—¶å¼€å§‹è¿åŠ¨ï¼ŒAéå†å®ŒheadAé“¾è¡¨å°±éå†headBé“¾è¡¨ï¼Œè€ŒBéå†å®ŒheadBé“¾è¡¨å°±éå†Aé“¾è¡¨ã€‚Aå’ŒBæ€»ä¼šç›¸é‡è¦ä¹ˆæ˜¯ç©ºï¼Œè¦ä¹ˆæ˜¯å…¬å…±èŠ‚ç‚¹ã€‚</p><p>èƒŒåçš„åŸç†æ˜¯ï¼šå‡è®¾Aé“¾è¡¨çš„é•¿åº¦ä¸ºaï¼ŒBé“¾è¡¨é•¿åº¦ä¸ºbï¼Œå…¬å…±éƒ¨åˆ†ä¸ºcï¼›é‚£ä¹ˆåœ¨ç›¸é‡ä¹‹å‰Aä¼šèµ°a+b-cæ­¥ï¼ŒBä¼šèµ°b+a-cæ­¥ï¼Œä»–ä»¬èµ°çš„æ­¥æ•°æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åªè¦ä»–ä»¬åŒæ—¶å¼€å§‹è¿åŠ¨ï¼ŒAæŒ‡é’ˆæŒ‰ç…§Aé“¾è¡¨Bé“¾è¡¨ï¼ŒBæŒ‡é’ˆæŒ‰ç…§Bé“¾è¡¨Aé“¾è¡¨ï¼Œå°±ä¼šåœ¨èŠ‚ç‚¹å¤„ç›¸é‡ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getIntersectionNode</span>(<span class="hljs-params">self, headA: ListNode, headB: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-comment"># å…¬å…±èŠ‚ç‚¹ä¸ä»…å€¼ç›¸ç­‰ï¼Œå®é™…ä¸Šå°±æ˜¯åŒä¸€èŠ‚ç‚¹</span><br>        A,B = headA,headB<br>        <span class="hljs-keyword">while</span>(A!=B):<br>            A = A.<span class="hljs-built_in">next</span> <span class="hljs-keyword">if</span> A <span class="hljs-keyword">else</span> headB<br>            B = B.<span class="hljs-built_in">next</span> <span class="hljs-keyword">if</span> B <span class="hljs-keyword">else</span> headA<br>        <span class="hljs-keyword">return</span> A<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŒæŒ‡é’ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŒæŒ‡é’ˆ</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer46 æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</title>
    <link href="/2022/01/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer46/"/>
    <url>/2022/01/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer46/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æŠŠå®ƒç¿»è¯‘ä¸ºå­—ç¬¦ä¸²ï¼š0 ç¿»è¯‘æˆ â€œaâ€ ï¼Œ1 ç¿»è¯‘æˆ â€œbâ€ï¼Œâ€¦â€¦ï¼Œ11 ç¿»è¯‘æˆ â€œlâ€ï¼Œâ€¦â€¦ï¼Œ25 ç¿»è¯‘æˆ â€œzâ€ã€‚ä¸€ä¸ªæ•°å­—å¯èƒ½æœ‰å¤šä¸ªç¿»è¯‘ã€‚è¯·ç¼–ç¨‹å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è®¡ç®—ä¸€ä¸ªæ•°å­—æœ‰å¤šå°‘ç§ä¸åŒçš„ç¿»è¯‘æ–¹æ³•ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥: <span class="hljs-number">12258</span><br>è¾“å‡º: <span class="hljs-number">5</span><br>è§£é‡Š: <span class="hljs-number">12258</span>æœ‰<span class="hljs-number">5</span>ç§ä¸åŒçš„ç¿»è¯‘ï¼Œåˆ†åˆ«æ˜¯<span class="hljs-string">"bccfi"</span>, <span class="hljs-string">"bwfi"</span>, <span class="hljs-string">"bczi"</span>, <span class="hljs-string">"mcfi"</span>å’Œ<span class="hljs-string">"mzi"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= num &lt; 231</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œrecordè®°å½•numçš„å¯¹åº”ä½çš„ç¿»è¯‘æ•°ç›®ï¼ŒåŠ¨æ€è§„åˆ’çš„è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">record[i+<span class="hljs-number">1</span>] = record[i] <span class="hljs-keyword">if</span> tempnum&gt;<span class="hljs-number">25</span> <span class="hljs-keyword">or</span> tempnum&lt;<span class="hljs-number">10</span> <span class="hljs-keyword">else</span> record[i]+record[i-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure><p><code>tempnum</code>è¡¨ç¤ºæ­¤ä½å’Œå‰ä¸€ä½ç»„æˆçš„æ•°å­—ï¼Œæ³¨æ„<code>tempnum</code>çš„èŒƒå›´ï¼Œå¦‚æœå°äº10ï¼Œåˆ™è¿˜æ˜¯ç­‰äºå‰ä¸€ä½çš„recordã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">translateNum</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> num&lt;<span class="hljs-number">10</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        record = [<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>)]<br>        s = <span class="hljs-built_in">str</span>(num)<br>        <span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(s):<br>            <span class="hljs-keyword">if</span> i==<span class="hljs-number">0</span>: <span class="hljs-keyword">continue</span><br>            temp = s[i-<span class="hljs-number">1</span>]+s[i]<br>            tempnum = <span class="hljs-built_in">int</span>(temp)<br>            record[i+<span class="hljs-number">1</span>] = record[i] <span class="hljs-keyword">if</span> tempnum&gt;<span class="hljs-number">25</span> <span class="hljs-keyword">or</span> tempnum&lt;<span class="hljs-number">10</span> <span class="hljs-keyword">else</span> record[i]+record[i-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> record[<span class="hljs-built_in">len</span>(s)]<br></code></pre></td></tr></tbody></table></figure><p>ç»ä»°ä¸€ä¸‹å¤§ä½¬çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">translateNum</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        s = <span class="hljs-built_in">str</span>(num)<br>        a = b = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">len</span>(s) + <span class="hljs-number">1</span>):<br>            a, b = (a + b <span class="hljs-keyword">if</span> <span class="hljs-string">"10"</span> &lt;= s[i - <span class="hljs-number">2</span>:i] &lt;= <span class="hljs-string">"25"</span> <span class="hljs-keyword">else</span> a), a<br>        <span class="hljs-keyword">return</span> a<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šåªéœ€è¦ä¸¤ä¸ªä¿¡æ¯å°±å¯ä»¥æ¨æ–­å½“å‰çš„recordï¼Œaè¡¨ç¤ºå½“å‰ä¿¡æ¯ï¼Œbä¸ºå‰ä¸€ä½ä¿¡æ¯ï¼Œä½¿ç”¨aï¼Œbæ¥æ›´æ–°åç»­ä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--ç¥ç»ç½‘ç»œ</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis11/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis11/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯ç¥ç»ç½‘ç»œï¼Œç®€è¦ä»‹ç»æ¦‚å¿µå’Œåå‘ä¼ æ’­ï¼Œåé¢æ˜¯sklearn â€‹æ¥â€‹å»ºæ¨¡â€‹å“ˆâ€‹ã€‚â˜€ï¸</p></blockquote><h1>1 ç¥ç»ç½‘ç»œ â³</h1><h2 id="1-1-BPç¥ç»ç½‘ç»œ">1.1 BPç¥ç»ç½‘ç»œ</h2><p><img src="https://picture.mulindya.com/image-20210128233510841.png" alt=""></p><p>æ ¹æ®çœŸå®å€¼ï¼Œå¯¹äºåç½®å’Œæƒé‡è¿›è¡Œæ›´æ–°</p><p><img src="https://picture.mulindya.com/image-20210129000757438.png" alt=""></p><h2 id="1-2-è®¡ç®—">1.2 è®¡ç®—</h2><blockquote><p>ç¥ç»å…ƒ4ï¼š0.332</p><p>ç¥ç»å…ƒ5ï¼š0.525</p><p>ç¥ç»å…ƒ6ï¼š0.474</p><p>Err6 = 0.1311 Err4 = -0.0087 Err5 = -0.0065</p><p>å­¦ä¹ ç‡ä¸ºï¼š0.9</p><p>æ›´æ–°ï¼š</p><p>æƒé‡æ›´æ–°ï¼š</p><p>w46 = -0.3 + 0.9*0.1311*0.332 = -0.261          w56 = -0.2 + 0.9*0.1311*0.525 = 0.138</p><p>w14 = -0.2 + 0.9*-0.0087*1 = 0.192                 w15 = -0.3 + 0.9*-0.0065* = -0.306</p><p>w24 = -0.4 + 0.9*-0.0087*0 = -0.4                    w25 = -0.1 + 0.9*-0.0065*0 = 0.1</p><p>w34 = -0. + 0.9*-0.0087*1 = -0.508                  w35 = 0.2 + 0.9*-0.0065*1 = 0.194</p><p>åç½®é¡¹æ›´æ–°ï¼š</p><p>Î¸6 = 0.1+0.9*0.1311 = 0.218                              Î¸5 = 0.2+0.9*-0.0065 = 0.194</p><p>Î¸4 = -0.4+0.9*-0.0087 = -0.408</p></blockquote><h1>2 æ¡ˆä¾‹åˆ†æ ğŸ”†</h1><h2 id="2-1-åˆ‡åˆ†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼">2.1 åˆ‡åˆ†ç‰¹å¾å€¼å’Œç›®æ ‡å€¼</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">feature = data.loc[:,<span class="hljs-string">'gender'</span>:]<br><span class="hljs-built_in">print</span>(feature.head())<br>label = data[<span class="hljs-string">'churn'</span>]<br><span class="hljs-built_in">print</span>(label.head())<br></code></pre></td></tr></tbody></table></figure><h2 id="2-2-å°†æ•°æ®é›†è¿›è¡Œåˆ‡åˆ†">2.2 å°†æ•°æ®é›†è¿›è¡Œåˆ‡åˆ†</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br>X_train,X_test,y_train,y_test = train_test_split(feature,label)<br></code></pre></td></tr></tbody></table></figure><p>#ç¥ç»ç½‘ç»œéœ€è¦å¯¹æ•°æ®è¿›è¡Œæå·®æ ‡å‡†åŒ– æ˜¯ä¸€ä¸ªé»‘ç›’æ¨¡å‹<br>#å˜é‡æ˜¯è¿ç»­å˜é‡ï¼Œåˆ†ç±»å˜é‡ ä¸€èˆ¬æ•°æ®å¤„ç†è¦æ±‚è¿›è¡Œæå·®æ ‡å‡†åŒ– åˆ†ç±»å˜é‡éœ€è¦è½¬æ¢ä¸ºè™šæ‹Ÿå˜é‡<br>#ä½†æ˜¯ä¹Ÿå¯ä»¥ç‰¹æ®Šå¤„ç† å¤šåˆ†ç±»åä¹‰å˜é‡å¿…é¡»è½¬åŒ–ä¸ºå¯»å˜é‡ ç­‰çº§å˜é‡å’ŒäºŒåˆ†ç±»å˜é‡å¯ä»¥ä¸è½¬æ¢å½“ä½œè¿ç»­å˜é‡å¤„ç†</p><h2 id="2-3-åˆ©ç”¨æ•°æ®è¿›è¡Œè®­ç»ƒè½¬æ¢å™¨">2.3 åˆ©ç”¨æ•°æ®è¿›è¡Œè®­ç»ƒè½¬æ¢å™¨</h2><p>åº”ç”¨è®­ç»ƒé›†xæ•°æ®çš„å›ºæœ‰å±æ€§ï¼Œå°†å…¶åº”ç”¨äºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> MinMaxScaler<br>scaler = MinMaxScaler()<br>scaler.fit(X_train)<br><span class="hljs-comment">#å¾—åˆ°æ•°æ®è½¬åŒ–ä¹‹åçš„æ•°æ®</span><br>scaler_train_data = scaler.transform(X_train)<br>scaler_test_data = scaler.transform(X_test)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-4-æ„å»ºæ„ŸçŸ¥å™¨æ¨¡å‹">2.4 æ„å»ºæ„ŸçŸ¥å™¨æ¨¡å‹</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#è®¾ç½®ä¸€ä¸ªéšè—å±‚ å’Œ10ä¸ªç¥ç»å…ƒ</span><br><span class="hljs-keyword">from</span> sklearn.neural_network <span class="hljs-keyword">import</span> MLPClassifier<br>mlp = MLPClassifier(hidden_layer_sizes=(<span class="hljs-number">10</span>,),activation=<span class="hljs-string">'logistic'</span>)<br>mlp.fit(scaler_train_data,y_train)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-5-é¢„æµ‹æ¨¡å‹">2.5 é¢„æµ‹æ¨¡å‹</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">y_predict = mlp.predict(scaler_test_data)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-6-è¯„ä¼°æ¨¡å‹">2.6 è¯„ä¼°æ¨¡å‹</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sklearn.metrics <span class="hljs-keyword">as</span> metrics<br><span class="hljs-built_in">print</span>(metrics.classification_report(y_test,y_predict))<br><span class="hljs-comment">#æ··æ·†çŸ©é˜µ</span><br><span class="hljs-built_in">print</span>(metrics.confusion_matrix(y_test,y_predict,labels=[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]))<br><span class="hljs-comment">#å¹³å‡å‡†ç¡®ç‡</span><br>mlp.score(scaler_test_data,y_test)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-7-å¯»æ‰¾æœ€ä¼˜å‚æ•°">2.7 å¯»æ‰¾æœ€ä¼˜å‚æ•°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯»æ‰¾æœ€ä¼˜å‚æ•°</span><br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV<br>param ={<br>    <span class="hljs-string">'hidden_layer_sizes'</span>:[(<span class="hljs-number">10</span>,),(<span class="hljs-number">20</span>,)],<br>    <span class="hljs-string">'activation'</span>:[ <span class="hljs-string">'logistic'</span>, <span class="hljs-string">'tanh'</span>, <span class="hljs-string">'relu'</span>],<br>    <span class="hljs-string">'alpha'</span>:[<span class="hljs-number">0.001</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.01</span>]<br>}<br>newmlp = MLPClassifier(max_iter=<span class="hljs-number">1000</span>)<br><span class="hljs-comment">#cv=5è¡¨ç¤º5æŠ˜äº¤å‰éªŒè¯</span><br>gsc = GridSearchCV(estimator=newmlp,param_grid=param,scoring=<span class="hljs-string">'roc_auc'</span>,cv=<span class="hljs-number">5</span>)<br>gsc.fit(scaler_train_data,y_train)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--æœ´ç´ è´å¶æ–¯</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis10/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis10/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯æœ´ç´ è´å¶æ–¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ†ç±»æ¨¡å‹â€‹ï¼Œâ€‹å…·ä½“â€‹è²Œä¼¼ç”¨çš„è€Œä¸å¤ªå¤šâ€‹ï¼Œâ€‹æ‰€ä»¥æˆ‘å¥½åƒä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šï¼Œçœ‹åç»­æ˜¯å¦éœ€è¦å†äº†è§£ä¸€ä¸‹ã€‚â˜€ï¸</p></blockquote><h1>1 æœ´ç´ è´å¶æ–¯ ğŸ””</h1><h2 id="1-1-å®šä¹‰">1.1 å®šä¹‰</h2><p>åˆ†ç±»æ¨¡å‹ï¼Œæ„é€ åŸºç¡€è´å¶æ–¯ç†è®º</p><p>æœ´ç´ è´å¶æ–¯æ˜¯åŸºäºè´å¶æ–¯å®šç†å’Œå…¨æ¦‚ç‡å…¬å¼ï¼Œå¯ä»¥è®¡ç®—åœ¨è‡ªå˜é‡ä¸€å®šå–å€¼æ¡ä»¶ä¸‹ï¼Œå› å˜é‡çš„æ¡ä»¶æ¦‚ç‡é™åˆ¶äº†è‡ªå˜é‡çš„å–å€¼ç±»å‹ï¼ˆ<strong>åˆ†ç±»å˜é‡</strong>ï¼‰ï¼Œå¹¶ä¸”è‡ªå˜é‡<strong>ç›¸äº’ç‹¬ç«‹</strong>ï¼›</p><h2 id="1-2-å…¬å¼">1.2 å…¬å¼</h2><h3 id="1-2-1-å…¨æ¦‚ç‡å…¬å¼">1.2.1 å…¨æ¦‚ç‡å…¬å¼</h3><p><img src="https://picture.mulindya.com/image-20210128105624694.png" alt=""></p><h3 id="1-2-2-è´å¶æ–¯å…¬å¼">1.2.2 è´å¶æ–¯å…¬å¼</h3><p><img src="https://picture.mulindya.com/image-20210128105642741.png" alt=""></p><h3 id="1-2-3-é«˜æ–¯æ¨¡å‹">1.2.3 é«˜æ–¯æ¨¡å‹</h3><table><thead><tr><th>æ¨¡å‹</th><th>å¤´æ–‡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é«˜æ–¯æ¨¡å‹</td><td>from sklearn.naive_bayes import GaussianNB</td><td>æœ‰äº›ç‰¹å¾å¯èƒ½æ˜¯è¿ç»­å‹å˜é‡</td></tr><tr><td>ä¼¯åŠªåˆ©æ¨¡å‹</td><td>from sklearn.naive_bayes import BernoulliNB</td><td>ä½¿ç”¨ç‰¹å¾ä¸ºå…¨å±€ç‰¹å¾ï¼Œåœ¨ä¼¯åŠªåˆ©æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªç‰¹å¾çš„ç‰¹å¾æ˜¯å¸ƒå°”ç±»å‹</td></tr><tr><td>å¤šé¡¹å¼æ¨¡å‹</td><td>from sklearn.naive_bayes import MultinomialNB</td><td>å¸¸ç”¨æ–‡æœ¬åˆ†ç±» ç‰¹å¾æ˜¯å•è¯å€¼å‡ºç°çš„æ¬¡æ•°</td></tr></tbody></table><h2 id="1-3-æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ç³»æ•°">1.3 æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ç³»æ•°</h2><p>å‡ºç°åŸå› ï¼šåœ¨è®­ç»ƒæ ·æœ¬è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‡ºç°ä¸€äº›ç‰¹å¾çš„ç¼ºå¤±ï¼ŒæŸäº›ç‰¹å¾å‡ºç°çš„æ¬¡æ•°ä¸º0,ä»¥æ­¤æ–¹å¼è®¡ç®—æ—¶å¯èƒ½æœ€ç»ˆç»“æœä¸º0ï¼›<br>$$<br>p(x1,x2,x3,â€¦|yi) = p(x1|yi)p(x2|yi)p(x3|yi)<br>$$</p><p>$$<br>pi = (Ni+a)/(N+a*m)<br>$$</p><p>aï¼šå¹³æ»‘ç³»æ•°ï¼›mï¼šç‰¹å¾å€¼å‘é‡ä¸ªæ•°ï¼›a=1æ—¶ç§°ä¸ºæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘</p><h1>2 æ–‡æœ¬ç‰¹å¾æå– ğŸ</h1><p>ç”¨äºæ–‡æ¡£åˆ†ç±» åƒåœ¾é‚®ä»¶åˆ†ç±» æ–°é—»åˆ†ç±» æ–‡æœ¬åˆ†ç±»æ˜¯é€šè¿‡è¯æ˜¯å¦å­˜åœ¨æˆ–è€…è¯çš„é‡è¦æ€§ï¼ˆæ¦‚ç‡ï¼‰æ¥è¡¨ç¤º</p><h2 id="2-1-æ–‡æ¡£ä¸­è¯çš„å‡ºç°">2.1 æ–‡æ¡£ä¸­è¯çš„å‡ºç°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_extraction.text <span class="hljs-keyword">import</span> CountVectorizer<br>data2 = [<br>    <span class="hljs-string">'i love python'</span>,<br>    <span class="hljs-string">'life is short,i use python'</span>,<br>    <span class="hljs-string">'i dislike python'</span><br>]<br>cv = CountVectorizer()<br>cv.fit_transform(data2).toarray()<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>       [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],<br>       [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]], dtype=int64)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">cv.get_feature_names()<br>ç»“æœä¸ºï¼š[<span class="hljs-string">'dislike'</span>, <span class="hljs-string">'is'</span>, <span class="hljs-string">'life'</span>, <span class="hljs-string">'love'</span>, <span class="hljs-string">'python'</span>, <span class="hljs-string">'short'</span>, <span class="hljs-string">'use'</span>]<br></code></pre></td></tr></tbody></table></figure><h2 id="2-2-æ–‡ç« ä¸­è¯çš„é‡è¦æ€§">2.2 æ–‡ç« ä¸­è¯çš„é‡è¦æ€§</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_extraction.text <span class="hljs-keyword">import</span> TfidfVectorizer<br>tv = TfidfVectorizer(stop_words=<span class="hljs-string">'english'</span>)<br>tv.fit_transform(data2).toarray()<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">array([[<span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.861037</span>  , <span class="hljs-number">0.50854232</span>, <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.</span>        ],<br>       [<span class="hljs-number">0.</span>        , <span class="hljs-number">0.54645401</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.32274454</span>, <span class="hljs-number">0.54645401</span>,<br>        <span class="hljs-number">0.54645401</span>],<br>       [<span class="hljs-number">0.861037</span>  , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.50854232</span>, <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.</span>        ]])<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">tv.vocabulary_<br>ç»“æœæ˜¯ {<span class="hljs-string">'love'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'python'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'life'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'short'</span>: <span class="hljs-number">4</span>, <span class="hljs-string">'use'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">'dislike'</span>: <span class="hljs-number">0</span>}<br>tv.get_feature_names()<br>ç»“æœæ˜¯ [<span class="hljs-string">'dislike'</span>, <span class="hljs-string">'life'</span>, <span class="hljs-string">'love'</span>, <span class="hljs-string">'python'</span>, <span class="hljs-string">'short'</span>, <span class="hljs-string">'use'</span>]<br></code></pre></td></tr></tbody></table></figure><h2 id="2-3-å…³äºä¸­æ–‡æ–‡ç« è¿›è¡Œåˆ†æçš„é—®é¢˜">2.3 å…³äºä¸­æ–‡æ–‡ç« è¿›è¡Œåˆ†æçš„é—®é¢˜</h2><h3 id="2-3-1-ç»“å·´åˆ†è¯">2.3.1 ç»“å·´åˆ†è¯</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> jieba<br>data3 = [<br>    <span class="hljs-string">'å› ä¸ºåœ¨å®é™…çš„è®­ç»ƒä¸­ï¼Œè®­ç»ƒçš„ç»“æœå¯¹äºè®­ç»ƒé›†çš„æ‹Ÿåˆç¨‹åº¦é€šå¸¸è¿˜æ˜¯æŒºå¥½çš„'</span>,<br>    <span class="hljs-string">'ä½†æ˜¯å¯¹äºè®­ç»ƒé›†ä¹‹å¤–çš„æ•°æ®çš„æ‹Ÿåˆç¨‹åº¦é€šå¸¸å°±ä¸é‚£ä¹ˆä»¤äººæ»¡æ„äº†ã€‚'</span>,<br>    <span class="hljs-string">'å› æ­¤æˆ‘ä»¬é€šå¸¸å¹¶ä¸ä¼šæŠŠæ‰€æœ‰çš„æ•°æ®é›†éƒ½æ‹¿æ¥è®­ç»ƒ'</span><br>]<br>datalist=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(data3)):<br>    newlist=[]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> jieba.cut(data3[i]):<br>        newlist.append(j)<br>    content = (<span class="hljs-string">' '</span>).join(newlist)<br>    datalist.append(content)<br>ch_tf = TfidfVectorizer(stop_words=[<span class="hljs-string">'çš„'</span>,<span class="hljs-string">'ï¼ˆ'</span>,<span class="hljs-string">'ï¼‰'</span>,<span class="hljs-string">'ï¼Œ'</span>,<span class="hljs-string">'ã€‚'</span>,<span class="hljs-string">'äº†'</span>])<br>ch_tf.fit_transform(datalist).toarray() <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">array([[<span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.32927047</span>,<br>        <span class="hljs-number">0.</span>        , <span class="hljs-number">0.32927047</span>, <span class="hljs-number">0.25041868</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.25041868</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.25041868</span>, <span class="hljs-number">0.32927047</span>,<br>        <span class="hljs-number">0.58341732</span>, <span class="hljs-number">0.32927047</span>, <span class="hljs-number">0.19447244</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        ],<br>       [<span class="hljs-number">0.</span>        , <span class="hljs-number">0.37766105</span>, <span class="hljs-number">0.37766105</span>, <span class="hljs-number">0.37766105</span>, <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.28722096</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.28722096</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.28722096</span>, <span class="hljs-number">0.28722096</span>, <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.2230527</span> , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.2230527</span> , <span class="hljs-number">0.37766105</span>, <span class="hljs-number">0.</span>        ],<br>       [<span class="hljs-number">0.37072514</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.37072514</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        , <span class="hljs-number">0.37072514</span>, <span class="hljs-number">0.37072514</span>,<br>        <span class="hljs-number">0.</span>        , <span class="hljs-number">0.37072514</span>, <span class="hljs-number">0.28194602</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.</span>        ,<br>        <span class="hljs-number">0.21895624</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.21895624</span>, <span class="hljs-number">0.</span>        , <span class="hljs-number">0.37072514</span>]])<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">ch_tf.get_feature_names()<br>ç»“æœæ˜¯ [<span class="hljs-string">'ä¸ä¼š'</span>,<br> <span class="hljs-string">'ä¹‹å¤–'</span>,<br> <span class="hljs-string">'ä»¤äººæ»¡æ„'</span>,<br> <span class="hljs-string">'ä½†æ˜¯'</span>,<br> <span class="hljs-string">'å› ä¸º'</span>,<br> <span class="hljs-string">'å› æ­¤'</span>,<br> <span class="hljs-string">'å®é™…'</span>,<br> <span class="hljs-string">'å¯¹äº'</span>,<br> <span class="hljs-string">'æˆ‘ä»¬'</span>,<br> <span class="hljs-string">'æ‰€æœ‰'</span>,<br> <span class="hljs-string">'æ‹Ÿåˆ'</span>,<br> <span class="hljs-string">'æ‹¿æ¥'</span>,<br> <span class="hljs-string">'æ•°æ®'</span>,<br> <span class="hljs-string">'ç¨‹åº¦'</span>,<br> <span class="hljs-string">'ç»“æœ'</span>,<br> <span class="hljs-string">'è®­ç»ƒ'</span>,<br> <span class="hljs-string">'è¿˜æ˜¯'</span>,<br> <span class="hljs-string">'é€šå¸¸'</span>,<br> <span class="hljs-string">'é‚£ä¹ˆ'</span>,<br> <span class="hljs-string">'é›†éƒ½'</span>]<br></code></pre></td></tr></tbody></table></figure><h1></h1>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--KNN</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis9/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis9/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯KNNï¼Œæ˜¯ä¸€ä¸ªåˆ†ç±»ç®—æ³•ï¼›æ³¨æ„ç‚¹æ˜¯è·ç¦»çš„é€‰å–æ–¹å¼ã€‚è¿™é‡Œçš„æ¡ˆä¾‹åˆ†æå€¼å¾—å­¦ä¹ ä¸€ä¸‹ï¼Œå¯ä»¥å­¦ä¹ sklearnçš„ç›¸å…³ç”¨æ³•ã€‚â˜€ï¸</p></blockquote><h1>1 KNN ğŸ…</h1><h2 id="1-1-kè¿‘é‚»">1.1 kè¿‘é‚»</h2><p>æœ€è¿‘é‚»åŸŸæ³•ï¼šå±äºæƒ°æ€§ç®—æ³•</p><p>ç‰¹ç‚¹ï¼šä¸å¿…äº‹å…ˆåˆ›å»ºå…¨å±€çš„åˆ¤åˆ«å…¬å¼æˆ–è€…è§„åˆ™</p><h2 id="1-2-kè¿‘é‚»çš„ç®—æ³•">1.2 kè¿‘é‚»çš„ç®—æ³•</h2><ol><li>ä¸ºäº†åˆ¤åˆ«æœªçŸ¥æ•°æ®çš„ç±»åˆ«ï¼Œä»¥æ‰€æœ‰å·²çŸ¥çš„ç±»åˆ«å®ä¾‹ä½œä¸ºå‚è€ƒ</li><li>é‡è¦æ­¥éª¤:è®¡ç®—æœªçŸ¥å®ä¾‹ä¸æ‰€æœ‰å·²çŸ¥å®ä¾‹çš„è·ç¦»</li><li>é€‰æ‹©å‚è€ƒçš„å®ä¾‹å‚æ•°k</li><li>æ ¹æ®å°‘æ•°æœä»å¤šæ•°çš„åŸåˆ™ï¼Œè®©æœªçŸ¥çš„å®ä¾‹å½’ç±»äºkä¸ªæœ€è¿‘é‚»æ ·æœ¬ä¸­æœ€å¤šæ•°çš„ç±»åˆ«ï¼ˆæŠ•ç¥¨æ³•åˆ™ï¼‰</li></ol><h2 id="1-3-è·ç¦»çš„ç®—æ³•é€‰æ‹©">1.3 è·ç¦»çš„ç®—æ³•é€‰æ‹©</h2><h3 id="1-3-1-æ¬§æ°è·ç¦»">1.3.1 æ¬§æ°è·ç¦»</h3><p>æ¬§å‡ é‡Œå¾—åº¦é‡ï¼ˆeuclidean metricï¼‰ï¼ˆä¹Ÿç§°æ¬§æ°è·ç¦»ï¼‰æ˜¯ä¸€ä¸ªé€šå¸¸é‡‡ç”¨çš„è·ç¦»å®šä¹‰ï¼ŒæŒ‡åœ¨mç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„çœŸå®è·ç¦»ï¼Œæˆ–è€…å‘é‡çš„è‡ªç„¶é•¿åº¦ï¼ˆå³è¯¥ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼‰ã€‚åœ¨äºŒç»´å’Œä¸‰ç»´ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»å°±æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„å®é™…è·ç¦»ã€‚<br>$$<br>\rho = \sqrt{(x_2-x_1)<sup>2+(y_2-y_1)</sup>2}<br>$$</p><h3 id="1-3-2-é—µå¯å¤«æ–¯åŸºè·ç¦»ï¼š">1.3.2 é—µå¯å¤«æ–¯åŸºè·ç¦»ï¼š</h3><p>é—µæ°è·ç¦»æœ‰æ—¶ä¹ŸæŒ‡<a href="https://baike.baidu.com/item/%E6%97%B6%E7%A9%BA%E9%97%B4%E9%9A%94/894418">æ—¶ç©ºé—´éš”</a></p><p>â‘¡è®¾nç»´ç©ºé—´ä¸­æœ‰ä¸¤ç‚¹åæ ‡x, yï¼Œpä¸ºå¸¸æ•°ï¼Œé—µå¼è·ç¦»å®šä¹‰ä¸º [1]</p>$$D(x,y) = (\sum_{u=1}^n|x_u - y_u|^p)^{\frac{1}{p}}$$<p>æ³¨æ„ï¼š</p><p>ï¼ˆ1ï¼‰é—µæ°è·ç¦»ä¸ç‰¹å¾å‚æ•°çš„é‡çº²æœ‰å…³ï¼Œæœ‰ä¸åŒé‡çº²çš„ç‰¹å¾å‚æ•°çš„é—µæ°è·ç¦»å¸¸å¸¸æ˜¯æ— æ„ä¹‰çš„ã€‚</p><p>ï¼ˆ2ï¼‰é—µæ°è·ç¦»æ²¡æœ‰è€ƒè™‘ç‰¹å¾å‚æ•°é—´çš„ç›¸å…³æ€§ï¼Œè€Œé©¬å“ˆæ‹‰è¯ºæ¯”æ–¯è·ç¦»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="1-3-3-æ›¼å“ˆé¡¿è·ç¦»">1.3.3 æ›¼å“ˆé¡¿è·ç¦»</h3><p>ä¸¤ç‚¹åœ¨å—åŒ—æ–¹å‘ä¸Šçš„è·ç¦»åŠ ä¸Šåœ¨ä¸œè¥¿æ–¹å‘ä¸Šçš„è·ç¦»ï¼Œå³$d(i,j)=|x_i-x_j|+|y_i-y_j|$â€‹ã€‚</p><h3 id="1-3-4-å¯¹æ¯”è¯´æ˜">1.3.4 å¯¹æ¯”è¯´æ˜</h3><p>æ¬§å¼è·ç¦»ä½¿ç”¨å¾—æœ€å¤š <strong>è¿ç»­å æ¯”è¾ƒå¤§æ—¶ä½¿ç”¨æ¬§å¼è·ç¦»</strong> åˆ†ç±»å˜é‡</p><p><strong>è¿ç»­å æ¯”è¾ƒå°æ—¶ä½¿ç”¨æ›¼å“ˆé¡¿è·ç¦»</strong>  è™šæ‹Ÿå˜é‡</p><h2 id="1-4-äº¤å‰éªŒè¯">1.4 äº¤å‰éªŒè¯</h2><p>åœ¨ä½¿ç”¨è®­ç»ƒé›†å¯¹å‚æ•°è¿›è¡Œè®­ç»ƒçš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°äººä»¬é€šå¸¸ä¼šå°†ä¸€æ•´ä¸ªè®­ç»ƒé›†åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼ˆæ¯”å¦‚mnistæ‰‹å†™è®­ç»ƒé›†ï¼‰ã€‚ä¸€èˆ¬åˆ†ä¸ºï¼šè®­ç»ƒé›†ï¼ˆtrain_setï¼‰ï¼Œè¯„ä¼°é›†ï¼ˆvalid_setï¼‰ï¼Œæµ‹è¯•é›†ï¼ˆtest_setï¼‰è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚è¿™å…¶å®æ˜¯ä¸ºäº†ä¿è¯è®­ç»ƒæ•ˆæœè€Œç‰¹æ„è®¾ç½®çš„ã€‚å…¶ä¸­æµ‹è¯•é›†å¾ˆå¥½ç†è§£ï¼Œå…¶å®å°±æ˜¯å®Œå…¨ä¸å‚ä¸è®­ç»ƒçš„æ•°æ®ï¼Œä»…ä»…ç”¨æ¥è§‚æµ‹æµ‹è¯•æ•ˆæœçš„æ•°æ®ã€‚è€Œè®­ç»ƒé›†å’Œè¯„ä¼°é›†åˆ™ç‰µæ¶‰åˆ°ä¸‹é¢çš„çŸ¥è¯†äº†ã€‚</p><p>å› ä¸ºåœ¨å®é™…çš„è®­ç»ƒä¸­ï¼Œè®­ç»ƒçš„ç»“æœå¯¹äºè®­ç»ƒé›†çš„æ‹Ÿåˆç¨‹åº¦é€šå¸¸è¿˜æ˜¯æŒºå¥½çš„ï¼ˆåˆå§‹æ¡ä»¶æ•æ„Ÿï¼‰ï¼Œä½†æ˜¯å¯¹äºè®­ç»ƒé›†ä¹‹å¤–çš„æ•°æ®çš„æ‹Ÿåˆç¨‹åº¦é€šå¸¸å°±ä¸é‚£ä¹ˆä»¤äººæ»¡æ„äº†ã€‚å› æ­¤æˆ‘ä»¬é€šå¸¸å¹¶ä¸ä¼šæŠŠæ‰€æœ‰çš„æ•°æ®é›†éƒ½æ‹¿æ¥è®­ç»ƒï¼Œè€Œæ˜¯åˆ†å‡ºä¸€éƒ¨åˆ†æ¥ï¼ˆè¿™ä¸€éƒ¨åˆ†ä¸å‚åŠ è®­ç»ƒï¼‰å¯¹è®­ç»ƒé›†ç”Ÿæˆçš„å‚æ•°è¿›è¡Œæµ‹è¯•ï¼Œç›¸å¯¹å®¢è§‚çš„åˆ¤æ–­è¿™äº›å‚æ•°å¯¹è®­ç»ƒé›†ä¹‹å¤–çš„æ•°æ®çš„ç¬¦åˆç¨‹åº¦ã€‚è¿™ç§æ€æƒ³å°±ç§°ä¸ºäº¤å‰éªŒè¯ï¼ˆCross Validationï¼‰ã€‚</p><p><em><strong>K-fold Cross Validation</strong></em></p><p>å¦å¤–ä¸€ç§æŠ˜ä¸­çš„åŠæ³•å«åšKæŠ˜äº¤å‰éªŒè¯ï¼Œå’ŒLOOCVçš„ä¸åŒåœ¨äºï¼Œæˆ‘ä»¬æ¯æ¬¡çš„æµ‹è¯•é›†å°†ä¸å†åªåŒ…å«ä¸€ä¸ªæ•°æ®ï¼Œè€Œæ˜¯å¤šä¸ªï¼Œå…·ä½“æ•°ç›®å°†æ ¹æ®Kçš„é€‰å–å†³å®šã€‚æ¯”å¦‚ï¼Œå¦‚æœK=5ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ©ç”¨äº”æŠ˜äº¤å‰éªŒè¯çš„æ­¥éª¤å°±æ˜¯ï¼š</p><p>1.å°†æ‰€æœ‰æ•°æ®é›†åˆ†æˆ5ä»½</p><p>2.ä¸é‡å¤åœ°æ¯æ¬¡å–å…¶ä¸­ä¸€ä»½åšæµ‹è¯•é›†ï¼Œç”¨å…¶ä»–å››ä»½åšè®­ç»ƒé›†è®­ç»ƒæ¨¡å‹ï¼Œä¹‹åè®¡ç®—è¯¥æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„<img src="https://www.zhihu.com/equation?tex=MSE_i" alt="[å…¬å¼]"></p><p>3.å°†5æ¬¡çš„<img src="https://www.zhihu.com/equation?tex=MSE_i" alt="[å…¬å¼]">å–å¹³å‡å¾—åˆ°æœ€åçš„MSE</p>$$CV_{(k)} = \frac{1}{k} \sum_{i=1}^k MSE_i$$<h2 id="1-5-ROC-AUC">1.5 ROC AUC</h2><h3 id="1-5-1-ROCæ›²çº¿">1.5.1 ROCæ›²çº¿</h3><p><img src="https://picture.mulindya.com/image-20210127114408570.png" alt=""></p><p>å—è¯•è€…å·¥ä½œç‰¹å¾æ›²çº¿</p><p>ROCæ›²çº¿çš„æ¨ªåæ ‡æ˜¯å‡é˜³æ€§ç‡ï¼ˆFPRï¼‰çºµåæ ‡æ˜¯çœŸé˜³æ€§ç‡ï¼ˆTPRï¼‰</p><p>å‡é˜³æ€§ç‡ï¼šåœ¨å®é™…ä¸º0 è¢«é”™è¯¯åˆ¤å®šä¸º1æ¯”ä¾‹</p><p>çœŸé˜³æ€§ç‡ï¼šåœ¨å®é™…ä¸º1 è¢«æ­£ç¡®åˆ¤å®šä¸º1æ¯”ä¾‹</p><p><img src="https://picture.mulindya.com/image-20210127114531940.png" alt=""></p><p><img src="https://picture.mulindya.com/image-20210127114733950.png" alt=""></p><h3 id="1-5-2-AUC">1.5.2 AUC</h3><p>AUCï¼ˆArea Under Curveï¼‰è¢«å®šä¹‰ä¸º<a href="https://baike.baidu.com/item/ROC%E6%9B%B2%E7%BA%BF/775606">ROCæ›²çº¿</a>ä¸‹ä¸<a href="https://baike.baidu.com/item/%E5%9D%90%E6%A0%87%E8%BD%B4/9763108">åæ ‡è½´</a>å›´æˆçš„<a href="https://baike.baidu.com/item/%E9%9D%A2%E7%A7%AF/100551">é¢ç§¯</a>ï¼Œæ˜¾ç„¶è¿™ä¸ªé¢ç§¯çš„æ•°å€¼ä¸ä¼šå¤§äº1ã€‚åˆç”±äº<a href="https://baike.baidu.com/item/ROC%E6%9B%B2%E7%BA%BF/775606">ROCæ›²çº¿</a>ä¸€èˆ¬éƒ½å¤„äºy=xè¿™æ¡ç›´çº¿çš„ä¸Šæ–¹ï¼Œæ‰€ä»¥AUCçš„å–å€¼èŒƒå›´åœ¨0.5å’Œ1ä¹‹é—´ã€‚AUCè¶Šæ¥è¿‘1.0ï¼Œæ£€æµ‹æ–¹æ³•çœŸå®æ€§è¶Šé«˜;ç­‰äº0.5æ—¶ï¼Œåˆ™çœŸå®æ€§æœ€ä½ï¼Œæ— åº”ç”¨ä»·å€¼ã€‚</p><p><strong>ä»AUC åˆ¤æ–­åˆ†ç±»å™¨ï¼ˆé¢„æµ‹æ¨¡å‹ï¼‰ä¼˜åŠ£çš„æ ‡å‡†ï¼š</strong></p><ul><li>AUC = 1ï¼Œæ˜¯å®Œç¾åˆ†ç±»å™¨ã€‚</li><li>AUC = [0.85, 0.95], æ•ˆæœå¾ˆå¥½</li><li>AUC = [0.7, 0.85], æ•ˆæœä¸€èˆ¬</li><li>AUC = [0.5, 0.7],æ•ˆæœè¾ƒä½ï¼Œä½†ç”¨äºé¢„æµ‹è‚¡ç¥¨å·²ç»å¾ˆä¸é”™äº†</li><li>AUC = 0.5ï¼Œè·ŸéšæœºçŒœæµ‹ä¸€æ ·ï¼ˆä¾‹ï¼šä¸¢é“œæ¿ï¼‰ï¼Œæ¨¡å‹æ²¡æœ‰é¢„æµ‹ä»·å€¼ã€‚</li><li>AUC &lt; 0.5ï¼Œæ¯”éšæœºçŒœæµ‹è¿˜å·®ï¼›ä½†åªè¦æ€»æ˜¯åé¢„æµ‹è€Œè¡Œï¼Œå°±ä¼˜äºéšæœºçŒœæµ‹ã€‚</li></ul><h1>2 æ¡ˆä¾‹åˆ†æ ğŸ±</h1><h2 id="2-1-æ•°æ®é¢„å¤„ç†">2.1 æ•°æ®é¢„å¤„ç†</h2><h3 id="2-1-1-æå·®æ ‡å‡†åŒ–">2.1.1 æå·®æ ‡å‡†åŒ–</h3><p>$$<br>xâ€™ = (x - min(X))/(max(X)-min(X))<br>$$</p><h3 id="2-1-2-ä¸­å¿ƒæ ‡å‡†åŒ–">2.1.2 ä¸­å¿ƒæ ‡å‡†åŒ–</h3><h3 id="2-1-3-å“‘å˜é‡ç”Ÿæˆ">2.1.3 å“‘å˜é‡ç”Ÿæˆ</h3><h3 id="2-1-4-ä»£ç ">2.1.4 ä»£ç </h3><p>æå–ç‰¹å¾å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">features = data.loc[:,<span class="hljs-string">'income'</span>:<span class="hljs-string">'edueduclass'</span>]<br>features.head()<br></code></pre></td></tr></tbody></table></figure><p>æå–ç›®æ ‡å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">label = data.Dated<br>label.head()<br></code></pre></td></tr></tbody></table></figure><p>è¿ç»­å˜é‡è¿›è¡Œé¢„å¤„ç†ï¼Œè¿›è¡Œæ•°æ®æ ‡å‡†åŒ–ï¼Œæ¶ˆé™¤é‡çº²ä¸ä¸€è‡´å¯¹å„ä¸ªå˜é‡äº§ç”Ÿå¾—å½±å“ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ•°æ®é¢„å¤„ç†</span><br><span class="hljs-keyword">from</span> sklearn <span class="hljs-keyword">import</span> preprocessing<br>min_max_sca = preprocessing.MinMaxScaler()<br>features_sca = min_max_sca.fit_transform(features)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-2-åˆ‡å‰²æ•°æ®é›†">2.2 åˆ‡å‰²æ•°æ®é›†</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br>X_train, X_test, y_train, y_test = train_test_split(features_sca,label,test_size=<span class="hljs-number">0.2</span>)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-3-ä½¿ç”¨kè¿‘é‚»è®­ç»ƒæ¨¡å‹">2.3 ä½¿ç”¨kè¿‘é‚»è®­ç»ƒæ¨¡å‹</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier<br><span class="hljs-comment">#æ¨¡å‹è®­ç»ƒ</span><br>model = KNeighborsClassifier()<br>model.fit(X_train,y_train)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-4-é¢„æµ‹">2.4 é¢„æµ‹</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">y_predict = model.predict(X_test)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-5-è¯„ä¼°è®­ç»ƒç»“æœ">2.5 è¯„ä¼°è®­ç»ƒç»“æœ</h2><p>model.scoreï¼ˆï¼‰ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: model.score(X, y, sample_weight=<span class="hljs-literal">None</span>)<br>Docstring:<br>Returns the mean accuracy on the given test data <span class="hljs-keyword">and</span> labels.<br><br>In multi-label classification, this <span class="hljs-keyword">is</span> the subset accuracy<br>which <span class="hljs-keyword">is</span> a harsh metric since you require <span class="hljs-keyword">for</span> each sample that<br>each label <span class="hljs-built_in">set</span> be correctly predicted.<br></code></pre></td></tr></tbody></table></figure><p>metrics.classification_reportï¼ˆï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: metrics.classification_report(y_true, y_pred, labels=<span class="hljs-literal">None</span>, target_names=<span class="hljs-literal">None</span>, sample_weight=<span class="hljs-literal">None</span>, digits=<span class="hljs-number">2</span>, output_dict=<span class="hljs-literal">False</span>)<br>Docstring:<br>Build a text report showing the main classification metrics<br><br>Read more <span class="hljs-keyword">in</span> the :ref:`User Guide &lt;classification_report&gt;`.<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sklearn.metrics <span class="hljs-keyword">as</span> metrics<br><span class="hljs-built_in">print</span>(metrics.classification_report(y_test,y_predict))<br><span class="hljs-comment">#è®¡ç®—å¹³å‡å‡†ç¡®ç‡</span><br>model.score(X_test,y_test)<br></code></pre></td></tr></tbody></table></figure><h2 id="2-6-æ‰¾å‡ºæœ€ä¼˜å‚æ•°">2.6 æ‰¾å‡ºæœ€ä¼˜å‚æ•°</h2><h3 id="2-6-1-æ‰¾å‡ºæœ€ä¼˜å¾—å‚æ•°-kå€¼">2.6.1 æ‰¾å‡ºæœ€ä¼˜å¾—å‚æ•° kå€¼</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">x =[]<br>y=[]<br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">70</span>):<br>    modelk = KNeighborsClassifier(n_neighbors=item)<br>    modelk.fit(X_train,y_train)<br>    score = modelk.score(X_test,y_test)<br>    x.append(item)<br>    y.append(score)<br>   <span class="hljs-comment"># print("å½“kçš„å€¼ä¸ºï¼š",item,'score is',score)</span><br></code></pre></td></tr></tbody></table></figure><h3 id="2-6-2-äº¤å‰éªŒè¯">2.6.2 äº¤å‰éªŒè¯</h3><p>å½“æ ·æœ¬é‡è¾ƒå°æ—¶ï¼Œé€‚åˆé‡‡ç”¨äº¤å‰éªŒè¯ è¯„ä¼°æ¨¡å‹çš„æ•ˆæœ éœ€è¦è®¾å®šç”¨æˆ·æœç´¢ç©ºé—´</p><p>åæŠ˜äº¤å‰éªŒè¯</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> ParameterGrid,GridSearchCV<br>grid = ParameterGrid({<span class="hljs-string">'n_neighbors'</span>:[<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">15</span>)]})<br>new_model = KNeighborsClassifier()<br>knn_cv = GridSearchCV(new_model,grid,cv=<span class="hljs-number">10</span>,scoring=<span class="hljs-string">'roc_auc'</span>)<br>knn_cv.fit(X_train,y_train)<br></code></pre></td></tr></tbody></table></figure><p>GridSearchCV(new_model,grid,cv=10,scoring=â€˜roc_aucâ€™)ä¸­cv=10è¡¨ç¤ºåæŠ˜ï¼Œè¯„ä¼°æ ‡å‡†æ˜¯roc_auc</p><h3 id="2-6-3-è·å–AUC">2.6.3 è·å–AUC</h3><p>è·å–æµ‹è¯•é›†ä¸Šçš„AUCçš„å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">metrics.roc_auc_score(y_test,knn_cv.predict(X_test))<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--å†³ç­–æ ‘</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis8/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis8/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯å†³ç­–æ ‘ï¼Œç®€è¦ä»‹ç»å†³ç­–æ ‘çš„ç›¸å…³æ¦‚å¿µå’ŒæŒ‡æ ‡ã€‚</p></blockquote><h1>å†³ç­–æ ‘ ğŸŒ²</h1><p>ä¸€æ¡ä¿¡æ¯çš„ä¿¡æ¯é‡å¤§å°å’Œå®ƒçš„ä¸ç¡®å®šæ€§æœ‰ç›´æ¥å…³ç³»</p><h2 id="1-1-ç†µ">1.1 ç†µ</h2><h3 id="1-1-1-ä¿¡æ¯ç†µ">1.1.1 ä¿¡æ¯ç†µ</h3><p>ä¿¡æ¯ç†µï¼šåˆ¤å®šä¿¡æ¯çš„å¤§å°</p><p>ä¿¡æ¯ç†µçš„å•ä½ï¼šæ¯”ç‰¹</p><p><img src="https://picture.mulindya.com/image-20210126091622561.png" alt=""></p><h3 id="1-1-2-æ¡ä»¶ç†µ">1.1.2 æ¡ä»¶ç†µ</h3><p>å…¶ä¸­logåº•æ•°ä¸º2</p><p><img src="https://picture.mulindya.com/image-20210126093728857.png" alt=""></p><p>ä¿¡æ¯è·å–é‡ï¼šé€šè¿‡ç‰¹å¾å­—æ®µä½œä¸ºèŠ‚ç‚¹åˆ†ç±»è·å–äº†å¤šå°‘ä¿¡æ¯ï¼›</p><h2 id="1-2-ID3ç®—æ³•">1.2 ID3ç®—æ³•</h2><h3 id="1-2-1-ä¿¡æ¯å¢ç›Š">1.2.1 ä¿¡æ¯å¢ç›Š</h3><p>ä¿¡æ¯å¢ç›Šï¼šä¿¡æ¯ç†µ-æ¡ä»¶ç†µï¼›ä¿¡æ¯å¢ç›Šè¶Šå¤§ï¼Œåˆ™è¡¨ç¤ºä½¿ç”¨å…¶å±æ€§è¿›è¡Œåˆ†ç±»å†³ç­–åè·å¾—çš„â€œçº¯åº¦æå‡â€è¶Šå¤§ï¼›</p><p>é€‰æ‹©å¯¹å¤§çš„ä¿¡æ¯å¢ç›Šä½œä¸ºåˆ†ç±»èŠ‚ç‚¹</p><p><img src="https://picture.mulindya.com/image-20210126094613560.png" alt=""></p><h3 id="1-2-2-å¯¹æ¯”">1.2.2 å¯¹æ¯”</h3><p>id3æ˜¯å¯¹äºåˆ†ç±»å˜é‡åˆ†æï¼Œå› æ­¤éœ€è¦è¿ç»­å˜é‡ç¦»æ•£åŒ–</p><p><img src="https://picture.mulindya.com/image-20210126102244168.png" alt=""></p><h2 id="1-3-C4-5">1.3 C4.5</h2><p>ä¿¡æ¯å¢ç›Šç‡ï¼šåœ¨è‡ªå˜é‡Aæ¡ä»¶ä¸‹ï¼Œç›®æ ‡å˜é‡Dçš„ä¿¡æ¯å¢ç›Š/è‡ªå˜é‡Açš„ä¿¡æ¯ç†µ</p><p><img src="https://picture.mulindya.com/image-20210126102502529.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--é€»è¾‘å›å½’</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis7/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis7/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯é€»è¾‘å›å½’ï¼Œè™½ç„¶åå­—ç§°ä½œå›å½’ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯é’ˆå¯¹åˆ†ç±»çš„ç®—æ³•å“¦ï¼æ ‡è®°æ˜Ÿå·â­ï¸</p></blockquote><h1>1 åˆ†ç±»ç®—æ³•â€“é€»è¾‘å›å½’</h1><p>å› å˜é‡å¸¸ä¸ºäºŒåˆ†ç±»å˜é‡ï¼Œä»–çš„è‡ªå˜é‡æ—¢å¯ä»¥æ˜¯åˆ†ç±»å˜é‡åˆå¯ä»¥æ˜¯è¿ç»­å˜é‡ï¼Œé€»è¾‘å›å½’ä¹Ÿå¯ä»¥åšå¤šåˆ†ç±»å“ˆï¼ä¹Ÿå°±æ˜¯ä½¿ç”¨é€»è¾‘å›å½’çœ‹è¿™ä¸ªå˜é‡æ˜¯å¦è¢«é€‰ä¸­ï¼Œç„¶åå†æŠ•ç¥¨å°±å¥½å•¦ï¼Œæˆ–è€…ä½¿ç”¨softmaxä¹Ÿæ˜¯å¯ä»¥å“’ã€‚</p><blockquote><p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ä½¿å¾—é€»è¾‘å›å½’èƒ½è¿›è¡Œå¤šåˆ†ç±»ä»»åŠ¡ï¼š</p><p>ä¸€ã€å°†å¤šåˆ†ç±»ä»»åŠ¡æ‹†è§£æˆå¤šä¸ªäºŒåˆ†ç±»ä»»åŠ¡ï¼Œåˆ©ç”¨é€»è¾‘å›å½’åˆ†ç±»å™¨è¿›è¡ŒæŠ•ç¥¨æ±‚è§£ï¼›</p><p>äºŒã€å¯¹ä¼ ç»Ÿçš„é€»è¾‘å›å½’æ¨¡å‹è¿›è¡Œæ”¹é€ ï¼Œä½¿ä¹‹å˜ä¸º softmax å›å½’æ¨¡å‹è¿›è¡Œå¤šåˆ†ç±»ä»»åŠ¡æ±‚è§£</p></blockquote><h2 id="1-1-ç‰¹ç‚¹">1.1 ç‰¹ç‚¹</h2><p>èƒ½å¤Ÿå°†è¾“å…¥çš„ç‰¹å¾æ•°æ®æ¥è½¬åŒ–ä¸º0ï¼Œ1è¿™ä¸¤ç±»çš„æ¦‚ç‡</p><h2 id="1-2-æœ¬è´¨">1.2 æœ¬è´¨</h2><p>é€šè¿‡ç‰¹å¾å€¼å’Œç›®æ ‡å€¼çš„<strong>çº¿æ€§æ–¹ç¨‹</strong>ï¼Œè®¡ç®—å‡ºç»“æœåï¼Œé€šè¿‡<code>sigmoid</code>æ˜ å°„å‡½æ•°ï¼Œå°†è¿ç»­å‹æ•°å€¼è½¬æ¢åˆ°0-1åŒºé—´å†…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒLRç®—æ³•ç”¨äºäºŒåˆ†ç±»é—®é¢˜ï¼›</p><h2 id="1-3-æ˜ å°„å‡½æ•°">1.3 æ˜ å°„å‡½æ•°</h2><p><img src="https://picture.mulindya.com/image-20210125104950928.png" alt=""></p><h1>2 æ¡ˆä¾‹åˆ†æ</h1><p>åˆ†ç±»å˜é‡ç›¸å…³åˆ†æ ï¼šåˆ—è”è¡¨åˆ†æå’Œå¡æ–¹æ£€éªŒï¼Œè¿ç»­è‡ªå˜é‡å’ŒäºŒåˆ†ç±»å› å˜é‡çš„ç‹¬ç«‹æ€§å¯ä»¥ç”¨åŒæ ·æœ¬tæ£€éªŒï¼›</p><h2 id="2-1-é¢„å¤„ç†æ“ä½œå’Œåˆ†æ">2.1 é¢„å¤„ç†æ“ä½œå’Œåˆ†æ</h2><p><strong>å¡æ–¹æ£€éªŒï¼ˆäºŒåˆ†ç±»å˜é‡å…³ç³»ï¼‰</strong></p><p><img src="https://picture.mulindya.com/image-20210125094325832.png" alt=""></p><h3 id="2-1-1-åˆ é™¤ç©ºå€¼çš„è¡Œ">2.1.1 åˆ é™¤ç©ºå€¼çš„è¡Œ</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data = data.dropna(axis=<span class="hljs-number">0</span>,how=<span class="hljs-string">'any'</span>)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: data.dropna(axis=<span class="hljs-number">0</span>, how=<span class="hljs-string">'any'</span>, thresh=<span class="hljs-literal">None</span>, subset=<span class="hljs-literal">None</span>, inplace=<span class="hljs-literal">False</span>)<br>Docstring:<br>Remove missing values.<br><br>See the :ref:`User Guide &lt;missing_data&gt;` <span class="hljs-keyword">for</span> more on which values are<br>considered missing, <span class="hljs-keyword">and</span> how to work <span class="hljs-keyword">with</span> missing data.<br>how : {<span class="hljs-string">'any'</span>, <span class="hljs-string">'all'</span>}, default <span class="hljs-string">'any'</span><br>    Determine <span class="hljs-keyword">if</span> row <span class="hljs-keyword">or</span> column <span class="hljs-keyword">is</span> removed <span class="hljs-keyword">from</span> DataFrame, when we have<br>    at least one NA <span class="hljs-keyword">or</span> <span class="hljs-built_in">all</span> NA.<br><br>    * <span class="hljs-string">'any'</span> : If <span class="hljs-built_in">any</span> NA values are present, drop that row <span class="hljs-keyword">or</span> column.<br>    * <span class="hljs-string">'all'</span> : If <span class="hljs-built_in">all</span> values are NA, drop that row <span class="hljs-keyword">or</span> column.<br></code></pre></td></tr></tbody></table></figure><h3 id="2-1-2-åˆ†æç›¸å…³å…³ç³»">2.1.2 åˆ†æç›¸å…³å…³ç³»</h3><p>æ›¾ç»ç ´äº§ä¸æ˜¯å¦è¿çº¦æ˜¯å¦å­˜åœ¨ç›¸å…³å…³ç³»</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.crosstab(data.bankruptcy_ind,data.bad_ind,margins=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">bankruptcy_ind\ bad_ind</th><th style="text-align:right">0</th><th style="text-align:right">1</th><th style="text-align:right">All</th></tr></thead><tbody><tr><td style="text-align:right">N</td><td style="text-align:right">3076</td><td style="text-align:right">719</td><td style="text-align:right">3795</td></tr><tr><td style="text-align:right">Y</td><td style="text-align:right">243</td><td style="text-align:right">67</td><td style="text-align:right">310</td></tr><tr><td style="text-align:right">All</td><td style="text-align:right">3319</td><td style="text-align:right">786</td><td style="text-align:right">4105</td></tr></tbody></table><h3 id="2-1-3-åˆ—è”è¡¨">2.1.3 åˆ—è”è¡¨</h3><p>åˆ—è”è¡¨ï¼ˆcontingency tableï¼‰æ˜¯è§‚æµ‹æ•°æ®æŒ‰ä¸¤ä¸ªæˆ–è€…æ›´å¤šå˜é‡åˆ†ç±»æ—¶åˆ—å‡ºçš„è§‚æµ‹è¡¨ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func1</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-string">'å½“å‰å‡½æ•°æ˜¯å®ç°ä¸¤ä¸ªå˜é‡çš„åˆ—è”è¡¨'</span><br>    <span class="hljs-comment">#print(x)</span><br>    <span class="hljs-keyword">return</span> x/<span class="hljs-built_in">float</span>(x[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cross_tab.apply(func1,axis=<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="2-1-4å¡æ–¹æ£€éªŒ">2.1.4å¡æ–¹æ£€éªŒ</h3><p>å¡æ–¹æ£€éªŒå°±æ˜¯ç»Ÿè®¡æ ·æœ¬çš„å®é™…è§‚æµ‹å€¼ä¸ç†è®ºæ¨æ–­å€¼ä¹‹é—´çš„åç¦»ç¨‹åº¦;<br>å®é™…è§‚æµ‹å€¼ä¸ç†è®ºæ¨æ–­å€¼ä¹‹é—´çš„åç¦»ç¨‹åº¦å°±å†³å®šå¡æ–¹å€¼çš„å¤§å°;<br>å¦‚æœå¡æ–¹å€¼è¶Šå¤§ï¼ŒäºŒè€…åå·®ç¨‹åº¦è¶Šå¤§ï¼›åä¹‹ï¼ŒäºŒè€…åå·®è¶Šå°ï¼›è‹¥ä¸¤ä¸ªå€¼å®Œå…¨ç›¸ç­‰æ—¶;<br>å¡æ–¹å€¼å°±ä¸º0ï¼Œè¡¨æ˜ç†è®ºå€¼å®Œå…¨ç¬¦åˆã€‚æ³¨æ„ï¼šå¡æ–¹æ£€éªŒé’ˆå¯¹åˆ†ç±»å˜é‡ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#ä¸¤ä¸ªå˜é‡å¡æ–¹æ£€éªŒ</span><br>stats.chi2_contingency(cross_tab.iloc[:<span class="hljs-number">2</span>,:<span class="hljs-number">2</span>])<br></code></pre></td></tr></tbody></table></figure><figure class="highlight clojure"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clojure">(<span class="hljs-number">1.1500371741720943</span>,<br> <span class="hljs-number">0.28354136789919926</span>,<br> <span class="hljs-number">1</span>,<br> array([[<span class="hljs-number">3068.35688185</span>,  <span class="hljs-number">726.64311815</span>],<br>        [ <span class="hljs-number">250.64311815</span>,   <span class="hljs-number">59.35688185</span>]]))<br></code></pre></td></tr></tbody></table></figure><p>på€¼ä¸º0.28 è¯´æ˜ç ´äº§æ˜¯å¦è¿çº¦æ²¡æœ‰æ˜¾è‘—ç›¸å…³</p><h2 id="2-2-å›å½’åˆ†æ">2.2 å›å½’åˆ†æ</h2><h3 id="2-2-1-æ•°æ®é›†åˆ‡å‰²">2.2.1 æ•°æ®é›†åˆ‡å‰²</h3><p>åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œ éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ‹†åˆ† ï¼Œæš‚æ—¶å°†æ•°æ®åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼›</p><p>è®­ç»ƒé›†ç”¨æ¥è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒ 7 8ï¼ˆå æ¯”æœ€å¤§ï¼Œè¿‡å°ä¼šæ¬ æ‹Ÿåˆï¼‰<br>æµ‹è¯•é›†ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„ä¼˜åŠ£ 3 2</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#é€‰å–80%çš„æ•°æ®ä½œä¸ºè®­ç»ƒé›†æ•°æ® ä½¿ç”¨ç®€å•éšæœºæŠ½æ ·</span><br>train_data = data.sample(frac=<span class="hljs-number">0.8</span>,random_state=<span class="hljs-number">2021</span>) <span class="hljs-comment">#æ•°æ®æŒ‰æ¯”ä¾‹åˆ‡åˆ†</span><br><span class="hljs-comment">#æµ‹è¯•æ ·æœ¬</span><br>test_data = data[~data.index.isin(train_data.index)]<br></code></pre></td></tr></tbody></table></figure><h3 id="2-2-2-æ¨¡å‹è®­ç»ƒ">2.2.2 æ¨¡å‹è®­ç»ƒ</h3><p>**åœ¨è¿›è¡Œæ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹ä¸­ ä¸çº¿æ€§å›å½’ç±»ä¼¼ ä½†æ˜¯æŒ‡å®šä½¿ç”¨å¹¿ä¹‰çº¿æ€§å›å½’ å¹¶ä¸”æŒ‡å®šä½¿ç”¨logitå˜æ¢å¯¹æ•°æ®è¿›è¡Œå¤„ç† **</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">model = sfa.glm(<span class="hljs-string">'bad_ind~fico_score'</span>,data = train_data,family=sa.families.Binomial(sa.families.links.logit)).fit()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210125112627183.png" alt=""></p><p>å³ä¸º -0.0147*fico_score+8.5519</p><h3 id="2-2-3-å‘å‰æ³•å‚æ•°é€‰æ‹©">2.2.3 å‘å‰æ³•å‚æ•°é€‰æ‹©</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å‘å‰æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward_select</span>(<span class="hljs-params">data,label</span>):</span> <span class="hljs-comment">#data:æ•°æ® response:ç›®æ ‡å€¼</span><br>    <span class="hljs-comment">#todo è·å–å½“å‰æ•°æ®å½“å‰ä¸é‡å¤å˜é‡</span><br>    params = <span class="hljs-built_in">set</span>(data.columns)<br>    <br>    <span class="hljs-comment">#å°†éœ€è¦ä¿ç•™çš„å˜é‡è¿›è¡Œå­˜å‚¨</span><br>    selected = []<br>    <br>    <span class="hljs-comment">#å°†ç›®æ ‡å€¼ç§»é™¤å½“å‰å˜é‡åˆ—è¡¨</span><br>    params.remove(label)<br>    current_score = <span class="hljs-built_in">float</span>(<span class="hljs-string">'inf'</span>)<br>    best_new_score = <span class="hljs-built_in">float</span>(<span class="hljs-string">'inf'</span>)<br>    <br>    <span class="hljs-comment">#è¿›è¡Œç­›é€‰</span><br>    <span class="hljs-keyword">while</span> params:<br>        aic_param = []<br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>            <span class="hljs-comment">#å‰y åx,å¹¶ä¸”å¤šå˜é‡ç”¨åŠ å·è¿æ¥,+[],ç›¸å½“äºåœ¨æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </span><br>            formula = <span class="hljs-string">"{}~{}"</span>.<span class="hljs-built_in">format</span>(label,<span class="hljs-string">'+'</span>.join(selected+[param]))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">'--------------&gt;formula'</span>,formula)<br>            <br>            <span class="hljs-comment">#å»ºç«‹æ¨¡å‹ æ‹¿åˆ°aic</span><br>            aic = sfa.glm(formula,data = data,family=sa.families.Binomial(sa.families.links.logit)).fit().aic<br>            aic_param.append((aic,param)) <span class="hljs-comment">#å…ƒç»„è£…åŒ…</span><br>        <span class="hljs-comment">#å¾—åˆ°åˆ†æ•°æœ€å°çš„AIC</span><br>        aic_param.sort(reverse=<span class="hljs-literal">True</span>)<br>        best_new_score,best_param = aic_param.pop()<span class="hljs-comment">#åˆ—è¡¨çš„æœ€æœ«ä½</span><br>        <br>        <span class="hljs-comment">#ä¸å½“å‰å¾—åˆ†æ¯”è¾ƒ</span><br>        <span class="hljs-keyword">if</span> current_score&gt;best_new_score:<br>            params.remove(best_param)<br>            selected.append(best_param)<br>            current_score = best_new_score<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">'------------*************&gt;å½“å‰current_score'</span>,current_score)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"over"</span>)<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"#################################################"</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–åˆ°ç¬¦åˆæ¡ä»¶çš„å˜é‡è¿›è¡Œå±•ç¤º"</span>)<br>    <span class="hljs-built_in">print</span>(selected)<br>        <br>    <span class="hljs-comment">#æ‹¼æ¥çœŸæ­£çš„formula</span><br>    fin_formula = <span class="hljs-string">'{}~{}'</span>.<span class="hljs-built_in">format</span>(label,<span class="hljs-string">'+'</span>.join(selected))<br>    <span class="hljs-comment"># è¿›è¡Œçº¿æ€§æ¨¡å‹çš„è®­ç»ƒ</span><br>    model = sfa.glm(fin_formula,data = data,family=sa.families.Binomial(sa.families.links.logit)).fit()<br>    <span class="hljs-keyword">return</span> model<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">lavels_list = [<span class="hljs-string">'bad_ind'</span>,<span class="hljs-string">'fico_score'</span>,<span class="hljs-string">'bankruptcy_ind'</span>,<span class="hljs-string">'age_oldest_tr'</span>,<span class="hljs-string">'ltv'</span>,<span class="hljs-string">'tot_income'</span>,<span class="hljs-string">'veh_mileage'</span>,<span class="hljs-string">'used_ind'</span>]<br>data_select = train_data[lavels_list]<br>forward_select(data=data_select,label=<span class="hljs-string">'bad_ind'</span>)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#################################################</span><br>è·å–åˆ°ç¬¦åˆæ¡ä»¶çš„å˜é‡è¿›è¡Œå±•ç¤º<br>[<span class="hljs-string">'fico_score'</span>, <span class="hljs-string">'ltv'</span>, <span class="hljs-string">'age_oldest_tr'</span>, <span class="hljs-string">'bankruptcy_ind'</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
      <tag>é€»è¾‘å›å½’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--çº¿æ€§å›å½’</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis6/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis6/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚ğŸ˜¶</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯çº¿æ€§å›å½’ï¼Œç°å¸¸é‡ç‚¹ï¼Œä¹Ÿå¾ˆåŸºç¡€çš„å†…å®¹ï¼Œæ¦‚å¿µä¸éš¾ç†è§£ï¼Œä¸»è¦å¯ä»¥å…³æ³¨å¤šå…ƒçº¿æ€§å›å½’ä¸­çš„å˜é‡ç­›é€‰ã€‚è¿˜æœ‰å®ä¾‹ä»£ç å’Œæ“ä½œæµç¨‹ï¼æ ‡è®°æ˜Ÿå·â­ï¸</p></blockquote><h1>çº¿æ€§å›å½’ â›„ï¸</h1><h1>1 ç®€å•çº¿æ€§æ¨¡å‹ ğŸ“ƒ</h1><h2 id="1-1-ç®€å•çº¿æ€§å›å½’">1.1 ç®€å•çº¿æ€§å›å½’</h2><p>è¡¨è¾¾å½¢å¼ï¼š</p><p><img src="https://picture.mulindya.com/image-20210120114327110.png" alt=""></p><p>åªæœ‰ä¸€ä¸ªè‡ªå˜é‡å’Œä¸€ä¸ªå› å˜é‡ è¯„ä¼°è‡ªå˜é‡åœ¨è§£é‡Šå› å˜é‡å˜å¼‚æˆ–è€…è¡¨ç°æ—¶çš„æ˜¾è‘—æ€§ï¼›åœ¨ç»™å®šè‡ªå˜é‡çš„æƒ…å†µä¸‹é¢„æµ‹å› å˜é‡ï¼Œæ‰°åŠ¨é¡¹åˆå¯ä»¥ç§°ä¹‹ä¸ºéšæœºè¯¯å·®ï¼Œæœä»å‡å€¼ä¸º0çš„æ­£æ€åˆ†å¸ƒï¼›</p><h2 id="1-2-çº¿æ€§å›å½’æ‹Ÿåˆçº¿">1.2 çº¿æ€§å›å½’æ‹Ÿåˆçº¿</h2><p><img src="https://picture.mulindya.com/image-20210120115645575.png" alt=""></p><p>ç®€å•çº¿æ€§å›å½’åŸç†å°±æ˜¯æ‹Ÿåˆä¸€æ¡ç›´çº¿ï¼Œä½¿å¾—å®é™…å€¼ä¸é¢„æµ‹å€¼çš„å·®å€¼å¹³æ–¹å’Œæœ€å°ï¼Œå½“è¿™ä¸ªè·ç¦»æœ€å°æ—¶ï¼Œè¿™æ¡ç›´çº¿å°±æ˜¯æœ€å¥½çš„å›å½’æ‹Ÿåˆçº¿</p><p>å®é™…å€¼å’Œé¢„æµ‹å€¼çš„å·®å€¼å°±æ˜¯æ®‹å·®</p><p>çº¿æ€§å›å½’çš„å®—æ—¨ï¼šä½¿å¾—æ®‹å·®å¹³æ–¹æœ€å°åŒ–ï¼›</p><h1>2 å¤šå…ƒçº¿æ€§å›å½’ ğŸ“‡</h1><p><img src="https://picture.mulindya.com/image-20210121113429295.png" alt=""></p><p>åœ¨å¤šå…ƒçº¿æ€§å›å½’ä¸­ï¼Œx1å’Œx2éƒ½æœ‰æ˜æ˜¾çš„çº¿æ€§ç›¸å…³å…³ç³»å¹¶ä¸”x1å’Œx2æ— çº¿æ€§ç›¸å…³å…³ç³»ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">model2 = ols(<span class="hljs-string">'avg_exp~Age+Income+dist_home_val+dist_avg_income'</span>,data=exp).fit()<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:right">Dep. Variable:</td><td style="text-align:right">avg_exp</td><td>R-squared:</td><td>0.542</td></tr><tr><td style="text-align:right">Model:</td><td style="text-align:right">OLS</td><td>Adj. R-squared:</td><td>0.513</td></tr><tr><td style="text-align:right">Method:</td><td style="text-align:right">Least Squares</td><td>F-statistic:</td><td>19.20</td></tr><tr><td style="text-align:right">Date:</td><td style="text-align:right">Thu, 21 Jan 2021</td><td>Prob (F-statistic):</td><td>1.82e-10</td></tr><tr><td style="text-align:right">Time:</td><td style="text-align:right">11:45:07</td><td>Log-Likelihood:</td><td>-498.59</td></tr><tr><td style="text-align:right">No. Observations:</td><td style="text-align:right">70</td><td>AIC:</td><td>1007.</td></tr><tr><td style="text-align:right">Df Residuals:</td><td style="text-align:right">65</td><td>BIC:</td><td>1018.</td></tr><tr><td style="text-align:right">Df Model:</td><td style="text-align:right">4</td><td></td><td></td></tr><tr><td style="text-align:right">Covariance Type:</td><td style="text-align:right">nonrobust</td><td></td><td></td></tr></tbody></table><p><strong>æ³¨</strong>ï¼šR-squared:ç”¨äºè¯„ä»·æ¨¡å‹è§£é‡ŠåŠ›åº¦ ä½†æ˜¯æ”¶åˆ°è‡ªå˜é‡ä¸ªæ•°å’Œè§‚æµ‹ä¸ªæ•°çš„å½±å“ï¼›Prob (F-statistic):æ¥è¿‘äº0 è¯´æ˜å½“å‰å›å½’æ¨¡å‹æ˜¯æœ‰æ„ä¹‰çš„</p><h1>3 å¤šå…ƒçº¿æ€§å›å½’å˜é‡ç­›é€‰ ğŸ“Š</h1><p>å‘å‰æ³• å‘åæ³• é€æ­¥æ³•<br>è¿™ä¸‰ç§æ–¹æ³• èµ¤æ± ä¿¡æ¯å‡†åˆ™</p><h2 id="3-1-æ–¹æ³•ï¼šå‘å‰æ³•-å‘åæ³•-é€æ­¥æ³•">3.1 æ–¹æ³•ï¼šå‘å‰æ³• å‘åæ³• é€æ­¥æ³•</h2><p>è¿™ä¸‰ç§æ–¹æ³•è¿›å…¥æˆ–è€…æå‡ºå˜é‡ä¸€ä¸ªå‡†åˆ™æ˜¯AIC ï¼ˆèµ¤æ± ä¿¡æ¯å‡†åˆ™ï¼‰ä¹Ÿå°±æ˜¯æœ€å°ä¿¡æ¯å‡†åˆ™ï¼›AICæŒ‡æ ‡ï¼ˆèµ¤æ± ä¿¡æ¯å‡†åˆ™ï¼‰æ˜¯å¸¸ç”¨çš„åˆ©ç”¨è¶‹åŠ¿ä¼°è®¡é¢„æµ‹æ¨¡å‹çš„æŒ‡æ ‡ä¹‹ä¸€ï¼›</p><h2 id="3-2-AIC">3.2 AIC</h2><p>åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼ŒAICå¯ä»¥è¡¨ç¤ºä¸ºï¼š $AIC=2k-2ln(L)$</p><p>å…¶ä¸­ï¼škæ˜¯å‚æ•°çš„æ•°é‡ï¼ŒLæ˜¯ä¼¼ç„¶å‡½æ•°ã€‚</p><p>å‡è®¾æ¡ä»¶æ˜¯æ¨¡å‹çš„<strong>è¯¯å·®æœä»ç‹¬ç«‹æ­£æ€åˆ†å¸ƒã€‚</strong></p><p>è®©nä¸ºè§‚å¯Ÿæ•°ï¼ŒSSR(SUM SQAURE OF RESIDUE)ä¸º<strong>æ®‹å·®å¹³æ–¹å’Œ</strong>ï¼Œé‚£ä¹ˆAICå˜ä¸ºï¼š $AIC=2k+nln(SSR/n)$ï¼›</p><p>å¢åŠ è‡ªç”±å‚æ•°çš„æ•°ç›®æé«˜äº†æ‹Ÿåˆçš„ä¼˜è‰¯æ€§ï¼ŒAICé¼“åŠ±æ•°æ®æ‹Ÿåˆçš„ä¼˜è‰¯æ€§ä½†æ˜¯å°½é‡é¿å…å‡ºç°è¿‡åº¦æ‹Ÿåˆ(Overfitting)çš„æƒ…å†µã€‚**æ‰€ä»¥ä¼˜å…ˆè€ƒè™‘çš„æ¨¡å‹åº”æ˜¯AICå€¼æœ€å°çš„é‚£ä¸€ä¸ªã€‚**å‡è®¾åœ¨nä¸ªæ¨¡å‹ä¸­åšå‡ºé€‰æ‹©ï¼Œå¯ä¸€æ¬¡ç®—å‡ºnä¸ªæ¨¡å‹çš„AICå€¼ï¼Œå¹¶æ‰¾å‡ºæœ€å°AICå€¼ç›¸å¯¹åº”çš„æ¨¡å‹ä½œä¸ºé€‰æ‹©å¯¹è±¡ã€‚</p><p>å³ï¼šAICè¶Šå°è¯´æ˜æ¨¡å‹æ•ˆæœè¶Šå¥½ï¼Œè¶Šç®€æ´ï¼›ç±»ä¼¼çš„å‡†åˆ™è¿˜æœ‰BIC ,På€¼ï¼›</p><blockquote><p>BIC å’ŒAIC</p><p>1ã€ç®€ä»‹</p><p>BIC= Bayesian Information Criterionsï¼Œè´å¶æ–¯ä¿¡æ¯å‡†åˆ™ã€‚</p><p>2ã€è¡¨è¾¾å¼</p><p>BIC=ln(n)k-2ln(L)</p><ul><li>Læ˜¯ä¼¼ç„¶å‡½æ•°</li><li>næ˜¯æ ·æœ¬å¤§å°</li><li>Kæ˜¯å‚æ•°æ•°é‡</li></ul><p>3ã€æ€»ç»“</p><p>1ã€å…±æ€§</p><p>æ„é€ è¿™äº›ç»Ÿè®¡é‡æ‰€éµå¾ªçš„ç»Ÿè®¡æ€æƒ³æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯åœ¨è€ƒè™‘æ‹Ÿåˆæ®‹å·®çš„åŒäº‹ï¼Œä¾è‡ªå˜é‡ä¸ªæ•°æ–½åŠ â€œæƒ©ç½šâ€ã€‚</p><p>2ã€ä¸åŒç‚¹</p><ul><li>BICçš„æƒ©ç½šé¡¹æ¯”AICå¤§ï¼Œè€ƒè™‘äº†æ ·æœ¬ä¸ªæ•°ï¼Œæ ·æœ¬æ•°é‡å¤šï¼Œå¯ä»¥é˜²æ­¢æ¨¡å‹ç²¾åº¦è¿‡é«˜é€ æˆçš„æ¨¡å‹å¤æ‚åº¦è¿‡é«˜ã€‚</li><li>AICå’ŒBICå‰åŠéƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼ŒBICè€ƒè™‘äº†æ ·æœ¬æ•°é‡ï¼Œæ ·æœ¬æ•°é‡è¿‡å¤šæ—¶ï¼Œå¯æœ‰æ•ˆé˜²æ­¢æ¨¡å‹ç²¾åº¦è¿‡é«˜é€ æˆçš„æ¨¡å‹å¤æ‚åº¦è¿‡é«˜ã€‚</li></ul></blockquote><h3 id="3-2-1-å‘å‰å›å½’æ³•">3.2.1 å‘å‰å›å½’æ³•</h3><ol><li>å…ˆå°†ç¬¬ä¸€ä¸ªå˜é‡ä»£å…¥å›å½’æ–¹ç¨‹ï¼Œå¹¶ä¸”è¿›è¡ŒFæ£€éªŒå’Œtæ£€éªŒï¼Œè®¡ç®—æ®‹å·®å¹³æ–¹å’Œï¼Œè®°ä¸ºs1ï¼Œå¦‚æœé€šè¿‡æ£€éªŒï¼Œä¿ç•™å½“å‰çš„å˜é‡ï¼›</li><li>ç„¶åå¼•å…¥ç¬¬äºŒä¸ªå˜é‡ï¼Œé‡æ–°æ„å»ºä¸€ä¸ªæ–°çš„ä¼°è®¡æ–¹å·®ï¼Œå¹¶ä¸”è¿›è¡ŒFæ£€éªŒå’Œtæ£€éªŒï¼Œè®¡ç®—æ®‹å·®å¹³æ–¹å’Œï¼Œè®°ä¸ºs2ï¼›</li></ol><h3 id="3-2-2-å‘åå›å½’æ³•">3.2.2 å‘åå›å½’æ³•</h3><p>è‡ªå˜é‡å…¨éƒ¨æ”¾å…¥æ¨¡å‹ï¼Œè¿›è¡ŒFæ£€éªŒå’Œtæ£€éªŒï¼›</p><h3 id="3-2-3-é€æ­¥å›å½’æ³•">3.2.3 é€æ­¥å›å½’æ³•</h3><p>è‡ªå˜é‡å…¨éƒ¨æ”¾å…¥æ¨¡å‹ï¼Œè¿›è¡ŒFæ£€éªŒå’Œtæ£€éªŒï¼›</p><h2 id="3-3-ä½¿ç”¨å‘å‰å›å½’æ³•ç­›é€‰ä»£ç ">3.3 ä½¿ç”¨å‘å‰å›å½’æ³•ç­›é€‰ä»£ç </h2><p>å°†å¾…ç­›é€‰çš„è‡ªå˜é‡é€‰å‡ºæœ€å¥½çš„ç»„åˆï¼šé¦–å…ˆä»ä¸€ä¸ªå˜é‡é€‰å–æœ€å°çš„aicï¼Œç„¶åå†æ·»åŠ å˜é‡è¿›è¡Œç»„åˆï¼Œåœ¨é€‰å–æœ€å°çš„aicç›´åˆ°aicå¤§äºå½“å‰é€‰æ‹©å‚æ•°æ‰€å¾—çš„aicï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward_select</span>(<span class="hljs-params">data,label</span>):</span> <span class="hljs-comment">#data:æ•°æ® response:ç›®æ ‡å€¼</span><br>    <span class="hljs-comment">#todo è·å–å½“å‰æ•°æ®å½“å‰ä¸é‡å¤å˜é‡</span><br>    params = <span class="hljs-built_in">set</span>(data.columns)<br>    <br>    <span class="hljs-comment">#å°†éœ€è¦ä¿ç•™çš„å˜é‡è¿›è¡Œå­˜å‚¨</span><br>    selected = []<br>    <br>    <span class="hljs-comment">#å°†ç›®æ ‡å€¼ç§»é™¤å½“å‰å˜é‡åˆ—è¡¨</span><br>    params.remove(label)<br>    current_score = <span class="hljs-built_in">float</span>(<span class="hljs-string">'inf'</span>)<br>    best_new_score = <span class="hljs-built_in">float</span>(<span class="hljs-string">'inf'</span>)<br>    <br>    <span class="hljs-comment">#è¿›è¡Œç­›é€‰</span><br>    <span class="hljs-keyword">while</span> params:<br>        aic_param = []<br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>            <span class="hljs-comment">#å‰y åx,å¹¶ä¸”å¤šå˜é‡ç”¨åŠ å·è¿æ¥,+[],ç›¸å½“äºåœ¨æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </span><br>            formula = <span class="hljs-string">"{}~{}"</span>.<span class="hljs-built_in">format</span>(label,<span class="hljs-string">'+'</span>.join(selected+[param]))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">'--------------&gt;formula'</span>,formula)<br>            <br>            <span class="hljs-comment">#å»ºç«‹æ¨¡å‹ æ‹¿åˆ°aic</span><br>            aic = ols(formula=formula,data=data).fit().aic<br>            aic_param.append((aic,param)) <span class="hljs-comment">#å…ƒç»„è£…åŒ…</span><br>        <span class="hljs-comment">#å¾—åˆ°åˆ†æ•°æœ€å°çš„AIC</span><br>        aic_param.sort(reverse=<span class="hljs-literal">True</span>)<br>        best_new_score,best_param = aic_param.pop()<span class="hljs-comment">#åˆ—è¡¨çš„æœ€æœ«ä½</span><br>        <br>        <span class="hljs-comment">#ä¸å½“å‰å¾—åˆ†æ¯”è¾ƒ</span><br>        <span class="hljs-keyword">if</span> current_score&gt;best_new_score:<br>            params.remove(best_param)<br>            selected.append(best_param)<br>            current_score = best_new_score<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">'------------*************&gt;å½“å‰current_score'</span>,current_score)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"over"</span>)<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"#################################################"</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–åˆ°ç¬¦åˆæ¡ä»¶çš„å˜é‡è¿›è¡Œå±•ç¤º"</span>)<br>    <span class="hljs-built_in">print</span>(selected)<br>        <br>    <span class="hljs-comment">#æ‹¼æ¥çœŸæ­£çš„formula</span><br>    fin_formula = <span class="hljs-string">'{}~{}'</span>.<span class="hljs-built_in">format</span>(label,<span class="hljs-string">'+'</span>.join(selected))<br>    <span class="hljs-comment"># è¿›è¡Œçº¿æ€§æ¨¡å‹çš„è®­ç»ƒ</span><br>    model = ols(formula=fin_formula,data=data).fit()<br>    <span class="hljs-keyword">return</span> model<br></code></pre></td></tr></tbody></table></figure><p>formulaå‰yåx,å¹¶ä¸”å¤šå˜é‡ç”¨åŠ å·è¿æ¥,æ•°ç»„+[],ç›¸å½“äºåœ¨æ•°ç»„ä¸­æ·»åŠ å…ƒç´ ï¼›</p><p>aic_param.pop()åˆ—è¡¨çš„æœ€æœ«ä½å¼¹å‡ºï¼Œå› æ­¤æ˜¯é™åºæ’åºï¼›</p><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs clean">--------------&gt;formula avg_exp~dist_avg_income<br>--------------&gt;formula avg_exp~Age<br>--------------&gt;formula avg_exp~Income<br>--------------&gt;formula avg_exp~dist_home_val<br>------------*************&gt;å½“å‰current_score <span class="hljs-number">1007.6801413968115</span><br>--------------&gt;formula avg_exp~dist_avg_income+Age<br>--------------&gt;formula avg_exp~dist_avg_income+Income<br>--------------&gt;formula avg_exp~dist_avg_income+dist_home_val<br>------------*************&gt;å½“å‰current_score <span class="hljs-number">1005.4969816306302</span><br>--------------&gt;formula avg_exp~dist_avg_income+Income+Age<br>--------------&gt;formula avg_exp~dist_avg_income+Income+dist_home_val<br>------------*************&gt;å½“å‰current_score <span class="hljs-number">1005.2487355956046</span><br>--------------&gt;formula avg_exp~dist_avg_income+Income+dist_home_val+Age<br>over<br>#################################################<br>è·å–åˆ°ç¬¦åˆæ¡ä»¶çš„å˜é‡è¿›è¡Œå±•ç¤º<br>[<span class="hljs-string">'dist_avg_income'</span>, <span class="hljs-string">'Income'</span>, <span class="hljs-string">'dist_home_val'</span>]<br></code></pre></td></tr></tbody></table></figure><h1>çº¿æ€§å›å½’å®ä¾‹ ğŸ“’</h1><p>å¯¹<code>creditcard_exp</code>å®¢æˆ·ä»·å€¼åˆ†æï¼Œä½¿ç”¨çº¿æ€§å›å½’æ‹Ÿåˆæ¨¡å‹æ¥è¿›è¡Œé¢„æµ‹ã€‚ğŸ“</p><h1>1æ•°æ®å¤„ç†</h1><h2 id="1-1-è¯»å–æ•°æ®ï¼ˆç©ºæ ¼å¤„ç†ï¼‰">1.1 è¯»å–æ•°æ®ï¼ˆç©ºæ ¼å¤„ç†ï¼‰</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data  = pd.read_csv(<span class="hljs-string">'./data/creditcard_exp.csv'</span>,skipinitialspace=<span class="hljs-literal">True</span>) <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">skipinitialspace : boolean, default <span class="hljs-literal">False</span><br>    Skip spaces after delimiter.<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨</strong>ï¼šä½¿ç”¨skipinitialspace=Trueå°†ç©ºæ ¼è®¾ç½®ä¸ºç©ºå€¼ï¼›</p><h2 id="1-2-é€‰å–æ•°æ®ç”¨æ¥å»ºæ¨¡">1.2 é€‰å–æ•°æ®ç”¨æ¥å»ºæ¨¡</h2><p>å–å‡ºéç©ºæ•°æ® å¹¶ä¸”å–å‡º2åˆ°åé¢åˆ—</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">exp = data[data[<span class="hljs-string">'avg_exp'</span>].notnull()].iloc[:,<span class="hljs-number">2</span>:].drop(<span class="hljs-string">'age2'</span>,axis=<span class="hljs-number">1</span>) <br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨</strong>ï¼šnotnullå¯ä»¥é€‰å–éç©ºæ•°æ®ï¼Œè¿”å›çš„æ˜¯boolå˜é‡ï¼›ilocé€‰æ‹©è¡Œåˆ—ï¼›dropå¯ä»¥åˆ é™¤æŒ‡å®šè¡Œåˆ—ï¼›</p><h2 id="1-3-çº¿æ€§ç›¸å…³æ€§åˆ†æ">1.3 çº¿æ€§ç›¸å…³æ€§åˆ†æ</h2><p>corrå‡½æ•°ï¼š ä½¿ç”¨pandasä¸­çš„corrå‡½æ•°å¯ä»¥åˆ†æç›¸å…³ç³»æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: exp.corr(method=<span class="hljs-string">'pearson'</span>, min_periods=<span class="hljs-number">1</span>)<br>Docstring:<br>Compute pairwise correlation of columns, excluding NA/null values<br><br>Parameters<br>----------<br>method : {<span class="hljs-string">'pearson'</span>, <span class="hljs-string">'kendall'</span>, <span class="hljs-string">'spearman'</span>}<br>    * pearson : standard correlation coefficient<br>    * kendall : Kendall Tau correlation coefficient<br>    * spearman : Spearman rank correlation<br>min_periods : <span class="hljs-built_in">int</span>, optional<br>    Minimum number of observations required per pair of columns<br>    to have a valid result. Currently only available <span class="hljs-keyword">for</span> pearson<br>    <span class="hljs-keyword">and</span> spearman correlation<br><br>Returns<br>-------<br>y : DataFrame<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">exp[[<span class="hljs-string">'Income'</span>,<span class="hljs-string">'avg_exp'</span>,<span class="hljs-string">'Age'</span>,<span class="hljs-string">'dist_home_val'</span>]].corr(method=<span class="hljs-string">'pearson'</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">Income</th><th style="text-align:right">avg_exp</th><th style="text-align:right">Age</th><th style="text-align:right">dist_home_val</th><th></th></tr></thead><tbody><tr><td style="text-align:right">Income</td><td style="text-align:right">1.000000</td><td style="text-align:right">0.674011</td><td style="text-align:right">0.369129</td><td>0.249153</td></tr><tr><td style="text-align:right">avg_exp</td><td style="text-align:right">0.674011</td><td style="text-align:right">1.000000</td><td style="text-align:right">0.258478</td><td>0.319499</td></tr><tr><td style="text-align:right">Age</td><td style="text-align:right">0.369129</td><td style="text-align:right">0.258478</td><td style="text-align:right">1.000000</td><td>0.109323</td></tr><tr><td style="text-align:right">dist_home_val</td><td style="text-align:right">0.249153</td><td style="text-align:right">0.319499</td><td style="text-align:right">0.109323</td><td>1.000000</td></tr></tbody></table><p><strong>æ³¨</strong>ï¼šç»è¿‡çº¿æ€§ç›¸å…³æ€§åˆ†æ å¯ä»¥å¾—åˆ°Incomeå’Œavg_expæœ‰è¾ƒå¤§ç›¸å…³æ€§</p><blockquote><p>ç›¸å…³æ€§ç³»æ•°ï¼ˆpearsonã€spearmanã€kendallï¼Œpointbiserialrï¼‰</p><p>ç”¨é€”ï¼š</p><p>æ£€æŸ¥ä¸¤ä¸ªå˜é‡ä¹‹é—´å˜åŒ–è¶‹åŠ¿çš„æ–¹å‘ä»¥åŠç¨‹åº¦ï¼Œå€¼èŒƒå›´-1åˆ°+1ï¼Œ0è¡¨ç¤ºä¸¤ä¸ªå˜é‡ä¸ç›¸å…³ï¼Œæ­£å€¼è¡¨ç¤ºæ­£ç›¸å…³ï¼Œè´Ÿå€¼è¡¨ç¤ºè´Ÿç›¸å…³ï¼Œå€¼è¶Šå¤§ç›¸å…³æ€§è¶Šå¼ºã€‚</p><ul><li><p>è®¡ç®—ç§¯è·pearsonç›¸å…³ç³»æ•°ï¼Œè¿ç»­æ€§å˜é‡æ‰å¯é‡‡ç”¨;</p></li><li><p>è®¡ç®—Spearmanç§©ç›¸å…³ç³»æ•°ï¼Œé€‚åˆäºå®šåºå˜é‡æˆ–ä¸æ»¡è¶³æ­£æ€åˆ†å¸ƒå‡è®¾çš„ç­‰é—´éš”æ•°æ®;</p></li><li><p>è®¡ç®—Kendallç§©ç›¸å…³ç³»æ•°ï¼Œé€‚åˆäºå®šåºå˜é‡æˆ–ä¸æ»¡è¶³æ­£æ€åˆ†å¸ƒå‡è®¾çš„ç­‰é—´éš”æ•°æ®ã€‚</p></li></ul></blockquote><h1>2 æ¨¡å‹æ‹Ÿåˆ</h1><h2 id="2-1-æ„å»ºæœ€å°äºŒä¹˜æ³•çš„çº¿æ€§æ¨¡å‹">2.1 æ„å»ºæœ€å°äºŒä¹˜æ³•çš„çº¿æ€§æ¨¡å‹</h2><figure class="highlight haskell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">from</span> statsmodels.formula.api <span class="hljs-keyword">import</span> ols<br><span class="hljs-title">model1</span> = ols('avg_exp~<span class="hljs-type">Income'</span>,<span class="hljs-class"><span class="hljs-keyword">data</span>=exp).fit()</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210121113456600.png" alt=""></p><h2 id="2-2-æ„å»ºé¢„æµ‹å€¼å’Œæ®‹å·®çš„è¡¨">2.2 æ„å»ºé¢„æµ‹å€¼å’Œæ®‹å·®çš„è¡¨</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.DataFrame([model1.predict(exp),model1.resid],index=[<span class="hljs-string">'é¢„æµ‹å€¼'</span>,<span class="hljs-string">'æ®‹å·®'</span>]).T<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">é¢„æµ‹å€¼</th><th style="text-align:right">æ®‹å·®</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1825.141904</td><td style="text-align:right">-608.111904</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">1806.803136</td><td style="text-align:right">-555.303136</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">1379.274813</td><td style="text-align:right">-522.704813</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">1568.506658</td><td style="text-align:right">-246.676658</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">1238.281793</td><td style="text-align:right">-422.251793</td></tr><tr><td style="text-align:right">6</td><td style="text-align:right">1402.035798</td><td style="text-align:right">-250.885798</td></tr><tr><td style="text-align:right">7</td><td style="text-align:right">1413.088901</td><td style="text-align:right">-179.318901</td></tr><tr><td style="text-align:right">8</td><td style="text-align:right">1168.156652</td><td style="text-align:right">-365.636652</td></tr><tr><td style="text-align:right">9</td><td style="text-align:right">1849.935644</td><td style="text-align:right">317.834356</td></tr><tr><td style="text-align:right">10</td><td style="text-align:right">1060.684535</td><td style="text-align:right">-406.104535</td></tr></tbody></table><h2 id="2-3-è¿›è¡Œé¢„æµ‹">2.3 è¿›è¡Œé¢„æµ‹</h2><figure class="highlight haxe"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">model1.predict(<span class="hljs-keyword">new</span><span class="hljs-type">_exp</span>)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight basic"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span>    <span class="hljs-number">1078.969552</span><br><span class="hljs-symbol">11 </span>    <span class="hljs-number">756.465245</span><br><span class="hljs-symbol">13 </span>    <span class="hljs-number">736.919530</span><br><span class="hljs-symbol">19 </span>    <span class="hljs-number">687.077955</span><br><span class="hljs-symbol">20 </span>    <span class="hljs-number">666.554953</span><br><span class="hljs-symbol">21 </span>    <span class="hljs-number">658.736667</span><br><span class="hljs-symbol">24 </span>    <span class="hljs-number">648.963809</span><br><span class="hljs-symbol">28 </span>    <span class="hljs-number">633.327237</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
      <tag>çº¿æ€§å›å½’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--RFMæ¨¡å‹</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis5/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯å®¢æˆ·ç”Ÿå‘½å‘¨æœŸä»¥åŠåœ¨æ•°æ®åˆ†æä¸­å¸¸ç”¨çš„RFMæ¨¡å‹ï¼Œæœ¬ç¯‡çš„å†…å®¹æ˜¯å¯¹æ•°æ®åˆ†æä¸­æ›´æŠ½è±¡çš„è§’åº¦å‡ºå‘ï¼Œå¯¹å®¢æˆ·è¿›è¡Œåˆ†æï¼Œæå–æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚å…¶ä»–ä¸»è¦æ˜¯å¯¹ä»£ç æ“ä½œä»‹ç»æ¯”è¾ƒç¡¬æ ¸ï¼Œç›¸æ¯”å…¶ä»–çš„ä»‹ç»ï¼Œæœ¬ç¯‡æ—¢æœ‰ä»£ç çš„ä»‹ç»ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ä»·å€¼åˆ†æä¸­çš„ä¸€äº›æ¦‚å¿µã€‚æ›´åŠ å®é™…ä¸€äº›å“¦~ ğŸ˜¶</p></blockquote><h1>1 å®¢æˆ·çš„ç”Ÿå‘½å‘¨æœŸ ğŸ’¬</h1><h2 id="1-1-å®šä¹‰">1.1 å®šä¹‰</h2><p>å®¢æˆ·ç”Ÿå‘½å‘¨æœŸç»å†è¯ç”Ÿï¼Œæˆé•¿ï¼Œæˆç†Ÿï¼Œè¡°è€ï¼Œæ­»äº¡çš„è¿‡ç¨‹ã€‚</p><h2 id="1-2-ç”µä¿¡è¡Œä¸šä¸ºä¾‹">1.2 ç”µä¿¡è¡Œä¸šä¸ºä¾‹</h2><p>ç”Ÿå‘½å‘¨æœŸåŒ…å«ç€ä»æˆä¸ºè¯¥å…¬å¸å®¢æˆ·å¹¶ä¸”äº§ç”Ÿæ¶ˆè´¹å¼€å§‹ï¼Œç»å†æ¶ˆè´¹æˆé•¿ï¼Œæ¶ˆè´¹ç¨³å®šï¼Œæ¶ˆè´¹ä¸‹é™ï¼Œæœ€åç¦»ç½‘è¿‡ç¨‹ï¼›æ ¹æ®å®¢æˆ·ä¸åŒè§’è‰²åˆ†ä¸º4ä¸ªé˜¶æ®µï¼›æ¯ä¸ªé˜¶æ®µå¯¹åº”ä¸åŒçš„æ•°æ®åˆ†æåœºæ™¯å’Œæ•°æ®æŒ–æ˜ä¸»é¢˜ï¼›</p><h2 id="1-3-å®¢æˆ·ç»ˆç”Ÿä»·å€¼çº¿">1.3 å®¢æˆ·ç»ˆç”Ÿä»·å€¼çº¿</h2><p>å®¢æˆ·åœ¨æ•´ä¸ªå®¢æˆ·ç”Ÿå‘½å‘¨æœŸå¸¦æ¥çš„æ€»åˆ©æ¶¦æ›²çº¿</p><p><img src="https://picture.mulindya.com/image-20210120093416691.png" alt=""></p><p>ç¬¬ä¸€é˜¶æ®µï¼šæ½œåœ¨å®¢æˆ·é˜¶æ®µï¼Œå¹¶ä¸æ¸…æ¥šè°ä¼šæˆä¸ºæˆ‘ä»¬çš„å®¢æˆ·ï¼Œåªæœ‰é€šè¿‡äº§å“è®¾è®¡æˆ–è€…æ—¢æœ‰çš„å®¢æˆ·ç”»åƒï¼ŒçŸ¥é“æ½œåœ¨å®¢æˆ·çš„å¤§è‡´ç‰¹å¾ï¼›</p><p>ç¬¬äºŒé˜¶æ®µï¼šå“åº”å®¢æˆ·é˜¶æ®µï¼Œå½“å‰é˜¶æ®µå®¢æˆ·å·²ç»åœ¨é€’æ¨ç‚¹å®Œæˆäº†ç”³è¯·ä¿¡ç”¨å¡çš„åŸºæœ¬ä¿¡æ¯çš„å¡«å†™ï¼Œå½“å‰é˜¶æ®µæˆ‘ä»¬éœ€è¦å¯¹å®¢æˆ·ä»·å€¼å’Œä¿¡ç”¨è¿›è¡Œé¢„æµ‹ï¼Œå†³å®šä¿¡ç”¨å¡åˆå§‹é¢åº¦ï¼›è‹¥æ”¶åˆ°ä¿¡ç”¨å¡ä¸æ¿€æ´»ï¼Œéœ€æ‰§è¡Œå®¢æˆ·è¥é”€ç­–ç•¥ï¼Œå†³å®šåˆ†é…å¤šå°‘ èµ„æºè¿›è¡Œè¥é”€ï¼›</p><p>ç¬¬ä¸‰é˜¶æ®µï¼šæ—¢å¾—å®¢æˆ·é˜¶æ®µï¼Œå½“å‰é˜¶æ®µå®¢æˆ·å·²ç»æˆåŠŸæ¿€æ´»ä¿¡ç”¨å¡ï¼Œå¹¶ä¸”æ­£å¸¸ä½¿ç”¨ä¿¡ç”¨å¡æ¶ˆè´¹ï¼Œåªæ˜¯å®¢æˆ·ä½¿ç”¨äº§å“å•ä¸€ï¼›æˆ‘ä»¬å¸Œæœ›ä»–ä»¬è´­ä¹°ç†è´¢äº§å“ï¼Œåˆ†æœŸè¿˜æ¬¾ä¸šåŠ¡ç­‰ï¼Œä¼šæ¶‰åŠäº¤å‰ï¼Œé”€å”®ç²¾å‡†è¥é”€ç­‰å·¥ä½œå†…å®¹ï¼›</p><p>ç¬¬å››é˜¶æ®µï¼šæµå¤±å®¢æˆ·é˜¶æ®µï¼Œå¯¹äºé«˜ä»·å€¼å®¢æˆ·ï¼Œå°½é‡é¿å…ï¼›åœ¨å®¢æˆ·æµå¤±ä¹‹å‰å°½é‡æŒ½å›ï¼›ä½†æ˜¯å¯¹äºä½ä»·å€¼å®¢æˆ·ï¼Œä»·å€¼å¦‚æœä¸€ç›´æ— æ³•å¾—åˆ°æå‡ï¼Œå¯ä»¥è¢«åŠ¨ç¦»å¼€</p><h1>2 RFMæ¨¡å‹ç®€ä»‹ ğŸ’§</h1><p><strong>R:æœ€è¿‘ä¸€æ¬¡æ¶ˆè´¹ï¼ˆRecencyï¼‰å®¢æˆ·ä¸Šä¸€æ¬¡çš„è´­ä¹°æ—¶é—´</strong></p><p><strong>F:æ¶ˆè´¹é¢‘ç‡ï¼ˆFrequencyï¼‰åœ¨é™å®šæ—¶é—´å†…è´­ä¹°æ¬¡æ•°ï¼Œæœ€å¸¸è´­ä¹°çš„ç”¨æˆ·ä¹Ÿæ˜¯æ»¡æ„åº¦æœ€é«˜çš„ç”¨æˆ· ä½“ç°å¿ è¯šåº¦</strong></p><p><strong>M:æ¶ˆè´¹é‡‘é¢ï¼ˆMonetaryï¼‰æœ€è¿‘æ¶ˆè´¹çš„å¹³å‡é‡‘é¢ ä½“ç°å®¢æˆ·çŸ­æœŸä»·å€¼çš„é‡è¦å˜é‡</strong></p><p><img src="https://picture.mulindya.com/image-20210119093821088.png" alt=""></p><table><thead><tr><th style="text-align:center">å®¢æˆ·ç±»å‹</th><th style="text-align:center">æ¶ˆè´¹ç‰¹å¾</th><th style="text-align:center">å±æ€§</th><th style="text-align:center">æ–¹æ³•</th></tr></thead><tbody><tr><td style="text-align:center">é‡è¦ä»·å€¼å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦é«˜ è´­ç‰©é¢‘ç‡é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿‘</td><td style="text-align:center">é‡è¦ä¹Ÿæ˜¯å¿ è¯šåº¦è¾ƒé«˜çš„å¤§å®¢æˆ·</td><td style="text-align:center">ç»†å¿ƒç»´æŠ¤</td></tr><tr><td style="text-align:center">é‡è¦å‘å±•å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦é«˜ è´­ç‰©é¢‘ç‡ä¸é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿‘</td><td style="text-align:center">æœ‰å·¨å¤§å‘å±•æ½œåŠ›</td><td style="text-align:center">ä¸ªæ€§åŒ–æ¨èå‘æ”¾ä¼˜æƒ åˆ¸ å¢åŠ ç²˜æ€§</td></tr><tr><td style="text-align:center">é‡è¦æŒ½ç•™å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦é«˜ è´­ç‰©é¢‘ç‡ä¸é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿œ</td><td style="text-align:center">å¯èƒ½å·²ç»æµå¤±çš„é‡è¦å®¢æˆ·</td><td style="text-align:center">äº†è§£æµå¤±åŸå› ï¼Œè¿›è¡Œé¢„è­¦ï¼Œé’ˆå¯¹æ€§æ”¹å˜</td></tr><tr><td style="text-align:center">é‡è¦ä¿æŒå®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦é«˜ è´­ç‰©é¢‘ç‡é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿œ</td><td style="text-align:center">å¯èƒ½æ˜¯å¿«è¦æµå¤±çš„å®¢æˆ·</td><td style="text-align:center">æ²Ÿé€šäº†è§£å…¶ä½“éªŒæ„Ÿå˜å·®çš„åŸå› </td></tr><tr><td style="text-align:center">ä¸€èˆ¬ä»·å€¼å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦ä¸é«˜ è´­ç‰©é¢‘ç‡é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿‘</td><td style="text-align:center">æ„Ÿå…´è¶£ï¼Œæ´»è·ƒï¼Œä»·æ ¼æ•æ„Ÿå‹</td><td style="text-align:center">æ¨èé‡‘èäº§å“å¢åŠ è´­ä¹°åŠ›</td></tr><tr><td style="text-align:center">ä¸€èˆ¬å‘å±•å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦ä¸é«˜ è´­ç‰©é¢‘ç‡ä¸é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿‘</td><td style="text-align:center">æ–°æ™‹ç”¨æˆ· è¯•æ¢æ€§ä½“éªŒ</td><td style="text-align:center">ç•™æ„æ­¤ç±»å®¢æˆ· è¿›è¡ŒçŸ­ä¿¡å‘é€ä¼˜æƒ ä¿¡æ¯</td></tr><tr><td style="text-align:center">ä¸€èˆ¬ä¿æŒå®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦ä¸é«˜ è´­ç‰©é¢‘ç‡é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿œ</td><td style="text-align:center">å¿«è¦æµå¤±çš„ä¸€èˆ¬å®¢æˆ·</td><td style="text-align:center">ä¸€èˆ¬æ€§ä½æˆæœ¬è¥é”€</td></tr><tr><td style="text-align:center">ä¸€èˆ¬æŒ½ç•™å®¢æˆ·</td><td style="text-align:center">æ¶ˆè´¹é¢åº¦ä¸é«˜ è´­ç‰©é¢‘ç‡ä¸é«˜ æœ€è¿‘è´­ç‰©æ—¶é—´è¿œ</td><td style="text-align:center">ä¸æ˜¯ç›®æ ‡å®¢æˆ·</td><td style="text-align:center">ç»è´¹æœ‰é™æ—¶å¯ä»¥ç›´æ¥å¿½ç•¥</td></tr></tbody></table><h1>3 RFMæ¨¡å‹åˆ†æä»£ç  ğŸ¾</h1><h2 id="3-1-R">3.1 R</h2><h3 id="3-1-1-æ—¶é—´è½¬åŒ–">3.1.1 æ—¶é—´è½¬åŒ–</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br>time.mktime(time.strptime(<span class="hljs-string">'14JUN09:17:58:34'</span>,<span class="hljs-string">'%d%b%y:%H:%M:%S'</span>))<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼šå°†éæ ‡å‡†çš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼è½¬åŒ–æ—¶é—´æ•°ç»„(strptime) å†è½¬åŒ–ä¸ºä¸ºæ—¶é—´æˆ³(mktime)ä¾¿äºè®¡ç®—</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data[<span class="hljs-string">'newtime'</span>] = data[<span class="hljs-string">'time'</span>].<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x:time.mktime(time.strptime(x,<span class="hljs-string">'%d%b%y:%H:%M:%S'</span>)))<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼šä½¿ç”¨mapæŒ‡å®šæ–°åˆ—newtime</p><h3 id="3-1-2-æ ¹æ®idå’Œtypeåˆ†ç»„å†æ˜¾ç¤ºæœ€è¿‘æ—¶é—´">3.1.2 æ ¹æ®idå’Œtypeåˆ†ç»„å†æ˜¾ç¤ºæœ€è¿‘æ—¶é—´</h3><p>æŸ¥çœ‹æ¯ä¸€ä¸ªè´­ç‰©idçš„æ¯ä¸ªç±»å‹çš„æœ€è¿‘æ—¶é—´</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">R1 = data.groupby([<span class="hljs-string">'cumid'</span>,<span class="hljs-string">'type'</span>])[[<span class="hljs-string">'newtime'</span>]].<span class="hljs-built_in">max</span>()<br></code></pre></td></tr></tbody></table></figure><p>è½¬åŒ–ä¸ºé€è§†è¡¨æŒ‡å®šè¡Œåˆ—å’Œå†…å®¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">R2 = pd.pivot_table(R1,index=<span class="hljs-string">'cumid'</span>,columns=<span class="hljs-string">'type'</span>,values=<span class="hljs-string">'newtime'</span>) <br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119104539349.png" alt=""></p><h3 id="3-1-3-ç©ºå€¼å¡«å……">3.1.3 ç©ºå€¼å¡«å……</h3><p>ç”¨æœ€ä¹…è¿œçš„è´­ç‰©æ—¶é—´æ›¿æ¢ç¼ºå¤±å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">R[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]] = R[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]].apply(<span class="hljs-keyword">lambda</span> x:x.replace(np.nan,<span class="hljs-built_in">min</span>(x)),axis=<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><p>å¯¹é€‰å–çš„åˆ—è¿›è¡Œæ›¿æ¢ axisä¸º0 å¯¹è¡Œåº”ç”¨function</p><h3 id="3-1-4-æŸ¥æ‰¾æœ€è¿‘çš„è´­ç‰©æ—¶é—´">3.1.4 æŸ¥æ‰¾æœ€è¿‘çš„è´­ç‰©æ—¶é—´</h3><p>æœ€è¿‘çš„è´­ç‰©æ—¶é—´ è´­ç‰©æ—¶é—´è¶Šå¤§ åˆ™æ—¶é—´æˆ³è¶Šå¤§</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">R[<span class="hljs-string">'rmax'</span>] = R[[<span class="hljs-string">'Normal'</span>,<span class="hljs-string">'Presented'</span>,<span class="hljs-string">'Special_offer'</span>]].apply(<span class="hljs-keyword">lambda</span> x:<span class="hljs-built_in">max</span>(x),axis=<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119111110105.png" alt=""></p><h2 id="3-2-F-è´­ç‰©é¢‘æ¬¡">3.2 F è´­ç‰©é¢‘æ¬¡</h2><h3 id="3-2-1-åˆ†ç»„ç»Ÿè®¡ç”¨æˆ·è´­ç‰©çš„æ¬¡æ•°">3.2.1 åˆ†ç»„ç»Ÿè®¡ç”¨æˆ·è´­ç‰©çš„æ¬¡æ•°</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">F1 = data.groupby([<span class="hljs-string">'cumid'</span>,<span class="hljs-string">'type'</span>])[[<span class="hljs-string">'transID'</span>]].count()<br>F = pd.pivot_table(F1,index=<span class="hljs-string">'cumid'</span>,columns=<span class="hljs-string">'type'</span>,values=<span class="hljs-string">'transID'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119111839505.png" alt=""></p><h3 id="3-2-2-å¤„ç†ç©ºå€¼ä»¥åŠé€€è´§æ•°æ®">3.2.2 å¤„ç†ç©ºå€¼ä»¥åŠé€€è´§æ•°æ®</h3><p>å°†ç©ºå€¼æ›¿æ¢ä¸º0å€¼ï¼Œå°†é€€è´§åˆ—å¤„ç†ä¸ºè´Ÿæ•°ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">F[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]] = F[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]].fillna(<span class="hljs-number">0</span>)<br>F[<span class="hljs-string">'returned_goods'</span>] = F[<span class="hljs-string">'returned_goods'</span>].<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x:-x)<br>F.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119112103692.png" alt=""></p><h3 id="3-2-3-æ±‚å‡ºè´­ç‰©æ€»æ¬¡æ•°">3.2.3 æ±‚å‡ºè´­ç‰©æ€»æ¬¡æ•°</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">F[<span class="hljs-string">'total'</span>] = F.apply(<span class="hljs-keyword">lambda</span> x:<span class="hljs-built_in">sum</span>(x),axis=<span class="hljs-number">1</span>)<br>F.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119112143811.png" alt=""></p><h2 id="3-3-M-è´­ç‰©é‡‘é¢æ±‡æ€»">3.3 M è´­ç‰©é‡‘é¢æ±‡æ€»</h2><h3 id="3-3-1-æ ¹æ®ç”¨æˆ·ï¼Œç±»åˆ«åˆ†ç±»é‡‘é¢">3.3.1 æ ¹æ®ç”¨æˆ·ï¼Œç±»åˆ«åˆ†ç±»é‡‘é¢</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">M1 = data.groupby([<span class="hljs-string">'cumid'</span>,<span class="hljs-string">'type'</span>])[[<span class="hljs-string">'amount'</span>]].<span class="hljs-built_in">sum</span>()<br></code></pre></td></tr></tbody></table></figure><h3 id="3-3-2-æ„å»ºé€è§†å›¾">3.3.2  æ„å»ºé€è§†å›¾</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">M = pd.pivot_table(M1,index=<span class="hljs-string">'cumid'</span>,columns=<span class="hljs-string">'type'</span>,values=<span class="hljs-string">'amount'</span>)<br>M.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119114146934.png" alt=""></p><h3 id="3-3-3-ç¼ºå¤±å€¼å¡«å……">3.3.3 ç¼ºå¤±å€¼å¡«å……</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">M[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]] = M[[<span class="hljs-string">'Special_offer'</span>,<span class="hljs-string">'returned_goods'</span>]].fillna(<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¡¥å……ï¼šå°†å…¶å¡«å……ä¸º0å€¼</p><h3 id="3-3-4-æ€»é‡‘é¢æ±‡æ€»">3.3.4 æ€»é‡‘é¢æ±‡æ€»</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">M[<span class="hljs-string">'mtotal'</span>] = M.apply(<span class="hljs-keyword">lambda</span> x:<span class="hljs-built_in">sum</span>(x),axis=<span class="hljs-number">1</span>)<br>M.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119114246668.png" alt=""></p><h2 id="3-4-RFM-æ¨¡å‹ç»“æœåˆ†æ">3.4 RFM æ¨¡å‹ç»“æœåˆ†æ</h2><h3 id="3-4-1-æ•°æ®æ‹¼æ¥">3.4.1 æ•°æ®æ‹¼æ¥</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">RFM = pd.concat([R[<span class="hljs-string">'rmax'</span>],F[<span class="hljs-string">'total'</span>],M[<span class="hljs-string">'mtotal'</span>]],axis=<span class="hljs-number">1</span>)<br>RFM.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119120421853.png" alt=""></p><h3 id="3-4-2-åˆ†ç®±æ‰“åˆ†">3.4.2 åˆ†ç®±æ‰“åˆ†</h3><p>cutå‡½æ•°ï¼šå°†xæ•°ç»„ç¦»æ•£åŒ–æˆbinsä¸ªåˆ†ç»„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: pd.cut(x, bins, right=<span class="hljs-literal">True</span>, labels=<span class="hljs-literal">None</span>, retbins=<span class="hljs-literal">False</span>, precision=<span class="hljs-number">3</span>, include_lowest=<span class="hljs-literal">False</span>, duplicates=<span class="hljs-string">'raise'</span>)<br>Docstring:<br>Bin values into discrete intervals.<br><br>Use `cut` when you need to segment <span class="hljs-keyword">and</span> sort data values into bins. This<br>function <span class="hljs-keyword">is</span> also useful <span class="hljs-keyword">for</span> going <span class="hljs-keyword">from</span> a continuous variable to a<br>categorical variable. For example, `cut` could convert ages to groups of<br>age ranges. Supports binning into an equal number of bins, <span class="hljs-keyword">or</span> a<br>pre-specified array of bins.<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">RFM[<span class="hljs-string">'rscore'</span>] = pd.cut(RFM.rmax,<span class="hljs-number">3</span>,labels=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],precision=<span class="hljs-number">2</span>)<br>RFM[<span class="hljs-string">'fscore'</span>] = pd.cut(RFM.total,<span class="hljs-number">3</span>,labels=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],precision=<span class="hljs-number">2</span>)<br>RFM[<span class="hljs-string">'mscore'</span>] = pd.cut(RFM.mtotal,<span class="hljs-number">3</span>,labels=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],precision=<span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure><p><strong>è¡¥å……</strong>ï¼š<em><strong>cutä¸qcut</strong></em></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">cut(x,bins,<span class="hljs-keyword">right</span><span class="hljs-operator">=</span><span class="hljs-literal">True</span>,labels<span class="hljs-operator">=</span><span class="hljs-keyword">None</span>,retbins<span class="hljs-operator">=</span><span class="hljs-literal">False</span>,<span class="hljs-keyword">precision</span><span class="hljs-operator">=</span><span class="hljs-number">3</span>,include_lowest<span class="hljs-operator">=</span><span class="hljs-literal">False</span>)<br></code></pre></td></tr></tbody></table></figure><p>â€‹    éœ€è¦å°†æ•°æ®å€¼åˆ†æ®µå¹¶æ’åºåˆ°binsä¸­æ—¶ä½¿ç”¨cutã€‚ æ­¤å‡½æ•°å¯¹äºä»è¿ç»­å˜é‡è½¬æ¢ä¸ºç¦»æ•£å˜é‡ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œcutå¯ä»¥å°†å¹´é¾„è½¬æ¢ä¸ºå¹´é¾„èŒƒå›´ç»„ã€‚ æ”¯æŒbinsåˆ°ç›¸åŒæ•°é‡çš„ç®±æŸœæˆ–é¢„å…ˆæŒ‡å®šçš„binsé˜µåˆ—ã€‚</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">qcut(x, q, <span class="hljs-attribute">labels</span>=None, <span class="hljs-attribute">retbins</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">precision</span>=3, <span class="hljs-attribute">duplicates</span>=<span class="hljs-string">'raise'</span>)<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åŸºäºåˆ†ä½æ•°çš„ç¦»æ•£åŒ–åŠŸèƒ½ã€‚ æ ¹æ®ç­‰çº§æˆ–åŸºäºæ ·æœ¬åˆ†ä½æ•°å°†å˜é‡åˆ†ç¦»ä¸ºç›¸ç­‰å¤§å°çš„æ¡¶ã€‚ ä¾‹å¦‚ï¼Œ10ä¸ªåˆ†ä½æ•°çš„1000ä¸ªå€¼å°†äº§ç”Ÿä¸€ä¸ªåˆ†ç±»å¯¹è±¡ï¼Œè¡¨ç¤ºæ¯ä¸ªæ•°æ®ç‚¹çš„åˆ†ä½æ•°æˆå‘˜èµ„æ ¼</p><h3 id="3-4-3-æ‰“æ ‡">3.4.3 æ‰“æ ‡</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler_Score</span>(<span class="hljs-params">x,y,z</span>):</span><br>    <span class="hljs-keyword">if</span> x==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> y==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> z==<span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'é‡è¦ä»·å€¼å®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> x==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span>(y <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> z==<span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'é‡è¦å‘å±•å®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> (x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> y==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> z==<span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'é‡è¦ä¿æŒå®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> (x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> (y <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> z==<span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'é‡è¦æŒ½ç•™å®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> x==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> y==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> (z <span class="hljs-keyword">in</span>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸€èˆ¬ä»·å€¼å®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> (z <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> (y <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> x==<span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸€èˆ¬å‘å±•å®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> (x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> y==<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> (z <span class="hljs-keyword">in</span>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸€èˆ¬ä¿æŒå®¢æˆ·'</span><br>    <span class="hljs-keyword">elif</span> (x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> (y <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-keyword">and</span> (x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸€èˆ¬æŒ½ç•™å®¢æˆ·'</span><br></code></pre></td></tr></tbody></table></figure><p>åº”ç”¨äº3ä¸ªåˆ†æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">RFM[<span class="hljs-string">'label'</span>] = RFM[[<span class="hljs-string">'rscore'</span>,<span class="hljs-string">'fscore'</span>,<span class="hljs-string">'mscore'</span>]].apply(<span class="hljs-keyword">lambda</span> x:handler_Score(x[<span class="hljs-number">0</span>],x[<span class="hljs-number">1</span>],x[<span class="hljs-number">2</span>]),axis=<span class="hljs-number">1</span>)<br>RFM.head()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210119121121466.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--æ•°æ®æ¸…ç†</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis4/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis4/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯æ•°æ®æ¸…æ´—ï¼ŒåŒ…æ‹¬é‡å¤å€¼å¤„ç†ï¼Œç¼ºå¤±å€¼å¤„ç†ï¼Œå™ªå£°å€¼å¤„ç†ã€‚è¿˜æœ‰pandasä¸­æ‹†åˆ†å’Œå †å çš„å‡½æ•°ï¼Œèµ‹å€¼å’Œæ¡ä»¶èµ‹å€¼çš„æ–¹æ³•ã€‚ğŸ˜‰</p></blockquote><h1>1 æ‹†åˆ†ä¸å †å  ğŸ“</h1><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">id</th><th style="text-align:right">type</th><th style="text-align:right">money</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1001</td><td style="text-align:right">normal</td><td style="text-align:right">2000</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">1110</td><td style="text-align:right">spe</td><td style="text-align:right">300</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">1002</td><td style="text-align:right">normal</td><td style="text-align:right">1000</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">1002</td><td style="text-align:right">spe</td><td style="text-align:right">3500</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">1003</td><td style="text-align:right">spe</td><td style="text-align:right">4500</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">1003</td><td style="text-align:right">spe</td><td style="text-align:right">10000</td></tr></tbody></table><h2 id="1-1-æ‹†åˆ†">1.1 æ‹†åˆ†</h2><p><code>pivot_tableå‡½æ•°ï¼š</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: pd.pivot_table(data, values=<span class="hljs-literal">None</span>, index=<span class="hljs-literal">None</span>, columns=<span class="hljs-literal">None</span>, aggfunc=<span class="hljs-string">'mean'</span>, fill_value=<span class="hljs-literal">None</span>, margins=<span class="hljs-literal">False</span>, dropna=<span class="hljs-literal">True</span>, margins_name=<span class="hljs-string">'All'</span>)<br>Docstring:<br>Create a spreadsheet-style pivot table <span class="hljs-keyword">as</span> a DataFrame. The levels <span class="hljs-keyword">in</span><br>the pivot table will be stored <span class="hljs-keyword">in</span> MultiIndex objects (hierarchical<br>indexes) on the index <span class="hljs-keyword">and</span> columns of the result DataFrame<br></code></pre></td></tr></tbody></table></figure><p>dataï¼šç­‰å¾…æ‹†åˆ†çš„è¡¨</p><p>indexï¼šæ ‡è¯†åˆ—</p><p>columnsï¼šå–å€¼æ˜¯æ–°å˜é‡çš„å˜é‡å</p><p>valuesï¼šç­‰å¾…æ‹†åˆ†çš„åˆ—</p><p><strong>æ³¨æ„ç‚¹</strong>ï¼šé»˜è®¤ æ±‡æ€»å‡½æ•°æ˜¯å‡å€¼ å¦‚æœå­˜åœ¨ç¼ºå¤±ç”¨nanå¡«å……</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.pivot_table(data,index=<span class="hljs-string">'id'</span>,columns=<span class="hljs-string">'type'</span>,values=<span class="hljs-string">'money'</span>) <br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">type</th><th style="text-align:right">normal</th><th style="text-align:right">spe</th></tr></thead><tbody><tr><td style="text-align:right">id</td><td style="text-align:right"></td><td style="text-align:right"></td></tr><tr><td style="text-align:right">1001</td><td style="text-align:right">2000.0</td><td style="text-align:right">NaN</td></tr><tr><td style="text-align:right">1002</td><td style="text-align:right">1000.0</td><td style="text-align:right">3500.0</td></tr><tr><td style="text-align:right">1003</td><td style="text-align:right">NaN</td><td style="text-align:right">7250.0</td></tr><tr><td style="text-align:right">1110</td><td style="text-align:right">NaN</td><td style="text-align:right">300.0</td></tr></tbody></table><h2 id="1-2-å †å ">1.2 å †å </h2><p>å †å æ˜¯æ‹†åˆ†çš„åæ“ä½œ</p><p>ä½¿ç”¨<code>pd.melt()</code>å‡½æ•°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: pd.melt(frame, id_vars=<span class="hljs-literal">None</span>, value_vars=<span class="hljs-literal">None</span>, var_name=<span class="hljs-literal">None</span>, value_name=<span class="hljs-string">'value'</span>, col_level=<span class="hljs-literal">None</span>)<br>Docstring:<br><span class="hljs-string">"Unpivots"</span> a DataFrame <span class="hljs-keyword">from</span> wide <span class="hljs-built_in">format</span> to long <span class="hljs-built_in">format</span>, optionally<br>leaving identifier variables <span class="hljs-built_in">set</span>.<br></code></pre></td></tr></tbody></table></figure><p>id_varsï¼šæ ‡è¯†å˜é‡ï¼›</p><p>value_varsï¼šè¡¨ç¤ºæŒ‡å®šè¿›è¡Œå †å çš„åˆ—ï¼›</p><p>var_name: åŸæ•°æ®åˆ—å †å åçš„å–åï¼›</p><p>value_nameï¼šåŸæ•°æ®å…ƒç´ é˜Ÿåˆ—åå–åï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.melt(data2,id_vars=<span class="hljs-string">'id'</span>,value_name=<span class="hljs-string">'money'</span>,var_name=<span class="hljs-string">'Type'</span>,value_vars=[<span class="hljs-string">'normal'</span>,<span class="hljs-string">'spe'</span>])<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">id</th><th style="text-align:right">Type</th><th style="text-align:right">money</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1001</td><td style="text-align:right">normal</td><td style="text-align:right">2000</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">1002</td><td style="text-align:right">normal</td><td style="text-align:right">1000</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">1003</td><td style="text-align:right">normal</td><td style="text-align:right">0</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">1110</td><td style="text-align:right">normal</td><td style="text-align:right">0</td></tr></tbody></table><h1>2 èµ‹å€¼ä¸æ¡ä»¶èµ‹å€¼  ğŸ“¢</h1><h2 id="sampleæ¡ˆä¾‹åˆ†æ">sampleæ¡ˆä¾‹åˆ†æ</h2><p>sampleæ•°æ®ï¼š</p><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">chinese</th><th style="text-align:right">class</th><th style="text-align:right">grade</th><th style="text-align:right">math</th><th style="text-align:right">name</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">88</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">98.0</td><td style="text-align:right">Bob</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">78</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">78.0</td><td style="text-align:right">Lindy</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">86</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">87.0</td><td style="text-align:right">Mark</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">56</td><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Miki</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">77</td><td style="text-align:right">1</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Sully</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">54</td><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">NaN</td><td style="text-align:right">Rose</td></tr></tbody></table><h2 id="2-1-replaceå‡½æ•°">2.1 replaceå‡½æ•°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: data.math.replace(to_replace=<span class="hljs-literal">None</span>, value=<span class="hljs-literal">None</span>, inplace=<span class="hljs-literal">False</span>, limit=<span class="hljs-literal">None</span>, regex=<span class="hljs-literal">False</span>, method=<span class="hljs-string">'pad'</span>)<br>Docstring:<br>Replace values given <span class="hljs-keyword">in</span> `to_replace` <span class="hljs-keyword">with</span> `value`.<br><br>Values of the Series are replaced <span class="hljs-keyword">with</span> other values dynamically.<br>This differs <span class="hljs-keyword">from</span> updating <span class="hljs-keyword">with</span> ``.loc`` <span class="hljs-keyword">or</span> ``.iloc``, which require<br>you to specify a location to update <span class="hljs-keyword">with</span> some value.<br></code></pre></td></tr></tbody></table></figure><p>æ›¿æ¢æ•°å­¦æˆç»©çš„98ä¸ºç©ºå€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.math.replace(<span class="hljs-number">98</span>,np.nan)<br></code></pre></td></tr></tbody></table></figure><p>æ›¿æ¢å¤šä¸ªå€¼ ä½¿ç”¨å­—å…¸åµŒå¥—æŒ‡å®š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">data.replace({<br>    <span class="hljs-string">'math'</span>:{<span class="hljs-number">98</span>:np.nan},<br>    <span class="hljs-string">'name'</span>:{<span class="hljs-string">'Bob'</span>:<span class="hljs-string">'Jim'</span>}<br>},inplace=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">chinese</th><th style="text-align:right">class</th><th style="text-align:right">grade</th><th style="text-align:right">math</th><th style="text-align:right">name</th><th style="text-align:right">class_n</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">88</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">NaN</td><td style="text-align:right">Jim</td><td style="text-align:right">class1</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">78</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">78.0</td><td style="text-align:right">Lindy</td><td style="text-align:right">class1</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">86</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">87.0</td><td style="text-align:right">Mark</td><td style="text-align:right">class1</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">56</td><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Miki</td><td style="text-align:right">class2</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">77</td><td style="text-align:right">1</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Sully</td><td style="text-align:right">class1</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">54</td><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">NaN</td><td style="text-align:right">Rose</td><td style="text-align:right">class2</td></tr></tbody></table><h2 id="2-2-applyå‡½æ•°">2.2 applyå‡½æ•°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: data.apply(func, axis=<span class="hljs-number">0</span>, broadcast=<span class="hljs-literal">None</span>, raw=<span class="hljs-literal">False</span>, reduce=<span class="hljs-literal">None</span>, result_type=<span class="hljs-literal">None</span>, args=(), **kwds)<br>Docstring:<br>Apply a function along an axis of the DataFrame.<br><br>Objects passed to the function are Series objects whose index <span class="hljs-keyword">is</span><br>either the DataFrame<span class="hljs-string">'s index (``axis=0``) or the DataFrame'</span>s columns<br>(``axis=<span class="hljs-number">1</span>``). By default (``result_type=<span class="hljs-literal">None</span>``), the final <span class="hljs-keyword">return</span> <span class="hljs-built_in">type</span><br><span class="hljs-keyword">is</span> inferred <span class="hljs-keyword">from</span> the <span class="hljs-keyword">return</span> <span class="hljs-built_in">type</span> of the applied function. Otherwise,<br>it depends on the `result_type` argument.<br><br>Series objects ï¼šæ˜¯ä¼ å…¥å‚æ•°å¯¹è±¡<br></code></pre></td></tr></tbody></table></figure><p>ä¼šè‡ªåŠ¨ä¼ å‚funcï¼Œaxis=0 æ˜¯ä¼ å‚æ•´åˆ— axis=1æ˜¯ä¼ å‚æ•´è¡Œ è¿”å›series</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func1</span>(<span class="hljs-params">p1</span>):</span><br>    <span class="hljs-keyword">if</span>(p1[<span class="hljs-string">'class'</span>]==<span class="hljs-number">1</span>): <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"class1"</span><br>    <span class="hljs-keyword">elif</span> p1[<span class="hljs-string">'class'</span>]==<span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"class2"</span><br>data.apply(func1,axis=<span class="hljs-number">1</span>) <span class="hljs-comment">#è‡ªåŠ¨ä¼ å‚       </span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight ceylon"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ceylon"><span class="hljs-number">0</span>    <span class="hljs-keyword">class</span><span class="hljs-number">1</span><br><span class="hljs-number">1</span>    <span class="hljs-keyword">class</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span>    <span class="hljs-keyword">class</span><span class="hljs-number">1</span><br><span class="hljs-number">3</span>    <span class="hljs-keyword">class</span><span class="hljs-number">2</span><br><span class="hljs-number">4</span>    <span class="hljs-keyword">class</span><span class="hljs-number">1</span><br><span class="hljs-number">5</span>    <span class="hljs-keyword">class</span><span class="hljs-number">2</span><br>dtype: <span class="hljs-keyword">object</span><br></code></pre></td></tr></tbody></table></figure><p>å¯ä»¥ä½¿ç”¨<code>data.assignå‡½æ•°</code>è¿›è¡ŒæŒ‡å®šèµ‹å€¼</p><p><code>assignå‡½æ•°</code>èµ‹å€¼ä¸åœ¨åŸå§‹æ•°æ®ä¸Šæ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">data = data.assign(class_n = data.apply(func1,axis=<span class="hljs-number">1</span>))  <br><span class="hljs-comment">#Assign new columns to a DataFrame, </span><br><span class="hljs-comment">#returning a new object(a copy) with the new columns added to the original ones.</span><br></code></pre></td></tr></tbody></table></figure><h2 id="2-3-ä½¿ç”¨locè¿›è¡Œæ¡ä»¶èµ‹å€¼">2.3 ä½¿ç”¨locè¿›è¡Œæ¡ä»¶èµ‹å€¼</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data.loc[data.grade==<span class="hljs-number">1</span>,<span class="hljs-string">'grade_n'</span>] = <span class="hljs-string">'grade1'</span> <span class="hljs-comment">#åœ¨åŸå§‹æ•°æ®ä¸Šä¿®æ”¹</span><br>data.loc[data.grade==<span class="hljs-number">2</span>,<span class="hljs-string">'grade_n'</span>] = <span class="hljs-string">'grade2'</span> <span class="hljs-comment">#ç›´æ¥æ¡ä»¶æŸ¥è¯¢è¿›è¡Œæ¡ä»¶å¤åˆ¶</span><br></code></pre></td></tr></tbody></table></figure><h1>3 æ•°æ®æ¸…æ´— ğŸ’¡</h1><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">id</th><th style="text-align:right">name</th><th style="text-align:right">score</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1</td><td style="text-align:right">zhang1</td><td style="text-align:right">80.0</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">zhang1</td><td style="text-align:right">80.0</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">1</td><td style="text-align:right">zhang2</td><td style="text-align:right">64.0</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">3</td><td style="text-align:right">zhang3</td><td style="text-align:right">70.0</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">4</td><td style="text-align:right">zhang4</td><td style="text-align:right">89.0</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">5</td><td style="text-align:right">zhang5</td><td style="text-align:right">NaN</td></tr></tbody></table><h2 id="3-1-é‡å¤æ•°å¤„ç†">3.1 é‡å¤æ•°å¤„ç†</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data2.duplicated()<br></code></pre></td></tr></tbody></table></figure><p>é‡å¤æ•°ä¸€èˆ¬æ˜¯ç›´æ¥æ¸…é™¤é‡å¤æ•°ï¼Œä½¿ç”¨duplicatedæ–¹æ³•å¯ä»¥æ‰¾åˆ°é‡å¤çš„æ•°æ®é¡¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data2[data2.duplicated()]<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">id</th><th style="text-align:right">name</th><th style="text-align:right">score</th><th></th></tr></thead><tbody><tr><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">zhang1</td><td>80.0</td></tr></tbody></table><h2 id="3-2-ç¼ºå¤±å€¼å¤„ç†">3.2 ç¼ºå¤±å€¼å¤„ç†</h2><table><thead><tr><th></th><th>è¿ç»­å˜é‡</th><th>åˆ†ç±»å˜é‡</th><th>è¡¥å……è¯´æ˜</th></tr></thead><tbody><tr><td>å°äº20%</td><td>å‡å€¼æˆ–è€…ä¸­ä½æ•°</td><td>ä¸éœ€è¦å¡«è¡¥ï¼Œå•ç®—ä¸€ç±»æˆ–ä¼—æ•°å¡«è¡¥</td><td></td></tr><tr><td>20%-80%</td><td>å‡å€¼æˆ–è€…ä¸­ä½æ•°</td><td>ä¸éœ€è¦å¡«è¡¥ï¼Œå•ç®—ä¸€ç±»æˆ–ä¼—æ•°å¡«è¡¥</td><td>å¡«è¡¥æ–¹å¼ä¸20%ç±»ä¼¼ï¼Œä½†æ˜¯æ¯ä¸ªç¼ºå¤±å€¼å˜é‡å¯ä»¥è®¾ç½®ä¸€ä¸ªæŒ‡ç¤ºå“‘å˜é‡ï¼Œå‚ä¸åç»­å»ºæ¨¡</td></tr><tr><td>å¤§äº80%</td><td></td><td></td><td>æ¯ä¸ªæœ‰ç¼ºå¤±å€¼çš„å˜é‡ç”Ÿæˆä¸€ä¸ªæŒ‡ç¤ºå“‘å˜é‡ï¼Œå‚ä¸åç»­å»ºæ¨¡ï¼Œä¸å†ä½¿ç”¨åŸå§‹å˜é‡</td></tr></tbody></table><p><strong>ç¼ºå¤±å€¼ä¸º20%-80%æ—¶ï¼š</strong></p><p><img src="https://picture.mulindya.com/image-20210115110534941.png" alt=""></p><h3 id="3-2-1-ç»Ÿè®¡ç©ºå€¼æ‰€å„ä¸ªåˆ—çš„æ¯”ä¾‹">3.2.1 ç»Ÿè®¡ç©ºå€¼æ‰€å„ä¸ªåˆ—çš„æ¯”ä¾‹</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.apply(<span class="hljs-keyword">lambda</span> x:<span class="hljs-built_in">sum</span>(x.isnull())/x.size)<br></code></pre></td></tr></tbody></table></figure><p>å¯ä»¥å¯¹Seriesè¿›è¡Œsumæ“ä½œ ï¼›</p><p>è¿™é‡Œå¸ƒå°”ç±»å‹å°±ä¼šè¿”å›Trueçš„ä¸ªæ•°ï¼›</p><h3 id="3-2-2-å¡«å……">3.2.2 å¡«å……</h3><p>fillnaï¼ˆï¼‰ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: data.math.fillna(value=<span class="hljs-literal">None</span>, method=<span class="hljs-literal">None</span>, axis=<span class="hljs-literal">None</span>, inplace=<span class="hljs-literal">False</span>, limit=<span class="hljs-literal">None</span>, downcast=<span class="hljs-literal">None</span>, **kwargs)<br>Docstring:<br>Fill NA/NaN values using the specified method<br></code></pre></td></tr></tbody></table></figure><h4 id="3-2-2-1-å‡å€¼å¡«å……">3.2.2.1 å‡å€¼å¡«å……</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.math.fillna(data.math.mean())<br></code></pre></td></tr></tbody></table></figure><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">0</span>    <span class="hljs-number">98</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">1</span>    <span class="hljs-number">78</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">2</span>    <span class="hljs-number">87</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">3</span>    <span class="hljs-number">77</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">4</span>    <span class="hljs-number">77</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">5</span>    <span class="hljs-number">83</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">Name</span>: math, dtype: float<span class="hljs-number">64</span><br></code></pre></td></tr></tbody></table></figure><h4 id="3-2-2-1-ä¸­ä½æ•°å¡«å……">3.2.2.1 ä¸­ä½æ•°å¡«å……</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.math.fillna(data.math.median())<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">0</span>    <span class="hljs-number">98.0</span><br><span class="hljs-number">1</span>    <span class="hljs-number">78.0</span><br><span class="hljs-number">2</span>    <span class="hljs-number">87.0</span><br><span class="hljs-number">3</span>    <span class="hljs-number">77.0</span><br><span class="hljs-number">4</span>    <span class="hljs-number">77.0</span><br><span class="hljs-number">5</span>    <span class="hljs-number">78.0</span><br>Name: math, dtype: float64<br></code></pre></td></tr></tbody></table></figure><h3 id="3-2-3-ç¼ºå¤±å€¼æŒ‡ç¤ºå˜é‡">3.2.3 ç¼ºå¤±å€¼æŒ‡ç¤ºå˜é‡</h3><figure class="highlight haskell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">data</span>.math.isnull().apply(<span class="hljs-title">int</span>)</span><br></code></pre></td></tr></tbody></table></figure><p>.apply(int)å¯¹ç›¸åº”çš„å¸ƒå°” è¿”å›0ï¼Œ1</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">0</span>    <span class="hljs-number">0</span><br><span class="hljs-attribute">1</span>    <span class="hljs-number">0</span><br><span class="hljs-attribute">2</span>    <span class="hljs-number">0</span><br><span class="hljs-attribute">3</span>    <span class="hljs-number">0</span><br><span class="hljs-attribute">4</span>    <span class="hljs-number">0</span><br><span class="hljs-attribute">5</span>    <span class="hljs-number">1</span><br><span class="hljs-attribute">Name</span>: math, dtype: int<span class="hljs-number">64</span><br></code></pre></td></tr></tbody></table></figure><h2 id="3-3-å™ªå£°å€¼å¤„ç†">3.3 å™ªå£°å€¼å¤„ç†</h2><blockquote><p>è¿™é‡Œç®€è¦ä»‹ç»ï¼Œåœ¨æœ€åçš„å®æˆ˜ä¸­å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„å™ªå£°å¤„ç†çš„å…·ä½“å‡½æ•°å’Œæ–¹æ³•ã€‚</p></blockquote><p>å™ªå£°å€¼ï¼šæ•°æ®ä¸­æœ‰ä¸€ä¸ªå’Œå¤šä¸ªä¸å…¶ä»–æ•°å€¼ç›¸å·®è¾ƒå¤§çš„å€¼ï¼Œå¼‚å¸¸å€¼ï¼Œç¦»ç¾¤å€¼ï¼›</p><h3 id="3-3-1-å¤„ç†æ–¹æ³•">3.3.1 å¤„ç†æ–¹æ³•</h3><p>å•å˜é‡ï¼š ç›–å¸½æ³•ï¼Œåˆ†ç®±æ³•ï¼›</p><p>å¤šå˜é‡ï¼šèšç±»æ³•ï¼›</p><h3 id="3-3-2-ç›–å¸½æ³•">3.3.2 ç›–å¸½æ³•</h3><p>å°†è¿ç»­å‹å˜é‡å‡å€¼ä¸Šä¸‹ä¸‰å€æ ‡å‡†å·®èŒƒå›´å¤–æ•°æ®æ›¿æ¢ä¸ºå‡å€¼ä¸Šä¸‹ä¸‰å€æ ‡å‡†å·®ï¼›</p><h1>æ•°æ®æ¸…æ´—å®æˆ˜ ğŸ“‹</h1><h1>å¤„ç†è„æ•°æ®</h1><h2 id="1-0å€¼å¤„ç†">1. 0å€¼å¤„ç†</h2><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;class 'pandas.core.frame.DataFrame'&gt;</span><br><span class="hljs-attribute">RangeIndex</span>: <span class="hljs-number">9686</span> entries, <span class="hljs-number">0</span> to <span class="hljs-number">9685</span><br><span class="hljs-attribute">Data</span> columns (total <span class="hljs-number">14</span> columns):<br><span class="hljs-attribute">ID</span>              <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">Suc_flag</span>        <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">ARPU</span>            <span class="hljs-number">4843</span> non-null float<span class="hljs-number">64</span><br><span class="hljs-attribute">PromCnt12</span>       <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">PromCnt36</span>       <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">PromCntMsg12</span>    <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">PromCntMsg36</span>    <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">Class</span>           <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">Age</span>             <span class="hljs-number">7279</span> non-null float<span class="hljs-number">64</span><br><span class="hljs-attribute">Gender</span>          <span class="hljs-number">9686</span> non-null object<br><span class="hljs-attribute">HomeOwner</span>       <span class="hljs-number">9686</span> non-null object<br><span class="hljs-attribute">AvgARPU</span>         <span class="hljs-number">9686</span> non-null float<span class="hljs-number">64</span><br><span class="hljs-attribute">AvgHomeValue</span>    <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">AvgIncome</span>       <span class="hljs-number">9686</span> non-null int<span class="hljs-number">64</span><br><span class="hljs-attribute">dtypes</span>: float<span class="hljs-number">64</span>(<span class="hljs-number">3</span>), int<span class="hljs-number">64</span>(<span class="hljs-number">9</span>), object(<span class="hljs-number">2</span>)<br><span class="hljs-attribute">memory</span> usage: <span class="hljs-number">1</span>.<span class="hljs-number">0</span>+ MB<br></code></pre></td></tr></tbody></table></figure><p><img src="C:%5CUsers%5C86137%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210118114510765.png" alt="image-20210118114510765"></p><p>åœ¨AvgHomeValueï¼ŒAvgIncomeä¸­çš„0å€¼æ›¿æ¢ä¸ºç¼ºå¤±å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data[<span class="hljs-string">'AvgHomeValue'</span>] = data[<span class="hljs-string">'AvgHomeValue'</span>].replace({<span class="hljs-number">0</span>:np.NaN})<br>data[<span class="hljs-string">'AvgIncome'</span>] = data[<span class="hljs-string">'AvgIncome'</span>].replace({<span class="hljs-number">0</span>:np.NaN})<br></code></pre></td></tr></tbody></table></figure><h2 id="2-æ ‡è®°é‡å¤æ•°æ®">2. æ ‡è®°é‡å¤æ•°æ®</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">data[<span class="hljs-string">'dup'</span>] = data.duplicated() <br>data_dup = data[data[<span class="hljs-string">'dup'</span>]==<span class="hljs-literal">True</span>]<br><span class="hljs-built_in">print</span>(data_dup)<br>data_undup = data[data[<span class="hljs-string">'dup'</span>]==<span class="hljs-literal">False</span>]<br></code></pre></td></tr></tbody></table></figure><h2 id="3-ç¼ºå¤±å€¼å¡«å……">3. ç¼ºå¤±å€¼å¡«å……</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">mean = data[<span class="hljs-string">'Age'</span>].mean(skipna=<span class="hljs-literal">True</span>)<br>data[<span class="hljs-string">'newage'</span>] = data[<span class="hljs-string">'Age'</span>].fillna(mean)<br>mean = data[<span class="hljs-string">'AvgIncome'</span>].mean(skipna=<span class="hljs-literal">True</span>)<br>data[<span class="hljs-string">'newAvgIncome_flag'</span>] = data[<span class="hljs-string">'AvgIncome'</span>].isnull()<br>data[<span class="hljs-string">'newAvgIncome'</span>] = data[<span class="hljs-string">'AvgIncome'</span>].fillna(mean)<br></code></pre></td></tr></tbody></table></figure><h2 id="4-å™ªå£°å¤„ç†">4. å™ªå£°å¤„ç†</h2><h3 id="4-1-è®¡ç®—å‡ºç™¾åˆ†ä½æ•°">4.1 è®¡ç®—å‡ºç™¾åˆ†ä½æ•°</h3><p><strong>å¡«å……ä¹‹åçš„æ•°æ®è¿›è¡Œå™ªå£°å¤„ç†</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">q1 = data[<span class="hljs-string">'newage'</span>].quantile(<span class="hljs-number">0.01</span>)<br>q99 = data[<span class="hljs-string">'newage'</span>].quantile(<span class="hljs-number">0.99</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="4-2-ç›–å¸½æ³•å¤„ç†å™ªå£°">4.2 ç›–å¸½æ³•å¤„ç†å™ªå£°</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">floor,qmax</span>):</span> <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>(<span class="hljs-params">x</span>):</span><br>        <span class="hljs-keyword">if</span> x&lt;floor:<br>            x = floor<br>        <span class="hljs-keyword">elif</span> x&gt;qmax:<br>            x = qmax<br>        <span class="hljs-keyword">return</span> x<br>    <span class="hljs-keyword">return</span> f<br></code></pre></td></tr></tbody></table></figure><p>å¤„ç†å™ªå£°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">func1 = func(q1,q99)<br>data[<span class="hljs-string">'newage'</span>] = data[<span class="hljs-string">'newage'</span>].<span class="hljs-built_in">map</span>(func1) <br></code></pre></td></tr></tbody></table></figure><p><em>ä½¿ç”¨mapå‡½æ•°å¤„ç†å™ªå£°ï¼Œå°†ç™¾åˆ†ä¹‹1ä»¥ä¸‹çš„æ•°æ®æ›¿æ¢ä¸ºq1,å°†ç™¾åˆ†ä¹‹99ä»¥ä¸Šçš„æ•°æ®æ›¿æ¢ä¸ºq99ï¼›</em></p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">count</span>    <span class="hljs-number">9686</span>.<span class="hljs-number">000000</span><br><span class="hljs-attribute">mean</span>       <span class="hljs-number">49</span>.<span class="hljs-number">624685</span><br><span class="hljs-attribute">std</span>         <span class="hljs-number">5</span>.<span class="hljs-number">835803</span><br><span class="hljs-attribute">min</span>        <span class="hljs-number">31</span>.<span class="hljs-number">000000</span><br><span class="hljs-attribute">25</span>%        <span class="hljs-number">47</span>.<span class="hljs-number">000000</span><br><span class="hljs-attribute">50</span>%        <span class="hljs-number">49</span>.<span class="hljs-number">567386</span><br><span class="hljs-attribute">75</span>%        <span class="hljs-number">54</span>.<span class="hljs-number">000000</span><br><span class="hljs-attribute">max</span>        <span class="hljs-number">60</span>.<span class="hljs-number">000000</span><br><span class="hljs-attribute">Name</span>: newage, dtype: float<span class="hljs-number">64</span><br></code></pre></td></tr></tbody></table></figure><h3 id="4-3-åˆ†ç®±æ³•å¤„ç†å™ªå£°">4.3 åˆ†ç®±æ³•å¤„ç†å™ªå£°</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å™ªå£°å¤„ç† åˆ†ç®±æ³•</span><br>data[<span class="hljs-string">'newage_qcut'</span>] = pd.qcut(data[<span class="hljs-string">'newage'</span>],<span class="hljs-number">4</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">newage</th><th style="text-align:right">newage_qcut</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">57.000000</td><td style="text-align:right">(54.0, 60.0]</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">55.000000</td><td style="text-align:right">(54.0, 60.0]</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">57.000000</td><td style="text-align:right">(54.0, 60.0]</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">52.000000</td><td style="text-align:right">(49.567, 54.0]</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">49.567386</td><td style="text-align:right">(47.0, 49.567]</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--æ•°æ®æŸ¥è¯¢å’Œè¡¨ç›¸å…³æ“ä½œ</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis3/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯æ•°æ®æŸ¥è¯¢ä»¥åŠè¡¨çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬å•æ¡ä»¶æŸ¥è¯¢ï¼Œå¤šæ¡ä»¶æŸ¥è¯¢ï¼Œè¿ç»­æŸ¥è¯¢ï¼Œä¸è¿ç»­æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢ã€‚ğŸ˜‰è¿˜æœ‰ä¸€äº›è¡¨çš„æ“ä½œï¼Œå†…è¿æ¥ï¼Œå¤–è¿æ¥ï¼Œåˆå¹¶ï¼Œæ’åºï¼Œåˆ†ç±»æ±‡æ€»ã€‚å¾ˆå¹²è´§äº†å‘€~</p></blockquote><h1>1 æ•°æ®æŸ¥è¯¢</h1><p><em>è¡¨ï¼š</em></p><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">name</th><th style="text-align:right">score</th><th style="text-align:right">group</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">zhang1</td><td style="text-align:right">61</td><td style="text-align:right">1</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">zhang2</td><td style="text-align:right">85</td><td style="text-align:right">1</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">zhang3</td><td style="text-align:right">47</td><td style="text-align:right">1</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">zhang4</td><td style="text-align:right">99</td><td style="text-align:right">2</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">zhang5</td><td style="text-align:right">100</td><td style="text-align:right">3</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">zhang6</td><td style="text-align:right">75</td><td style="text-align:right">1</td></tr></tbody></table><h2 id="1-1-å•æ¡ä»¶æŸ¥è¯¢">1.1 å•æ¡ä»¶æŸ¥è¯¢</h2><p>æŸ¥è¯¢åˆ†æ•°å¤§äº80çš„åŒå­¦å§“å</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[df1.score&gt;<span class="hljs-number">80</span>].name<br></code></pre></td></tr></tbody></table></figure><h2 id="1-2-å¤šæ¡ä»¶æŸ¥è¯¢">1.2 å¤šæ¡ä»¶æŸ¥è¯¢</h2><h3 id="1-2-1-ä½¿ç”¨ä½è¿ç®—">1.2.1 ä½¿ç”¨ä½è¿ç®—</h3><p>æŸ¥è¯¢åˆ†æ•°å¤§äº90æˆ–è€…åˆ†ç»„ä¸º2çš„åˆ—è¡¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[(df1.score&gt;<span class="hljs-number">90</span>) | (df1.group==<span class="hljs-number">2</span>)]<br></code></pre></td></tr></tbody></table></figure><p>æŸ¥è¯¢åˆ†æ•°å¤§äº60å¹¶ä¸”åˆ†ç»„ä¸º1çš„åˆ—è¡¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[(df1.score&gt;<span class="hljs-number">60</span>) &amp; (df1.group==<span class="hljs-number">1</span>)] <br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong> åœ¨æ¡ä»¶ç­›é€‰æ—¶è¦ä½¿ç”¨&amp;|~ è¿›è¡Œä½è¿ç®—</p><p><font color="purple">ä¸å¯ä»¥ç”¨andå…³é”®å­— åªèƒ½ç”¨&amp;ç¬¦å· &amp;|~;&amp;æŒ‡çš„æ˜¯ä½è¿ç®—ï¼ŒPythonä¸­çš„é€»è¾‘æ“ä½œç¬¦ä¸º and  or  notï¼ŒandæŒ‡çš„æ˜¯é€»è¾‘è¿ç®—ã€‚æ‰€ä»¥åœ¨é€‰æ‹©ç»“æ„ä¸­è¡¨ç¤º ä¸ ç”¨ andã€‚æˆ–ç”¨ orã€‚è¿™é‡Œè¦ç”¨ä½è¿ç®—ç¬¦ã€‚</font></p><h3 id="1-2-1-query">1.2.1 query</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1.query(<span class="hljs-string">'score&gt;88'</span>)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.query(expr, inplace=<span class="hljs-literal">False</span>, **kwargs)<br>Docstring:<br>Query the columns of a frame <span class="hljs-keyword">with</span> a boolean expression.<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼šæ¡ä»¶æ˜¯ç”¨å­—ç¬¦ä¸²è¡¨è¾¾ï¼›å¹¶ä¸”ç›´æ¥å¼•ç”¨scoreã€‚</p><h2 id="1-3-å…¶ä»–æŸ¥è¯¢">1.3 å…¶ä»–æŸ¥è¯¢</h2><h3 id="1-3-1è¿ç»­æŸ¥è¯¢">1.3.1è¿ç»­æŸ¥è¯¢</h3><p>ä½¿ç”¨<strong>between</strong>å‡½æ•°ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[df1.score.between(<span class="hljs-number">70</span>,<span class="hljs-number">85</span>,inclusive=<span class="hljs-literal">False</span>)] <br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">name</th><th style="text-align:right">score</th><th style="text-align:right">group</th></tr></thead><tbody><tr><td style="text-align:right">5</td><td style="text-align:right">zhang6</td><td style="text-align:right">75</td><td style="text-align:right">1</td></tr></tbody></table><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.score.between(left, right, inclusive=<span class="hljs-literal">True</span>)<br>Docstring:<br>Return boolean Series equivalent to left &lt;= series &lt;= right<br></code></pre></td></tr></tbody></table></figure><p>betweenå‡½æ•°é»˜è®¤åŒ…å«è¾¹ç•Œ</p><h3 id="1-3-2-ä¸è¿ç»­æŸ¥è¯¢">1.3.2 ä¸è¿ç»­æŸ¥è¯¢</h3><p>ä½¿ç”¨<strong>isin</strong>å‡½æ•°ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[df1.name.isin([<span class="hljs-string">'zhang3'</span>,<span class="hljs-string">'zhang5'</span>])]<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.name.isin(values)<br>Docstring:<br>Check whether `values` are contained <span class="hljs-keyword">in</span> Series.<br>Return a boolean Series showing whether each element <span class="hljs-keyword">in</span> the Series<br>matches an element <span class="hljs-keyword">in</span> the passed sequence of `values` exactly.<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼švalues : <em>set or list-like</em> å†…éƒ¨çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªé›†åˆå½¢å¼ï¼›</p><h3 id="1-3-3-æ­£åˆ™è¡¨è¾¾å¼">1.3.3 æ­£åˆ™è¡¨è¾¾å¼</h3><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1[df1.name.<span class="hljs-built_in">str</span>.contains(<span class="hljs-string">'zhang+'</span>)] <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.name.<span class="hljs-built_in">str</span>.contains(pat, case=<span class="hljs-literal">True</span>, flags=<span class="hljs-number">0</span>, na=nan, regex=<span class="hljs-literal">True</span>)<br>Docstring:<br>Test <span class="hljs-keyword">if</span> pattern <span class="hljs-keyword">or</span> regex <span class="hljs-keyword">is</span> contained within a string of a Series <span class="hljs-keyword">or</span> Index.<br><br>Return boolean Series <span class="hljs-keyword">or</span> Index based on whether a given pattern <span class="hljs-keyword">or</span> regex <span class="hljs-keyword">is</span><br>contained within a string of a Series <span class="hljs-keyword">or</span> Index.<br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼š#è½¬åŒ–ä¸ºstrå†è¿›è¡ŒåŒ¹é…</p><h1>2 æ•°æ®è¿æ¥</h1><p><img src="https://picture.mulindya.com/image-20210114103553639.png" alt=""></p><h2 id="2-1-å†…è¿æ¥">2.1 å†…è¿æ¥</h2><p><strong>å–ä¸¤è¡¨ä¸­çš„äº¤é›†</strong> ï¼Œæœ‰æ•°æ®æŸå¤±ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.merge(right, how=<span class="hljs-string">'inner'</span>, on=<span class="hljs-literal">None</span>, left_on=<span class="hljs-literal">None</span>, right_on=<span class="hljs-literal">None</span>, left_index=<span class="hljs-literal">False</span>, right_index=<span class="hljs-literal">False</span>, sort=<span class="hljs-literal">False</span>, suffixes=(<span class="hljs-string">'_x'</span>, <span class="hljs-string">'_y'</span>), copy=<span class="hljs-literal">True</span>, indicator=<span class="hljs-literal">False</span>, validate=<span class="hljs-literal">None</span>)<br>Docstring:<br>Merge DataFrame objects by performing a database-style join operation by<br>columns <span class="hljs-keyword">or</span> indexes.<br></code></pre></td></tr></tbody></table></figure><p>how: è¿æ¥æ–¹å¼ï¼›</p><p>on:  å…¬å…±å­—æ®µ</p><figure class="highlight livecodeserver"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">df1.<span class="hljs-built_in">merge</span>(df2,how=<span class="hljs-string">"inner"</span>,<span class="hljs-keyword">on</span>=<span class="hljs-string">'id'</span>)<br><br>df1.<span class="hljs-built_in">merge</span>(df2,how=<span class="hljs-string">'inner'</span>,left_on=<span class="hljs-string">'id'</span>,right_on=<span class="hljs-string">'id'</span>) <br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼š <em>å…¬å…±å­—æ®µåœ¨ä¸¤è¡¨ä¸­åå­—ä¸ä¸€è‡´æ—¶ä½¿ç”¨</em>left_on,right_on</p><h2 id="2-2-å¤–è¿æ¥">2.2 å¤–è¿æ¥</h2><h3 id="2-2-1-å·¦è¿æ¥">2.2.1 å·¦è¿æ¥</h3><p>é€šè¿‡å…¬å…±å­—æ®µ ä¿ç•™å·¦è¡¨ä¿¡æ¯ å³åœ¨å·¦ç¼ºå¤±æ•°æ®å…¨éƒ¨ä»¥nanå¡«å……ï¼›</p><figure class="highlight livecodeserver"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">df1.<span class="hljs-built_in">merge</span>(df2,how=<span class="hljs-string">'left'</span>,<span class="hljs-keyword">on</span>=<span class="hljs-string">'id'</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">id</th><th style="text-align:right">coll_x</th><th style="text-align:right">coll_y</th><th></th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1</td><td style="text-align:right">a</td><td>NaN</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">2</td><td style="text-align:right">b</td><td>NaN</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">3</td><td style="text-align:right">c</td><td>e</td></tr></tbody></table><figure class="highlight livecodeserver"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">df2.<span class="hljs-built_in">merge</span>(df1,how=<span class="hljs-string">'left'</span>,<span class="hljs-keyword">on</span>=<span class="hljs-string">'id'</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">id</th><th style="text-align:right">coll_x</th><th style="text-align:right">coll_y</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">4</td><td style="text-align:right">d</td><td style="text-align:right">NaN</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">3</td><td style="text-align:right">e</td><td style="text-align:right">c</td></tr></tbody></table><p>å·¦è¿æ¥æ˜¯ä»¥å·¦è¡¨ä¸ºä¸»è¡¨ï¼Œæ‰€ä»¥ï¼Œæ•°æ®å±•ç¤ºæ˜¯ä»¥å·¦è¡¨ä¸ºä¸»ï¼Œå› æ­¤ä¸è°ƒç”¨å¯¹è±¡æœ‰å…³ã€‚</p><h3 id="2-2-2-å³è¿æ¥">2.2.2 å³è¿æ¥</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1.merge(df2,how=<span class="hljs-string">'right'</span>,on=<span class="hljs-string">'id'</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">id</th><th style="text-align:right">coll_x</th><th style="text-align:right">coll_y</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">3</td><td style="text-align:right">c</td><td style="text-align:right">e</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">4</td><td style="text-align:right">NaN</td><td style="text-align:right">d</td></tr></tbody></table><h3 id="2-2-3-å…¨è¿æ¥">2.2.3 å…¨è¿æ¥</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1.merge(df2,how=<span class="hljs-string">'outer'</span>,on=<span class="hljs-string">'id'</span>)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">id</th><th style="text-align:right">coll_x</th><th style="text-align:right">coll_y</th><th></th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">1</td><td style="text-align:right">a</td><td>NaN</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">2</td><td style="text-align:right">b</td><td>NaN</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">3</td><td style="text-align:right">c</td><td>e</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">4</td><td style="text-align:right">NaN</td><td>d</td></tr></tbody></table><h2 id="2-3-è¡Œç´¢å¼•è¿æ¥">2.3 è¡Œç´¢å¼•è¿æ¥</h2><h3 id="2-3-1-æ¨ªå‘åˆå¹¶">2.3.1 æ¨ªå‘åˆå¹¶</h3><p>pdçš„concatå‡½æ•°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: pd.concat(objs, axis=<span class="hljs-number">0</span>, join=<span class="hljs-string">'outer'</span>, join_axes=<span class="hljs-literal">None</span>, ignore_index=<span class="hljs-literal">False</span>, keys=<span class="hljs-literal">None</span>, levels=<span class="hljs-literal">None</span>, names=<span class="hljs-literal">None</span>, verify_integrity=<span class="hljs-literal">False</span>, sort=<span class="hljs-literal">None</span>, copy=<span class="hljs-literal">True</span>)<br>Docstring:<br>Concatenate pandas objects along a particular axis <span class="hljs-keyword">with</span> optional <span class="hljs-built_in">set</span> logic<br>along the other axes.<br></code></pre></td></tr></tbody></table></figure><p>é»˜è®¤axisä¸º0ï¼Œæ˜¯å¯¹è¡Œè¿›è¡Œå †å ï¼›<strong>æ¨ªå‘åˆå¹¶è¦æ”¹ä¸º1</strong></p><p>join()å‡½æ•°ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df3.join(other, on=<span class="hljs-literal">None</span>, how=<span class="hljs-string">'left'</span>, lsuffix=<span class="hljs-string">''</span>, rsuffix=<span class="hljs-string">''</span>, sort=<span class="hljs-literal">False</span>)<br>Docstring:<br>Join columns <span class="hljs-keyword">with</span> other DataFrame either on index <span class="hljs-keyword">or</span> on a key<br>column. Efficiently Join multiple DataFrame objects by index at once by<br>passing a <span class="hljs-built_in">list</span>.<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæ˜¯joinå‡½æ•°åœ¨ä½¿ç”¨æ˜¯åˆå¹¶å¯¹è±¡çš„åˆ—ä¸å¯é‡å¤</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.concat([df3,df4],axis=<span class="hljs-number">1</span>) <br>æˆ–è€…<br>df3.join(df4)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">key</th><th style="text-align:right">col1</th><th style="text-align:right">id</th><th style="text-align:right">col2</th></tr></thead><tbody><tr><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">a</td><td style="text-align:right">1</td><td style="text-align:right">aa</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">b</td><td style="text-align:right">3</td><td style="text-align:right">cc</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">3</td><td style="text-align:right">c</td><td style="text-align:right">2</td><td style="text-align:right">bb</td></tr></tbody></table><h3 id="2-3-2-çºµå‘åˆå¹¶">2.3.2 çºµå‘åˆå¹¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.concat([df5,df6],keys=[<span class="hljs-string">'A'</span>,<span class="hljs-string">'B'</span>])<br>pd.concat([df5,df6],ignore_index=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><p>åˆå¹¶å®Œæˆä¹‹å æ³¨æ„é‡å¤æ•°æ® åˆ é™¤é‡å¤æ•°æ® å¯ä»¥ä½¿ç”¨drop_duplicates()</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.concat([df5,df6],ignore_index=<span class="hljs-literal">True</span>).drop_duplicates()<br></code></pre></td></tr></tbody></table></figure><h2 id="2-4-æ’åº">2.4 æ’åº</h2><p>sort_values()å‡½æ•°ï¼šæŒ‰å€¼æ’åº</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: df1.sort_values(by, axis=<span class="hljs-number">0</span>, ascending=<span class="hljs-literal">True</span>, inplace=<span class="hljs-literal">False</span>, kind=<span class="hljs-string">'quicksort'</span>, na_position=<span class="hljs-string">'last'</span>)<br>Docstring:<br>Sort by the values along either axis<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1.sort_values([<span class="hljs-string">'group'</span>,<span class="hljs-string">'score'</span>])<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">name</th><th style="text-align:right">score</th><th>group</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">zhang1</td><td style="text-align:right">61.0</td><td>1</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">zhang2</td><td style="text-align:right">85.0</td><td>1</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">zhang3</td><td style="text-align:right">90.0</td><td>1</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">zhang6</td><td style="text-align:right">NaN</td><td>1</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">zhang4</td><td style="text-align:right">87.0</td><td>2</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">zhang5</td><td style="text-align:right">100.0</td><td>3</td></tr></tbody></table><h1>3 åˆ†ç±»æ±‡æ€»</h1><h2 id="3-1-åˆ†ç±»">3.1 åˆ†ç±»</h2><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">chinese</th><th style="text-align:right">class</th><th style="text-align:right">grade</th><th style="text-align:right">math</th><th style="text-align:right">name</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">88</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">98.0</td><td style="text-align:right">Bob</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">78</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">78.0</td><td style="text-align:right">Lindy</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">86</td><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">87.0</td><td style="text-align:right">Mark</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">56</td><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Miki</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">77</td><td style="text-align:right">1</td><td style="text-align:right">2</td><td style="text-align:right">77.0</td><td style="text-align:right">Sully</td></tr></tbody></table><h3 id="3-1-1-æŒ‰ç…§å¹´çº§å’Œç­çº§-å¯¹æˆç»©æ±‚å‡å€¼">3.1.1 æŒ‰ç…§å¹´çº§å’Œç­çº§ å¯¹æˆç»©æ±‚å‡å€¼</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.groupby([<span class="hljs-string">'grade'</span>,<span class="hljs-string">'class'</span>])[[<span class="hljs-string">'math'</span>]].mean()<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right"></th><th style="text-align:right">math</th><th style="text-align:right"></th></tr></thead><tbody><tr><td style="text-align:right">grade</td><td style="text-align:right">class</td><td style="text-align:right"></td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">1</td><td style="text-align:right">87.666667</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">1</td><td style="text-align:right">77.000000</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">2</td><td style="text-align:right">77.000000</td></tr></tbody></table><h3 id="3-1-2-æŒ‰ç…§å¹´çº§æ±‡æ€»æ•°å­¦è¯­æ–‡-å‡å€¼">3.1.2 æŒ‰ç…§å¹´çº§æ±‡æ€»æ•°å­¦è¯­æ–‡ å‡å€¼</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.groupby([<span class="hljs-string">'grade'</span>])[[<span class="hljs-string">'math'</span>,<span class="hljs-string">'chinese'</span>]].mean()<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">grade</th><th style="text-align:right">math</th><th style="text-align:right">chinese</th></tr></thead><tbody><tr><td style="text-align:right">1</td><td style="text-align:right">87.666667</td><td style="text-align:right">84.000000</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">77.000000</td><td style="text-align:right">62.333333</td></tr></tbody></table><p><em><em>æ³¨æ„ç‚¹ï¼š<strong>é¦–å…ˆå¯¹dataè¡¨è¿›è¡Œgroupbyï¼Œç„¶ååœ¨è¿”å›çš„å¯¹è±¡ä¸­é€‰å–åˆ—ï¼Œç”¨</strong></em>åˆ—è¡¨å°è£…</em>**é€‰å–ï¼›</p><h2 id="3-2-æ±‡æ€»">3.2  æ±‡æ€»</h2><p>ä½¿ç”¨aggèšåˆè¿›è¡Œæ˜¾ç¤ºå‡å€¼ï¼Œæœ€å€¼ï¼Œä¸­ä½æ•°ï¼Œæ ‡å‡†å·®ï¼Œå¹³å‡ç»å¯¹åå·®ï¼Œè®¡æ•°ï¼Œåå·®ï¼›</p><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">data<span class="hljs-selector-class">.groupby</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'grade'</span>]</span>)<span class="hljs-selector-attr">[[<span class="hljs-string">'math'</span>,<span class="hljs-string">'chinese'</span>]</span>]<span class="hljs-selector-class">.agg</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'mean'</span>,<span class="hljs-string">'max'</span>,<span class="hljs-string">'min'</span>,<span class="hljs-string">'median'</span>,<span class="hljs-string">'std'</span>,<span class="hljs-string">'mad'</span>,<span class="hljs-string">'count'</span>,<span class="hljs-string">'skew'</span>]</span>)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--æ•°æ®åˆ†æ</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis2/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹æ•°æ®åˆ†æçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚</p></blockquote><blockquote><p>æœ¬ç¯‡ä¸»è¦å†…å®¹æ˜¯æ•°æ®åˆ†æï¼ŒåŒ…æ‹¬å•çº¯çš„æè¿°æ€§åˆ†æå’ŒæŠ¥è¡¨åˆ†æï¼Œè¿™é‡Œä¸»è¦è®²è§£äº†å•è¿ç»­å˜é‡æè¿°ç»Ÿè®¡é‡çš„æè¿°æ€§åˆ†æä»¥åŠæŠ¥è¡¨åˆ†æã€‚å¯ä»¥å‚è€ƒæœ¬ç¯‡çš„å›¾è¡¨ç»˜åˆ¶æ–¹æ³•å“¦ï¼ ğŸ‘¾</p></blockquote><h1>1 æè¿°æ€§åˆ†æ ğŸ©</h1><ol><li>å•åˆ†ç±»å˜é‡æè¿°é¢‘æ•°ï¼Œä¾‹å¦‚ï¼švalue_counts()æè¿°åˆ†ç±»å˜é‡ æŸ±å½¢å›¾</li><li>å•è¿ç»­å˜é‡æè¿°ç»Ÿè®¡é‡ï¼ˆå‡å€¼ï¼Œä¸­ä½æ•°ï¼Œå››åˆ†ä½æ•°ï¼Œæ€»å’Œç­‰ï¼‰ï¼Œä¾‹å¦‚ï¼šèšåˆå‡½æ•°aggï¼ˆï¼‰æè¿°ä»·æ ¼å˜é‡ ç›´æ–¹å›¾</li><li>åˆ†ç±»å˜é‡ä¸åˆ†ç±»å˜é‡æè¿°é¢‘æ•°ï¼Œä¾‹å¦‚ï¼šäº¤å‰è¡¨crosstab()æè¿°å„åœ°åŒºä¸æ˜¯å¦å­¦åŒºæˆ¿ äº¤å‰è¡¨â€”â€”å †å æŸ±çŠ¶å›¾</li><li>å•åˆ†ç±»å˜é‡ä¸å•è¿ç»­å˜é‡æè¿°è¿ç»­å˜é‡ç»Ÿè®¡å€¼ï¼Œä¾‹å¦‚ï¼Œåˆ†ç»„groupby()æè¿°å„åœ°åŒºçš„æˆ¿ä»·åˆ†å¸ƒ</li><li>åŒåˆ†ç±»å˜é‡ä¸è¿ç»­å˜é‡æè¿°è¿ç»­å˜é‡ç»Ÿè®¡å€¼ï¼Œé€è§†è¡¨pivot_table()æè¿°å„åœ°åŒºæˆ¿ä»·ä¸åœ°åŸŸï¼Œå­¦åŒºæˆ¿çš„å…³ç³»</li></ol><h2 id="1-1-å•å˜é‡æè¿°">1.1 å•å˜é‡æè¿°</h2><p>è¿™é‡Œä¸»è¦è®²è§£å•è¿ç»­å˜é‡æè¿°ç»Ÿè®¡é‡ã€‚</p><h3 id="åŸºæœ¬çš„æ•°æ®æè¿°">åŸºæœ¬çš„æ•°æ®æè¿°</h3><ul><li><p>å¹³å‡å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">data.loc[:,<span class="hljs-string">'price'</span>].mean()<br><span class="hljs-keyword">or</span><br>data.price.mean()<br></code></pre></td></tr></tbody></table></figure></li><li><p>ä¸­ä½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.median()<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ ‡å‡†å·®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.std()<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ–¹å·®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.var()<br></code></pre></td></tr></tbody></table></figure></li><li><p>ä½¿ç”¨èšåˆå‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.agg([<span class="hljs-string">'mean'</span>,<span class="hljs-string">'median'</span>,<span class="hljs-string">'std'</span>,<span class="hljs-string">'var'</span>])<br></code></pre></td></tr></tbody></table></figure></li></ul><h2 id="1-2-ç»˜åˆ¶å›¾åˆ†æ">1.2 ç»˜åˆ¶å›¾åˆ†æ</h2><p>â€‹ç»˜åˆ¶ç›´æ–¹å›¾</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.hist(bins=<span class="hljs-number">20</span>) <br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113100910142.png" alt=""></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.skew() <span class="hljs-comment">#å¤§äº0ä¸ºå³å å°äº0æ˜¯å·¦å</span><br><span class="hljs-comment">#0.6794935869486859</span><br></code></pre></td></tr></tbody></table></figure><h3 id="1-2-1-ååº¦ï¼ˆSkewnessï¼‰">1.2.1 ååº¦ï¼ˆSkewnessï¼‰</h3><p>Definition:æ˜¯æè¿°æ•°æ®åˆ†å¸ƒå½¢æ€çš„ç»Ÿè®¡é‡ï¼Œå…¶æè¿°çš„æ˜¯æŸæ€»ä½“å–å€¼åˆ†å¸ƒçš„<strong>å¯¹ç§°æ€§</strong>ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ•°æ®çš„ä¸å¯¹ç§°ç¨‹åº¦ã€‚ã€‚</p><p>ååº¦æ˜¯ä¸‰é˜¶ä¸­å¿ƒè·è®¡ç®—å‡ºæ¥çš„ã€‚<br>ï¼ˆ1ï¼‰Skewness = 0 ï¼Œåˆ†å¸ƒå½¢æ€ä¸æ­£æ€åˆ†å¸ƒååº¦ç›¸åŒã€‚<br>ï¼ˆ2ï¼‰Skewness &gt; 0 ï¼Œæ­£åå·®æ•°å€¼è¾ƒå¤§ï¼Œä¸ºæ­£åæˆ–å³åã€‚é•¿å°¾å·´æ‹–åœ¨å³è¾¹ï¼Œæ•°æ®å³ç«¯æœ‰è¾ƒå¤šçš„æç«¯å€¼ã€‚<br>ï¼ˆ3ï¼‰Skewness &lt; 0 ï¼Œè´Ÿåå·®æ•°å€¼è¾ƒå¤§ï¼Œä¸ºè´Ÿåæˆ–å·¦åã€‚é•¿å°¾å·´æ‹–åœ¨å·¦è¾¹ï¼Œæ•°æ®å·¦ç«¯æœ‰è¾ƒå¤šçš„æç«¯å€¼ã€‚<br>ï¼ˆ4ï¼‰æ•°å€¼çš„ç»å¯¹å€¼è¶Šå¤§ï¼Œè¡¨æ˜æ•°æ®åˆ†å¸ƒè¶Šä¸å¯¹ç§°ï¼Œåæ–œç¨‹åº¦å¤§ã€‚<br>è®¡ç®—å…¬å¼ï¼š<br>$$<br>Skewness=E[((x-E(x))/(\sqrt{D(x)}))^3]<br>$$</p><p>$$<br>| Skewness|è¶Šå¤§ï¼Œåˆ†å¸ƒå½¢æ€åç§»ç¨‹åº¦è¶Šå¤§ã€‚<br>$$</p><p><img src="https://picture.mulindya.com/image-20210113101410092.png" alt=""></p><h3 id="1-2-2-å³°åº¦ï¼ˆKurtosisï¼‰">1.2.2 å³°åº¦ï¼ˆKurtosisï¼‰</h3><p>Definition:ååº¦æ˜¯æè¿°æŸå˜é‡æ‰€æœ‰å–å€¼åˆ†å¸ƒå½¢æ€é™¡ç¼“ç¨‹åº¦çš„ç»Ÿè®¡é‡ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ•°æ®åˆ†å¸ƒé¡¶çš„<strong>å°–é”ç¨‹åº¦</strong>ã€‚<br>å³°åº¦æ˜¯å››é˜¶æ ‡å‡†çŸ©è®¡ç®—å‡ºæ¥çš„ã€‚<br>ï¼ˆ1ï¼‰Kurtosis=0 ä¸æ­£æ€åˆ†å¸ƒçš„é™¡ç¼“ç¨‹åº¦ç›¸åŒã€‚<br>ï¼ˆ2ï¼‰Kurtosis&gt;0 æ¯”æ­£æ€åˆ†å¸ƒçš„é«˜å³°æ›´åŠ é™¡å³­â€”â€”å°–é¡¶å³°<br>ï¼ˆ3ï¼‰Kurtosis&lt;0 æ¯”æ­£æ€åˆ†å¸ƒçš„é«˜å³°æ¥å¾—å¹³å°â€”â€”å¹³é¡¶å³°<br>è®¡ç®—å…¬å¼ï¼š<br>$$<br>Kurtosis=E[ ( (x-E(x))/ (\sqrt(D(x))) )^4 ]-3<br>$$</p><h3 id="1-2-3-åˆ†ä½æ•°">1.2.3 åˆ†ä½æ•°</h3><p>å…¶ä¸­0.25 å’Œ0.75 ä¸ºå››åˆ†ä½æ•°ï¼Œ0.5æ˜¯å‡å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.quantile([<span class="hljs-number">0.25</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.75</span>]) <br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨æ„ç‚¹</strong>ï¼šå››åˆ†ä½ å¿½ç•¥NAå€¼</p><h1>2  æŠ¥è¡¨åˆ†æ ğŸ‘‘</h1><p>æŠ¥è¡¨å±•ç¤ºæ•°æ®ä¸»è¦ä¿¡æ¯ ï¼›åˆ†ä¸ºç»´åº¦æŒ‡æ ‡ï¼ˆåˆ†ç±»æŒ‡æ ‡ï¼‰ å’Œåº¦é‡æŒ‡æ ‡ ï¼ˆè¿ç»­å˜é‡ï¼‰ï¼›ä»…åŒ…å«ç»´åº¦æŒ‡æ ‡çš„æŠ¥è¡¨ä¸ºé¢‘æ¬¡è¡¨ï¼ˆå•ä¸ªåˆ†ç±»å˜é‡ï¼‰å’Œäº¤å‰è¡¨ï¼ˆä¸¤ä¸ªå’Œä¸¤ä¸ªä»¥ä¸Šåˆ†ç±»å˜é‡ï¼‰ã€‚åŒ…å«ç»´åº¦å’Œåº¦é‡ä¸¤ç±»æŒ‡æ ‡çš„æŠ¥è¡¨ç§°ä¹‹ä¸ºæ±‡æ€»è¡¨ åº¦é‡æŒ‡æ ‡æ€»æ˜¯ä»¥æŸä¸ªç»Ÿè®¡é‡çš„å½¢å¼å‡ºç°ï¼Œæœ€å¸¸è§çš„æ˜¯å‡å€¼ï¼Œæ€»å’Œï¼Œé¢‘æ¬¡ã€‚</p><h2 id="2-1-è¡¨åˆ†æ">2.1 è¡¨åˆ†æ</h2><h3 id="2-1-1äº¤å‰è¡¨">2.1.1äº¤å‰è¡¨</h3><p>åˆ†æä¸¤ä¸ªåˆ†ç±»å˜é‡çš„è”åˆåˆ†å¸ƒæƒ…å†µ æä¾›æ¯ä¸ªå•å…ƒæ ¼é¢‘æ¬¡,ç™¾åˆ†æ¯”å’Œè¾¹æ²¿åˆ†å¸ƒã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">subway_school = pd.crosstab(data.subway,data.school)<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">subway\school</th><th style="text-align:right">0</th><th style="text-align:right">1</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">2378</td><td style="text-align:right">413</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">8919</td><td style="text-align:right">4500</td></tr></tbody></table><p><strong>ç»˜å›¾ï¼š</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">subway_school.plot(kind=<span class="hljs-string">'bar'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æ¨ªè½´é»˜è®¤ä¸ºsubwayï¼ˆè¡Œï¼‰</p><p><img src="https://picture.mulindya.com/image-20210113123315967.png" alt=""></p><p>è¿›ä¸€æ­¥åˆ†æï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">subway_school.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>)æ˜¯axisä¸º<span class="hljs-number">1</span>çš„æ¡ä»¶ä¸‹çš„å’Œï¼ˆå¯¹åˆ—ç›¸åŠ ï¼‰<br></code></pre></td></tr></tbody></table></figure><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">subway</span><br><span class="hljs-attribute">0</span>     <span class="hljs-number">2791</span><br><span class="hljs-attribute">1</span>    <span class="hljs-number">13419</span><br><span class="hljs-attribute">dtype</span>: int<span class="hljs-number">64</span><br></code></pre></td></tr></tbody></table></figure><p><em><strong>divå‡½æ•°</strong></em>ï¼š sumçš„axisä¸º1ï¼Œåœ¨ä½¿ç”¨divå‡½æ•°æ—¶divå‡½æ•°ä¸­çš„axisåº”è¯¥å–0ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„è¡Œä¸­çš„æ•°æ®å æ­¤è¡Œæ€»æ•°çš„æ¯”ä¾‹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: subway_school.div(other, axis=<span class="hljs-string">'columns'</span>, level=<span class="hljs-literal">None</span>, fill_value=<span class="hljs-literal">None</span>)<br>Docstring:<br>Floating division of dataframe <span class="hljs-keyword">and</span> other, element-wise (binary operator `truediv`).<br><br>Equivalent to ``dataframe / other``, but <span class="hljs-keyword">with</span> support to substitute a fill_value <span class="hljs-keyword">for</span><br>missing data <span class="hljs-keyword">in</span> one of the inputs.<br></code></pre></td></tr></tbody></table></figure><p>å®ä¾‹ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">subway_school_per = subway_school.div(subway_school.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>),axis=<span class="hljs-number">0</span>) <span class="hljs-comment">#ç™¾åˆ†æ¯”</span><br>subway_school_per.plot(kind=<span class="hljs-string">'bar'</span>,stacked=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113124417643.png" alt=""></p><h3 id="2-1-2-åˆ†ç±»æ±‡æ€»">2.1.2 åˆ†ç±»æ±‡æ€»</h3><h4 id="2-1-2-1-ä½¿ç”¨groupbyåˆ†æ">2.1.2.1 ä½¿ç”¨groupbyåˆ†æ</h4><p>**æ³¨æ„ç‚¹ï¼š**groupbbyåˆ†æè¿”å›çš„æ˜¯å¯¹è±¡</p><ul><li><p>é€šè¿‡distå¯¹priceåˆ†ç»„ åœ¨åˆ†ç»„ä¸­æ±‚å‡å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.groupby(data.dist).mean()<br></code></pre></td></tr></tbody></table></figure><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">dist</span><br><span class="hljs-attribute">chaoyang</span>       <span class="hljs-number">52800</span>.<span class="hljs-number">624651</span><br><span class="hljs-attribute">dongcheng</span>      <span class="hljs-number">71883</span>.<span class="hljs-number">595041</span><br><span class="hljs-attribute">fengtai</span>        <span class="hljs-number">42500</span>.<span class="hljs-number">904309</span><br><span class="hljs-attribute">haidian</span>        <span class="hljs-number">68757</span>.<span class="hljs-number">602261</span><br><span class="hljs-attribute">shijingshan</span>    <span class="hljs-number">40286</span>.<span class="hljs-number">889574</span><br><span class="hljs-attribute">xicheng</span>        <span class="hljs-number">85674</span>.<span class="hljs-number">778545</span><br><span class="hljs-attribute">Name</span>: price, dtype: float<span class="hljs-number">64</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>ç»˜å›¾</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.groupby(data.dist).mean().plot(kind=<span class="hljs-string">'bar'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113110942085.png" alt=""></p></li><li><p>æ’åº</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.groupby(data.dist).mean().sort_values(ascending=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></tbody></table></figure><p>sort_values:æ˜¯å¯¹æ•°å€¼è¿›è¡Œæ’åºï¼Œascendingé»˜è®¤æ˜¯Trueï¼Œä¹Ÿå°±æ˜¯æŒ‰å‡åºæ’åºï¼›</p></li><li><p>æ’åºåç»˜å›¾</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.groupby(data.dist).mean().sort_values(ascending=<span class="hljs-literal">False</span>).plot(kind=<span class="hljs-string">'bar'</span>)<br></code></pre></td></tr></tbody></table></figure></li></ul><p><img src="https://picture.mulindya.com/image-20210113110957663.png" alt=""></p><ul><li><p>å½’å¹¶å‡½æ•°ç»“æœ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.price.groupby(data.dist).agg([<span class="hljs-string">'mean'</span>,<span class="hljs-string">'max'</span>,<span class="hljs-string">'min'</span>,<span class="hljs-string">'std'</span>]) <br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th style="text-align:right">dist</th><th style="text-align:right">mean</th><th style="text-align:right">max</th><th style="text-align:right">min</th><th style="text-align:right">std</th></tr></thead><tbody><tr><td style="text-align:right">chaoyang</td><td style="text-align:right">52800.624651</td><td style="text-align:right">124800</td><td style="text-align:right">23011</td><td style="text-align:right">13305.691821</td></tr><tr><td style="text-align:right">dongcheng</td><td style="text-align:right">71883.595041</td><td style="text-align:right">149254</td><td style="text-align:right">20089</td><td style="text-align:right">18368.096658</td></tr><tr><td style="text-align:right">fengtai</td><td style="text-align:right">42500.904309</td><td style="text-align:right">87838</td><td style="text-align:right">18348</td><td style="text-align:right">8888.588815</td></tr><tr><td style="text-align:right">haidian</td><td style="text-align:right">68757.602261</td><td style="text-align:right">135105</td><td style="text-align:right">25568</td><td style="text-align:right">17128.956039</td></tr><tr><td style="text-align:right">shijingshan</td><td style="text-align:right">40286.889574</td><td style="text-align:right">100000</td><td style="text-align:right">18854</td><td style="text-align:right">10389.217354</td></tr><tr><td style="text-align:right">xicheng</td><td style="text-align:right">85674.778545</td><td style="text-align:right">149871</td><td style="text-align:right">21918</td><td style="text-align:right">19964.458991</td></tr></tbody></table></li></ul><h4 id="2-1-2-2-ç®±å‹å›¾">2.1.2.2 ç®±å‹å›¾</h4><p><img src="https://picture.mulindya.com/image-20210113105256801.png" alt=""></p><p>IQRï¼š å†…åˆ†ä½è·ï¼Œä¸ºä¸Šå››åˆ†ä½æ•°-ä¸‹å››åˆ†ä½æ•°</p><p>ä¸Šè¾¹ç¼˜æ˜¯ä¸Š1.5å€IQRï¼Œç­‰äºä¸Šå››åˆ†ä½+1.5*IQR</p><p>ä¸‹è¾¹ç¼˜æ˜¯ä¸‹1.5å€IQRï¼Œç­‰äºä¸‹å››åˆ†ä½-1.5*IQR</p><p><em>å‡¡æ˜¯è¶…è¿‡ä¸Šè¾¹ç¼˜ï¼Œè¶Šè¿‡ä¸‹è¾¹ç¼˜ä¸ºå¼‚å¸¸å€¼ï¼Œä¸ä¸€å®šæ˜¯é”™è¯¯å€¼</em></p><p><strong>ä»£ç å®ç°ï¼š</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br>sns.boxplot(x=<span class="hljs-string">'dist'</span>,y=<span class="hljs-string">'price'</span>,data=data) <span class="hljs-comment">#ç®±å½¢å›¾ å˜é‡åˆ†å¸ƒå’Œå¼‚å¸¸å€¼ä¿¡æ¯</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113110145360.png" alt=""></p><h3 id="2-1-3-æ±‡æ€»è¡¨">2.1.3 æ±‡æ€»è¡¨</h3><h4 id="2-1-3-1-é€è§†è¡¨">2.1.3.1 é€è§†è¡¨</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.pivot_table(values=<span class="hljs-string">'price'</span>,index=<span class="hljs-string">'dist'</span>,columns=<span class="hljs-string">'school'</span>,aggfunc=np.mean)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨indexå’ŒcolumnsæŒ‡å®šè¡Œåˆ—ï¼Œvaluesæ˜¯ç»Ÿè®¡çš„å¯¹è±¡ï¼Œaggfuncæ˜¯èšåˆå‡½æ•°â€“ä½¿ç”¨çš„æ˜¯numpyçš„meanå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å±•ç°çš„æ˜¯priceçš„å¹³å‡å€¼ï¼›</p><table><thead><tr><th style="text-align:right">dist\ school</th><th style="text-align:right">0</th><th style="text-align:right">1</th></tr></thead><tbody><tr><td style="text-align:right">chaoyang</td><td style="text-align:right">51588.511689</td><td style="text-align:right">57403.405360</td></tr><tr><td style="text-align:right">dongcheng</td><td style="text-align:right">66276.887931</td><td style="text-align:right">78514.900392</td></tr><tr><td style="text-align:right">fengtai</td><td style="text-align:right">42291.003505</td><td style="text-align:right">48871.617021</td></tr><tr><td style="text-align:right">haidian</td><td style="text-align:right">61385.803653</td><td style="text-align:right">76911.258297</td></tr><tr><td style="text-align:right">shijingshan</td><td style="text-align:right">40353.883878</td><td style="text-align:right">33107.333333</td></tr><tr><td style="text-align:right">xicheng</td><td style="text-align:right">76989.369511</td><td style="text-align:right">92468.873623</td></tr></tbody></table><h5 id="2-1-3-1-1ç»˜åˆ¶ç›´æ–¹å›¾">2.1.3.1.1<strong>ç»˜åˆ¶ç›´æ–¹å›¾</strong></h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.pivot_table(values=<span class="hljs-string">'price'</span>,index=<span class="hljs-string">'dist'</span>,columns=<span class="hljs-string">'school'</span>,aggfunc=np.mean).plot(kind=<span class="hljs-string">'bar'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113112824144.png" alt=""></p><h5 id="2-1-3-1-2ç»˜åˆ¶æ•£ç‚¹å›¾">2.1.3.1.2<strong>ç»˜åˆ¶æ•£ç‚¹å›¾</strong></h5><p>åˆ†æä¸¤ä¸ªè¿ç»­å˜é‡ åˆ†æareaæ˜¯å¦å½±å“price</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data.plot.scatter(x=<span class="hljs-string">'AREA'</span>,y=<span class="hljs-string">'price'</span>)<br><span class="hljs-comment">#åˆ†æä¸¤ä¸ªè¿ç»­å˜é‡ åˆ†æareaæ˜¯å¦å½±å“price</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113121653569.png" alt=""></p><h5 id="2-1-3-1-3ç»˜åˆ¶åŒè½´å›¾">2.1.3.1.3<strong>ç»˜åˆ¶åŒè½´å›¾</strong></h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">fig = plt.figure() <span class="hljs-comment">#ç”»å¸ƒ</span><br>ax1 = fig.add_subplot(<span class="hljs-number">111</span>) <span class="hljs-comment">#1è¡Œ1åˆ— çš„ç¬¬ä¸€ä¸ª</span><br>ax1.plot(x,gdp_list,<span class="hljs-string">'g-'</span>)<br>ax1.set_xlim(<span class="hljs-number">2000</span>,<span class="hljs-number">2018</span>)<br>ax2 = ax1.twinx()<br>ax2.plot(x,gdpcr,<span class="hljs-string">'b-'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113121558625.png" alt=""></p><h2 id="2-2-åˆå¹¶æ“ä½œ">2.2  åˆå¹¶æ“ä½œ</h2><h3 id="2-2-1-mergeæ“ä½œ">2.2.1 mergeæ“ä½œ</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.merge(df3,df4)<br>pd.merge(df3,df4,on=<span class="hljs-string">'key'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113124935656.png" alt=""></p><h3 id="2-2-2-concatæ“ä½œ">2.2.2 concatæ“ä½œ</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.concat([df3,df4]) <span class="hljs-comment">#è¿›è¡Œå †å </span><br>pd.concat([df3,df4],axis=<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210113124828815.png" alt=""></p><p><img src="https://picture.mulindya.com/image-20210113124919494.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
      <tag>ç»˜å›¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åˆ†æç¬”è®°--ç´¢å¼•æ“ä½œ</title>
    <link href="/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis1/"/>
    <url>/2022/01/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/DataAnalysis1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç§‘å®è®­çš„æ—¶å€™è®°å½•çš„æ•°æ®åˆ†æçš„ç¬”è®°ï¼Œæ„Ÿè§‰è¿˜æŒºå…¨é¢çš„ï¼Œéƒ¨ç½²åˆ°åšå®¢ä¸­ï¼Œä»Šåå¯¹pandasçš„åº”ç”¨å¯ä»¥æ–¹ä¾¿å›é¡¾ã€‚<br>æœ¬ç¯‡ä¸»è¦å†…å®¹æ•°æ®åˆ†æçš„ç´¢å¼•æ“ä½œï¼Œå¯¹Seriesä»¥åŠDataFrameçš„ç´¢å¼•æ“ä½œã€‚ğŸ˜‰</p></blockquote><h1>1 ç´¢å¼•æ“ä½œ ğŸ“†</h1><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#ç´¢å¼•æ“ä½œ</span><br>ser1 = pd.Series(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>,<span class="hljs-number">15</span>),index = <span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDE'</span>))<br>ser2 = pd.Series(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>,<span class="hljs-number">15</span>),index = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">6</span>))<br><span class="hljs-comment"># ser2[1:3] #éšå¼å–å€¼ ä¸åŒ…å«ç»“æŸä½</span><br><span class="hljs-comment"># ser2[1] #å­—æ¯æƒ…å†µå¯ä»¥ä½¿ç”¨ä¸‹æ ‡éšå¼ æ•°å­—æ—¶é»˜è®¤æ˜¾ç¤ºå–å€¼</span><br><span class="hljs-comment"># ser1['A':'C'] #ç´¢å¼•å–å€¼åŒ…å«ç»“æŸä½</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># #ä¸è¿ç»­æ—¶</span><br><span class="hljs-comment"># ser1[['B','E']]</span><br><span class="hljs-comment"># #å¸ƒå°”ç´¢å¼•</span><br><span class="hljs-comment"># ser1</span><br><span class="hljs-comment"># ser1[ser1&gt;12]</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">newdict = {<br>    <span class="hljs-string">'A'</span>:<span class="hljs-number">11</span>,<br>    <span class="hljs-string">'B'</span>:[<span class="hljs-string">'java'</span>,<span class="hljs-string">'python'</span>,<span class="hljs-string">'go'</span>,<span class="hljs-string">'C++'</span>],<br>    <span class="hljs-string">'C'</span>:<span class="hljs-string">'addasf'</span><br>}<br>df1 = pd.DataFrame(newdict,index = <span class="hljs-built_in">list</span>(<span class="hljs-string">'abcd'</span>))<br>df2 = pd.DataFrame(np.random.rand(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),columns=<span class="hljs-built_in">list</span>(<span class="hljs-string">'ABCDE'</span>),index=<span class="hljs-built_in">list</span>(<span class="hljs-string">'abcd'</span>))<br></code></pre></td></tr></tbody></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>A</th>      <th>B</th>      <th>C</th>    </tr>  </thead>  <tbody>    <tr>      <th>a</th>      <td>11</td>      <td>java</td>      <td>addasf</td>    </tr>    <tr>      <th>b</th>      <td>11</td>      <td>python</td>      <td>addasf</td>    </tr>    <tr>      <th>c</th>      <td>11</td>      <td>go</td>      <td>addasf</td>    </tr>    <tr>      <th>d</th>      <td>11</td>      <td>C++</td>      <td>addasf</td>    </tr>  </tbody></table><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>A</th>      <th>B</th>      <th>C</th>      <th>D</th>      <th>E</th>    </tr>  </thead>  <tbody>    <tr>      <th>a</th>      <td>0.093207</td>      <td>0.557518</td>      <td>0.333789</td>      <td>0.695109</td>      <td>0.206757</td>    </tr>    <tr>      <th>b</th>      <td>0.412221</td>      <td>0.318664</td>      <td>0.335479</td>      <td>0.279908</td>      <td>0.185551</td>    </tr>    <tr>      <th>c</th>      <td>0.609854</td>      <td>0.506528</td>      <td>0.934166</td>      <td>0.709873</td>      <td>0.914060</td>    </tr>    <tr>      <th>d</th>      <td>0.728796</td>      <td>0.538920</td>      <td>0.153949</td>      <td>0.497407</td>      <td>0.894722</td>    </tr>  </tbody></table><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#é»˜è®¤ä¸æ”¯æŒè¿ç»­ç´¢å¼•å–å¤šåˆ— ä½¿ç”¨é«˜çº§ç´¢å¼•</span><br><span class="hljs-comment">#é»˜è®¤ä¸æ”¯æŒç´¢å¼•å–ä¸è¿ç»­å¤šè¡Œ</span><br><span class="hljs-comment">#df1['a':'b'] #å¯ä»¥å®ç°ä½†æ˜¯ä¸æ¨è</span><br></code></pre></td></tr></tbody></table></figure><h1>2 é«˜çº§ç´¢å¼• ğŸ“œ</h1><h2 id="2-1-loc-æ ‡ç­¾ç´¢å¼•">2.1 loc æ ‡ç­¾ç´¢å¼•</h2><h3 id="2-1-1-å¯¹Seriesæ“ä½œ">2.1.1 å¯¹Seriesæ“ä½œ</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å–è¿ç»­å¤šè¡Œ</span><br><span class="hljs-built_in">print</span>(ser1.loc[<span class="hljs-string">'A'</span>:<span class="hljs-string">'D'</span>])<br><span class="hljs-comment">#å–è¿ç»­å¤šè¡Œ</span><br><span class="hljs-built_in">print</span>(ser1.loc[[<span class="hljs-string">'A'</span>,<span class="hljs-string">'C'</span>,<span class="hljs-string">'E'</span>]])<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#dataframe å–å•è¡Œ</span><br>df1.loc[<span class="hljs-string">'a'</span>] <span class="hljs-comment">#è¿”å›series ä¸df1.loc['a',:]æ•ˆæœä¸€æ ·</span><br></code></pre></td></tr></tbody></table></figure><h3 id="2-1-2-å¯¹dataframeæ“ä½œ">2.1.2 å¯¹dataframeæ“ä½œ</h3><h4 id="2-1-2-1ç´¢å¼•å–å€¼æ“ä½œ">2.1.2.1ç´¢å¼•å–å€¼æ“ä½œ</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#data å–å•åˆ—</span><br>df1.loc[:,<span class="hljs-string">'A'</span>] <span class="hljs-comment">#è¿”å›series</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df1.loc[<span class="hljs-string">'b'</span>,<span class="hljs-string">'B'</span>] <span class="hljs-comment">#å•å€¼</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å–è¿ç»­å¤šåˆ—</span><br><span class="hljs-built_in">print</span>(df1.loc[<span class="hljs-string">'a'</span>:<span class="hljs-string">'c'</span>]) <span class="hljs-comment">#åŒ…å«ç»“æŸä½ å¯ä»¥çœç•¥åé¢çš„ï¼Œï¼š</span><br><span class="hljs-comment">#å–è¿ç»­å¤šåˆ—</span><br><span class="hljs-built_in">print</span>(df1.loc[:,<span class="hljs-string">'B'</span>:<span class="hljs-string">'C'</span>]) <span class="hljs-comment">#åŒ…å«ç»“æŸä½ é€—å·åˆ†å‰²å‰ä¸ºè¡Œåä¸ºåˆ—</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(df1.loc[[<span class="hljs-string">'a'</span>,<span class="hljs-string">'d'</span>]])<br><span class="hljs-built_in">print</span>(df1.loc[:,[<span class="hljs-string">'A'</span>,<span class="hljs-string">'C'</span>]])<br><span class="hljs-built_in">print</span>(df1.loc[[<span class="hljs-string">'a'</span>,<span class="hljs-string">'d'</span>],[<span class="hljs-string">'A'</span>,<span class="hljs-string">'C'</span>]])<br></code></pre></td></tr></tbody></table></figure><h4 id="2-1-2-2å¸ƒå°”ç´¢å¼•">2.1.2.2å¸ƒå°”ç´¢å¼•</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df2[<span class="hljs-string">'a'</span>:<span class="hljs-string">'c'</span>]&lt;<span class="hljs-number">0.5</span><br></code></pre></td></tr></tbody></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>A</th>      <th>B</th>      <th>C</th>      <th>D</th>      <th>E</th>    </tr>  </thead>  <tbody>    <tr>      <th>a</th>      <td>True</td>      <td>False</td>      <td>True</td>      <td>False</td>      <td>True</td>    </tr>    <tr>      <th>b</th>      <td>True</td>      <td>True</td>      <td>True</td>      <td>True</td>      <td>True</td>    </tr>    <tr>      <th>c</th>      <td>False</td>      <td>False</td>      <td>False</td>      <td>False</td>      <td>False</td>    </tr>  </tbody></table><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df2[df2[<span class="hljs-string">'a'</span>:<span class="hljs-string">'c'</span>]&lt;<span class="hljs-number">0.5</span>]<br></code></pre></td></tr></tbody></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>A</th>      <th>B</th>      <th>C</th>      <th>D</th>      <th>E</th>    </tr>  </thead>  <tbody>    <tr>      <th>a</th>      <td>0.093207</td>      <td>NaN</td>      <td>0.333789</td>      <td>NaN</td>      <td>0.206757</td>    </tr>    <tr>      <th>b</th>      <td>0.412221</td>      <td>0.318664</td>      <td>0.335479</td>      <td>0.279908</td>      <td>0.185551</td>    </tr>    <tr>      <th>c</th>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>    </tr>    <tr>      <th>d</th>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>      <td>NaN</td>    </tr>  </tbody></table><h2 id="2-2-ilocä½ç½®ç´¢å¼•">2.2 ilocä½ç½®ç´¢å¼•</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df2.iloc[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>,<span class="hljs-number">2</span>:<span class="hljs-number">4</span>] <span class="hljs-comment">#ä¸åŒ…å«ç»“æŸä½</span><br></code></pre></td></tr></tbody></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>C</th>      <th>D</th>    </tr>  </thead>  <tbody>    <tr>      <th>b</th>      <td>0.335479</td>      <td>0.279908</td>    </tr>    <tr>      <th>c</th>      <td>0.934166</td>      <td>0.709873</td>    </tr>  </tbody></table><h2 id="2-3-ix-æ··åˆç´¢å¼•-åŸºæœ¬ä¸Šä¸ä½¿ç”¨">2.3 ix æ··åˆç´¢å¼• åŸºæœ¬ä¸Šä¸ä½¿ç”¨</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df2.ix[df2.A&lt;<span class="hljs-number">0.5</span>,:<span class="hljs-string">'C'</span>]<br></code></pre></td></tr></tbody></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>A</th>      <th>B</th>      <th>C</th>    </tr>  </thead>  <tbody>    <tr>      <th>a</th>      <td>0.093207</td>      <td>0.557518</td>      <td>0.333789</td>    </tr>    <tr>      <th>b</th>      <td>0.412221</td>      <td>0.318664</td>      <td>0.335479</td>    </tr>  </tbody></table><h1>3 åˆ é™¤æ“ä½œ ğŸ¯</h1><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#åˆ é™¤æŒ‡å®šè¡Œæ•°æ®</span><br><span class="hljs-built_in">print</span>(df1)<br>df1.drop(<span class="hljs-string">'a'</span>,inplace=<span class="hljs-literal">True</span>) <span class="hljs-comment">#axis=0 é»˜è®¤æŒ‡å®šè¡Œæ ‡ inplaceæŒ‡å®šæ˜¯å¦åœ¨åŸå§‹æ•°æ®ä¸Šæ“ä½œ</span><br><span class="hljs-built_in">print</span>(df1)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#åˆ é™¤æŒ‡å®šåˆ—æ•°æ®</span><br><span class="hljs-built_in">print</span>(df1)<br>temp = df1.drop(<span class="hljs-string">'B'</span>,axis=<span class="hljs-number">1</span>) <span class="hljs-comment">#axis=1 æŒ‡å®šåˆ—</span><br><span class="hljs-built_in">print</span>(df1)<br><span class="hljs-built_in">print</span>(temp)<br></code></pre></td></tr></tbody></table></figure><h1>4 æ•°æ®åˆ†æå®ä¾‹ ğŸ </h1><h2 id="4-1-æ•°æ®åŸºæœ¬ä¿¡æ¯å¤„ç†">4.1 æ•°æ®åŸºæœ¬ä¿¡æ¯å¤„ç†</h2><h3 id="4-1-1è¯»å–æ•°æ®">4.1.1è¯»å–æ•°æ®</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data = pd.read_csv(<span class="hljs-string">'./data/sndHsPr.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/image-20210112130635768.png" alt=""></p><h3 id="4-1-2-è®¡ç®—æ€»ä»·-åŠ å…¥å½“å‰æ•°æ®">4.1.2 è®¡ç®—æ€»ä»· åŠ å…¥å½“å‰æ•°æ®</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#è®¡ç®—æ€»ä»· å¹¶ä¸”å°†æ€»ä»·åŠ å…¥åˆ°å½“å‰æ•°æ®</span><br>temp = data.loc[:,[<span class="hljs-string">'AREA'</span>,<span class="hljs-string">'price'</span>]].apply(<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">0</span>]*x[<span class="hljs-number">1</span>],axis=<span class="hljs-number">1</span>) <br><span class="hljs-comment">#å°†functionåº”ç”¨åˆ°è¡Œæˆ–è€…åˆ—</span><br>data[<span class="hljs-string">'sumprice'</span>] = temp<br></code></pre></td></tr></tbody></table></figure><p><strong>locé€‰å–æŒ‡å®šåˆ—ï¼Œä½¿ç”¨apply()å‡½æ•°å¯¹é€‰å–çš„åˆ—åŠè¿›è¡Œå¤„ç†ï¼› axisä¸º0åˆ™é€‰å–åˆ— ï¼Œä¸º1åˆ™é€‰å–è¡Œ ï¼Œé»˜è®¤axisä¸º0ã€‚</strong></p><p><img src="https://picture.mulindya.com/image-20210112131321319.png" alt=""></p><h3 id="4-1-3-å°†dictè½¬åŒ–ä¸ºä¸­æ–‡æ’å…¥è¡¨ä¸­">4.1.3 å°†dictè½¬åŒ–ä¸ºä¸­æ–‡æ’å…¥è¡¨ä¸­</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">newdict = {<span class="hljs-string">'chaoyang'</span>:<span class="hljs-string">'æœé˜³'</span>,<span class="hljs-string">'dongcheng'</span>:<span class="hljs-string">'ä¸œåŸ'</span>,<span class="hljs-string">'fengtai'</span>:<span class="hljs-string">'ä¸°å°'</span>,<span class="hljs-string">'haidian'</span>:<span class="hljs-string">'æµ·æ·€'</span>,<span class="hljs-string">'shijingshan'</span>:<span class="hljs-string">'çŸ³æ™¯å±±'</span>,<span class="hljs-string">'xicheng'</span>:<span class="hljs-string">'è¥¿åŸ'</span>}<br>data[<span class="hljs-string">'newdist'</span>] = data.loc[:,<span class="hljs-string">'dist'</span>].<span class="hljs-built_in">map</span>(newdict)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨locè¿›è¡Œé€‰å–å¯¹åº”åˆ—ç„¶åè¿›è¡Œmapæ“ä½œï¼Œå°†å­—å…¸çš„é”®è½¬åŒ–ä¸ºå¯¹åº”å€¼ï¼Œè¿”å›serieså¯¹è±¡</p><h2 id="4-2-ç®€å•ç»˜å›¾å±•ç¤º">4.2 ç®€å•ç»˜å›¾å±•ç¤º</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data.dist.value_counts().plot(kind=<span class="hljs-string">'barh'</span>)<br>data.dist.value_counts().plot(kind=<span class="hljs-string">'pie'</span>)<br></code></pre></td></tr></tbody></table></figure><p>value_countså‡½æ•°å¯ä»¥è¿›è¡Œç»Ÿè®¡ä¸åŒå€¼çš„ä¸ªæ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span> mpl<br>mpl.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]<br>data.newdist.value_counts().plot(kind=<span class="hljs-string">'pie'</span>)<br></code></pre></td></tr></tbody></table></figure><p><strong>ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜</strong> ä¿®æ”¹å±æ€§å‚æ•°â€™font.sans-serifâ€™ä¸º[â€˜SimHeiâ€™]</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æ•°æ®åˆ†æ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Latexä¸­çš„ç©ºæ ¼</title>
    <link href="/2022/01/18/project_tool/quat/"/>
    <url>/2022/01/18/project_tool/quat/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•Latexåœ¨å…¬å¼ä¸­ä½¿ç”¨ç©ºæ ¼ã€‚</p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨ç©ºæ ¼éƒ½æ˜¯<code>\quad</code> å‘½ä»¤ã€‚ä½†æœ€è¿‘å‘ç°è¿™ä¸ªç©ºæ ¼è·ç¦»å¤ªå¤§äº†ï¼Œéœ€è¦å°ä¸€ç‚¹çš„ç©ºæ ¼ã€‚<br>æ‰€ä»¥æ”¹ç”¨\ å‘½ä»¤ã€‚</p><h2 id="ä¸€ä¸ªç©ºæ ¼">ä¸€ä¸ªç©ºæ ¼</h2><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span> \quad <span class="hljs-selector-tag">b</span><br></code></pre></td></tr></tbody></table></figure><p>$$<br>a \quad b<br>$$</p><h2 id="ä¸¤ä¸ªç©ºæ ¼">ä¸¤ä¸ªç©ºæ ¼</h2><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span> \qquad <span class="hljs-selector-tag">b</span><br></code></pre></td></tr></tbody></table></figure><p>$$<br>a \qquad b<br>$$</p><h2 id="ä¸€ä¸ªmçš„é•¿åº¦">ä¸€ä¸ªmçš„é•¿åº¦</h2><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span> \ <span class="hljs-selector-tag">b</span><br></code></pre></td></tr></tbody></table></figure><p>$$<br>a \ b<br>$$</p>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Latex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬å››ç« ç¬”è®°</title>
    <link href="/2022/01/17/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML4/"/>
    <url>/2022/01/17/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML4/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚</p></blockquote><h1>ç¬¬å››ç« </h1><h2 id="4-1-æ¨¡å‹è¯„ä¼°">4.1 æ¨¡å‹è¯„ä¼°</h2><p>Pæ¥æºäºdataé‡‡æ ·å¾—åˆ°æ¨¡å‹ä¹‹åå¾—åˆ°é¢„æµ‹ï¼Œè¿™ä¸ªæ–°çš„é¢„æµ‹æ˜¯æ›´åŠ å…³å¿ƒçš„ã€‚</p><p>ç»™å®šæ•°æ®ç»™å®š è¶…å‚æ•° å·²ç»è·å–åˆ°æ¨¡å‹</p><ul><li><strong>Loss measures</strong> how good the model in predicting the outcome in supervised learning</li><li>Other metrics to evaluate the model performance<br>â€¢ Model specific: e.g. accuracy for classification, mAP for object detection<br>â€¢ Business specific: e.g. revenue, inference latency</li><li>We select models by multiple metrics<br>â€¢ Just like how you choose cars</li></ul><p>åœ¨ç›‘ç£å­¦ä¹ ä¸­æŸå¤±valueæ˜¯ä¸€ä¸ªå¥½çš„æŒ‡æ ‡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„ç²¾åº¦æ¯”å¦‚accï¼ŒmAPï¼Œå•†ä¸šç›¸å…³æŒ‡æ ‡ï¼ˆè¥æ”¶å¢é•¿ï¼Œæµé‡ï¼‰ï¼Œæˆ‘ä»¬ä¼šè¡¡é‡å¤šä¸ªæŒ‡æ ‡æ¥åˆ¤æ–­æ¨¡å‹å¥½åã€‚</p><h3 id="4-1-1-å¸¸è§åˆ†ç±»æŒ‡æ ‡">4.1.1 å¸¸è§åˆ†ç±»æŒ‡æ ‡</h3><ul><li><p>å‡†ç¡®ç‡Accuracy: # correct predictions / # examples  å¾—åˆ°çš„yä¸­æœ‰å¤šå°‘æ­£ç¡®é¢„æµ‹äº†</p>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span>(y==y_hat)/y.size<br></code></pre></td></tr></tbody></table></figure></li><li><p>ç²¾åº¦Precision: # True positive / # (True positive + False positive)</p><p>è´Ÿç±»æ•°æ®è¿œå¤§äºæ­£ç±»ï¼Œå¹¶ä¸”æ›´å…³æ³¨æ­£ç±»æ—¶ï¼Œaccå°±ä¸é€‚ç”¨äº†ã€‚</p><p>precisionå¯¹äºé¢„æµ‹å…·ä½“çœŸå®ç±»åˆ«ï¼ˆæ­£ä¾‹ï¼‰ï¼Œå“ªäº›è¢«æ­£ç¡®é¢„æµ‹äº†ã€‚åˆ¤æ–­ä¸ºæ­£ä¾‹çš„ç½®ä¿¡åº¦å¾ˆå¤§ï¼Œä¹Ÿå°±æ˜¯å¯¹æ­£ä¾‹åˆ¤æ–­è¶Šä¸¥è°¨ç²¾åº¦è¶Šå¤§ã€‚</p>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span>((y_hat==<span class="hljs-number">1</span>)&amp;(y==<span class="hljs-number">1</span>))/<span class="hljs-built_in">sum</span>(y_hat==<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure></li><li><p>å¬å›ç‡Recall: # True positive / # Positive examples</p><p>åœ¨æ‰€æœ‰çš„æ­£ç±»ä¸­æœ‰å¤šå°‘è¢«é¢„æµ‹å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯è€ƒè™‘è¦†ç›–æ€§çš„é—®é¢˜ï¼Œæ˜¯å¦æ‰€æœ‰çš„æ­£ä¾‹éƒ½è¢«é¢„æµ‹å‡ºæ¥äº†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span>((y_hat==<span class="hljs-number">1</span>)&amp;(y==<span class="hljs-number">1</span>))/<span class="hljs-built_in">sum</span>(y==<span class="hljs-number">1</span>)<br></code></pre></td></tr></tbody></table></figure></li><li><p>One metric that balances precision and recall  ç²¾åº¦å’Œå¬å›ç‡çš„æƒè¡¡</p><p>â€¢ <strong>F1</strong>: the harmonic mean of precision and recall: <strong>2pr /( p + r)</strong></p></li></ul><h4 id="AUC-ROC">AUC-ROC</h4><ul><li><p>AUCï¼Œthe area uder ROC curveï¼Œmeasures the chance a  model can distinguish classees.</p></li><li><p>choose various $\theta$,predict as pos if $\hat{y} \geq \theta$ else neg</p><p>å®é™…ç”Ÿäº§å½“ä¸­ï¼Œ$ \theta $æ˜¯éœ€è¦é€‰å–è°ƒèŠ‚çš„</p><p>ROCæ›²çº¿çš„</p><p>xè½´æ˜¯ åˆ†æ¯æ˜¯è´Ÿä¾‹æ ·æœ¬ åˆ†å­æ˜¯é¢„æµ‹æˆæ­£ä¾‹çš„è´Ÿä¾‹æ ·æœ¬æ•°</p><p>yè½´æ˜¯ æ­£ä¾‹çš„å¬å›ç‡ åˆ†æ¯æ˜¯æ‰€æœ‰çš„æ­£ç±» åˆ†å­æ˜¯é¢„æµ‹æ­£ç¡®çš„æ­£ç±»æ ·æœ¬æ•°</p><p><img src="https://picture.mulindya.com/pML4-1.png" alt=""></p></li></ul><p>AUCæ˜¯è¡¨ç¤ºROCä¸‹çš„é¢ç§¯ï¼Œå–å€¼èŒƒå›´æ˜¯[0,1]</p><p><img src="https://picture.mulindya.com/pML4-2.png" alt=""></p><h4 id="å•†ä¸šæŒ‡æ ‡">å•†ä¸šæŒ‡æ ‡</h4><ul><li>Optimize both revenue and customer experience<br>â€¢ Latency: ads should be shown to users at the same time as others<br>â€¢ ASN: average #ads shown in a page<br>â€¢ CTR: actual user click through rate<br>â€¢ ACP: average price advertiser pays per click</li><li>revenue = #pageviews   ASN   CTR   ACP</li></ul><p>Latencyè¡¨ç¤ºåœ¨å¤šä¹…åœ¨é¡µé¢æ˜¾ç¤ºï¼Œä¸€èˆ¬æ§åˆ¶åœ¨500msä¹‹å†…ï¼ŒåŒ…æ‹¬æ¨¡å‹è®¡ç®—é¢„æµ‹éƒ¨ç½²çš„æ—¶é—´</p><p>ASN æ¯ä¸€é¡µæŠ•æ”¾çš„å¹¿å‘Šæ•°é‡</p><p>CTR ä¸Šçº¿ä¹‹åç‚¹å‡»é¢‘ç‡</p><p>ACP æ¯ä¸€ä¸ªå¹¿å‘Šç‚¹å‡»ï¼Œå¹¿å‘Šä¸»çš„æ”¯ä»˜è´¹ç”¨</p><h4 id="4-1-2-æ¨¡å‹-å•†ä¸šè¯„ä¼°">4.1.2 æ¨¡å‹-&gt;å•†ä¸šè¯„ä¼°</h4><ul><li>The key model metric is AUC</li><li>A new model with increased AUC may harm business metrics, possible reasons:<br>â€¢ Lower estimated CTR   less ads displayed<br>â€¢ Lower real CTR because we trained and evaluated on past data<br>â€¢ Lower prices</li><li>Online experiment: deploy models to evaluate on real traffic data</li></ul><p>å®é™…ä¸Šåªçœ‹aucæ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦å„ç§æƒè¡¡å’Œæ¨¡æ‹Ÿã€‚</p><h3 id="4-1-3-æ€»ç»“">4.1.3 æ€»ç»“</h3><ul><li>We evaluate models with multiple metrics</li><li>Model metrics evaluate model performance on examples<br>â€¢ E.g. accuracy, precision, recall, F1, AUC for classification models</li><li>Business metrics measure how models impact the product</li></ul><h2 id="4-2-è¿‡æ‹Ÿåˆ-æ¬ æ‹Ÿåˆ">4.2 è¿‡æ‹Ÿåˆ&amp;æ¬ æ‹Ÿåˆ</h2><h3 id="4-2-1-è®­ç»ƒè¯¯å·®-æ³›åŒ–è¯¯å·®">4.2.1 è®­ç»ƒè¯¯å·® æ³›åŒ–è¯¯å·®</h3><p>â€¢ <strong>Training error</strong>: model error on the training data<br>â€¢ <strong>Generalization error</strong>: model error on new data</p><p><img src="https://picture.mulindya.com/pML4-3.png" alt=""></p><h3 id="4-2-2-åŸå› ">4.2.2 åŸå› </h3><p><img src="https://picture.mulindya.com/pML4-4.png" alt=""></p><p>æ•°æ®å¤æ‚æ€§ VS æ¨¡å‹å¤æ‚æ€§</p><p>ä¸¤è€…çš„å¤æ‚æ€§è¶Šå¯¹ç­‰è¶Šå¥½ï¼›</p><p><img src="https://picture.mulindya.com/pML4-5.png" alt=""></p><p>æ•°æ®ç®€å• and æ¨¡å‹å¤æ‚å°±ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆ</p><p>æ•°æ®æ¯”æ¨¡å‹æ›´å¤æ‚ï¼Œæ¨¡å‹ä¸èƒ½æ‹Ÿåˆæ•°æ®ï¼Œå°±ä¼šå¯¼è‡´æ¬ æ‹Ÿåˆã€‚</p><h3 id="4-2-3-æ¨¡å‹å¤æ‚åº¦">4.2.3 æ¨¡å‹å¤æ‚åº¦</h3><ul><li>The capacity of a set of function to fit data points</li><li>In ML, model complexity usually refers to:<br>â€¢ The number of learnable parameters<br>â€¢ The value range for those parameters</li><li>Itâ€™s hard to compare between different types of ML models<br>â€¢ E.g. trees vs neural network</li><li>More precisely measure of complexity: VC dimension<br>â€¢ VC dim for classification model: the maximum number of examples the model can shatter</li></ul><p>æ¨¡å‹å¤æ‚æ€§å¯ä»¥æè¿°ä¸ºæ‹Ÿåˆå„ç§å‡½æ•°çš„èƒ½åŠ›ï¼Œå¾ˆéš¾æ¯”è¾ƒæ¨¡å‹ä¹‹é—´çš„å¤æ‚åº¦(æ¯”å¦‚æ ‘å’Œç¥ç»ç½‘ç»œ)ï¼Œé€šå¸¸å‚æ•°è¶Šå¤šï¼Œæ¯å±‚çš„å‚æ•°èŒƒå›´è¶Šå¤§ï¼Œæ¨¡å‹è¶Šå¤æ‚.</p><h3 id="4-2-4-äº§ç”Ÿçš„å½±å“">4.2.4 äº§ç”Ÿçš„å½±å“</h3><p><img src="https://picture.mulindya.com/ParacticeML4-1-1.png" alt=""></p><p>å›ºå®šæ•°æ®ï¼Œé€‰å–ä¸åŒçš„å¤æ‚æ€§çš„æ¨¡å‹ï¼Œå¯ä»¥çœ‹åˆ°æ¨¡å‹è¶Šå¤æ‚è¶Šå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œè¶Šç®€å•ä¼šå¯¼è‡´æ¬ æ‹Ÿåˆï¼Œæœ€å¥½çš„æƒ…å†µæ˜¯æ³›åŒ–è¯¯å·®æœ€å°çš„æ—¶å€™ï¼Œä½†æ˜¯åœ¨æœ€ä¼˜è§£å¤„ä¹Ÿæ˜¯å­˜åœ¨è¿‡æ‹Ÿåˆçš„ã€‚</p><h4 id="å…·ä½“ä¾‹å­">å…·ä½“ä¾‹å­</h4><p>å°†ä¹°æˆ¿çš„æ•°æ®åˆ‡åˆ†å¾—åˆ°è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œä½¿ç”¨<code>scikit-learn</code>ä¸­çš„<code>DecisionTreeRegressor</code>ï¼ˆå†³ç­–æ ‘å›å½’å™¨ï¼‰æ ‘çš„æ·±åº¦ä¸ºxè½´ï¼Œyä¸ºé”™è¯¯ç‡ã€‚</p><p><img src="https://picture.mulindya.com/ParacticeML4-1-2.png" alt=""></p><h3 id="4-2-5-æ•°æ®å¤æ‚åº¦">4.2.5 æ•°æ®å¤æ‚åº¦</h3><ul><li>Multiple factors matters</li></ul><p>â€¢ # of examples</p><p>â€¢ # of features in each example</p><p>â€¢ time/space structure</p><p>â€¢ diversity</p><ul><li>Again, hard to compare among very different data</li></ul><p>â€¢ E.g a char vs a pixel</p><ul><li>More precisely, Kolmogorov complexity</li></ul><p>â€¢ A data is simple if it can be generated by a short program</p><p>å¤šæ ·æ€§ï¼Œæ—¶åºç»“æ„ï¼Œç©ºé—´ç»“æ„çš„å¤æ‚æ€§ï¼›ä¸€èˆ¬å¯ä»¥æ¯”è¾ƒç±»ä¼¼çš„æ•°æ®é›†çš„å¤æ‚åº¦ï¼›</p><h3 id="4-2-6-Data-VS-Model">4.2.6 Data VS Model</h3><p><img src="https://picture.mulindya.com/ParacticeML4-1-3.png" alt=""></p><p>éšç€æ•°æ®çš„å¤æ‚æ€§éƒ½ä¼šä½¿å¾—æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å¢åŠ ï¼Œè¯¯å·®å‡å°‘ã€‚</p><p>è“è‰²æ˜¯ç®€å•æ¨¡å‹ï¼Œç»¿è‰²æ˜¯å¤æ‚æ¨¡å‹ï¼›åœ¨èµ·å§‹çŠ¶æ€ï¼Œå¤æ‚æ¨¡å‹å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œæ‰€ä»¥æ³›åŒ–èƒ½åŠ›è¾ƒå·®ï¼›ä½†æ˜¯æ•°æ®è¶Šå¤æ‚å¤æ‚æ¨¡å‹è®­ç»ƒä¼šæ¯”ç®€å•çš„æ¨¡å‹æ•ˆæœæ›´å¥½ã€‚å› æ­¤å½“æ•°æ®æ¯”è¾ƒç®€å•æ—¶ï¼Œä½¿ç”¨ç®€å•æ¨¡å‹å°±å¯ä»¥äº†ï¼Œéšç€æ•°æ®é‡å˜å¤§ï¼Œå¯ä»¥æ¥åŒ¹é…æ›´å¤æ‚çš„æ¨¡å‹è¿™æ ·æ³›åŒ–è¯¯å·®æ›´å°ã€‚</p><h4 id="æ³›åŒ–è¯¯å·®">æ³›åŒ–è¯¯å·®</h4><ul><li>Generalization error bound (an informal statement)</li></ul>    $$  |error \ on \ unseen \ data - training \ error| \le \sqrt{\frac{D}{N}(log(\frac{2N}{D}+1))}  $$  <p>â€¢ D: VC-dim, N: number of training examples</p><ul><li><p>Generalization error also depends on the training algorithm</p><p>â€¢ Adding regularization can penalize complex models</p><p>â€¢ Model trained with stochastic gradient methods generalizes better</p></li></ul><p>æ³›åŒ–è¯¯å·®ä¸è®­ç»ƒè¯¯å·®ä¹‹é—´çš„å·®è·ä¸è¶…è¿‡æŸä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å’Œè®­ç»ƒç®—æ³•æœ‰å…³ï¼Œå¯ä»¥åŠ å…¥æ­£åˆ™åŒ–é¡¹å’Œæƒ©ç½šæ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨SGDçš„æ–¹æ³•æ¥è®­ç»ƒã€‚</p><h3 id="4-2-7-æ¨¡å‹é€‰æ‹©">4.2.7 æ¨¡å‹é€‰æ‹©</h3><ul><li><p>Pick a model with a proper complexity for your data</p><p>â€¢ Minimize the generalization error</p><p>â€¢ Also consider business metrics</p></li><li><p>Pick up a model family, then select proper hyper-parameters è°ƒå‚</p><p>â€¢ Trees: #trees, maximal depths</p></li></ul><p>â€¢ Neural networks: architecture, depth (#layers), width (#hidden units), regularizations</p><p>éœ€è¦é€‰æ‹©å’Œæ•°æ®åˆé€‚å¤æ‚åº¦çš„æ¨¡å‹ï¼ŒåŒæ—¶è€ƒè™‘å•†ä¸šæŒ‡æ ‡ã€‚</p><h3 id="4-2-8-æ€»ç»“">4.2.8 æ€»ç»“</h3><ul><li>æˆ‘ä»¬æ›´å…³æ³¨æ³›åŒ–è¯¯å·®è€Œä¸æ˜¯è®­ç»ƒè¯¯å·®ï¼›</li><li>å¤æ‚åº¦ï¼šå‡½æ•°/ä¿¡æ¯é‡è¶Šå¤§ï¼Œå¤æ‚åº¦è¶Šé«˜ï¼›</li><li>æ¨¡å‹é€‰æ‹©ï¼šæ•°æ®å¤æ‚åº¦å’Œæ¨¡å‹å¤æ‚åº¦çš„åŒ¹é…ã€‚</li></ul><h2 id="4-3-æ¨¡å‹éªŒè¯">4.3 æ¨¡å‹éªŒè¯</h2><p>ä¸»è¦è®²è§£äº†validateæ•°æ®é›†å’Œtestæ•°æ®é›†ï¼Œè¯„ä¼°æ³›åŒ–è¯¯å·®ä½¿ç”¨éªŒè¯é›†ï¼Œæœ€åä½¿ç”¨æµ‹è¯•é›†ã€‚</p><p>æ•°æ®è¶³å¤Ÿå¤šï¼Œå¯ä»¥é€‰å–ä¸€åŠçš„æ•°æ®ä½œä¸ºéªŒè¯ï¼›</p><p>æ•°æ®ä¸å¤šå¯ä»¥é€‰å–10%ï¼Œ20%ä½œä¸ºéªŒè¯é›†ï¼›</p><h3 id="4-3-1-éç‹¬ç«‹åŒåˆ†å¸ƒæ•°æ®åˆ‡åˆ†">4.3.1 éç‹¬ç«‹åŒåˆ†å¸ƒæ•°æ®åˆ‡åˆ†</h3><p>ä¸€èˆ¬éšæœºåˆ†æ•°æ®ä¸å¯è¡Œï¼Œé™¤éæ•°æ®ç‹¬ç«‹åŒåˆ†å¸ƒã€‚</p><ul><li><p>Random data splitting may lead to underestimate of generalization error</p></li><li><p>Sequential data ä¹°æˆ¿ï¼Œè‚¡ç¥¨ä¿¡æ¯éƒ½æœ‰æ—¶åºä¿¡æ¯çš„</p></li></ul><p>â€‹â€¢ e.g. house sales, stock prices</p><p>â€‹â€¢ Valid set should not overlap with train set in time é‡å¤ä¿¡æ¯ æ¯”å¦‚äººè„¸è¯†åˆ«ï¼Œåœ¨åˆ†æ•°æ®çš„æ—¶å€™åŒä¸€å¼ è„¸å‡ºç°åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¹‹ä¸­ï¼Œè¿™æ˜¯ä¸ç¬¦åˆè§„èŒƒçš„ã€‚</p><ul><li><p>Examples are highly clustered ç±»åˆ«æ•°é‡ä¸å‡è¡¡</p><p>â€¢ e.g. photos of the same person, clips of the same video</p><p>â€¢ Split clusters instead of examples</p></li><li><p>Highly imbalanced label classes</p></li></ul><p>â€¢ Sample more from minor classes</p><p>éœ€è¦ä¿è¯éªŒè¯é›†æ ·æœ¬åœ¨è®­ç»ƒé›†ä¹‹åï¼ŒåŒæ—¶ä¿è¯æ•°æ®é›†æ²¡æœ‰é‡å¤çš„ï¼ˆå¯ä»¥é¦–å…ˆåœ¨ç»„ä¿¡æ¯åˆ†å‰²ï¼‰ã€‚</p><h4 id="åå‘å®ä¾‹">åå‘å®ä¾‹</h4><p><img src="https://picture.mulindya.com/ParacticeML4-3-1.png" alt=""></p><p>ç¬¬ä¸€å¹…å›¾æ˜¯å‰é¢ä¸€åŠçš„æ—¶é—´çš„æ ·æœ¬æ•°æ®è®­ç»ƒï¼Œåé¢çš„æ—¶é—´æ ·æœ¬æ•°æ®é¢„æµ‹ï¼›</p><p>ç¬¬äºŒå¹…å›¾æ˜¯éšæœºæŒ‘é€‰æ•°æ®æ¥è®­ç»ƒå’Œé¢„æµ‹ã€‚</p><p>é€šè¿‡å†³ç­–æ ‘æŸ¥çœ‹è®­ç»ƒï¼Œåˆ†æè¿‡æ‹Ÿåˆçš„å‡ºç°ï¼›æ¯”è¾ƒä¸¤è€…ï¼Œåœ¨éšæœºæŒ‘é€‰å¾—æ•°æ®ä¸­è¿‡æ‹Ÿåˆå‘ç”Ÿå¾—æ™šä¸€äº›ï¼Œå®ƒå¯ä»¥è·å–æ›´åŠ æ•´ä½“å¾—ç»†èŠ‚ï¼Œå‰è€…è¿‡åº¦æ‹Ÿåˆäº†å±€éƒ¨ä¿¡æ¯ã€‚</p><p>åœ¨çº¿æ€§å›å½’ä¸Šæ›´åŠ æ˜æ˜¾ï¼Œä½¿ç”¨é¡ºåºçš„æ•°æ®åœ¨éªŒè¯é›†ä¸Šåå·®å¾ˆå¤§ã€‚</p><h3 id="4-3-2-K-fold-Cross-Validation">4.3.2 K-fold Cross Validation</h3><p><img src="https://picture.mulindya.com/ParacticeML4-3-2.png" alt=""></p><p>å½“æ•°æ®ä¸å……è¶³æ—¶å¯ä»¥ä½¿ç”¨KæŠ˜äº¤å‰éªŒè¯ã€‚æŠŠæ•°æ®åˆ‡æˆKä»½ï¼Œç„¶åé€‰å–k-1ä»½è®­ç»ƒå¦å¤–ä¸€ä»½æ¥éªŒè¯ï¼Œå†å»kä¸ªéªŒè¯è¯¯å·®æ¥åšå¹³å‡å¾—åˆ°éªŒè¯é›†è¯¯å·®ã€‚ä¸€èˆ¬Ké€‰æ‹©5æˆ–åˆ™10ã€‚æ¯”å¦‚Kä¸º5æ—¶ï¼Œ80%æ•°æ®è®­ç»ƒï¼Œ20%æ•°æ®éªŒè¯ï¼Œé‡å¤5æ¬¡å¾—åˆ°éªŒè¯é›†è¯¯å·®ã€‚æ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™å¯ä»¥é€‰æ‹©10ï¼Œä¹Ÿå°±æ˜¯åœ¨90%æ•°æ®è®­ç»ƒï¼Œ10%æ•°æ®éªŒè¯ã€‚ä»£ä»·æ˜¯é‡å¤æ›´å¤šçš„æ¬¡æ•°ã€‚</p><h3 id="4-3-3-Bug">4.3.3 Bug</h3><p>â€¢ If your ML model performance is too good to be true, very likely there is a bug, and contaminated valid set is the #1 reason</p><ul><li><p>Valid set has examples from train set</p><p>â€¢ duplicated examples from original set</p><p>â€¢ Often happens when integrating multiple datasets</p><p>â€‹â€¢ Scrape images from search engine to evaluate models trained on ImageNet</p></li><li><p>Information leaking from train set to valid set</p></li></ul><p>â€¢ Often happens for non I.I.D data</p><p>â€¢ use future to predict past, see a personâ€™s face before</p><p>â€¢ Excessive use of valid set for hyper param tuning is cheating</p><p>è¡¨ç°æ•ˆæœç‰¹åˆ«å¥½ï¼Œæœ‰æ—¶å¯èƒ½å‡ºç°äº†bugï¼›éœ€è¦æ£€æŸ¥ä¸€ä¸‹ï¼š</p><ol><li>éªŒè¯é›†å’Œè®­ç»ƒé›†å¯èƒ½ä¼šæœ‰é‡å ï¼›</li><li>åœ¨æ•°æ®èåˆæ—¶å‡ºç°äº†æ•°æ®æ³„éœ²ï¼›</li></ol><h3 id="4-3-4-æ€»ç»“">4.3.4 æ€»ç»“</h3><ul><li><p>The test data is used once to evaluate your model</p></li><li><p>One can hold out a validation set from the training data to estimate the test data</p><p>â€¢ You can use valid set multiple times for model selections and hyper param tuning</p><p>â€¢ Validation data should be close to the test data</p><p>â€¢ Improper valid set is a common mistake that lead to over estimate of the model performance</p></li></ul><p>éªŒè¯é›†è¦å°½é‡çš„é€‰å–çœŸå®æ•°æ®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±åº¦ç†è§£3Då·ç§¯</title>
    <link href="/2022/01/11/deep_learning/conv3d/"/>
    <url>/2022/01/11/deep_learning/conv3d/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨å¸•é‡‘æ£®æ•°æ®ä¸­æ¶‰åŠä¸‰ç»´æ•°æ®çš„è®­ç»ƒå’Œé¢„æµ‹ï¼Œç”¨åˆ°äº†conv3ä½†æ˜¯å¯¹å…¶èƒŒåçš„åŸç†è¿˜æœ‰ä¸€äº›æ¨¡ç³Šçš„åœ°æ–¹ï¼Œconv2dä¸å¤šé€šé“çš„conv2dçš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿconv3dçš„æ€æƒ³ç†è®ºæ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ­¤è¿›è¡Œæ¢ç©¶å’Œè®°å½•â€¦ ğŸ˜³</p></blockquote><blockquote><p>é¦–å…ˆè¦æ˜ç¡®å¤šé€šé“çš„2då·ç§¯å’Œ3då·ç§¯æ˜¯ä¸ä¸€æ ·çš„ï¼Œ3dæ˜¯å¯ä»¥åœ¨é€šé“ä¸­ç§»åŠ¨çš„ï¼Œ2dè¾¾å’©ï¼</p></blockquote><h2 id="å·ç§¯æ ¸çš„ç»´åº¦">å·ç§¯æ ¸çš„ç»´åº¦</h2><p>å·ç§¯æ ¸çš„ç»´åº¦æŒ‡çš„çš„è¿›è¡Œæ»‘çª—æ“ä½œçš„ç»´åº¦ï¼Œè€Œæ»‘çª—æ“ä½œä¸åœ¨channelç»´åº¦ä¸Šè¿›è¡Œï¼Œä¸ç®¡æœ‰å‡ ä¸ªchannelï¼Œå®ƒä»¬éƒ½å…±äº«åŒä¸€ä¸ªæ»‘çª—ä½ç½®ï¼ˆè™½ç„¶2Då¤šchannelå·ç§¯çš„æ—¶å€™æ¯ä¸ªchannelä¸Šçš„å·ç§¯æ ¸æƒé‡æ˜¯ç‹¬ç«‹çš„ï¼Œä½†æ»‘çª—ä½ç½®æ˜¯å…±äº«çš„ï¼‰ã€‚æ‰€ä»¥åœ¨è®¨è®ºå·ç§¯æ ¸ç»´åº¦çš„æ—¶å€™ï¼Œæ˜¯ä¸æŠŠchannelç»´åŠ è¿›å»çš„ã€‚</p><p><font color="purple"> <strong>2D convçš„å·ç§¯æ ¸å°±æ˜¯$(c, k_h, k_w)$ï¼Œå› æ­¤ï¼Œå¯¹äºRGBå›¾åƒåš2Då·ç§¯ï¼Œå·ç§¯æ ¸å¯ä»¥æ˜¯conv2D(3,3) è€Œä¸è¯¥æ˜¯conv3D(3,3,3)ï¼›</strong></font></p><p><font color="green"> <strong>3D convçš„å·ç§¯æ ¸å°±æ˜¯$(c, k_d, k_h, k_w)$ï¼Œå…¶ä¸­k_då°±æ˜¯å¤šå‡ºæ¥çš„ç¬¬ä¸‰ç»´ï¼Œæ ¹æ®å…·ä½“åº”ç”¨ï¼Œåœ¨è§†é¢‘ä¸­å°±æ˜¯æ—¶é—´ç»´ï¼Œåœ¨CTå›¾åƒä¸­å°±æ˜¯å±‚æ•°ç»´.</strong>  </font></p><h2 id="2Då·ç§¯">2Då·ç§¯</h2><h3 id="å•é€šé“">å•é€šé“</h3><p>é¦–å…ˆäº†è§£ä»€ä¹ˆæ˜¯å·ç§¯æ ¸ï¼Œå·ç§¯æ ¸(filter)æ˜¯ç”±ä¸€ç»„å‚æ•°æ„æˆçš„å¼ é‡ï¼Œå·ç§¯æ ¸ç›¸å½“äºæƒå€¼ï¼Œå›¾åƒç›¸å½“äºè¾“å…¥é‡ï¼Œå·ç§¯çš„æ“ä½œå°±æ˜¯æ ¹æ®å·ç§¯æ ¸å¯¹è¿™äº›è¾“å…¥é‡è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚æˆ‘ä»¬é€šå¸¸ç”¨å·ç§¯æ¥æå–å›¾åƒçš„ç‰¹å¾ã€‚</p><p>ç›´è§‚ç†è§£å¦‚ä¸‹ï¼šä¸‹å›¾ä½¿ç”¨çš„æ˜¯ 3x3å·ç§¯æ ¸(height x width,ç®€å†™$ H \times W$) çš„å·ç§¯ï¼Œpaddingä¸º1(å‘¨å›´çš„è™šçº¿éƒ¨åˆ†ï¼Œå·ç§¯æ—¶ä¸ºäº†ä½¿å·ç§¯åçš„å›¾åƒå¤§å°ä¸åŸæ¥ä¸€è‡´ï¼Œä¼šå¯¹åŸå›¾åƒè¿›è¡Œå¡«å……)ï¼Œä¸¤ä¸ªç»´åº¦ä¸Šçš„strideså‡ä¸º1(æ»‘åŠ¨æ­¥é•¿ï¼Œè¿™é‡Œä½“ç°ä¸ºæ¯æ¬¡æ»‘åŠ¨å‡ ä¸ªå°æ–¹æ ¼)ã€‚</p><p><img src="https://picture.mulindya.com/2dconv.gif" alt=""></p><p>é’ˆå¯¹å•é€šé“ï¼Œè¾“å…¥å›¾åƒçš„channelä¸º1ï¼Œå³è¾“å…¥å¤§å°ä¸º$(1, height, weight)$ï¼Œå·ç§¯æ ¸å°ºå¯¸ä¸º $(1, k_h, k_w)$ï¼Œå·ç§¯æ ¸åœ¨è¾“å…¥å›¾åƒä¸Šçš„çš„ç©ºé—´ç»´åº¦ï¼ˆå³(height, width)ä¸¤ç»´ï¼‰ä¸Šè¿›è¡Œè¿›è¡Œæ»‘çª—æ“ä½œï¼Œæ¯æ¬¡æ»‘çª—å’Œ $(k_h, k_w)$ çª—å£å†…çš„valuesè¿›è¡Œå·ç§¯æ“ä½œï¼ˆç°åœ¨éƒ½ç”¨ç›¸å…³æ“ä½œå–ä»£ï¼‰ï¼Œå¾—åˆ°è¾“å‡ºå›¾åƒä¸­çš„ä¸€ä¸ªvalueã€‚</p><p>ä¸Šå›¾æ˜¯é€šé“æ•°ä¸º1çš„2ç»´å›¾åƒçš„å·ç§¯æ“ä½œï¼Œé™æ€è¡¨ç¤ºä¸ºï¼š</p><p><img src="https://picture.mulindya.com/conv3d-1.png" alt=""></p><h3 id="å¤šé€šé“">å¤šé€šé“</h3><p>äº†è§£äº†å•é€šé“å›¾åƒçš„å·ç§¯ä¹‹åï¼Œå†æ¥çœ‹å¤šé€šé“å›¾åƒçš„å·ç§¯ï¼Œæˆ‘ä»¬çŸ¥é“ç°åº¦å›¾åƒåªæœ‰ä¸€ä¸ªé€šé“ï¼Œè€Œ RGB å›¾åƒæœ‰Rã€Gã€Bä¸‰ä¸ªé€šé“ã€‚<br>å¤šé€šé“å›¾åƒçš„ä¸€æ¬¡å·ç§¯è¦å¯¹æ‰€æœ‰é€šé“ä¸ŠåŒä¸€ä½ç½®çš„å…ƒç´ åšåŠ æƒå’Œï¼Œå› æ­¤å·ç§¯æ ¸çš„shapeå˜æˆäº† $H \times W \times channels$ï¼Œæ²¡æœ‰é”™å·ç§¯æ ¸å˜æˆäº†3ç»´ï¼Œä½†è¿™ä¸æ˜¯3ç»´å·ç§¯ï¼Œå› ä¸ºæˆ‘ä»¬åŒºåˆ†å‡ ç»´å·ç§¯çœ‹çš„æ˜¯å·ç§¯æ ¸å¯ä»¥åœ¨å‡ ä¸ªç»´åº¦ä¸Šçš„æ»‘åŠ¨ï¼Œå·ç§¯æ ¸æ˜¯ä¸èƒ½åœ¨ channelsä¸Šæ»‘åŠ¨çš„ï¼Œå› ä¸ºä¸Šé¢æåˆ°æ¯æ¬¡å·ç§¯éƒ½è¦å…³è”æ‰€æœ‰é€šé“ä¸ŠåŒä¸€ä½ç½®ä¸Šçš„å…ƒç´ ã€‚<br>3é€šé“çš„å·ç§¯è¡¨ç¤ºå¦‚ä¸‹ï¼šæ˜¯å¯¹æ¯ä¸ªé€šé“è¿›è¡Œ2då·ç§¯æ“ä½œç„¶åæŠŠæœ€åçš„å€¼ç›¸åŠ çš„åˆ°å³ä¾§çš„å°æ–¹å—ã€‚</p><p><img src="https://picture.mulindya.com/conv3d-2.png" alt=""></p><p>ä¸Šå›¾å°†3ä¸ªé€šé“åˆ†å¼€è¡¨ç¤ºï¼Œå·ç§¯æ ¸ä¹Ÿåˆ†å¼€è¡¨ç¤ºï¼Œfilter1ã€filter2ã€filter3å‡ä¸ºäºŒç»´å·ç§¯æ ¸ï¼Œå †å åœ¨ä¸€èµ·ä¾¿å½¢æˆäº†$ H \times W \times 3$çš„å·ç§¯æ ¸ï¼ŒåŒæ ·çš„æˆ‘ä»¬å°†3ä¸ªé€šé“ä¹Ÿå †å åœ¨ä¸€èµ·;</p><p>é’ˆå¯¹å¤šé€šé“ï¼Œå‡å®šè¾“å…¥å›¾åƒçš„channelä¸ºcï¼Œå³è¾“å…¥å¤§å°ä¸º$(c, height, weight)$ï¼Œå·ç§¯æ ¸å°ºå¯¸ä¸º $(c, k_h, k_w)$ï¼Œ å·ç§¯æ ¸åœ¨è¾“å…¥å›¾åƒçš„ç©ºé—´ç»´åº¦å³$(height, width)$ä¸¤ç»´ä¸Šè¿›è¡Œæ»‘çª—æ“ä½œï¼ˆåœ¨channelè¿™ä¸€ç»´åº¦æ²¡æœ‰æ»‘åŠ¨åªæœ‰ç›¸åŠ ï¼‰ï¼Œæ¯æ¬¡æ»‘çª—ä¸cä¸ªchannelsä¸Šçš„$ (k_h, k_w)$ çª—å£å†…çš„æ‰€æœ‰çš„valuesè¿›è¡Œç›¸å…³æ“ä½œï¼Œå¾—åˆ°è¾“å‡ºå›¾åƒä¸­çš„ä¸€ä¸ªvalueï¼ˆå¤šé€šé“çš„ä¿¡æ¯è¢«å®Œå…¨å‹ç¼©äº†)</p><p>äºæ˜¯å½¢æˆäº†ä¸‹é¢çš„3ç»´è¡¨ç¤ºå›¾ï¼š<br><img src="https://picture.mulindya.com/conv3d-3.png" alt=""></p><p>è™½ç„¶æ˜¯ä¸€ä¸ªå·ç§¯æ ¸ï¼Œä½†æ˜¯æ¯ä¸ªfilterçš„æƒé‡å€¼æ˜¯ä¸ä¸€æ ·çš„å“¦~</p><p>å¦‚ä¸‹å¦‚æ‰€ç¤ºï¼šåœ¨å·ç§¯æ ¸çš„æ¯ä¸ªé€šé“ä¸Šçš„æƒé‡æ˜¯ä¸ä¸€å®šç›¸åŒçš„ï¼Œ<code>è¿™é‡Œçš„6=4+0+1+åç§»1</code></p><p><img src="https://picture.mulindya.com/conv3d-6.png" alt=""></p><h3 id="ä»£ç ">ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.nn.Conv2d(in_channels, out_channels, kernel_size, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>, groups=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">True</span>, padding_mode=<span class="hljs-string">'zeros'</span>, device=<span class="hljs-literal">None</span>, dtype=<span class="hljs-literal">None</span>)<br></code></pre></td></tr></tbody></table></figure><ul><li><strong>in_channels</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ Number of channels in the input image</li><li><strong>out_channels</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ Number of channels produced by the convolution</li><li><strong>kernel_size</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a>) â€“ Size of the convolving kernel</li><li><strong>stride</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a><em>,</em> <em>optional</em>) â€“ Stride of the convolution. Default: 1</li><li><strong>padding</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a><em>,</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#str"><em>str</em></a><em>,</em> <em>optional</em>) â€“ Padding added to all four sides of the input. Default: 0</li><li><strong>padding_mode</strong> (<em>string</em>*,* <em>optional</em>) â€“ <code>'zeros'</code>, <code>'reflect'</code>, <code>'replicate'</code> or <code>'circular'</code>. Default: <code>'zeros'</code></li><li><strong>dilation</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a><em>,</em> <em>optional</em>) â€“ Spacing between kernel elements. Default: 1</li><li><strong>groups</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a><em>,</em> <em>optional</em>) â€“ Number of blocked connections from input channels to output channels. Default: 1</li><li><strong>bias</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><em>bool</em></a><em>,</em> <em>optional</em>) â€“ If <code>True</code>, adds a learnable bias to the output. Default: <code>True</code></li></ul><p>Applies a 2D convolution over an input signal composed of several input planes.</p><p>In the simplest case, the output value of the layer with input size $(N, C_{\text{in}}, H, W)$and output $(N, C_{\text{out}}, H_{\text{out}}, W_{\text{out}})$ can be precisely described as:</p>$$\text{out}(N_i, C_{\text{out}_j}) = \text{bias}(C_{\text{out}_j}) + \sum_{k = 0}^{C_{\text{in}} - 1} \text{weight}(C_{\text{out}_j}, k) \star \text{input}(N_i, k)$$<p>where â‹† is the valid 2D <a href="https://en.wikipedia.org/wiki/Cross-correlation">cross-correlation</a> operator, N<em>N</em> is a batch size, C<em>C</em> denotes a number of channels, H<em>H</em> is a height of input planes in pixels, and W<em>W</em> is width in pixels.</p><p>This module supports <a href="https://pytorch.org/docs/stable/notes/cuda.html#tf32-on-ampere">TensorFloat32</a>.</p><ul><li><p><code>stride</code> controls the stride for the cross-correlation, a single number or a tuple.</p></li><li><p><code>padding</code> controls the amount of padding applied to the input. It can be either a string {â€˜validâ€™, â€˜sameâ€™} or a tuple of ints giving the amount of implicit padding applied on both sides.</p></li><li><p><code>dilation</code> controls the spacing between the kernel points; also known as the Ã  trous algorithm. It is harder to describe, but this <a href="https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md">link</a> has a nice visualization of what <code>dilation</code> does.</p></li><li><p><code>groups</code> controls the connections between inputs and outputs. <code>in_channels</code> and <code>out_channels</code> must both be divisible by <code>groups</code>. For example,</p><blockquote><ul><li>At groups=1, all inputs are convolved to all outputs.</li><li>At groups=2, the operation becomes equivalent to having two conv layers side by side, each seeing half the input channels and producing half the output channels, and both subsequently concatenated.</li><li>At groups= <code>in_channels</code>, each input channel is convolved with its own set of filters (of size $\frac{\text{out_channels}}{\text{in_channels}}$ ).</li></ul></blockquote></li></ul><p>The parameters <code>kernel_size</code>, <code>stride</code>, <code>padding</code>, <code>dilation</code> can either be:</p><blockquote><ul><li>a single <code>int</code> â€“ in which case the same value is used for the height and width dimension</li><li>a <code>tuple</code> of two ints â€“ in which case, the first int is used for the height dimension, and the second int for the width dimension</li></ul></blockquote><h4 id="example">example</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># With square kernels and equal stride</span><br>m = nn.Conv2d(<span class="hljs-number">16</span>, <span class="hljs-number">33</span>, <span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>)<br><span class="hljs-comment"># non-square kernels and unequal stride and with padding</span><br>m = nn.Conv2d(<span class="hljs-number">16</span>, <span class="hljs-number">33</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">4</span>, <span class="hljs-number">2</span>))<br><span class="hljs-comment"># non-square kernels and unequal stride and with padding and dilation</span><br>m = nn.Conv2d(<span class="hljs-number">16</span>, <span class="hljs-number">33</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">4</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>))<br><span class="hljs-built_in">input</span> = torch.randn(<span class="hljs-number">20</span>, <span class="hljs-number">16</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>)<br>output = m(<span class="hljs-built_in">input</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="2då·ç§¯æ“ä½œåå˜åŒ–">2då·ç§¯æ“ä½œåå˜åŒ–</h4><p><img src="https://picture.mulindya.com/conv3d-7.png" alt=""></p><h2 id="3Då·ç§¯">3Då·ç§¯</h2><h3 id="å•é€šé“-2">å•é€šé“</h3><p>ç”¨ç±»ä¼¼çš„æ–¹æ³•æˆ‘ä»¬å…ˆåˆ†æå•é€šé“å›¾åƒçš„3Då·ç§¯ï¼Œ3Då·ç§¯çš„å¯¹è±¡æ˜¯ä¸‰ç»´å›¾åƒï¼Œå› æ­¤å·ç§¯æ ¸å˜æˆäº†$depth \times height \times width $ç®€å†™ä¸º$D \times H \times W $ã€‚å•é€šé“çš„<code>3Då·ç§¯</code>åŠ¨æ€å›¾å¦‚ä¸‹ï¼š<br><img src="https://picture.mulindya.com/conv3d.gif" alt=""></p><p>é’ˆå¯¹å•é€šé“ï¼Œä¸2Då·ç§¯ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<strong>è¾“å…¥å›¾åƒå¤šäº†ä¸€ä¸ª depth ç»´åº¦</strong>ï¼Œæ•…è¾“å…¥å¤§å°ä¸º$(1, depth, height, width)$ï¼Œå·ç§¯æ ¸ä¹Ÿå¤šäº†ä¸€ä¸ª$k_d$ç»´åº¦ï¼Œå› æ­¤å·ç§¯æ ¸åœ¨è¾“å…¥3Då›¾åƒçš„ç©ºé—´ç»´åº¦$(depth,height,width)$ä¸Šå‡è¿›è¡Œæ»‘çª—æ“ä½œï¼Œæ¯æ¬¡æ»‘çª—ä¸$ (k_d, k_h, k_w) $çª—å£å†…çš„valuesè¿›è¡Œç›¸å…³æ“ä½œï¼Œå¾—åˆ°è¾“å‡º3Då›¾åƒä¸­çš„ä¸€ä¸ªvalueï¼Œæœ€ç»ˆè¾“å‡ºä¸€ä¸ª3Dçš„ç‰¹å¾å›¾ã€‚</p><p>è¿™é‡Œçš„3Dä¸æ˜¯é€šé“å¯¼è‡´çš„ï¼Œè€Œæ˜¯æ·±åº¦ï¼ˆå¤šå±‚åˆ‡ç‰‡ï¼Œå¤šå¸§è§†é¢‘ï¼‰ï¼Œå› æ­¤ï¼Œè™½ç„¶è¾“å…¥å’Œå·ç§¯æ ¸å’Œè¾“å‡ºéƒ½æ˜¯3Dçš„ï¼Œä½†éƒ½å¯ä»¥æ˜¯å•é€šé“çš„ã€‚</p><p>å°†ä¸Šè¿°é™æ€è¡¨ç¤ºæˆï¼š</p><p><img src="https://picture.mulindya.com/conv3d-4.png" alt=""></p><h3 id="å¤šé€šé“-2">å¤šé€šé“</h3><p><img src="https://picture.mulindya.com/conv3d-5.png" alt=""></p><p>ç„¶åå°†filter1ã€filter2ã€filter3å †å åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ª4ç»´å·ç§¯æ ¸$ D \times H \times W \times 3$ï¼ŒåŒç†å°†å„é€šé“å †å åœ¨ä¸€èµ·å°±å½¢æˆäº†å¤šé€šé“çš„3Då·ç§¯è¾“å…¥å›¾åƒã€‚</p><p>é’ˆå¯¹å¤šé€šé“,æ¯”å¦‚cä¸ªé€šé“ï¼Œè¾“å…¥å¤§å°ä¸º$(c, depth, height, width)$ï¼Œä¸2Då¤šé€šé“å·ç§¯çš„æ“ä½œç±»ä¼¼ï¼Œå¯¹äºæ¯æ¬¡æ»‘çª—ï¼Œå·ç§¯æ ¸åŒæ—¶ä¸cä¸ªchannelsä¸Šçš„ $(k_d, k_h, k_w)$ çª—å£å†…çš„æ‰€æœ‰valuesè¿›è¡Œç›¸å…³æ“ä½œï¼Œå¾—åˆ°è¾“å‡º3Då›¾åƒä¸­çš„ä¸€ä¸ªvalueã€‚<br>ç”±äº3Då·ç§¯ä¸­çš„å·ç§¯æ ¸æ˜¯3Dçš„ï¼Œå› æ­¤åœ¨æ¯ä¸ªchannelä¸‹ä½¿ç”¨çš„æ˜¯åŒæ ·çš„å‚æ•°ï¼Œæƒé‡å…±äº«ã€‚ä¸åŒäº2Då¤šé€šé“ä¸‹çš„å·ç§¯æ ¸ï¼Œåè€…åœ¨æ¯ä¸€ä¸ªchannelä½¿ç”¨çš„æƒé‡æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„é€šé“æƒé‡å¯èƒ½ä¸ä¸€æ ·ã€‚</p><h4 id="ä»£ç -2">ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.nn.Conv3d(in_channels, out_channels, kernel_size, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>, groups=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">True</span>, padding_mode=<span class="hljs-string">'zeros'</span>, device=<span class="hljs-literal">None</span>, dtype=<span class="hljs-literal">None</span>)<br></code></pre></td></tr></tbody></table></figure><ul><li><strong>in_channels</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ Number of channels in the input image</li><li><strong>out_channels</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ Number of channels produced by the convolution</li><li><strong>kernel_size</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a>) â€“ Size of the convolving kernel</li><li><strong>stride</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a><em>,</em> <em>optional</em>) â€“ Stride of the convolution. Default: 1</li><li><strong>padding</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a><em>,</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#str"><em>str</em></a><em>,</em> <em>optional</em>) â€“ Padding added to all six sides of the input. Default: 0</li><li><strong>padding_mode</strong> (<em>string</em>*,* <em>optional</em>) â€“ <code>'zeros'</code>, <code>'reflect'</code>, <code>'replicate'</code> or <code>'circular'</code>. Default: <code>'zeros'</code></li><li><strong>dilation</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a> <em>or</em> <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><em>tuple</em></a><em>,</em> <em>optional</em>) â€“ Spacing between kernel elements. Default: 1</li><li><strong>groups</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a><em>,</em> <em>optional</em>) â€“ Number of blocked connections from input channels to output channels. Default: 1</li><li><strong>bias</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><em>bool</em></a><em>,</em> <em>optional</em>) â€“ If <code>True</code>, adds a learnable bias to the output. Default: <code>True</code></li></ul><p><font color="red"><strong>å’Œ2Då·ç§¯å‡½æ•°åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç»´åº¦å’Œå†…éƒ¨çš„å·¥ä½œæœºåˆ¶ä¸å¤ªä¸€æ ·ã€‚</strong></font></p><p>Applies a 3D convolution over an input signal composed of several input planes.</p><p>In the simplest case, the output value of the layer with input size$ (N, C_{in}, D, H, W)$  and output $(N, C_{out}, D_{out}, H_{out}, W_{out})$ can be precisely described as:</p>$$out(N_i, C_{out_j}) = bias(C_{out_j}) + \sum_{k = 0}^{C_{in} - 1} weight(C_{out_j}, k) \star input(N_i, k)$$<p>where â‹† is the valid 3D <a href="https://en.wikipedia.org/wiki/Cross-correlation">cross-correlation</a> operator</p><p>This module supports <a href="https://pytorch.org/docs/stable/notes/cuda.html#tf32-on-ampere">TensorFloat32</a>.</p><ul><li><p><code>stride</code> controls the stride for the cross-correlation.</p></li><li><p><code>padding</code> controls the amount of padding applied to the input. It can be either a string {â€˜validâ€™, â€˜sameâ€™} or a tuple of ints giving the amount of implicit padding applied on both sides.</p></li><li><p><code>dilation</code> controls the spacing between the kernel points; also known as the Ã  trous algorithm. It is harder to describe, but this <a href="https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md">link</a> has a nice visualization of what <code>dilation</code> does.</p></li><li><p><code>groups</code> controls the connections between inputs and outputs. <code>in_channels</code> and <code>out_channels</code> must both be divisible by <code>groups</code>. For example,</p><blockquote><ul><li>At groups=1, all inputs are convolved to all outputs.</li><li>At groups=2, the operation becomes equivalent to having two conv layers side by side, each seeing half the input channels and producing half the output channels, and both subsequently concatenated.</li><li>At groups= <code>in_channels</code>, each input channel is convolved with its own set of filters (of size $\frac{\text{out_channels}}{\text{in_channels}}$).</li></ul></blockquote></li></ul><p>The parameters <code>kernel_size</code>, <code>stride</code>, <code>padding</code>, <code>dilation</code> can either be:</p><blockquote><ul><li>a single <code>int</code> â€“ in which case the same value is used for the depth, height and width dimension</li><li>a <code>tuple</code> of three ints â€“ in which case, the first int is used for the depth dimension, the second int for the height dimension and the third int for the width dimension</li></ul></blockquote><p><img src="https://picture.mulindya.com/conv3d-8.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬ä¸‰ç« ç¬”è®°</title>
    <link href="/2022/01/10/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML3/"/>
    <url>/2022/01/10/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚<br>è¿™ä¸€ç« çš„å†…å®¹æ˜¯å¯¹å„ç§æœºå™¨å­¦ä¹ æ¨¡å‹çš„ä»‹ç»ï¼ŒåŒ…æ‹¬æœ‰å†³ç­–æ ‘ï¼Œçº¿æ€§æ¨¡å‹ï¼Œå¤šå±‚æ„ŸçŸ¥æœºï¼Œå·ç§¯ç¥ç»ç½‘ç»œï¼Œå¾ªç¯ç¥ç»ç½‘ç»œã€‚</p></blockquote><h1>ç¬¬ä¸‰ç«  æœºå™¨å­¦ä¹ æ¨¡å‹</h1><h2 id="3-1-æœºå™¨å­¦ä¹ ä»‹ç»ğŸˆ">3.1 æœºå™¨å­¦ä¹ ä»‹ç»ğŸˆ</h2><p>åˆ†ç±»å¯ä»¥åˆ†æˆï¼š</p><ol><li>ç›‘ç£å­¦ä¹ ï¼ˆSurprisedï¼‰ï¼šæœ‰æ ‡å·çš„æ•°æ®ä¸Šæ¥è®­ç»ƒæ¨¡å‹æ¥é¢„æµ‹æ ‡å·<ul><li>è¡ç”Ÿå‡ºç°self-supervised è‡ªç›‘ç£å­¦ä¹ ï¼šå¯ä»¥äº§ç”Ÿæ ‡å·ï¼Œåªæ˜¯å…¶æ ‡å·æ˜¯æ¥è‡ªæ•°æ®æœ¬èº«ï¼ˆeg:word2vec,BERTï¼‰</li></ul></li><li>åŠç›‘ç£å­¦ä¹ ï¼ˆSemi-superisedï¼‰å­˜åœ¨å°éƒ¨åˆ†æœ‰æ ‡å·çš„æ•°æ®ï¼Œè¿˜æœ‰å¤§éƒ¨åˆ†æ²¡æœ‰æ ‡å·çš„æ•°æ®ã€‚<ul><li>egï¼šself-training ä½¿ç”¨è‡ªè®­ç»ƒçš„è¿‡ç¨‹æ¥é¢„æµ‹æ ‡å·å†ä¸€èµ·è®­ç»ƒã€‚</li></ul></li><li>æ— ç›‘ç£å­¦ä¹ ï¼ˆUnsuperisedï¼‰åœ¨æ²¡æœ‰æ ‡å·çš„æ•°æ®ä¸Šè®­ç»ƒ<ul><li>egï¼šclusteringï¼Œdensity estimationï¼ˆGANï¼‰</li></ul></li><li>å¼ºåŒ–å­¦ä¹ ï¼ˆReinforceï¼‰åœ¨ä¸€ä¸ªç¯å¢ƒä¸­äº¤äº’ï¼Œå¹¶ä¸”åŸºäºè§‚å¯Ÿç‚¹æ¥å­¦ä¹ ï¼Œç±»ä¼¼äººç±»å­¦ä¹ çš„æ–¹æ³•ã€‚Use observations from the interaction with the environment to take actions to maximize rewardã€‚</li></ol><h3 id="3-1-1-ç›‘ç£å­¦ä¹ ä¸­çš„Components">3.1.1 ç›‘ç£å­¦ä¹ ä¸­çš„Components</h3><ul><li>Modelï¼ˆæ¨¡å‹ï¼‰ ä»è¾“å…¥ä¸­å¾—åˆ°è¾“å‡º</li><li>Lossï¼ˆæŸå¤±å‡½æ•°ï¼‰è¯„ä¼°çœŸå®æ ·æœ¬å’Œé¢„æµ‹ç»“æœçš„å·®è·</li><li>Objectiveï¼ˆç›®æ ‡å‡½æ•°å¯¹è±¡ï¼‰The goal to optimize model params for</li><li>Optimizationï¼ˆä¼˜åŒ–ç®—æ³•ï¼‰he algorithm for solving the objective</li></ul><h3 id="3-1-2-ç›‘ç£å­¦ä¹ æ¨¡å‹">3.1.2 ç›‘ç£å­¦ä¹ æ¨¡å‹</h3><ul><li><strong>Decision trees</strong>  â€¢ Use trees to make decisions</li><li><strong>Linear methods</strong> â€¢ Decision is made from a linear combination of input featuresï¼ˆåšå†³ç­–çš„è¾“å‡ºæ˜¯è¾“å…¥çš„çº¿æ€§ç»„åˆï¼‰</li><li><strong>Kernel machines</strong> â€¢ Use kernel functions to compute feature similarities  ï¼ˆæ ¸å‡½æ•°æ¥è¡¡é‡ä¸¤ä¸ªæ ·æœ¬ç‰¹å¾ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼ŒæŒ‡å®šä¸åŒçš„æ ¸å‡½æ•°ï¼Œç‰¹å¾ç›¸ä¼¼åº¦ä¸åŒï¼Œè¾¾åˆ°éçº¿æ€§çš„æ•ˆæœï¼‰</li><li><strong>Neural Networks</strong> â€¢ Use neural networks to learn feature representations</li></ul><h3 id="3-1-3-æ€»ç»“">3.1.3 æ€»ç»“</h3><p><img src="https://picture.mulindya.com/pML3-1.png" alt=""></p><h2 id="3-2-å†³ç­–æ ‘-ğŸŒ´">3.2 å†³ç­–æ ‘ ğŸŒ´</h2><p>åŒ…æ‹¬æœ‰åˆ†ç±»æ ‘ï¼Œå›å½’æ ‘ï¼ˆæ­¤æ—¶å¶å­èŠ‚ç‚¹ä¸æ˜¯ç±»åˆ«è€Œæ˜¯å®æ•°å€¼ï¼‰</p><h5 id="å¥½å¤„ï¼ˆprosï¼‰ï¼š">å¥½å¤„ï¼ˆprosï¼‰ï¼š</h5><ul><li>å¯è§£é‡Šï¼ˆå¯åº”ç”¨äºé“¶è¡Œä¸šï¼Œä¿é™©ä¸šï¼‰ï¼›</li><li>å¯ä»¥ç”¨äºæ•°å€¼æˆ–ç±»åˆ«ç‰¹å¾ï¼›</li></ul><h5 id="ç¼ºç‚¹ï¼ˆconsï¼‰ï¼š">ç¼ºç‚¹ï¼ˆconsï¼‰ï¼š</h5><ul><li>é²æ£’æ€§å·®ï¼ˆå¯ä»¥ç”¨é›†æˆå­¦ä¹ æ”¹å–„ï¼‰ï¼›</li><li>æ•°æ®å¾ˆå¤æ‚æ—¶å¯èƒ½äº§ç”Ÿè¿‡æ‹Ÿåˆï¼ˆå¯ä»¥ä½¿ç”¨å‰ªæï¼‰ï¼›</li><li>éš¾ä»¥ä½¿ç”¨å¹¶è¡Œè®¡ç®—</li></ul><h3 id="3-2-1-ç”Ÿæˆå†³ç­–æ ‘">3.2.1 ç”Ÿæˆå†³ç­–æ ‘</h3><p><img src="https://picture.mulindya.com/pML3-2.png" alt=""></p><h3 id="3-2-2-éšæœºæ£®æ—">3.2.2 éšæœºæ£®æ—</h3><p>è®­ç»ƒå¤šä¸ªå†³ç­–æ ‘æ¥å¢å¼ºå¹¶è¡Œæ€§ï¼Œåˆ†ç±»æ—¶ä½¿ç”¨æŠ•ç¥¨æœºåˆ¶ï¼Œå›å½’æ—¶ä½¿ç”¨å¤šä¸ªæ ‘çš„å¹³å‡ï¼›å¯¹æ•´ä¸ªæ ‘çš„ç¨³å®šæ€§æœ‰å¥½å¤„ã€‚</p><ul><li>Train multiple decision trees to improve robustness<br>â€¢ Trees are trained independently in parallel<br>â€¢ Majority voting for classification, average for regression</li><li>Where is the randomness from?<br>â€¢ Bagging: randomly sample training examples with replacement<br>â€¢ E.g. [1,2,3,4,5]   [1,2,2,3,4]<br>â€¢ Randomly select a subset of features</li></ul><p>è¿™é‡Œçš„éšæœºæ£®æ—ä¸­çš„éšæœºæ¥è‡ªäºä¸¤ä¸ªæ–¹é¢å“¦~</p><p>ä¸€ä¸ªæ˜¯Baggingï¼Œè®­ç»ƒä¸€æ£µæ ‘åœ¨è®­ç»ƒé›†ä¸­éšæœºé‡‡æ ·ä¸€äº›æ ·æœ¬å‡ºæ¥ï¼ˆå¯é‡å¤é‡‡æ ·ï¼‰ï¼Œæ‰€ä»¥åœ¨è®­ç»ƒé›†ä¸­ä¼šå‡ºç°é‡å¤æ ·æœ¬ï¼Œç»§ç»­é‡å¤è®­ç»ƒå…¶ä»–æ ‘ï¼›</p><p>å¦ä¸€ä¸ªæ˜¯å¯¹äºè·å–çš„è®­ç»ƒé›†æ˜¯éšæœºè¿›è¡Œé‡‡æ ·ç‰¹å¾åˆ—ï¼ˆæ­¤æ—¶æ˜¯æ— é‡å¤çš„ç‰¹å¾åˆ—é‡‡æ ·ï¼‰ï¼›</p><h3 id="3-2-3-Gradient-Boosting-Decision-Trees">3.2.3 Gradient Boosting Decision Trees</h3><p>è®­ç»ƒå¤šæ£µæ ‘ï¼Œä½†æ˜¯è¿™é‡Œä¸æ˜¯ç‹¬ç«‹å®Œæˆå†³ç­–ï¼Œè€Œæ˜¯é¡ºåºçš„å®Œæˆï¼Œåˆ©ç”¨è¿™äº›æ ‘æ¥åˆæˆä¸€ä¸ªå¤§çš„æ¨¡å‹å‡ºæ¥ï¼Œåœ¨tæ—¶åˆ» $ F_t(x) $ è¡¨ç¤ºæ˜¯å¯¹å‰é¢è®­ç»ƒçš„t-1æ£µæ ‘æ±‚å’Œï¼Œè®­ç»ƒçš„è¿™é¢—æ ‘éœ€è¦å’Œæ‰€æœ‰çš„æ ‘çš„ç»“æœåŠ èµ·æ¥ï¼Œåˆ©ç”¨æ®‹å·®çš„æ€æƒ³è®­ç»ƒ$f_t(x)$ï¼ˆä¹Ÿå°±æ˜¯â€œä¸å‡†â€çš„éƒ¨åˆ†ï¼‰</p><p>åŒæ—¶è¿™é‡Œçš„æ®‹å·®ï¼ˆ$y_i-F_t(x_i)$ï¼‰å°±ç­‰äºæ¢¯åº¦å€¼($ -\frac{\alpha L}{\alpha F} $)ï¼ˆä½¿ç”¨å‡æ–¹è¯¯å·®ä½œä¸ºlossï¼‰</p><p><img src="https://picture.mulindya.com/pML3-3.png" alt=""></p><h3 id="3-2-3-æ€»ç»“">3.2.3 æ€»ç»“</h3><ul><li>Decision tree: an explainable model for classification/regression</li><li>Easy to train and tune, widely used in industry</li><li>Sensitive to data<br>â€¢ Ensemble can help (more on bagging and boosting latter)</li></ul><p>å†³ç­–æ ‘æ˜¯ä¸€ä¸ªä¸ºæ•°ä¸å¤šçš„å¯è§£é‡Šæ€§æ¨¡å‹ï¼Œå¯¹æ•°æ®çš„å™ªéŸ³å¾ˆæ•æ„Ÿæ‰€ä»¥å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ ‘ä¸€èµ·è®­ç»ƒæ¥é™ä½åç§»å’Œæ–¹å·®ã€‚å¯ä»¥ç”¨æ ‘æ¨¡å‹æ—¶å°½é‡ç”¨æ ‘æ¨¡å‹å“Ÿã€‚</p><h2 id="3-3-çº¿æ€§å›å½’-ğŸ“ˆ">3.3 çº¿æ€§å›å½’ ğŸ“ˆ</h2><h3 id="3-3-1-æ¦‚å¿µ">3.3.1 æ¦‚å¿µ</h3><p><img src="https://picture.mulindya.com/pML3-4.png" alt=""></p><p>x*wæ˜¯æŒ‰å…ƒç´ æ¥åšä¹˜ç§¯å¾—åˆ°è¿˜æ˜¯ä¸€ä¸ªå‘é‡ï¼ˆlistï¼‰</p><h3 id="3-3-2-ç›®æ ‡å‡½æ•°">3.3.2 ç›®æ ‡å‡½æ•°</h3><p><img src="https://picture.mulindya.com/pML3-5.png" alt=""></p><p>å­¦ä¹ å‚æ•°wï¼Œbï¼›åœ¨æ‰€æœ‰æ ·æœ¬ä¸­æ±‚å‡æ–¹è¯¯å·®ï¼Œæœ€å°åŒ–MSEã€‚</p><h3 id="3-3-3-ä½¿ç”¨çº¿æ€§å›å½’æ¥åˆ†ç±»">3.3.3 ä½¿ç”¨çº¿æ€§å›å½’æ¥åˆ†ç±»</h3><p><img src="https://picture.mulindya.com/pML3-6.png" alt=""></p><p>ä½¿ç”¨çº¿æ€§å›å½’çš„äºŒåˆ†ç±»ç§°ä¸ºé€»è¾‘å›å½’ï¼›</p><p>è¿™é‡Œç±»åˆ«æ•°ä¸ºmï¼ŒçœŸå®æ ‡å·yæ˜¯one-hotå‘é‡ï¼ŒOiä¹Ÿæ˜¯ä¸€ä¸ªé•¿åº¦ä¸ºmçš„å‘é‡ï¼ŒWiä¸ºçŸ©é˜µå½¢å¼ï¼Œç›®æ ‡å‡½æ•°ä¾ç„¶æ˜¯æœ€å°åŒ–å‡æ–¹è¯¯å·®ã€‚ç±»ä¼¼æ²¡æœ‰éšè—å±‚çš„â€ç¥ç»ç½‘ç»œâ€œã€‚</p><h3 id="3-3-4-Softmax-Regression">3.3.4 Softmax Regression</h3><p><img src="https://picture.mulindya.com/pML3-7.png" alt=""></p><p>è¿™ç§æ–¹æ³•çš„ä¾§é‡ç‚¹æ˜¯æœ€å¤§åŒ–one-hotä¸­æ­£ç¡®æ ·æœ¬çš„å€¼ï¼Œå¯¹å…¶ä»–æ ·æœ¬ç‚¹å€¼ç½®ä¿¡åº¦ä¸ä¼šå¼ºåˆ¶é€¼è¿‘ä¸º0ã€‚é¿å…ç²¾åŠ›é›†ä¸­äºone-hotä¸­å…¶ä»–æ ·æœ¬ä¸º0çš„æ‹Ÿåˆï¼›é¦–å…ˆæŠŠè¾“å‡ºè½¬åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒçš„å½¢å¼ï¼Œè¿™é‡Œè™½ç„¶å‡ºç°äº†éçº¿æ€§å˜æ¢ï¼ˆä½¿ç”¨softmaxï¼‰ï¼Œä½†æ˜¯æ­¤å†³ç­–æ–¹æ³•è¿˜æ˜¯çº¿æ€§æ¨¡å‹ã€‚</p><p>æ­¤æ—¶æ¯”è¾ƒä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œä½¿ç”¨äº¤å‰ç†µæ¥è¡¡é‡å‘é‡çš„å·®åˆ«ï¼Œåªç”¨å…³æ³¨çœŸå®ç±»çš„å€¼ï¼Œè®©å…¶è¶Šå¤§è¶Šå¥½ã€‚</p><h2 id="3-4-éšæœºæ¢¯åº¦ä¸‹é™-ğŸ“‰">3.4 éšæœºæ¢¯åº¦ä¸‹é™ ğŸ“‰</h2><p><img src="https://picture.mulindya.com/pML3-8.png" alt=""></p><p>æ±‚è§£æœ€ä¼˜è§£çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ï¼Œçº¿æ€§å›å½’ä¸­çš„bæ˜¯åœ¨è¾“å…¥çš„Xä¸­å¢åŠ ä¸€è¡Œ1,æ‰€ä»¥è¿™é‡Œçš„bè¡¨ç¤ºæ‰¹é‡å¤§å°ã€‚<br>$$<br>O = W^TX+b<br>$$<br>åœ¨Xä¸­åŠ ä¸€è¡Œå…¨1æ•°æ®<br>$$<br>O = W^TX<br>$$<br>å¯ä»¥è§£å†³é™¤äº†å†³ç­–æ ‘ä»¥å¤–çš„å…¶ä»–ç®—æ³•ï¼ˆè¯¾å†…ï¼‰çš„æ”¶æ•›ï¼Œè¶…å‚æ•°æ˜¯bå’Œnï¼›</p><h3 id="3-4-1-ä»£ç ">3.4.1 ä»£ç </h3><p>â€¢ Train a linear regression model with min-batch SGD<br>â€¢ Hyperparameters<br>â€¢ batch_size<br>â€¢ learning_rate<br>â€¢ num_epochs</p><p>è¿™é‡Œæ˜¯è¾“å‡ºä¸€ä¸ªç»“æœå€¼è€Œéå‘é‡ï¼Œå› ä¸ºè¿™é‡Œæ˜¯å›å½’å“Ÿ~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># `features` shape is (n, p),æ ·æœ¬æ•° ç‰¹å¾æ•° `labels` shape is (n, 1) </span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">data_iter</span>(<span class="hljs-params">batch_size, features, labels</span>):</span> <span class="hljs-comment">#å°æ‰¹é‡çš„è¯»å–</span><br>    num_examples = <span class="hljs-built_in">len</span>(features)  <span class="hljs-comment">#æ ·æœ¬æ•°</span><br>    indices = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(num_examples)) <br>    random.shuffle(indices)  <span class="hljs-comment"># read examples at random  éšæœºé‡‡æ ·</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_examples, batch_size): <br>        batch_indices = torch.tensor( <br>            indices[i:<span class="hljs-built_in">min</span>(i + batch_size, num_examples)]) <br>        <span class="hljs-keyword">yield</span> features[batch_indices], labels[batch_indices] <span class="hljs-comment">#yieldæ˜¯ä¸€ä¸ªåå¤çš„æ“ä½œï¼Œä¼šåˆ›å»ºè¿­ä»£å™¨ï¼Œå¯ä»¥ç”¨foræ¥éå†</span><br>w = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, size=(p, <span class="hljs-number">1</span>), requires_grad=<span class="hljs-literal">True</span>) <br>b = torch.zeros(<span class="hljs-number">1</span>, requires_grad=<span class="hljs-literal">True</span>) <br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs): <br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter(batch_size, features, labels): <br>        y_hat = X @ w + b  <span class="hljs-comment">#@æ˜¯ç”¨æ¥å¯¹tensorè¿›è¡ŒçŸ©é˜µç›¸ä¹˜çš„ï¼›*ç”¨æ¥å¯¹tensorè¿›è¡ŒçŸ©é˜µè¿›è¡Œé€å…ƒç´ ç›¸ä¹˜ï¼›</span><br>        loss = ((y_hat - y)**<span class="hljs-number">2</span> / <span class="hljs-number">2</span>).mean() <span class="hljs-comment">#å‡æ–¹è¯¯å·®</span><br>        loss.backward()  <span class="hljs-comment">#æ±‚å¯¼</span><br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> [w, b]: <span class="hljs-comment"># å¯¹wï¼Œbæ›´æ–°</span><br>            param -= learning_rate * param.grad   <span class="hljs-comment">#æ¢¯åº¦æ›´æ–°</span><br>            param.grad.zero_()  <span class="hljs-comment">#æ¢¯åº¦æ¸…é›¶</span><br></code></pre></td></tr></tbody></table></figure><h3 id="3-4-2-æ€»ç»“">3.4.2 æ€»ç»“</h3><p>â€¢ Linear methods linearly combine inputs to obtain predictions<br>â€¢ Linear regression uses MSE as the loss function<br>â€¢ Softmax regression is used for multiclass classification<br>â€¢ Turn predictions into probabilities and use cross-entropy as loss<br>â€¢ Cross entropy loss between two probability distribution<br>â€¢ Mini-batch SGD can learn both models (and later neural networks as well)</p><h2 id="3-5-ç¥ç»ç½‘ç»œ-âœï¸">3.5 ç¥ç»ç½‘ç»œ âœï¸</h2><p>â€¢ NN usually requires more data and more computation<br>â€¢ NN architectures to model data structures<br>â€¢ Multilayer perceptions<br>â€¢ Convolutional neural networks<br>â€¢ Recurrent neural networks<br>â€¢ Transformer<br>â€¢ Design NN to incorporate prior knowledge about the data</p><p>ä½¿ç”¨æœºå™¨æ¥æå–ç‰¹å¾æ¯”æ‰‹åŠ¨æå–ç‰¹å¾è¦å¥½ï¼Œä½†æ˜¯éœ€è¦æ›´å¤šçš„æ•°æ®ï¼Œå¯èƒ½æ•°æ®é›†å¤§äº†1000å€ã€‚</p><h3 id="3-5-1-å¤šå±‚æ„ŸçŸ¥æœº">3.5.1 å¤šå±‚æ„ŸçŸ¥æœº</h3><p><img src="https://picture.mulindya.com/pML3-9.png" alt=""></p><ul><li><p>çº¿æ€§å›å½’ç›¸å½“äºæ˜¯m=1çš„å…¨è¿æ¥å±‚</p></li><li><p>Softmaxå›å½’æ˜¯mä¸ºmçš„å…¨è¿æ¥å±‚</p></li></ul><h4 id="MLP">MLP</h4><p>é€šè¿‡æ¿€æ´»å‡½æ•°æ¥æ„å»ºéçº¿æ€§æ¨¡å‹</p><ul><li><p>Activation is a elemental-wise non-linear function</p><p>eg:</p></li></ul><p>$$<br>sigmoid(x) = \frac{1}{1+e^{(-x)}}<br>$$</p><p>$$<br>Relu(x) = max(x,0)<br>$$<br>â€‹â€¢ It leads to non-linear models</p><ul><li>Stack multiple hidden layers  (dense + activation) to get deeper models å †å éšè—å±‚</li><li>Hyper-parameters:<br># hidden layers, # outputs of each hidden layer</li><li>Universal approximation theorem</li></ul><h4 id="code">code</h4><p>â€¢ MLP with 1 hidden layer<br>â€¢ Hyperparameter: num_hiddens</p><p>ä¸€ä¸ªéšè—å±‚H æœ€ååšä¸€ä¸ªçº¿æ€§æ˜ å°„è¾“å‡ºã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">relu</span>(<span class="hljs-params">X</span>):</span> <br>    <span class="hljs-keyword">return</span> torch.<span class="hljs-built_in">max</span>(X, <span class="hljs-number">0</span>) <br>W1 = nn.Parameter(torch.randn(num_inputs, num_hiddens) * <span class="hljs-number">0.01</span>) <br>b1 = nn.Parameter(torch.zeros(num_hiddens)) <br>W2 = nn.Parameter(torch.randn(num_hiddens, num_outputs) * <span class="hljs-number">0.01</span>) <br>b2 = nn.Parameter(torch.zeros(num_outputs)) <br>H = relu(X @ W1 + b1) <br>Y = H @ W2 + b2 <br></code></pre></td></tr></tbody></table></figure><h3 id="3-5-2-å·ç§¯ç¥ç»ç½‘ç»œ">3.5.2 å·ç§¯ç¥ç»ç½‘ç»œ</h3><h4 id="å¼•å…¥">å¼•å…¥</h4><ul><li>Learn ImageNet (300x300 images with 1K classes) by a MLP with a single hidden layer with 10K outputs<br>â€¢ It leads to 1 billion learnable parameters, thatâ€™s too big!<br>â€¢ Fully connected: an output is a weighted sum over all inputs</li><li>Recognize objects in images<br>â€¢ <strong>Translation invariance</strong>: similar output  no matter where the object is<br>â€¢ <strong>Locality</strong>: pixels are more related to  near neighbors</li><li>Build the prior knowledge into the model structure<br>â€¢ Achieve same model capacity with less # params</li></ul><p>ç”±äºå…¨è¿æ¥å±‚çš„å‚æ•°é‡ä¸ºm*nï¼Œçº¯ç”¨MLPå‚æ•°é‡å¤ªå¤§äº†ï¼Œå¼•ç”¨å·ç§¯å±‚</p><p>å¯¹äºå›¾åƒæœ‰ä¸¤å¤§ç‰¹æ€§</p><ol><li>å˜æ¢ä¸å˜æ€§ï¼šè¡¨ç¤ºåŒä¸€objectåœ¨å›¾åƒåŒºåŸŸçš„å˜æ¢å¯¹ç»“æœæ²¡æœ‰å½±å“ï¼›</li><li>æœ¬åœ°æ€§ï¼šæŸä¸€åƒç´ ä¸é™„è¿‘çš„åƒç´ ç‚¹çš„å…³è”åº¦è¾ƒé«˜ï¼Œè¿œå¤„çš„å…³è”åº¦æ¯”è¾ƒä½ï¼›</li></ol><h4 id="å…·ä½“æœºåˆ¶">å…·ä½“æœºåˆ¶</h4><p><img src="https://picture.mulindya.com/pML3-10.png" alt=""></p><ul><li><p>æœ¬åœ°æ€§ï¼šå·ç§¯å±‚çš„ä¸€ä¸ªè¾“å‡ºåªæ˜¯æ¥æºäºk*kçš„ä¸€ä¸ªåƒç´ å—è¿›è¡Œå±€éƒ¨è®¡ç®—ï¼›</p></li><li><p>å¹³ç§»ï¼ˆ/å˜æ¢ï¼‰ä¸å˜æ€§ï¼šåœ¨ä¸€ä¸ªfeature mapçš„channelä¸Šä½¿ç”¨ç›¸åŒå·ç§¯æ ¸ï¼Œæƒé‡å…±äº«ï¼Œå› ä¸ºå’Œä½ç½®æ— å…³ã€‚</p></li></ul><p>æ‰€ä»¥æ¨¡å‹çš„å‚æ•°é‡åªä¸kæœ‰å…³ï¼Œä¸è¾“å…¥è¾“å‡ºçš„å¤§å°æ— å…³ï¼›å·ç§¯æ ¸é€šå¸¸æ˜¯ä¼šè¢«å­¦ä¹ æˆå»è¯†åˆ«ä¸€ä¸ªå›¾åƒä¸­çš„patternã€‚</p><h4 id="ä»£ç ">ä»£ç </h4><p>å•é€šé“å·ç§¯çš„å®ç°ï¼Œkæ˜¯kernelçš„æƒé‡ï¼ŒYæ˜¯æœ€åçš„è¾“å‡ºï¼Œå…¶ç»´åº¦æ˜¯Xçš„å®½é«˜å‡å»å¯¹åº”çš„kå®½é«˜å†åŠ 1ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># both input `X` and weight `K` are matrices </span><br>h, w = K.shape <br>Y = torch.zeros((X.shape[<span class="hljs-number">0</span>] - h + <span class="hljs-number">1</span>, X.shape[<span class="hljs-number">1</span>] - w + <span class="hljs-number">1</span>)) <br><span class="hljs-comment"># stride = 1 </span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">0</span>]):   <br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">1</span>]): <br>        Y[i, j] = (X[i : i+h, j : j+w] * K).<span class="hljs-built_in">sum</span>() <span class="hljs-comment">#ç‚¹ä¹˜å†æ±‚å’Œçš„è®¡ç®—ç§°ä¸ºäº¤å‰ç›¸å…³</span><br></code></pre></td></tr></tbody></table></figure><h4 id="Pooling-Layer-æ±‡èšå±‚">Pooling Layer æ±‡èšå±‚</h4><p>å·ç§¯å±‚å¯¹è¾“å…¥çš„ä½ç½®æ•æ„Ÿï¼Œå¦‚æœè¾“å…¥çš„objectç§»åŠ¨ä¸€ä¸ªå¾®å°è·ç¦»å¯¹åº”çš„è¾“å‡ºä¹Ÿä¼šå‡ºç°ç§»åŠ¨ï¼Œè¿™æ ·é²æ£’æ€§ä¼šé™ä½ï¼Œé€šè¿‡æ± åŒ–å±‚ï¼ˆæ±‡èšå±‚ï¼‰å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¯ä¸€æ¬¡åœ¨K*Kçš„çª—å£ä¸­ä½¿ç”¨å¹³å‡æ±‡èšæˆ–è€…æœ€å¤§æ±‡èšï¼Œè¿™æ ·å¯¹Kä¸ªåƒç´ çš„åç§»å°±ä¸ä¼šå¤ªå¤§å½±å“ã€‚</p><ul><li>Convolution is sensitive to location<br>â€¢ A translation/rotation of a pattern in the input results similar changes of a pattern in the output</li><li>A pooling layer computes mean/max in windows of size k Ã— k</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># h, w: pooling window height and width </span><br><span class="hljs-comment"># mode: max or avg </span><br>Y = torch.zeros((X.shape[<span class="hljs-number">0</span>] - h + <span class="hljs-number">1</span>, X.shape[<span class="hljs-number">1</span>] - w + <span class="hljs-number">1</span>)) <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">0</span>]): <br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">1</span>]): <br>        <span class="hljs-keyword">if</span> mode == <span class="hljs-string">'max'</span>: <br>            Y[i, j] = X[i : i+h, j : j+w].<span class="hljs-built_in">max</span>() <br>        <span class="hljs-keyword">elif</span> mode == <span class="hljs-string">'avg'</span>: <br>            Y[i, j] = X[i : i+h, j : j+w].mean()<br></code></pre></td></tr></tbody></table></figure><h4 id="å·ç§¯ç¥ç»ç½‘ç»œ">å·ç§¯ç¥ç»ç½‘ç»œ</h4><ul><li>Stacking convolution layers to extract features<br>â€¢ Activation is applied after each convolution layer<br>â€¢ Using pooling to reduce location sensitivity</li><li>Modern CNNs are deep neural network with various hyper-parameters and layer connections (AlexNet, VGG, Inceptions, ResNet, MobileNet)</li></ul><p>å·ç§¯ç¥ç»ç½‘ç»œæŠŠå·ç§¯å±‚å †å èµ·æ¥ï¼Œä½¿ç”¨å·ç§¯å±‚æŠ½å–ç©ºé—´ä¿¡æ¯ï¼Œæ»¡è¶³å˜æ¢ä¸å˜æ€§å’Œæœ¬åœ°æ€§çš„ç‰¹å¾ã€‚æ¿€æ´»å±‚åœ¨å·ç§¯å±‚ä¹‹åï¼Œå·ç§¯å±‚æ˜¯ä¸€ç§ç‰¹æ®Šçš„å…¨è¿æ¥å±‚ï¼ˆæ¯æ¬¡åªçœ‹å°çª—å£ï¼Œå…¶ä»–æƒé‡ä¸º0ï¼‰ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯çº¿æ€§å˜æ¢ï¼Œæ‰€ä»¥éœ€è¦æ¿€æ´»å±‚æ¥éçº¿æ€§åŒ–ï¼›åŒæ—¶ä½¿ç”¨æ±‡èšå±‚æ¥é™ä½å·ç§¯å±‚å¯¹ä½ç½®çš„æ•æ„Ÿæ€§ã€‚</p><blockquote><p>lenet = nn.Sequential(<br>nn.Conv2d(â€¦),<br>nn.Sigmoid(),<br>nn.AvgPool2d(â€¦),<br>nn.Conv2d(),<br>nn.Sigmoid(),<br>nn.AvgPool2d(â€¦),<br>nn.Flatten(),<br>nn.Linear(â€¦),<br>nn.Sigmoid(),<br>nn.Linear(â€¦),<br>nn.Sigmoid(),<br>nn.Linear(â€¦))</p></blockquote><h3 id="3-5-3-å¾ªç¯ç¥ç»ç½‘ç»œ">3.5.3 å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>è¯­è¨€æ¨¡å‹ä¸­è®¾è®¡å¾ªç¯ç¥ç»ç½‘ç»œï¼Œé€šè¿‡å‰é¢çš„ä¿¡æ¯æ¥é¢„æµ‹å½“å‰ä¿¡æ¯ï¼Œæ—¶é—´åºåˆ—ä¿¡æ¯ä¸­é€šè¿‡å‰é¢å‡ ä¸ªé¡¹æ¥é¢„æµ‹åä¸€ä¸ªé¡¹ã€‚</p><p>ä½¿ç”¨Denseæ—¶ç”±å‰ä¸€ä¸ªè¯ä½œä¸ºè¾“å…¥é¢„æµ‹å½“å‰è¯ï¼Œå½“æ—¶æ— æ³•è·å–æ—¶é—´åºåˆ—ä¿¡æ¯ï¼Œå› ä¸ºè¾“å…¥é•¿åº¦ç»´åº¦ä¸å¯éšæ„å˜åŒ–ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦å¯¹æ—¶åºä¿¡æ¯æ·»åŠ åˆ°è¾“å…¥ä¸­ï¼Œä¹Ÿå°±æ˜¯RNNï¼Œå¯ä»¥å°†å‰é¢çš„è¾“å‡ºï¼ˆéšè—å±‚ï¼‰æ·»åŠ è¿›å…¥å½“å‰å±‚çš„è¾“å…¥ã€‚<strong>æ³¨æ„è¿™é‡Œçš„å¯¹æ¯ä¸ªè¯æƒé‡æ˜¯ä¸€æ ·çš„</strong>ï¼ˆåç»­ä»£ç ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼‰ã€‚</p><h4 id="Denseä¸Recurrent-networks">Denseä¸Recurrent networks</h4><p><img src="https://picture.mulindya.com/pML3-11.png" alt=""></p><h4 id="RNNå’Œå˜ç§">RNNå’Œå˜ç§</h4><p><img src="https://picture.mulindya.com/pML3-12.png" alt=""></p><p>æ³¨æ„éšè—å±‚æ˜¯ç»è¿‡æ¿€æ´»å±‚æ¿€æ´»ä¹‹åå†è¾“å…¥ï¼Œå¢åŠ å‰å‘éšè—å±‚ã€‚<br>$$<br>h_t = \sigma(W_{hh}h_{t-1}+W_{hx}x_t+b_h)<br>$$<br>æœ‰äº›å˜ç§ä¼šæ¶‰åŠé—¨æ¥æŠ‘åˆ¶æŸäº›ä¿¡æ¯æ¯”å¦‚LSTMï¼ŒGRUï¼Œä¼šå¯¹ä¿¡æ¯æµè¿›è¡Œç»†è‡´çš„æ§åˆ¶ï¼Œæ¯”å¦‚å¯¹è¿‡å»æˆ–è€…ç°åœ¨çš„ä¿¡æ¯é‡‡å–é—å¿˜ã€æŠ‘åˆ¶ï¼Œè¿™ç§æ“ä½œä¹Ÿæ˜¯é€šè¿‡ä¸€ç»„æƒé‡æ¥å­¦ä¹ å†³å®šæ˜¯å¦å¯¹ç‰¹å®šä¿¡æ¯æŠ‘åˆ¶ã€‚</p><h4 id="ä»£ç -2">ä»£ç </h4><p>å®ç°ç®€å•çš„RNNã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">W_xh = nn.Parameter(torch.randn(num_inputs, num_hiddens) * <span class="hljs-number">0.01</span>) <br>W_hh = nn.Parameter(torch.randn(num_hiddens, num_hiddens) * <span class="hljs-number">0.01</span>)  <span class="hljs-comment">#å¤šå‡ºæ¥çš„</span><br>b_h = nn.Parameter(torch.zeros(num_hiddens)) <br>H = torch.zeros(num_hiddens) <br>outputs = [] <br><span class="hljs-comment">#æŠŠæ¯ä¸ªè¯æ”¾å…¥ä½œä¸ºè¾“å…¥</span><br><span class="hljs-keyword">for</span> X <span class="hljs-keyword">in</span> inputs:  <span class="hljs-comment"># `inputs` shape : (num_steps, batch_size, num_inputs)  num_stepsè¡¨ç¤ºä¸€ç»„è¾“å…¥ å„ä¸ªè¯</span><br>    H = torch.tanh(X @ W_xh + H @ W_hh + b_h)  <span class="hljs-comment">#å¯¹æ¯ä¸ªè¯å…¶å®æƒé‡æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç»˜å›¾çš„æ—¶å€™æ–¹ä¾¿è¡¨ç¤ºå±•å¼€æ‹‰é•¿</span><br>    outputs.append(H)<br></code></pre></td></tr></tbody></table></figure><h4 id="Bi-RNN-and-Deep-RNN">Bi-RNN and Deep RNN</h4><p><img src="https://picture.mulindya.com/pML3-13.png" alt=""></p><p>å¯ä»¥ä»åŒå‘æ¥æ£€ç´¢ï¼Œè¿™æ ·ytçš„ä¿¡æ¯æ¥æºæ˜¯å®ƒä¸¤ä¾§çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å®Œå½¢å¡«ç©ºï¼Œæ˜¯å¯ä»¥è·å–åŒå‘ä¿¡æ¯å“¦ã€‚</p><h4 id="æ¨¡å‹é€‰æ‹©">æ¨¡å‹é€‰æ‹©</h4><p>ä¸åŒçš„æ¨¡å‹ä½¿ç”¨ä¸ä¸åŒæ•°æ®ï¼Œè¡¨æ ¼æ•°æ®ä½¿ç”¨ä¸€èˆ¬æ ‘æ¨¡å‹ï¼Œçº¿æ€§æ¨¡å‹ï¼Œç¥ç»ç½‘ç»œã€‚Transformerå¯¹æ–‡æœ¬å’Œå›¾åƒéƒ½å¯ä»¥å¤„ç†ï¼Œå®é™…ä¸Šæ–‡æœ¬ä¿¡æ¯å’Œå›¾åƒä¿¡æ¯æœ‰ç›¸ä¼¼çš„å†…éƒ¨ç‰¹æ€§ï¼Œåªæ˜¯ç»´åº¦ä¸ä¸€æ ·è€Œå·²ã€‚</p><p><img src="https://picture.mulindya.com/pML3-14.png" alt=""></p><h3 id="3-5-4-æ€»ç»“">3.5.4 æ€»ç»“</h3><p>â€¢ MLP: stack dense layers with non-linear activations<br>â€¢ CNN: stack convolution activation and pooling layers to efficient extract spatial information<br>â€¢ RNN: stack recurrent layers to pass temporal information through hidden state</p><p>CNNï¼šé«˜æ•ˆæŠ“å–ç©ºé—´ä¿¡æ¯</p><p>RNNï¼šæŒç»­ä¿¡æ¯çš„æ•°æ®ï¼Œæ¯”å¦‚å¯¹æ—¶åºä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Depthwise Separable Convolution</title>
    <link href="/2022/01/06/deep_learning/dsconv/"/>
    <url>/2022/01/06/deep_learning/dsconv/</url>
    
    <content type="html"><![CDATA[<h1>Depthwise Separable Convolution</h1><blockquote><p>åœ¨Mobilenetä¸­ä½¿ç”¨DSconvï¼Œé€šè¿‡æ”¹è¿›æ¶æ„å‡å°‘å‚æ•°é‡çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿé¡ºåŠ¿è®°å½•ä¸€ä¸‹Depthwise Separableå·ç§¯çš„åŸç†ã€‚ç¬”è®°æ¥æºäºæå®æ¯…çš„è¯¾ç¨‹ã€‚ğŸ˜¢</p></blockquote><h2 id="ä¼ ç»Ÿçš„å·ç§¯è¿‡ç¨‹">ä¼ ç»Ÿçš„å·ç§¯è¿‡ç¨‹</h2><p><img src="https://picture.mulindya.com/kDistillation-3.png" alt=""></p><h2 id="Depthwise-Convolution">Depthwise Convolution</h2><p>ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œæ¯ä¸€ä¸ªfilteråªä½œç”¨åˆ°ä¸€ä¸ªChanelï¼Œè¿™é‡Œinputå’Œoutputçš„channelæ˜¯ç›¸åŒçš„ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-4.png" alt=""></p><h2 id="Pointwise-Convolution">Pointwise Convolution</h2><p>è·¨channelæ“ä½œæ˜¯é€šè¿‡Pointwise Convolutionæ¥å¾—åˆ°Feature mapï¼Œè¿™é‡Œæ˜¯1*1çš„å¤§å°filter å› ä¸ºåªç”¨è€ƒè™‘ä¸åŒchannelä¹‹é—´çš„å…³ç³»å³å¯ã€‚å‰é¢çš„Depthwise Convolutionæ˜¯å·²ç»è€ƒè™‘Channelå†…éƒ¨çš„å…³ç³»ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-5.png" alt=""></p><p><img src="https://picture.mulindya.com/kDistillation-6.png" alt=""></p><p>æ‰€ä»¥å‚æ•°é‡ä¼šå‡å°‘K*Kå€ã€‚</p><h2 id="åŸç†">åŸç†</h2><h3 id="Low-rank-approximation">Low rank approximation</h3><p><img src="https://picture.mulindya.com/kDistillation-7.png" alt=""></p><p>è¿™æ ·å¯ä»¥å‡å°‘å‚æ•°ã€‚ä»Wåˆ°U+Vçš„å‚æ•°è§„æ¨¡ï¼Œä½†æ˜¯è¿™æ ·çš„å˜æ¢ä¼šå¯¼è‡´æŸäº›é™åˆ¶ï¼Œå‡å°‘wçš„å¯èƒ½æ€§ï¼Œå› ä¸ºä½¿ç”¨U*Vçš„ç§©æ˜¯å°äºç­‰äºWçš„ç§©ï¼Œæ‰€ä»¥æ˜ å°„çš„ç©ºé—´ä¼šå‡å°ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-8.png" alt=""></p><p>å°±å¯ä»¥å¯¹æ¯”ä¼ ç»Ÿçš„å·ç§¯å’ŒDepthwiseå·ç§¯çš„åŸç†å°±ç›¸å½“äºWå’ŒUVçš„å…³ç³»ï¼ŒæŠŠä¸€å±‚çš„æ˜ å°„æ‹†æˆä¸¤æ¬¡ï¼Œæ‰€ä»¥å‚æ•°é‡å‡å°‘äº†ï¼Œæ¨¡å‹è¡¨ç¤ºå‡å°ã€‚</p><h2 id="ç›¸å…³ç½‘ç»œ">ç›¸å…³ç½‘ç»œ</h2><p>ä½¿ç”¨Depthwise Convçš„ç½‘ç»œæ¶æ„</p><p>â€¢SqueezeNet<br>â€¢ <a href="https://arxiv.org/abs/1602.07360">https://arxiv.org/abs/1602.07360</a><br>â€¢MobileNet<br>â€¢ <a href="https://arxiv.org/abs/1704.04861">https://arxiv.org/abs/1704.04861</a><br>â€¢ShuffleNet<br>â€¢ <a href="https://arxiv.org/abs/1707.01083">https://arxiv.org/abs/1707.01083</a><br>â€¢Xception<br>â€¢ <a href="https://arxiv.org/abs/1610.02357">https://arxiv.org/abs/1610.02357</a><br>â€¢GhostNet<br>â€¢ <a href="https://arxiv.org/abs/1911.11907">https://arxiv.org/abs/1911.11907</a></p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
      <category>MobileNet</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>MobileNet</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Knowledge Distillationç¬”è®°</title>
    <link href="/2022/01/05/deep_learning/KnowledgeDistillation/"/>
    <url>/2022/01/05/deep_learning/KnowledgeDistillation/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å› ä¸ºé¡¹ç›®ä¸­è¦ä½¿ç”¨åˆ°çŸ¥è¯†è’¸é¦æ¥è®­ç»ƒç½‘ç»œï¼Œæ‰€ä»¥å…ˆå¥½å¥½å­¦ä¸€ä¸‹å®ƒçš„åŸç†ã€‚åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†æå®æ¯…æœºå™¨å­¦ä¹ çš„æ¨¡å‹å‹ç¼©ä¸­è®²åˆ°äº†è¿™ä¸ªï¼Œé‚£ï¼Œå°±å¼€å§‹å­¦ä¹ å­ğŸ˜‰</p></blockquote><h1>çŸ¥è¯†è’¸é¦ğŸŒŒ</h1><h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><p>å…ˆè®­ç»ƒä¸€ä¸ªå¤§çš„networkï¼ˆteacherï¼‰ï¼Œå†æ ¹æ®è¿™ä¸ªnetworkæ¥åˆ¶é€ å°çš„networkï¼ˆstudentï¼‰ï¼ŒåŒæ—¶studentæ˜¯æ ¹æ®teacherçš„ç»“æ„åšä¸€äº›ä¿®å‰ªå¾—åˆ°çš„å°ç½‘ç»œï¼Œstudent networkæ˜¯æ ¹æ®teacher networkæ¥å­¦ä¹ çš„å“¦ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-1.png" alt=""></p><p>student networkæ˜¯å»æ‹Ÿåˆteacherçš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨Ensembleçš„ç½‘ç»œä½œä¸ºteacherï¼Œè¿™æ ·è¡¨ç°å¾—ç»“æœæ›´å¥½ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-2.png" alt=""></p><p>åœ¨ä½¿ç”¨çŸ¥è¯†è’¸é¦æ—¶æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œå¯ä»¥ç¨å¾®æ”¹ä¸€ä¸‹Softmaxçš„å‡½æ•°ï¼ŒTæ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œå¯ä»¥ä½¿å¾—å‡½æ•°ç‚¹æ›´åŠ å¹³æ»‘ã€‚å› ä¸ºstudentè¦å­¦ä¹ teacherç»™çš„ç»“æœï¼Œå¹¶ä¸”teacherç»™çš„ç»“æœè¦å‘Šè¯‰studentï¼Œå“ªäº›ç±»åˆ«æ¯”è¾ƒç›¸ä¼¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»™å‡º1ï¼Œ0ï¼Œ0ï¼ˆå’ŒçœŸå®ç»“æœæ²¡æœ‰å·®åˆ«ï¼‰ï¼Œæ‰€ä»¥teacher çš„è¾“å‡ºä¸åº”è¯¥è¿‡åº¦é›†ä¸­ï¼Œéœ€è¦æ›´åŠ å¹³æ»‘ã€‚è¿™æ ·åˆ†ç±»ç»“æœä¸åŒï¼Œä½†æ˜¯studentå­¦ä¹ æ›´åŠ æœ‰æ„ä¹‰ã€‚åŒæ—¶ä¸ä¸€å®šè¦ç”¨softmaxä¹‹åçš„ç»“æœå»æ‹Ÿåˆstudentï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ä¹‹å‰çš„ï¼Œæˆ–è€…ç±»ä¼¼studentçš„ç¬¬6å±‚æ‹Ÿåˆteacherçš„12å±‚ï¼Œç¬¬3å±‚æ‹Ÿåˆteacherçš„ç¬¬6å±‚ï¼Œè¿™æ ·ç»“æœå¾€å¾€ä¼šæ›´å¥½ã€‚</p><h2 id="å®ä¾‹ğŸŒ»">å®ä¾‹ğŸŒ»</h2><h3 id="Intuition">Intuition</h3><p>é€šå¸¸æ¨¡å‹Teacheræ¯”æ¨¡å‹Studentæ›´å¼ºï¼Œåœ¨æ¨¡å‹Teacherçš„å¸®åŠ©ä¸‹ï¼Œæ¨¡å‹studentå¯ä»¥"é’å‡ºäºè“è€Œèƒœäºè“"ğŸ˜‰,å› ä¸ºä»è®¡ç®—èµ„æºçš„è§’åº¦ä¸Šåºå¤§çš„æ¨¡å‹éƒ¨ç½²æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæ‰€ä»¥é€šè¿‡çŸ¥è¯†è’¸é¦å¯ä»¥è®­ç»ƒä¸€ä¸ªç›¸ä¼¼çš„å°æ¨¡å‹å»æ‹Ÿåˆå¤§æ¨¡å‹çš„è®­ç»ƒæ•ˆæœï¼Œè¿™æ ·é¢„æµ‹å’Œéƒ¨ç½²ä¼šä¾¿æ·å¾ˆå¤šã€‚åŒæ—¶ä½¿ç”¨çŸ¥è¯†è’¸é¦çš„æ–¹æ³•å¯ä»¥è®©å°æ¨¡å‹å­¦åˆ°æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼å…³ç³»ã€‚</p><p><img src="https://picture.mulindya.com/kDistillation-9.png" alt=""></p><p>è¿™é‡Œä¸ä»…ä»…çŸ¥é“è¥¿çº¢æŸ¿æ˜¯çœŸå®æ ‡ç­¾ï¼Œè¿˜å¯ä»¥çŸ¥é“è¿™ä¸ªæ ·æœ¬å’ŒæŸ¿å­è¿™ä¸ªæ ‡ç­¾å¾ˆç›¸ä¼¼ï¼Œè¿™æ ·å¯ä»¥è·å–æ›´å¤šä¿¡æ¯ï¼Œè¿™æ˜¯è’¸é¦æ›´æœ‰ä»·å€¼çš„åœ°æ–¹ã€‚</p><h3 id="Loss-Function-in-Pytorch">Loss Function in Pytorch</h3><ul><li><code>Softmax</code>ï¼šå°†ä¸€ä¸ªæ•°å€¼åºåˆ—æ˜ å°„åˆ°æ¦‚ç‡ç©ºé—´ï¼ˆæ¯ä¸ªå…ƒç´ åˆ†å¸ƒå¹¶ä¸”æ‰€æœ‰å’Œä¸º1ï¼‰</li><li><code>log_softmax</code>ï¼šåœ¨softmaxçš„åŸºç¡€ä¸Šå–å¯¹æ•°</li><li><code>NLLLoss</code>ï¼šå¯¹log_softmaxä¸one-hotè¿›è¡Œè®¡ç®—</li><li><code>CrossEntropy</code>ï¼šè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å·®åˆ«ï¼ˆäº¤å‰ç†µï¼‰</li></ul><h4 id="ä»£ç å®è¯">ä»£ç å®è¯</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><span class="hljs-string">'''</span><br><span class="hljs-string">torch.nn.functional æ¶‰åŠäº†æ‰€æœ‰ torch.nn éœ€è¦ ç±» å’Œ æ–¹æ³• ï¼Œtorch.nn æ„å»ºçš„æ¨¡å—é€šå¸¸å°±æ˜¯è°ƒç”¨ torch.nn.functional é‡Œçš„æ–¹æ³•å®ç°çš„.</span><br><span class="hljs-string">'''</span><br>torch.manual_seed(<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">output = torch.randn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(output)<br><span class="hljs-comment">#tensor([[ 1.5410, -0.2934, -2.1788],</span><br><span class="hljs-comment">#        [ 0.5684, -1.0845, -1.3986]])</span><br><span class="hljs-built_in">print</span>(F.softmax(output, dim=<span class="hljs-number">1</span>))<br><span class="hljs-comment"># è¿™é‡Œdimçš„æ„æ€æ˜¯è®¡ç®—Softmaxçš„ç»´åº¦ï¼Œè¿™é‡Œè®¾ç½®dim=1ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€è¡Œçš„åŠ å’Œä¸º1ã€‚0æ˜¯å¯¹åˆ— 1 æ˜¯å¯¹è¡Œ</span><br><span class="hljs-comment">#tensor([[0.8446, 0.1349, 0.0205],</span><br><span class="hljs-comment">#       [0.7511, 0.1438, 0.1051]])</span><br></code></pre></td></tr></tbody></table></figure><h4 id="What-is-log-softmax">What is log_softmax</h4><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå…¶å®å°±æ˜¯å¯¹<code>softmax</code>å¤„ç†ä¹‹åçš„ç»“æœæ‰§è¡Œä¸€æ¬¡å¯¹æ•°è¿ç®—ã€‚å¯ä»¥ç†è§£ä¸º <code>log(softmax(output))</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(F.log_softmax(output, dim=<span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(torch.log(F.softmax(output, dim=<span class="hljs-number">1</span>)))<br><span class="hljs-comment"># è¾“å‡ºç»“æœæ˜¯ä¸€è‡´çš„</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>tensor([[-0.1689, -2.0033, -3.8886],        [-0.2862, -1.9392, -2.2532]]) tensor([[-0.1689, -2.0033, -3.8886],        [-0.2862, -1.9392, -2.2532]])</p></blockquote><h4 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°</h4><h4 id="What-is-NLLLossï¼Ÿ">What is NLLLossï¼Ÿ</h4><p>è¯¥å‡½æ•°çš„å…¨ç§°æ˜¯<code>negative log likelihood loss</code>. è‹¥$x_i=[q_1, q_2, â€¦, q_N]$ ä¸ºç¥ç»ç½‘ç»œå¯¹ç¬¬iä¸ªæ ·æœ¬çš„è¾“å‡ºå€¼ï¼Œ$y_i$ä¸ºçœŸå®æ ‡ç­¾ã€‚åˆ™ï¼š<br>$$<br>f(x_i,y_i)=-q_{y_i}<br>$$<br>å…¶ä¸­è¾“å…¥ï¼šlog_softmax(output), target</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(F.nll_loss(torch.tensor([[-<span class="hljs-number">1.2</span>, -<span class="hljs-number">2</span>, -<span class="hljs-number">3</span>]]), torch.tensor([<span class="hljs-number">0</span>])))<br><span class="hljs-comment">#ç»“æœæ˜¯tensor(1.2000) å°±æ˜¯å–ç¬¬0ä¸ªçš„è´Ÿæ•°</span><br></code></pre></td></tr></tbody></table></figure><p><strong>é€šå¸¸æˆ‘ä»¬ç»“åˆ log_softmax å’Œ nll_lossä¸€èµ·ç”¨</strong> ğŸ‘‹ã€‚</p><h4 id="CrossEntropyäº¤å‰ç†µ">CrossEntropyäº¤å‰ç†µ</h4><p><strong>åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒCrossEntropyç­‰ä»·äºlog_softmax ç»“åˆ nll_loss</strong></p><p>$N$åˆ†ç±»é—®é¢˜ï¼Œå¯¹äºä¸€ä¸ªç‰¹å®šçš„æ ·æœ¬ï¼Œå·²çŸ¥å…¶çœŸå®æ ‡ç­¾ï¼Œ<code>CrossEntropy</code>çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p>$$<br>cross_entropy=-\sum_{k=1}^{N}\left(p_{k} * \log q_{k}\right)<br>$$</p><p>å…¶ä¸­pè¡¨ç¤ºçœŸå®å€¼ï¼Œåœ¨è¿™ä¸ªå…¬å¼ä¸­æ˜¯one-hotå½¢å¼ï¼›qæ˜¯ç»è¿‡<code>softmax</code>è®¡ç®—åçš„ç»“æœï¼Œ $q_k$ä¸ºç¥ç»ç½‘ç»œè®¤ä¸ºè¯¥æ ·æœ¬ä¸ºç¬¬$k$ç±»çš„æ¦‚ç‡ã€‚</p><p>ä»”ç»†è§‚å¯Ÿå¯ä»¥çŸ¥é“ï¼Œå› ä¸ºpçš„å…ƒç´ ä¸æ˜¯0å°±æ˜¯1ï¼Œè€Œä¸”åˆæ˜¯ä¹˜æ³•ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶åœ°æˆ‘ä»¬å¦‚æœçŸ¥é“1æ‰€å¯¹åº”çš„indexï¼Œé‚£ä¹ˆå°±ä¸ç”¨åšå…¶ä»–æ— æ„ä¹‰çš„è¿ç®—äº†ã€‚æ‰€ä»¥åœ¨pytorchä»£ç ä¸­targetä¸æ˜¯ä»¥one-hotå½¢å¼è¡¨ç¤ºçš„ï¼Œè€Œæ˜¯ç›´æ¥ç”¨scalarè¡¨ç¤ºã€‚è‹¥è¯¥æ ·æœ¬çš„çœŸå®æ ‡ç­¾ä¸º$y$,åˆ™äº¤å‰ç†µçš„å…¬å¼å¯å˜å½¢ä¸ºï¼š</p><p>$$cross_entropy=-\sum_{k=1}^{N}\left(p_{k} * \log q_{k}\right)=-log , q_{y}$$</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">output = torch.tensor([[<span class="hljs-number">1.2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]])<br>target = torch.tensor([<span class="hljs-number">0</span>])<br><br>log_sm_output = F.log_softmax(output, dim=<span class="hljs-number">1</span>)<br>nll_loss_of_log_sm_output = F.nll_loss(log_sm_output, target)<br><span class="hljs-built_in">print</span>(nll_loss_of_log_sm_output)<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">output = torch.tensor([[<span class="hljs-number">1.2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]])<br>target = torch.tensor([<span class="hljs-number">0</span>])<br><br>ce_loss = F.cross_entropy(output, target)<br><span class="hljs-built_in">print</span>(ce_loss)<br><br>F.cross_entropy ã€Š==ã€‹ F.log_softmax(output, dim=<span class="hljs-number">1</span>)+F.nll_loss(log_sm_output, target)<br></code></pre></td></tr></tbody></table></figure><p>è¿™ä¸¤è€…æ˜¯ç­‰ä»·çš„å“¦~</p><h4 id="T-softmax">T-softmax</h4><p>T-softmaxçš„ç›®çš„æ˜¯å¹³æ»‘åˆ†å¸ƒï¼Œä¸è®©åˆ†å¸ƒå¤ªè¿‡äºæç«¯ã€‚æ¯”å¦‚å¯ä»¥çœ‹ä¸‹é¢çš„å®ä¾‹å“ˆã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">softmax</span>(<span class="hljs-params">x</span>):</span><br>    x_exp = np.exp(x)<br>    <span class="hljs-keyword">return</span> x_exp / np.<span class="hljs-built_in">sum</span>(x_exp)<br><br>output = np.array([<span class="hljs-number">0.1</span>, <span class="hljs-number">1.6</span>, <span class="hljs-number">3.6</span>])<br><span class="hljs-built_in">print</span>(softmax(output))<br><span class="hljs-comment">#[0.02590865 0.11611453 0.85797681]</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">softmax_t</span>(<span class="hljs-params">x, t</span>):</span><br>    x_exp = np.exp(x / t)<br>    <span class="hljs-keyword">return</span> x_exp / np.<span class="hljs-built_in">sum</span>(x_exp)<br><br>output = np.array([<span class="hljs-number">0.1</span>, <span class="hljs-number">1.6</span>, <span class="hljs-number">3.6</span>])<br><span class="hljs-built_in">print</span>(softmax_t(output, <span class="hljs-number">5</span>))<br><span class="hljs-comment">#[0.22916797 0.3093444  0.46148762]</span><br></code></pre></td></tr></tbody></table></figure><p>è®¾ç½®ä¸º5å¯ä»¥çœ‹åˆ°åˆ†å¸ƒåœ¨ã€0ï¼Œ1ã€‘çš„æ•°æ›´åŠ å¹³æ»‘äº†å“¦~</p><h2 id="KDè®­ç»ƒä»£ç ">KDè®­ç»ƒä»£ç </h2><h3 id="å¯¼å…¥åŒ…">å¯¼å…¥åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> datasets, transforms<br><span class="hljs-keyword">import</span> torch.utils.data<br>torch.manual_seed(<span class="hljs-number">0</span>)<br>torch.cuda.manual_seed(<span class="hljs-number">0</span>) <span class="hljs-comment">#è®¾ç½®GPUç”Ÿæˆéšæœºæ•°çš„ç§å­ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¤ç°å®éªŒç»“æœã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç½‘ç»œæ¶æ„">ç½‘ç»œæ¶æ„</h3><h4 id="teacherç½‘ç»œ">teacherç½‘ç»œ</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TeacherNet</span>(<span class="hljs-params">nn.Module</span>):</span> <span class="hljs-comment">#ç»§æ‰¿Module</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(TeacherNet, self).__init__()<br>        self.conv1 = nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">32</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br>        self.conv2 = nn.Conv2d(<span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br>        self.dropout1 = nn.Dropout2d(<span class="hljs-number">0.3</span>)<br>        self.dropout2 = nn.Dropout2d(<span class="hljs-number">0.5</span>)<br>        self.fc1 = nn.Linear(<span class="hljs-number">9216</span>, <span class="hljs-number">128</span>)<br>        self.fc2 = nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        x = self.conv1(x)<br>        x = F.relu(x)<br>        x = self.conv2(x)<br>        x = F.relu(x)<br>        x = F.max_pool2d(x, <span class="hljs-number">2</span>)<br>        x = self.dropout1(x)<br>        x = torch.flatten(x, <span class="hljs-number">1</span>)<br>        x = self.fc1(x)<br>        x = F.relu(x)<br>        x = self.dropout2(x)<br>        output = self.fc2(x)<br>        <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></tbody></table></figure><h4 id="studentç½‘ç»œ">studentç½‘ç»œ</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentNet</span>(<span class="hljs-params">nn.Module</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(StudentNet, self).__init__()<br>        self.fc1 = nn.Linear(<span class="hljs-number">28</span> * <span class="hljs-number">28</span>, <span class="hljs-number">128</span>)<br>        self.fc2 = nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">64</span>)<br>        self.fc3 = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        x = torch.flatten(x, <span class="hljs-number">1</span>)<br>        x = F.relu(self.fc1(x))<br>        x = F.relu(self.fc2(x))<br>        output = F.relu(self.fc3(x))<br>        <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></tbody></table></figure><h3 id="teacherç½‘ç»œè®­ç»ƒ">teacherç½‘ç»œè®­ç»ƒ</h3><h4 id="å®šä¹‰åŸºæœ¬å‡½æ•°">å®šä¹‰åŸºæœ¬å‡½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train_teacher</span>(<span class="hljs-params">model, device, train_loader, optimizer, epoch</span>):</span><br>    model.train() <span class="hljs-comment">#trainè¿‡ç¨‹model.train()çš„ä½œç”¨æ˜¯å¯ç”¨ Batch Normalization å’Œ Dropoutã€‚model.train()æ˜¯ä¿è¯BNå±‚èƒ½å¤Ÿç”¨åˆ°æ¯ä¸€æ‰¹æ•°æ®çš„å‡å€¼å’Œæ–¹å·®</span><br>    trained_samples = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> batch_idx, (data, target) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader):<br>        data, target = data.to(device), target.to(device) <span class="hljs-comment">#æ”¾åˆ°GPU</span><br>        optimizer.zero_grad() <span class="hljs-comment">#å½’0</span><br>        output = model(data) <span class="hljs-comment">#å¾—åˆ°ç»“æœ</span><br>        loss = F.cross_entropy(output, target) <span class="hljs-comment">#è®¡ç®—æŸå¤± ä½¿ç”¨äº¤å‰ç†µ</span><br>        loss.backward() <span class="hljs-comment">#åå‘ä¼ æ’­æ›´æ–°å‚æ•°</span><br>        optimizer.step() <span class="hljs-comment">#ä¼˜åŒ–å™¨è°ƒæ•´è¶…å‚æ•°</span><br><br>        trained_samples += <span class="hljs-built_in">len</span>(data)<br>        progress = math.ceil(batch_idx / <span class="hljs-built_in">len</span>(train_loader) * <span class="hljs-number">50</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\rTrain epoch %d: %d/%d, [%-51s] %d%%"</span> %<br>              (epoch, trained_samples, <span class="hljs-built_in">len</span>(train_loader.dataset),<br>               <span class="hljs-string">'-'</span> * progress + <span class="hljs-string">'&gt;'</span>, progress * <span class="hljs-number">2</span>), end=<span class="hljs-string">''</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_teacher</span>(<span class="hljs-params">model, device, test_loader</span>):</span><br>    model.<span class="hljs-built_in">eval</span>() <span class="hljs-comment">#ä¿è¯BNå±‚èƒ½å¤Ÿç”¨å…¨éƒ¨è®­ç»ƒæ•°æ®çš„å‡å€¼å’Œæ–¹å·®</span><br>    test_loss = <span class="hljs-number">0</span><br>    correct = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment">#å†»ç»“å‚æ•°</span><br>        <span class="hljs-keyword">for</span> data, target <span class="hljs-keyword">in</span> test_loader:<br>            data, target = data.to(device), target.to(device)<br>            output = model(data) <span class="hljs-comment">#æ¨¡å‹å¾—åˆ°ç»“æœ</span><br>            test_loss += F.cross_entropy(output, target, reduction=<span class="hljs-string">'sum'</span>).item()  <span class="hljs-comment"># ç»Ÿè®¡æ‰€æœ‰çš„losssum up batch loss</span><br>            pred = output.argmax(dim=<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># get the index of the max log-probability å¾—åˆ°æ¯ä¸€è¡Œçš„æœ€å¤§å€¼ä¸‹æ ‡</span><br>            correct += pred.eq(target.view_as(pred)).<span class="hljs-built_in">sum</span>().item() <span class="hljs-comment">#eqæ˜¯ä¸€ä¸ªåˆ¤æ–­å‡½æ•° view_asæ˜¯æ‹‰æˆä¸€åˆ—</span><br><br>    test_loss /= <span class="hljs-built_in">len</span>(test_loader.dataset) <span class="hljs-comment">#å¾—åˆ°å¹³å‡loss</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">'\nTest: average loss: {:.4f}, accuracy: {}/{} ({:.0f}%)'</span>.<span class="hljs-built_in">format</span>(<br>        test_loss, correct, <span class="hljs-built_in">len</span>(test_loader.dataset),<br>        <span class="hljs-number">100.</span> * correct / <span class="hljs-built_in">len</span>(test_loader.dataset)))<br>    <span class="hljs-keyword">return</span> test_loss, correct / <span class="hljs-built_in">len</span>(test_loader.dataset)<br><br></code></pre></td></tr></tbody></table></figure><h4 id="è®­ç»ƒä¸»å‡½æ•°">è®­ç»ƒä¸»å‡½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">teacher_main</span>():</span><br>    epochs = <span class="hljs-number">10</span><br>    batch_size = <span class="hljs-number">64</span><br>    torch.manual_seed(<span class="hljs-number">0</span>) <span class="hljs-comment">#è®¾ç½®CPUç”Ÿæˆéšæœºæ•°çš„ç§å­ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¤ç°å®éªŒç»“æœã€‚</span><br><br>    device = torch.device(<span class="hljs-string">"cuda"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)<br><br>    train_loader = torch.utils.data.DataLoader(<br>        datasets.MNIST(<span class="hljs-string">'../data/MNIST'</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>,<br>                       transform=transforms.Compose([<br>                           transforms.ToTensor(),<br>                           transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>                       ])),<br>        batch_size=batch_size, shuffle=<span class="hljs-literal">True</span>)<br>    test_loader = torch.utils.data.DataLoader(<br>        datasets.MNIST(<span class="hljs-string">'../data/MNIST'</span>, train=<span class="hljs-literal">False</span>, download=<span class="hljs-literal">True</span>, transform=transforms.Compose([<br>            transforms.ToTensor(),<br>            transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>        ])),<br>        batch_size=<span class="hljs-number">1000</span>, shuffle=<span class="hljs-literal">True</span>)<br><br>    model = TeacherNet().to(device) <span class="hljs-comment">#æ¨¡å‹è£…è¿›GPUä¸­</span><br>    optimizer = torch.optim.Adadelta(model.parameters()) <span class="hljs-comment">#å®šä¹‰ä¼˜åŒ–å™¨ å…¶å®éœ€è¦ä¼ å…¥æ¨¡å‹å‚æ•°è®©ä¼˜åŒ–å™¨çŸ¥é“å‚æ•°ç©ºé—´</span><br>    <span class="hljs-string">'''</span><br><span class="hljs-string">    optimzierä¼˜åŒ–å™¨çš„ä½œç”¨ï¼šä¼˜åŒ–å™¨å°±æ˜¯éœ€è¦æ ¹æ®ç½‘ç»œåå‘ä¼ æ’­çš„æ¢¯åº¦ä¿¡æ¯æ¥</span><br><span class="hljs-string">    å†æ¬¡æ›´æ–°ç½‘ç»œçš„å‚æ•°ï¼Œä»¥èµ·åˆ°é™ä½losså‡½æ•°è®¡ç®—å€¼çš„ä½œç”¨ã€‚</span><br><span class="hljs-string">    '''</span><br>    <br>    teacher_history = [] <span class="hljs-comment">#ä¿å­˜å†å²æ•°æ®</span><br><br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, epochs + <span class="hljs-number">1</span>):<br>        train_teacher(model, device, train_loader, optimizer, epoch)<br>        loss, acc = test_teacher(model, device, test_loader) <span class="hljs-comment">#ç›¸å½“äºéªŒè¯é›†ä½œç”¨ ä¹Ÿå¯ä»¥ç»˜å›¾</span><br>        <br>        teacher_history.append((loss, acc))<br><br>    torch.save(model.state_dict(), <span class="hljs-string">"teacher.pt"</span>)<br>    <span class="hljs-keyword">return</span> model, teacher_history<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®­ç»ƒæ•™å¸ˆç½‘ç»œ</span><br>teacher_model, teacher_history = teacher_main()<br></code></pre></td></tr></tbody></table></figure><h3 id="studentç½‘ç»œè®­ç»ƒï¼ˆé‡ç‚¹ï¼‰ğŸŒ¸">studentç½‘ç»œè®­ç»ƒï¼ˆé‡ç‚¹ï¼‰ğŸŒ¸</h3><h4 id="ç†è®ºéƒ¨åˆ†">ç†è®ºéƒ¨åˆ†</h4><p><img src="https://picture.mulindya.com/kDistillation-10.png" alt=""></p><p>è¿™é‡Œçš„qæ˜¯ç»è¿‡äº†<code>softmax</code>ä¹‹åçš„åˆ†å¸ƒ</p><p>studentçš„lossæ¥æºäºä¸¤ä¸ªéƒ¨åˆ†ï¼ŒLosså°†ä¸¤ä¸ªlossç›¸åŠ </p><ul><li>studetçš„HARD Lossæ˜¯æ ¹æ®one-hotçš„çœŸå®æ ·æœ¬påˆ†å¸ƒå¾—åˆ°ï¼ˆå’Œä¸€èˆ¬çš„lossä¸€æ ·ï¼‰</li><li>studentçš„SOFT lossæ˜¯æ¥æºäºteacherçš„åˆ†å¸ƒqâ€™â€˜ï¼ˆæ˜¯å°†qâ€™è’¸é¦å¹³æ»‘åçš„ç»“æœï¼‰</li></ul><h4 id="å®šä¹‰kdçš„loss">å®šä¹‰kdçš„loss</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¿™é‡Œå®šä¹‰çš„æ˜¯SOFT Loss + äº¤å‰ç†µï¼ˆHARD Lossï¼‰</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">distillation</span>(<span class="hljs-params">y, labels, teacher_scores, temp, alpha</span>):</span><br>    <span class="hljs-keyword">return</span> nn.KLDivLoss()(F.log_softmax(y / temp, dim=<span class="hljs-number">1</span>), F.softmax(teacher_scores / temp, dim=<span class="hljs-number">1</span>)) * (<br>            temp * temp * <span class="hljs-number">2.0</span> * alpha) + F.cross_entropy(y, labels) * (<span class="hljs-number">1.</span> - alpha) <span class="hljs-comment">#ä¸¤ä¸ªåˆ†å¸ƒéƒ½æ˜¯T_softmaxæ¥æ±‚ç›¸å¯¹ç†µ</span><br><br></code></pre></td></tr></tbody></table></figure><blockquote><p>nn.KLDivLoss()(input,target)ç›¸å¯¹ç†µæŸå¤± é€šè¿‡æ±‚æ•£åº¦å¾—åˆ°Losså€¼</p><p>ç”¨äºè¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒçš„ç›¸ä¼¼æ€§ï¼Œè¶Šå°è¶Šç›¸ä¼¼</p></blockquote>$$l_{n}=y_{n} \cdot\left(\log y_{n}-x_{n}\right)$$<p>å¯ä»¥æŒ‡å®šloss functionçš„reductionå‚æ•°ï¼Œæ¥è®¾ç½®æ¯ä¸ªæ ·æœ¬lossçš„æœ€åå¾—åˆ°æ•°æ®lossè®¡ç®—æ–¹å¼ï¼›</p>$$\ell(x, y)=\left\{\begin{array}{ll}L, &amp; \text { if reduction }=\text { 'none' } \\ \operatorname{mean}(L), &amp; \text { if reduction }=\text { 'mean' } \\ N*\operatorname {mean}(L), &amp; \text { if reduction }=\text { 'batchmean' } \\ \operatorname{sum}(L), &amp; \text { if reduction }=\text { 'sum' }\end{array} \right.$$<h4 id="å®šä¹‰åŸºæœ¬å‡½æ•°-2">å®šä¹‰åŸºæœ¬å‡½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train_student_kd</span>(<span class="hljs-params">model, device, train_loader, optimizer, epoch</span>):</span><br>    model.train()<br>    trained_samples = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> batch_idx, (data, target) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader):<br>        data, target = data.to(device), target.to(device)<br>        optimizer.zero_grad()<br>        output = model(data)<br>        teacher_output = teacher_model(data)  <span class="hljs-comment">#å¾—åˆ°teacherç½‘ç»œçš„æ¨æ–­ç”¨äºåç»­è®¡ç®—studentçš„loss</span><br>        teacher_output = teacher_output.detach()  <span class="hljs-comment"># åˆ‡æ–­è€å¸ˆç½‘ç»œçš„åå‘ä¼ æ’­</span><br>        loss = distillation(output, target, teacher_output, temp=<span class="hljs-number">5.0</span>, alpha=<span class="hljs-number">0.7</span>)<br>        loss.backward()<br>        optimizer.step()<br><br>        trained_samples += <span class="hljs-built_in">len</span>(data)<br>        progress = math.ceil(batch_idx / <span class="hljs-built_in">len</span>(train_loader) * <span class="hljs-number">50</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\rTrain epoch %d: %d/%d, [%-51s] %d%%"</span> %<br>              (epoch, trained_samples, <span class="hljs-built_in">len</span>(train_loader.dataset),<br>               <span class="hljs-string">'-'</span> * progress + <span class="hljs-string">'&gt;'</span>, progress * <span class="hljs-number">2</span>), end=<span class="hljs-string">''</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_student_kd</span>(<span class="hljs-params">model, device, test_loader</span>):</span><br>    model.<span class="hljs-built_in">eval</span>()<br>    test_loss = <span class="hljs-number">0</span><br>    correct = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> data, target <span class="hljs-keyword">in</span> test_loader:<br>            data, target = data.to(device), target.to(device)<br>            output = model(data)<br>            test_loss += F.cross_entropy(output, target, reduction=<span class="hljs-string">'sum'</span>).item()  <span class="hljs-comment"># sum up batch loss item()å‡½æ•°å¯ä»¥ç†è§£ä¸ºå¾—åˆ°çº¯ç²¹çš„æ•°å€¼</span><br>            pred = output.argmax(dim=<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># get the index of the max log-probability</span><br>            correct += pred.eq(target.view_as(pred)).<span class="hljs-built_in">sum</span>().item()<br><br>    test_loss /= <span class="hljs-built_in">len</span>(test_loader.dataset)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">'\nTest: average loss: {:.4f}, accuracy: {}/{} ({:.0f}%)'</span>.<span class="hljs-built_in">format</span>(<br>        test_loss, correct, <span class="hljs-built_in">len</span>(test_loader.dataset),<br>        <span class="hljs-number">100.</span> * correct / <span class="hljs-built_in">len</span>(test_loader.dataset)))<br>    <span class="hljs-keyword">return</span> test_loss, correct / <span class="hljs-built_in">len</span>(test_loader.dataset)<br></code></pre></td></tr></tbody></table></figure><h4 id="è®­ç»ƒä¸»å‡½æ•°-2">è®­ç»ƒä¸»å‡½æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">student_kd_main</span>():</span><br>    epochs = <span class="hljs-number">10</span><br>    batch_size = <span class="hljs-number">64</span><br>    torch.manual_seed(<span class="hljs-number">0</span>)<br><br>    device = torch.device(<span class="hljs-string">"cuda"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)<br><br>    train_loader = torch.utils.data.DataLoader(<br>        datasets.MNIST(<span class="hljs-string">'../data/MNIST'</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>,<br>                       transform=transforms.Compose([<br>                           transforms.ToTensor(),<br>                           transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>                       ])),<br>        batch_size=batch_size, shuffle=<span class="hljs-literal">True</span>)<br>    test_loader = torch.utils.data.DataLoader(<br>        datasets.MNIST(<span class="hljs-string">'../data/MNIST'</span>, train=<span class="hljs-literal">False</span>, download=<span class="hljs-literal">True</span>, transform=transforms.Compose([<br>            transforms.ToTensor(),<br>            transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>        ])),<br>        batch_size=<span class="hljs-number">1000</span>, shuffle=<span class="hljs-literal">True</span>)<br><br>    model = StudentNet().to(device)<br>    optimizer = torch.optim.Adadelta(model.parameters())<br>    <br>    student_history = []<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, epochs + <span class="hljs-number">1</span>):<br>        train_student_kd(model, device, train_loader, optimizer, epoch)<br>        loss, acc = test_student_kd(model, device, test_loader)<br>        student_history.append((loss, acc))<br><br>    torch.save(model.state_dict(), <span class="hljs-string">"student_kd.pt"</span>)<br>    <span class="hljs-keyword">return</span> model, student_history<br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">student_kd_model, student_kd_history = student_kd_main()<br></code></pre></td></tr></tbody></table></figure><h3 id="ç»˜åˆ¶ç»“æœ">ç»˜åˆ¶ç»“æœ</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>epochs = <span class="hljs-number">10</span><br>x = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, epochs+<span class="hljs-number">1</span>))<br><br>plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>plt.plot(x, [teacher_history[i][<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'teacher'</span>)<br>plt.plot(x, [student_kd_history[i][<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'student with KD'</span>)<br>plt.plot(x, [student_simple_history[i][<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'student without KD'</span>)<br><br>plt.title(<span class="hljs-string">'Test accuracy'</span>)<br>plt.legend()<br><br><br>plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>plt.plot(x, [teacher_history[i][<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'teacher'</span>)<br>plt.plot(x, [student_kd_history[i][<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'student with KD'</span>)<br>plt.plot(x, [student_simple_history[i][<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs)], label=<span class="hljs-string">'student without KD'</span>)<br><br>plt.title(<span class="hljs-string">'Test loss'</span>)<br>plt.legend()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/kDistillation-13.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°åœ¨teacherçš„å¸®åŠ©ä¸‹ï¼Œstudentå¯ä»¥å­¦å¾—æ›´å¥½ğŸ±</p><h3 id="teacherç½‘ç»œçš„æš—çŸ¥è¯†ğŸ">teacherç½‘ç»œçš„æš—çŸ¥è¯†ğŸ</h3><h4 id="softmax-t">softmax_t</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">softmax_t</span>(<span class="hljs-params">x, t</span>):</span><br>    x_exp = np.exp(x / t)<br>    <span class="hljs-keyword">return</span> x_exp / np.<span class="hljs-built_in">sum</span>(x_exp)<br><br>test_loader_bs1 = torch.utils.data.DataLoader(<br>    datasets.MNIST(<span class="hljs-string">'../data/MNIST'</span>, train=<span class="hljs-literal">False</span>, download=<span class="hljs-literal">True</span>, transform=transforms.Compose([<br>        transforms.ToTensor(),<br>        transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>    ])),<br>    batch_size=<span class="hljs-number">1</span>, shuffle=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="æ¨æ–­">æ¨æ–­</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">teacher_model.<span class="hljs-built_in">eval</span>()<br><span class="hljs-keyword">with</span> torch.no_grad():<br>    data, target = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(test_loader_bs1))<br>    data, target = data.to(<span class="hljs-string">'cuda'</span>), target.to(<span class="hljs-string">'cuda'</span>)<br>    output = teacher_model(data)<br><br>test_x = data.cpu().numpy() <span class="hljs-comment">#æ”¾è¿›cpuè½¬æ¢æˆnumpy</span><br>y_out = output.cpu().numpy()<br>y_out = y_out[<span class="hljs-number">0</span>, ::]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">'Output (NO softmax):'</span>, y_out)<br><br><br><br>plt.subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>plt.imshow(test_x[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, ::])<br><br>plt.subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>plt.bar(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)), softmax_t(y_out, <span class="hljs-number">1</span>), width=<span class="hljs-number">0.3</span>) <span class="hljs-comment">#ç›´æ–¹å›¾</span><br><br>plt.subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br>plt.bar(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)), softmax_t(y_out, <span class="hljs-number">10</span>), width=<span class="hljs-number">0.3</span>)<br>plt.show()<br></code></pre></td></tr></tbody></table></figure><blockquote><p>Output (NO softmax): [-31.14481   -30.600847   -3.2787514 -20.624037  -31.863455  -37.684086 -35.177486  -22.72263   -16.028662  -26.460657 ]</p></blockquote><p><img src="https://picture.mulindya.com/kDistillation-12.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æ•°æ®æ›´åŠ å¹³æ»‘ï¼Œå¹¶ä¸”å¯ä»¥ä½“ç°å‡ºè¿™ä¸ªæ•°å­—ä¸ä»…æ˜¯2è¿˜å’Œ8æœ‰äº›ç±»ä¼¼â›„ï¸ã€‚</p><h2 id="æœ¬è´¨ğŸˆ">æœ¬è´¨ğŸˆ</h2><p><img src="https://picture.mulindya.com/kDistillation-11.png" alt=""></p><p>åœ¨çŸ¥è¯†è’¸é¦ä¸­ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä½¿ç”¨SOFT Lossæ¥æ›¿ä»£æ­£åˆ™åŒ–é¡¹ï¼Œå»æ‹Ÿåˆteacherçš„æ•ˆæœã€‚</p><p>L2å·¦è¾¹æ˜¯æå¤§ä¼¼ç„¶ï¼Œå³è¾¹æ˜¯å…ˆéªŒçŸ¥è¯†ï¼ˆäººä¸ºè®¾ç½®ï¼‰</p><p>è¿™é‡Œç”¨teacherçš„çŸ¥è¯†å»æ­£åˆ™åŒ–ä½œä¸ºå…ˆéªŒçŸ¥è¯†ï¼Œå—¯ï¼niceï¼</p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æå®æ¯…</tag>
      
      <tag>çŸ¥è¯†è’¸é¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>leetcode17 ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</title>
    <link href="/2022/01/05/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode17/"/>
    <url>/2022/01/05/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode17/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚</p><p>ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯</p><p><img src="https://picture.mulindya.com/leetcode17-1.png" alt=""></p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥ï¼š<span class="hljs-keyword">digits</span> = <span class="hljs-string">"23"</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"ad"</span>,<span class="hljs-string">"ae"</span>,<span class="hljs-string">"af"</span>,<span class="hljs-string">"bd"</span>,<span class="hljs-string">"be"</span>,<span class="hljs-string">"bf"</span>,<span class="hljs-string">"cd"</span>,<span class="hljs-string">"ce"</span>,<span class="hljs-string">"cf"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥ï¼š<span class="hljs-keyword">digits</span> = <span class="hljs-string">""</span><br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹3">ç¤ºä¾‹3</h3><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥ï¼š<span class="hljs-keyword">digits</span> = <span class="hljs-string">"2"</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>,<span class="hljs-string">"c"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= digits.length &lt;= 4</code></li><li><code>digits[i]</code> æ˜¯èŒƒå›´ <code>['2', '9']</code> çš„ä¸€ä¸ªæ•°å­—ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•ï¼Œdigitçš„å­—ç¬¦ä¸²ç›¸å½“äºç»™å‡ºæ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ï¼ˆæ•°å­—å¯¹åº”çš„å­—ç¬¦ï¼‰ï¼ŒæŒ‰ç…§æ·±åº¦ä¼˜å…ˆç®—æ³•ï¼Œéå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹å³å¯æ·»åŠ åˆ°resultä¸­ã€‚</p><p>å»æ‰æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯<code>word[:-1]</code>ï¼Œè¿™é‡Œ word[-1]è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">letterCombinations</span>(<span class="hljs-params">self, digits: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        record = {<span class="hljs-string">'2'</span>:<span class="hljs-string">'abc'</span>,<span class="hljs-string">'3'</span>:<span class="hljs-string">'def'</span>,<span class="hljs-string">'4'</span>:<span class="hljs-string">'ghi'</span>,<span class="hljs-string">'5'</span>:<span class="hljs-string">'jkl'</span>,<span class="hljs-string">'6'</span>:<span class="hljs-string">'mno'</span>,<span class="hljs-string">'7'</span>:<span class="hljs-string">'pqrs'</span>,<span class="hljs-string">'8'</span>:<span class="hljs-string">'tuv'</span>,<span class="hljs-string">'9'</span>:<span class="hljs-string">'wxyz'</span>}<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> digits): <span class="hljs-keyword">return</span> []<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">rindex</span>):</span><br>            <span class="hljs-keyword">if</span> rindex==<span class="hljs-built_in">len</span>(digits): <br>                self.result.append(self.word)<br>            <span class="hljs-keyword">if</span> rindex&gt;=<span class="hljs-built_in">len</span>(digits): <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> record[digits[rindex]]:<br>                self.word += x<br>                dfs(rindex+<span class="hljs-number">1</span>)<br>                self.word = self.word[:-<span class="hljs-number">1</span>] <span class="hljs-comment">#åˆ‡ç‰‡å»æ‰æœ€åä¸€ä¸ªå­—ç¬¦</span><br><br>        rindex = <span class="hljs-number">0</span><br>        self.result,self.word = [],<span class="hljs-string">""</span><br>        dfs(rindex)<br>        <span class="hljs-keyword">return</span> self.result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>generative adversarial nets</title>
    <link href="/2022/01/04/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%8F%E5%85%B8%E8%AE%BA%E6%96%87/paper-gan/"/>
    <url>/2022/01/04/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E7%BB%8F%E5%85%B8%E8%AE%BA%E6%96%87/paper-gan/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç¬”è®°è®°å½•äºpdfä¸­ï¼Œæ‰€ä»¥å°±ç›´æ¥æ”¾pdfåœ¨æ­¤å¤„~ ğŸ˜‰</p></blockquote><h3 id="å­¦ä¹ è§†é¢‘é“¾æ¥">å­¦ä¹ è§†é¢‘é“¾æ¥</h3><p><a href="https://www.bilibili.com/video/BV1rb4y187vD?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1rb4y187vD?spm_id_from=333.999.0.0</a></p><h3 id="pdfé“¾æ¥">pdfé“¾æ¥</h3><p><a href="https://paper.mulindya.com/NIPS-2014-generative-adversarial-nets-Paper.pdf">https://paper.mulindya.com/NIPS-2014-generative-adversarial-nets-Paper.pdf</a></p><h3 id="è®ºæ–‡å­¦ä¹ é“¾æ¥">è®ºæ–‡å­¦ä¹ é“¾æ¥</h3><p>æ›´å¤šè®ºæ–‡è¯·è§ï¼š<a href="https://github.com/mli/paper-reading">https://github.com/mli/paper-reading</a></p><h3 id="è®ºæ–‡pdf">è®ºæ–‡pdf</h3><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/NIPS-2014-generative-adversarial-nets-Paper.pdf" width="100%" height="600"></iframe>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>ç»å…¸è®ºæ–‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer58-1 ç¿»è½¬å•è¯çš„é¡ºåº</title>
    <link href="/2022/01/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer58-1/"/>
    <url>/2022/01/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer58-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç¿»è½¬å•è¯çš„é¡ºåº</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªè‹±æ–‡å¥å­ï¼Œç¿»è½¬å¥å­ä¸­å•è¯çš„é¡ºåºï¼Œä½†å•è¯å†…å­—ç¬¦çš„é¡ºåºä¸å˜ã€‚ä¸ºç®€å•èµ·è§ï¼Œæ ‡ç‚¹ç¬¦å·å’Œæ™®é€šå­—æ¯ä¸€æ ·å¤„ç†ã€‚ä¾‹å¦‚è¾“å…¥å­—ç¬¦ä¸²"I am a student. â€œï¼Œåˆ™è¾“å‡º"student. a am Iâ€ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥: <span class="hljs-comment">"the sky is blue"</span><br>è¾“å‡º: <span class="hljs-comment">"blue is sky the"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: " &nbsp;hello world! &nbsp;"</span><br><span class="hljs-section">è¾“å‡º:&nbsp;"world! hello"</span><br><span class="hljs-section">è§£é‡Š: è¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åœ¨å‰é¢æˆ–è€…åé¢åŒ…å«å¤šä½™çš„ç©ºæ ¼ï¼Œä½†æ˜¯åè½¬åçš„å­—ç¬¦ä¸èƒ½åŒ…æ‹¬ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥: <span class="hljs-comment">"a good &nbsp; example"</span><br>è¾“å‡º:&nbsp;<span class="hljs-comment">"example good a"</span><br>è§£é‡Š: å¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œå°†åè½¬åå•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°åªå«ä¸€ä¸ªã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ— ç©ºæ ¼å­—ç¬¦æ„æˆä¸€ä¸ªå•è¯ã€‚</li><li>è¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åœ¨å‰é¢æˆ–è€…åé¢åŒ…å«å¤šä½™çš„ç©ºæ ¼ï¼Œä½†æ˜¯åè½¬åçš„å­—ç¬¦ä¸èƒ½åŒ…æ‹¬ã€‚</li><li>å¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œå°†åè½¬åå•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°åªå«ä¸€ä¸ªã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŒæŒ‡é’ˆæ¥å®šä½è¯é¦–å°¾ä½ç½®ï¼Œç”±äºæ˜¯å€’åºå› æ­¤éœ€è¦ä»åå¾€å‰æ¥æœç´¢ï¼Œå…ˆå®šä½è¯çš„èµ·å§‹ä½ç½®å†è·³è¿‡ç©ºæ ¼å®šä½jçš„ä½ç½®ï¼Œæˆªå–å•è¯åˆ°åˆ—è¡¨ä¸­ï¼Œæœ€åä½¿ç”¨joinè¿æ¥å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseWords</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-comment">#ä»åå¾€å‰ åˆ©ç”¨åŒæŒ‡é’ˆæ¥åˆ¤æ–­å•è¯å—</span><br>        s = s.strip() <span class="hljs-comment"># åˆ é™¤é¦–å°¾ç©ºæ ¼</span><br>        <span class="hljs-comment"># Python strip() æ–¹æ³•ç”¨äºç§»é™¤å­—ç¬¦ä¸²å¤´å°¾æŒ‡å®šçš„å­—ç¬¦ï¼ˆé»˜è®¤ä¸ºç©ºæ ¼æˆ–æ¢è¡Œç¬¦ï¼‰æˆ–å­—ç¬¦åºåˆ—ã€‚</span><br>        <span class="hljs-comment"># æ³¨æ„ï¼šè¯¥æ–¹æ³•åªèƒ½åˆ é™¤å¼€å¤´æˆ–æ˜¯ç»“å°¾çš„å­—ç¬¦ï¼Œä¸èƒ½åˆ é™¤ä¸­é—´éƒ¨åˆ†çš„å­—ç¬¦ã€‚</span><br>        i,j = <span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span><br>        res = []<br>        <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span>):<br>            <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">' '</span>): i -= <span class="hljs-number">1</span> <span class="hljs-comment">#ç¡®å®šè¯çš„èµ·å§‹ä½ç½®</span><br>            res.append(s[i+<span class="hljs-number">1</span>:j+<span class="hljs-number">1</span>])<br>            <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[i]==<span class="hljs-string">' '</span>): i -= <span class="hljs-number">1</span> <span class="hljs-comment">#ç¡®å®šjçš„ä½ç½®</span><br>            j = i<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">' '</span>.join(res)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨å†…ç½®å‡½æ•°splitçš„è¯è¿™é‡Œç›´æ¥ä½¿ç”¨<code>split()</code></p><p>å› ä¸º<code>s.split(" ")</code>è§£å†³ä¸äº†å•è¯é—´å¤šç©ºæ ¼çš„é—®é¢˜ï¼Œ<code>s.split()</code>å¯ä»¥è§£å†³ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseWords</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">' '</span>.join(s.strip().split()[::-<span class="hljs-number">1</span>])<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŒæŒ‡é’ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŒæŒ‡é’ˆ</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬äºŒç« ç¬”è®°</title>
    <link href="/2022/01/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML2-2/"/>
    <url>/2022/01/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML2-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚</p></blockquote><h1>ç¬¬äºŒç«  æå‡æ•°æ®è´¨é‡</h1><blockquote><ul><li><p>å™ªå£°å¤šï¼Ÿ</p></li><li><p>yes -&gt;æ•°æ®æ¸…ç†</p></li><li><p>noï¼Ÿ æ ¼å¼å¯¹å—ï¼Ÿ</p></li><li><p>No -&gt;æ•°æ®å˜æ¢</p></li><li><p>yes é€‚åˆå­¦ä¹ å˜›ï¼Ÿ</p></li><li><p>No -&gt;ç‰¹å¾æå–</p></li></ul></blockquote><h2 id="2-1-æ•°æ®æ¸…ç†">2.1 æ•°æ®æ¸…ç†</h2><h3 id="2-1-1-outlieræ£€æµ‹ï¼ˆå¼‚å¸¸ï¼‰">2.1.1 outlieræ£€æµ‹ï¼ˆå¼‚å¸¸ï¼‰</h3><p><img src="https://picture.mulindya.com/pML2-6.png" alt=""></p><h3 id="2-1-2-åŸºäºè§„åˆ™çš„æ£€æµ‹">2.1.2 åŸºäºè§„åˆ™çš„æ£€æµ‹</h3><p>æ¯”å¦‚å·²çŸ¥xå†³å®šyï¼Œä½†æ˜¯å‡ºç°äº†x-&gt;zé‚£ä¹ˆzæ˜¯ä¸€ä¸ªå¼‚å¸¸æƒ…å†µã€‚</p><h3 id="2-1-3-åŸºäºæ¨¡å¼çš„æ£€æµ‹">2.1.3 åŸºäºæ¨¡å¼çš„æ£€æµ‹</h3><ul><li>Syntactic patterns  ï¼ˆè¯­æ³•æ¨¡å¼ï¼‰</li></ul><p>æ¯”å¦‚è¯´å¤§å¤šæ•°éƒ½æ˜¯æ•°å­—ï¼Œå°‘æ•°æ˜¯ï¿¥+æ•°å­—ï¼Œé‚£ä¹ˆå¯ä»¥è½¬æ¢è¿™äº›å°‘æ•°çš„å­—æ®µä¸ºæ•°å­—</p><p>â€¢ e.g. Map a column to the most prominent data type and identify values do not fit<br>â€¢ eng, en, english -&gt; English</p><ul><li>Semantic patterns ï¼ˆè¯­ä¹‰æ¨¡å¼ï¼‰<br>â€¢ e.g. Add rules through knowledge graph<br>â€¢ Values in column â€œCountryâ€ need have capitals, so a value â€œStanfordâ€ is invalidã€</li></ul><h3 id="2-1-4-æ€»ç»“">2.1.4 æ€»ç»“</h3><ul><li>Types of data errors: outliers, rule violations, pattern violations</li><li>Multiple tools exist to help data cleaning<br>â€¢ Graphic interface for interactive cleaning<br>â€¢ Automatically detect and fix</li></ul><blockquote><p>ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šæ•°æ®æ¸…ç†çš„å·¥å…·ï¼Œæœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨åˆ†æå¤„ç†ã€‚</p></blockquote><h2 id="2-2-æ•°æ®å˜æ¢">2.2 æ•°æ®å˜æ¢</h2><p><strong>æœºå™¨å­¦ä¹ çš„æµç¨‹ï¼šæ•°æ®æ”¶é›†-æ•°æ®æ ‡æ³¨-æ•°æ®å˜æ¢-ç‰¹å¾å·¥ç¨‹-æ¨¡å‹æ„å»ºåŠè®­ç»ƒ</strong></p><p>â€¢ ML algorithms prefer well defined fixed length, well-conditioned, nicely distributed input<br>â€¢ Next, data transformation methods for different data types</p><p><img src="https://picture.mulindya.com/pML2-7.png" alt=""></p><h3 id="2-2-1-å¯¹å®æ•°å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰">2.2.1 å¯¹å®æ•°å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰</h3><p>â€¢ Normalization makes training more stable</p><p><img src="https://picture.mulindya.com/pML2-8.png" alt=""></p><ul><li>Min-max normalization: linearly map to a new min a and max bä¹Ÿå°±æ˜¯é€šè¿‡çº¿æ€§å˜æ¢æŠŠæ•°å€¼å˜æ¢åˆ°aåˆ°bä¹‹é—´ï¼Œå…ˆé€šè¿‡minï¼Œmaxçš„å˜æ¢åˆ°0-1ä¹‹é—´ç„¶åè¿›è¡Œæ‰©å¢å’Œç§»åŠ¨ã€‚</li><li>Z-score normalization: 0 mean, 1 standard deviation å…¶ç›®çš„æ˜¯å°†åˆ†å¸ƒå˜ä¸ºå‡å€¼ä¸º0æ–¹å·®ä¸º1ï¼Œå‡å»å‡å€¼é™¤ä»¥æ ‡å‡†å·®ã€‚</li><li>Decimal scaling å°†æ•°å­—è½¬æ¢ä¸º0.XX (åˆ°0-1)</li><li>Log scaling åŸå§‹æ•°æ®æ¯”è¾ƒå¤§ï¼ˆæ­£æ•°ï¼‰æ—¶å¯ä»¥å˜æ¢åˆ°logâ€™ç©ºé—´â€™ï¼Œåœ¨logä¸­çš„åŠ å‡æ˜¯åŸå§‹æ•°æ®çš„ä¹˜é™¤ï¼Œæ‰€ä»¥æ¯”å€¼ç±»çš„æ•°æ®å¯ä»¥å˜æ¢åˆ°è¿™ç§å½¢å¼</li></ul><h3 id="2-2-2-å›¾åƒå˜æ¢">2.2.2 å›¾åƒå˜æ¢</h3><ul><li><p>Our previous web scraping will scrape 15 TB images for a year<br>â€¢ 5 millions houses sold in US per year, ~20 images/house, ~153KB per image, ~1041x732 resolution</p></li><li><p>cropping, downsampling, compression<br>â€¢ Save storage cost, faster loading at training<br>â€¢ At ~320x224 resolution, 15 TB -&gt; 1.4TB<br>â€¢ ML is good at low-resolution images<br>â€¢ Be aware of lossy compression<br>â€¢ Medium (80%-90%) jpeg compression may lead to 1% acc drop in ImageNet</p></li><li><p>Image whiteningï¼ˆæ•°æ®ç™½åŒ– å¯ä»¥ç†è§£ä¸ºé™ç»´ï¼‰<br>â€¢make input less redundent<br>â€¢model converages faster</p></li></ul><p>æœºå™¨å­¦ä¹ å¯¹äºä½åˆ†è¾¨çš„å›¾ç‰‡å¯ä»¥åšçš„æŒºå¥½çš„ã€‚æ‰€ä»¥å‰ªè£ï¼Œä¸‹é‡‡æ ·æ˜¯å¯ä»¥æ¥å—çš„ã€‚<strong>ä½†æ˜¯è¦æ³¨æ„ä¸‹é‡‡æ ·ä¹‹åè¦ä½¿ç”¨è¾ƒé«˜è´¨é‡çš„å›¾ç‰‡æ ¼å¼ä¸è¦ç”¨jpegã€‚</strong></p><p>ç™½åŒ–çš„ç›®çš„æ˜¯å»é™¤è¾“å…¥æ•°æ®çš„å†—ä½™ä¿¡æ¯ã€‚å‡è®¾è®­ç»ƒæ•°æ®æ˜¯å›¾åƒï¼Œç”±äºå›¾åƒä¸­ç›¸é‚»åƒç´ ä¹‹é—´å…·æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§ï¼Œæ‰€ä»¥ç”¨äºè®­ç»ƒæ—¶è¾“å…¥æ˜¯å†—ä½™çš„ï¼›ç™½åŒ–çš„ç›®çš„å°±æ˜¯é™ä½è¾“å…¥çš„å†—ä½™æ€§ã€‚ç™½åŒ–åˆ†ä¸ºPCAç™½åŒ–ã€ZCAç™½åŒ–.<br>è¾“å…¥æ•°æ®é›†Xï¼Œç»è¿‡ç™½åŒ–å¤„ç†åï¼Œæ–°çš„æ•°æ®Xâ€™æ»¡è¶³ä¸¤ä¸ªæ€§è´¨ï¼š<br>(1)ç‰¹å¾ä¹‹é—´ç›¸å…³æ€§è¾ƒä½ï¼›<br>(2)æ‰€æœ‰ç‰¹å¾å…·æœ‰ç›¸åŒçš„æ–¹å·®ã€‚</p><h3 id="2-2-3-è§†é¢‘å˜æ¢">2.2.3 è§†é¢‘å˜æ¢</h3><ul><li>Input variability high<br>â€¢ Average video length: Movies ~2h, YouTube videos ~11min, Tiktok short videos ~15sec</li><li>Tractable ML problems with short video clips (&lt;10sec)<br>â€¢ Ideally each clip is a coherent event (e.g. a human action)<br>â€¢ Semantic segmentation is extremely hardâ€¦</li><li>Preprocessing to tradeoff storage, quality and loading speed</li><li>Common practice: decode a playable video clip, sample a sequence of  frames, compute spectrograms for audio<br>â€¢ Easy to load to model, increased storage space</li></ul><p>é‡‡æ ·å…³é”®çš„å¸§ï¼Œå›¾ç‰‡ä¸éœ€è¦æ‰€æœ‰çš„ä¿¡æ¯ï¼Œä½¿ç”¨gpuæ¥é‡‡æ ·ï¼Œéœ€è¦æƒè¡¡å­˜å‚¨å’Œè§£ç ã€‚</p><h3 id="2-2-3-æ–‡æœ¬å˜æ¢">2.2.3 æ–‡æœ¬å˜æ¢</h3><ul><li>Stemming and lemmatization: a word -&gt;  a common base form<br>â€¢ E.g. am, are, is   -&gt; be        car, cars, carâ€™s, carsâ€™  -&gt;  car<br>â€¢ Example: Topic modeling</li><li>Tokenization: text string  a list of tokens (smallest unit to ML algorithms)<br>â€¢ By word: text.split(â€™ â€˜)<br>â€¢ By char: text.split(â€˜â€™)<br>â€¢ By subwords:<br>â€¢ e.g. â€œa new gpu!â€   â€œaâ€, â€œnewâ€, â€œgpâ€, â€œ##uâ€, â€œ!â€<br>â€¢ Custom vocabulary learned from the text corpus  (Unigram, WordPiece)</li></ul><p>æ–¹æ³•æ˜¯å¿½ç•¥è¯­æ³•ï¼Œè¯æ ¹åŒ–ï¼Œè¯æºåŒ–ï¼Œå­è¯ã€‚</p><h3 id="2-2-4-æ€»ç»“">2.2.4 æ€»ç»“</h3><p>ä¸»è¦æ˜¯æ ¼å¼çš„è½¬æ¢ï¼Œéœ€è¦æƒè¡¡æ•°æ®å¤§å°ï¼Œæ•°æ®è´¨é‡ï¼Œå­˜å‚¨çš„æ–¹å¼ã€‚</p><ul><li>â€¢Transform data into formats preferred by ML algorithms<br>â€¢ Tabular: normalize real value features<br>â€¢ Images: cropping, downsampling, whitening<br>â€¢ Videos: clipping, sampling frames<br>â€¢ Text: stemming, lemmatization, tokenization</li><li>Need to balance storage, quality, and loading speed</li></ul><h2 id="2-3-ç‰¹å¾å·¥ç¨‹">2.3 ç‰¹å¾å·¥ç¨‹</h2><ul><li><p>Before deep learning (DL), feature engineering (FE) was critical to using ML models<br>â€¢ Traditional CV: detect corners / interest pointsâ€¦</p></li><li><p>DL train deep neural networks to automatically extract features<br>â€¢ Train CNN to replace feature extractor<br>â€¢ Features are more relevant to the final task<br>â€¢ Limitation: data hungry, computation heavy</p></li></ul><p><img src="https://picture.mulindya.com/pML2-9.png" alt=""></p><p>æ·±åº¦å­¦ä¹ å‡ºç°ä¹‹å‰ä¸»è¦æ˜¯ç ”ç©¶ç‰¹å¾å·¥ç¨‹æŠ½å–ç‰¹å¾ï¼›</p><p>æ·±åº¦å­¦ä¹ æ²¡æœ‰æ”¹å˜æµç¨‹ä½†æ˜¯ç°åœ¨å¹¶ä¸æ˜¯æ‰‹åŠ¨çš„è¿‡ç¨‹ï¼Œç°åœ¨æ˜¯è‡ªåŠ¨æŠ½å–ç‰¹å¾ã€‚</p><h3 id="2-3-1-Tabular-Data-Features">2.3.1 Tabular Data Features</h3><ul><li>Tabular data are in the form of a table,  feature columns of numeric / categorical / string type</li><li>Int/float: directly use or or bin to   unique int values</li><li>Categorical data: one-hot encoding ï¼ˆç‹¬çƒ­ç¼–ç ï¼‰<br>â€¢ Map rare categories into â€œUnknownâ€</li><li>Date-time: a feature list such as  æ—¥æœŸç‰¹å¾<br>â€¢ [year, month, day, day_of_year, week_of_year, day_of_week]</li><li>Feature combination: Cartesian product of two feature groups  ç‰¹å¾ç»„åˆ<br>â€¢ [cat, dog] x [male, female] -&gt;  [(cat, male), (cat, female), (dog, male), (dog, female)]</li></ul><h3 id="2-3-2-æ–‡æœ¬ç‰¹å¾">2.3.2 æ–‡æœ¬ç‰¹å¾</h3><p>å°†è¯æºçš„ç‹¬çƒ­ç¼–ç åŠ èµ·æ¥</p><p>è¯è¡¨ç¤ºä¸ºå‘é‡æ¥è¡¨ç¤ºè¯­ä¹‰ä¿¡æ¯</p><p>ä½¿ç”¨é¢„è®­ç»ƒå¥½çš„è¯­è¨€æ¨¡å‹æ¥ç‰¹å®šè¡¨ç¤ºï¼ˆé€šè¿‡è‡ªç›‘ç£å­¦ä¹ æ¥è®­ç»ƒï¼Œå¯ä»¥æŠ½å–æ—¶åºä¿¡æ¯ï¼‰</p><p><img src="https://picture.mulindya.com/pML2-10.png" alt=""></p><h3 id="2-3-3-å›¾åƒ-è§†é¢‘ç‰¹å¾">2.3.3 å›¾åƒ/è§†é¢‘ç‰¹å¾</h3><p>é¢„è®­ç»ƒçš„æ¨¡å‹æ¥æŠ½å–ç‰¹å¾</p><p><img src="https://picture.mulindya.com/pML2-11.png" alt=""></p><h3 id="2-3-4-æ€»ç»“">2.3.4 æ€»ç»“</h3><ul><li>Features are representations of raw data that are relevant to the target task</li><li>Feature engineering VS Feature learning<br>â€¢ The latter is preferred if available (images/videos/audio/text)<br>â€¢ Will cover more later in â€œtransfer learningâ€</li></ul>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PracticeMLç¬¬äºŒç« æˆ¿ä»·å®ä¾‹ç¬”è®°</title>
    <link href="/2022/01/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML2-1/"/>
    <url>/2022/01/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML2-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚</p></blockquote><blockquote><p>æœ¬ç¯‡ç¬”è®°ä¸»è¦æ˜¯å®ä¾‹åˆ†æï¼Œè¿˜æœ‰ä¸€äº›å°çŸ¥è¯†ç‚¹</p><ol><li>å­—ç¬¦ä¸²å‰åŠ fï¼Œrï¼Œbï¼Œu</li><li>| &amp; å’Œ or and</li></ol></blockquote><h1>æˆ¿ä»·æ•°æ®åˆ†æå®ä¾‹</h1><p>ä½¿ç”¨<code>numpyï¼Œpandasï¼Œmatplotlibï¼Œseaborn</code>æ¥å¤„ç†å’Œå¯è§†åŒ–ã€‚</p><h2 id="å®ä¾‹ï¼ˆæ³¢å£«é¡¿æˆ¿ä»·ï¼‰">å®ä¾‹ï¼ˆæ³¢å£«é¡¿æˆ¿ä»·ï¼‰</h2><h3 id="è¯»å–">è¯»å–</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># !pip install seaborn pandas matplotlib numpy</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><br><span class="hljs-comment">#ç»˜å›¾ç”»è´¨æ›´å¥½</span><br><span class="hljs-keyword">from</span> IPython <span class="hljs-keyword">import</span> display<br>display.set_matplotlib_formats(<span class="hljs-string">'svg'</span>)<br><span class="hljs-comment"># Alternative to set svg for newer versions</span><br><span class="hljs-comment"># import matplotlib_inline</span><br><span class="hljs-comment"># matplotlib_inline.backend_inline.set_matplotlib_formats('svg')</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">data = pd.read_csv(<span class="hljs-string">'house_sales.zip'</span>) <span class="hljs-comment">#å¯ä»¥ç›´æ¥ç”¨csvæ ¼å¼è¯»å–zipæ–‡ä»¶</span><br><span class="hljs-comment">#å¯¹äºæ–‡æœ¬ä¼šå¿«å¾ˆå¤š</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æ•°æ®æ¸…ç†">æ•°æ®æ¸…ç†</h3><p>We drop columns that at least 30% values are null to simplify our EDA.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#ç¼ºå¤±æ•°æ®</span><br>null_sum = data.isnull().<span class="hljs-built_in">sum</span>() <span class="hljs-comment">#ç¼ºå¤±æ•°æ®ä¸ªæ•° ä¸ºç©ºçš„ä¸ªæ•° æ˜¯ä¸€ä¸ªé”®å€¼å¯¹</span><br>data.columns[null_sum &lt; <span class="hljs-built_in">len</span>(data) * <span class="hljs-number">0.3</span>]  <span class="hljs-comment"># columns will keep #é”®å€¼å¯¹ è¿”å›å€¼æ»¡è¶³æ¡ä»¶çš„é”®</span><br></code></pre></td></tr></tbody></table></figure><blockquote><figure class="highlight sml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Index</span>([<span class="hljs-symbol">'Id'</span>, <span class="hljs-symbol">'Address'</span>, <span class="hljs-symbol">'Sold</span> <span class="hljs-type">Price'</span>, <span class="hljs-symbol">'Sold</span> <span class="hljs-type">On'</span>, <span class="hljs-symbol">'Summary'</span>, <span class="hljs-symbol">'Type'</span>,<br>       <span class="hljs-symbol">'Year</span> built', <span class="hljs-symbol">'Heating'</span>, <span class="hljs-symbol">'Cooling'</span>, <span class="hljs-symbol">'Parking'</span>, <span class="hljs-symbol">'Bedrooms'</span>, <span class="hljs-symbol">'Bathrooms'</span>,<br>       <span class="hljs-symbol">'Total</span> interior livable area', <span class="hljs-symbol">'Total</span> spaces', <span class="hljs-symbol">'Garage</span> spaces',<br>       <span class="hljs-symbol">'Home</span> type', <span class="hljs-symbol">'Region'</span>, <span class="hljs-symbol">'Elementary</span> <span class="hljs-type">School'</span>, <span class="hljs-symbol">'Elementary</span> <span class="hljs-type">School</span> <span class="hljs-type">Score'</span>,<br>       <span class="hljs-symbol">'Elementary</span> <span class="hljs-type">School</span> <span class="hljs-type">Distance'</span>, <span class="hljs-symbol">'High</span> <span class="hljs-type">School'</span>, <span class="hljs-symbol">'High</span> <span class="hljs-type">School</span> <span class="hljs-type">Score'</span>,<br>       <span class="hljs-symbol">'High</span> <span class="hljs-type">School</span> <span class="hljs-type">Distance'</span>, <span class="hljs-symbol">'Heating</span> features', <span class="hljs-symbol">'Parking</span> features',<br>       <span class="hljs-symbol">'Lot</span> size', <span class="hljs-symbol">'Parcel</span> number', <span class="hljs-symbol">'Tax</span> assessed value', <span class="hljs-symbol">'Annual</span> tax amount',<br>       <span class="hljs-symbol">'Listed</span> <span class="hljs-type">On'</span>, <span class="hljs-symbol">'Listed</span> <span class="hljs-type">Price'</span>, <span class="hljs-symbol">'Zip'</span>],<br>      dtype=<span class="hljs-symbol">'object'</span>)<br></code></pre></td></tr></tbody></table></figure></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.drop(columns=data.columns[null_sum &gt; <span class="hljs-built_in">len</span>(data) * <span class="hljs-number">0.3</span>], inplace=<span class="hljs-literal">True</span>) <span class="hljs-comment">#inplaceç›´æ¥ä¿®æ”¹</span><br></code></pre></td></tr></tbody></table></figure><h4 id="æ ¸å¯¹æ•°æ®ç±»å‹">æ ¸å¯¹æ•°æ®ç±»å‹</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data.dtypes <span class="hljs-comment">#æ ¸å¯¹æ•°æ®ç±»å‹</span><br></code></pre></td></tr></tbody></table></figure><blockquote><figure class="highlight nim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-type">Id</span>                               <span class="hljs-built_in">int64</span><br><span class="hljs-type">Address</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Sold</span> <span class="hljs-type">Price</span>                      <span class="hljs-keyword">object</span><br><span class="hljs-type">Sold</span> <span class="hljs-type">On</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Summary</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Type</span>                            <span class="hljs-keyword">object</span><br><span class="hljs-type">Year</span> built                      <span class="hljs-keyword">object</span><br><span class="hljs-type">Heating</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Cooling</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Parking</span>                         <span class="hljs-keyword">object</span><br><span class="hljs-type">Bedrooms</span>                        <span class="hljs-keyword">object</span><br><span class="hljs-type">Bathrooms</span>                      <span class="hljs-built_in">float64</span><br><span class="hljs-type">Total</span> interior livable area     <span class="hljs-keyword">object</span><br><span class="hljs-type">Total</span> spaces                   <span class="hljs-built_in">float64</span><br><span class="hljs-type">Garage</span> spaces                  <span class="hljs-built_in">float64</span><br><span class="hljs-type">Home</span> <span class="hljs-keyword">type</span>                       <span class="hljs-keyword">object</span><br><span class="hljs-type">Region</span>                          <span class="hljs-keyword">object</span><br><span class="hljs-type">Elementary</span> <span class="hljs-type">School</span>               <span class="hljs-keyword">object</span><br><span class="hljs-type">Elementary</span> <span class="hljs-type">School</span> <span class="hljs-type">Score</span>        <span class="hljs-built_in">float64</span><br><span class="hljs-type">Elementary</span> <span class="hljs-type">School</span> <span class="hljs-type">Distance</span>     <span class="hljs-built_in">float64</span><br><span class="hljs-type">High</span> <span class="hljs-type">School</span>                     <span class="hljs-keyword">object</span><br><span class="hljs-type">High</span> <span class="hljs-type">School</span> <span class="hljs-type">Score</span>              <span class="hljs-built_in">float64</span><br><span class="hljs-type">High</span> <span class="hljs-type">School</span> <span class="hljs-type">Distance</span>           <span class="hljs-built_in">float64</span><br><span class="hljs-type">Heating</span> features                <span class="hljs-keyword">object</span><br><span class="hljs-type">Parking</span> features                <span class="hljs-keyword">object</span><br><span class="hljs-type">Lot</span> size                        <span class="hljs-keyword">object</span><br><span class="hljs-type">Parcel</span> number                   <span class="hljs-keyword">object</span><br><span class="hljs-type">Tax</span> assessed value              <span class="hljs-keyword">object</span><br><span class="hljs-type">Annual</span> tax amount               <span class="hljs-keyword">object</span><br><span class="hljs-type">Listed</span> <span class="hljs-type">On</span>                       <span class="hljs-keyword">object</span><br><span class="hljs-type">Listed</span> <span class="hljs-type">Price</span>                    <span class="hljs-keyword">object</span><br><span class="hljs-type">Zip</span>                              <span class="hljs-built_in">int64</span><br>dtype: <span class="hljs-keyword">object</span><br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="ä¿®æ”¹æ•°æ®ç±»å‹">ä¿®æ”¹æ•°æ®ç±»å‹</h4><p>é‡‘é¢ä¸ºobjectè¿™æ˜¯ä¸åˆå¸¸ç†çš„</p><p>Convert currency from string format such as <code>$1,000,000</code> to float.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">currency = [<span class="hljs-string">'Sold Price'</span>, <span class="hljs-string">'Listed Price'</span>, <span class="hljs-string">'Tax assessed value'</span>, <span class="hljs-string">'Annual tax amount'</span>]<br><span class="hljs-comment"># r'[$,-]' rçš„ä½œç”¨æ˜¯ï¼šå»é™¤è½¬ä¹‰å­—ç¬¦ï¼Œreplaceå¯ä»¥ç”¨æ­£åˆ™å½¢å¼</span><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> currency:<br>    data[c] = data[c].replace(<br>        <span class="hljs-string">r'[$,-]'</span>, <span class="hljs-string">''</span>, regex=<span class="hljs-literal">True</span>).replace( <br>        <span class="hljs-string">r'^\s*$'</span>, np.nan, regex=<span class="hljs-literal">True</span>).astype(<span class="hljs-built_in">float</span>)<br></code></pre></td></tr></tbody></table></figure><p>Convert currency from string format such as <code>$1,000,000</code> to float.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">areas = [<span class="hljs-string">'Total interior livable area'</span>, <span class="hljs-string">'Lot size'</span>]<br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> areas:<br>    acres = data[c].<span class="hljs-built_in">str</span>.contains(<span class="hljs-string">'Acres'</span>) == <span class="hljs-literal">True</span><br>    col = data[c].replace(<span class="hljs-string">r'\b sqft\b|\b Acres\b|\b,\b'</span>,<span class="hljs-string">''</span>, regex=<span class="hljs-literal">True</span>).astype(<span class="hljs-built_in">float</span>)<br>    col[acres] *= <span class="hljs-number">43560</span><br>    data[c] = col<br></code></pre></td></tr></tbody></table></figure><blockquote><p>tips ğŸ˜‰</p><p>å­—ç¬¦ä¸²å‰åŠ fï¼Œrï¼Œbï¼Œu</p><p>åŠ fä½œç”¨ï¼šç›¸å½“äº format() å‡½æ•°fâ€œ{å˜é‡å}â€</p><p>åŠ rçš„ä½œç”¨æ˜¯ï¼šå»é™¤è½¬ä¹‰å­—ç¬¦ï¼› åœºæ™¯ï¼šæƒ³å¤åˆ¶æŸä¸ªæ–‡ä»¶å¤¹çš„ç›®å½•ã€‚</p><p>åŠ bçš„ä½œç”¨æ˜¯ï¼šåé¢å­—ç¬¦ä¸²æ˜¯bytes ç±»å‹bytesï¼›åº”ç”¨åœºæ™¯ï¼šåƒå›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰æ–‡ä»¶çš„è¯»å†™å°±æ˜¯ç”¨bytesæ•°æ®ã€‚</p><p>åŠ uçš„ä½œç”¨ï¼šåé¢å­—ç¬¦ä¸²ä»¥ Unicode æ ¼å¼ è¿›è¡Œç¼–ç ï¼›å®é™…åœºæ™¯ï¼šä¸€èˆ¬ç”¨åœ¨ä¸­æ–‡å­—ç¬¦ä¸²å‰é¢ï¼Œé˜²æ­¢å› ä¸ºæºç å‚¨å­˜æ ¼å¼é—®é¢˜ï¼Œå¯¼è‡´å†æ¬¡ä½¿ç”¨æ—¶å‡ºç°ä¹±ç ã€‚</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#Now we can check values of the numerical columns. You could see the min and max values for several columns do not make sense.</span><br>data.describe()<br></code></pre></td></tr></tbody></table></figure><p>å¯ä»¥æŸ¥çœ‹ä¸€äº›ä¸å¤ªæ­£å¸¸çš„å­—æ®µã€‚ã€‚ã€‚</p><h4 id="æ•°æ®æ¸…ç†æ•°å€¼">æ•°æ®æ¸…ç†æ•°å€¼</h4><p>We filter out houses whose living areas are too small or too hard to simplify the visualization later.</p><blockquote><p>| &amp; å’Œ or and</p><p>DataFrameä¸­åˆ‡ç‰‡éœ€è¦æ±‚å¾—æ»¡è¶³å¤šä¸ªé€»è¾‘æ¡ä»¶çš„æ•°æ®æ—¶ï¼Œè¦ä½¿ç”¨&amp; å’Œ|ï¼Œåœ¨æŸäº›æ¡ä»¶ä¸‹ç”¨and/ orä¼šæŠ¥é”™</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼š</p><ul><li><p><strong>å¦‚æœaï¼Œbæ˜¯æ•°å€¼å˜é‡</strong>ï¼Œ åˆ™&amp;ï¼Œ |è¡¨ç¤º<a href="https://so.csdn.net/so/search?q=%E4%BD%8D%E8%BF%90%E7%AE%97">ä½è¿ç®—</a>ï¼Œ andï¼Œoråˆ™ä¾æ®æ˜¯å¦é0æ¥å†³å®šè¾“å‡º</p></li><li><p><strong>å¦‚ä½•a, bæ˜¯é€»è¾‘å˜é‡</strong>ï¼Œ åˆ™ä¸¤ç±»çš„ç”¨æ³•åŸºæœ¬ä¸€è‡´</p></li></ul></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">abnormal = (data[areas[<span class="hljs-number">1</span>]] &lt; <span class="hljs-number">10</span>) | (data[areas[<span class="hljs-number">1</span>]] &gt; <span class="hljs-number">1e4</span>) <span class="hljs-comment">#ä¸æ­£å¸¸çš„æ•°æ®</span><br>data = data[~abnormal] <span class="hljs-comment">#ä½¿ç”¨~æ¥æ±‚å</span><br><span class="hljs-built_in">sum</span>(abnormal)<br></code></pre></td></tr></tbody></table></figure><h4 id="æŸ¥çœ‹ä»·æ ¼ç±»åˆ«å›¾åƒ">æŸ¥çœ‹ä»·æ ¼ç±»åˆ«å›¾åƒ</h4><p>Letâ€™s check the histogram of the <code>'Sold Price'</code>, which is the target we want to predict.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">ax = sns.histplot(np.log10(data[<span class="hljs-string">'Sold Price'</span>])) <span class="hljs-comment">#ç›´æ–¹å›¾ç»˜åˆ¶ å–log10 è¿™æ ·åˆ†å¸ƒæ›´åŠ å‡åŒ€</span><br>ax.set_xlim([<span class="hljs-number">3</span>, <span class="hljs-number">8</span>])<br>ax.set_xticks(<span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<br>ax.set_xticklabels([<span class="hljs-string">'%.0e'</span>%a <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-number">10</span>**ax.get_xticks()]);<br><span class="hljs-comment">#å‰é¢çš„å¯èƒ½æœ‰ç§Ÿæˆ¿å™ªéŸ³</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/pML2-1.png" alt=""></p><p>A house has different types. Here are the top types:</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">data[<span class="hljs-string">'Type'</span>].value_counts()[<span class="hljs-number">0</span>:<span class="hljs-number">20</span>] <span class="hljs-comment">#value_countså¯¹åº”å€¼çš„ä¸ªæ•°</span><br></code></pre></td></tr></tbody></table></figure><blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">SingleFamily</span>            <span class="hljs-number">74318</span><br><span class="hljs-string">Condo</span>                   <span class="hljs-number">18749</span><br><span class="hljs-string">MultiFamily</span>              <span class="hljs-number">6586</span><br><span class="hljs-string">VacantLand</span>               <span class="hljs-number">6199</span><br><span class="hljs-string">Townhouse</span>                <span class="hljs-number">5846</span><br><span class="hljs-string">Unknown</span>                  <span class="hljs-number">5390</span><br><span class="hljs-string">MobileManufactured</span>       <span class="hljs-number">2588</span><br><span class="hljs-string">Apartment</span>                <span class="hljs-number">1416</span><br><span class="hljs-string">Cooperative</span>               <span class="hljs-number">161</span><br><span class="hljs-string">Residential</span> <span class="hljs-string">Lot</span>            <span class="hljs-number">75</span><br><span class="hljs-string">Single</span> <span class="hljs-string">Family</span>              <span class="hljs-number">69</span><br><span class="hljs-string">Single</span> <span class="hljs-string">Family</span> <span class="hljs-string">Lot</span>          <span class="hljs-number">56</span><br><span class="hljs-string">Acreage</span>                    <span class="hljs-number">48</span><br><span class="hljs-number">2</span> <span class="hljs-string">Story</span>                    <span class="hljs-number">39</span><br><span class="hljs-number">3</span> <span class="hljs-string">Story</span>                    <span class="hljs-number">25</span><br><span class="hljs-string">Hi-Rise</span> <span class="hljs-string">(9+),</span> <span class="hljs-string">Luxury</span>       <span class="hljs-number">21</span><br><span class="hljs-string">RESIDENTIAL</span>                <span class="hljs-number">19</span><br><span class="hljs-string">Condominium</span>                <span class="hljs-number">19</span><br><span class="hljs-string">Duplex</span>                     <span class="hljs-number">19</span><br><span class="hljs-string">Mid-Rise</span> <span class="hljs-string">(4-8)</span>             <span class="hljs-number">17</span><br><span class="hljs-attr">Name:</span> <span class="hljs-string">Type,</span> <span class="hljs-attr">dtype:</span> <span class="hljs-string">int64</span><br><span class="hljs-string">ä¸‹é¢çš„ä¸€äº›å‡ä¸ºå™ªéŸ³</span><br></code></pre></td></tr></tbody></table></figure></blockquote><p>Price density for different house types.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">types = data[<span class="hljs-string">'Type'</span>].isin([<span class="hljs-string">'SingleFamily'</span>, <span class="hljs-string">'Condo'</span>, <span class="hljs-string">'MultiFamily'</span>, <span class="hljs-string">'Townhouse'</span>])<br>sns.displot(pd.DataFrame({<span class="hljs-string">'Sold Price'</span>:np.log10(data[types][<span class="hljs-string">'Sold Price'</span>]),<br>                          <span class="hljs-string">'Type'</span>:data[types][<span class="hljs-string">'Type'</span>]}),<br>            x=<span class="hljs-string">'Sold Price'</span>, hue=<span class="hljs-string">'Type'</span>, kind=<span class="hljs-string">'kde'</span>); <span class="hljs-comment">#kdeæ˜¯å¯†åº¦åˆ†å¸ƒï¼ŒhueæŒ‡å®šçº¿é¢œè‰²æŒ‰ç…§Typeåˆ†ç±»</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/pML2-2.png" alt=""></p><p>Another important measurement is the sale price per living sqft. Letâ€™s check the differences between different house types.</p><p><code>boxplot</code>ä¸­é—´æ¨ªçº¿è¡¨ç¤ºå‡å€¼ï¼Œç®±å‹å›¾ä¸Šå››åˆ†å’Œä¸‹å››åˆ†ï¼Œè¿˜æœ‰maxå’Œminå€¼ï¼›é€‚åˆç”¨äºè¡¨ç¤ºåˆ†å¸ƒçš„å¯¹æ¯”</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">data[<span class="hljs-string">'Price per living sqft'</span>] = data[<span class="hljs-string">'Sold Price'</span>] / data[<span class="hljs-string">'Total interior livable area'</span>] <span class="hljs-comment">#æ¯å¹³ç±³ä»·æ ¼</span><br>ax = sns.boxplot(x=<span class="hljs-string">'Type'</span>, y=<span class="hljs-string">'Price per living sqft'</span>, data=data[types], fliersize=<span class="hljs-number">0</span>)<br>ax.set_ylim([<span class="hljs-number">0</span>, <span class="hljs-number">2000</span>]);<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/pML2-3.png" alt=""></p><p>We know the location affect the price. Letâ€™s check the price for the top 20 zip codes.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">d = data[data[<span class="hljs-string">'Zip'</span>].isin(data[<span class="hljs-string">'Zip'</span>].value_counts()[:<span class="hljs-number">20</span>].keys())]<br>ax = sns.boxplot(x=<span class="hljs-string">'Zip'</span>, y=<span class="hljs-string">'Price per living sqft'</span>, data=d, fliersize=<span class="hljs-number">0</span>)<br>ax.set_ylim([<span class="hljs-number">0</span>, <span class="hljs-number">2000</span>])<br>ax.set_xticklabels(ax.get_xticklabels(), rotation=<span class="hljs-number">90</span>);<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/pML2-4.png" alt=""></p><h3 id="æŸ¥çœ‹åæ–¹å·®">æŸ¥çœ‹åæ–¹å·®</h3><p>Last, we visualize the correlation matrix of several columns.</p><p><code>æŒ‘é€‰æŸäº›åˆ—åˆ†å¸ƒè®¡ç®—è®¡ç®—åæ–¹å·®ä½¿ç”¨corr()</code>å¯ä»¥æŸ¥çœ‹å…³è”åº¦</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">_, ax = plt.subplots(figsize=(<span class="hljs-number">4</span>,<span class="hljs-number">4</span>))<br>columns = [<span class="hljs-string">'Sold Price'</span>, <span class="hljs-string">'Listed Price'</span>, <span class="hljs-string">'Annual tax amount'</span>, <span class="hljs-string">'Price per living sqft'</span>]<br>sns.heatmap(data[columns].corr(),annot=<span class="hljs-literal">True</span>,cmap=<span class="hljs-string">'RdYlGn'</span>, ax=ax);<br><span class="hljs-comment">#ä½¿ç”¨çƒ­åŠ›å›¾ç»˜åˆ¶</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/pML2-5.png" alt=""></p><h2 id="Summary">Summary</h2><p>This notebook demonstrates the basic technologies for EDA, including</p><ul><li>Understanding column data types, values, and distributions</li><li>Understanding the interactions between columns</li></ul><p>We only explored a small aspect of the data. You are welcome to dive deep into more details.</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>praticalMLç¬¬ä¸€ç« ç¬”è®°</title>
    <link href="/2021/12/30/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML1/"/>
    <url>/2021/12/30/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E7%94%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/PracticeML1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–¯å¦ç¦2021ç§‹å­£çš„å®ç”¨æœºå™¨å­¦ä¹ ä¸Šçº¿å•¦~ ğŸ˜‰ è·Ÿç€æ²ç¥å¤ä¹ æœºå™¨å­¦ä¹ å†²å†²å†²ï¼ è®°å½•ä¸€ä¸‹ç¬”è®°å’Œé‡ç‚¹ï¼Œä¸ä¸€å®šå¾ˆå…¨å“¦~ï¼Œåªæ˜¯è®°å½•è‡ªæˆ‘æ„Ÿè§‰çš„é‡ç‚¹ã€‚</p></blockquote><h1>ç¬¬ä¸€ç« </h1><h2 id="1-1-è¯¾ç¨‹ä»‹ç»">1.1 è¯¾ç¨‹ä»‹ç»</h2><p>ä»‹ç»æœºå™¨å­¦ä¹ balabala å·¥ä¸šç•Œçš„æœºå™¨å­¦ä¹ å“¦</p><h3 id="Role">Role</h3><p>SDE , é¢†åŸŸä¸“å®¶ -&gt; æ•°æ®ç§‘å­¦å®¶ æœºå™¨å­¦ä¹ ä¸“å®¶</p><h3 id="Skill">Skill</h3><p>æ•°æ®ç§‘å­¦å®¶éœ€è¦çš„æŠ€èƒ½ï¼š</p><ul><li><strong>æ•°æ®</strong>ï¼š æ”¶é›†å¤„ç†æ•°æ®ï¼Œç‹¬ç«‹åŒåˆ†å¸ƒ</li><li><strong>è®­ç»ƒ</strong>ï¼š æ¨¡å‹èåˆï¼Œå¾®è°ƒï¼Œè¿ç§»å­¦ä¹ ï¼Œå¤šæ¨¡æ€</li><li><strong>éƒ¨ç½²</strong>ï¼š è’¸é¦ï¼Œæ¨¡å‹æ€§èƒ½ä¼˜åŒ–</li><li><strong>ç›‘æ§</strong> ï¼šæ¨¡å‹å…¬å¹³æ€§ï¼Œå¯è§£é‡Šæ€§</li></ul><h2 id="1-2-æ•°æ®è·å–">1.2 æ•°æ®è·å–</h2><p>ç¬¬ä¸€æ­¥æ˜¯æ‰¾æ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µæ•°æ®ä¸å¤Ÿï¼Œé—®ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><p>æ˜¯å¦èƒ½åˆ°ä¸åŒçš„æ•°æ®æºæ¥èåˆ</p></li><li><p>æ˜¯å¦å¯ä»¥æ•°æ®ç”Ÿæˆ</p></li></ul><h3 id="Discover-what-data-is-available">Discover what data is available</h3><ol><li>åˆ¤æ–­å…¬ç”¨æ•°æ®é›†</li><li>éå¸¸å¤§çš„æ•°æ®é›†</li><li>é‡‡é›†æ–°çš„æ•°æ®</li></ol><h3 id="Source">Source</h3><ul><li>mnist</li><li>imageNet</li><li>AudioSetï¼šyoutube sound</li><li>Kineticsï¼šyoutube video</li><li>KIITIï¼štraffic senarios è‡ªåŠ¨é©¾é©¶</li><li>Amazon Rewiewï¼šç”¨æˆ·è¯„è®º</li><li>SQuADï¼šç»´åŸºç™¾ç§‘çš„é—®ç­”</li><li>LibriSpeechï¼šæœ‰å£°è¯»ç‰© æ–‡å­—&lt;-&gt;è¯­éŸ³</li><li>æ›´å¤šæ•°æ®è·å–ï¼š<a href="https://en.wikipedia.org/wiki/List_of_datasets_for_machine-learning_research">https://en.wikipedia.org/wiki/List_of_datasets_for_machine-learning_research</a></li></ul><h3 id="Where-to-Find-Datasets">Where to Find Datasets</h3><p>â€¢ <a href="https://paperswithcode.com/datasets">Paperswithcodes Datasets</a>: academic datasets with leaderboard<br>â€¢ <a href="https://www.kaggle.com/datasets">Kaggle Datasets</a>: ML datasets uploaded by data scientists<br>â€¢ <a href="https://datasetsearch.research.google.com/">Google Dataset search</a>: search datasets in the Web<br>â€¢ Various toolkits datasets: <a href="https://www.tensorflow.org/datasets">tensorflow</a>, <a href="https://huggingface.co/docs/datasets/">huggingface</a>(ä¸“æ³¨äºæ–‡æœ¬transformerçš„æ•°æ®é›†)<br>â€¢ Various conference/company ML competitions<br>â€¢ <a href="https://registry.opendata.aws/">Open Data on AWS</a>: 100+ large-scale raw data<br>â€¢ Data lakes in your own organization</p><h3 id="æ•°æ®é›†æ¯”è¾ƒ">æ•°æ®é›†æ¯”è¾ƒ</h3><table><thead><tr><th style="text-align:center">æ•°æ®é›†ç±»åˆ«</th><th style="text-align:center">ä¼˜ç‚¹</th><th style="text-align:center">ç¼ºç‚¹</th></tr></thead><tbody><tr><td style="text-align:center">å­¦æœ¯</td><td style="text-align:center">å¹²å‡€ï¼Œéš¾åº¦é€‚ä¸­</td><td style="text-align:center">é€‰æ‹©é¢å°ï¼Œå°æ•°æ®é›†</td></tr><tr><td style="text-align:center">ç«èµ›</td><td style="text-align:center">æ¥è¿‘åº”ç”¨</td><td style="text-align:center">åå‘äºç®€å•ï¼Œä¸“æ³¨äºçƒ­é—¨ä¸šåŠ¡</td></tr><tr><td style="text-align:center">åŸå§‹</td><td style="text-align:center">åº”ç”¨çµæ´»</td><td style="text-align:center">éœ€è¦å¾ˆå¤šç²¾åŠ›é¢„å¤„ç†</td></tr></tbody></table><h3 id="æ•°æ®èåˆ">æ•°æ®èåˆ</h3><ul><li>Combine data from multiple sources into a coherent dataset</li><li>Product data is often stored in multiple tables<br>â€¢ E.g. a table for house information, a table for sales, a table for listing agents</li><li>Join tables by keys, which are often entity IDs</li><li>Key issues: identify IDs, missing rows, redundant columns, value conflicts</li></ul><h3 id="æ•°æ®ç”Ÿæˆ">æ•°æ®ç”Ÿæˆ</h3><ul><li>Use GANs</li><li>æ•°æ®å¢å¼º<ul><li>image augmentation</li><li>Back Translationï¼ˆä¸­æ–‡-è‹±æ–‡-ä¸­æ–‡ï¼‰</li></ul></li></ul><h2 id="1-3-ç½‘é¡µæ•°æ®æŠ“å–">1.3 ç½‘é¡µæ•°æ®æŠ“å–</h2><h3 id="Web-Scraping">Web Scraping</h3><p>â€¢The goal is to extract data from website<br>â€¢ Noisy, weak labels, can be spammy<br>â€¢ Available at scale<br>â€¢ E.g. price comparison/tracking website<br>â€¢ Many ML datasets are obtained by web scraping<br>â€¢ E.g. ImageNet, Kinetics<br>â€¢ Web crawling VS scrapping<br>â€¢ Crawling: indexing whole pages on Internet  çˆ¬å–æ‰€æœ‰ä¿¡æ¯<br>â€¢ Scraping: scraping particular data from web pages of a website ç½‘é¡µæ•°æ®æå– ï¼›ç‰¹å®šçš„ç½‘ç«™ ï¼›ç‰¹å®šæ•°æ®</p><h3 id="Web-Scraping-tools">Web Scraping tools</h3><ul><li><p>â€œcurlâ€ often doesnâ€™t work<br>â€¢ Website owners use various ways to stop bots</p></li><li><p>Use headless browser: a web browser without a GUI</p><p>pythonä¸­å¯ä»¥ä½¿ç”¨seleniumä¸­çš„webdriveræ¥æ¨¡æ‹Ÿæœç´¢ï¼Œå–æ¶ˆå›¾å½¢åŒ–ç•Œé¢ä½¿ç”¨å‘½ä»¤è¡Œ:happy:</p>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br>chrome_options = webdriver.Chromeoptions()<br>chrome_options.headless = <span class="hljs-literal">True</span><br>chrome = webdriver.Chrome(chrome_options = chrome_options) <br><br>page = chrome.get(url)<br></code></pre></td></tr></tbody></table></figure></li><li><p>You need a lot of new IPs, easy to get through public clouds<br>â€¢ In all IPv4 IPs, AWS owns 1.75%, Azure 0.55%, GCP 0.25%</p></li></ul><p>æœ€åä¸€ç‚¹ï¼Œè¦æ³¨æ„ç‰ˆæƒé—®é¢˜å“¦~</p><h2 id="1-4-æ•°æ®æ ‡æ³¨">1.4 æ•°æ®æ ‡æ³¨</h2><h3 id="æƒ…å†µæè¿°">æƒ…å†µæè¿°</h3><p><img src="https://picture.mulindya.com/pML1.4-1.png" alt=""></p><h3 id="ä¸‰ç§æ–¹æ¡ˆ">ä¸‰ç§æ–¹æ¡ˆ</h3><h3 id="1-åŠç›‘ç£å­¦ä¹ -Semi-supervised-learning-SSL">1. åŠç›‘ç£å­¦ä¹ (Semi-supervised learning SSL)</h3><p>å°éƒ¨åˆ†æ•°æ®æ ‡æ³¨äº†ï¼Œè¿˜æœ‰å¤§éƒ¨åˆ†æ²¡æœ‰æ ‡æ³¨</p><ul><li>Focus on the scenario where there is a small amount of labeled data, along with large amount of unlabeled data</li><li>Make assumptions on data distribution to use unlabeled data ä¸¤è€…åˆ†å¸ƒå‡è®¾<br>â€¢ <strong>Continuity assumption</strong>ï¼ˆè¿ç»­æ€§å‡è®¾ï¼‰: examples with similar <strong>features</strong> are more likely to have the same <strong>label</strong><br>â€¢ <strong>Cluster assumption</strong>ï¼ˆèšç±»å‡è®¾ï¼‰: data have <strong>inherent cluster structure</strong>, examples in the same cluster tend to have the same label<br>â€¢ <strong>Manifold assumption</strong>ï¼ˆæµå‹å‡è®¾ï¼‰: data lie on a manifold of <strong>much lower dimension</strong> than the input space é™ç»´</li></ul><h4 id="å…¸å‹ç®—æ³•">å…¸å‹ç®—æ³•</h4><h5 id="è‡ªå­¦ä¹ ï¼ˆself-trainingï¼‰">è‡ªå­¦ä¹ ï¼ˆself-trainingï¼‰</h5><p><img src="https://picture.mulindya.com/pML1.4-2.png" alt=""></p><p>ç”¨ç°æœ‰æ ‡å·çš„æ ·æœ¬è®­ç»ƒæ¨¡å‹æ¥é¢„æµ‹æœªæ ‡å·çš„æ ·æœ¬ï¼Œå°†æ‰€å¾—æ ‡å·è¿›è¡Œç­›é€‰ï¼Œé€‰æ‹©ç½®ä¿¡åº¦é«˜çš„æ ·æœ¬åˆå¹¶ç»§ç»­è®­ç»ƒï¼Œç›´åˆ°ç­›æ‰çš„å‰©ä½™æ ·æœ¬è·å¾—è¾ƒé«˜çš„ç½®ä¿¡åº¦æˆ–è€…æŸä¸ªé˜ˆå€¼èŒƒå›´ã€‚è¿™ä¸ªæ¨¡å‹å¯ä»¥ä¸è®¡æˆæœ¬åŒæ—¶æ¨¡å‹èåˆã€‚</p><h3 id="2-label-through-crowdsourcing-ä¼—åŒ…">2. label through crowdsourcing ä¼—åŒ…</h3><p>ç®€å•æ¥è¯´å°±æ˜¯èŠ±é’±æ‰¾äººæ ‡æ³¨ã€‚ğŸ˜•</p><h4 id="å…¸å‹ç®—æ³•-2">å…¸å‹ç®—æ³•</h4><h5 id="ä¸»åŠ¨å­¦ä¹ -active-learning">ä¸»åŠ¨å­¦ä¹  active learning</h5><ul><li><p>Focus on same scenario as SSL but with human in the loop<br>â€¢ Self training: Model helps propagate labels to unlabeled data<br>â€¢ Active learning: Model select the most â€œinterestingâ€ data for labelers</p></li><li><p><strong>Uncertainty sampling</strong><br>â€¢ Select examples whose predictions are most uncertain<br>â€¢ The highest class prediction score is close to random ( 1/n)</p></li></ul><p>æ¨¡å‹é€‰æ‹©ç½®ä¿¡åº¦åå‘äºéšæœºçš„æ ·æœ¬è®©äººæ¥åˆ¤æ–­ã€‚ç„¶åæ”¾è¿›æ¨¡å‹åŒºè®­ç»ƒå†é¢„æµ‹å†åˆ¤æ–­â€˜éš¾â€™çš„æ•°æ®ã€‚</p><ul><li><strong>Query-by-committee</strong><br>â€¢ Trains multiple models and select samples that models disagree with 1/n</li></ul><p>å¤šä¸ªæ¨¡å‹æŠ•ç¥¨æ¥ç¡®å®šå“ªäº›æ•°æ®æ¯”è¾ƒâ€˜éš¾â€™</p><h3 id="3-Active-Learning-Self-training">3 Active Learning + Self-training</h3><p>æ··åˆä½¿ç”¨</p><p><img src="https://picture.mulindya.com/pML1.4-3.png" alt=""></p><h3 id="è´¨é‡æ§åˆ¶">è´¨é‡æ§åˆ¶</h3><p>å¯èƒ½å‡ºç°è¯¯æ ‡æˆ–è€…å‡ºç°æ ‡æ³¨å¹¶ä¸ç²¾ç¡®çš„æƒ…å†µ</p><h4 id="Weak-Supervision-å¼±ç›‘ç£å­¦ä¹ ">Weak Supervision å¼±ç›‘ç£å­¦ä¹ </h4><ul><li><p>Semi-automatically generate labels<br>â€¢ Less accurate than manual ones, but good enough for training</p></li><li><p><strong>Data programming</strong>:</p></li></ul><p>æ€»ç»“è§„å¾‹è§„åˆ™ç¼–ç¨‹<br>â€¢ Domain specific heuristics to assign labels<br>â€¢ Keyword search, pattern matching, third-party models<br>â€¢ E.g. rules to check if YouTube comments are spam or ham</p><blockquote><p>ä»€ä¹ˆæ˜¯å¼±ç›‘ç£å­¦ä¹ å‘¢ï¼Ÿå¼±ç›‘ç£å­¦ä¹ å¯ä»¥åˆ†ä¸ºä¸‰ç§å…¸å‹çš„ç±»å‹ï¼Œä¸å®Œå…¨ç›‘ç£ï¼ˆIncomplete supervisionï¼‰ï¼Œä¸ç¡®åˆ‡ç›‘ç£ï¼ˆInexact supervisionï¼‰ï¼Œä¸ç²¾ç¡®ç›‘ç£ï¼ˆInaccurate supervisionï¼‰ã€‚</p><ul><li><p>ä¸å®Œå…¨ç›‘ç£æ˜¯æŒ‡ï¼Œè®­ç»ƒæ•°æ®ä¸­åªæœ‰ä¸€éƒ¨åˆ†æ•°æ®è¢«ç»™äº†æ ‡ç­¾ï¼Œæœ‰ä¸€äº›æ•°æ®æ˜¯æ²¡æœ‰æ ‡ç­¾çš„ã€‚</p></li><li><p>ä¸ç¡®åˆ‡ç›‘ç£æ˜¯æŒ‡ï¼Œè®­ç»ƒæ•°æ®åªç»™å‡ºäº†ç²—ç²’åº¦æ ‡ç­¾ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¾“å…¥æƒ³è±¡æˆä¸€ä¸ªåŒ…ï¼Œè¿™ä¸ªåŒ…é‡Œé¢æœ‰ä¸€äº›ç¤ºä¾‹ï¼Œæˆ‘ä»¬åªçŸ¥é“è¿™ä¸ªåŒ…çš„æ ‡ç­¾ï¼ŒYæˆ–Nï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“æ¯ä¸ªç¤ºä¾‹çš„æ ‡ç­¾ã€‚</p></li><li><p>ä¸ç²¾ç¡®ç›‘ç£æ˜¯æŒ‡ï¼Œç»™å‡ºçš„æ ‡ç­¾ä¸æ€»æ˜¯æ­£ç¡®çš„ï¼Œæ¯”å¦‚æœ¬æ¥åº”è¯¥æ˜¯Yçš„æ ‡ç­¾è¢«é”™è¯¯æ ‡è®°æˆäº†Nã€‚</p></li></ul><h5 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h5><ul><li>ä¸ºäº†è§£å†³ä¸å®Œå…¨ç›‘ç£ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸¤ç§ä¸»è¦æŠ€æœ¯ï¼Œä¸»åŠ¨å­¦ä¹ å’ŒåŠç›‘ç£å­¦ä¹ ã€‚ä¸€ç§æ˜¯æœ‰äººç±»å¹²é¢„çš„ï¼Œä¸€ç§æ˜¯æ²¡æœ‰äººç±»å¹²é¢„çš„ã€‚</li><li>ä¸ºäº†è§£å†³ä¸ç¡®åˆ‡ç›‘ç£ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¤šç¤ºä¾‹å­¦ä¹ ã€‚</li><li>ä¸ºäº†è§£å†³ä¸ç²¾ç¡®ç›‘ç£ï¼Œæˆ‘ä»¬è€ƒè™‘å¸¦å™ªå­¦ä¹ ã€‚</li></ul></blockquote>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ ç¬”è®°</category>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>ææ²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer57-2 å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—</title>
    <link href="/2021/12/30/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer57-2/"/>
    <url>/2021/12/30/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer57-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° target ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸º target çš„è¿ç»­æ­£æ•´æ•°åºåˆ—ï¼ˆè‡³å°‘å«æœ‰ä¸¤ä¸ªæ•°ï¼‰ã€‚</p><p>åºåˆ—å†…çš„æ•°å­—ç”±å°åˆ°å¤§æ’åˆ—ï¼Œä¸åŒåºåˆ—æŒ‰ç…§é¦–ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼štarget = <span class="hljs-number">9</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[2,3,4],[4,5]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼štarget = <span class="hljs-number">15</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,2,3,4,5],[4,5,6],[7,8]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= target &lt;= 10^5</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="éå†è§£æ³•">éå†è§£æ³•</h3><p>ä»1åˆ°<code>target//2</code>ä¸ºé¦–éå†æ˜¯å¦å­˜åœ¨è¿ç»­çš„åºåˆ—ä¸ºtargetã€‚ä½¿ç”¨ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯ç¡®å®šé¦–å…ƒç´ ï¼Œå†…å±‚å¾ªç¯ç¡®å®šå°¾å…ƒç´ ï¼Œå¦‚æœéå†åˆ°çš„å’Œå¤§äºtargetå°±ç»ˆæ­¢ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">self, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        limit = <span class="hljs-built_in">int</span>(target/<span class="hljs-number">2</span>)<br>        result = []<br>        <span class="hljs-keyword">for</span> head <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,limit+<span class="hljs-number">1</span>):<br>            temp,t,sumt = [head],head+<span class="hljs-number">1</span>,head<br>            <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>                sumt += t<br>                temp.append(t)  <br>                <span class="hljs-keyword">if</span> sumt==target:<br>                    result.append(temp)<br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> sumt&gt;target: <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> sumt&lt;target: t += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></tbody></table></figure><h3 id="æ»‘åŠ¨çª—å£">æ»‘åŠ¨çª—å£</h3><p>ä½¿ç”¨æ»‘åŠ¨çª—å£æ¥ç¡®å®šåºåˆ—é¦–å°¾ä½ç½®ï¼›<br>åœ¨è¿™é‡Œiï¼Œjåˆ†åˆ«è¡¨ç¤ºé¦–å°¾å…ƒç´ ï¼›</p><ul><li>åºåˆ—å…ƒç´ å’Œsumtå°äºtargetï¼Œå°±å³ç§»jï¼›</li><li>åºåˆ—å…ƒç´ å’Œå¤§äºtargetï¼Œå°±å³ç§»iï¼›</li></ul><p>è¿™é‡Œä¸å­˜åœ¨å·¦ç§»çš„æƒ…å†µï¼Œä¸å·¦ç§»iå¥½ç†è§£ï¼Œå› ä¸ºiæ˜¯ä»å¤´å¼€å§‹æŸ¥æ‰¾çš„å˜›ï¼Œå·¦ç§»ä¸æ˜¯é‡å¤äº†å˜›ï¼Œä½•å†µè¿˜è¦ä¿è¯é¦–å…ƒç´ çš„é¡ºåºï¼›é‚£ä¹ˆä¸å·¦ç§»jçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ã€‚ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œè¿™ä¸ªçª—å£åªæ˜¯è´Ÿè´£å°¾èŠ‚ç‚¹å³ç§»æ‰©å¤§å’Œé¦–èŠ‚ç‚¹å³ç§»ç¼©å°ï¼Œæ˜¯å¯ä»¥éå†æ‰€æœ‰çš„æƒ…å†µå“’ã€‚æ¯”å¦‚<code>1,2,3,4,5...</code>,targetä¸º5ï¼Œå¼€å§‹å°±ä¼šåˆ°<code>1,2,3</code>,ç„¶åå†åˆ°<code>2,3</code>;å³å°¾èŠ‚ç‚¹åªè´Ÿè´£å¢å¤§åºåˆ—å’Œï¼Œé¦–èŠ‚ç‚¹åªè´Ÿè´£ç¼©å°åºåˆ—å’Œã€‚ğŸ˜‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">self, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-comment">#æ»‘åŠ¨çª—å£</span><br>        i,j,sumt,result = <span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,[]<br>        <span class="hljs-keyword">while</span>(i&lt;=target//<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">if</span>(sumt&lt;target):<br>                j += <span class="hljs-number">1</span><br>                sumt += j<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span>(sumt==target):result.append(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(i,j+<span class="hljs-number">1</span>))) <span class="hljs-comment">#éœ€è¦listè½¬æ¢</span><br>            sumt -= i<br>            i += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ»‘åŠ¨çª—å£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ»‘åŠ¨çª—å£</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¶³è¿¹æ£€æµ‹é¡¹ç›®çš„æ€»ç»“</title>
    <link href="/2021/12/29/project_summary/footprint-summary/"/>
    <url>/2021/12/29/project_summary/footprint-summary/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ€»ç»“è¶³è¿¹æ£€æµ‹é¡¹ç›®</p></blockquote><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ ¹æ®åˆ»åº¦å°ºä¸Šçš„ç‰¹å¾å¯¹äº§ç”Ÿç•¸å˜çš„è„šå°çŸ«æ­£ã€‚å®ç°åŸå›¾æ‰“å°å’Œæ ‡æ³¨ï¼›</p><h2 id="æŠ€æœ¯ç‚¹">æŠ€æœ¯ç‚¹</h2><p>æ ¹æ®åˆ»åº¦å°ºä¸Šçš„ç‰¹å¾å¯¹äº§ç”Ÿç•¸å˜çš„è„šå°çŸ«æ­£ã€‚<br>ä½¿ç”¨éœå¤«å˜æ¢æ‹Ÿåˆ4ä¸ªåœ†å®šä½æ¥ä»¿å°„å˜æ¢çŸ«æ­£å›¾åƒ</p><ul><li>éœå¤«å˜æ¢-&gt;yolov5</li><li>ä»¿å°„å˜æ¢</li><li>pyqt5</li></ul><h2 id="éš¾ç‚¹">éš¾ç‚¹</h2><p>ä½¿ç”¨éœå¤«å˜æ¢å®¹æ˜“å®šä½åˆ°èƒŒæ™¯çš„åœ†ï¼Œå¹¶ä¸”å¯èƒ½å‡ºç°åœ†ä¸å…¨çš„æƒ…å†µ</p><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><p>ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ç›®æ ‡æ£€æµ‹<br>ä½¿ç”¨å¤šä¸ªç‰¹å¾èåˆé€‰æ‹©è¿›è¡Œä»¿å°„å˜æ¢</p><h2 id="æˆæœ">æˆæœ</h2><p>è¾¾åˆ°ä¸è¶…è¿‡15åº¦æ—¶ï¼Œè¯¯å·®åœ¨2mmä»¥å†…</p><h2 id="åˆ›æ–°ç‚¹">åˆ›æ–°ç‚¹</h2><p>ä½¿ç”¨å¤šä¸ªç‰¹å¾èåˆçŸ«æ­£</p><h2 id="å±•æœ›å’Œæ”¹è¿›">å±•æœ›å’Œæ”¹è¿›</h2><p>å°ºå­çŸ«æ­£åä¸å‡è¡¡</p>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python-embededæ‰“åŒ…æ–‡ä»¶ç”Ÿæˆexe</title>
    <link href="/2021/12/29/project_tool/usePyembeded/"/>
    <url>/2021/12/29/project_tool/usePyembeded/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨pyinstalleræ‰“åŒ…çš„æ–‡ä»¶å¤ªå¤§äº†ï¼ï¼æ‰€ä»¥ï¼æ‰€ä»¥ï¼å­¦åˆ°äº†å¦ä¸€æ‹›ï¼Œå°†æ‰€éœ€çš„ç¯å¢ƒé…ç½®åˆ°python-embededä¸­ï¼Œç„¶åä½¿ç”¨cæ¥è°ƒç”¨pyçš„å¯åŠ¨æ–‡ä»¶ï¼Œå†gccç”Ÿæˆexeæ–‡ä»¶ï¼Œé…±ç´«å·¥ç¨‹æ–‡ä»¶å°±ä¼šå°å¾ˆå¤šï¼›å®è·µè¯æ˜ï¼Œpyinstalleræ‰“åŒ…5.2Gï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼åé™ä½åˆ°1.5Gå“¦~ è¿™ç§æ–¹å¼ä¸»è¦å°±æ˜¯ä½¿ç”¨python-embededæ¥é…ç½®ç¯å¢ƒã€‚</p></blockquote><p>å‚è€ƒhttps://zhuanlan.zhihu.com/p/77028265</p><h2 id="ä¸‹è½½embededç‰ˆæœ¬">ä¸‹è½½embededç‰ˆæœ¬</h2><ul><li>python37çš„<a href="https://link.zhihu.com/?target=https%3A//www.python.org/downloads/release/python-373/">embeddedç‰ˆæœ¬</a></li><li>ä¸‹è½½zipæ–‡ä»¶è§£å‹åˆ°æŸå¤„ï¼Œæ¯”å¦‚<code>E:\python_embeded\</code></li></ul><p><img src="https://picture.mulindya.com/python-embeded1.png" alt=""></p><h2 id="å®‰è£…pip">å®‰è£…pip</h2><ul><li><p>å»<a href="https://link.zhihu.com/?target=https%3A//pip.pypa.io/en/stable/installing/%23id7">å®˜ç½‘</a><a href="http://xn--get-pip-nw3k7779b.py">ä¸‹è½½get-pip.py</a></p></li><li><p>ç‚¹å‡»installation,ä¸‹è½½<a href="https://bootstrap.pypa.io/get-pip.py.">get-pip.py</a>æ–‡ä»¶åˆ°<code>E:\python_embeded\</code></p></li><li><p>è¿è¡Œè¯¥æ–‡ä»¶ã€‚æ³¨æ„ä½¿ç”¨emdededç‰ˆæœ¬çš„pythonæ¥è¿è¡Œé…ç½®è¦<strong>å¸¦è·¯å¾„</strong>å“¦ï¼</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apl">#æ‰“å¼€cmd,cdåˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼ˆE:\python_embeded\ï¼‰ï¼Œè¿è¡Œä¸‹è½½çš„æ–‡ä»¶<br>E:\python_embeded\python.exe  get-pip.py<br></code></pre></td></tr></tbody></table></figure></li></ul><h2 id="ä¿®æ”¹æ–‡ä»¶">ä¿®æ”¹æ–‡ä»¶</h2><p>æ‰¾åˆ°è‡ªå·±python-embeddedæ–‡ä»¶å¤¹ä¸‹çš„<strong>python37.pth</strong>ï¼ˆå¦‚æœä½ ä¸‹è½½çš„æ˜¯27ç‰ˆæœ¬é‚£å½“ç„¶å°±æ˜¯python27._pthå•¦ï¼‰</p><p>æŠŠ# import siteå‰é¢çš„æ³¨é‡Šç¬¦å·â€œ#â€åˆ é™¤â€”â€”ä¿å­˜</p><figure class="highlight haskell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">python37</span>.zip<br>.<br><br><span class="hljs-meta"># Uncomment to run site.main() automatically</span><br><span class="hljs-keyword">import</span> site<br></code></pre></td></tr></tbody></table></figure><p>è¿™é‡Œå¦‚æœä¸ä¿®æ”¹ï¼Œç›´æ¥installï¼Œå°±ä¼šæŠ¥é”™<code>ModuleNotFoundError: No module named 'pip'</code></p><h2 id="é…ç½®ç›¸å…³ç¯å¢ƒ">é…ç½®ç›¸å…³ç¯å¢ƒ</h2><p>å¸¸è§„é…ç½®pytorchæ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#cpu ç‰ˆæœ¬</span><br>pip install torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span><br><br><span class="hljs-comment"># CUDA 10.2</span><br>conda install pytorch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> cudatoolkit=<span class="hljs-number">10.2</span> -c pytorch<br><br><span class="hljs-comment"># CUDA 10.2</span><br>pip install torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span>+cu102 torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span>+cu102 torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> -f https://download.pytorch.org/whl/torch_stable.html<br></code></pre></td></tr></tbody></table></figure><p>åœ¨python-embededä¸­ï¼Œè¦å¸¦ä¸Šè·¯å¾„å“¦ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#æ‰“å¼€cmd,cdåˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼ˆE:\python_embeded\ï¼‰ï¼Œè¿è¡Œä¸‹è½½çš„æ–‡ä»¶</span><br>è¿™é‡Œä½¿ç”¨cpuçš„torchç‰ˆæœ¬ï¼Œå¤Ÿç”¨äº†å¹¶ä¸”æ–‡ä»¶æ›´å°ã€‚<br>E:\python_embeded\Scripts\pip.exe  install ç›¸å…³é…ç½®(torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> )<br>    <br>E:\python_embeded\Scripts\pip.exe  install -r requirements.txt <span class="hljs-comment">#ä¸€æ ·çš„æ“ä½œ</span><br></code></pre></td></tr></tbody></table></figure><h3 id="é…ç½®tkinter">é…ç½®tkinter</h3><p>å¦‚æœé¡¹ç›®ä½¿ç”¨tkinterçš„è¯ï¼Œå°±å•ç‹¬é…ç½®ã€‚ç”±äºpython embedableæ˜¯ä¸å¸¦tkinterçš„ï¼Œè€Œä¸”æ— æ³•é€šè¿‡pipæ¥å®‰è£…ï¼Œè§£å†³æ–¹æ³•ï¼šä¸‹è½½ä¸€ä¸ªä¸python embedableç‰ˆæœ¬ç›¸åŒçš„pythonå®‰è£…åŒ…ï¼Œå®‰è£…æ—¶ä¸è¦åŠ å…¥ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœä½ ç”µè„‘ä¸Šå·²ç»æœ‰anacondaçš„è¯ï¼‰ï¼Œç„¶åå°†å®‰è£…è·¯å¾„ä¸‹çš„ä¸€äº›æ–‡ä»¶å¤åˆ¶åˆ°python embedableçš„è·¯å¾„ä¸‹</p><blockquote><p>/tcl æ‹·è´åˆ° /</p><p>/Lib/tkinter æ‹·è´åˆ° /Lib/site-packages/</p><p>/DLLs/_tkinter.pyd æ‹·è´åˆ° /</p><p>/DLLs/tcl86t.dll æ‹·è´åˆ° /</p><p>/DLLs/tk86t.dll æ‹·è´åˆ° /</p></blockquote><h3 id="æ‰“åŒ…">æ‰“åŒ…</h3><p>ç„¶åï¼æŠŠè¿™ä¸ªé…ç½®å¥½çš„embededæ–‡ä»¶ç›´æ¥æ”¾è¿›é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚æŠŠå¯åŠ¨ç¨‹åºçš„pyæ–‡ä»¶å¤´ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œå®ƒçš„ä½œç”¨æ˜¯å†™å…¥ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·å¦‚æœæœ‰è‡ªå®šä¹‰çš„åŒ…è°ƒç”¨æ‰å¯ä»¥æ‰¾å¾—åˆ°å“Ÿã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>cwd=os.getcwd()<br><span class="hljs-keyword">import</span> sys<br>sys.path.append(cwd)<br></code></pre></td></tr></tbody></table></figure><h4 id="æ–°å»º-batæ–‡ä»¶">æ–°å»º.batæ–‡ä»¶</h4><p>ä¸Šé¢æ˜¯å–æ¶ˆé»‘æ¡†å‘½ä»¤è¡Œï¼Œä¸‹é¢æ˜¯è°ƒç”¨å¯åŠ¨ç¨‹åºï¼åŒå‡»å³å¯è¿è¡Œï¼</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apl">@echo off <br>if "%1" == "h" goto begin <br>mshta vbscript:createobject("wscript.shell").run("%~nx0 h",0)(window.close)&amp;&amp;exit <br>:begin <br><br>"%CD%\python_embeded\python.exe" footprint.py <br></code></pre></td></tr></tbody></table></figure><p>**æ³¨æ„ï¼š**è·¯å¾„å¸¦å¼•å·å¯ä»¥è¯†åˆ«ç©ºæ ¼å’Œæ‹¬å·</p><h4 id="æ–°å»º-cæ–‡ä»¶">æ–°å»º.cæ–‡ä»¶</h4><p>ä½¿ç”¨systemæ¥ç”¨cè°ƒç”¨batæ–‡ä»¶ï¼Œåç»­æŠŠcç¼–è¯‘ä¸ºexeæ–‡ä»¶å¤§åŠŸå‘Šæˆå•¦ï¼</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    system(<span class="hljs-string">"footprint.bat"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="æ–°å»º-rcæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰">æ–°å»º.rcæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</h4><p>è¿™ä¸ªæ–‡ä»¶æŒ‡å®šexeçš„iconå’Œexeæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs apl">2 ICON "icon.ico"<br>1 VERSIONINFO<br>FILEVERSION     2,3,3,3<br>PRODUCTVERSION  2,3,3,3<br>FILEOS 0x4L<br>BEGIN<br>BLOCK "StringFileInfo"<br>BEGIN<br>BLOCK "080404E4"<br>BEGIN<br>VALUE "CompanyName", "hust"<br>VALUE "FileDescription", "Project General Launcher"<br>VALUE "FileVersion", "1.0"<br>VALUE "InternalName", "Launcher on Windows"<br>VALUE "LegalCopyright", "GPLv2"<br>VALUE "OriginalFilename", "è¶³è¿¹çŸ«æ­£"<br>VALUE "ProductName", "è¶³è¿¹çŸ«æ­£ä¸æ ‡æ³¨"<br>VALUE "ProductVersion", "2.3.3 build 42"<br>VALUE "Comments", "è¶³è¿¹çŸ«æ­£"<br>END<br>END<br><br>BLOCK "VarFileInfo"<br>BEGIN<br>VALUE "Translation", 0x0804, 1252<br>END<br>END<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¼–è¯‘æˆexe">ç¼–è¯‘æˆexe</h3><p>ä¸Šé¢å‘½ä»¤ä¼šç”Ÿæˆdemo.oç›®æ ‡æ–‡ä»¶ï¼Œé“¾æ¥çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªç›®æ ‡æ–‡ä»¶ç¼–è¯‘å‡ºæ¥çš„exeæ–‡ä»¶å°±æœ‰å›¾æ ‡äº†å‘€ï¼okkï¼ç»“æŸå•¦~çœŸæ˜¯è‰°è¾›â€¦</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apl">windres -i "footprint.rc" -o "footprint.o"<br>gcc footprint.c footprint.o -o footprint.exe<br></code></pre></td></tr></tbody></table></figure><h4 id="å®‰è£…gcc">å®‰è£…gcc</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apl">gcc -v<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæ²¡æœ‰gccçš„è¯ï¼Œå‚è€ƒè¿™è¾¹åšå®¢https://zhuanlan.zhihu.com/p/47935258<br>ç®€å•æ¥è¯´å°±æ˜¯å®‰è£…Mingwï¼Œç„¶åæ·»åŠ minge32-gcc-g++,ç‚¹å‡»apply changeå°±å¯ä»¥ä¸‹è½½</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>python-embeded</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®æ‰“åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer45 æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</title>
    <link href="/2021/12/28/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer45/"/>
    <url>/2021/12/28/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer45/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [10,2]</span><br><span class="hljs-section">è¾“å‡º: "102"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: [<span class="hljs-number">3,30,34,5</span>,<span class="hljs-number">9</span>]<br>è¾“å‡º: "<span class="hljs-number">3033459</span>"<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt; nums.length &lt;= 100</li><li>è¾“å‡ºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•°</li><li>æ‹¼æ¥èµ·æ¥çš„æ•°å­—å¯èƒ½ä¼šæœ‰å‰å¯¼ 0ï¼Œæœ€åç»“æœä¸éœ€è¦å»æ‰å‰å¯¼ 0</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ–¹æ³•ä¸»è¦æ˜¯ç”¨åˆ°è‡ªå®šä¹‰æ’åºï¼›<br>åœ¨<code>python3</code>ä¸­çš„è‡ªå®šä¹‰æ’åºè¦é‡è½½<code>functools.cmp_to_key</code>å‡½æ•°ï¼Œä½†æ˜¯è¿™é‡Œçš„è§„åˆ™æ˜¯<strong>é»˜è®¤å°çš„åœ¨å‰é¢</strong>ï¼›æ‰€ä»¥åœ¨æ¯”è¾ƒçš„æ—¶å€™é‡è½½<code>mycmp</code>æ–¹æ³•ï¼Œa,bé¡ºåºæ»¡è¶³æ¡ä»¶æ—¶è¿”å›-1(num&lt;0)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cmp_to_key</span>(<span class="hljs-params">mycmp</span>):</span><br>    <span class="hljs-string">"""Convert a cmp= function into a key= function"""</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">K</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>        __slots__ = [<span class="hljs-string">'obj'</span>]<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, obj</span>):</span><br>            self.obj = obj<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__lt__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &lt; <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__gt__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &gt; <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__eq__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) == <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__le__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &lt;= <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__ge__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &gt;= <span class="hljs-number">0</span><br>        __hash__ = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">return</span> K<br></code></pre></td></tr></tbody></table></figure><p>å¦å¤–ï¼Œç›´æ¥å°†abæ‹¼æ¥è¿›è¡Œæ¯”è¾ƒå¤§å°ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå¤§å°æ›´å¿«å“¦~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">funccmp</span>(<span class="hljs-params">a,b</span>):</span><br>            x,y = a+b,b+a<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(x)&lt;<span class="hljs-built_in">int</span>(y): <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sort_rule</span>(<span class="hljs-params">x, y</span>):</span><br>            a, b = x + y, y + x <span class="hljs-comment">#å¯ä»¥ç›´æ¥å¯¹å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œæ›´å¿«</span><br>            <span class="hljs-keyword">if</span> a &gt; b: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> a &lt; b: <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>        s = [<span class="hljs-built_in">str</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums]<br>        t = <span class="hljs-built_in">sorted</span>(s,key = functools.cmp_to_key(sort_rule))    <br>        <span class="hljs-comment">#é‡è½½æ¯”è¾ƒå‡½æ•°ï¼Œåœ¨pythonçš„é‡è½½cmp_to_keyæ—¶é»˜è®¤æ˜¯å°çš„å…ƒç´ æ’åœ¨å‰é¢ï¼Œæ‰€ä»¥åœ¨æ»¡è¶³æ¡ä»¶æ—¶è¿”å›-1ï¼Œå…¶ä»–æƒ…å†µå¤§äº-1å³å¯</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(t)<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸¤ä¸ªå‡½æ•°éœ€è¦æŒæ¡</p><ul><li><code>''.join(t)</code>å¯ä»¥ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä¸²è¿æ¥æ•°ç»„</li><li>å¯¹åˆ—è¡¨å¾ªç¯æ“ä½œåˆ›å»ºå¯ä»¥ä½¿ç”¨<code>[func(x) for x in nums]</code></li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨mapå‡½æ•° <code>list(map(func,nums))</code>æˆ–è€…lambdaå‡½æ•°<code>list(map(lambda x:...,nums))</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ’åº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ’åº</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡leetcode14 æœ€é•¿å…¬å…±å‰ç¼€</title>
    <link href="/2021/12/26/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode14/"/>
    <url>/2021/12/26/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode14/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€é•¿å…¬å…±å‰ç¼€</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚</p><p>å¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² <code>""</code>ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight armasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-keyword">strs</span> = [<span class="hljs-string">"flower"</span>,<span class="hljs-string">"flow"</span>,<span class="hljs-string">"flight"</span>]<br>è¾“å‡ºï¼š<span class="hljs-string">"fl"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight armasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-keyword">strs</span> = [<span class="hljs-string">"dog"</span>,<span class="hljs-string">"racecar"</span>,<span class="hljs-string">"car"</span>]<br>è¾“å‡ºï¼š<span class="hljs-string">""</span><br>è§£é‡Šï¼šè¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= strs.length &lt;= 200</code></li><li><code>0 &lt;= strs[i].length &lt;= 200</code></li><li><code>strs[i]</code> ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¯¹æ¯ä¸€åˆ—è¿›è¡Œæ ¸å¯¹æ˜¯å¦æ˜¯ç›¸åŒï¼Œå¦‚æœä¸æ˜¯ç›¸åŒçš„ç›´æ¥returnå‰é¢çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">longestCommonPrefix</span>(<span class="hljs-params">self, strs: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs) == <span class="hljs-number">0</span>:<br>           <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><br><br>        rows, cols = <span class="hljs-built_in">len</span>(strs), <span class="hljs-built_in">len</span>(strs[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cols):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(rows):<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs[j]) == i <span class="hljs-keyword">or</span> strs[j][i] != strs[<span class="hljs-number">0</span>][i]:<br>                    <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>][:i]<br><br>        <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ–¹æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer åŠ›æ‰£-21</title>
    <link href="/2021/12/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-21/"/>
    <url>/2021/12/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-21/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[1,2,4]</span>, l2 = <span class="hljs-comment">[1,3,4]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,1,2,3,4,4]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[]</span>, l2 = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š-2">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[]</span>, l2 = <span class="hljs-comment">[0]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>ä¸¤ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ [0, 50]</li><li>-100 &lt;= Node.val &lt;= 100</li><li>l1 å’Œ l2 å‡æŒ‰ éé€’å‡é¡ºåº æ’åˆ—</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡p1ï¼Œp2åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨ï¼Œé€šè¿‡æ¯”è¾ƒå¤§å°ç¡®å®špçš„nextçš„æŒ‡å‘ã€‚æœ€åå°†å‰©ä½™çš„å…ƒç´ æ·»åŠ è‡³påã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, next=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.next = next</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, list1: <span class="hljs-type">Optional</span>[ListNode], list2: <span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:</span><br>        p1,p2 = list1,list2<br>        l = ListNode()<br>        p = l<br>        <span class="hljs-keyword">while</span>(p1 <span class="hljs-keyword">and</span> p2):<br>            <span class="hljs-keyword">if</span> p1.val&lt;p2.val:<br>                p.<span class="hljs-built_in">next</span> = p1<br>                p1 = p1.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p.<span class="hljs-built_in">next</span> = p2<br>                p2 = p2.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p.<span class="hljs-built_in">next</span> = p1 <span class="hljs-keyword">if</span> p1 <span class="hljs-keyword">else</span> p2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ’åº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ’åº</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pyqtæˆªå–çª—å£</title>
    <link href="/2021/12/16/python/pyqt/pyqt-grabwindow/"/>
    <url>/2021/12/16/python/pyqt/pyqt-grabwindow/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨painterç”»ç¬”è¿›è¡Œç»˜åˆ¶ä¹‹åï¼Œéœ€è¦ä¿å­˜ç”»å¸ƒå›¾åƒã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨Qpainter p(pixmap)ï¼Œåœ¨æŒ‡å®šçš„mapä¸Šç»˜åˆ¶åä¿å­˜ï¼Œå¯æ˜¯æ­¤æ–¹æ³•æˆ‘ä¿å­˜å›¾ç‰‡æ—¶è¿˜æ˜¯åªæœ‰åŸå§‹å›¾ç‰‡ã€‚ç»˜åˆ¶çš„å›¾å½¢æ— æ³•ä¿å­˜ï¼›å¦ä¸€ç§æ–¹æ³•æ—¶æˆªå–çª—å£ä¿å­˜å›¾ç‰‡ã€‚</p></blockquote><h2 id="ä»‹ç»QScreençš„æ–¹æ³•">ä»‹ç»QScreençš„æ–¹æ³•</h2><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pqscreen  = QGuiApplication.primaryScreen()<br>pixmap2 = pqscreen.grabWindow(self.winId(), self.x0, self.y0, <span class="hljs-built_in">abs</span>(self.x1-self.x0), <span class="hljs-built_in">abs</span>(self.y1-self.y0)) <span class="hljs-comment">#æœ¬æ§ä»¶çš„id</span><br>pixmap2.save(<span class="hljs-string">'555.png'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æˆªå±çš„åŸç†ä¸»è¦è¿˜æ˜¯è¿ç”¨QScreenç±»ä¸­çš„grabWindowæ–¹æ³•ã€‚</p><h2 id="grabWindow">grabWindow</h2><p><code>QScreen.grabWindow(WId window, int x = 0, int y = 0, int width = -1, int height = -1)</code><br>å¤§è‡´æ„æ€æ˜¯åˆ›å»ºå¹¶è¿”å›é€šè¿‡æŠ“å–ç”±QRectï¼ˆxï¼Œyï¼Œwidthï¼Œheightï¼‰é™åˆ¶çš„ç»™å®šçª—å£æ„é€ çš„åƒç´ å›¾ã€‚</p><h3 id="å‚æ•°">å‚æ•°</h3><p>å‚æ•°ï¼ˆxï¼Œyï¼‰æŒ‡å®šçª—å£ä¸­çš„åç§»é‡ï¼Œè€Œï¼ˆå®½åº¦ï¼Œé«˜åº¦ï¼‰æŒ‡å®šè¦å¤åˆ¶çš„åŒºåŸŸã€‚å¦‚æœå®½åº¦ä¸ºè´Ÿæ•°ï¼Œåˆ™è¯¥å‡½æ•°å°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°çª—å£çš„å³è¾¹ç•Œã€‚å¦‚æœé«˜åº¦ä¸ºè´Ÿæ•°ï¼Œåˆ™è¯¥å‡½æ•°å°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°çª—å£çš„åº•éƒ¨ã€‚</p><h3 id="Wid">Wid</h3><p>çª—å£ç³»ç»Ÿæ ‡è¯†ç¬¦ï¼ˆWIdï¼‰å¯ä»¥ä½¿ç”¨QWidget.winIdï¼ˆï¼‰å‡½æ•°è¿›è¡Œæ£€ç´¢ã€‚grabWindowï¼ˆï¼‰å‡½æ•°ä»å±å¹•æŠ“å–åƒç´ ï¼Œè€Œä¸æ˜¯ä»çª—å£æŠ“å–åƒç´ ï¼Œå³ï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªçª—å£éƒ¨åˆ†æˆ–å…¨éƒ¨è¦†ç›–æŠ“å–çš„åƒç´ ï¼Œåˆ™ä¹Ÿä¼šä»ä¸Šé¢çš„çª—å£è·å–åƒç´ ã€‚é¼ æ ‡å…‰æ ‡ä¸€èˆ¬ä¸ä¼šè¢«æŠ“å–ã€‚</p><p>å¦‚æœæ˜¯å±å¹•æˆªå›¾ï¼šidä¸º<code>QtWidgets.QApplication.desktop().winId()</code></p><h2 id="æºä»£ç å®ç°">æºä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python</span><br><span class="hljs-keyword">from</span> PyQt5 <span class="hljs-keyword">import</span> QtCore, QtWidgets,QtGui<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Screenshot</span>(<span class="hljs-params">QtWidgets.QWidget</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(Screenshot, self).__init__()<br>        self.screenshotLabel = QtWidgets.QLabel()<br>        self.screenshotLabel.setSizePolicy(QtWidgets.QSizePolicy.Expanding,<br>                QtWidgets.QSizePolicy.Expanding)<br>        self.screenshotLabel.setAlignment(QtCore.Qt.AlignCenter)<br>        self.screenshotLabel.setMinimumSize(<span class="hljs-number">240</span>, <span class="hljs-number">160</span>)<br>        self.createOptionsGroupBox()<br>        self.createButtonsLayout()<br>        mainLayout = QtWidgets.QVBoxLayout()<br>        mainLayout.addWidget(self.screenshotLabel)<br>        mainLayout.addWidget(self.optionsGroupBox)<br>        mainLayout.addLayout(self.buttonsLayout)<br>        self.setLayout(mainLayout)<br>        self.shootScreen()<br>        self.delaySpinBox.setValue(<span class="hljs-number">0</span>)<span class="hljs-comment">#å»¶è¿Ÿå¤šå°‘ç§’åæˆªå±</span><br>        self.setWindowTitle(<span class="hljs-string">"Screenshot"</span>)<br>        self.resize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resizeEvent</span>(<span class="hljs-params">self, event</span>):</span><br>        scaledSize = self.originalPixmap.size()<br>        scaledSize.scale(self.screenshotLabel.size(), QtCore.Qt.KeepAspectRatio)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.screenshotLabel.pixmap() <span class="hljs-keyword">or</span> scaledSize != self.screenshotLabel.pixmap().size():<br>            self.updateScreenshotLabel()<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newScreenshot</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.hideThisWindowCheckBox.isChecked():<br>            self.hide()<br>        self.newScreenshotButton.setDisabled(<span class="hljs-literal">True</span>)<br>        QtCore.QTimer.singleShot(self.delaySpinBox.value() * <span class="hljs-number">1000</span>,<br>                self.shootScreen)<br>                <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">saveScreenshot</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">format</span> = <span class="hljs-string">'png'</span><br>        initialPath = QtCore.QDir.currentPath() + <span class="hljs-string">"/untitled."</span> + <span class="hljs-built_in">format</span><br>        fileName,filetype = QtWidgets.QFileDialog.getSaveFileName(self, <span class="hljs-string">"Save As"</span>,<br>                initialPath,<br>                <span class="hljs-string">"%s Files (*.%s);;All Files (*)"</span> % (<span class="hljs-built_in">format</span>.upper(), <span class="hljs-built_in">format</span>))<br>        <span class="hljs-keyword">if</span> fileName:<br>            self.originalPixmap.save(fileName, <span class="hljs-built_in">format</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"file saved as  %s"</span> % fileName)<br>           <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shootScreen</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.delaySpinBox.value() != <span class="hljs-number">0</span>:<br>            QtWidgets.qApp.beep()<br>        <span class="hljs-comment"># Garbage collect any existing image first.</span><br>        self.originalPixmap = <span class="hljs-literal">None</span><br>        <span class="hljs-comment">#self.originalPixmap = QtGui.QPixmap.grabWindow(QtWidgets.QApplication.desktop().winId())#PyQt4</span><br>       <br>        screen= QtWidgets.QApplication.primaryScreen()<span class="hljs-comment">#PyQt5</span><br>        self.originalPixmap = screen.grabWindow(QtWidgets.QApplication.desktop().winId())<span class="hljs-comment">#PyQt5</span><br>       <br>        self.updateScreenshotLabel()<br>        self.newScreenshotButton.setDisabled(<span class="hljs-literal">False</span>)<br>        <span class="hljs-keyword">if</span> self.hideThisWindowCheckBox.isChecked():<br>            self.show()<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">updateCheckBox</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.delaySpinBox.value() == <span class="hljs-number">0</span>:<br>            self.hideThisWindowCheckBox.setDisabled(<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self.hideThisWindowCheckBox.setDisabled(<span class="hljs-literal">False</span>)<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createOptionsGroupBox</span>(<span class="hljs-params">self</span>):</span><br>        self.optionsGroupBox = QtWidgets.QGroupBox(<span class="hljs-string">"Options"</span>)<br>        self.delaySpinBox = QtWidgets.QSpinBox()<br>        self.delaySpinBox.setSuffix(<span class="hljs-string">" s"</span>)<br>        self.delaySpinBox.setMaximum(<span class="hljs-number">60</span>)<br>        self.delaySpinBox.valueChanged.connect(self.updateCheckBox)<br>        self.delaySpinBoxLabel = QtWidgets.QLabel(<span class="hljs-string">"Screenshot Delay:"</span>)<br>        self.hideThisWindowCheckBox = QtWidgets.QCheckBox(<span class="hljs-string">"Hide This Window"</span>)<br>        optionsGroupBoxLayout = QtWidgets.QGridLayout()<br>        optionsGroupBoxLayout.addWidget(self.delaySpinBoxLabel, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        optionsGroupBoxLayout.addWidget(self.delaySpinBox, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>        optionsGroupBoxLayout.addWidget(self.hideThisWindowCheckBox, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>        self.optionsGroupBox.setLayout(optionsGroupBoxLayout)<br>        <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createButtonsLayout</span>(<span class="hljs-params">self</span>):</span><br>        self.newScreenshotButton = self.createButton(<span class="hljs-string">"New Screenshot"</span>,<br>                self.newScreenshot)<br>        self.saveScreenshotButton = self.createButton(<span class="hljs-string">"Save Screenshot"</span>,<br>                self.saveScreenshot)<br>        self.quitScreenshotButton = self.createButton(<span class="hljs-string">"Quit"</span>, self.close)<br>        self.buttonsLayout = QtWidgets.QHBoxLayout()<br>        self.buttonsLayout.addStretch()<br>        self.buttonsLayout.addWidget(self.newScreenshotButton)<br>        self.buttonsLayout.addWidget(self.saveScreenshotButton)<br>        self.buttonsLayout.addWidget(self.quitScreenshotButton)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createButton</span>(<span class="hljs-params">self, text, member</span>):</span><br>        button = QtWidgets.QPushButton(text)<br>        button.clicked.connect(member)<br>        <span class="hljs-keyword">return</span> button<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">updateScreenshotLabel</span>(<span class="hljs-params">self</span>):</span><br>        self.screenshotLabel.setPixmap(self.originalPixmap.scaled(<br>                self.screenshotLabel.size(), QtCore.Qt.KeepAspectRatio,<br>                QtCore.Qt.SmoothTransformation))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<br>    <span class="hljs-keyword">import</span> sys<br>    app = QtWidgets.QApplication(sys.argv)<br>    screenshot = Screenshot()<br>    screenshot.show()<br>    sys.exit(app.exec_())<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>pyqt</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>pyqt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ‹¬å·</title>
    <link href="/2021/12/15/python/re/re-bracket/"/>
    <url>/2021/12/15/python/re/re-bracket/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ€»ç»“æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å„ç§æ‹¬å·ï¼Œä¸»è¦æ˜¯å°æ‹¬å·ï¼Œæ–¹æ‹¬å·ï¼Œå¤§æ‹¬å·çš„åŒºåˆ«ã€‚</p></blockquote><h2 id="å°æ‹¬å·">å°æ‹¬å·</h2><p>å°æ‹¬å·ï¼ˆï¼‰ï¼šå¤šä¸ªåŒ¹é…ï¼Œ<strong>å°†æ‹¬å·ä¸­çš„å†…å®¹ä½œä¸ºä¸€ç»„æ¥å¤„ç†</strong>ï¼Œé™åˆ¶å¤šé€‰çš„èŒƒå›´ã€‚è­¬å¦‚<code>*.(png|jpg)</code>å¯æ ‡è¯†æœ«å°¾ä¸ºpngï¼Œjpgç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œåªèƒ½æ˜¯pngæˆ–è€…jpgï¼Œå°†æ‹¬å·ä¸­å†…å®¹ä½œä¸ºä¸€ç»„ã€‚</p><h2 id="æ–¹æ‹¬å·">æ–¹æ‹¬å·</h2><p>æ–¹æ‹¬å·ã€ã€‘ï¼šæ–¹æ‹¬å·æ˜¯<strong>å•ä¸ªåŒ¹é…</strong>ï¼Œæ¯”å¦‚[abc]çš„å«ä¹‰æ˜¯åŒ¹é…abcå…¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸æ˜¯ä½œä¸ºä¸€ç»„ï¼›<br>å¸¸è§çš„ç”¨æ³•ï¼š[a-zA-Z0-9]å¯ä»¥åŒ¹é…æ‰€æœ‰è‹±æ–‡å­—æ¯å’Œæ•°å­—ã€‚</p><h2 id="å¤§æ‹¬å·">å¤§æ‹¬å·</h2><p>å¤§æ‹¬å·{}ï¼šå¤§æ‹¬å·çš„ç”¨æ³•æ˜¯å¡«å…¥æ•°å­—ï¼Œ<strong>è¡¨ç¤ºåŒ¹é…æ¬¡æ•°</strong>ï¼Œä»–éœ€è¦å’Œå…¶ä»–æœ‰æ„ä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ã€‚<br>æ¯”å¦‚</p><ul><li>[a-c]{2} : å«ä¹‰æ˜¯åŒ¹é…aåˆ°cä¹‹é—´çš„ä¸€ä¸ªå­—æ¯å‡ºç°åŒæ—¶è‡³å‡ºç°ä¸¤æ¬¡ï¼›</li><li>(com){1}: å«ä¹‰æ˜¯åŒ¹é…å‡ºç°ä¸€æ¬¡çš„comï¼›</li><li>\W{1,3}: å«ä¹‰æ˜¯éå­—æ¯æ•°å­—çš„å­—ç¬¦æœ€å°‘å‡ºç°1æ¬¡ï¼Œæœ€å¤šå‡ºç°3æ¬¡ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¸²å‡ºç°æ­¤ç±»å­—ç¬¦çš„ä¸ªæ•°ä¹Ÿå°±æ˜¯1åˆ°3æ¬¡ï¼›</li></ul>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>re</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>re</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å°†å›¾åƒä¿å­˜è‡³Wordä¸­</title>
    <link href="/2021/12/10/python/img/imageTodocx/"/>
    <url>/2021/12/10/python/img/imageTodocx/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åˆ©ç”¨pythonï¼Œå‘Wordä¸­ä¿å­˜ä¿¡æ¯ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®°å½•å¯¹å›¾åƒçš„ä¿å­˜ï¼›</p></blockquote><h2 id="æŒ‰ç…§python-docx">æŒ‰ç…§python-docx</h2><p>python-docx is a Python library for creating and updating Microsoft Word (.docx) files.</p><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> python-docx<br></code></pre></td></tr></tbody></table></figure><h2 id="æ–‡æ¡£ç›¸å…³æ“ä½œ">æ–‡æ¡£ç›¸å…³æ“ä½œ</h2><h3 id="æ’å…¥å›¾ç‰‡">æ’å…¥å›¾ç‰‡</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥æ¨¡å—</span><br><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document<br><span class="hljs-comment"># æ­¤æ¨¡å—ä¸­åŒ…å« docx ä¸­å„ç±»å•ä½æ–¹æ³•</span><br><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> shared<br><br>doc = Document()<br>doc.add_heading(<span class="hljs-string">'python-docx åŸºç¡€è®²è§£ï¼ˆäºŒï¼‰'</span>)<br><br><span class="hljs-comment"># åœ¨æ–‡æ¡£ä¸­å¢åŠ å›¾ç‰‡,å¹¶å¯¹è®¾ç½®å›¾ç‰‡å¤§å°</span><br><span class="hljs-comment"># å½“åªè®¾ç½®ä¸€ä¸ªæ–¹å‘çš„é•¿åº¦ï¼ˆå®½æˆ–é«˜ï¼‰æ—¶ï¼Œå¦ä¸€æ–¹å‘ä¼šè‡ªåŠ¨ç¼©æ”¾</span><br>doc.add_picture(<span class="hljs-string">'1.png'</span>,width=shared.Inches(<span class="hljs-number">1</span>))  <span class="hljs-comment"># æŒ‰è‹±å¯¸è®¾ç½®</span><br>doc.add_picture(<span class="hljs-string">'1.png'</span>,height=shared.Cm(<span class="hljs-number">2</span>))  <span class="hljs-comment"># æŒ‰å˜ç±³è®¾ç½®</span><br><span class="hljs-comment">#ä¹Ÿå¯ä»¥æŒ‰ç…§æ¯«ç±³è®¾ç½®shared.Mm(2)</span><br><br><span class="hljs-comment"># ä¿å­˜æ–‡ä»¶</span><br>doc.save(<span class="hljs-string">'test2.docx'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="é¡µé¢å¤§å°è®¾ç½®">é¡µé¢å¤§å°è®¾ç½®</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document <span class="hljs-comment"># å¯¼å…¥docxåŒ…</span><br><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Cm, Inches, Pt <span class="hljs-comment"># å¯¼å…¥å•ä½æ¢ç®—å‡½æ•°</span><br>document = Document() <span class="hljs-comment"># æ–°å»ºwordæ–‡æ¡£</span><br>section = document.sections[<span class="hljs-number">0</span>] <span class="hljs-comment"># è·å–sectionå¯¹è±¡</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">'é»˜è®¤é¡µé¢çš„å®½åº¦å’Œé«˜åº¦ï¼š'</span>, section.page_width.cm,<br>section.page_height.cm) <span class="hljs-comment"># æ‰“å°é»˜è®¤é¡µé¢å®½åº¦å’Œé«˜åº¦</span><br>section.page_width = Cm(<span class="hljs-number">40</span>)<br>section.page_height = Cm(<span class="hljs-number">40</span>)<br><br><span class="hljs-comment">#A3çº¸çš„æ ¼å¼æ˜¯297*420mm</span><br></code></pre></td></tr></tbody></table></figure><h2 id="å…¶ä»–åŠŸèƒ½">å…¶ä»–åŠŸèƒ½</h2><h3 id="æ‰“å¼€æ–‡æ¡£">æ‰“å¼€æ–‡æ¡£</h3><p>ä½ éœ€è¦çš„ç¬¬ä¸€ä»¶äº‹æ˜¯å·¥ä½œçš„æ–‡æ¡£ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document<br>document = Document()<br></code></pre></td></tr></tbody></table></figure><p>è¿™å°†æ‰“å¼€ä¸€ä¸ªåŸºäºé»˜è®¤â€œæ¨¡æ¿â€çš„ç©ºç™½æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥æ‰“å¼€å¹¶ä½¿ç”¨ç°æœ‰çš„Wordæ–‡æ¡£çš„å·¥ä½œ<code>python-docx</code>ï¼Œæˆ‘ä»¬ä¼šè®©äº‹æƒ…å˜å¾—ç®€å•ã€‚</p><h3 id="å¢åŠ ä¸€æ®µ">å¢åŠ ä¸€æ®µ</h3><p>æ®µè½æ˜¯Wordçš„åŸºç¡€ã€‚å®ƒä»¬ç”¨äºæ­£æ–‡æ–‡æœ¬ï¼Œä½†ä¹Ÿç”¨äºæ ‡é¢˜å’Œåˆ—è¡¨é¡¹ç›®ï¼ˆå¦‚é¡¹ç›®ç¬¦å·ï¼‰ã€‚</p><p>è¿™é‡Œæ˜¯æ·»åŠ ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">paragraph = document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ–¹æ³•è¿”å›å¯¹æ®µè½çš„å¼•ç”¨ï¼Œæ–°æ·»åŠ çš„æ®µè½åœ¨æ–‡æ¡£çš„ç»“å°¾ã€‚æ–°çš„æ®µè½å¼•ç”¨è¢«åˆ†é…ç»™<code>paragraph</code> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å°†è¦ç¦»å¼€äº†è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œé™¤éæˆ‘æœ‰ä¸€ä¸ªéœ€è¦å®ƒã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œé€šå¸¸ä½ ä¸ä¼šå¯¹é¡¹ç›®åšä»»ä½•äº‹æƒ…ï¼Œåœ¨æ·»åŠ å®ƒï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œä¿æŒå¼•ç”¨å®ƒæŒ‚åœ¨å‘¨å›´ã€‚</p><p>è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ®µè½ä½œä¸ºâ€œå…‰æ ‡â€ï¼Œå¹¶åœ¨å…¶ä¸Šç›´æ¥æ’å…¥ä¸€ä¸ªæ–°æ®µè½ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">prior_paragraph = paragraph.insert_paragraph_before(<span class="hljs-string">'Lorem ipsum'</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¿™å…è®¸å°†ä¸€ä¸ªæ®µè½æ’å…¥åˆ°æ–‡æ¡£çš„ä¸­é—´ï¼Œè¿™åœ¨ä¿®æ”¹ç°æœ‰æ–‡æ¡£æ—¶é€šå¸¸å¾ˆé‡è¦ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ç”Ÿæˆã€‚</p><h3 id="æ·»åŠ æ ‡é¢˜">æ·»åŠ æ ‡é¢˜</h3><p>åœ¨é™¤äº†æœ€çŸ­æ–‡æ¡£ä¹‹å¤–çš„ä»»ä½•å†…å®¹ä¸­ï¼Œæ­£æ–‡æ–‡æœ¬è¢«åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ä¸€ä¸ªæ ‡é¢˜å¼€å§‹ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æ·»åŠ ä¸€ä¸ªï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_heading(<span class="hljs-string">'The REAL meaning of the universe'</span>)<br></code></pre></td></tr></tbody></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¼šæ·»åŠ é¡¶çº§æ ‡é¢˜ï¼ŒWordä¸­æ˜¾ç¤ºä¸ºâ€œæ ‡é¢˜1â€ã€‚å½“æ‚¨éœ€è¦å­èŠ‚çš„æ ‡é¢˜æ—¶ï¼Œåªéœ€æŒ‡å®šæ‰€éœ€çš„çº§åˆ«ä¸º1åˆ°9ä¹‹é—´çš„æ•´æ•°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_heading(<span class="hljs-string">'The role of dolphins'</span>, level=<span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæŒ‡å®šçº§åˆ«0ï¼Œå°†æ·»åŠ â€œæ ‡é¢˜â€æ®µè½ã€‚è¿™å¯ä»¥æ–¹ä¾¿åœ°å¯åŠ¨ä¸€ä¸ªç›¸å¯¹è¾ƒçŸ­çš„æ–‡æ¡£ï¼Œæ²¡æœ‰å•ç‹¬çš„æ ‡é¢˜é¡µã€‚</p><h3 id="æ·»åŠ åˆ†é¡µç¬¦">æ·»åŠ åˆ†é¡µç¬¦</h3><p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œä½ æƒ³è¦ä¸‹ä¸€ä¸ªæ–‡æœ¬åœ¨ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼Œå³ä½¿ä½ æ‰€åœ¨çš„ä¸€ä¸ªä¸æ˜¯æ»¡çš„ã€‚â€œhardâ€åˆ†é¡µç¬¦å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_page_break()<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœä½ å‘ç°è‡ªå·±ç»å¸¸ä½¿ç”¨å®ƒï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œä½ å¯ä»¥é€šè¿‡æ›´å¥½åœ°äº†è§£æ®µè½æ ·å¼å—ç›Šã€‚å¯è®¾ç½®çš„ä¸€ä¸ªæ®µè½æ ·å¼å±æ€§æ˜¯åœ¨åŒ…å«è¯¥æ ·å¼çš„æ¯ä¸ªæ®µè½ä¹‹å‰ç«‹å³æ–­å¼€é¡µé¢ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥å°†æ ‡é¢˜è®¾ç½®ä¸ºæŸä¸ªçº§åˆ«ï¼Œä»¥ä¾¿å§‹ç»ˆå¯åŠ¨æ–°é¡µé¢ã€‚æ›´å¤šé£æ ¼åã€‚å®ƒä»¬å¯¹äºçœŸæ­£å……åˆ†åˆ©ç”¨Wordè‡³å…³é‡è¦ã€‚</p><h3 id="æ·»åŠ è¡¨">æ·»åŠ è¡¨</h3><p>ä¸€ä¸ªç»å¸¸é‡åˆ°çš„å†…å®¹ï¼Œå®ƒè‡ªå·±çš„è¡¨æ ¼å‘ˆç°ï¼Œæ’åˆ—åœ¨æ•´é½çš„è¡Œå’Œåˆ—ã€‚Wordåœ¨è¿™æ–¹é¢åšå¾—ç›¸å½“ä¸é”™ã€‚ä»¥ä¸‹æ˜¯æ·»åŠ è¡¨æ ¼çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">table = document.add_table(rows=<span class="hljs-number">2</span>, cols=<span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¡¨å…·æœ‰å‡ ä¸ªå±æ€§å’Œæ–¹æ³•ï¼Œæ‚¨å°†éœ€è¦å®ƒä»¬æ¥å¡«å……å®ƒä»¬ã€‚è®¿é—®å•ä¸ªå•å…ƒæ ¼å¯èƒ½æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹çš„åœ°æ–¹ã€‚ä½œä¸ºåŸºçº¿ï¼Œæ‚¨å¯ä»¥å§‹ç»ˆæŒ‰å…¶è¡Œå’Œåˆ—æŒ‡ç¤ºè®¿é—®å•å…ƒæ ¼ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cell = table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">#æ ¹æ®è¡Œåˆ—æŒ‡å®š</span><br></code></pre></td></tr></tbody></table></figure><p>è¿™å°±ç»™å‡ºäº†æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„è¡¨æ ¼æœ€ä¸Šé¢ä¸€è¡Œçš„å³è¾¹å•å…ƒæ ¼ã€‚æ³¨æ„ï¼Œè¡Œå’Œåˆ—æŒ‡ç¤ºæ˜¯åŸºäºé›¶çš„ï¼Œå°±åƒåœ¨åˆ—è¡¨è®¿é—®ä¸­ä¸€æ ·ã€‚</p><p>ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥æŠŠä¸œè¥¿åœ¨å®ƒï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cell.text = <span class="hljs-string">'parrot, possibly dead'</span><br></code></pre></td></tr></tbody></table></figure><p>é€šå¸¸ï¼Œä¸€æ¬¡è®¿é—®ä¸€è¡Œå•å…ƒæ ¼æ›´å®¹æ˜“ï¼Œä¾‹å¦‚ï¼Œå½“ä»æ•°æ®æºå¡«å……å¯å˜é•¿åº¦çš„è¡¨æ—¶ã€‚åœ¨<code>.rows</code> ä¸€ä¸ªè¡¨ä¸­çš„å±æ€§æä¾›ç»™å•ç‹¬çš„è¡Œï¼Œæ¯ä¸ªéƒ½å…·æœ‰ä¸€ä¸ª <code>.cells</code>å±æ€§ã€‚è¯¥<code>.cells</code>ä¸¤ä¸ªç‰©ä¸š<code>Row</code>å’Œ<code>Column</code> æ”¯æŒç´¢å¼•è®¿é—®ï¼Œå°±åƒä¸€ä¸ªåˆ—è¡¨ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">row = table.rows[<span class="hljs-number">1</span>]<br>row.cells[<span class="hljs-number">0</span>].text = <span class="hljs-string">'Foo bar to you.'</span><br>row.cells[<span class="hljs-number">1</span>].text = <span class="hljs-string">'And a hearty foo bar to you too sir!'</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨<code>.rows</code>å’Œ<code>.columns</code>æ¡Œå­ä¸Šçš„é›†åˆæ˜¯å¯è¿­ä»£çš„ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨ä½¿ç”¨å®ƒä»¬<code>for</code>å¾ªç¯ã€‚ç›¸åŒçš„<code>.cells</code>ä¸Šè¡Œæˆ–åˆ—åºåˆ—ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> table.rows:<br>    <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> row.cells:<br>        <span class="hljs-built_in">print</span>(cell.text)<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœä½ æƒ³åœ¨è¡¨ä¸­çš„è¡Œæˆ–åˆ—çš„è®¡æ•°ï¼Œåªè¦ä½¿ç”¨<code>len()</code>çš„é¡ºåºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">row_count = <span class="hljs-built_in">len</span>(table.rows)<br>col_count = <span class="hljs-built_in">len</span>(table.columns)<br></code></pre></td></tr></tbody></table></figure><p>æ‚¨è¿˜å¯ä»¥ä»¥é€’å¢æ–¹å¼å‘è¡¨ä¸­æ·»åŠ è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">row = table.add_row()<br></code></pre></td></tr></tbody></table></figure><p>è¿™å¯¹äºæˆ‘ä»¬ä¸Šé¢æåˆ°çš„å¯å˜é•¿åº¦è¡¨åœºæ™¯éå¸¸æ–¹ä¾¿ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># get table data -------------</span><br>items = get_things_from_database_or_something()<br> <br><span class="hljs-comment"># add table ------------------</span><br>table = document.add_table(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br> <br><span class="hljs-comment"># populate header row --------</span><br>heading_cells = table.rows[<span class="hljs-number">0</span>].cells<br>heading_cells[<span class="hljs-number">0</span>].text = <span class="hljs-string">'Qty'</span><br>heading_cells[<span class="hljs-number">1</span>].text = <span class="hljs-string">'SKU'</span><br>heading_cells[<span class="hljs-number">2</span>].text = <span class="hljs-string">'Description'</span><br> <br><span class="hljs-comment"># add a data row for each item</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:<br>    cells = table.add_row().cells<br>    cells[<span class="hljs-number">0</span>].text = <span class="hljs-built_in">str</span>(item.qty)<br>    cells[<span class="hljs-number">1</span>].text = item.sku<br>    cells[<span class="hljs-number">2</span>].text = item.desc<br></code></pre></td></tr></tbody></table></figure><p>åŒæ ·çš„å·¥ä½œå¯¹åˆ—ï¼Œè™½ç„¶æˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°å®ƒçš„ä¸€ä¸ªç”¨ä¾‹ã€‚</p><p>Wordå…·æœ‰ä¸€ç»„é¢„æ ¼å¼åŒ–çš„è¡¨æ ¼æ ·å¼ï¼Œæ‚¨å¯ä»¥ä»å…¶è¡¨æ ¼æ ·å¼åº“ä¸­é€‰æ‹©ã€‚æ‚¨å¯ä»¥å°†å…¶ä¸­çš„ä¸€ä¸ªåº”ç”¨äºè¡¨æ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">table.style = <span class="hljs-string">'LightShading-Accent1'</span><br></code></pre></td></tr></tbody></table></figure><p>é€šè¿‡ä»è¡¨æ ·å¼åç§°ä¸­åˆ é™¤æ‰€æœ‰ç©ºæ ¼å½¢æˆæ ·å¼åç§°ã€‚é€šè¿‡å°†é¼ æ ‡æ‚¬åœåœ¨Wordçš„è¡¨æ ·å¼åº“ä¸­çš„ç¼©ç•¥å›¾ä¸Šï¼Œå¯ä»¥æ‰¾åˆ°è¡¨æ ·å¼åç§°ã€‚</p><h3 id="æ·»åŠ å›¾ç‰‡">æ·»åŠ å›¾ç‰‡</h3><p>Wordä¸­ï¼Œæ‚¨å¯ä»¥å°†å›¾åƒä½¿ç”¨çš„æ–‡æ¡£ä¸­çš„èœå•é¡¹ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼š<code>Insert &gt; Photo &gt; Picture fromfile...``python-docx</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_picture(<span class="hljs-string">'image-filename.png'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æ­¤ç¤ºä¾‹ä½¿ç”¨è·¯å¾„ï¼Œä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½å›¾åƒæ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<em>ç±»æ–‡ä»¶å¯¹è±¡</em>ï¼Œæœ¬è´¨ä¸Šå°±åƒä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶çš„ä»»ä½•å¯¹è±¡ã€‚å¦‚æœæ‚¨ä»æ•°æ®åº“æˆ–ç½‘ç»œæ£€ç´¢å›¾åƒï¼Œå¹¶ä¸”ä¸æƒ³è·å–æ¶‰åŠçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™å¯èƒ½å¾ˆæ–¹ä¾¿ã€‚</p><h4 id="å›¾åƒå¤§å°">å›¾åƒå¤§å°</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ·»åŠ å›¾åƒå‡ºç°åœ¨<em>æœ¬åœ°</em>çš„å¤§å°ã€‚è¿™é€šå¸¸æ¯”ä½ æƒ³è¦çš„æ›´å¤§ã€‚æœ¬æœºå¤§å°çš„è®¡ç®—æ–¹æ³•ã€‚å› æ­¤ï¼Œå…·æœ‰300dpiåˆ†è¾¨ç‡çš„300Ã—300åƒç´ å›¾åƒå‡ºç°åœ¨ä¸€å¹³æ–¹è‹±å¯¸ã€‚é—®é¢˜æ˜¯å¤§å¤šæ•°å›¾åƒä¸åŒ…å«dpiå±æ€§ï¼Œå®ƒé»˜è®¤ä¸º72 dpiã€‚è¿™å°†ä½¿åŒä¸€å›¾åƒåœ¨ä¸€è¾¹ï¼Œåœ¨ä¸€åŠå·¦å³çš„æŸå¤„å‡ºç°4.167è‹±å¯¸ã€‚<code>pixels / dpi</code></p><p>è¦è·å¾—æ‰€éœ€çš„å›¾åƒå¤§å°ï¼Œæ‚¨å¯ä»¥ä»¥æ–¹ä¾¿çš„å•ä½æŒ‡å®šå…¶å®½åº¦æˆ–é«˜åº¦ï¼Œå¦‚è‹±å¯¸æˆ–å˜ç±³ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Inches<br>document.add_picture(<span class="hljs-string">'image-filename.png'</span>, width=Inches(<span class="hljs-number">1.0</span>))<br></code></pre></td></tr></tbody></table></figure><p>ä½ å¯ä»¥è‡ªç”±åœ°æŒ‡å®šå®½åº¦å’Œé«˜åº¦ï¼Œä½†é€šå¸¸ä½ ä¸æƒ³è¦ã€‚å¦‚æœä»…æŒ‡å®šä¸€ä¸ªï¼Œ<code>python-docx</code>ç”¨å®ƒæ¥è®¡ç®—å‡ºå…¶ä»–çš„é€‚å½“æ¢ç®—å€¼ã€‚è¿™æ ·çš„<em>é«˜å®½æ¯”</em>æ˜¯ä¿ç•™çš„ï¼Œä½ çš„å›¾åƒçœ‹èµ·æ¥ä¸æ‹‰ä¼¸ã€‚</p><p>åœ¨<code>Inches</code>å’Œ<code>Cm</code>æä¾›è¯¾ç¨‹ï¼Œè®©ä½ æŒ‡å®šæ´¾ä¸Šç”¨åœºå•ä½è¿›è¡Œæµ‹é‡ã€‚åœ¨å†…éƒ¨ï¼Œ<code>python-docx</code>ä½¿ç”¨è‹±è¯­å…¬åˆ¶å•ä½ï¼Œ914400ä¸ºè‹±å¯¸ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¿˜è®°äº†ï¼Œåªæ˜¯æŠŠå–œæ¬¢çš„ä¸œè¥¿<code>width=2</code>ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªéå¸¸å°çš„å›¾åƒ:)ã€‚ä½ éœ€è¦ä»å¯¼å…¥<code>docx.shared</code> å­åŒ…ã€‚ä½ å¯ä»¥åœ¨ç®—æœ¯ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå°±åƒå®ƒä»¬æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œäº‹å®ä¸Šå®ƒä»¬æ˜¯ã€‚å› æ­¤ï¼Œåƒä¸€ä¸ªè¡¨è¾¾å¼çš„ä½œå“å°±å¥½äº†ã€‚<code>width = Inches(3) /thing_count</code></p><h3 id="åº”ç”¨æ®µè½æ ·å¼">åº”ç”¨æ®µè½æ ·å¼</h3><p>å¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªWordæ®µè½é£æ ¼æ˜¯ä½ åº”è¯¥è‚¯å®šæ£€æŸ¥å‡ºæ¥ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒå…è®¸æ‚¨å°†ä¸€æ•´å¥—æ ¼å¼åŒ–é€‰é¡¹ç«‹å³åº”ç”¨åˆ°æ®µè½ã€‚è¿™å¾ˆåƒCSSæ ·å¼ï¼Œå¦‚æœä½ çŸ¥é“é‚£äº›æ˜¯ã€‚</p><p>æ‚¨å¯ä»¥åœ¨åˆ›å»ºæ®µè½æ—¶åº”ç”¨æ®µè½æ ·å¼ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>, style=<span class="hljs-string">'ListBullet'</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¿™ç§ç‰¹æ®Šçš„é£æ ¼å¯¼è‡´æ®µè½æ˜¾ç¤ºä¸ºä¸€ä¸ªå­å¼¹ï¼Œä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„ä¸œè¥¿ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ä¹‹ååº”ç”¨æ ·å¼ã€‚è¿™ä¸¤è¡Œç›¸å½“äºä¸Šé¢çš„ä¸€è¡Œï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">paragraph = document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>)<br>paragraph.style = <span class="hljs-string">'ListBullet'</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ ·å¼ä½¿ç”¨å…¶æ ·å¼IDâ€œListBulletâ€æŒ‡å®šã€‚é€šå¸¸ï¼Œé€šè¿‡å»é™¤æ ·å¼åç§°ä¸­å‡ºç°åœ¨Wordç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ä¸­çš„ç©ºæ ¼æ¥å½¢æˆæ ·å¼IDã€‚æ‰€ä»¥é£æ ¼â€™åˆ—è¡¨3å·â€™å°†è¢«æŒ‡å®šä¸º<code>'ListNumber3'</code>ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æœ¬åœ°åŒ–ç‰ˆæœ¬çš„Wordï¼Œåˆ™æ ·å¼IDå¯èƒ½æ¥è‡ªè‹±è¯­æ ·å¼åç§°ï¼Œå¹¶ä¸”å¯èƒ½ä¸ä¼šå®Œå…¨å¯¹åº”äºå…¶åœ¨Word UIä¸­çš„æ ·å¼åç§°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer2_085 ç”ŸæˆåŒ¹é…çš„æ‹¬å·</title>
    <link href="/2021/12/09/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer2-085/"/>
    <url>/2021/12/09/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer2-085/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç”ŸæˆåŒ¹é…çš„æ‹¬å·</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ­£æ•´æ•° <code>n</code> ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” <strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"((()))"</span>,<span class="hljs-string">"(()())"</span>,<span class="hljs-string">"(())()"</span>,<span class="hljs-string">"()(())"</span>,<span class="hljs-string">"()()()"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"()"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= n &lt;= 8</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å·§å¦™çš„æ·±åº¦ä¼˜å…ˆç®—æ³•ï¼Œè®°å½•ç”Ÿæˆå½“å‰çš„å­—ç¬¦ä¸²ï¼Œå·¦æ‹¬å·ï¼Œå³æ‹¬å·çš„æ•°ç›®ï¼›<br>å¦‚æœå·¦æ‹¬å·ä¸ªæ•°ä¸è¶…ï¼Œå°±å¢åŠ å·¦æ‹¬å·ï¼Œå¦‚æœå¯ä»¥å¢åŠ å³æ‹¬å·ï¼ˆ<strong>ç°æœ‰çš„å³æ‹¬å·å°äºå·¦æ‹¬å·æ•°ç›®</strong>ï¼‰ï¼Œé‚£ä¹ˆå¢åŠ å³æ‹¬å·ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateParenthesis</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">s,left,right</span>):</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)==<span class="hljs-number">2</span>*n):<br>                result.append(s)<br>            <span class="hljs-keyword">if</span>(left&lt;n):dfs(s+<span class="hljs-string">"("</span>,left+<span class="hljs-number">1</span>,right) <span class="hljs-comment">#å¦‚æœleftæ•°ç»„å°‘äºnä¸ªå°±å¢åŠ å·¦æ‹¬å·</span><br>            <span class="hljs-keyword">if</span>(left&gt;right):dfs(s+<span class="hljs-string">")"</span>,left,right+<span class="hljs-number">1</span>) <span class="hljs-comment">#å¦‚æœå¯ä»¥åŒ¹é…å·¦æ‹¬å·ï¼Œå¯ä»¥å¢åŠ å³æ‹¬å·åŒºåŒ¹é…</span><br>        result = []<br>        dfs(<span class="hljs-string">""</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer56-2 æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°â…¡</title>
    <link href="/2021/12/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer56-2/"/>
    <url>/2021/12/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer56-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°â…¡</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨ä¸€ä¸ªæ•°ç»„ <code>nums</code> ä¸­é™¤ä¸€ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸‰æ¬¡ã€‚è¯·æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">3,4,3,3</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[9,1,7,9,7,9,7]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><p><code>1 &lt;= nums.length &lt;= 10000</code></p></li><li><p><code>1 &lt;= nums[i] &lt; 2^31</code></p></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¬¡æ•°ï¼Œç„¶åå†å¯»æ‰¾æ¬¡æ•°ä¸º1çš„æ•°å­—ã€‚æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        tmap = {}<br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            tmap[num] = tmap[num]+<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num <span class="hljs-keyword">in</span> tmap <span class="hljs-keyword">else</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> tmap:<br>            <span class="hljs-keyword">if</span> tmap[num] == <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> num<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è¾¾åˆ°æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1);</p><p>å…¶æ€æƒ³æ˜¯æ¯ä¸€ä½çš„äºŒè¿›åˆ¶ä½å¯¹äºå‡ºç°3æ¬¡çš„æ•°å­—ç›¸åŠ æ˜¯3çš„å€æ•°ã€‚è¿™æ ·å¯ä»¥æŠŠæ¯ä¸€ä½ç›¸åŠ å¯¹ 3 é™¤ä½™æ•°ï¼Œå¯ä»¥å¾—åˆ°å‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer56-2.png" alt=""></p><p>å®é™…ä¸Šä¿®æ”¹ä½™æ•°mï¼Œå¯ä»¥å¾—åˆ°é€šç”¨è§£æ³•ï¼š**é™¤äº†ä¸€ä¸ªæ•°å­—ä»¥å¤–ï¼Œå…¶ä½™æ•°å­—éƒ½å‡ºç° m æ¬¡ **</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        counts = [<span class="hljs-number">0</span>] * <span class="hljs-number">32</span> <span class="hljs-comment">#è®°å½•æ¯ä¸€ä½çš„å’Œ</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>):<br>                counts[j] += num &amp; <span class="hljs-number">1</span><br>                num &gt;&gt;= <span class="hljs-number">1</span> <span class="hljs-comment">#å³ç§»1ä½</span><br>        res, m = <span class="hljs-number">0</span>, <span class="hljs-number">3</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>):<br>            res &lt;&lt;= <span class="hljs-number">1</span><br>            res |= counts[<span class="hljs-number">31</span> - i] % m  <span class="hljs-comment"># ä½æˆ–è¿ç®— ä»é«˜ä½å¼€å§‹ç„¶åå·¦ç§»è¿ç®—</span><br>        <span class="hljs-keyword">return</span> res <span class="hljs-comment"># if counts[31] % m == 0 else ~(res ^ 0xffffffff) #æœ€é«˜ä½ä¸º0åˆ™ä¸ºæ­£æ•°ï¼Œå¦åˆ™ä¸ºè´Ÿæ•°</span><br></code></pre></td></tr></tbody></table></figure><p>è´Ÿæ•°æ­¤å¤„çš„æ“ä½œæ²¡æœ‰çœ‹æ‡‚ã€‚ç»æµ‹è¯•ï¼Œç›´æ¥return reså³å¯ã€‚</p><blockquote><p>ç”±äº Python çš„å­˜å‚¨è´Ÿæ•°çš„ç‰¹æ®Šæ€§ï¼Œéœ€è¦å…ˆå°† 0 - 32 ä½å–åï¼ˆå³ res ^ 0xffffffff ï¼‰ï¼Œå†å°†æ‰€æœ‰ä½å–åï¼ˆå³ ~ ï¼‰ã€‚<strong>^è¡¨ç¤ºäºŒè¿›åˆ¶å¼‚æˆ–è¿ç®—</strong><br>ä¸¤ä¸ªç»„åˆæ“ä½œå®è´¨ä¸Šæ˜¯å°†æ•°å­— 32 ä»¥ä¸Šä½å–åï¼Œ 0 - 32 ä½ä¸å˜ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡53-1 æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°</title>
    <link href="/2021/12/07/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode53-1/"/>
    <url>/2021/12/07/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode53-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€ä¸ªæ•´å‹æ•°ç»„ <code>nums</code> é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[4,1,4,6]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,6]</span> æˆ– <span class="hljs-comment">[6,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[1,2,10,4,1,4,3,3]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,10]</span> æˆ– <span class="hljs-comment">[10,2]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>2 &lt;= nums.length &lt;= 10000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åˆ©ç”¨mapæ¥è®°å½•æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå†éå†mapå¾—åˆ°æ¬¡æ•°ä¸º1çš„æ•°ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumbers</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        info = {}<br>        result = []<br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(num <span class="hljs-keyword">in</span> info):info[num]=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:info[num] += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> info:<br>            <span class="hljs-keyword">if</span>(info[key]==<span class="hljs-number">1</span>):result.append(key)<br>        <span class="hljs-keyword">return</span> result<br>        <span class="hljs-comment">#è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)</span><br></code></pre></td></tr></tbody></table></figure><p>å› ä¸ºè¦ä¿è¯ç©ºé—´å¤æ‚åº¦ä¸ºO(1),éœ€è¦å¦è¾Ÿè¹Šå¾„ï¼Œæ³¨æ„åˆ°ä¸€ä¸ªå®šç†ï¼ŒaâŠ•a = 0 0âŠ•a=aï¼Œå¹¶ä¸”æ»¡è¶³äº¤æ¢å¾‹ï¼Œå› æ­¤å¦‚æœåªæœ‰ä¸€ä¸ªæ•°å­—xåªå‡ºç°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°†æ‰€æœ‰çš„æ•°å­—è¿›è¡Œå¼‚æˆ–æ“ä½œå¾—åˆ°çš„ç»“æœå°±æ˜¯x</p><p>å•ä¸ªæ•°å­—ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>    x = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:  <span class="hljs-comment"># 1. éå† nums æ‰§è¡Œå¼‚æˆ–è¿ç®—</span><br>        x ^= num      <br>    <span class="hljs-keyword">return</span> x;         <span class="hljs-comment"># 2. è¿”å›å‡ºç°ä¸€æ¬¡çš„æ•°å­— x</span><br></code></pre></td></tr></tbody></table></figure><p>ç°åœ¨æ˜¯ä¸¤ä¸ªæ•°å­—ï¼Œå› æ­¤æ‰€æœ‰æ•°å­—çš„å¼‚æˆ–æ˜¯xâŠ•yï¼Œè¿™ä¸¤ä¸ªæ•°å­—æ€ä¹ˆåŒºåˆ†å‘¢ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªæ•°å­—ä¸åŒçš„ä¸€ä½ï¼ˆåˆ©ç”¨&amp;ï¼‰ã€‚ç„¶åå†è¿›è¡Œå¼‚æˆ–åˆ†ç±»ï¼Œæ‰¾åˆ°ä¸¤ä¸ªå€¼ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumbers</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-comment">#x1å¼‚æˆ–x2.... ç»“æœå¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ä¸¤ä¸ªä¸åŒçš„æ•°å¼‚æˆ– xå¼‚æˆ–y</span><br>        a,x,y = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            a = a^num<br>        m = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> m&amp;a==<span class="hljs-number">0</span>: m = m&lt;&lt;<span class="hljs-number">1</span> <span class="hljs-comment">#æ‰¾åˆ°ä¸åŒä½</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span>(m&amp;num):x^=num<br>            <span class="hljs-keyword">else</span>:y^=num<br>        <span class="hljs-keyword">return</span> [x,y]<br></code></pre></td></tr></tbody></table></figure><p>è¿˜ä¸æ¸…æ¥šçš„è¯ï¼Œå¯ä»¥å‚è€ƒè§£é‡Šä»£ç å“¦~</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span>[] singleNumbers(<span class="hljs-keyword">int</span>[] nums) {<br>        <span class="hljs-comment">//å› ä¸ºç›¸åŒçš„æ•°å­—å¼‚æˆ–ä¸º0ï¼Œä»»ä½•æ•°å­—ä¸0å¼‚æˆ–ç»“æœæ˜¯å…¶æœ¬èº«ã€‚</span><br>        <span class="hljs-comment">//æ‰€ä»¥éå†å¼‚æˆ–æ•´ä¸ªæ•°ç»„æœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—å¼‚æˆ–çš„ç»“æœï¼šå³ z = x ^ y</span><br>        <span class="hljs-keyword">int</span> z = <span class="hljs-number">0</span>;  <br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i : nums) z ^= i;<br>        <span class="hljs-comment">//æˆ‘ä»¬æ ¹æ®å¼‚æˆ–çš„æ€§è´¨å¯ä»¥çŸ¥é“ï¼šzä¸­è‡³å°‘æœ‰ä¸€ä½æ˜¯1ï¼Œå¦åˆ™xä¸yå°±æ˜¯ç›¸ç­‰çš„ã€‚</span><br>        <span class="hljs-comment">//æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè¾…åŠ©å˜é‡mæ¥ä¿å­˜zä¸­å“ªä¸€ä½ä¸º1.ï¼ˆå¯èƒ½æœ‰å¤šä¸ªä½éƒ½ä¸º1ï¼Œæˆ‘ä»¬æ‰¾åˆ°æœ€ä½ä½çš„1å³å¯ï¼‰ã€‚</span><br>        <span class="hljs-comment">//ä¸¾ä¸ªä¾‹å­ï¼šz = 10 ^ 2 = 1010 ^ 0010 = 1000,ç¬¬å››ä½ä¸º1.</span><br>        <span class="hljs-comment">//æˆ‘ä»¬å°†måˆå§‹åŒ–ä¸º1ï¼Œå¦‚æœï¼ˆz &amp; mï¼‰çš„ç»“æœç­‰äº0è¯´æ˜zçš„æœ€ä½ä¸ºæ˜¯0</span><br>        <span class="hljs-comment">//æˆ‘ä»¬æ¯æ¬¡å°†må·¦ç§»ä¸€ä½ç„¶åè·Ÿzåšä¸æ“ä½œï¼Œç›´åˆ°ç»“æœä¸ä¸º0.</span><br>        <span class="hljs-comment">//æ­¤æ—¶måº”è¯¥ç­‰äº1000ï¼ŒåŒzä¸€æ ·ï¼Œç¬¬å››ä½ä¸º1.</span><br>        <span class="hljs-keyword">int</span> m = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span>((z &amp; m) == <span class="hljs-number">0</span>) m &lt;&lt;= <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">//æˆ‘ä»¬éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°è·Ÿmè¿›è¡Œä¸æ“ä½œï¼Œç»“æœä¸º0çš„ä½œä¸ºä¸€ç»„ï¼Œç»“æœä¸ä¸º0çš„ä½œä¸ºä¸€ç»„</span><br>        <span class="hljs-comment">//ä¾‹å¦‚å¯¹äºæ•°ç»„ï¼š[1,2,10,4,1,4,3,3]ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªæ•°å­—è·Ÿ1000åšä¸æ“ä½œï¼Œå¯ä»¥åˆ†ä¸ºä¸‹é¢ä¸¤ç»„ï¼š</span><br>        <span class="hljs-comment">//nums1å­˜æ”¾ç»“æœä¸º0çš„: [1, 2, 4, 1, 4, 3, 3]</span><br>        <span class="hljs-comment">//nums2å­˜æ”¾ç»“æœä¸ä¸º0çš„: [10] (ç¢°å·§nums2ä¸­åªæœ‰ä¸€ä¸ª10ï¼Œå¦‚æœåŸæ•°ç»„ä¸­çš„æ•°å­—å†å¤§ä¸€äº›å°±ä¸ä¼šè¿™æ ·äº†)</span><br>        <span class="hljs-comment">//æ­¤æ—¶æˆ‘ä»¬å‘ç°é—®é¢˜å·²ç»é€€åŒ–ä¸ºæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€æ¬¡</span><br>        <span class="hljs-comment">//åˆ†åˆ«å¯¹nums1å’Œnums2éå†å¼‚æˆ–å°±èƒ½å¾—åˆ°æˆ‘ä»¬é¢„æœŸçš„xå’Œy</span><br>        <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i : nums) {<br>            <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬æ˜¯é€šè¿‡if...elseå°†numsåˆ†ä¸ºäº†ä¸¤ç»„ï¼Œä¸€è¾¹éå†ä¸€éå¼‚æˆ–ã€‚</span><br>            <span class="hljs-comment">//è·Ÿæˆ‘ä»¬åˆ›å»ºä¿©æ•°ç»„nums1å’Œnums2åŸç†æ˜¯ä¸€æ ·çš„ã€‚</span><br>            <span class="hljs-keyword">if</span>((i &amp; m) == <span class="hljs-number">0</span>) x ^= i;<br>            <span class="hljs-keyword">else</span> y ^= i;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]{x, y};<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer34 äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</title>
    <link href="/2021/12/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer34/"/>
    <url>/2021/12/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer34/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚</p><p>å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode34-1.jpg" alt=""></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šroot = [<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">11</span>,null,<span class="hljs-number">13</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">2</span>,null,null,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>], targetSum = <span class="hljs-number">22</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[5,4,11,2],[5,8,4,5]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode34-2.jpg" alt=""></p><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šroot = <span class="hljs-comment">[1,2,3]</span>, targetSum = 5<br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹4ï¼š">ç¤ºä¾‹4ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šroot = <span class="hljs-comment">[1,2]</span>, targetSum = 0<br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°åœ¨èŒƒå›´ <code>[0, 5000]</code> å†…</li><li><code>-1000 &lt;= Node.val &lt;= 1000</code></li><li><code>-1000 &lt;= targetSum &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ³¨å­˜åœ¨èŠ‚ç‚¹çš„å€¼æ˜¯è´Ÿæ•°ï¼Œå› æ­¤<strong>ä¸èƒ½æŒ‰ç…§å½“å‰å¾—åˆ°çš„å’Œè¿›è¡Œå‰ªææ“ä½œ</strong>ï¼Œå¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯<strong>ä¸èƒ½å°†å¯¹è±¡append</strong>ï¼Œå¯¹è±¡çš„appendç›´æ¥å¼•ç”¨çš„ï¼Œå†åç»­ä¿®æ”¹ä¼šå½±å“åˆ°resultçš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶è¿›è¡Œcopyï¼Œæ·±æ‹·è´ï¼Œæˆ–è€…listå®ä¾‹åŒ–ä¸€ä¸‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pathSum</span>(<span class="hljs-params">self, root: TreeNode, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span> []<br>        result,nowlist = [],[]<br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findPath</span>(<span class="hljs-params">root,nowsum</span>):</span><br>            <span class="hljs-comment"># if(not root or (root and root.val + nowsum&gt;target)): return #è¿˜å­˜åœ¨è´Ÿæ•°çš„æƒ…å†µå› æ­¤ä¸èƒ½å‰ªæ</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span><br>            tsum = root.val + nowsum<br>            nowlist.append(root.val)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root.left <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> root.right <span class="hljs-keyword">and</span> tsum==target):<br>                result.append(nowlist.copy()) <span class="hljs-comment">#ä¸èƒ½éšä¾¿å°†ä¸€ä¸ªå¯¹è±¡appendè¿›å»ï¼Œåç»­æ­¤å¯¹è±¡å‡ºç°å˜åŒ–ï¼Œä¼šå½±å“åˆ°result</span><br>            findPath(root.left,tsum)<br>            findPath(root.right,tsum)<br>            nowlist.pop()<br>               <br>        findPath(root,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer372 è¶…çº§æ¬¡æ–¹</title>
    <link href="/2021/12/05/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer372/"/>
    <url>/2021/12/05/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer372/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¶…çº§æ¬¡æ–¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®— ab å¯¹ 1337 å–æ¨¡ï¼Œa æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œb æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•´æ•°ä¸”ä¼šä»¥æ•°ç»„å½¢å¼ç»™å‡ºã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">8</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[1,0]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1024</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[4,3,3,8,5,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2147483647</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[2,0,0]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1198</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= a &lt;= 231 - 1</li><li>1 &lt;= b.length &lt;= 2000</li><li>0 &lt;= b[i] &lt;= 9</li><li>b ä¸å«å‰å¯¼ 0</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨mathæ¨¡å—</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br>math.<span class="hljs-built_in">pow</span>( x, y )<br></code></pre></td></tr></tbody></table></figure><p>å†…ç½®çš„powæ–¹æ³•<br><code>pow(x, y[, z])</code></p><p>å‡½æ•°æ˜¯è®¡ç®— x çš„ y æ¬¡æ–¹ï¼Œå¦‚æœ z åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº pow(x,y) %zã€‚</p><p><strong>æ³¨æ„ï¼špow() é€šè¿‡å†…ç½®çš„æ–¹æ³•ç›´æ¥è°ƒç”¨ï¼Œå†…ç½®æ–¹æ³•ä¼šæŠŠå‚æ•°ä½œä¸ºæ•´å‹ï¼Œè€Œ math æ¨¡å—åˆ™ä¼šæŠŠå‚æ•°è½¬æ¢ä¸º floatã€‚</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">superPow</span>(<span class="hljs-params">self, a: <span class="hljs-built_in">int</span>, b: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        result = <span class="hljs-number">1</span><br>        mod = <span class="hljs-number">1337</span><br>        <span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(b):<br>            temp = <span class="hljs-built_in">pow</span>(a,x,mod)<br>            result = result*temp%mod <br>            <span class="hljs-keyword">if</span>(i&lt;<span class="hljs-built_in">len</span>(b)-<span class="hljs-number">1</span>):result = <span class="hljs-built_in">pow</span>(result,<span class="hljs-number">10</span>,mod)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><p>å’ŒäºŒè¿›åˆ¶æ±‚åè¿›åˆ¶çš„æ€æƒ³ç±»ä¼¼ï¼Œå½“å‰ä½æ±‚å¾—ä¹‹åå†ä¹˜ä»¥10çš„åŸºåº•ï¼Œç»§ç»­é‡å¤,</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer33</title>
    <link href="/2021/12/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer33/"/>
    <url>/2021/12/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer33/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘çš„åç»­éå†åºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚</p><p>å‚è€ƒä»¥ä¸‹è¿™é¢—äºŒå‰æœç´¢æ ‘</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">    <span class="hljs-number">5</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">2</span>   <span class="hljs-number">6</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">1</span>   <span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1,6,3,2,5]</span><br><span class="hljs-section">è¾“å‡º: false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1,3,2,6,5]</span><br><span class="hljs-section">è¾“å‡º: true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>æ•°ç»„é•¿åº¦ &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é‡‡ç”¨é€’å½’çš„æ–¹å¼ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºrootï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”rootå¤§çš„å€¼ï¼Œä½œä¸ºå·¦å­æ ‘çš„åŒºåŸŸï¼Œæ¯”è¾ƒå·¦å­æ ‘åŒºåŸŸçš„å€¼æ ¸å¯¹æ˜¯å¦å¤§äºrootå³å¯ï¼Œç„¶åæ¯”è¾ƒå·¦å³å­æ ‘ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verifyPostorder</span>(<span class="hljs-params">self, postorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> postorder <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(postorder)==<span class="hljs-number">1</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        root = postorder[<span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span>]<br>        result,flag = <span class="hljs-literal">True</span>,<span class="hljs-literal">True</span><br>        index = <span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(postorder):<br>            result = x&gt;=root <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> flag <span class="hljs-keyword">and</span> result <span class="hljs-keyword">else</span> result<br>            <span class="hljs-comment"># if(not flag and x&lt;root):</span><br>            <span class="hljs-comment">#     result = False</span><br>            <span class="hljs-comment">#     break</span><br>            <span class="hljs-comment"># result = x&gt;root if not flag else True</span><br>            <span class="hljs-keyword">if</span>(flag <span class="hljs-keyword">and</span> x&gt;root):<br>                index = i<br>                flag = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> result <span class="hljs-keyword">and</span> self.verifyPostorder(postorder[:index-<span class="hljs-number">1</span>]) <span class="hljs-keyword">and</span> self.verifyPostorder(postorder[index:<span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span>])<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dcmæ–‡ä»¶è½¬æ¢ä¸º3Dçš„niiæ–‡ä»¶</title>
    <link href="/2021/11/26/python/img/dcm2nii/"/>
    <url>/2021/11/26/python/img/dcm2nii/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•dcmæ–‡ä»¶è½¬æ¢ä¸ºniiæ–‡ä»¶çš„ä»£ç </p></blockquote><h1>å‰è¨€</h1><p>NIfTI ä¸­çš„å›¾åƒåŸå§‹æ•°æ®ä¸€èˆ¬è¢«å­˜å‚¨æˆäº†ä¸‰ç»´å›¾åƒï¼Œè€Œdicomå­˜å‚¨ä¸ºäºŒç»´å›¾å±‚ï¼Œæ‰€ä»¥ç›¸å¯¹äºDICOMæ–‡ä»¶ï¼ŒNIFTIæ–‡ä»¶æ›´åŠ æ˜“ç”¨äºæœºå™¨å­¦ä¹ ï¼Œå› ä¸ºNIfTI æ˜¯ä¸‰ç»´å›¾åƒï¼Œå¤„ç†ä¸€ä¸ªå•ç‹¬çš„NIfTI æ–‡ä»¶è¦æ¯”å¤„ç†æˆç™¾ä¸Šåƒä¸ªDICOMæ–‡ä»¶æ›´åŠ å®¹æ˜“ä¸€äº›ã€‚</p><h1>åŒ»å­¦å›¾åƒæ ¼å¼</h1><p>DICOM å’Œ NIFTI æ˜¯æœ€å¸¸ç”¨çš„æ ¼å¼ï¼Œä¸‹é¢å¯¹å…¶è¿›è¡Œç®€å•ä»‹ç»ã€‚</p><h2 id="DICOM">DICOM</h2><p>DICOM ä»£è¡¨çš„æ˜¯åŒ»ç–—æ•°å­—æˆåƒå’Œé€šä¿¡ã€‚DICOM æ˜¯ç”±ç¾å›½å›½å®¶ç”µæ°”åˆ¶é€ å•†åä¼šï¼ˆNEMAï¼‰åˆ¶å®šçš„æ ‡å‡†ã€‚å®ƒå®šä¹‰äº†åŒ»ç–—æˆåƒé¢†åŸŸä¸­å…³äºä¿¡æ¯å¤„ç†ã€å­˜å‚¨ã€æ‰“å°ä»¥åŠä¼ è¾“çš„æ ‡å‡†ï¼Œè¿™äº›éƒ½æ˜¯ä½ åœ¨æ‰«æä»ªæˆ–è€…æŸå®¶åŒ»é™¢çš„å›¾ç‰‡å½’æ¡£å’Œé€šä¿¡ç³»ç»Ÿï¼ˆPACSï¼‰èƒ½å¤Ÿç«‹å³å¾—åˆ°çš„æ–‡ä»¶æ ¼å¼ã€‚<br>å®ƒåŒ…æ‹¬äº†æ–‡ä»¶æ ¼å¼å’Œèƒ½å¤Ÿæ¥æ”¶å›¾åƒä»¥åŠ DICOM æ ¼å¼çš„ç—…äººæ•°æ®çš„å®ä½“ä¹‹é—´ä½¿ç”¨ TCP/IP è¿›è¡Œé€šä¿¡çš„åè®®ã€‚</p><p>ä¸€ä¸ª DICOM æ–‡ä»¶åŒ…å«æ–‡ä»¶å¤´éƒ¨å’ŒåŒæ–‡ä»¶åçš„*.dcm å›¾åƒæ•°æ®ã€‚æ–‡ä»¶å¤´éƒ¨çš„å¤§å°å–å†³äºå®ƒæ‰€æä¾›çš„ä¿¡æ¯çš„å¤šå°‘ã€‚æ–‡ä»¶å¤´åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šç—…äººçš„ IDï¼Œç—…äººçš„å§“åï¼Œå›¾åƒçš„æ¨¡æ€ä»¥åŠå…¶ä»–ä¿¡æ¯ã€‚å®ƒå®šä¹‰äº†å¸§çš„æ•°é‡ä»¥åŠå›¾åƒçš„ç²¾åº¦ã€‚è¿™äº›ä¿¡æ¯ä¼šè¢«å›¾åƒæµè§ˆå™¨åœ¨æ˜¾ç¤ºå›¾åƒæ—¶ç”¨åˆ°ã€‚å¯¹äºä¸€ä¸ªå›¾åƒé‡‡æ ·ï¼Œä¼šæœ‰å¾ˆå¤šä¸ª DICOM æ–‡ä»¶ã€‚</p><h2 id="NIFTI">NIFTI</h2><p>Nifti æ ¼å¼æœ€åˆæ˜¯ä¸ºç¥ç»å½±åƒå­¦å‘æ˜çš„ã€‚ç¥ç»å½±åƒä¿¡æ¯å­¦æŠ€æœ¯è®¡åˆ’ï¼ˆNIFTIï¼‰å°† NIfTI æ ¼å¼é¢„è®¾ä¸º ANALYZE7.5 æ ¼å¼çš„æ›¿ä»£å“ã€‚å®ƒæœ€åˆçš„åº”ç”¨é¢†åŸŸæ˜¯ç¥ç»å½±åƒï¼Œä½†æ˜¯ä¹Ÿè¢«ç”¨åœ¨å…¶ä»–é¢†åŸŸã€‚è¿™ç§æ ¼å¼çš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯å®ƒåŒ…å«ä¸¤ä¸ªèƒ½å¤Ÿå°†æ¯ä¸ªä½“ç´ çš„ç´¢å¼•ï¼ˆi,j,kï¼‰å’Œå®ƒçš„ç©ºé—´ä½ç½®ï¼ˆx,y,zï¼‰å…³è”èµ·æ¥çš„ä»¿å°„åæ ‡ã€‚</p><h4 id="ä»£ç ">ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><br><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br><span class="hljs-keyword">import</span> os,glob<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dcm2nii</span>(<span class="hljs-params">dcms_path, nii_path</span>):</span><br>    <span class="hljs-comment"># 1.æ„å»ºdicomåºåˆ—æ–‡ä»¶é˜…è¯»å™¨ï¼Œå¹¶æ‰§è¡Œï¼ˆå³å°†dicomåºåˆ—æ–‡ä»¶â€œæ‰“åŒ…æ•´åˆâ€ï¼‰</span><br>    reader = sitk.ImageSeriesReader()<br>    dicom_names = reader.GetGDCMSeriesFileNames(dcms_path)<br>    reader.SetFileNames(dicom_names)<br>    image2 = reader.Execute()<br>    <span class="hljs-comment"># 2.å°†æ•´åˆåçš„æ•°æ®è½¬ä¸ºarrayï¼Œå¹¶è·å–dicomæ–‡ä»¶åŸºæœ¬ä¿¡æ¯</span><br>    image_array = sitk.GetArrayFromImage(image2)  <span class="hljs-comment"># z, y, x</span><br>    origin = image2.GetOrigin()  <span class="hljs-comment"># x, y, z</span><br>    spacing = image2.GetSpacing()  <span class="hljs-comment"># x, y, z</span><br>    direction = image2.GetDirection()  <span class="hljs-comment"># x, y, z</span><br>    <span class="hljs-comment"># 3.å°†arrayè½¬ä¸ºimgï¼Œå¹¶ä¿å­˜ä¸º.nii.gz</span><br>    image3 = sitk.GetImageFromArray(image_array)<br>    image3.SetSpacing(spacing)<br>    image3.SetDirection(direction)<br>    image3.SetOrigin(origin)<br>    sitk.WriteImage(image3, nii_path)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<br>    filelist = glob.glob(<span class="hljs-string">"./data/AD_result/I*"</span>)<br>    save_path = <span class="hljs-string">"./data/AD_nii"</span><br>    os.makedirs(save_path,exist_ok=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">for</span> dcms_path <span class="hljs-keyword">in</span> filelist:<br>        dirname = dcms_path.split(os.path.sep)[-<span class="hljs-number">1</span>]<br>        nii_path = os.path.join(save_path,dirname+ <span class="hljs-string">".nii"</span>)<br>        <span class="hljs-built_in">print</span>(nii_path)<br>       <span class="hljs-comment"># r'.\test.nii.gz'  # æ‰€éœ€.nii.gzæ–‡ä»¶ä¿å­˜è·¯å¾„</span><br>        dcm2nii(dcms_path, nii_path)<br><br></code></pre></td></tr></tbody></table></figure><h1>å›¾åƒè‡ªåŠ¨å¤„ç†å·¥å…·SimpleITKçš„ä½¿ç”¨</h1><p>å‚è€ƒï¼š<a href="https://www.ebaina.com/articles/140000012739">https://www.ebaina.com/articles/140000012739</a></p><h4 id="å®‰è£…SimpleITKåº“">å®‰è£…SimpleITKåº“</h4><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œä»»æ„ä½ç½®è¾“å…¥ï¼š<br>  pip <span class="hljs-keyword">install</span> SimpleITK<br></code></pre></td></tr></tbody></table></figure><h3 id="SimpleITKå¤„ç†åŒ»å­¦å›¾åƒ">SimpleITKå¤„ç†åŒ»å­¦å›¾åƒ</h3><p>åšåŒ»å­¦å›¾åƒæ—¶ï¼ŒSimpleITKæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„åº“ã€‚å®é™…ä¸Šå¤§å®¶å¾€å¾€å–œæ¬¢æŠŠä¸åŒç±»å‹çš„æ•°æ®å‰²è£‚å¼€ï¼Œnrrdç”¨pynrrdå¤„ç†ï¼Œdicomç”¨dicomå¤„ç†ï¼Œniiç”¨nibabelå¤„ç†â€¦â€¦å®é™…ä¸Šæ ¹æœ¬æ²¡å¿…è¦ï¼ŒSimpleITKå®Œå…¨å¯ä»¥ç»Ÿä¸€å¤„ç†ï¼Œå„ç§ç±»å‹çš„è¯»å–å’Œä¿å­˜ä¸€æ­¥æå®šã€‚</p><h4 id="è¯»å–">è¯»å–</h4><h5 id="DICOM-2">DICOM</h5><p>é¦–å…ˆæ˜¯æœ€å¸¸è§çš„DICOMã€‚è¿™ä¸ªæ–‡ä»¶æ ¼å¼æ˜¯CTæœºå™¨ç›´æ¥è¾“å‡ºçš„ç»“æœï¼Œæ¯ä¸ªç—…äººä¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰è‹¥å¹²ä¸ªDICOMæ–‡ä»¶ï¼Œæ¯ä¸ªDICOMæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå¯ä»¥è¢«å•ç‹¬æŸ¥é˜…ï¼ˆé€šè¿‡SimpleITKçš„ReadImageï¼‰ã€‚ä½†æ˜¯ï¼Œå¤„ç†èµ·æ¥ä¸€èˆ¬æˆ‘ä»¬ä¼šå¸Œæœ›æŠŠè¿™äº›DICOMç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ª3Dçš„çŸ©é˜µï¼Œè¿™æ ·å°±å¯ä»¥ç”¨åˆ°SimpltITKé‡Œçš„<code>ImageSeriesReader()</code>æ¥å®ç°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>reader = sitk.ImageSeriesReader() <br>img_names = reader.GetGDCMSeriesFileNames(img_path) <br>reader.SetFileNames(img_names) <br>image = reader.Execute() <br>image_array = sitk.GetArrayFromImage(image) <span class="hljs-comment"># z, y, x </span><br></code></pre></td></tr></tbody></table></figure><h5 id="MHD">MHD</h5><p>ç„¶åè¿˜æœ‰å°±æ˜¯ã€‚è¿™ç§æ ¼å¼çš„æ–‡ä»¶ç”±ä¸€ä¸ªMHDæ–‡ä»¶å’Œä¸€ä¸ªRAWæ–‡ä»¶ç»„æˆï¼Œå…¶ä¸­MHDé‡Œé¢æ˜¯ç—…äººå’ŒCTæ‰«æç»“æœçš„ç›¸å…³ä¿¡æ¯ï¼ŒRAWé‡Œé¢å­˜çš„æ˜¯çœŸæ­£çš„æ•°ç»„ï¼Œå¯¹äºè¿™ç§æ ¼å¼ï¼ŒSimpleITKå¯ä»¥è¿™æ ·è¯»å–ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(filename) <br>img_array = sitk.GetArrayFromImage(itk_img) <br></code></pre></td></tr></tbody></table></figure><h5 id="NII">NII</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(filename)<br>img_array = sitk.GetArrayFromImage(itk_img) <br></code></pre></td></tr></tbody></table></figure><p>ä¸è¿‡ï¼Œå¯¹äºNIIç±»å‹çš„æ–‡ä»¶ï¼ŒSimpleITKåœ¨ä¿å­˜ä¸Šä¼šæœ‰ä¸€äº›é—®é¢˜ï¼ˆè¯»å–æ²¡é—®é¢˜ä¿å­˜ä¸Šç«Ÿç„¶æœ‰é—®é¢˜æˆ‘çœŸæ˜¯æœäº†ï¼‰ï¼Œå¦‚æœsliceçš„æ•°é‡å¾ˆå¤§ï¼ˆä¹‹å‰æœ‰ç¢°åˆ°è¿‡300å¤šä¸ªsliceçš„ï¼‰ï¼Œä¿å­˜èµ·æ¥ä¼šç›´æ¥æŠ¥é”™ï¼Œæ‰€ä»¥å¦‚æœç¢°åˆ°è¿™ç§æƒ…å†µæˆ‘ä¼šé€‰æ‹©ä¿å­˜æˆnrrdï¼ˆç”¨pynrrdåº“ï¼‰</p><h4 id="ä¿å­˜">ä¿å­˜</h4><p>è¯´åˆ°ä¿å­˜ï¼Œæœ‰å‡ ä¸ªå¤©å‘ä¸€å®šè¦è¯´ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œä¿å­˜çš„é€šç”¨ä»£ç æ˜¯ï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">savedImg = sitk.<span class="hljs-constructor">GetImageFromArray(<span class="hljs-params">outputs3D</span>)</span> <br>savedImg.<span class="hljs-constructor">SetSpacing(<span class="hljs-params">spacing</span>)</span><br>savedImg.<span class="hljs-constructor">SetOrigin(<span class="hljs-params">origin</span>)</span> <br>sitk.<span class="hljs-constructor">WriteImage(<span class="hljs-params">savedImg</span>, <span class="hljs-params">input_nii</span>[:-4]+'<span class="hljs-params">_liverSegResult</span>.<span class="hljs-params">nii</span>')</span><br><br></code></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªé‡Œé¢ï¼ŒSetOriginå’ŒSetSpacingæˆ‘å¸¸å¸¸ä¼šå¿˜è®°ï¼Œæ‰€ä»¥å¯¼è‡´ä¿å­˜çš„CTç”¨ITKsnapçœ‹ä¼šå˜å½¢ã€‚è¿™é‡Œé¢çš„spacingå’Œoriginå‡å¯ä»¥ä»ä¹‹å‰ReadImage()è¿”å›çš„å¯¹è±¡ä¸Šé€šè¿‡GetOrigin()å’ŒGetSpacing()è·å–ï¼Œåƒä¸‡åˆ«å¿˜äº†ã€‚å½“ç„¶ï¼Œé™¤äº†è¿™ä¸¤ä¸ªä¹‹å¤–è¿˜æœ‰ä¸ªdirectionä¹Ÿæ˜¯å¯ä»¥getå’Œsetçš„ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹åªè¦ä½ ä»£ç æ²¡æœ‰æä¸€äº›çŸ©é˜µçš„ç¿»è½¬ç­‰æ“ä½œè¿™ä¸ªæ˜¯ä¸ç”¨ç®¡çš„ã€‚</p><h3 id="ä½¿ç”¨SimpleITKè¯»å–å’Œä¿å­˜Nii-gzæ–‡ä»¶">ä½¿ç”¨SimpleITKè¯»å–å’Œä¿å­˜Nii.gzæ–‡ä»¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## using simpleITK to load and save data.</span><br><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(<span class="hljs-string">'./nifti.nii.gz'</span>)<br>img = sitk.GetArrayFromImage(itk_img)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"img shape:"</span>,img.shape)<br><br><span class="hljs-comment">## save </span><br>out = sitk.GetImageFromArray(img)<br><span class="hljs-comment"># # out.SetSpacing(itk_img.GetSpacing())</span><br><span class="hljs-comment"># # out.SetOrigin(itk_img.GetOrigin())</span><br>sitk.WriteImage(out,<span class="hljs-string">'simpleitk_save.nii.gz'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="å¯è§†åŒ–ä¸€å±‚">å¯è§†åŒ–ä¸€å±‚</h3><p>ä¸‹é¢çš„ç¨‹åºæŒ‘å–ä¸€å±‚è¿›è¡Œå¯è§†åŒ–ï¼Œå¹¶æ ‡æ³¨ç»“èŠ‚ä½ç½®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">a = image_array.transpose(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>)[:,:,<span class="hljs-number">0</span>]  <span class="hljs-comment"># transposeæ˜¯å°†(z,x,y)çš„ä¸‰ç»´çŸ©é˜µè½¬ä¸º(x,y,z)çš„çŸ©é˜µ</span><br>plt.gca().add_patch( plt.Rectangle((<span class="hljs-number">147</span>,<span class="hljs-number">297</span>), <span class="hljs-number">24</span>,<span class="hljs-number">24</span>, fill=<span class="hljs-literal">False</span>,edgecolor=<span class="hljs-string">'r'</span>, linewidth=<span class="hljs-number">3</span>))<br>plt.imshow(a[:,:,<span class="hljs-number">1</span>]*<span class="hljs-number">255</span>)  <span class="hljs-comment"># åœ¨å›¾ä¸­ç”»æ¡†</span><br>plt.show()<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡ä»¶å¤„ç†ï¼ˆå¤åˆ¶ï¼Œç§»åŠ¨ï¼‰</title>
    <link href="/2021/11/25/python/file/fileprocess/"/>
    <url>/2021/11/25/python/file/fileprocess/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•´ç†æ–‡ä»¶çš„å¤åˆ¶ï¼Œç§»åŠ¨ç­‰ç›¸å…³æ“ä½œã€‚ç›¸å…³çš„æ¨¡å—æ¶‰åŠshutiå’ŒosåŒ…ï¼Œé’ˆå¯¹è¿™ä¸¤ä¸ªåŒ…å¯¹æ–‡ä»¶æ“ä½œè¿›è¡Œæ•´ç†ã€‚</p></blockquote><h2 id="shutil">shutil</h2><p>shutilæ¨¡å—åŒ…å«äº†ä¸€äº›ç”¨äºå¤åˆ¶æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå’Œæ–‡ä»¶å‹ç¼©çš„å‡½æ•°.<br>osæ¨¡å—æ˜¯Pythonæ ‡å‡†åº“ä¸­ä¸€ä¸ªé‡è¦çš„æ¨¡å—ï¼Œé‡Œé¢æä¾›äº†å¯¹ç›®å½•å’Œæ–‡ä»¶çš„ä¸€èˆ¬å¸¸ç”¨æ“ä½œã€‚è€ŒPythonå¦å¤–ä¸€ä¸ªæ ‡å‡†åº“â€”â€”shutilåº“ï¼Œå®ƒä½œä¸ºosæ¨¡å—çš„è¡¥å……ï¼Œæä¾›äº†å¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ã€å‹ç¼©ã€è§£å‹ç­‰æ“ä½œï¼Œ</p><h3 id="æ‹·è´">æ‹·è´</h3><h4 id="å¸¸è§„å¤åˆ¶æ–¹æ³•">å¸¸è§„å¤åˆ¶æ–¹æ³•</h4><table><thead><tr><th style="text-align:center">å‡½æ•°</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">copyfile( src, dst)</td><td style="text-align:center">ä»æºsrcå¤åˆ¶åˆ°dstä¸­å»ã€‚å½“ç„¶å‰ææ˜¯ç›®æ ‡åœ°å€æ˜¯å…·å¤‡å¯å†™æƒé™ã€‚æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯ä¸ºIOException. å½“å‰çš„dstå·²å­˜åœ¨çš„è¯å°±ä¼šè¢«è¦†ç›–æ‰</td></tr><tr><td style="text-align:center">copy( src, dst)</td><td style="text-align:center">å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªç›®å½•</td></tr><tr><td style="text-align:center">copy2( src, dst)</td><td style="text-align:center">åœ¨copyä¸Šçš„åŸºç¡€ä¸Šå†å¤åˆ¶æ–‡ä»¶æœ€åè®¿é—®æ—¶é—´ä¸ä¿®æ”¹æ—¶é—´ä¹Ÿå¤åˆ¶è¿‡æ¥äº†ï¼Œä¹Ÿå°±æ˜¯åŒ…å«æ–‡ä»¶çš„å±æ€§ä¿¡æ¯ï¼Œç±»ä¼¼äºcpâ€“pçš„ä¸œè¥¿</td></tr></tbody></table><ul><li>dstï¼šå¤åˆ¶è‡³dstæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶</li></ul><p>ä¸€èˆ¬dstå¡«å†™ç›¸åº”çš„æ–‡ä»¶å¤¹ï¼Œå°±ä¼šå»ºç«‹åŒåæ–‡ä»¶ï¼Œå°±ä¼šå¤åˆ¶æ–‡ä»¶åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœè¦å¤åˆ¶æ–‡ä»¶å¤¹å°±ä¸èƒ½ç”¨ä»¥ä¸Šå‡½æ•°äº†ã€‚dstå¯ä»¥æ˜¯ä¸ªç›®å½•ï¼Œä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸srcåŒåçš„æ–‡ä»¶ï¼Œ<strong>è‹¥è¯¥ç›®å½•ä¸‹å­˜åœ¨åŒåæ–‡ä»¶ï¼Œå°†ä¼šæŠ¥é”™æç¤ºå·²ç»å­˜åœ¨åŒåæ–‡ä»¶</strong>ã€‚</p><h4 id="å¤åˆ¶æ–‡ä»¶å†…å®¹">å¤åˆ¶æ–‡ä»¶å†…å®¹</h4><p>å¦‚æœæ˜¯å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°æŸæ–‡ä»¶ä¸­ï¼Œåˆ™ä½¿ç”¨<code>copyfile</code>ï¼Œå¦‚æœå­˜åœ¨åŒåæ–‡ä»¶ï¼Œå¯ä»¥è¦†ç›–åŒåæ–‡ä»¶å¤¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">shutil.copyfile(src, dst)<br>åŠŸèƒ½ï¼šå°†srcæ–‡ä»¶å†…å®¹å¤åˆ¶è‡³dstæ–‡ä»¶<br><br>srcï¼š æºæ–‡ä»¶è·¯å¾„<br>dstï¼š å¤åˆ¶è‡³dstæ–‡ä»¶ï¼Œè‹¥dstæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªdstæ–‡ä»¶ï¼›è‹¥å­˜åœ¨å°†ä¼šè¢«è¦†ç›–<br>follow_symlinksï¼šè®¾ç½®ä¸º<span class="hljs-literal">True</span>æ—¶ï¼Œè‹¥srcä¸ºè½¯è¿æ¥ï¼Œåˆ™å½“æˆæ–‡ä»¶å¤åˆ¶ï¼›å¦‚æœè®¾ç½®ä¸º<span class="hljs-literal">False</span>ï¼Œå¤åˆ¶è½¯è¿æ¥ã€‚é»˜è®¤ä¸º<span class="hljs-literal">True</span>ã€‚Python3æ–°å¢å‚æ•°<br><br><span class="hljs-keyword">import</span> shutil<br>shutil.copyfile(<span class="hljs-string">"./èµ„æ–™/1.txt"</span>,<span class="hljs-string">"./èµ„æ–™/1_empty.txt"</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="å¤åˆ¶ç›®å½•">å¤åˆ¶ç›®å½•</h4><p><code>shutil.copytree(src, dst, symlinks=False, ignore=None)</code><br>åŠŸèƒ½ï¼šå¤åˆ¶æ•´ä¸ªæ–‡ä»¶ç›®å½•(æ— è®ºæ–‡ä»¶å¤¹æ˜¯å¦ä¸ºç©ºï¼Œå‡å¯ä»¥å¤åˆ¶ï¼Œè€Œä¸”ä¼šå¤åˆ¶æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å†…å®¹)</p><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada">srcï¼šæºæ–‡ä»¶å¤¹<br>dstï¼šå¤åˆ¶è‡³dstæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œéœ€ä¿è¯æ­¤æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå¦åˆ™å°†æŠ¥é”™<br>symlinksï¼šæ˜¯å¦å¤åˆ¶è½¯è¿æ¥ï¼Œ<span class="hljs-literal">True</span>å¤åˆ¶è½¯è¿æ¥ï¼Œ<span class="hljs-literal">False</span>ä¸å¤åˆ¶ï¼Œè½¯è¿æ¥ä¼šè¢«å½“æˆæ–‡ä»¶å¤åˆ¶è¿‡æ¥ï¼Œé»˜è®¤<span class="hljs-literal">False</span><br>ignoreï¼šå¿½ç•¥æ¨¡å¼ï¼Œå¯ä¼ å…¥ignore_patterns()<br>copy_functionï¼šæ‹·è´æ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯æ‰§è¡Œçš„å¤„ç†å‡½æ•°ï¼Œé»˜è®¤ä¸ºcopy2ï¼ŒPython3æ–°å¢å‚æ•°<br>ignore_dangling_symlinksï¼šsysmlinksè®¾ç½®ä¸º<span class="hljs-literal">False</span>æ—¶ï¼Œæ‹·è´æŒ‡å‘æ–‡ä»¶å·²åˆ é™¤çš„è½¯è¿æ¥æ—¶ï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¦‚æœæƒ³æ¶ˆé™¤è¿™ä¸ªå¼‚å¸¸ï¼Œå¯ä»¥è®¾ç½®æ­¤å€¼ä¸º<span class="hljs-literal">True</span>ã€‚é»˜è®¤ä¸º<span class="hljs-literal">False</span>,Python3æ–°å¢å‚æ•°<br></code></pre></td></tr></tbody></table></figure><h5 id="ç¤ºä¾‹">ç¤ºä¾‹</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil,os<br>shutil.copytree(<span class="hljs-string">"./èµ„æ–™/ceshi"</span>,<span class="hljs-string">"./èµ„æ–™/taiget/"</span>,ignore=shutil.ignore_patterns(<span class="hljs-string">"abc.txt"</span>,<span class="hljs-string">"bcd.txt"</span>))<span class="hljs-comment">#å¿½ç•¥å“ªäº›æ–‡ä»¶</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç§»åŠ¨">ç§»åŠ¨</h3><p><code>shutil.move(src, dst)</code><br>åŠŸèƒ½ï¼šæ–‡ä»¶ç§»åŠ¨,å¯é‡å‘½åï¼Œä¼šåˆ é™¤åŸæ–‡ä»¶ï¼Œæ–°è·¯å¾„éœ€<strong>æŒ‡å®šæ–‡ä»¶å</strong>ï¼Œæ³¨æ„éœ€è¦æŒ‡å®šæ–‡ä»¶åï¼Œè¦ä¹ˆå¯ä»¥å‰ªè£æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ï¼Œè¦ä¹ˆå¯ä»¥é‡å‘½åã€‚</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">src</span>ï¼š**æºæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶**<br><span class="hljs-attribute">dst</span>ï¼š**ç§»åŠ¨è‡³dstæ–‡ä»¶å¤¹ï¼Œæˆ–å°†æ–‡ä»¶æ”¹åä¸ºdstæ–‡ä»¶ã€‚**å¦‚æœsrcä¸ºæ–‡ä»¶å¤¹ï¼Œè€Œdstä¸ºæ–‡ä»¶å°†ä¼šæŠ¥é”™<br><span class="hljs-attribute">copy_function</span>ï¼šæ‹·è´æ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯æ‰§è¡Œçš„å¤„ç†å‡½æ•°ã€‚é»˜è®¤ä¸ºcopy<span class="hljs-number">2</span>ï¼ŒPython<span class="hljs-number">3</span>æ–°å¢å‚æ•°<br></code></pre></td></tr></tbody></table></figure><h5 id="ç¤ºä¾‹-2">`ç¤ºä¾‹</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#é‡å‘½åæ–‡ä»¶å¤¹</span><br>shutil.move(<span class="hljs-string">'./èµ„æ–™/ceshi'</span>, <span class="hljs-string">'./èµ„æ–™/ceshi1'</span>)<br><span class="hljs-comment">#ç§»åŠ¨æ–‡ä»¶è¿›å…¥æ–°ç§»åŠ¨çš„æ–‡ä»¶å¤¹</span><br>shutil.move(<span class="hljs-string">'./èµ„æ–™/1-2.txt'</span>, <span class="hljs-string">'./èµ„æ–™/ceshi1'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶å¤¹">åˆ é™¤æ–‡ä»¶å¤¹</h3><p>å‡½æ•°ï¼šshutil.rmtree(src)<br>å«ä¹‰ï¼šåˆ é™¤æ–‡ä»¶å¤¹ï¼›<br>å‚æ•°ï¼šsrcè¡¨ç¤ºæºæ–‡ä»¶å¤¹ï¼›<br>æ³¨æ„ï¼šåŒºåˆ«è¿™é‡Œå’Œosæ¨¡å—ä¸­remove()ã€rmdir()çš„ç”¨æ³•ï¼Œremove()æ–¹æ³•<strong>åªèƒ½åˆ é™¤æŸä¸ªæ–‡ä»¶</strong>ï¼Œ<strong>rmdir()åªèƒ½åˆ é™¤æŸä¸ªç©ºæ–‡ä»¶å¤¹</strong>ã€‚ä½†æ˜¯shutilæ¨¡å—ä¸­çš„rmtree()å¯ä»¥é€’å½’å½»åº•<strong>åˆ é™¤éç©ºæ–‡ä»¶å¤¹ï¼›</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å°†cæ–‡ä»¶å¤¹å½»åº•åˆ é™¤</span><br>src = <span class="hljs-string">r".\publish\osæ¨¡å—\test_shutil_c"</span><br>shutil.rmtree(src)<br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶">åˆ é™¤æ–‡ä»¶</h3><p>å‡½æ•°ï¼šåˆ é™¤æ–‡ä»¶ä½¿ç”¨<code>os.remove()</code>å‡½æ•°è¿›è¡Œæ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os  <span class="hljs-comment"># å¯¼å…¥æ¨¡å—</span><br><br><span class="hljs-comment"># åˆ é™¤ç›®æ ‡æ–‡ä»¶çš„æ ¹ç›®å½•</span><br>movabs_path = <span class="hljs-string">"åˆ é™¤æ–‡ä»¶çš„ç›®å½•"</span> <br><br><span class="hljs-comment"># åˆ é™¤æ“ä½œ</span><br>os.remove(rawabs_path+<span class="hljs-string">"test.txt"</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£å‹å’Œå‹ç¼©æ–‡ä»¶">è§£å‹å’Œå‹ç¼©æ–‡ä»¶</h3><p>å‡½æ•°ï¼š<code>make_archive(base_name, format, root_dir, â€¦)</code><br>åŠŸèƒ½ï¼šç”Ÿæˆå‹ç¼©æ–‡ä»¶</p><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">base_nameï¼šå‹ç¼©æ–‡ä»¶çš„æ–‡ä»¶åï¼Œä¸å…è®¸æœ‰æ‰©å±•åï¼Œå› ä¸ºä¼šæ ¹æ®å‹ç¼©æ ¼å¼ç”Ÿæˆç›¸åº”çš„æ‰©å±•å<br>formatï¼šå‹ç¼©æ ¼å¼<br>root_dirï¼šå°†åˆ¶å®šæ–‡ä»¶å¤¹è¿›è¡Œå‹ç¼©<br><span class="hljs-function"><span class="hljs-title">get_archive_formats</span><span class="hljs-params">()</span></span>ï¼š è·å–æ”¯æŒçš„å‹ç¼©æ–‡ä»¶æ ¼å¼ã€‚ç›®å‰æ”¯æŒçš„æœ‰ï¼štarã€zipã€gztarã€bztarã€‚åœ¨Python3è¿˜å¤šæ”¯æŒä¸€ç§æ ¼å¼xztar<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-3">ç¤ºä¾‹</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶</span><br>base_name = <span class="hljs-string">"./èµ„æ–™/2.txt"</span><br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©å½¢å¼</span><br><span class="hljs-built_in">format</span> = <span class="hljs-string">"zip"</span><br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©åæ”¾åœ¨å“ªé‡Œ</span><br>root_dir = <span class="hljs-string">"./èµ„æ–™/"</span><br><br>shutil.make_archive(base_name, <span class="hljs-built_in">format</span>, root_dir)<br></code></pre></td></tr></tbody></table></figure><p>å‡½æ•°ï¼š<code>unpack_archive(filename, extract_dir=None, format=None)</code><br>åŠŸèƒ½ï¼šè§£å‹æ“ä½œ</p><figure class="highlight fortran"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fortran">filenameï¼šæ–‡ä»¶è·¯å¾„<br>extract_dirï¼šè§£å‹è‡³çš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚æ–‡ä»¶å¤¹å¯ä»¥ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ<br><span class="hljs-keyword">format</span>ï¼šè§£å‹æ ¼å¼ï¼Œé»˜è®¤ä¸º<span class="hljs-keyword">None</span>ï¼Œä¼šæ ¹æ®æ‰©å±•åè‡ªåŠ¨é€‰æ‹©è§£å‹æ ¼å¼<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-4">ç¤ºä¾‹</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©æ–‡ä»¶çš„åœ°å€</span><br>zip_path = <span class="hljs-string">"./èµ„æ–™/2.txt.zip"</span><br><span class="hljs-comment">#æŒ‡å®šè§£å‹ç¼©åˆ°å“ªé‡Œ</span><br>extract_dir = <span class="hljs-string">"./èµ„æ–™/ceshi1/"</span><br>shutil.unpack_archive(zip_path, extract_dir)<br></code></pre></td></tr></tbody></table></figure><h2 id="os">os</h2><p>åœ¨è¿™é‡Œæ•´ç†osçš„ç›¸å…³æ“ä½œå“¦ï¼Œç²—ç•¥è®°å½•ä¸€ä¸‹</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/silentwolfyh/article/details/74931123">https://blog.csdn.net/silentwolfyh/article/details/74931123</a></p><h3 id="osç›®å½•æ“ä½œ">osç›®å½•æ“ä½œ</h3><p>1.å¾—åˆ°å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰Pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„: os.getcwd()</p><p>2.è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å:os.listdir()</p><p>3.å‡½æ•°ç”¨æ¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶:os.remove()</p><p>4.åˆ é™¤å¤šä¸ªç›®å½•ï¼šos.removedirs(râ€œcï¼š\pythonâ€)</p><p>5.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼šos.path.isfile()</p><p>6.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•ï¼šos.path.isdir()</p><p>7.åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ï¼šos.path.isabs()</p><p>8.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦çœŸåœ°å­˜:os.path.exists()</p><p>9.è¿”å›ä¸€ä¸ªè·¯å¾„çš„ç›®å½•åå’Œæ–‡ä»¶å:os.path.split() eg os.path.split(â€˜/home/swaroop/byte/code/poem.txtâ€™) ç»“æœï¼š(â€˜/home/swaroop/byte/codeâ€™, â€˜poem.txtâ€™)</p><p>10.åˆ†ç¦»æ‰©å±•åï¼šos.path.splitext()</p><p>11.è·å–è·¯å¾„åï¼šos.path.dirname()</p><p>12.è·å–æ–‡ä»¶åï¼šos.path.basename()</p><p>13.è¿è¡Œshellå‘½ä»¤: os.system()</p><p>14.è¯»å–å’Œè®¾ç½®ç¯å¢ƒå˜é‡:os.getenv() ä¸os.putenv()</p><p>15.ç»™å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦:os.linesep Windowsä½¿ç”¨â€™\r\nâ€™ï¼ŒLinuxä½¿ç”¨â€™\nâ€™è€ŒMacä½¿ç”¨â€™\râ€™</p><p>16.æŒ‡ç¤ºä½ æ­£åœ¨ä½¿ç”¨çš„å¹³å°ï¼š<a href="http://os.name">os.name</a> å¯¹äºWindowsï¼Œå®ƒæ˜¯â€™ntâ€™ï¼Œè€Œå¯¹äºLinux/Unixç”¨æˆ·ï¼Œå®ƒæ˜¯â€™posixâ€™</p><p>17.é‡å‘½åï¼šos.rename(oldï¼Œ new)</p><p>18.åˆ›å»ºå¤šçº§ç›®å½•ï¼šos.makedirs(râ€œcï¼š\python\testâ€)</p><p>19.åˆ›å»ºå•ä¸ªç›®å½•ï¼šos.mkdir(â€œtestâ€)</p><p>20.è·å–æ–‡ä»¶å±æ€§ï¼šos.stat(file)</p><p>21.ä¿®æ”¹æ–‡ä»¶æƒé™ä¸æ—¶é—´æˆ³ï¼šos.chmod(file)</p><p>22.ç»ˆæ­¢å½“å‰è¿›ç¨‹ï¼šos.exit()</p><p>23.è·å–æ–‡ä»¶å¤§å°ï¼šos.path.getsize(filename)</p><h3 id="2ã€æ–‡ä»¶æ“ä½œæ–¹æ³•å¤§å…¨ï¼š">2ã€æ–‡ä»¶æ“ä½œæ–¹æ³•å¤§å…¨ï¼š</h3><p>1.os.mknod(â€œtest.txtâ€) #åˆ›å»ºç©ºæ–‡ä»¶</p><p>2.fp = open(â€œtest.txtâ€,w) #ç›´æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</p><p>3.å…³äºopen æ¨¡å¼ï¼š</p><p>wï¼šä»¥å†™æ–¹å¼æ‰“å¼€ï¼Œ</p><p>aï¼šä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€ (ä» EOF å¼€å§‹, å¿…è¦æ—¶åˆ›å»ºæ–°æ–‡ä»¶)</p><p>r+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€</p><p>w+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )</p><p>a+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a )</p><p>rbï¼šä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€</p><p>wbï¼šä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )</p><p>abï¼šä»¥äºŒè¿›åˆ¶è¿½åŠ æ¨¡å¼æ‰“å¼€ (å‚è§ a )</p><p>rb+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ )</p><p>wb+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ )</p><p>ab+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ )</p><p>fp.read([size]) #sizeä¸ºè¯»å–çš„é•¿åº¦ï¼Œä»¥byteä¸ºå•ä½</p><p>fp.readline([size]) #è¯»ä¸€è¡Œï¼Œå¦‚æœå®šä¹‰äº†sizeï¼Œæœ‰å¯èƒ½è¿”å›çš„åªæ˜¯ä¸€è¡Œçš„ä¸€éƒ¨åˆ†</p><p>fp.readlines([size]) #æŠŠæ–‡ä»¶æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªlistçš„ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶è¿”å›è¿™ä¸ªlistã€‚å…¶å®å®ƒçš„å†…éƒ¨æ˜¯é€šè¿‡å¾ªç¯è°ƒç”¨readline()æ¥å®ç°çš„ã€‚å¦‚æœæä¾›sizeå‚æ•°ï¼Œsizeæ˜¯è¡¨ç¤ºè¯»å–å†…å®¹çš„æ€»é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åªè¯»åˆ°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</p><p>fp.write(str) #æŠŠstrå†™åˆ°æ–‡ä»¶ä¸­ï¼Œwrite()å¹¶ä¸ä¼šåœ¨strååŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦</p><p>fp.writelines(seq) #æŠŠseqçš„å†…å®¹å…¨éƒ¨å†™åˆ°æ–‡ä»¶ä¸­(å¤šè¡Œä¸€æ¬¡æ€§å†™å…¥)ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿåªæ˜¯å¿ å®åœ°å†™å…¥ï¼Œä¸ä¼šåœ¨æ¯è¡Œåé¢åŠ ä¸Šä»»ä½•ä¸œè¥¿ã€‚</p><p>fp.close() #å…³é—­æ–‡ä»¶ã€‚pythonä¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸ç”¨åè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸€åŠŸèƒ½æ²¡æœ‰ä¿è¯ï¼Œæœ€å¥½è¿˜æ˜¯å…»æˆè‡ªå·±å…³é—­çš„ä¹ æƒ¯ã€‚ å¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨å…³é—­åè¿˜å¯¹å…¶è¿›è¡Œæ“ä½œä¼šäº§ç”ŸValueError</p><p>fp.flush() #æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥ç¡¬ç›˜</p><p>fp.fileno() #è¿”å›ä¸€ä¸ªé•¿æ•´å‹çš„â€æ–‡ä»¶æ ‡ç­¾â€œ</p><p>fp.isatty() #æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç»ˆç«¯è®¾å¤‡æ–‡ä»¶(unixç³»ç»Ÿä¸­çš„)</p><p>fp.tell() #è¿”å›æ–‡ä»¶æ“ä½œæ ‡è®°çš„å½“å‰ä½ç½®ï¼Œä»¥æ–‡ä»¶çš„å¼€å¤´ä¸ºåŸç‚¹</p><p>fp.next() #è¿”å›ä¸‹ä¸€è¡Œï¼Œå¹¶å°†æ–‡ä»¶æ“ä½œæ ‡è®°ä½ç§»åˆ°ä¸‹ä¸€è¡Œã€‚æŠŠä¸€ä¸ªfileç”¨äºfor â€¦ in fileè¿™æ ·çš„è¯­å¥æ—¶ï¼Œå°±æ˜¯è°ƒç”¨next()å‡½æ•°æ¥å®ç°éå†çš„ã€‚</p><p>fp.seek(offset[,whence]) #å°†æ–‡ä»¶æ‰“æ“ä½œæ ‡è®°ç§»åˆ°offsetçš„ä½ç½®ã€‚è¿™ä¸ªoffsetä¸€èˆ¬æ˜¯ç›¸å¯¹äºæ–‡ä»¶çš„å¼€å¤´æ¥è®¡ç®—çš„ï¼Œä¸€èˆ¬ä¸ºæ­£æ•°ã€‚ä½†å¦‚æœæä¾›äº†whenceå‚æ•°å°±ä¸ä¸€å®šäº†ï¼Œwhenceå¯ä»¥ä¸º0è¡¨ç¤ºä»å¤´å¼€å§‹è®¡ç®—ï¼Œ1è¡¨ç¤ºä»¥å½“å‰ä½ç½®ä¸ºåŸç‚¹è®¡ç®—ã€‚2è¡¨ç¤ºä»¥æ–‡ä»¶æœ«å°¾ä¸ºåŸç‚¹è¿›è¡Œè®¡ç®—ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ–‡ä»¶ä»¥aæˆ–a+çš„æ¨¡å¼æ‰“å¼€ï¼Œæ¯æ¬¡è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶æ“ä½œæ ‡è®°ä¼šè‡ªåŠ¨è¿”å›åˆ°æ–‡ä»¶æœ«å°¾ã€‚</p><h3 id="3ã€ç›®å½•æ“ä½œæ–¹æ³•å¤§å…¨">3ã€ç›®å½•æ“ä½œæ–¹æ³•å¤§å…¨</h3><p>1.åˆ›å»ºç›®å½•</p><p>os.mkdir(â€œfileâ€)</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ–‡ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer20 æœ‰æ•ˆçš„æ‹¬å·</title>
    <link href="/2021/11/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode20/"/>
    <url>/2021/11/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode20/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ‰æ•ˆçš„æ‹¬å·</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€™ï¼Œâ€˜)â€™ï¼Œâ€˜{â€™ï¼Œâ€˜}â€™ï¼Œâ€˜[â€™ï¼Œâ€˜]â€™&nbsp;çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"()"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"()[]{}"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"(]"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"([)]"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-5ï¼š">ç¤ºä¾‹ 5ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"{[]}"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length &lt;= 104</li><li>s ä»…ç”±æ‹¬å· â€˜()[]{}â€™ ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨<code>æ ˆå’Œå­—å…¸</code>è¾…åŠ©åˆ¤æ–­ï¼Œå¦‚æœå­—ç¬¦æ˜¯å¯¹åº”æ‹¬å·çš„å³æ‹¬å·ï¼Œå°±å¼¹å‡ºï¼Œå¦åˆ™å‹å…¥ï¼Œæœ€åæŸ¥çœ‹æ ˆä¸­æ˜¯å¦è¿˜å‰©å…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        stack = []<br>        mmap = {<span class="hljs-string">'('</span>:<span class="hljs-string">')'</span>,<span class="hljs-string">')'</span>:<span class="hljs-string">'a'</span>,<span class="hljs-string">'{'</span>:<span class="hljs-string">'}'</span>,<span class="hljs-string">'}'</span>:<span class="hljs-string">'b'</span>,<span class="hljs-string">'['</span>:<span class="hljs-string">']'</span>,<span class="hljs-string">']'</span>:<span class="hljs-string">'c'</span>}<br>        <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span>(stack):<br>                top = stack[<span class="hljs-built_in">len</span>(stack)-<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> stack <span class="hljs-keyword">or</span> mmap[top] != ch):<br>                stack.append(ch)<br>            <span class="hljs-keyword">elif</span>(stack <span class="hljs-keyword">and</span>  mmap[top] == ch):<br>                stack.pop()<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> stack<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer859 äº²å¯†å­—ç¬¦ä¸²</title>
    <link href="/2021/11/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer859/"/>
    <url>/2021/11/23/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer859/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äº²å¯†å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ goal ï¼Œåªè¦æˆ‘ä»¬å¯ä»¥é€šè¿‡äº¤æ¢ s ä¸­çš„ä¸¤ä¸ªå­—æ¯å¾—åˆ°ä¸ goal ç›¸ç­‰çš„ç»“æœï¼Œå°±è¿”å› true ï¼›å¦åˆ™è¿”å› false ã€‚</p><p>äº¤æ¢å­—æ¯çš„å®šä¹‰æ˜¯ï¼šå–ä¸¤ä¸ªä¸‹æ ‡ i å’Œ j ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸”æ»¡è¶³ i != j ï¼Œæ¥ç€äº¤æ¢ s[i] å’Œ s[j] å¤„çš„å­—ç¬¦ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œåœ¨ â€œabcdâ€ ä¸­äº¤æ¢ä¸‹æ ‡ 0 å’Œä¸‹æ ‡ 2 çš„å…ƒç´ å¯ä»¥ç”Ÿæˆ â€œcbadâ€ ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"ab"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"ba"</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä½ å¯ä»¥äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'b'</span> ç”Ÿæˆ <span class="hljs-string">"ba"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"ab"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"ab"</span><br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šä½ åªèƒ½äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'b'</span> ç”Ÿæˆ <span class="hljs-string">"ba"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ä¸ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"aa"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"aa"</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä½ å¯ä»¥äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'a'</span> ç”Ÿæˆ <span class="hljs-string">"aa"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"aaaaaaabc"</span>, <span class="hljs-attr">goal</span> = <span class="hljs-string">"aaaaaaacb"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length, goal.length &lt;= 2 * 104</li><li>s å’Œ goal ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¦‚æœé•¿åº¦ä¸ä¸€è‡´å°±ç›´æ¥è¿”å›Falseï¼Œdiffç”¨æ¥å­˜å‚¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸åŒçš„å­—ç¬¦çš„ç›¸åº”ä¸‹æ ‡ï¼›ç„¶ååˆ¤æ–­diffçš„å…ƒç´ æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼š</p><p>1ï¼Œdiffæœ‰ä¸¤ä¸ªå…ƒç´ å¹¶ä¸”è¿™ä¸¤ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å¯¹åº”ç›¸ç­‰ï¼›</p><p>2ï¼Œdiffä¸­å…ƒç´ ä¸ºç©ºï¼ˆä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼‰ï¼ŒåŒæ—¶sä¸­æœ‰é‡å¤å­—ç¬¦ï¼ˆä½¿ç”¨setæ¥åˆ¤æ–­ï¼‰ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buddyStrings</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, goal: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)!=<span class="hljs-built_in">len</span>(goal)):<span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># if(s==goal and len(set(s))!=len(s)): return True #æ”¾åœ¨å‰é¢ä¼šå¢åŠ åˆ¤æ–­æ—¶é—´ ç›¸å½“äºO(2N)</span><br>        diff = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span>(s[i]!=goal[i]):diff.append(i)<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(diff)==<span class="hljs-number">2</span> <span class="hljs-keyword">and</span> s[diff[<span class="hljs-number">0</span>]]==goal[diff[<span class="hljs-number">1</span>]] <span class="hljs-keyword">and</span> s[diff[<span class="hljs-number">1</span>]]==goal[diff[<span class="hljs-number">0</span>]]): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(diff)==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">set</span>(s))!=<span class="hljs-built_in">len</span>(s)): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å­—ç¬¦ä¸²</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å­—ç¬¦ä¸²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer32-3 ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ â…¢</title>
    <link href="/2021/11/22/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32-3/"/>
    <url>/2021/11/22/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32-3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ â…¢</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰è¡Œå†æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: <code>[3,9,20,null,null,15,7]</code>,</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">  <span class="hljs-number">3</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>  /  <span class="hljs-string">\</span><br> <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><p>è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  [<span class="hljs-number">3</span>],<br>  [<span class="hljs-number">20</span>,<span class="hljs-number">9</span>],<br>  [<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>è®°å½•æœ¬å±‚çš„æ•°å­—ä¸ªæ•°ï¼Œå°†æœ¬å±‚çš„å…ƒç´ å…¨éƒ¨å¼¹å‡ºåˆ°åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶å°†ä¸‹å±‚å…ƒç´ å‹è¿›é˜Ÿåˆ—ä¸­ï¼›åªæ˜¯è¦æ ¹æ®flagï¼Œæ¥å°†åˆ—è¡¨å€’åº ã€‚</p><blockquote><p>åˆ—è¡¨å€’å™çš„æ–¹æ³•ï¼š</p><p>1ï¼Œtemp.reverse()  ç›´æ¥åŸåœ°ä¿®æ”¹å“¦~</p><p>2ï¼Œtemp = temp[::-1]</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> []<br>        queue ,result,flag = deque(),[],<span class="hljs-literal">False</span><br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            tmp = []<br>            num = <span class="hljs-built_in">len</span>(queue)<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>                top = queue.popleft()<br>                tmp.append(top.val)<br>                <span class="hljs-keyword">if</span>(top.left): queue.append(top.left)<br>                <span class="hljs-keyword">if</span>(top.right): queue.append(top.right)<br>            <span class="hljs-keyword">if</span> flag: tmp = tmp[::-<span class="hljs-number">1</span>] <span class="hljs-comment">#tmp.reverse() # tmp = tmp[::-1]</span><br>            flag = <span class="hljs-keyword">not</span> flag<br>            result.append(<span class="hljs-built_in">list</span>(tmp))<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>å»æ‰å€’å™çš„æ“ä½œï¼Œæ ¹æ®flagçš„å€¼æ›´æ”¹tmpçš„æ’å…¥æ–¹å‘ï¼Œå°†tmpå£°æ˜ä¸º<code>deque()</code>ï¼Œå³æ’ä¸º<code>append</code>,å·¦æ’ä¸º<code>appendleft</code>ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> []<br>        queue ,result,flag = deque(),[],<span class="hljs-literal">False</span><br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            tmp = deque()<br>            num = <span class="hljs-built_in">len</span>(queue)<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>                top = queue.popleft()<br>                <span class="hljs-keyword">if</span> flag: tmp.appendleft(top.val)<br>                <span class="hljs-keyword">else</span>:tmp.append(top.val)<br>                <span class="hljs-keyword">if</span>(top.left): queue.append(top.left)<br>                <span class="hljs-keyword">if</span>(top.right): queue.append(top.right)<br>            flag = <span class="hljs-keyword">not</span> flag<br>            result.append(<span class="hljs-built_in">list</span>(tmp))<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer32-1 ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘</title>
    <link href="/2021/11/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32-1/"/>
    <url>/2021/11/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>],<br>    <span class="hljs-number">3</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>    /  <span class="hljs-string">\</span><br>   <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br> è¿”å›ï¼š  <br>   [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¸¸è§„çš„å±‚åºéå†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span> []<br>        queue = deque()<br>        result = []<br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            top = queue.popleft()<br>            result.append(top.val)<br>            <span class="hljs-keyword">if</span> top.left:queue.append(top.left)<br>            <span class="hljs-keyword">if</span> top.right:queue.append(top.right)<br>        <span class="hljs-keyword">return</span> result<br><br><span class="hljs-comment">#å¦‚æœæŒ‰ç…§å±‚æ•°æ¥æ‰“å°ï¼Œé‚£ä¹ˆè®°å½•æ¯æ¬¡çš„queueé•¿åº¦ï¼ˆæœ¬å±‚é•¿åº¦ï¼‰ï¼ŒæŒ‰ç…§ç°æœ‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ¥ï¼ˆæœ¬å±‚ï¼‰å‹å…¥åç»­å…ƒç´ ï¼ˆä¸‹ä¸€å±‚ï¼‰ã€‚å°±å¯ä»¥åˆ†å±‚æ¬¡æ‰“å°</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer38 å­—ç¬¦ä¸²çš„æ’åˆ—</title>
    <link href="/2021/11/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer38/"/>
    <url>/2021/11/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer38/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å­—ç¬¦ä¸²çš„æ’åˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚</p><p>ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"abc"</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"abc"</span>,<span class="hljs-string">"acb"</span>,<span class="hljs-string">"bac"</span>,<span class="hljs-string">"bca"</span>,<span class="hljs-string">"cab"</span>,<span class="hljs-string">"cba"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s çš„é•¿åº¦ &lt;= 8</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="æ€è·¯ä¸€">æ€è·¯ä¸€</h4><p>å›ºå®šsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ,å¾—åˆ°å»æ‰è¿™ä¸ªå…ƒç´ çš„åç»­å…ƒç´ çš„å…¨æ’åˆ—æƒ…å†µï¼ˆé€’å½’è°ƒç”¨ï¼‰;</p><p>ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç¡®å®šæ–¹æ³•ä½¿ç”¨å¾ªç¯éå†ï¼Œä½†æ˜¯è¿™é‡Œè¦sä¸­å¯èƒ½å­˜åœ¨é‡å¤å…ƒç´ ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨setå»æ‰é‡å¤å…ƒç´ ï¼Œä¹Ÿæœ‰å‰ªæçš„ä½œç”¨ï¼›</p><blockquote><p>å»æ‰å­—ç¬¦ä¸²çš„æŸå…ƒç´ ï¼ˆæˆ–è€…å­—ç¬¦ä¸²ï¼‰çš„æ–¹æ³•</p><p>ä½¿ç”¨replaceå‡½æ•°æ›¿æ¢å­—ç¬¦ä¸ºç©ºâ€“<strong><code>s.replace(x,'',1)</code></strong></p><ul><li><p>replaceæ–¹æ³•</p><p><code>str.replace(old,new,max=string.count(old)ï¼‰</code></p></li></ul><p>æœ€å¤šæ›¿æ¢maxä¸ªoldå­—ç¬¦ä¸ºnewå­—ç¬¦ï¼Œé»˜è®¤å…¨éƒ¨æ›¿æ¢ï¼Œè¿™é‡Œåªæ›¿æ¢1ä¸ªå“¦~</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">permutation</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> s): <span class="hljs-keyword">return</span> [] <br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)==<span class="hljs-number">1</span>): <span class="hljs-keyword">return</span> [s]<br>        result = []<br>        sset = <span class="hljs-built_in">set</span>(s)<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> sset:<br>           temp = [x + item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.permutation(s.replace(x,<span class="hljs-string">''</span>,<span class="hljs-number">1</span>))]<br>           result += temp<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><h4 id="æ€è·¯äºŒ">æ€è·¯äºŒ</h4><p>ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†çš„æ€æƒ³ï¼Œæ¨¡æ‹Ÿä¸ºæ ‘çš„éå†èŠ‚ç‚¹ï¼Œéå†xä½ç½®å¤„ä¸ºxåŠxä¹‹åç´¢å¼•å…ƒç´ çš„æƒ…å†µï¼Œdfs(x) æ˜¯å›ºå®šå‰é¢0åˆ°xï¼Œæ¥æ·±ä¼˜xæ­¤å…ƒç´ æƒ…å†µã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">permutation</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        c, res = <span class="hljs-built_in">list</span>(s), []<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">x</span>):</span><br>            <span class="hljs-keyword">if</span> x == <span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>:<br>                res.append(<span class="hljs-string">''</span>.join(c))   <span class="hljs-comment"># æ·»åŠ æ’åˆ—æ–¹æ¡ˆ</span><br>                <span class="hljs-keyword">return</span><br>            dic = <span class="hljs-built_in">set</span>()<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x, <span class="hljs-built_in">len</span>(c)):<br>                <span class="hljs-keyword">if</span> c[i] <span class="hljs-keyword">in</span> dic: <span class="hljs-keyword">continue</span> <span class="hljs-comment"># é‡å¤ï¼Œå› æ­¤å‰ªæ</span><br>                dic.add(c[i])<br>                c[i], c[x] = c[x], c[i]  <span class="hljs-comment"># äº¤æ¢ï¼Œå°† c[i] å›ºå®šåœ¨ç¬¬ x ä½</span><br>                dfs(x + <span class="hljs-number">1</span>)               <span class="hljs-comment"># å¼€å¯å›ºå®šç¬¬ x + 1 ä½å­—ç¬¦</span><br>                c[i], c[x] = c[x], c[i]  <span class="hljs-comment"># æ¢å¤äº¤æ¢</span><br>        dfs(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é€’å½’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>é€’å½’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer31 æ ˆçš„å‹å…¥ï¼Œå¼¹å‡ºåºåˆ—</title>
    <link href="/2021/11/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer31/"/>
    <url>/2021/11/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer31/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ ˆçš„å‹å…¥ï¼Œå¼¹å‡ºåºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œåºåˆ— {1,2,3,4,5} æ˜¯æŸæ ˆçš„å‹æ ˆåºåˆ—ï¼Œåºåˆ— {4,5,3,2,1} æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½† {4,3,5,1,2} å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">è¾“å…¥ï¼špushed = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], popped = [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š<br>push<span class="hljs-function"><span class="hljs-params">(<span class="hljs-number">1</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">4</span>)</span>, <span class="hljs-title">pop</span><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">4</span>,<br>push<span class="hljs-function"><span class="hljs-params">(<span class="hljs-number">5</span>)</span>, <span class="hljs-title">pop</span><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">5</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">3</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">2</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">pushed</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">popped</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br>è§£é‡Šï¼š<span class="hljs-number">1</span> ä¸èƒ½åœ¨ <span class="hljs-number">2</span> ä¹‹å‰å¼¹å‡ºã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= pushed.length == popped.length &lt;= 1000</li><li>0 &lt;= pushed[i], popped[i] &lt; 1000</li><li>pushed&nbsp;æ˜¯&nbsp;popped&nbsp;çš„æ’åˆ—ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æŒ‰ç…§å‹å…¥å’Œå¼¹å‡ºåºåˆ—å¯ä»¥åŒå‘å”¯ä¸€ç¡®å®šæ ˆçš„å‹å…¥å¼¹å‡ºçš„é¡ºåºï¼Œæ‰€ä»¥æŒ‰ç…§å¯¹åº”çš„æ­¤åºåˆ—ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‹å‡ºå’Œå¼¹å‡ºçš„åœºæ™¯ï¼Œæœ€ç»ˆå¦‚æœå¯ä»¥æˆç«‹ï¼Œé‚£ä¹ˆæ ˆä¸­çš„æ•°æ®åº”è¯¥å…¨éƒ¨å¼¹å‡ºäº†ã€‚<br>å…·ä½“çš„åšæ³•å°±æ˜¯æŒ‰ç…§å‹å…¥åºåˆ—çš„é¡ºåºï¼Œæ¯å‹å…¥ä¸€ä¸ªæ•°å€¼ï¼Œå°±æ¯”å¯¹å¼¹å‡ºåºåˆ—çš„å€¼ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯ä»¥å¼¹å‡ºï¼Œç­‰åˆ°å‹å…¥çš„æ•°å€¼éƒ½å¤„ç†å®Œæˆï¼ŒæŸ¥çœ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸æ˜¯ç©ºå°±è¯´æ˜å¼¹å‡ºåºåˆ—æ—¶ä¸èƒ½åŒ¹é…çš„ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validateStackSequences</span>(<span class="hljs-params">self, pushed: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], popped: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-comment">#æ¨¡æ‹Ÿåœºæ™¯</span><br>        stack = []<br>        i = <span class="hljs-number">0</span><br>        j = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(i&lt;<span class="hljs-built_in">len</span>(pushed)):<br>            stack.append(pushed[i])<br>            <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(stack) <span class="hljs-keyword">and</span> stack[<span class="hljs-built_in">len</span>(stack)-<span class="hljs-number">1</span>]==popped[j]):<br>                j += <span class="hljs-number">1</span><br>                stack.pop()<br>            i += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> stack<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offerleetcode-offer563 äºŒå‰æ ‘çš„å¡åº¦</title>
    <link href="/2021/11/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer563/"/>
    <url>/2021/11/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer563/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„å¡åº¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè®¡ç®— æ•´ä¸ªæ ‘ çš„å¡åº¦ ã€‚<br>ä¸€ä¸ªæ ‘çš„ èŠ‚ç‚¹çš„å¡åº¦ å®šä¹‰å³ä¸ºï¼Œè¯¥èŠ‚ç‚¹å·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œå’Œå³å­æ ‘èŠ‚ç‚¹ä¹‹å’Œçš„ å·®çš„ç»å¯¹å€¼ ã€‚å¦‚æœæ²¡æœ‰å·¦å­æ ‘çš„è¯ï¼Œå·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œä¸º 0 ï¼›æ²¡æœ‰å³å­æ ‘çš„è¯ä¹Ÿæ˜¯ä¸€æ ·ã€‚ç©ºç»“ç‚¹çš„å¡åº¦æ˜¯ 0 ã€‚</p><p>æ•´ä¸ªæ ‘ çš„å¡åº¦å°±æ˜¯å…¶æ‰€æœ‰èŠ‚ç‚¹çš„å¡åº¦ä¹‹å’Œã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt1.jpg" alt="img"></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [1,2,3]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š<br>èŠ‚ç‚¹<span class="hljs-number"> 2 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 3 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 1 </span>çš„å¡åº¦ï¼š|2-3| = 1ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 2 </span>ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 3 </span>ï¼‰<br>å¡åº¦æ€»å’Œï¼š0 +<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 1 </span>= 1<br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt1.jpg" alt="img"></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [4,2,9,3,5,null,7]<br>è¾“å‡ºï¼š15<br>è§£é‡Šï¼š<br>èŠ‚ç‚¹<span class="hljs-number"> 3 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 5 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 7 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 2 </span>çš„å¡åº¦ï¼š|3-5| = 2ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 3 </span>ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 5 </span>ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 9 </span>çš„å¡åº¦ï¼š|0-7| = 7ï¼ˆæ²¡æœ‰å·¦å­æ ‘ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 0 </span>ï¼›å³å­æ ‘æ­£å¥½æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 7 </span>ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 4 </span>çš„å¡åº¦ï¼š|(3+5+2)-(9+7)| = |10-16| = 6ï¼ˆå·¦å­æ ‘å€¼ä¸º 3ã€5 å’Œ<span class="hljs-number"> 2 </span>ï¼Œå’Œæ˜¯<span class="hljs-number"> 10 </span>ï¼›å³å­æ ‘å€¼ä¸º<span class="hljs-number"> 9 </span>å’Œ<span class="hljs-number"> 7 </span>ï¼Œå’Œæ˜¯<span class="hljs-number"> 16 </span>ï¼‰<br>å¡åº¦æ€»å’Œï¼š0 +<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 7 </span>+<span class="hljs-number"> 6 </span>= 15<br><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt3.jpg" alt="img"></p><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šroot = [<span class="hljs-number">21,7,14,1</span>,<span class="hljs-number">1,2,2,3</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">9</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®çš„èŒƒå›´åœ¨ <code>[0, 104]</code> å†…</li><li><code>-1000 &lt;= Node.val &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªè®¡ç®—æ ‘çš„å„ä¸ªèŠ‚ç‚¹çš„å­æ ‘ä¹‹å’Œï¼Œä¸€ä¸ªç”¨äºè®¡ç®—å¯¹åº”çš„å·®å€¼ä¹‹å’Œã€‚åœ¨è®¡ç®—å­æ ‘ä¹‹å’Œæ—¶å¯ä»¥ç›´æ¥ç”¨ååºéå†ï¼Œ<strong>æ›´æ–°èŠ‚ç‚¹çš„valå€¼ä¸ºå­æ ‘å’Œ</strong>ã€‚æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findTilt</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setaddTree</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#ååºéå†</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> <br>            setaddTree(root.left)<br>            setaddTree(root.right)<br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            root.val = root.val + Tleft + Tright<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minasTree</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span> <br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            self.sumResult += <span class="hljs-built_in">abs</span>(Tleft - Tright)<br>            minasTree(root.left)<br>            minasTree(root.right)<br>        self.sumResult = <span class="hljs-number">0</span><br>        setaddTree(root)<br>        minasTree(root)<br>        <span class="hljs-keyword">return</span> self.sumResult<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šæ— éœ€ä¸¤ä¸ªå‡½æ•°ï¼Œ<strong>åœ¨ååºéå†æ±‚å’Œçš„æ—¶å€™å°±å¯ä»¥å¾—åˆ°å­æ ‘çš„å·®å€¼</strong>ï¼Œå°†å…¶ç´¯åŠ å³å¯ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findTilt</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setaddTree</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#ååºéå†</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> <br>            setaddTree(root.left)<br>            setaddTree(root.right)<br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            root.val = root.val + Tleft + Tright<br>            self.sumResult += <span class="hljs-built_in">abs</span>(Tleft - Tright)<br><br>        self.sumResult = <span class="hljs-number">0</span><br>        setaddTree(root)<br>        <span class="hljs-keyword">return</span> self.sumResult<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer57 å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—</title>
    <link href="/2021/11/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer57/"/>
    <url>/2021/11/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer57/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„å’Œä¸€ä¸ªæ•°å­—sï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œæ­£å¥½æ˜¯sã€‚å¦‚æœæœ‰å¤šå¯¹æ•°å­—çš„å’Œç­‰äºsï¼Œåˆ™è¾“å‡ºä»»æ„ä¸€å¯¹å³å¯ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[2,7,11,15]</span>, target = 9<br>è¾“å‡ºï¼š<span class="hljs-comment">[2,7]</span> æˆ–è€… <span class="hljs-comment">[7,2]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[10,26,30,31,47,60]</span>, target = 40<br>è¾“å‡ºï¼š<span class="hljs-comment">[10,30]</span> æˆ–è€… <span class="hljs-comment">[30,10]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= nums.length &lt;= 10^5</li><li>1 &lt;= nums[i] &lt;= 10^6</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å› ä¸ºæ—¶å•è°ƒé€’å¢çš„æ•°ç»„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä»ä¸¤ç«¯æ‰¾èµ·ï¼Œå‘ä¸­é—´æ”¶ç¼©ã€‚å¯ä»¥ç”¨é€’å½’çš„åŒæŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨whileå¾ªç¯éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><h4 id="é€’å½’">é€’å½’</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span>(<span class="hljs-params">left,right</span>):</span><br>            <span class="hljs-keyword">if</span>(left&gt;=right): <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]==target): <br>                self.result = [nums[left],nums[right]]<br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]&gt;target): find(left,right-<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span>: find(left+<span class="hljs-number">1</span>,right)<br>        self.result = []<br>        find(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> self.result<br></code></pre></td></tr></tbody></table></figure><h4 id="å¾ªç¯">å¾ªç¯</h4><p>ä½¿ç”¨whileå¾ªç¯æ¯”ä½¿ç”¨é€’å½’çš„æ–¹æ³•ï¼Œç©ºé—´å¤æ‚åº¦æ›´å°ï¼Œæ›´å¿«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        left,right = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span>(left&lt;right):<br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]==target): <span class="hljs-keyword">return</span> [nums[left],nums[right]]<br>            <span class="hljs-keyword">elif</span>(nums[left]+nums[right]&lt;target): left+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: right -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> []<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŒæŒ‡é’ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŒæŒ‡é’ˆ</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer55-â…  äºŒå‰æ ‘çš„æ·±åº¦</title>
    <link href="/2021/11/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer55-1/"/>
    <url>/2021/11/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer55-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„æ·±åº¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ±‚è¯¥æ ‘çš„æ·±åº¦ã€‚ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹ä¾æ¬¡ç»è¿‡çš„èŠ‚ç‚¹ï¼ˆå«æ ¹ã€å¶èŠ‚ç‚¹ï¼‰å½¢æˆæ ‘çš„ä¸€æ¡è·¯å¾„ï¼Œæœ€é•¿è·¯å¾„çš„é•¿åº¦ä¸ºæ ‘çš„æ·±åº¦ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ä¾‹å¦‚ï¼š</p><p>ç»™å®šäºŒå‰æ ‘<code> [3,9,20,null,null,15,7]</code>,</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript"> <span class="hljs-number">3</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>  /  <span class="hljs-string">\</span><br> <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><p>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>ç›´æ¥æ·±åº¦ä¼˜å…ˆéå†å³å¯ï¼Œç›´æ¥åˆ©ç”¨<code>maxDepth</code>å‡½æ•°ï¼Œæ³¨æ„åœ¨å†…éƒ¨è°ƒç”¨<code>maxDepth</code>å‡½æ•°æ—¶è¦ä½¿ç”¨<code>self</code>æ¥è°ƒç”¨æœ¬å‡½æ•°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + <span class="hljs-built_in">max</span>(self.maxDepth(root.left),self.maxDepth(root.right))<br><br></code></pre></td></tr></tbody></table></figure><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>ç›´æ¥ä½¿ç”¨å±‚åºéå†å¾—åˆ°æ·±åº¦ã€‚ä½¿ç”¨ä¸¤ä¸ªåˆ—è¡¨<code>tmp</code>å’Œ<code>queue</code>ç»“åˆå®ç°â€œé˜Ÿåˆ—â€çš„ä½œç”¨ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        queue, res = [root], <span class="hljs-number">0</span>        <span class="hljs-comment">#ä½¿ç”¨åˆ—è¡¨å®ç°queue</span><br>        <span class="hljs-keyword">while</span> queue:<br>            tmp = []                  <span class="hljs-comment">#åˆå§‹åŒ– ä¿å­˜ä¸€å±‚çš„ä¿¡æ¯</span><br>            <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> queue:        <span class="hljs-comment">#å°†queueçš„ä¸‹ä¸€å±‚éƒ½æ·»åŠ åˆ°tmpä¸­</span><br>                <span class="hljs-keyword">if</span> node.left: tmp.append(node.left)<br>                <span class="hljs-keyword">if</span> node.right: tmp.append(node.right)<br>            queue = tmp               <span class="hljs-comment">#æ›´æ–°</span><br>            res += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer50 ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</title>
    <link href="/2021/11/15/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer50/"/>
    <url>/2021/11/15/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer50/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨å­—ç¬¦ä¸² s ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚ s åªåŒ…å«å°å†™å­—æ¯ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šs = <span class="hljs-string">"abaccdeff"</span><br>è¾“å‡ºï¼š'b'<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šs = <span class="hljs-string">""</span> <br>è¾“å‡ºï¼š' '<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= s çš„é•¿åº¦ &lt;= 50000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ–¹æ³•æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å­—ç¬¦çŠ¶æ€ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">firstUniqChar</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        flag = {}<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-comment"># if(i in flag):</span><br>            <span class="hljs-comment">#     flag[i] += 1</span><br>            <span class="hljs-comment"># else:</span><br>            <span class="hljs-comment">#     flag[i] = 1</span><br>            flag[i] = <span class="hljs-keyword">not</span> i <span class="hljs-keyword">in</span> flag <span class="hljs-comment">#å¯ä»¥ç›´æ¥æ ‡è®° æ²¡å‡ºç°åˆ™ä¸ºçœŸ</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> flag:<br>            <span class="hljs-keyword">if</span>(flag[x]): <span class="hljs-keyword">return</span> x<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">' '</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨æŸ¥çœ‹å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨ké”®æ—¶ï¼Œpython2å¯ä»¥ä½¿ç”¨<code>dict.has_key(k)</code>,ä½†æ˜¯python3å·²ç»åˆ é™¤æ­¤å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨<code>k in dict</code>ï¼ŒåŒæ—¶å¦‚æœéå†dictï¼Œä¹Ÿæ˜¯è¿”å›çš„keyå“¦ã€‚<br>å¦å¤–ï¼Œè¿™é‡Œæ— éœ€è®°å½•æ¯ä¸ªå­—ç¬¦çš„ä¸ªæ•°ï¼Œåªéœ€è¦æ ‡è®°çœŸå‡å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å“ˆå¸Œè¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å“ˆå¸Œè¡¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡leetcode-offer32-â…¡ ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘â…¡</title>
    <link href="/2021/11/12/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32/"/>
    <url>/2021/11/12/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer32/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘â…¡</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>],<br>    <span class="hljs-number">3</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>    /  <span class="hljs-string">\</span><br>   <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š<br><br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[3]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[9,20]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[15,7]</span></span><br><span class="hljs-comment">]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>å…¶å®æ˜¯å±‚åºéå†ï¼Œæ³¨æ„æ˜¯æŒ‰ç…§æ·±åº¦æ ‡è¯†çš„å±‚åºéå†ã€‚åœ¨pythonä¸­æ˜¯ä½¿ç”¨dequeè¿™ä¸ªæ•°æ®ç»“æ„å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ã€‚<br>åœ¨å³ç«¯è¾“å‡ºè¾“å‡ºæ˜¯é‡‡ç”¨<code>append</code> å’Œ<code>pop</code>ï¼Œåœ¨å·¦ç«¯è¾“å…¥è¾“å‡ºé‡‡ç”¨çš„æ˜¯<code>appendleft</code>å’Œ<code>popleft</code>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<br>            <span class="hljs-keyword">return</span> []<br>        x = deque()<br>        result = []<br>        temp = []<br>        depth = -<span class="hljs-number">1</span><br>        x.append((root,<span class="hljs-number">0</span>))<br>        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(x)):<br>            item = x.popleft()<br>            <span class="hljs-keyword">if</span>(depth!=-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> depth!=item[<span class="hljs-number">1</span>]):<br>                result.append(temp)<br>                temp = []<br>                <span class="hljs-comment"># temp.clear() # temp.clear()å¾ˆå±é™©ï¼Œappendå°±åº”è¯¥ä½¿ç”¨result.append(temp.copy()) å› ä¸ºappendè¿›å»çš„æ˜¯å¼•ç”¨æ ¼å¼çš„ æˆ–è€…é‡æ–°åˆå§‹åŒ–temp</span><br>            temp.append(item[<span class="hljs-number">0</span>].val)  <br>            depth = item[<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">if</span> item[<span class="hljs-number">0</span>].left: x.append((item[<span class="hljs-number">0</span>].left,item[<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>))<br>            <span class="hljs-keyword">if</span> item[<span class="hljs-number">0</span>].right: x.append((item[<span class="hljs-number">0</span>].right,item[<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">if</span>(temp):<br>            result.append(temp)<br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></tbody></table></figure><p>pythonè¦æ³¨æ„çš„å‘ç‚¹æ˜¯åœ¨å¦‚æœå°†tempåŠ åˆ°åˆ—è¡¨ä¹‹åï¼Œå°†tempæ¸…ç©ºï¼Œéšä¹‹listä¸­çš„åˆ—è¡¨å†…å®¹ä¹Ÿä¼šæ¸…ç©ºï¼Œç›¸å½“äºè¯´åœ¨ä¸¤ä¸ªtempæ˜¯æŒ‡å‘åŒä¸€ä¸ªåœ°å€å—ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°tempåˆå§‹åŒ–ï¼Œæˆ–è€…åœ¨appendæ—¶ä½¿ç”¨copyå‡½æ•°è¿›è¡Œæ·±æ‹·è´ã€‚</p><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>æ›´ç®€ä¾¿çš„æ–¹æ³•æ˜¯å¯ä»¥ç›´æ¥æŠŠæ¯ä¸€è½®çš„è¾“å‡ºåˆ°resultä¸­ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> []<br>        res, queue = [], collections.deque()<br>        queue.append(root)<br>        <span class="hljs-keyword">while</span> queue:<br>            tmp = []<br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(queue)):<br>                node = queue.popleft()<br>                tmp.append(node.val)<br>                <span class="hljs-keyword">if</span> node.left: queue.append(node.left)<br>                <span class="hljs-keyword">if</span> node.right: queue.append(node.right)<br>            res.append(tmp)<br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é˜Ÿåˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>é˜Ÿåˆ—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer39 æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—</title>
    <link href="/2021/11/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer39/"/>
    <url>/2021/11/04/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer39/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1, 2, 3, 2, 2, 2, 5, 4, 2]</span><br><span class="hljs-section">è¾“å‡º: 2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= æ•°ç»„é•¿åº¦ &lt;= 50000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ¬é¢˜å¯ä»¥éå†æ•°ç»„å“ˆå¸Œè¡¨ç»Ÿè®¡æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ºO(N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        countlist = {}<br>        length = <span class="hljs-built_in">len</span>(nums)<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> countlist.get(x): <span class="hljs-comment">#å¯ä»¥ç”¨å†…ç½®çš„getæ–¹æ³•æˆ–è€…ç”¨has_key()</span><br>                countlist[x]+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                countlist[x] = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span>(countlist[x]&gt;length/<span class="hljs-number">2</span>):<br>                <span class="hljs-keyword">return</span> x<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><p>å­—å…¸çš„ç›¸å…³æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">dict</span> = {<span class="hljs-string">'Name'</span>: <span class="hljs-string">'Zara'</span>, <span class="hljs-string">'Age'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">'Class'</span>: <span class="hljs-string">'First'</span>}<br> <br><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>[<span class="hljs-string">'Name'</span>]  <span class="hljs-comment"># åˆ é™¤é”®æ˜¯'Name'çš„æ¡ç›®</span><br><span class="hljs-built_in">dict</span>.clear()      <span class="hljs-comment"># æ¸…ç©ºå­—å…¸æ‰€æœ‰æ¡ç›®</span><br><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>          <span class="hljs-comment"># åˆ é™¤å­—å…¸</span><br></code></pre></td></tr></tbody></table></figure><p>Pythonå­—å…¸åŒ…å«äº†ä»¥ä¸‹å†…ç½®æ–¹æ³•ï¼š</p><table><thead><tr><th style="text-align:left">åºå·</th><th style="text-align:left">å‡½æ•°åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-clear.html">dict.clear()</a> åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:left">2</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-copy.html">dict.copy()</a> è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">[dict.fromkeys(seq<a href="https://www.runoob.com/python/att-dictionary-fromkeys.html">, val])</a> åˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œä»¥åºåˆ— seq ä¸­å…ƒç´ åšå­—å…¸çš„é”®ï¼Œval ä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left"><strong><a href="https://www.runoob.com/python/att-dictionary-get.html">dict.get(key, default=None)</a> è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›defaultå€¼</strong></td></tr><tr><td style="text-align:left">5</td><td style="text-align:left"><strong><a href="https://www.runoob.com/python/att-dictionary-has_key.html">dict.has_key(key)</a> å¦‚æœé”®åœ¨å­—å…¸dicté‡Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false</strong></td></tr><tr><td style="text-align:left">6</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-items.html">dict.items()</a> ä»¥åˆ—è¡¨è¿”å›å¯éå†çš„(é”®, å€¼) å…ƒç»„æ•°ç»„</td></tr><tr><td style="text-align:left">7</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-keys.html">dict.keys()</a> ä»¥åˆ—è¡¨è¿”å›ä¸€ä¸ªå­—å…¸æ‰€æœ‰çš„é”®</td></tr><tr><td style="text-align:left">8</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-setdefault.html">dict.setdefault(key, default=None)</a> å’Œget()ç±»ä¼¼, ä½†å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºdefault</td></tr><tr><td style="text-align:left">9</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-update.html">dict.update(dict2)</a> æŠŠå­—å…¸dict2çš„é”®/å€¼å¯¹æ›´æ–°åˆ°dicté‡Œ</td></tr><tr><td style="text-align:left">10</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-values.html">dict.values()</a> ä»¥åˆ—è¡¨è¿”å›å­—å…¸ä¸­çš„æ‰€æœ‰å€¼</td></tr><tr><td style="text-align:left">11</td><td style="text-align:left">[pop(key<a href="https://www.runoob.com/python/python-att-dictionary-pop.html">,default])</a> åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚</td></tr><tr><td style="text-align:left">12</td><td style="text-align:left"><a href="https://www.runoob.com/python/python-att-dictionary-popitem.html">popitem()</a> è¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„æœ€åä¸€å¯¹é”®å’Œå€¼ã€‚</td></tr></tbody></table><h5 id="æ‘©å°”æŠ•ç¥¨æ³•ï¼šæ ¸å¿ƒç†å¿µä¸ºç¥¨æ•°æ­£è´ŸæŠµæ¶ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO-N-ç©ºé—´å¤æ‚åº¦ä¸ºO-1-ã€‚">æ‘©å°”æŠ•ç¥¨æ³•ï¼šæ ¸å¿ƒç†å¿µä¸ºç¥¨æ•°æ­£è´ŸæŠµæ¶ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</h5><ul><li>æ¨è®º1ï¼šå°†æŒ‡å®šçš„ä¼—æ•°å…ƒç´ æ ‡è®°ä¸º+1ï¼Œå…¶ä»–å…ƒç´ æ ‡è®°ä¸º-1ï¼Œåˆ™æ‰€æœ‰æ•°å­—çš„ç¥¨æ•°å’Œå¤§äº0.</li><li>æ¨è®º2:  è‹¥æ•°ç»„çš„å‰aä¸ªæ•°å­—çš„ç¥¨æ•°å’Œä¸º0ï¼Œåˆ™å‰©ä½™çš„n-aä¸ªæ•°å­—çš„ç¥¨æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œå³ï¼ˆn-aï¼‰ä¸ªæ•°å­—çš„ä¼—æ•°ä»ä¸ºxï¼Œå¯ä»¥ç›´æ¥ä¸è€ƒè™‘å‰é¢aä¸ªæ•°å­—äº†ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        votes = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> votes == <span class="hljs-number">0</span>: x = num<br>            votes += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num == x <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> x<br><br></code></pre></td></tr></tbody></table></figure><p><strong>æ‹“å±•</strong>ï¼š ç”±äºé¢˜ç›®è¯´æ˜ ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´  ï¼Œå› æ­¤æœ¬é¢˜ä¸ç”¨è€ƒè™‘ æ•°ç»„ä¸å­˜åœ¨ä¼—æ•° çš„æƒ…å†µã€‚è‹¥è€ƒè™‘ï¼Œéœ€è¦åŠ å…¥ä¸€ä¸ª â€œéªŒè¯ç¯èŠ‚â€ ï¼Œéå†æ•°ç»„ nums ç»Ÿè®¡ x çš„æ•°é‡ã€‚</p><p><strong>è‹¥ x çš„æ•°é‡è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠï¼Œåˆ™è¿”å› x ï¼›</strong><br>å¦åˆ™ï¼Œè¿”å›æœªæ‰¾åˆ°ä¼—æ•°ï¼›<br>æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ä¸å˜ï¼Œä»ä¸º O(N) å’Œ O(1) ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        votes, count = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> votes == <span class="hljs-number">0</span>: x = num<br>            votes += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num == x <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        <span class="hljs-comment"># éªŒè¯ x æ˜¯å¦ä¸ºä¼—æ•°</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> num == x: count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> x <span class="hljs-keyword">if</span> count &gt; <span class="hljs-built_in">len</span>(nums) // <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span> <span class="hljs-comment"># å½“æ— ä¼—æ•°æ—¶è¿”å› 0</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å­—å…¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å­—å…¸</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®ºæ–‡æ€»ç»“&lt;Anatomical-guided attention enhances unsupervised PET image denoising performance&gt;</title>
    <link href="/2021/11/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/pet/brain-pet-paper1/"/>
    <url>/2021/11/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/pet/brain-pet-paper1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>2021å¹´2æœˆæŠ•ç¨¿çš„ä¸€ç¯‡è®ºæ–‡ã€ŠAnatomical-guided attention enhances unsupervised PET image denoising performanceã€‹æå‡ºä½¿ç”¨Anatomical-guidedçš„æ³¨æ„åŠ›åŠ å¼ºéç›‘ç£çš„PETå›¾åƒé™å™ªæ€§èƒ½ã€‚</p></blockquote><h2 id="ABSTRACT">ABSTRACT</h2><blockquote><p>Although supervised convolutional neural networks (CNNs) often outperform conventional alternatives for denoising positron emission tomography (PET) images, they require many low- and high-quality reference PET image pairs. Herein, we propose an unsupervised 3D PET image denoising method based on an anatomical information-guided attention mechanism. The proposed magnetic resonance-guided deep decoder (MR-GDD) utilizes the spatial details and semantic features of MR-guidance image more effectively by introducing encoder-decoder and deep decoder subnetworks. Moreover, the specific shapes and patterns of the guidance image do not affect the denoised PET image, because the guidance image is input to the network through an attention gate. In a Monte Carlo simulation of [18F]fluoro-2-deoxy-D-glucose (FDG), the proposed method achieved the highest peak signal-to-noise ratio and structural similarity (27.92 Â± 0.44 dB/0.886 Â± 0.007), as compared with Gaussian filtering (26.68 Â± 0.10 dB/0.807 Â± 0.004), image guided filtering (27.40 Â± 0.11 dB/0.849 Â± 0.003), deep image prior (DIP) (24.22 Â± 0.43 dB/0.737 Â± 0.017), and MR-DIP (27.65 Â± 0.42 dB/0.879 Â± 0.007). Furthermore, we experimentally visualized the behavior of the optimization process, which is often unknown in unsupervised CNN-based restoration problems. For preclinical (using [18F]FDG and [11C]raclopride) and clinical (using [18F]florbetapir) studies, the proposed method demonstrates state-of-the-art denoising performance while retaining spatial resolution and quantitative accuracy, despite using a common network architecture for various noisy PET images with 1/10th of the full counts. These results suggest that the proposed MR-GDD can reduce PET scan times and PET tracer doses considerably without impacting patients.</p></blockquote><h5 id="æ€»ç»“">æ€»ç»“</h5><p>ä½¿ç”¨ç›‘ç£è®­ç»ƒCNNç½‘ç»œæ¯”ä¼ ç»Ÿçš„æ–¹æ³•åœ¨PETé™å™ªå¤„ç†ä¸Šæ•ˆæœè¡¨ç°çš„æ›´å¥½ï¼Œä½†æ˜¯éœ€è¦ low- and high-quality reference PET image pairsä½œä¸ºlabelã€‚å› æ­¤åŸºäºè§£å‰–å­¦ä¿¡æ¯æŒ‡å¼•çš„æ³¨æ„åŠ›æœºåˆ¶æå‡ºäº†æ— ç›‘ç£çš„3Dçš„PETå›¾åƒçš„é‡å»ºã€‚</p><ul><li>æ­¤ç½‘ç»œï¼ˆMR-GDDï¼‰å¼•å…¥äº†ä¸¤ä¸ªå­ç½‘ç»œï¼ˆencoder-decoder and deep decoder subnetworksï¼‰æ›´æ•ˆç‡åœ°åˆ©ç”¨MRï¼ˆæ ¸ç£å…±æŒ¯ï¼‰å›¾åƒçš„ç©ºé—´ä¿¡æ¯å’Œè¯­ä¹‰ç‰¹å¾ã€‚</li><li>åŒæ—¶ï¼Œç”±äºguidance imageé€šè¿‡attention gateåå†è¾“å…¥ç½‘ç»œï¼Œç‰¹å®šçš„guidance imageçš„shapeså’Œpatternsä¸ä¼šå½±å“é™å™ªçš„PETå›¾åƒã€‚</li><li>å¹¶ä¸”ï¼Œæˆ‘ä»¬é€šè¿‡å®éªŒå¯è§†åŒ–äº†ä¼˜åŒ–è¿‡ç¨‹çš„è¡Œä¸ºã€‚è¿™åœ¨æ— ç›‘ç£å·ç§¯å›¾åƒé‡å»ºé€šå¸¸æ˜¯æ— æ³•è¡¨ç¤ºçš„ã€‚</li></ul><h2 id="Introduction">Introduction</h2><blockquote><p>Positron emission tomography (PET) is a functional imaging modality that observes the molecular-level activity in tissues caused by radioactive tracers. It offers excellent diagnostic accuracy both for observing normal tissues and for detecting specific diseases such as cancer and neurodegenerative disorders (Phelps, 2012). In response to the increased demand for more accurate dementia diagnosis in recent years, brain-dedicated PET scanners with enhanced sensitivity that are capable of acquiring high-resolution brain images have been developed (Tashima et al., 2019; Watanabe et al., 2017). The acquisition of high-quality diagnostic PET images requires the administration of high dose or a long scan time. However, massive radiation exposure to PET tracers may induce genetic damage and cancerous growths, thereby raising health risk concerns (ICRP, 2017). Therefore, to mitigate the radiation exposure-related risk, it is desirable to administer low-dose PET tracers. Unfortunately, this increases the statistical noise, thus degrading the quality of PET images and potentially affecting the diagnostic accuracy. Thus, improved noise suppression methods for PET images are essential.</p></blockquote><h5 id="é€»è¾‘">é€»è¾‘</h5><p>ä¸ºäº†æ²»ç–—ç–¾ç—… â€”&gt;  éœ€è¦è·å–é«˜åƒç´ çš„è„‘PETå›¾åƒ â€”&gt;  éœ€è¦é«˜å‰‚é‡&amp;é•¿æ—¶é—´çš„æ‰«ææ—¶é—´ â€”&gt; å¼•å‘å¥åº·é£é™© â€”&gt; åªèƒ½ä½¿ç”¨ä½å‰‚é‡çš„PETç¤ºè¸ªå‰‚ â€”&gt; æ”¹è¿›ç”¨äº PET å›¾åƒçš„å™ªå£°æŠ‘åˆ¶æ–¹æ³•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><blockquote><p>Conventionally, Gaussian filtering (GF) is applied as a basic post-denoising method, despite compromising the spatial resolution and, thus, the quantitative accuracy of PET images. To avoid such compromises, various denoising algorithms, such as bilateral filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0018">Hoifheinz et al., 2011</a>), non-local means filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0001">Arabi and Zaidi, 2020</a>), image-guided filtering (IGF) (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0017">He et al., 2013</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0016">Hashimoto et al., 2018</a>), and block-matching filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0027">Ote et al., 2020</a>) have been developed and applied to PET images. These post-denoising algorithms provide a better denoising performance than GF while retaining spatial resolution and quantitative accuracy.</p></blockquote><h5 id="ä¼ ç»Ÿé™å™ªæ–¹æ³•">ä¼ ç»Ÿé™å™ªæ–¹æ³•</h5><p>é«˜æ–¯æ»¤æ³¢ (GF) è¢«ç”¨ä½œåŸºæœ¬çš„åå»å™ªæ–¹æ³•ï¼Œå°½ç®¡ä¼šå½±å“ç©ºé—´åˆ†è¾¨ç‡ï¼Œä»è€Œå½±å“ PET å›¾åƒçš„å®šé‡ç²¾åº¦ã€‚åæ¥ä½¿ç”¨åŒè¾¹æ»¤æ³¢ã€éå±€éƒ¨å‡å€¼æ»¤æ³¢ã€å›¾åƒå¼•å¯¼è¿‡æ»¤ï¼ˆIGFï¼‰å’Œå—åŒ¹é…è¿‡æ»¤çš„å»å™ªæ–¹æ³•ã€‚è¿™äº›å»å™ªç®—æ³•æä¾›äº†æ¯” GF æ›´å¥½çš„å»å™ªæ€§èƒ½ï¼ŒåŒæ—¶ä¿ç•™äº†ç©ºé—´åˆ†è¾¨ç‡å’Œå®šé‡ç²¾åº¦ã€‚</p><blockquote><p>Aside from the above mentioned conventional <a href="https://www.sciencedirect.com/topics/engineering/filtering-algorithm">filtering algorithms</a>, methods based on deep learning (DL) have been applied in various medical fields (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0023">Litjens et al., 2017</a>), and the use of <a href="https://www.sciencedirect.com/topics/engineering/convolutional-neural-networks">convolutional neural networks</a> (CNNs) has been reported to improve the quality of PET images (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al., 2019</a>a; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0012">HÃ¤ggstrÃ¶m et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0024">Liu and Qi, 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0030">Sanaat et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0034">Sphuler et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0047">Zhou et al., 2020</a>). However, the general CNN-based denoising methods typically require a pair of large reference datasets comprising high-quality images. This is a major problem in clinical usage owing to the difficulty of preparing huge sets of low-noise PET data without unduly burdening patients. In addition, the huge volume of novel PET tracers being developed, makes it difficult to collect large amounts of training data for each domain. The interpretation of denoised PET images may suffer inherent biases if unknown cases are excluded from the <a href="https://www.sciencedirect.com/topics/computer-science/training-dataset">training dataset</a>. Despite these challenges, DL algorithms often outperform conventional denoising algorithms. Therefore, there is a need for technology that can be uniformly adapted to various domains without using high-quality PET data.</p></blockquote><h5 id="æ·±åº¦å­¦ä¹ æ–¹æ³•çš„éš¾é¢˜">æ·±åº¦å­¦ä¹ æ–¹æ³•çš„éš¾é¢˜</h5><p>é™¤äº†ä¸Šè¿°ä¼ ç»Ÿè¿‡æ»¤ç®—æ³•ä¹‹å¤–ï¼ŒåŸºäºæ·±åº¦å­¦ä¹  (DL) çš„æ–¹æ³•å·²åº”ç”¨äºå„ä¸ªåŒ»å­¦é¢†åŸŸï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œ (CNN) å¯ä»¥æé«˜PET å›¾åƒè´¨é‡ã€‚è€Œæ·±åº¦å­¦ä¹ çš„å»å™ªæ–¹æ³•éœ€è¦é«˜è´¨é‡å›¾åƒçš„å¤§å‹å‚è€ƒæ•°æ®é›†ã€‚ä½†æ˜¯åœ¨ä¸ç»™æ‚£è€…é€ æˆè¿‡åº¦è´Ÿæ‹…çš„æƒ…å†µä¸‹å‡†å¤‡å¤§é‡çš„ä½å™ªå£° PET æ•°æ®æ˜¯ä¸€ä¸ªéš¾é¢˜ï¼Œå› æ­¤ç›®æ ‡æ˜¯éœ€è¦èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨é«˜è´¨é‡ PET æ•°æ®çš„æƒ…å†µä¸‹ï¼Œç»Ÿä¸€é€‚åº”å„ç§æƒ…å†µçš„æ–¹æ³•ã€‚</p><blockquote><p>In recent years, unsupervised or self-supervised DL approaches such as Noise2Noise and deep image prior (DIP) have demonstrated the potential to overcome these challenges (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0021">Lehtinen et al., 2018</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>). In particular, the DIP algorithm is a powerful noise suppression method that does not require the preparation of a prior training dataset (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0015">Hashimoto et al., 2019</a>, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0022">Lin and Huang, 2020</a>). Furthermore, PET reconstruction and denoising methods in which <a href="https://www.sciencedirect.com/topics/engineering/computed-tomography">computed tomography</a> (CT) and magnetic resonance (MR) images serve as the prior images input to the DIP framework have been developed (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0011">Gong et al., 2019</a>b). Compared to PET alone, the denoising performance has been improved by using multi-modal data combined with anatomical information. However, while this method shows potential for adapting various PET image denoising approaches, the <a href="https://www.sciencedirect.com/topics/computer-science/network-architecture">network architecture</a> does not fully utilize the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> or image details of anatomical-guidance images. Furthermore, the process of converting the guidance image to the PET image can result in the shape and pattern of the guidance image remaining in the output PET image, with the extent to which the features of the guidance image affect PET image denoising is yet to be elucidated. Moreover, the process by which the DIP algorithm optimizes the denoising remains unclear. Therefore, these issues must be clarified for future development.</p></blockquote><h5 id="æ·±åº¦å­¦ä¹ æ”¹è¿›æ–¹æ³•ï¼šNoise2Noiseï¼›DIPï¼›">æ·±åº¦å­¦ä¹ æ”¹è¿›æ–¹æ³•ï¼šNoise2Noiseï¼›DIPï¼›</h5><h5 id="DIPçš„ä¼˜ç‚¹ï¼š">DIPçš„ä¼˜ç‚¹ï¼š</h5><ul><li>ä¸€ç§å¼ºå¤§çš„å™ªå£°æŠ‘åˆ¶æ–¹æ³•ï¼Œä¸éœ€è¦å‡†å¤‡å…ˆéªŒè®­ç»ƒæ•°æ®é›†ï¼›</li><li>å…¶ä¸­è®¡ç®—æœºæ–­å±‚æ‰«æ (CT) å’Œç£å…±æŒ¯ (MR) å›¾åƒä½œä¸ºè¾“å…¥åˆ° DIP æ¡†æ¶çš„å…ˆéªŒå›¾åƒï¼›</li><li>ä¸å•ç‹¬çš„ PET ç›¸æ¯”ï¼Œé€šè¿‡ä½¿ç”¨å¤šæ¨¡æ€æ•°æ®ç»“åˆè§£å‰–ä¿¡æ¯ï¼Œå»å™ªæ€§èƒ½å¾—åˆ°äº†æé«˜ã€‚</li></ul><h5 id="DIPçš„é—®é¢˜ï¼š">DIPçš„é—®é¢˜ï¼š</h5><ul><li>ç½‘ç»œæ¶æ„å¹¶æ²¡æœ‰å……åˆ†åˆ©ç”¨è§£å‰–æŒ‡å¯¼å›¾åƒçš„è¯­ä¹‰ç‰¹å¾æˆ–å›¾åƒç»†èŠ‚ï¼›</li><li>å¼•å¯¼å›¾åƒè½¬æ¢ä¸ºPETå›¾åƒçš„è¿‡ç¨‹ä¼šå¯¼è‡´è¾“å‡ºPETå›¾åƒä¸­ä¿ç•™å¼•å¯¼å›¾åƒçš„å½¢çŠ¶å’Œå›¾æ¡ˆï¼›</li><li>å¼•å¯¼å›¾åƒçš„ç‰¹å¾å¯¹PETå›¾åƒå»å™ªçš„å½±å“ç¨‹åº¦å°šå¾…ç¡®å®šä¸”é˜æ˜ï¼›</li><li>DIPç®—æ³•ä¼˜åŒ–å»å™ªçš„è¿‡ç¨‹ä»ä¸æ¸…æ¥šã€‚</li></ul><blockquote><p>In this study, we propose an unsupervised 3D PET image denoising method that incorporates anatomical information into the DIP architecture via an attention mechanism. The attention gates (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0009">Fukui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0032">Schlemper et al., 2019</a>) used in the proposed network help optimize a noisy PET image using multi-scale semantic features extracted from the guidance image. As such, this method can prevent the leakage of guidance image features. The guidance of multi-scale features can lead to an effective regularizer for PET image denoising. The main contributions of this study are as follows:</p><ul><li>We propose a new PET image denoising method guided by anatomical information using an unsupervised <a href="https://www.sciencedirect.com/topics/computer-science/deep-learning-method">DL method</a>.</li><li>We demonstrate that the proposed network has the flexibility to handle the different PET tracer domains used to show the distribution of various tissues in the brains of human and non-human primates.</li><li>The behavior of the optimization process is visualized experimentally, thereby providing useful insights that were unresolved in unsupervised CNN-based restoration problems.</li></ul></blockquote><h5 id="æœ¬æ–‡çš„æ–¹æ³•ï¼š">æœ¬æ–‡çš„æ–¹æ³•ï¼š</h5><p>ä½¿ç”¨äº†æ— ç›‘ç£çš„3Dçš„PETå›¾åƒé™å™ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡<strong>æ³¨æ„æœºåˆ¶å°†è§£å‰–ä¿¡æ¯æ•´åˆåˆ° DIP æ¶æ„ä¸­</strong>ï¼Œä½¿ç”¨ä»å¼•å¯¼å›¾åƒä¸­æå–çš„å¤šå°ºåº¦è¯­ä¹‰ç‰¹å¾æ¥ä¼˜åŒ–å˜ˆæ‚çš„ PET å›¾åƒã€‚å¤šå°ºåº¦ç‰¹å¾çš„å¼•å¯¼å¯ä»¥ä¸º PET å›¾åƒå»å™ªæä¾›æœ‰æ•ˆçš„æ­£åˆ™åŒ–å™¨ã€‚</p><h5 id="è´¡çŒ®ï¼š">è´¡çŒ®ï¼š</h5><ul><li><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„ PET å›¾åƒå»å™ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨æ— ç›‘ç£çš„ DL æ–¹æ³•<strong>ä»¥è§£å‰–ä¿¡æ¯ä¸ºæŒ‡å¯¼</strong>ï¼›</p></li><li><p>å…·æœ‰å¤„ç†ä¸åŒPET ç¤ºè¸ªåŸŸçš„<strong>çµæ´»æ€§</strong>ï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºäººç±»å’Œéäººç±»çµé•¿ç±»åŠ¨ç‰©å¤§è„‘ä¸­å„ç§ç»„ç»‡çš„åˆ†å¸ƒï¼›</p></li><li><p>ä¼˜åŒ–è¿‡ç¨‹çš„è¡Œä¸ºé€šè¿‡å®éªŒè¿›è¡Œ<strong>å¯è§†åŒ–</strong>ï¼Œä»è€Œæä¾›åœ¨åŸºäº CNN çš„æ— ç›‘ç£é‡å»ºé—®é¢˜ä¸­æœªè§£å†³é—®é¢˜çš„ç›¸å…³è§è§£ã€‚</p></li></ul><h2 id="2-Related-work">2. Related work</h2><blockquote><p>The <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image restoration process is further complicated by the limited availability of information that can be extracted from noisy PET data. Another approach adopted for PET image denoising is to use anatomical prior extracted from the <a href="https://www.sciencedirect.com/topics/engineering/computed-tomography">CT</a> or MR images of the patient for <a href="https://www.sciencedirect.com/topics/engineering/regularization">regularization</a>. Because multi-modal images have become easier to obtain owing to the increasing availability of PET/CT and PET/MR scanners, various <a href="https://www.sciencedirect.com/topics/engineering/hybrid-method">hybrid methods</a> using anatomical priors have been developed to facilitate PET image denoising.</p></blockquote><p>PET å›¾åƒå»å™ªé‡‡ç”¨çš„å¦ä¸€ç§æ–¹æ³•æ˜¯<strong>ä½¿ç”¨ä»æ‚£è€…çš„ CT æˆ– MR å›¾åƒä¸­æå–çš„è§£å‰–å…ˆéªŒ</strong>è¿›è¡Œæ­£åˆ™åŒ–ã€‚ç”±äº PET/CT å’Œ PET/MR æ‰«æä»ªçš„å¯ç”¨æ€§ä¸æ–­æé«˜ï¼Œå¤šæ¨¡æ€å›¾åƒå˜å¾—æ›´å®¹æ˜“è·å¾—ï¼Œå› æ­¤å¼€å‘äº†å„ç§ä½¿ç”¨è§£å‰–å­¦å…ˆéªŒçš„æ··åˆæ–¹æ³•æ¥ä¿ƒè¿› PET å›¾åƒå»å™ªã€‚</p><h3 id="2-1-Classical-approach">2.1. Classical approach</h3><blockquote><p>Conventionally, hybrid denoising methods using anatomical priors have been adopted for PET image reconstruction and post-filtering. For example, <a href="https://www.sciencedirect.com/topics/engineering/maximum-a-posteriori">maximum a posteriori</a> image reconstruction has been incorporated alongside anatomical priors (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0007">Comtat et al., 2002</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0041">Vunckx et al., 2012</a>). In addition, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0035">Sudarshan et al. (2020)</a> proposed joint PET and MR image reconstruction using a patch-based joint-dictionary prior. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0003">Bland et al. (2018)</a> introduced MR-derived kernels to the kernel expectation maximization reconstruction. Although advanced image reconstruction algorithms can provide better denoising performance, they require significant computational resources and it is often difficult to set optimal parameters. Therefore, anatomically-guided post-denoising is often performed separately from the image reconstruction process. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0004">Chan et al. (2014)</a> proposed incorporating CT information and applying median non-local mean filtering to achieve PET denoising. Alternatively, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0045">Yan et al. (2015)</a> proposed MR-guided PET filtering by adapting a local linear model. In addition, the authors performed partial volume correction without MR image <a href="https://www.sciencedirect.com/topics/engineering/parcellation">parcellation</a> by incorporating <a href="https://www.sciencedirect.com/topics/engineering/partial-volume-effect">partial volume effects</a> into the model.</p></blockquote><h5 id="ç»å…¸æ–¹æ³•ï¼š">ç»å…¸æ–¹æ³•ï¼š</h5><p>å°†è§£å‰–å…ˆéªŒçš„æ··åˆå»å™ªæ–¹æ³•åº”ç”¨äºPETå›¾åƒé‡å»ºå’Œåæ»¤æ³¢å¤„ç†ï¼Œå°†æœ€å¤§åéªŒå›¾åƒé‡å»ºä¸è§£å‰–å…ˆéªŒç»“åˆåœ¨ä¸€èµ·ã€‚åŸºäºa patch-based joint-dictionary priorè”åˆPETå’ŒMRå›¾åƒé‡å»º</p><h3 id="2-2-Supervised-DL-approach">2.2. Supervised DL approach</h3><p>The supervised DL approach has recently demonstrated state-of-the-art performance in PET image denoising. When large amounts of training and label PET data pairs are available, the general <a href="https://www.sciencedirect.com/topics/engineering/convolutional-neural-networks">CNN</a> can be trained according to the following operation:</p>$$Î¸^*=argmin_Î¸ \frac{1}{N_t}âˆ‘_{iâˆˆD_t}âˆ¥x_{ref}^iâˆ’f_Î¸(x_0^i)âˆ¥$$<p>where âˆ¥Â·âˆ¥ is the L2 norm, f represents the CNN, Î¸ denotes the trainable parameters contained in the weights and biases, Dt is a mini-batch sample of size Nt, x0i is the <em>i</em>th element in the training data (noisy PET images), and xrefi is the <em>i</em>th element in the label data (clean PET images). Regarding supervised PET image denoising using anatomical information, in separate studies, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0024">Liu and Qi et al. (2019)</a>, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0033">Schramm et al. (2021)</a>, and <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0005">Chen et al. (2019)</a> trained CNNs to map multi-modal images, including noisy PET and MR images, to obtain clean PET images. In accordance with these methods, the mapping function, fÎ¸(x0i), in <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0001">Eq. (1)</a> is represented by fÎ¸(x0i,gi) using anatomical-guidance images, g. The supervised DL approach requires a vast number of low-dose (or short-time scan), high-dose (or long-time scan), and guidance image pairs.</p><h3 id="2-3-Unsupervised-DL-approach">2.3. Unsupervised DL approach</h3><p>Unsupervised DL approaches such as DIP do not require label data for PET image denoising. The DIP training process is optimized as follows (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>):</p>$$Î¸^*=argmin_Î¸âˆ¥x_0âˆ’f_Î¸(z)âˆ¥,x^*=f_{Î¸^*}(z)$$<p>where x0 is a <a href="https://www.sciencedirect.com/topics/engineering/noisy-image">noisy image</a>, x* is the final <a href="https://www.sciencedirect.com/topics/engineering/denoised-image">denoised image</a> output, and the network input z is random noise. The DIP algorithm uses a CNN to map a <a href="https://www.sciencedirect.com/topics/engineering/degraded-image">degraded image</a>, x0, and obtains the optimal denoised image by regularization of the architecture via moderate iteration. This is based purely on the prior information included in the CNN structure. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0015">Hashimoto et al. (2019</a>), (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">2020</a>) proposed dynamic PET image denoising by directly inputting static PET images into 3D and 4D DIP as prior information. In contrast, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al. (2019)</a> and <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al. (2019</a>a) both proposed PET denoising methods that rely on inputting anatomical-guidance images, g (e.g., CT and MR images), instead of the DIP input, z. In these methods, the mapping function, fÎ¸(z), in <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0002">Eq. (2)</a> is represented by fÎ¸(g).</p><p>The unsupervised DL approach can bridge the technical gap between the classical and supervised DL approaches for PET image denoising based on anatomical information. Nevertheless, previous methods often fail to clarify how the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> of the guidance image affect PET image denoising.</p><h2 id="3-Methodology">3. Methodology</h2><h3 id="3-1-MR-guided-deep-decoder">3.1. MR-guided deep decoder</h3><p>To explicitly utilize the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> of anatomical-guidance image for <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising, we propose a method for unsupervised 3D PET image denoising based on anatomical information that uses an MR-guided deep decoder (MR-GDD), which is inspired by <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0039">Uezato et al. (2020)</a>. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#fig0001">Fig. 1</a> shows the <a href="https://www.sciencedirect.com/topics/computer-science/network-structure">network structure</a> of the proposed MR-GDD, which comprises two <a href="https://www.sciencedirect.com/topics/engineering/subnetwork">subnetworks</a>: an encoder-decoder subnetwork with a skip connection and a deep decoder subnetwork. The two subnetworks are connected by an upsampling refinement unit (URU) and a feature refinement unit (FRU), which incorporate an attention gate to weight the multi-scale features extracted from the MR image to the deep decoder subnetwork. This combined network performs end-to-end learning from scratch.</p><p><img src="https://picture.mulindya.com/MR-guided-deep-decoder.jpg" alt=""></p><p>Fig. 1. Overview of the proposed MR-GDD used for unsupervised 3D <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising. This architecture consists of two <a href="https://www.sciencedirect.com/topics/engineering/subnetwork">subnetworks</a> connected by attention gates: an encoder-decoder subnetwork with a skip connection (top) and a deep decoder subnetwork (bottom). This combined architecture is optimized using end-to-end learning. The attention gates in the upsampling refinement unit (URU) and the feature refinement unit (FRU) guide the optimization of noisy PET image using the multi-scale <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> extracted from the MR image. This architecture can prevent the semantic features of the MR image from leaking.</p><h4 id="3-1-1-Encoder-decoder-subnetwork">3.1.1. Encoder-decoder subnetwork</h4><p>The encoder-decoder subnetwork is designed to extract low-scale to high-scale hierarchical semantic features from the MR image. It is based on the 3D U-Net architecture (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0006">Ã‡iÃ§ek et al., 2016</a>) and consists of encoding and decoding paths. In the encoding path, the combination of a 3 Ã— 3 Ã— 3 3D <a href="https://www.sciencedirect.com/topics/computer-science/convolution-layer">convolution layer</a> with <a href="https://www.sciencedirect.com/topics/computer-science/batch-normalization">batch normalization</a> (BN) and a leaky rectified linear unit (LReLU) is repeated twice, before being constructed by a 3 Ã— 3 Ã— 3 3D convolution layer with two strides for downsampling, followed by the BN and LReLU. At each downsampling step, the size of the feature maps is halved. In the decoding path, the outputs of the upsampling layer and the skip connection supplied from the encoding path are added, before the combination of the 3 Ã— 3 Ã— 3 3D convolution layer with the BN and LReLU is repeated twice. At each upsampling step, the size of the feature maps is doubled.</p><h4 id="3-1-2-Deep-decoder-subnetwork">3.1.2. Deep decoder subnetwork</h4><p>The deep decoder subnetwork reconstructs the denoised PET image from the network input filled with uniform noise. Each step in the deep decoder subnetwork is upsampled first by the URU, then by a 3 Ã— 3 Ã— 3 3D convolution layer, and finally by the BN, LReLU, and FRU. Owing to the presence the attention gates, the URU and FRU can generate conditional weights using the MR image features via a 1 Ã— 1 Ã— 1 3D convolution layer, LReLU, and <a href="https://www.sciencedirect.com/topics/engineering/sigmoid-function">sigmoid function</a>, and then weights the features obtained from the pre-layer in the deep decoder. The URU promotes the <a href="https://www.sciencedirect.com/topics/computer-science/spatial-locality">spatial locality</a> of MR image features, whereas the FRU promotes similar semantic alignment. Finally, a 1 Ã— 1 Ã— 1 3D convolution layer outputs a denoised PET image.</p><h3 id="3-2-Loss-function-and-optimization">3.2. Loss function and optimization</h3><p>To denoise the PET image, the training process of the proposed MR-GDD, which utilizes <a href="https://www.sciencedirect.com/topics/computer-science/unsupervised-learning">unsupervised learning</a> that does not require PET reference data, is optimized as follows:</p>$$Î¸^*=argmin_Î¸âˆ¥x_0âˆ’f_Î¸(z,g)âˆ¥,x^*=f_{Î¸^*}(z,g)$$<p>where âˆ¥Â·âˆ¥ is the L2 norm, f represents the proposed MR-GDD network, the training label x0 represents the noisy PET image, and the network inputs z and g are the random noise and the MR-guidance image, respectively. The input noise was generated by adding a fixed uniform random noise and <a href="https://www.sciencedirect.com/topics/engineering/gaussian-white-noise">Gaussian noise</a> with different seed for each epoch. The attention gates used in the proposed architecture help optimize the noisy PET image by using the multi-scale semantic features extracted from a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/image-guided-intervention">guidance image</a> g. If the <em>k</em>-th scale feature of the encoder path in the encoder-decoder subnetwork is defined as Î“k and the <em>k</em>-th scale features of the decoder path are defined as Îk, the influence on the mapping function, f, can be expressed as follows:</p>$$f=f_Î¸(z|Î“1,â‹¯Î“k,Î1,â‹¯Îk).$$<p>In this method, the limited memory BFGS (L-BFGS) algorithm (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0048">Zhu et al., 1997</a>), which is a quasi-Newtonian method, is introduced to solve the nonlinear <a href="https://www.sciencedirect.com/topics/engineering/least-square-problem">least squares problem</a> described by <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0003">Eq. (3)</a>. By considering the approximate <a href="https://www.sciencedirect.com/topics/engineering/hessian-matrix">Hessian matrix</a> based on the second-order gradient, the L2 norm converges more stably and quickly than first-order <a href="https://www.sciencedirect.com/topics/engineering/gradient-descent">gradient descent</a> algorithms, such as the stochastic gradient descent algorithm or Adam. In addition, because a small amount of data is generated as a result of using the unsupervised architecture, which does not require a prior <a href="https://www.sciencedirect.com/topics/computer-science/training-dataset">training dataset</a>, the MR-GDD can reduce the computational complexity and load required to performed denoising. We used the L-BFGS algorithm at a learning rate of 0.01 without line search to minimize the processing time. The proposed architecture was processed using PyTorch 1.6.0 on Ubuntu 16.04 with acceleration by a <a href="https://www.sciencedirect.com/topics/engineering/graphics-processing-unit">graphics processing unit</a> (NVIDIA Quadro RTX8000 with 48 GB memory).</p><h2 id="4-Experimental-setup">4. Experimental setup</h2><p>A simulation study using [18F]fluoro-2-deoxy-D-glucose (FDG), a preclinical study using [18F]FDG and [11C]raclopride, and a clinical study using [18F]florbetapir (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0043">Wong et al., 2010</a>) were performed to verify the effectiveness of the proposed <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising method. In addition, the denoising performance of the proposed MR-GDD was compared against four other unsupervised algorithms under the same conditions as the proposed MR-GDD;</p><ul><li><em>Gaussian filtering (GF).</em> GF is a basic post-denoising method for suppressing noise in PET images. We used a 3D <a href="https://www.sciencedirect.com/topics/engineering/gaussian-kernel">Gaussian kernel</a>.</li><li><em>Image guided filtering (IGF).</em> IGF performs PET image denoising by adapting a local linear model using a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/image-guided-intervention">guidance image</a> (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0016">Hashimoto et al., 2018</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0017">He et al., 2013</a>). We used the MR image as the guidance image.</li><li><em>Deep image prior (DIP).</em> The general DIP algorithm uses random noise as the network input (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>). We used the encoder-decoder network in the proposed MR-GDD as the DIP architecture.</li><li><em>MR-DIP.</em> MR-DIP uses an MR prior as a direct input in the DIP architecture (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al., 2019</a>a). We used the same architecture as in the DIP algorithm.</li></ul><p>As a pre-processing step for all the data, voxel intensity normalization was performed on each of the MR and PET images. The MR image intensity was normalized in the [0, 1] range using a min-max normalization technique. Furthermore, the 99.95th <a href="https://www.sciencedirect.com/topics/engineering/percentile">percentile</a> was defined for PET image intensity, which was also normalized in the [0, 1] range using a min-max normalization technique.</p><h3 id="4-1-Simulation-study">4.1. Simulation study</h3><p>We performed a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/monte-carlo-method">Monte Carlo simulation</a> using the 3D brain phantom from BrainWeb (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0002">Aubert-Broche et al., 2006</a>). The Monte Carlo simulation modeled the geometry of a brain-dedicated PET scanner (HITS-655000 (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0042">Watanabe et al., 2017</a>), <a href="https://www.sciencedirect.com/topics/computer-science/hamamatsu-photonics">Hamamatsu Photonics</a> K.K., Japan). The scanner consists of 32 detector blocks with <a href="https://www.sciencedirect.com/topics/engineering/cerium">cerium</a> doped <a href="https://www.sciencedirect.com/topics/engineering/lutetium">lutetium</a> <a href="https://www.sciencedirect.com/topics/engineering/yttrium">yttrium</a> <a href="https://www.sciencedirect.com/topics/engineering/orthosilicates">orthosilicate</a> crystals per ring, with 5 of these blocks aligned to the scanner axis. To ensure a mismatch between the MR and PET images, two hot spheres (with radii of 10 and 12 mm, respectively) were inserted exclusively into the PET image to present tumor regions. Then, we simulated a static [18F]FDG scan equivalent to 150 M counts, including attenuation and scattering effects. An attenuation map was created from the segmented MR image, and the attenuation effects of water and bone were considered. The gray matter:white matter:cerebrospinal fluid:left tumor:right tumor activity ratio was set to 1:0.25:0.05:2:2 based on the [18F]FDG contrast. We also simulated low-activity tumor data (left tumor:right tumor activity ratio was set to 1.5:1.2) for some low-grade tumors or pathology linked to <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/degenerative-disease">neurodegenerative disease</a>. To generate the reference PET image, the simulated list-mode data were reconstructed using a 3D list-mode dynamic row-action maximum-likelihood algorithm (DRAMA) (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0037">Tanaka and Kudo, 2010</a>) with two iterations and 40 subsets. The reconstructed image measured 128 Ã— 128 Ã— 83 voxels (2.6 Ã— 2.6 Ã— 2.4 mm/voxel). The reference image was reconstructed using all the list-mode data. The noisy PET image was obtained by periodically downsampling to 1/30th of the reference list-mode data (see Supplementary Material 0.1) and reconstructing the low-count image (5 M counts). The corresponding T1-weighted MR image was used as the guidance image.</p><h3 id="4-2-Preclinical-study">4.2. Preclinical study</h3><p>A preclinical study was conducted using monkeys and was approved by the Animal Ethics Committees of the Central <a href="https://www.sciencedirect.com/topics/engineering/research-laboratories">Research Laboratory</a>, Hamamatsu Photonics K.K. PET scans using [18F]FDG and [11C]raclopride imaged the brains of conscious <a href="https://www.sciencedirect.com/topics/engineering/rhesus-monkey">rhesus monkeys</a>, whose bodies and heads were fixed using an animal PET scanner (SHR-38000 (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0013">Hamamatsu 2021</a>), Hamamatsu Photonics K.K., Japan). After a 30 min transmission scan using a 68Ge-68Ga source, doses of [18F]FDG (113 MBq) and [11C]raclopride (282 MBq) were injected into each monkey, before dynamic PET scans were performed for 120 and 90 min, respectively. We performed image reconstruction using 3D DRAMA with two iterations and 60 subsets that incorporated attenuation correction via transmission scan data. The reconstructed images measured 256 Ã— 256 Ã— 103 voxels (0.65 Ã— 0.65 Ã— 1.0167 mm/voxel) and were cropped <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/pamicogrel">to 192</a> Ã— 192 Ã— 64 voxels to reduce the demand on the <a href="https://www.sciencedirect.com/topics/engineering/graphics-processing-unit">GPU</a> memory. The reference images were reconstructed using all the list-mode data for [18F]FDG and the list mode data for the 60 min period between 30 and 90 min of the scan such that the contrast created by the distribution of [11C]raclopride in the striatum to be observed clearly. Each noisy PET image was obtained by periodically downsampling to 1/10th of the reference list-mode data. The corresponding T1-weighted MR images were taken on another day and registered manually by two radiological <a href="https://www.sciencedirect.com/topics/engineering/technologist">technologists</a>.</p><h3 id="4-3-Clinical-study">4.3. Clinical study</h3><p>An amyloid scan using [18F]florbetapir was conducted on the human brain of a cognitive normal subject using a Biograph mMR scanner (Siemens Healthineers, Germany) as part of the â€œInsight 46â€³ sub-study of the MRC National Survey of Health and Development (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0020">Lane et al., 2017</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0025">Markiewicz et al., 2018</a>a). The PET data were acquired dynamically for 60 min using a [18F]florbetapir dose of 409 MBq. During PET image reconstruction, attenuation correction was performed via a pseudo-CT image, which was synthesized using T1- and T2-weighted MR images that were acquired simultaneously, and enabled an Î¼-map to be was calculated. Image reconstruction was performed using an ordered subset expectation maximization (OS-EM) algorithm involving four iterations and 14 subsets using the NiftyPET package (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0026">Markiewicz et al., 2018</a>b). The reconstructed images comprised 334 Ã— 334 Ã— 127 voxels (2 Ã— 2 Ã— 2 mm/voxel), which were cropped to 128 Ã— 128 Ã— 83 voxels to reduce the demand on the GPU memory. The reference image was reconstructed using the list-mode data for the period from 30 to 60 min to observe the contrast between gray and white matter clearly. The noisy PET image was obtained by periodically downsampling to 1/10th of the reference list-mode data.</p><h3 id="4-4-Evaluation-metrics">4.4. Evaluation metrics</h3><p>To quantitatively evaluate the performance of different denoising methods, for the simulation study, we calculated the peak signal-to-noise ratio (PSNR) and structural similarity (SSIM) of the target image, x, and the reference image, xref, which are defined as</p>$$PSNR=10log_{10}(\frac{max(x^{ref})^2}{\frac{1}{N_R}âˆ‘_{jâˆˆR}(x_jâˆ’x_j^{ref})^2})$$<p>and</p>$$SSIM=\frac{1}{N_R}âˆ‘_{jâˆˆR}\frac{(2Î¼_{jx}Î¼_{jx^{ref}}+c_1)(2Ïƒ_{jxx^{ref}}+c_2)}{(Î¼_{jx}^2+Î¼_{jx^{ref}}^2+c_1)(Ïƒ_{jx}^2+Ïƒ_{jx^{ref}}^2+c^2)}$$<p>respectively. Here, R and NR represent the brain region in the PET image and the number of voxels, respectively, Î¼ and Ïƒ are the mean and standard deviation of the square window corresponding to the <em>j</em>-th voxel, respectively, and Ïƒjxxref is the covariance between x and xref. Furthermore, c1=(0.01L)2 and c2=(0.03L)2 where L represents the dynamic range of the reference. The contrast-to-noise ratio (CNR) between gray matter and white matter was calculated as(7)CNR=|SgÂ¯âˆ’SwÂ¯|Ïƒg2+Ïƒw2,where SgÂ¯, SwÂ¯ and Ïƒg, Ïƒw are the mean activity and standard deviation corresponding to the regions of interest (ROIs) in the gray and white matter, respectively. The ROIs were constructed in the gray matter regions on the left and right brains of different slices, whereas the white matter regions were selected within the centrum semiovale (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0028">Paxinos et al., 2000</a>). In the [11C]raclopride calculation, the ROIs were set on the <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/putamen">putamen</a> instead of the gray matter. A Wilcoxon signed-rank test was performed on the PSNR, SSIM, and CNR to compare the performance of different denoising methods. As the noisy PET data were generated by downsampling the reference list-mode data, we generated multiple independent noisy samples (10 samples) to examine the uncertainty and test the statistical significance.</p><p>We also evaluated the tradeoffs between noise and quantitative information of the <a href="https://www.sciencedirect.com/topics/engineering/denoised-image">denoised images</a> when FWHM (GF), Îµ (IGF), and epochs (CNNs) are changed. For the simulation study, we calculated the tradeoff between the mean squared bias and the variance in the ROI:(8)Bias2=âˆ‘jâˆˆR(xjâˆ’xjref)2âˆ‘jâˆˆR(xjref)2,(7)Variance=âˆ‘jâˆˆR(xjâˆ’xÂ¯)2âˆ‘jâˆˆR(xjref)2,where R denotes the tumor regions, xÂ¯ is the average pixel value inside the ROI. For preclinical study, we calculated the tradeoff between the mean uptake (putamen and caudate and striatum) and the standard deviation (white matter). Each ROI used for the evaluation was set manually to include any partial volume voxels on the MR image and was calculated via superimposition on the co-registered PET image.</p><p>Thus far, the optimization process for the DIP algorithm has only been reported as a conceptual diagram (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">Hashimoto et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>), with several aspects such as the actual behavior remaining unclarified. To elucidate the DIP optimization process, we visualized it by performing nonlinear dimensionally reduction using the locally linear embedding (LLE) algorithm (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0031">Saul and Roweis, 2003</a>), which implements manifold learning. We projected the PET data used for optimization under different training conditions onto a three-dimensional manifold, considering a neighborhood of 15 for each point.</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>pet</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>pet</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾åƒåˆæˆè§†é¢‘</title>
    <link href="/2021/10/30/python/img/pic2video/"/>
    <url>/2021/10/30/python/img/pic2video/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨å¾®ç”Ÿç‰©é¡¹ç›®ä¸­ï¼Œéœ€è¦å°†è§†é¢‘ä¸­çš„å¾®ç”Ÿç‰©æ£€æµ‹è¯†åˆ«å‡ºæ¥ï¼Œå¹¶ä¸”ç”Ÿæˆè§†é¢‘çš„æ ¼å¼ä¿å­˜ï¼Œå…¶ä¸­éœ€è¦å°†æ£€æµ‹çš„annotationå›¾ç‰‡åˆæˆä¸ºè§†é¢‘æ ¼å¼ã€‚<strong>å¤§è‡´æµç¨‹ï¼šä½¿ç”¨cvåº“ï¼Œé¦–å…ˆè¯»å–å›¾ç‰‡ï¼Œresizeåˆ°æŒ‡å®šå¤§å°ï¼Œå­˜å‚¨åˆ°Videoå®ä¾‹ä¸­ï¼›</strong></p></blockquote><blockquote><p>OpenCV åº•å±‚æ˜¯ç”¨ FFMEPG è¿›è¡Œå¤šåª’ä½“å¼€å‘çš„ï¼Œæ‰€ä»¥ OpenCV å®ƒçš„é•¿é¡¹ä¸åœ¨äºæ­¤ï¼Œå®ƒåªæ˜¯æä¾›äº†è¿™ç§èƒ½åŠ›è€Œå·²ï¼Œå¦‚æœè¦é’ˆå¯¹å¤šåª’ä½“æ–‡ä»¶åšå¤æ‚çš„å¤„ç†ï¼Œæ¨èçš„è¿˜æ˜¯ FFMEPG ä¸“ä¸šåº“ã€‚OpenCV ç”¨æ¥åˆ›å»ºè§†é¢‘æ–‡ä»¶çš„ç±»æ˜¯ VideoWriterã€‚é¦–å…ˆæ™®åŠä¸€äº›è§†é¢‘ç±»ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚</p></blockquote><h2 id="è§†é¢‘æœ‰å…³çŸ¥è¯†">è§†é¢‘æœ‰å…³çŸ¥è¯†</h2><h3 id="1-æ–‡ä»¶åç¼€å">1. æ–‡ä»¶åç¼€å</h3><p>æˆ‘ä»¬ä¸€èˆ¬éƒ½çŸ¥é“è§†é¢‘æ–‡ä»¶æ˜¯ .mp4ã€.3gpã€.rmvb ç­‰ç­‰æ ¼å¼çš„ï¼Œä½†ä¸€ä¸ªæ–‡ä»¶å–è¿™æ ·çš„åç¼€åæ˜¯ä¸ºäº†å‘Šè¯‰ç”¨æˆ·æˆ–è€…æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å†…å®¹æ˜¯ä»€ä¹ˆæ ¼å¼çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† rmvb æ ¼å¼çš„æ–‡ä»¶å–åä¸º ***.aviã€‚åç¼€çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨ä¸“ä¸šçš„å·¥å…·æˆ–è€…è½¯ä»¶æ“ä½œå®ƒä»¬ã€‚</p><h3 id="2-æ–‡ä»¶æ ¼å¼">2. æ–‡ä»¶æ ¼å¼</h3><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªè§†é¢‘æ–‡ä»¶çœ‹åšä¸€ä¸ªå®¹å™¨ã€‚</p><p>ç®€å•åœ°è¯´å°±æ˜¯å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç›’å­ã€‚</p><p><strong>è¿™ä¸ªç›’å­é‡Œé¢æœ‰è§†é¢‘ç”»é¢æ•°æ®ã€éŸ³é¢‘æ•°æ®ã€å­—å¹•æ•°æ®ç­‰ç­‰ã€‚</strong></p><p>ä¸åŒçš„æ–‡ä»¶æ ¼å¼å¦‚ mp4ã€aviã€mkv ç­‰ç­‰ï¼Œå®ƒä»¬å­˜æ”¾ æ‰“åŒ…æ•°æ®çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæ–‡ä»¶å†…éƒ¨æ–‡ä»¶ç¼–ç æ–¹å¼ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚</p><h3 id="3-ç¼–ç æ ¼å¼">3. ç¼–ç æ ¼å¼</h3><p>è§†é¢‘å®¹å™¨ä¸­ï¼Œä¸€èˆ¬æœ‰è§†é¢‘å’ŒéŸ³é¢‘æ•°æ®ï¼Œå®ƒä»¬é‡‡å–çš„ç¼–ç æ–¹å¼ä¸ä¸€æ ·ã€‚</p><p>è§†é¢‘å¸¸è§çš„ç¼–ç æ–¹å¼é€šå¸¸æœ‰ï¼š x264ã€h264ã€mpeg-4</p><p>éŸ³é¢‘å¸¸è§çš„ç¼–ç æ–¹å¼é€šå¸¸æœ‰ï¼š mp3ã€AACã€flac</p><p>ç¼–ç çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œä¼ è¾“ï¼Œå¦‚æœä½ ä¸é‡‡ç”¨ç¼–ç å‹ç¼©çš„è¯ï¼Œé‚£ä¹ˆè§†é¢‘å¯ä»¥çœ‹åšæ˜¯ä¸€ç³»åˆ—çš„å›¾ç‰‡åºåˆ—ï¼Œä½“ç§¯ä¼šéå¸¸å¤§ã€‚</p><h3 id="4-ç¼–ç å™¨å’Œè§£ç å™¨">4. ç¼–ç å™¨å’Œè§£ç å™¨</h3><p>æŠŠè§†é¢‘æˆ–è€…éŸ³é¢‘æŒ‰ç…§ç¼–ç æ ¼å¼ï¼Œç¼–ç æˆç‰¹å®šæ–‡ä»¶æ ¼å¼éœ€è¦ç¼–ç å™¨çš„å‚ä¸ï¼Œä¸ç„¶æ¯æ¬¡å¼€å‘é‡æ–°å†™ä»£ç ä»£ä»·å¾ˆé«˜ã€‚</p><p>æŠŠç‰¹å®šæ–‡ä»¶æ ¼å¼è§£ç æˆç‰¹å®šçš„ç¼–ç æ ¼å¼æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£ç ï¼Œéœ€è¦è§£ç å™¨çš„å­˜åœ¨ã€‚</p><p>è§£ç å™¨å’Œç¼–ç å™¨éƒ½æœ‰å¼€æºçš„æˆ–è€…æ”¶è´¹çš„å·¥å…·åº“ï¼Œæå¤§æ–¹ä¾¿äº†å¼€å‘è€…ã€‚</p><h3 id="5-FPS-å¸§ç‡">5. FPS å¸§ç‡</h3><p>æˆ‘ä»¬è¯»åˆä¸­ç‰©ç†æ—¶ï¼Œå¤§æ¦‚äº†è§£è¿‡ç”µå½±ç”»é¢ä¸€ç§’é’Ÿ 24 å¸§ï¼Œå…¶å®å¯¹åº”çš„å°±æ˜¯ 24 fpsï¼Œframe per secondï¼Œæœ‰äº›æ‰‹æœºæœ‰é«˜é€Ÿæ‘„åƒçš„åŠŸèƒ½ï¼ŒåŸç†å°±æ˜¯èƒ½å¤Ÿ 1 ç§’é’Ÿæ‹æ‘„ 960 å¼ å›¾ç‰‡ï¼Œç„¶åç”¨æ­£å¸¸çš„é€Ÿåº¦æ”¾æ˜ å‡ºæ¥ï¼Œæ‰€ä»¥ç»†èŠ‚æ¯”è¾ƒå¤šã€‚</p><p>fps è¶Šé«˜ï¼Œç»†èŠ‚è¶Šå¥½ï¼Œä½“éªŒä¹Ÿè¶Šå¥½ï¼Œä½†æ˜¯æ–‡ä»¶å®¹é‡ä¹Ÿè¶Šé«˜ã€‚</p><h2 id="å‡½æ•°åŸå‹-cv2-VideoWriter">å‡½æ•°åŸå‹ cv2.VideoWriter()</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">VideoWriter(filename, fourcc, fps, frameSize[, isColor]) -&gt; &lt;VideoWriter <span class="hljs-built_in">object</span>&gt;<br></code></pre></td></tr></tbody></table></figure><ul><li>filename:è¦ä¿å­˜çš„æ–‡ä»¶çš„è·¯å¾„</li><li>fourcc: æŒ‡å®šç¼–ç å™¨</li><li>fps: è¦ä¿å­˜çš„è§†é¢‘çš„å¸§ç‡</li><li>frameSize: è¦ä¿å­˜çš„æ–‡ä»¶çš„ç”»é¢å°ºå¯¸</li><li>isColor: æŒ‡ç¤ºæ˜¯é»‘ç™½ç”»é¢è¿˜æ˜¯å½©è‰²çš„ç”»é¢</li></ul><h3 id="fourccçš„è®¾ç½®">fourccçš„è®¾ç½®</h3><blockquote><p>fourccæ„ä¸ºå››å­—ç¬¦ä»£ç ï¼ˆFour-Character Codesï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œè¯¥ç¼–ç ç”±å››ä¸ªå­—ç¬¦ç»„æˆ,ä¸‹é¢æ˜¯VideoWriter_fourccå¯¹è±¡ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼Œæ³¨æ„ï¼šå­—ç¬¦é¡ºåºä¸èƒ½å¼„æ··ã€‚</p></blockquote><ul><li><p>cv2.VideoWriter_fourcc(â€˜Dâ€™, â€˜Iâ€™, â€˜Vâ€™, â€˜Xâ€™) å¯¹åº”æ ¼å¼ mp4</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Iâ€™,â€˜4â€™,â€˜2â€™,â€˜0â€™)â€”æœªå‹ç¼©çš„YUVé¢œè‰²ç¼–ç ï¼Œ4:2:0è‰²åº¦å­é‡‡æ ·ã€‚å…¼å®¹æ€§å¥½ï¼Œä½†æ–‡ä»¶è¾ƒå¤§ï¼Œæ³¨æ„æ˜¯å¾ˆå¤§ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_focurcc(â€˜Pâ€™,â€˜Iâ€™,â€˜Mâ€™,â€˜1â€™)â€”MPEG-1ç¼–ç ç±»å‹ã€‚éšæœºè®¿é—®ï¼Œçµæ´»çš„å¸§ç‡ã€å¯å˜çš„å›¾åƒå°ºå¯¸ã€å®šä¹‰äº†Iå¸§ã€På¸§å’ŒBå¸§ã€è¿åŠ¨è¡¥å¿å¯è·¨è¶Šå¤šä¸ªå¸§ã€åŠåƒç´ ç²¾åº¦çš„è¿åŠ¨å‘é‡ã€é‡åŒ–çŸ©é˜µã€GOFç»“æ„ã€sliceç»“æ„ã€æŠ€æœ¯ç»†èŠ‚ã€è¾“å…¥è§†é¢‘æ ¼å¼ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Xâ€™,â€˜Vâ€™,â€˜Iâ€™,â€˜Dâ€™)â€”MPEG-4ç¼–ç ç±»å‹ï¼Œè§†é¢‘å¤§å°ä¸ºå¹³å‡å€¼ï¼ŒMPEG4æ‰€éœ€è¦çš„ç©ºé—´æ˜¯MPEG1æˆ–M-JPEGçš„1/10ï¼Œå®ƒå¯¹è¿åŠ¨ç‰©ä½“å¯ä»¥ä¿è¯è‰¯å¥½çš„æ¸…æ™°åº¦ï¼Œé—´/æ—¶é—´/ç”»è´¨å…·æœ‰å¯è°ƒæ€§ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Tâ€™,â€˜Hâ€™,â€˜Eâ€™,â€˜Oâ€™)â€”OGGVorbisï¼ŒéŸ³é¢‘å‹ç¼©æ ¼å¼ï¼Œæœ‰æŸå‹ç¼©ï¼Œç±»ä¼¼äºMP3ç­‰çš„éŸ³ä¹æ ¼å¼ã€‚å…¼å®¹æ€§å·®ï¼Œæ–‡ä»¶æ‰©å±•åä¸º.ogvã€‚</p></li><li><p>**cv2.VideoWriter_focurcc(â€˜Fâ€™,â€˜Lâ€™,â€˜Vâ€™,â€˜1â€™)â€”FLVæ˜¯FLASH VIDEOçš„ç®€ç§°ï¼ŒFLVæµåª’ä½“æ ¼å¼æ˜¯ä¸€ç§æ–°çš„è§†é¢‘æ ¼å¼ã€‚**ç”±äºå®ƒå½¢æˆçš„æ–‡ä»¶æå°ã€åŠ è½½é€Ÿåº¦æå¿«ï¼Œä½¿å¾—ç½‘ç»œè§‚çœ‹è§†é¢‘æ–‡ä»¶æˆä¸ºå¯èƒ½ï¼Œå®ƒçš„å‡ºç°æœ‰æ•ˆçš„è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥Flashåï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚æ–‡ä»¶æ‰©å±•åä¸º.flv</p></li></ul><p>è§†é¢‘ç¼–ç æ–¹å¼è¿˜æœ‰å¾ˆå¤šï¼Œå…·ä½“å¯å‚è€ƒhttp://www.fourcc.org/codecs.phpã€‚</p><h2 id="å®ç°ä»£ç ">å®ç°ä»£ç </h2><p><code>flv2jpg.py</code>:åˆ‡åˆ†è§†é¢‘ï¼ŒæŒ‰ç…§æŒ‡å®šå¸§é¢‘ç‡ä¿å­˜å›¾ç‰‡ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">flv2jpg</span>(<span class="hljs-params">videopath, mytimeF=<span class="hljs-number">1</span>, save_flag = <span class="hljs-literal">False</span></span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    å°†flvæ ¼å¼è§†é¢‘æ¯éš”mytimeFä¸ªå¸§ä¿å­˜ä¸€å¼ å›¾ç‰‡</span><br><span class="hljs-string">    :param videopath: å­˜å‚¨flvè§†é¢‘çš„æ–‡ä»¶å¤¹</span><br><span class="hljs-string">    :param mytimeF: é—´éš”å¸§æ•°</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    """</span><br>    save_dir = os.path.join(os.path.dirname(videopath), <span class="hljs-string">"images"</span>)<br>    os.makedirs(save_dir, exist_ok=<span class="hljs-literal">True</span>)<br>    num = <span class="hljs-number">1</span>  <span class="hljs-comment"># ä¿å­˜å›¾ç‰‡è®¡æ•°</span><br>    <span class="hljs-built_in">print</span>(videopath)<br>    vc = cv2.VideoCapture(videopath)<br>    <span class="hljs-keyword">if</span> vc.isOpened():<br>        rval, frame = vc.read()<br>    <span class="hljs-keyword">else</span>:<br>        rval = <span class="hljs-literal">False</span><br>    timeF = mytimeF  <span class="hljs-comment"># æ¯éš”mytimeFå¸§</span><br>    count = <span class="hljs-number">1</span>  <span class="hljs-comment"># å¸§è®¡æ•°</span><br>    <span class="hljs-keyword">while</span> rval:<br>        rval, frame = vc.read()<br>        <span class="hljs-keyword">if</span> count % timeF == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> frame <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"current frame count:"</span>, count)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"num:"</span>, num)<br><br>            <span class="hljs-keyword">if</span> save_flag:<br>                save_path = os.path.join(save_dir, <span class="hljs-built_in">str</span>(num) + <span class="hljs-string">"_"</span> + videopath.split(<span class="hljs-string">"/"</span>)[-<span class="hljs-number">1</span>] + <span class="hljs-string">".jpg"</span>)<br>                cv2.imwrite(save_path, frame)<br>                <span class="hljs-built_in">print</span>(save_path)<br>                num += <span class="hljs-number">1</span><br>        count += <span class="hljs-number">1</span><br>    vc.release()<br>    <span class="hljs-keyword">return</span> save_dir<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<br>    test_video = <span class="hljs-string">"./data/lunchong3.flv"</span><br>    flv2jpg(test_video,save_flag=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></tbody></table></figure><p><code>main.py</code> ï¼šä¿å­˜å¤„ç†åçš„è§†é¢‘</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flv2jpg <span class="hljs-keyword">import</span> flv2jpg<br><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os,glob<br><span class="hljs-keyword">from</span> detectInfo <span class="hljs-keyword">import</span> Detect_img<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">makeVideo</span>(<span class="hljs-params">Video_img_list,fps,size,save_dir</span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    func:ç”±åˆ‡åˆ†å¥½çš„è§†é¢‘å¸§å›¾åƒå¾—åˆ°æ£€æµ‹åçš„è§†é¢‘</span><br><span class="hljs-string">    input: å¾…åˆæˆçš„å›¾ç‰‡listï¼Œè§†é¢‘çš„fpsï¼Œsizeè®¾ç½® è§†é¢‘ä¿å­˜è·¯å¾„</span><br><span class="hljs-string">    return: æ— è¿”å›</span><br><span class="hljs-string">    """</span><br>    <span class="hljs-comment"># video = cv2.VideoWriter(save_dir, cv2.VideoWriter_fourcc('I', '4', '2', '0'), fps, size)</span><br>    video = cv2.VideoWriter(save_dir, cv2.VideoWriter_fourcc(*<span class="hljs-string">'mp4v'</span>), fps, size)<br><br>    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> Video_img_list:<br>        img = cv2.resize(img, size)  <span class="hljs-comment"># å°†å›¾ç‰‡è½¬æ¢ä¸º1280*720</span><br>        video.write(img)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detectVideo</span>(<span class="hljs-params">test_video_path,detect_img,fps=<span class="hljs-number">24</span>,size=(<span class="hljs-params"><span class="hljs-number">640</span>,<span class="hljs-number">480</span></span>),sift_thres = <span class="hljs-number">0.5</span></span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    å°†è¾“å…¥çš„è§†é¢‘ï¼Œåˆ‡åˆ†å›¾åƒï¼Œä½¿ç”¨æ¨¡å‹æ£€æµ‹ï¼Œè¿”å›åˆæˆçš„è§†é¢‘ç»“æœ</span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        test_video_path: è§†é¢‘è·¯å¾„ </span><br><span class="hljs-string">        detect_img: æ¨¡å‹å®ä¾‹</span><br><span class="hljs-string">        fps: è§†é¢‘å¸§</span><br><span class="hljs-string">        size: è§†é¢‘å›¾åƒå¤§å°</span><br><span class="hljs-string">        sift_thres: ç­›é€‰æ˜¾ç¤ºçš„æ£€æµ‹é˜ˆå€¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Returns: None</span><br><span class="hljs-string"></span><br><span class="hljs-string">    """</span><br>    img_root = flv2jpg(test_video_path,save_flag=<span class="hljs-literal">True</span>) <span class="hljs-comment">#è¯»å–è·¯å¾„</span><br>    save_dir_anno = os.path.join(os.path.dirname(test_video_path),<span class="hljs-string">"annotation/"</span>)<br>    <span class="hljs-comment">#è·å–æ‰¹é‡æ•°æ®çš„æ£€æµ‹ä¿¡æ¯</span><br>    Video_img_list = detect_img.get_info(source=img_root, save_img=<span class="hljs-literal">True</span>, save_dir=save_dir_anno,sift_thres=sift_thres)<br>    save_dir = os.path.join(os.path.dirname(test_video_path),<span class="hljs-string">"VideoDetect.mp4"</span>)<br>    makeVideo(Video_img_list, fps, size, save_dir)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<br>    detect_img = Detect_img(weights=<span class="hljs-string">"./weights/best.pt"</span>)<br>    test_video_path = <span class="hljs-string">"./data/lunchong3.flv"</span><br>    detectVideo(test_video_path, detect_img, fps=<span class="hljs-number">120</span>, size=(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>), sift_thres=<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><h2 id="YoLov5ä¸­çš„å®ç°">YoLov5ä¸­çš„å®ç°</h2><p>å®é™…ä¸Šåœ¨yolov5çš„detectè„šæœ¬ä¸­ï¼ŒåŒ…å«äº†å¤„ç†è¾“å…¥ä¸ºè§†é¢‘æ ¼å¼æ–‡ä»¶çš„æ£€æµ‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><h3 id="ç›¸å…³ä»£ç ">ç›¸å…³ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python">datasets.py<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoadImages</span>:</span>  <span class="hljs-comment"># for inference</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, path, img_size=<span class="hljs-number">640</span>, stride=<span class="hljs-number">32</span></span>):</span><br>        p = <span class="hljs-built_in">str</span>(Path(path).absolute())  <span class="hljs-comment"># os-agnostic absolute path</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">'*'</span> <span class="hljs-keyword">in</span> p:<br>            files = <span class="hljs-built_in">sorted</span>(glob.glob(p, recursive=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># glob</span><br>        <span class="hljs-keyword">elif</span> os.path.isdir(p):<br>            files = <span class="hljs-built_in">sorted</span>(glob.glob(os.path.join(p, <span class="hljs-string">'*.*'</span>)))  <span class="hljs-comment"># dir</span><br>        <span class="hljs-keyword">elif</span> os.path.isfile(p):<br>            files = [p]  <span class="hljs-comment"># files</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">f'ERROR: <span class="hljs-subst">{p}</span> does not exist'</span>)<br><br>        images = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> files <span class="hljs-keyword">if</span> x.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower() <span class="hljs-keyword">in</span> img_formats]<br>        videos = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> files <span class="hljs-keyword">if</span> x.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower() <span class="hljs-keyword">in</span> vid_formats]<br>        ni, nv = <span class="hljs-built_in">len</span>(images), <span class="hljs-built_in">len</span>(videos)<br><br>        self.img_size = img_size<br>        self.stride = stride<br>        self.files = images + videos<br>        self.nf = ni + nv  <span class="hljs-comment"># number of files</span><br>        self.video_flag = [<span class="hljs-literal">False</span>] * ni + [<span class="hljs-literal">True</span>] * nv<br>        self.mode = <span class="hljs-string">'image'</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(videos):<br>            self.new_video(videos[<span class="hljs-number">0</span>])  <span class="hljs-comment"># å¦‚æœä¸ºè·¯å¾„åˆ™è¯»å–æ‰“å¼€è§†é¢‘</span><br>        <span class="hljs-keyword">else</span>:<br>            self.cap = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">assert</span> self.nf &gt; <span class="hljs-number">0</span>, <span class="hljs-string">f'No images or videos found in <span class="hljs-subst">{p}</span>. '</span> \<br>                            <span class="hljs-string">f'Supported formats are:\nimages: <span class="hljs-subst">{img_formats}</span>\nvideos: <span class="hljs-subst">{vid_formats}</span>'</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__iter__</span>(<span class="hljs-params">self</span>):</span><br>        self.count = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> self<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__next__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.count == self.nf:<br>            <span class="hljs-keyword">raise</span> StopIteration<br>        path = self.files[self.count]<br><br>        <span class="hljs-keyword">if</span> self.video_flag[self.count]:<br>            <span class="hljs-comment"># Read video</span><br>            self.mode = <span class="hljs-string">'video'</span><br>            ret_val, img0 = self.cap.read() <span class="hljs-comment">#æŒ‰å¸§è¯»å–è§†é¢‘ï¼Œret,frameæ˜¯è·cap.read()æ–¹æ³•çš„ä¸¤ä¸ªè¿”å›å€¼ã€‚å…¶ä¸­retæ˜¯å¸ƒå°”å€¼ï¼Œå¦‚æœè¯»å–å¸§æ˜¯æ­£ç¡®çš„åˆ™è¿”å›Trueï¼Œå¦‚æœæ–‡ä»¶è¯»å–åˆ°ç»“å°¾ï¼Œå®ƒçš„è¿”å›å€¼å°±ä¸ºFalseã€‚frameå°±æ˜¯æ¯ä¸€å¸§çš„å›¾åƒï¼Œæ˜¯ä¸ªä¸‰ç»´çŸ©é˜µã€‚</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret_val:<br>                self.count += <span class="hljs-number">1</span><br>                self.cap.release()<br>                <span class="hljs-keyword">if</span> self.count == self.nf:  <span class="hljs-comment"># last video</span><br>                    <span class="hljs-keyword">raise</span> StopIteration<br>                <span class="hljs-keyword">else</span>:<br>                    path = self.files[self.count]<br>                    self.new_video(path) <br>                    ret_val, img0 = self.cap.read()<br><br>            self.frame += <span class="hljs-number">1</span><br>            <span class="hljs-comment"># print(f'video {self.count + 1}/{self.nf} ({self.frame}/{self.frames}) {path}: ', end='')</span><br><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># Read image</span><br>            self.count += <span class="hljs-number">1</span><br>            img_path_code = np.fromfile(path, dtype=np.uint8)  <span class="hljs-comment"># å«æœ‰ä¸­æ–‡è·¯å¾„æ—¶</span><br>            img0 = cv2.imdecode(img_path_code,<span class="hljs-number">1</span>)  <span class="hljs-comment"># pathï¼Œï¼Œï¼Œï¼ŒBGR</span><br>            <span class="hljs-keyword">assert</span> img0 <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>, <span class="hljs-string">'Image Not Found '</span> + path<br>            <span class="hljs-comment"># print(f'image {self.count}/{self.nf} {path}: ', end='')</span><br><br>        <span class="hljs-comment"># Padded resize</span><br>        img = letterbox(img0, self.img_size, stride=self.stride)[<span class="hljs-number">0</span>]<br><br>        <span class="hljs-comment"># Convert</span><br>        img = img[:, :, ::-<span class="hljs-number">1</span>].transpose(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># BGR to RGB and HWC to CHW</span><br>        img = np.ascontiguousarray(img)<br><br>        <span class="hljs-keyword">return</span> path, img, img0, self.cap<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new_video</span>(<span class="hljs-params">self, path</span>):</span><br>        self.frame = <span class="hljs-number">0</span><br>        self.cap = cv2.VideoCapture(path) <span class="hljs-comment">#VideoCapture()ä¸­å‚æ•°æ˜¯0ï¼Œè¡¨ç¤ºæ‰“å¼€ç¬”è®°æœ¬çš„å†…ç½®æ‘„åƒå¤´ï¼Œå‚æ•°æ˜¯è§†é¢‘æ–‡ä»¶è·¯å¾„åˆ™æ‰“å¼€è§†é¢‘</span><br>        self.frames = <span class="hljs-built_in">int</span>(self.cap.get(cv2.CAP_PROP_FRAME_COUNT))<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__len__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.nf  <span class="hljs-comment"># number of files</span><br></code></pre></td></tr></tbody></table></figure><p>detect.pyä¸­æ¶‰åŠè§†é¢‘çš„å¤„ç†ä»£ç ï¼šåœ¨ä¸Šè¿°çš„loaddataä¸­çš„cap.read()ä¼šé»˜è®¤å¾—åˆ°çš„å¸§å›¾åƒä¸º640*480ï¼Œå¯ä»¥ä½¿ç”¨cap.get()å‡½æ•°å¾—åˆ°è§†é¢‘ç›¸å…³å±æ€§ï¼Œä½¿ç”¨cap.set()å‡½æ•°è®¾ç½®3ï¼Œ4idçš„å‚æ•°å€¼ï¼ˆ3ï¼Œ4å¯¹åº”çš„æ˜¯å®½é«˜å±æ€§ï¼‰</p><blockquote><p>cv2.VideoCapture().set(propId, value)<br>åŠŸèƒ½ï¼šè®¾ç½®æ‘„åƒå¤´<br>å‚æ•°ï¼špropIdï¼šè®¾ç½®çš„è§†é¢‘å‚æ•°ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç±»å‹ï¼šæ•´æ•°ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€å¯ä»¥å‚è€ƒ ï¼šcv2.VideoCapture().get()ä¸­çš„å‚æ•°<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€valueï¼š è®¾ç½®çš„å‚æ•°<br>è¿”å›å€¼ï¼šboolå€¼ï¼š<br>ã€€ã€€ã€€ã€€true:ä¸èƒ½ç¡®ä¿æ‘„åƒå¤´å·²æ¥å—å±æ€§å€¼<br>ã€€ã€€ã€€ã€€flase:æ‘„åƒå¤´æœªæ¥å—å±æ€§å€¼</p><p>ä¸¾ä¾‹ï¼š<br>cap.set(3, 480)<br>å‚æ•°ï¼š3ï¼šåœ¨è§†é¢‘æµçš„å¸§çš„å®½åº¦<br>ã€€ã€€ã€€480ï¼šé«˜åº¦çš„æ•°å€¼<br>åŠŸèƒ½ï¼šæŠŠè§†é¢‘æµçš„å¸§(å›¾ç‰‡)çš„å®½åº¦è°ƒæˆ480</p><p>cap.set(4, 480)<br>å‚æ•°ï¼š4ï¼šåœ¨è§†é¢‘æµçš„å¸§çš„é«˜åº¦<br>ã€€ã€€ã€€480ï¼šå®½åº¦çš„æ•°å€¼<br>åŠŸèƒ½ï¼šæŠŠè§†é¢‘æµçš„å¸§(å›¾ç‰‡)çš„é«˜åº¦è°ƒæˆ480</p></blockquote><table><thead><tr><th>param</th><th>define</th></tr></thead><tbody><tr><td>cv2.VideoCapture.get(0)</td><td>CV_CAP_PROP_POS_MSEC è§†é¢‘æ–‡ä»¶çš„å½“å‰ä½ç½®ï¼ˆæ’­æ”¾ï¼‰ä»¥æ¯«ç§’ä¸ºå•ä½</td></tr><tr><td>cv2.VideoCapture.get(1)</td><td>CV_CAP_PROP_POS_FRAMES åŸºäºä»¥0å¼€å§‹çš„è¢«æ•è·æˆ–è§£ç çš„å¸§ç´¢å¼•</td></tr><tr><td>cv2.VideoCapture.get(2)</td><td>CV_CAP_PROP_POS_AVI_RATIO è§†é¢‘æ–‡ä»¶çš„ç›¸å¯¹ä½ç½®ï¼ˆæ’­æ”¾ï¼‰ï¼š0=ç”µå½±å¼€å§‹ï¼Œ1=å½±ç‰‡çš„ç»“å°¾ã€‚</td></tr><tr><td>cv2.VideoCapture.get(3)</td><td>CV_CAP_PROP_FRAME_WIDTH åœ¨è§†é¢‘æµçš„å¸§çš„å®½åº¦</td></tr><tr><td>cv2.VideoCapture.get(4)</td><td>CV_CAP_PROP_FRAME_HEIGHT åœ¨è§†é¢‘æµçš„å¸§çš„é«˜åº¦</td></tr><tr><td>cv2.VideoCapture.get(5)</td><td>CV_CAP_PROP_FPS å¸§é€Ÿç‡</td></tr><tr><td>cv2.VideoCapture.get(6)</td><td>CV_CAP_PROP_FOURCC ç¼–è§£ç çš„4å­—-å­—ç¬¦ä»£ç </td></tr><tr><td>cv2.VideoCapture.get(7)</td><td>CV_CAP_PROP_FRAME_COUNT è§†é¢‘æ–‡ä»¶ä¸­çš„å¸§æ•°</td></tr><tr><td>cv2.VideoCapture.get(8)</td><td>CV_CAP_PROP_FORMAT è¿”å›å¯¹è±¡çš„æ ¼å¼</td></tr><tr><td>cv2.VideoCapture.get(9)</td><td>CV_CAP_PROP_MODE è¿”å›åç«¯ç‰¹å®šçš„å€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºå½“å‰æ•è·æ¨¡å¼</td></tr><tr><td>cv2.VideoCapture.get(10)</td><td>CV_CAP_PROP_BRIGHTNESS å›¾åƒçš„äº®åº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(11)</td><td>CV_CAP_PROP_CONTRAST å›¾åƒçš„å¯¹æ¯”åº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(12)</td><td>CV_CAP_PROP_SATURATION å›¾åƒçš„é¥±å’Œåº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(13)</td><td>CV_CAP_PROP_HUE è‰²è°ƒå›¾åƒ(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(14)</td><td>CV_CAP_PROP_GAIN å›¾åƒå¢ç›Š(ä»…é€‚ç”¨äºç…§ç›¸æœº)ï¼ˆGainåœ¨æ‘„å½±ä¸­è¡¨ç¤ºç™½å¹³è¡¡æå‡ï¼‰</td></tr><tr><td>cv2.VideoCapture.get(15)</td><td>CV_CAP_PROP_EXPOSURE æ›å…‰(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(16)</td><td>CV_CAP_PROP_CONVERT_RGB æŒ‡ç¤ºæ˜¯å¦åº”å°†å›¾åƒè½¬æ¢ä¸ºRGBå¸ƒå°”æ ‡å¿—</td></tr><tr><td>cv2.VideoCapture.get(17)</td><td>CV_CAP_PROP_WHITE_BALANCE Ã— æš‚æ—¶ä¸æ”¯æŒ</td></tr><tr><td>cv2.VideoCapture.get(18)</td><td>CV_CAP_PROP_RECTIFICATION ç«‹ä½“æ‘„åƒæœºçš„çŸ«æ­£æ ‡æ³¨ï¼ˆç›®å‰åªæœ‰DC1394 v.2.xåç«¯æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼‰</td></tr></tbody></table><table><thead><tr><th>capture.set</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>capture.set(CV_CAP_PROP_FRAME_WIDTH, 1080);</td><td>å®½åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_FRAME_HEIGHT, 960);</td><td>é«˜åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_FPS, 30);</td><td>å¸§ç‡ å¸§/ç§’</td></tr><tr><td>capture.set(CV_CAP_PROP_BRIGHTNESS, 1);</td><td>äº®åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_CONTRAST,40)</td><td>å¯¹æ¯”åº¦ 40</td></tr><tr><td>capture.set(CV_CAP_PROP_SATURATION, 50);</td><td>é¥±å’Œåº¦ 50</td></tr><tr><td>capture.set(CV_CAP_PROP_HUE, 50);</td><td>è‰²è°ƒ 50</td></tr><tr><td>capture.set(CV_CAP_PROP_EXPOSURE, 50);</td><td>æ›å…‰ 50 è·å–æ‘„åƒå¤´å‚æ•°</td></tr></tbody></table><h3 id="å…·ä½“ä»£ç ">å…·ä½“ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Set Dataloader</span><br>vid_path, vid_writer = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><span class="hljs-keyword">if</span> webcam:<br>    view_img = check_imshow()<br>    cudnn.benchmark = <span class="hljs-literal">True</span>  <span class="hljs-comment"># set True to speed up constant image size inference</span><br>    dataset = LoadStreams(source, img_size=imgsz, stride=stride)<br><span class="hljs-keyword">else</span>:<br>    dataset = LoadImages(source, img_size=imgsz, stride=stride)<br><br><span class="hljs-keyword">for</span> path, img, im0s, vid_cap <span class="hljs-keyword">in</span> tqdm(dataset): <span class="hljs-comment">#ä¸€ä¸ªbatchçš„ä¿¡æ¯</span><br>    img_path_list.append(path)<br>    img = torch.from_numpy(img).to(device)<br>    img = img.half() <span class="hljs-keyword">if</span> half <span class="hljs-keyword">else</span> img.<span class="hljs-built_in">float</span>()  <span class="hljs-comment"># uint8 to fp16/32</span><br>    img /= <span class="hljs-number">255.0</span>  <span class="hljs-comment"># 0 - 255 to 0.0 - 1.0</span><br>    <span class="hljs-keyword">if</span> img.ndimension() == <span class="hljs-number">3</span>:<br>        img = img.unsqueeze(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># Inference</span><br>    t1 = time_synchronized()<br>    pred = model(img, augment=augment)[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-comment"># Apply NMS</span><br>    pred = non_max_suppression(pred, conf_thres, iou_thres, classes, agnostic_nms, max_det=max_det)<br>    t2 = time_synchronized()<br><br>    <span class="hljs-comment"># Process detections</span><br>    <span class="hljs-comment"># imgbox_list = [] #ä¸€å¼ å›¾çš„boxä¿¡æ¯</span><br>    Vorticella_list = []<br>    Rotifera_list = []<br><br><br>    <span class="hljs-keyword">for</span> i, det <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(pred):  <span class="hljs-comment"># detections per image ä¸€å¼ å›¾ä¿¡æ¯</span><br>        <span class="hljs-keyword">if</span> webcam:  <span class="hljs-comment"># batch_size &gt;= 1</span><br>            p, s, im0, frame = path[i], <span class="hljs-string">f'<span class="hljs-subst">{i}</span>: '</span>, im0s[i].copy(), dataset.count<br>        <span class="hljs-keyword">else</span>:<br>            p, s, im0, frame = path, <span class="hljs-string">''</span>, im0s.copy(), <span class="hljs-built_in">getattr</span>(dataset, <span class="hljs-string">'frame'</span>, <span class="hljs-number">0</span>) <br>        s += <span class="hljs-string">'%gx%g '</span> % img.shape[<span class="hljs-number">2</span>:]  <span class="hljs-comment"># print string</span><br>        p = Path(p)  <span class="hljs-comment"># to Path</span><br>        save_path = save_dir+p.name <span class="hljs-comment"># img.jpg</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(det):<br>            <span class="hljs-comment"># Rescale boxes from img_size to im0 size</span><br>            <span class="hljs-comment"># è°ƒæ•´é¢„æµ‹æ¡†çš„åæ ‡ï¼šåŸºäºresize+padçš„å›¾ç‰‡çš„åæ ‡--&gt;åŸºäºåŸsizeå›¾ç‰‡çš„åæ ‡</span><br>            <span class="hljs-comment"># æ­¤æ—¶åæ ‡æ ¼å¼ä¸ºxyxy</span><br>            det[:, :<span class="hljs-number">4</span>] = scale_coords(img.shape[<span class="hljs-number">2</span>:], det[:, :<span class="hljs-number">4</span>], im0.shape).<span class="hljs-built_in">round</span>()<br><br>            <span class="hljs-comment"># Print results</span><br>            <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> det[:, -<span class="hljs-number">1</span>].unique():<br>                n = (det[:, -<span class="hljs-number">1</span>] == c).<span class="hljs-built_in">sum</span>()  <span class="hljs-comment"># detections per class</span><br>                s += <span class="hljs-string">f"<span class="hljs-subst">{n}</span> <span class="hljs-subst">{names[<span class="hljs-built_in">int</span>(c)]}</span><span class="hljs-subst">{<span class="hljs-string">'s'</span> * (n &gt; <span class="hljs-number">1</span>)}</span>, "</span>  <span class="hljs-comment"># add to string</span><br>            <span class="hljs-comment"># ["Vorticella", "Rotifera"]</span><br>            <span class="hljs-comment"># Write results</span><br>            <span class="hljs-comment"># for *xyxy, conf, cls in reversed(det):</span><br>            <span class="hljs-keyword">for</span> *xyxy, conf, cls <span class="hljs-keyword">in</span> det: <span class="hljs-comment">#ç½®ä¿¡åº¦ä»å¤§åˆ°å° #å›¾ä¸­çš„æ‰€æœ‰æ¡†ä¿¡æ¯</span><br>                xywh_no_norm = xyxy2xywh(torch.tensor(xyxy).view(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)).view(-<span class="hljs-number">1</span>).tolist()<br>                box = (cls, xywh_no_norm, conf) <span class="hljs-comment">#å­˜å‚¨ç±»åˆ« xywh ç½®ä¿¡åº¦</span><br>                <span class="hljs-keyword">if</span>(conf&lt;sift_thres):<span class="hljs-keyword">continue</span> <span class="hljs-comment">#è¿‡æ»¤ç½®ä¿¡åº¦å°äº0.7çš„æ¡†</span><br>                <span class="hljs-keyword">if</span>(cls==<span class="hljs-number">0</span>):<br>                    Vorticella_list.append(box)<br>                <span class="hljs-keyword">elif</span>(cls==<span class="hljs-number">1</span>):<br>                    Rotifera_list.append(box)<br>                <span class="hljs-comment"># imgbox_list.append(box)</span><br>                c = <span class="hljs-built_in">int</span>(cls)  <span class="hljs-comment"># integer class</span><br>                label = <span class="hljs-string">f'<span class="hljs-subst">{names[c]}</span> <span class="hljs-subst">{conf:<span class="hljs-number">.2</span>f}</span>'</span><br>                plot_one_box(xyxy, im0, label=label, color=colors(c, <span class="hljs-literal">True</span>), line_thickness=<span class="hljs-number">3</span>)<br><br>        <span class="hljs-comment"># Save results (image with detections)</span><br>        <span class="hljs-keyword">if</span> save_img:<br>            <span class="hljs-keyword">if</span> dataset.mode == <span class="hljs-string">'image'</span>:<br>                cv2.imwrite(save_path, im0)<br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 'video' or 'stream'</span><br>                <span class="hljs-keyword">if</span> vid_path != save_path:  <span class="hljs-comment"># new video</span><br>                    vid_path = save_path<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(vid_writer, cv2.VideoWriter):<br>                        vid_writer.release()  <span class="hljs-comment"># release previous video writer</span><br>                    <span class="hljs-keyword">if</span> vid_cap:  <span class="hljs-comment"># video</span><br>                        fps = vid_cap.get(cv2.CAP_PROP_FPS) <span class="hljs-comment">#è·å–åŸå§‹è§†é¢‘çš„å¸§ç‡</span><br>                        <span class="hljs-comment"># w = int(vid_cap.get(cv2.CAP_PROP_FRAME_WIDTH)) #è·å–åŸå§‹è§†é¢‘å¸§å®½</span><br>                        <span class="hljs-comment"># h = int(vid_cap.get(cv2.CAP_PROP_FRAME_HEIGHT)) #è·å–åŸå§‹è§†é¢‘çš„é«˜</span><br>                        w, h =  im0.shape[<span class="hljs-number">1</span>], im0.shape[<span class="hljs-number">0</span>] <span class="hljs-comment">#æ›´æ–°ä¸ºåŸå§‹å›¾åƒçš„å®½é«˜</span><br>                    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># stream</span><br>                        fps, w, h = <span class="hljs-number">30</span>, im0.shape[<span class="hljs-number">1</span>], im0.shape[<span class="hljs-number">0</span>]<br>                        <span class="hljs-comment"># save_path += '.mp4'</span><br>                        save_path += <span class="hljs-string">'.flv'</span><br>                    <span class="hljs-comment"># vid_writer = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(*'mp4v'), fps, (w, h))</span><br><br>                    vid_writer = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(<span class="hljs-string">'F'</span>, <span class="hljs-string">'L'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'1'</span>), fps, (w, h))<br>                vid_writer.write(im0)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>np.squeezeçš„ç”¨æ³•</title>
    <link href="/2021/10/29/python/func/squeeze/"/>
    <url>/2021/10/29/python/func/squeeze/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•squeeze() çš„ç›¸å…³ç”¨æ³•ï¼Œä»¥åŠpytorchå­¦ä¹  ä¸­ torch.squeeze() å’Œtorch.unsqueeze()çš„ç”¨æ³•ã€‚</p></blockquote><h3 id="numpyçš„squeezeå‡½æ•°">numpyçš„squeezeå‡½æ•°</h3><h4 id="å‡½æ•°è¯´æ˜">å‡½æ•°è¯´æ˜</h4><p>é€‚ç”¨äºä¸€å¤„æ•°ç»„ä¸­çš„å•ä¸€ç»´åº¦ï¼Œä¹Ÿå°±æ˜¯å»æ‰æ•°ç»„è½´ä¸­ç»´åº¦ä¸º1çš„ç»´åº¦ï¼Œå‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python">np.squeeze()<br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">3</span>-c5986a7939bf&gt; <span class="hljs-keyword">in</span> &lt;module&gt;<br>----&gt; <span class="hljs-number">1</span> np.squeeze()<br><br>&lt;__array_function__ internals&gt; <span class="hljs-keyword">in</span> squeeze(*args, **kwargs)<br><br>TypeError: _squeeze_dispatcher() missing <span class="hljs-number">1</span> required positional argument: <span class="hljs-string">'a'</span><br><br>â€‹<br>Signature: np.squeeze(a, axis=<span class="hljs-literal">None</span>)<br>Docstring:<br>Remove single-dimensional entries <span class="hljs-keyword">from</span> the shape of an array.<br><br>Parameters<br>----------<br>a : array_like<br>    Input data.<br>axis : <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">tuple</span> of ints, optional<br>    .. versionadded:: <span class="hljs-number">1.7</span><span class="hljs-number">.0</span><br><br>    Selects a subset of the single-dimensional entries <span class="hljs-keyword">in</span> the<br>    shape. If an axis <span class="hljs-keyword">is</span> selected <span class="hljs-keyword">with</span> shape entry greater than<br>    one, an error <span class="hljs-keyword">is</span> raised.<br><br>Returns<br>-------<br>squeezed : ndarray<br>    The <span class="hljs-built_in">input</span> array, but <span class="hljs-keyword">with</span> <span class="hljs-built_in">all</span> <span class="hljs-keyword">or</span> a subset of the<br>    dimensions of length <span class="hljs-number">1</span> removed. This <span class="hljs-keyword">is</span> always `a` itself<br>    <span class="hljs-keyword">or</span> a view into `a`.<br><br>Raises<br>------<br>ValueError<br>    If `axis` <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>, <span class="hljs-keyword">and</span> an axis being squeezed <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> of length <span class="hljs-number">1</span><br><br>See Also<br>--------<br>expand_dims : The inverse operation, adding singleton dimensions<br>reshape : Insert, remove, <span class="hljs-keyword">and</span> combine dimensions, <span class="hljs-keyword">and</span> resize existing ones<br><br>Examples<br>--------<br><span class="hljs-meta">&gt;&gt;&gt; </span>x = np.array([[[<span class="hljs-number">0</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>]]])<br><span class="hljs-meta">&gt;&gt;&gt; </span>x.shape<br>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x).shape<br>(<span class="hljs-number">3</span>,)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">0</span>).shape<br>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">1</span>).shape<br>Traceback (most recent call last):<br>...<br>ValueError: cannot select an axis to squeeze out which has size <span class="hljs-keyword">not</span> equal to one<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">2</span>).shape<br>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h4><p>æŒ‡å®šè½´è¿›è¡Œå‹ç¼©å•ä¸€çš„ç»´åº¦ï¼Œå¦‚æœæŒ‡å®šè½´ç»´åº¦ä¸ä¸º1ï¼Œå°±ä¼šè¿”å›ValueErrorã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">b = a.reshape(<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>) <span class="hljs-comment">#axis åˆ†åˆ«ä¸º0ï¼Œ1ï¼Œ2ï¼Œ3</span><br>b<br>array([[[[ <span class="hljs-number">1</span>],<br>         [ <span class="hljs-number">2</span>]]],<br><br><br>       [[[ <span class="hljs-number">3</span>],<br>         [ <span class="hljs-number">4</span>]]],<br><br><br>       [[[ <span class="hljs-number">5</span>],<br>         [ <span class="hljs-number">6</span>]]],<br><br><br>       [[[ <span class="hljs-number">7</span>],<br>         [ <span class="hljs-number">8</span>]]],<br><br><br>       [[[ <span class="hljs-number">9</span>],<br>         [<span class="hljs-number">10</span>]]]])<br>np.squeeze(b,axis=<span class="hljs-number">3</span>) <span class="hljs-comment">#æŒ‡å®šç»´åº¦ä¸º1çš„axisè¿›è¡Œsqueeze</span><br>array([[[ <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>]],<br><br>       [[ <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>]],<br><br>       [[ <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>]],<br><br>       [[ <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>]],<br><br>       [[ <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]]])<br><br>np.squeeze(b,axis=<span class="hljs-number">1</span>)<br>array([[[ <span class="hljs-number">1</span>],<br>        [ <span class="hljs-number">2</span>]],<br><br>       [[ <span class="hljs-number">3</span>],<br>        [ <span class="hljs-number">4</span>]],<br><br>       [[ <span class="hljs-number">5</span>],<br>        [ <span class="hljs-number">6</span>]],<br><br>       [[ <span class="hljs-number">7</span>],<br>        [ <span class="hljs-number">8</span>]],<br><br>       [[ <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">10</span>]]])<br>        <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">å¦‚æœæŒ‡å®šè½´ä¸º<span class="hljs-number">1</span>ï¼Œå°±ä¼šæŠ¥é”™ValueError<br>ValueError                                Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">27</span>-5187bab4a1cf&gt; <span class="hljs-keyword">in</span> &lt;module&gt;<br>----&gt; <span class="hljs-number">1</span> np.squeeze(b,axis=<span class="hljs-number">0</span>)<br><br>&lt;__array_function__ internals&gt; <span class="hljs-keyword">in</span> squeeze(*args, **kwargs)<br><br>D:\Anaconda3\lib\site-packages\numpy\core\fromnumeric.py <span class="hljs-keyword">in</span> squeeze(a, axis)<br>   <span class="hljs-number">1481</span>         <span class="hljs-keyword">return</span> squeeze()<br>   <span class="hljs-number">1482</span>     <span class="hljs-keyword">else</span>:<br>-&gt; <span class="hljs-number">1483</span>         <span class="hljs-keyword">return</span> squeeze(axis=axis)<br>   <span class="hljs-number">1484</span> <br>   <span class="hljs-number">1485</span> <br><br>ValueError: cannot select an axis to squeeze out which has size <span class="hljs-keyword">not</span> equal to one<br></code></pre></td></tr></tbody></table></figure><h3 id="pytorchä¸­çš„squeezeå’Œunsqueezeå‡½æ•°">pytorchä¸­çš„squeezeå’Œunsqueezeå‡½æ•°</h3><p>åœ¨pytorchä¸­ä¹Ÿæœ‰ç›¸å…³çš„å‡½æ•°ï¼Œä¸numpyä¸­çš„å‡½æ•°ç±»ä¼¼ã€‚</p><p>squeezeçš„ç”¨æ³•ä¸»è¦å°±æ˜¯å¯¹æ•°æ®çš„ç»´åº¦è¿›è¡Œå‹ç¼©æˆ–è€…è§£å‹ã€‚</p><p>å…ˆçœ‹<code>torch.squeeze()</code> è¿™ä¸ªå‡½æ•°ä¸»è¦å¯¹æ•°æ®çš„ç»´åº¦è¿›è¡Œå‹ç¼©ï¼Œ<strong>å»æ‰ç»´æ•°ä¸º1çš„çš„ç»´åº¦</strong>ï¼Œæ¯”å¦‚æ˜¯ä¸€è¡Œæˆ–è€…ä¸€åˆ—è¿™ç§ï¼Œä¸€ä¸ªä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰çš„æ•°å»æ‰ç¬¬ä¸€ä¸ªç»´æ•°ä¸ºä¸€çš„ç»´åº¦ä¹‹åå°±å˜æˆï¼ˆ3ï¼‰è¡Œã€‚squeeze(a)å°±æ˜¯å°†aä¸­æ‰€æœ‰ä¸º1çš„ç»´åº¦åˆ æ‰ã€‚ä¸ä¸º1çš„ç»´åº¦æ²¡æœ‰å½±å“ã€‚a.squeeze(N) å°±æ˜¯å»æ‰aä¸­æŒ‡å®šçš„ç»´æ•°ä¸ºä¸€çš„ç»´åº¦ã€‚è¿˜æœ‰ä¸€ç§å½¢å¼å°±æ˜¯b=torch.squeeze(aï¼ŒN) aä¸­å»æ‰æŒ‡å®šçš„å®šçš„ç»´æ•°ä¸ºä¸€çš„ç»´åº¦ã€‚</p><p>å†çœ‹<code>torch.unsqueeze()</code>è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯å¯¹æ•°æ®ç»´åº¦è¿›è¡Œæ‰©å……ã€‚<strong>ç»™æŒ‡å®šä½ç½®åŠ ä¸Šç»´æ•°ä¸ºä¸€çš„ç»´åº¦</strong>ï¼Œæ¯”å¦‚åŸæœ¬æœ‰ä¸ªä¸‰è¡Œçš„æ•°æ®ï¼ˆ3ï¼‰ï¼Œåœ¨0çš„ä½ç½®åŠ äº†ä¸€ç»´å°±å˜æˆä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰ã€‚a.squeeze(N) å°±æ˜¯åœ¨aä¸­æŒ‡å®šä½ç½®NåŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º1çš„ç»´åº¦ã€‚è¿˜æœ‰ä¸€ç§å½¢å¼å°±æ˜¯b=torch.squeeze(aï¼ŒN) aå°±æ˜¯åœ¨aä¸­æŒ‡å®šä½ç½®NåŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º1çš„ç»´åº¦</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è·å¾—ç”µè„‘çš„ppi</title>
    <link href="/2021/10/26/python/getppi/"/>
    <url>/2021/10/26/python/getppi/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è·å–ç”µè„‘çš„åˆ†è¾¨ç‡ï¼Œç‰©ç†å°ºå¯¸ï¼ŒPPI<br>é¦–å…ˆä»‹ç»ä¸€ä¸‹PPIå’ŒDPIï¼š<br>PPIï¼ˆPixels Per Inchï¼‰æ¯ä¸€è‹±å¯¸é•¿åº¦ä¸Šæœ‰å¤šå°‘åƒç´ ç‚¹ï¼›è®¡ç®—æ–¹å¼å¯ä»¥ä½¿ç”¨åƒç´ ç‚¹é™¤ä»¥å±å¹•å°ºå¯¸ã€‚<br>åˆ†è¾¨ç‡DPIï¼ˆDots Per Inchï¼‰æ¯ä¸€è‹±å¯¸æœ‰å¤šå°‘ç‚¹ï¼Œè¿™é‡Œçš„ç‚¹æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå¯ä»¥æ˜¯ 1Dot = 1Pixelï¼Œä¹Ÿå¯ä»¥æ˜¯ 1Dot = N Pixelã€‚åœ¨ç”µè„‘é‡Œï¼Œåˆ†è¾©ç‡æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œè¿™é‡Œç”¨çš„å°±æ˜¯Dot ï¼Œå¯†åº¦ç”¨DPIæè¿°ï¼›åªæœ‰å½“ä½¿ç”¨å±å¹•æœ€å¤§åˆ†è¾©ç‡çš„æ—¶å€™ï¼ˆå³ 1Dot = 1Pixelï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ DPI = PPIã€‚</p></blockquote><p>æœé›†äº†å¾ˆå¤šä»£ç å’Œæ–¹æ³•ï¼Œæœ€åæ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒç²¾å‡†çš„æ–¹æ³•æ˜¯ä½¿ç”¨Tkinterã€‚</p><ul><li>å¯ä»¥å¾—åˆ°æ˜¾ç¤ºå±çš„å°ºå¯¸ï¼Œè·å–ä»¥æ¯«ç±³ä¸ºå•ä½å®½é«˜ï¼ˆwinfo_screenmmheight()ï¼Œwinfo_screenmmwidth()ï¼‰ï¼Œè·å–æ˜¾ç¤ºå±çš„pixelsæ•°ç›®ï¼ˆwinfo_screenheight()ï¼Œwinfo_screenwidth()ï¼‰ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tkè·å–å±å¹•çš„åˆ†è¾¨ç‡å’Œå°ºå¯¸</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> Tk<br><span class="hljs-comment"># creating tkinter window</span><br>base = Tk()<br><span class="hljs-comment">#screen's length and width in pixels and mm</span><br>length_1= base.winfo_screenheight()<br>width_1= base.winfo_screenwidth()<br>length_2 = base.winfo_screenmmheight()<br>width_2 = base.winfo_screenmmwidth()<br><span class="hljs-comment">#screen Depth</span><br>screendepth = base.winfo_screendepth()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"width x length (in pixels) ="</span>,(width_1,length_1))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"width x length (in mm) ="</span>, (width_2, length_2))<br>width_ppn = width_1/width_2<br>length_ppn = length_1/length_2<br>ppn = <span class="hljs-built_in">round</span>((width_ppn+length_ppn)/<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(width_1/width_2,length_1/length_2,ppn)<br><br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨win32åº“ä¸­çš„åˆ†è¾¨ç‡æ–¹æ³•win32print.GetDeviceCaps()ï¼Œç¼©æ”¾åçš„åˆ†è¾¨ç‡GetSystemMetricsã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## è·å–åˆ†è¾¨ç‡</span><br><span class="hljs-keyword">from</span> win32 <span class="hljs-keyword">import</span> win32api, win32gui, win32print<br><span class="hljs-keyword">from</span> win32.lib <span class="hljs-keyword">import</span> win32con<br><br><span class="hljs-keyword">from</span> win32.win32api <span class="hljs-keyword">import</span> GetSystemMetrics<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_real_resolution</span>():</span><br>    <span class="hljs-string">"""è·å–çœŸå®çš„åˆ†è¾¨ç‡"""</span><br>    hDC = win32gui.GetDC(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment"># æ¨ªå‘åˆ†è¾¨ç‡</span><br>    w = win32print.GetDeviceCaps(hDC, win32con.DESKTOPHORZRES)<br>    <span class="hljs-comment"># çºµå‘åˆ†è¾¨ç‡</span><br>    h = win32print.GetDeviceCaps(hDC, win32con.DESKTOPVERTRES)<br>    <span class="hljs-keyword">return</span> w, h<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_screen_size</span>():</span><br>    <span class="hljs-string">"""è·å–ç¼©æ”¾åçš„åˆ†è¾¨ç‡"""</span><br>    w = GetSystemMetrics (<span class="hljs-number">0</span>)<br>    h = GetSystemMetrics (<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> w, h<br><br>real_resolution = get_real_resolution()<br>screen_size = get_screen_size()<br><span class="hljs-built_in">print</span>(real_resolution)<br><span class="hljs-built_in">print</span>(screen_size)<br><br>screen_scale_rate = <span class="hljs-built_in">round</span>(real_resolution[<span class="hljs-number">0</span>] / screen_size[<span class="hljs-number">0</span>], <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(screen_scale_rate)<br></code></pre></td></tr></tbody></table></figure><ul><li>å¤šå±çš„åˆ†è¾¨ç‡è·å–çš„æ–¹æ³•ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å±å¹•çš„å°ºå¯¸</span><br><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-string">"""</span><br><span class="hljs-string">åŠŸèƒ½ï¼šè¯†åˆ«ä¸¤å—æ˜¾ç¤ºå™¨å„è‡ªçš„åˆ†è¾¨ç‡</span><br><span class="hljs-string">"""</span><br><span class="hljs-string">"""æ¨¡å—å¯¼å…¥"""</span><br><span class="hljs-keyword">from</span> win32api <span class="hljs-keyword">import</span> GetSystemMetrics<br><span class="hljs-keyword">from</span> win32con <span class="hljs-keyword">import</span> SM_CMONITORS, SM_CXVIRTUALSCREEN, SM_CYVIRTUALSCREEN<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">Display_Detection</span>():</span><br>    <span class="hljs-comment"># æ˜¾ç¤ºå™¨æ•°é‡æ£€æµ‹</span><br>    MonitorNumber = GetSystemMetrics(SM_CMONITORS)<br>    <span class="hljs-comment"># ä¸»å±å¹•å°ºå¯¸æ£€æµ‹</span><br>    MajorScreenWidth = GetSystemMetrics(<span class="hljs-number">0</span>)  <span class="hljs-comment"># ä¸»å±å¹•å®½</span><br>    MajorScreenHeight = GetSystemMetrics(<span class="hljs-number">1</span>)  <span class="hljs-comment"># ä¸»å±å¹•é«˜</span><br>    <span class="hljs-comment"># print("ä¸»å±å¹•å°ºå¯¸ï¼š", GetSystemMetrics(0), "*", GetSystemMetrics(1))</span><br>    <span class="hljs-comment"># å±å¹•æœ€å¤§å°ºå¯¸</span><br>    aScreenWidth = GetSystemMetrics(SM_CXVIRTUALSCREEN)  <span class="hljs-comment"># å±å¹•æœ€å¤§å®½åº¦</span><br>    aScreenHeight = GetSystemMetrics(SM_CYVIRTUALSCREEN)  <span class="hljs-comment"># å±å¹•æœ€å¤§é«˜åº¦</span><br>    AllScreen=(aScreenWidth, aScreenHeight)<br>    <span class="hljs-comment"># print("å±å¹•æ€»å°ºå¯¸:", aScreenWidth, "*", aScreenHeight)</span><br>    <span class="hljs-comment"># å½“å‰ä¸»æµçš„åˆ†è¾¨ç‡åŸºæ•°æ˜¯å®½ï¼Œå¶æ•°æ˜¯é«˜</span><br>    ResolvingPower = [<span class="hljs-number">1280</span>, <span class="hljs-number">720</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>, <span class="hljs-number">2560</span>, <span class="hljs-number">1440</span>, <span class="hljs-number">3840</span>, <span class="hljs-number">2160</span>, <span class="hljs-number">4096</span>, <span class="hljs-number">2160</span>, <span class="hljs-number">7680</span>, <span class="hljs-number">4320</span>]<br><br>    <span class="hljs-keyword">if</span> MonitorNumber &gt; <span class="hljs-number">1</span>:  <span class="hljs-comment"># å±å¹•æ•°é‡åˆ¤æ–­print(MonitorNumber)å°±å¯ä»¥çŸ¥é“æœ‰å¤šå°‘å—å±å¹•</span><br>        SecondaryScreenWidth = aScreenWidth - MajorScreenWidth  <span class="hljs-comment"># å‰¯å±å®½=æ€»å±å¹•å®½-å½“å‰å±å¹•å®½</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±å®½"</span>,SecondaryScreenWidth)<br><br>        <span class="hljs-comment"># ä¸»å±æ¨ªç«–å±æ£€æµ‹</span><br>        <span class="hljs-keyword">if</span> GetSystemMetrics(<span class="hljs-number">0</span>) &gt; GetSystemMetrics(<span class="hljs-number">1</span>):<br>            MianScreen = (GetSystemMetrics(<span class="hljs-number">0</span>), GetSystemMetrics(<span class="hljs-number">1</span>))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»å±(æ¨ªå±)å°ºå¯¸ï¼š"</span>, GetSystemMetrics(<span class="hljs-number">0</span>), <span class="hljs-string">"*"</span>, GetSystemMetrics(<span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">else</span>:<br>            MianScreen = (GetSystemMetrics(<span class="hljs-number">0</span>), GetSystemMetrics(<span class="hljs-number">1</span>))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»å±(ç«–å±)å°ºå¯¸ï¼š"</span>, GetSystemMetrics(<span class="hljs-number">0</span>), <span class="hljs-string">"*"</span>, GetSystemMetrics(<span class="hljs-number">1</span>))<br><br>        <span class="hljs-comment"># æ¨ªå±çŠ¶æ€</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(ResolvingPower) - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>            <span class="hljs-comment"># print("i",ResolvingPower[i])</span><br>            <span class="hljs-keyword">if</span> SecondaryScreenWidth == ResolvingPower[i]:<br>                SecondaryScreen = (ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±(æ¨ªå±)å°ºå¯¸ï¼š"</span>, ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-comment"># return "å‰¯å±(ç«–å±)å°ºå¯¸ï¼š",SecondaryScreen</span><br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-comment"># ç«–å±çŠ¶æ€</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(ResolvingPower) - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>            <span class="hljs-comment"># print("i",ResolvingPower[i])</span><br>            <span class="hljs-keyword">if</span> SecondaryScreenWidth == ResolvingPower[i]:<br>                SecondaryScreen = (ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±(ç«–å±)å°ºå¯¸ï¼š"</span>, ResolvingPower[i], ResolvingPower[i - <span class="hljs-number">1</span>])<br>                <span class="hljs-comment"># return "å‰¯å±(ç«–å±)å°ºå¯¸",SecondaryScreen</span><br>                <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> MonitorNumber,AllScreen,MianScreen,SecondaryScreen<br><br><span class="hljs-comment">#è°ƒç”¨</span><br>a=Display_Detection()<br><span class="hljs-built_in">print</span>(a)<span class="hljs-comment">#aå¯ä»¥ä»»æ„éå†å…¶ä¸­çš„å†…å®¹a[0]ä»£è¡¨å±å¹•æ•°é‡ç­‰ç­‰...</span><br><br>ä¸»å±(æ¨ªå±)å°ºå¯¸ï¼š <span class="hljs-number">1920</span> * <span class="hljs-number">1080</span><br>å‰¯å±(ç«–å±)å°ºå¯¸ï¼š <span class="hljs-number">1440</span> <span class="hljs-number">2560</span><br>(<span class="hljs-number">2</span>, (<span class="hljs-number">3360</span>, <span class="hljs-number">1080</span>), (<span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>), (<span class="hljs-number">1440</span>, <span class="hljs-number">3840</span>))<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Sartoriusç«èµ›æ•°æ®è¯´æ˜</title>
    <link href="/2021/10/21/kaggle/kaggle-data-intro/"/>
    <url>/2021/10/21/kaggle/kaggle-data-intro/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°æ®è¯´æ˜</p></blockquote><p>Data Description</p><p>In this competition we are segmenting neuronal cells in images. The training annotations are provided as run length encoded masks, and the images are in PNG format. The number of images is small, but the number of annotated objects is quite high. The hidden test set is roughly 240 images.</p><p><strong>Note: while predictions are not allowed to overlap, the training labels are provided in full (with overlapping portions included). This is to ensure that models are provided the full data for each object. Removing overlap in predictions is a task for the competitor.</strong></p><h2 id="Files">Files</h2><p><strong>train.csv</strong> - IDs and masks for all training objects. None of this metadata is provided for the test set.</p><ul><li><code>id</code> - unique identifier for object</li><li><code>annotation</code> - run length encoded pixels for the identified neuronal cell</li><li><code>width</code> - source image width</li><li><code>height</code> - source image height</li><li><code>cell_type</code> - the cell line</li><li><code>plate_time</code> - time plate was created</li><li><code>sample_date</code> - date sample was created</li><li><code>sample_id</code> - sample identifier</li><li><code>elapsed_timedelta</code> - time since first image taken of sample</li></ul><p><strong>sample_submission.csv</strong> - a sample submission file in the correct format</p><p><strong>train</strong> - train images in PNG format</p><p><strong>test</strong> - test images in PNG format. Only a few test set images are available for download; the remainder can only be accessed by your notebooks when you submit.</p><p><strong>train_semi_supervised</strong> - unlabeled images offered in case you want to use additional data for a semi-supervised approach.</p><p><strong>LIVECell_dataset_2021</strong> - A mirror of the data from <a href="https://github.com/sartorius-research/LIVECell">the LIVECell dataset</a>. LIVECell is the predecessor dataset to this competition. You will find extra data for the <code>SH-SHY5Y</code> cell line, plus several other cell lines not covered in the competition dataset that may be of interest for transfer learning.</p>]]></content>
    
    
    <categories>
      
      <category>kaggle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>kaggle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kaggleæ¯”èµ›ä»‹ç»--Sartorius - Cell Instance Segmentation</title>
    <link href="/2021/10/21/kaggle/kaggle-intro/"/>
    <url>/2021/10/21/kaggle/kaggle-intro/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å‚èµ›Sartorius - Cell Instance Segmentationï¼Œå¯¹ç«èµ›é¢˜ç›®å’Œç›¸å…³æ³¨æ„ç‚¹è¿›è¡Œæ¢³ç†è®°å½•ï¼Œä»¥ä¾¿åç»­å›é¡¾ã€‚</p></blockquote><h2 id="ç«èµ›è¯´æ˜">ç«èµ›è¯´æ˜</h2><p>Sartorius - Cell Instance Segmentationï¼Œæ˜¯ä¸€ä¸ªæœ‰å…³åŒ»å­¦å›¾åƒ<strong>å®ä¾‹åˆ†å‰²</strong>çš„ç«èµ›</p><p>åœ°å€ï¼š <a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/overview">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/overview</a></p><h3 id="Description">Description</h3><p>Neurological disorders, including neurodegenerative diseases such as Alzheimerâ€™s and brain tumors, are a leading cause of death and disability across the globe. However, it is hard to quantify how well these deadly disorders respond to treatment. <strong>One accepted method is to review neuronal cells via light microscopy,</strong> which is both accessible and non-invasive. Unfortunately, <strong>segmenting individual neuronal cells</strong> in microscopic images can be challenging and time-intensive. Accurate instance segmentation of these cellsâ€”with the help of computer visionâ€”could lead to new and effective drug discoveries to treat the millions of people with these disorders.</p><p><img src="https://storage.googleapis.com/kaggle-media/competitions/Sartorius/Sartorius_Competition%20Description%20Image%20350x379.png" alt="img"></p><p>Current solutions have limited accuracy for neuronal cells in particular. In internal studies to develop cell instance segmentation models, the neuroblastoma cell line SH-SY5Y consistently exhibits the lowest precision scores out of eight different cancer cell types tested. This could be because neuronal cells have a very <strong>unique, irregular and concave morphology</strong> associated with them, making them challenging to segment with commonly used mask heads.</p><p>Sartorius is a partner of the life science research and the biopharmaceutical industry. They empower scientists and engineers to simplify and accelerate progress in life science and bioprocessing, enabling the development of new and better therapies and more affordable medicine. Theyâ€™re a magnet and dynamic platform for pioneers and leading experts in the field. They bring creative minds together for a common goal: technological breakthroughs that lead to better health for more people.</p><p><font color="purple"> <strong>In this competition, youâ€™ll detect and delineate distinct objects of interest in biological images depicting neuronal cell types commonly used in the study of neurological disorders.</strong> More specifically, youâ€™ll use phase contrast microscopy images to train and test your model for instance segmentation of neuronal cells. Successful models will do this with a high level of accuracy.</font></p><p>If successful, youâ€™ll help further research in neurobiology thanks to the collection of robust quantitative data. Researchers may be able to use this to more easily measure the effects of disease and treatment conditions on neuronal cells. As a result, new drugs could be discovered to treat the millions of people with these leading causes of death and disability.</p><h4 id="ä¸ªäººç†è§£">ä¸ªäººç†è§£</h4><p>ä¹Ÿå°±æ˜¯è¯´ä¸ºäº†é‡åŒ–ç¥ç»ç³»ç»Ÿç±»çš„è‡´å‘½ç–¾ç—…å¯¹æ²»ç–—çš„ååº”ã€‚ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å…‰å­¦æ˜¾å¾®é•œæ£€æŸ¥ç¥ç»å…ƒç»†èƒï¼Œå› ä¸ºè¿™ç§æ–¹æ³•æ—¢æ–¹ä¾¿åˆéä¾µå…¥æ€§ã€‚ä½†æ˜¯ï¼Œåœ¨æ˜¾å¾®å›¾åƒä¸­åˆ†å‰²å•ä¸ªç¥ç»å…ƒç»†èƒå¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ä¸”è€—æ—¶ã€‚æ‰€ä»¥éœ€è¦é‡‡å–è®¡ç®—æœºè§†è§‰çš„æ–¹æ³•æé«˜ç²¾åº¦å’Œæ•ˆç‡ã€‚ç”±äºç¥ç»æ¯ç»†èƒç˜¤ç»†èƒç³»ï¼ˆSH-SY5Yï¼‰ç‹¬ç‰¹ï¼Œä¸è§„åˆ™ï¼Œå‡¹å½¢çš„å½¢æ€ï¼ˆunique, irregular and concave morphologyï¼‰ï¼Œä½¿ç”¨å¸¸è§„çš„åˆ†å‰²æ¨¡å‹è¿›è¡Œåˆ†å‰²æ•ˆæœä¸å¥½ã€‚</p><h3 id="Evaluation">Evaluation</h3><p>This competition is evaluated on the mean average precision at different intersection over union IUO thresholds. The IoU of a proposed set of object pixels and a set of true object pixels is calculated as:</p><p>$$<br>IoU(A,B) = \frac{A \cap B}{A \cup B}<br>$$</p><p>The metric sweeps over a range of IoU thresholds, at each point calculating an average precision value. The threshold values range from 0.5 to 0.95 with a step size of 0.05: <code>(0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95)</code>. In other words, at a threshold of 0.5, a predicted object is considered a â€œhitâ€ if its intersection over union with a ground truth object is greater than 0.5.</p><p>At each threshold value <strong>t</strong>, a precision value is calculated based on the number of true positives <strong>TP</strong>, false negatives <strong>FN</strong>, and false positives <strong>FP</strong> resulting from comparing the predicted object to all ground truth objects:</p><p>$$<br>\frac{TP(t)}{TP(t)+FP(t)+FN(t)}<br>$$</p><p>A true positive is counted when a single predicted object matches a ground truth object with an IoU above the threshold. A false positive indicates a predicted object had no associated ground truth object. A false negative indicates a ground truth object had no associated predicted object. The average precision of a single image is then calculated as the mean of the above precision values at each IoU threshold:<br>$$<br>\frac{1}{\vert thresholds \vert} \sum_t \frac{TP(t)}{TP{t}+FP(t)+FN(t)}<br>$$<br>Lastly, the score returned by the competition metric is the mean taken over the individual average precisions of each image in the test dataset.</p><h4 id="ä¸ªäººç†è§£-2">ä¸ªäººç†è§£</h4><p>æ­¤å¤„ä»‹ç»äº†è¯„ä¼°æŒ‡æ ‡ï¼Œä»¥åŠæœ€åæ’åscoreçš„åº¦é‡æ–¹å¼ã€‚äººä¸ºè®¾ç½®predictionå’Œground truthçš„IoUçš„thresholdsï¼Œè¿™æ ·å¯ä»¥åº¦é‡TPï¼ŒFNï¼ŒFPï¼ˆæ­£ç¡®å®ä¾‹åˆ†å‰²objectä¸ªæ•°ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°çš„objectä¸ªæ•°ï¼Œè¯¯æ£€å‡ºçš„objectä¸ªæ•°ï¼‰ï¼Œè¿›è€Œå¾—åˆ°scoreã€‚</p><h5 id="ç–‘é—®">ç–‘é—®</h5><ul><li>è¿™é‡Œè¯„ä¼°æŒ‡æ ‡ä¸­æ²¡æœ‰æåˆ°åˆ†ç±»ï¼Œå®ä¾‹åˆ†å‰²é™¤äº†åˆ†å‰²å‰æ™¯å’ŒèƒŒæ™¯ï¼Œä¸åº”è¯¥è¿˜éœ€è¦è¯„ä¼°ç±»åˆ«å—ï¼Ÿè¿˜æ˜¯è¯´åœ¨åº¦é‡IOUçš„æ—¶å€™å·²ç»åŒ…å«äº†å¯¹ç±»åˆ«çš„åˆ¤æ–­ã€‚</li><li>æœ€åçš„scoreä¸­ä¸ºä»€ä¹ˆè¦é™¤ä»¥thresholdsï¼Œæ„ä¹‰ä½•åœ¨ï¼Ÿ</li></ul><h2 id="Submission-File">Submission File</h2><p>In order to reduce the submission file size, our metric uses run-length encoding on the pixel values. Instead of submitting an exhaustive list of indices for your segmentation, you will submit pairs of values that contain a start position and a run length. E.g. â€˜1 3â€™ implies starting at pixel 1 and running a total of 3 pixels 1,2,3.</p><p>The competition format requires a space delimited list of pairs. <strong>For example, â€˜1 3 10 5â€™ implies pixels 1,2,3,10,11,12,13,14 are to be included in the mask. The pixels are one-indexed</strong><br><strong>and numbered from top to bottom, then left to right: 1 is pixel 1,1, 2 is pixel 2,1, etc.</strong></p><p>The metric checks that the pairs are sorted, positive, and the decoded pixel values are not duplicated. <font color="purple"><strong>It also checks that no two predicted masks for the same image are overlapping.</strong></font></p><p>The file should contain a header and have the following format. Each row in your submission represents a single predicted nucleus segmentation for the given <code>ImageId</code>.</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">id</span>,predicted  <br><span class="hljs-attribute">0114f484a16c152baa2d82fdd43740880a762c93f436c8988ac461c5c9dbe7d5</span>,<span class="hljs-number">1</span> <span class="hljs-number">1</span>  <br><span class="hljs-attribute">0999dab07b11bc85fb8464fc36c947fbd8b5d6ec49817361cb780659ca805eac</span>,<span class="hljs-number">1</span> <span class="hljs-number">1</span>  <br><span class="hljs-attribute">0999dab07b11bc85fb8464fc36c947fbd8b5d6ec49817361cb780659ca805eac</span>,<span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>  <br><span class="hljs-attribute">etc</span>...<br></code></pre></td></tr></tbody></table></figure><p>Submission files may take several minutes to process due to the size.</p><h4 id="ä¸ªäººç†è§£-3">ä¸ªäººç†è§£</h4><p>è¿™é‡Œè¯´æ˜äº†æäº¤çš„æ–‡ä»¶æ ¼å¼ã€‚</p><ul><li><p>ä¸åŒä¸ä¸€èˆ¬çš„å›¾åƒæ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦å°†å›¾ç‰‡çš„åƒç´ ç‚¹ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³æ ‡å·ä¸º1ï¼Œ2ï¼Œ3â€¦,ç„¶åå°†å›¾ç‰‡çš„åˆ†å‰²å¾—åˆ°çš„åƒç´ ç‚¹æ ‡è¯†ä¸º<code>'èµ·å§‹ç‚¹1 ä¸ªæ•°1 èµ·å§‹ç‚¹2 ä¸ªæ•°2 .....'</code>ï¼Œ</p></li><li><p>æ³¨æ„ç‚¹æ˜¯æäº¤çš„é¢„æµ‹åœ¨åŒä¸€å¼ å›¾ä¸­é¢„æµ‹çš„maskä¸å…è®¸æœ‰é‡åˆåƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´è¯¥ç«èµ›æ¶‰åŠå¯¹äºä¸åŒçš„ç»†èƒç³»å®ä¾‹åˆ†å‰²ï¼Œå¹¶ä¸”åœ¨ä¸€å¼ å›¾ä¸Šåˆ†å‰²çš„ç»†èƒç³»maskï¼Œä¸èƒ½æœ‰äº¤ç‚¹ã€‚<strong>è®­ç»ƒæ•°æ®ä¸­labelæ˜¯ä¼šå‡ºç°é‡å éƒ¨åˆ†çš„ï¼Œåœ¨é¢„æµ‹çš„ç»“æœä¸­éœ€è¦æ¶ˆé™¤é¢„æµ‹é‡å éƒ¨åˆ†ã€‚</strong></p><blockquote><p>Note: while predictions are not allowed to overlap, the training labels are provided in full (with overlapping portions included). This is to ensure that models are provided the full data for each object. Removing overlap in predictions is a task for the competitor.</p></blockquote></li></ul><h5 id="attentionï¼ˆå¾…å°è¯•ï¼‰">attentionï¼ˆå¾…å°è¯•ï¼‰</h5><p>åœ¨è®¨è®ºåŒºä¸­æœ‰äººè¯´maskå®é™…ä¸Šè¦ (left -&gt; right, top -&gt; bottom) æ ‡å·ï¼Œä¸çŸ¥é“åç»­ä¸»åŠæ–¹æœ‰æ²¡æœ‰æ›´æ¢å†…éƒ¨æµ‹è¯•ä»£ç ã€‚</p><h5 id="Mask-encoding">Mask encoding</h5><p>In submission, we have to encoding mask. Evaluation page show the pixels are numbered from top to bottom, then left to right. But, this is not correct. As you know, the training annotations provided are numbered from left to right, then top to bottom, and this is also the case with submission.<br>An LB score with encoded mask (top -&gt; bottom, left -&gt; right) was 0.0000, but a score with (left -&gt; right, top -&gt; bottom) was over 0.22.<br>Unfortunately, the evaluation page is just a copy from Data Science Bowl 2018. I hope that the competition hosts will update the evaluation page for this competition.<br><a href="https://www.kaggle.com/christoffersartorius">@christoffersartorius</a> <a href="https://www.kaggle.com/addisonhoward">@addisonhoward</a></p><h4 id="tips">tips</h4><p><strong>åç»­å¯å‚è€ƒ</strong></p><p><strong>RLE</strong>ç›¸å…³ä»£ç è¯´æ˜ï¼ˆ<a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278663%EF%BC%89">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278663ï¼‰</a></p><p>In this great <a href="https://www.kaggle.com/ihelon/cell-segmentation-run-length-decoding">EDA notebook</a> created by <a href="https://www.kaggle.com/ihelon">@ihelon</a>, I found Inversionâ€™s classical <a href="https://www.kaggle.com/ihelon/cell-segmentation-run-length-decoding">RLE encoding function</a>. The function has definitely stood the test of time and works great here, but I had a bit of difficulty understanding it, so I refactored it to be a bit easier for beginners. Hereâ€™s the code (with some personal notes):</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># modified from: https://www.kaggle.com/inversion/run-length-decoding-quick-start</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rle_decode_refactored</span>(<span class="hljs-params">mask_rle, shape, color=<span class="hljs-number">1</span></span>):</span><br>    <span class="hljs-string">'''</span><br><span class="hljs-string">    mask_rle: run-length as string formated (start length)</span><br><span class="hljs-string">    shape: (height,width) of array to return </span><br><span class="hljs-string">    Returns numpy array, 1 - mask, 0 - background</span><br><span class="hljs-string">    '''</span><br>    <span class="hljs-comment"># Split the string by space, then convert it into a integer array</span><br>    s = np.array(mask_rle.split(), dtype=<span class="hljs-built_in">int</span>)<br><br>    <span class="hljs-comment"># Every even value is the start, every odd value is the "run" length</span><br>    starts = s[<span class="hljs-number">0</span>::<span class="hljs-number">2</span>] - <span class="hljs-number">1</span><br>    lengths = s[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>]<br>    ends = starts + lengths<br><br>    <span class="hljs-comment"># The image image is actually flattened since RLE is a 1D "run"</span><br>    h, w, d = shape<br>    img = np.zeros((h * w, d), dtype=np.float32)<br><br>    <span class="hljs-comment"># The color here is actually just any integer you want!</span><br>    <span class="hljs-keyword">for</span> lo, hi <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(starts, ends):<br>        img[lo : hi] = color<br>    <span class="hljs-comment"># Don't forget to change the image back to the original shape</span><br>    <span class="hljs-keyword">return</span> img.reshape(shape)<br></code></pre></td></tr></tbody></table></figure><h3 id="Timeline">Timeline</h3><p>12æœˆ30å·æ˜¯æœ€ç»ˆçš„æˆªæ­¢æ—¥æœŸï¼Œå†²å†²å†²ï¼</p><ul><li><strong>October 14, 2021</strong> - Start Date.</li><li><strong>December 23, 2021</strong> - Entry Deadline. You must accept the competition rules before this date in order to compete.</li><li><strong>December 23, 2021</strong> - Team Merger Deadline. This is the last day participants may join or merge teams.</li><li><strong>December 30, 2021</strong> - Final Submission Deadline.</li></ul><p>All deadlines are at 11:59 PM UTC on the corresponding day unless otherwise noted. The competition organizers reserve the right to update the contest timeline if they deem it necessary.</p><h2 id="ç›¸å…³paper">ç›¸å…³paper</h2><p>å‚è€ƒ <a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278716">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278716</a></p><p><strong>Papers:</strong></p><ul><li><a href="https://www.researchgate.net/publication/329933921_Instance_Segmentation_of_Neural_Cells">Instance Segmentation of Neural Cells</a> - Instance segmentation of neural cells plays an important role in brain study. However, this task is challenging due to the special shapes and behaviors of neural cells. Existing methods are not precise enough to capture their tiny structures, e.g., filopodia and lamellipodia, which are critical to the understanding of cell interaction and behavior. To this end, we propose a novel deep multi-task learning model to jointly detect and segment neural cells instance-wise. Our method is built upon SSD, with ResNet101 as the backbone to achieve both high detection accuracy and fast speed. Furthermore, unlike existing works which tend to produce wavy and inaccurate boundaries, we embed a deconvolution module into SSD to better capture details. Experiments on a dataset of neural cell microscopic images show that our method is able to achieve better performance in terms of accuracy and efficiency, comparing favorably with current state-of-the-art methods.</li><li><a href="https://www.researchgate.net/publication/340998089_Rank_6_Mask-RCNN_for_Cell_Instance_Segmentation">Mask-RCNN for Cell Instance Segmentation</a> - We proposed an automatic nucleus segmentation algorithm of H&amp;E stained tissue microscopy images. Mask-RCNN is a recently proposed state-of-the-art algorithm for object detection and object instance segmentation of natural images. In this paper, we demonstrate that Mask-RCNN can be used to perform highly effective and efficient automatic segmentation of H&amp;E microscopy images for cell nuclei. We propose a novel MASK Non-maximum suppression (NMS) module which can automatically ensemble classifiers results and increase the robustness of model.</li><li><a href="https://arxiv.org/abs/1908.06623">IRNet: Instance Relation Network for Overlapping Cervical Cell Segmentation</a> - Cell instance segmentation in Pap smear image remains challenging due to the wide existence of occlusion among translucent cytoplasm in cell clumps. Conventional methods heavily rely on accurate nuclei detection results and are easily disturbed by miscellaneous objects. In this paper, we propose a novel Instance Relation Network (IRNet) for robust overlapping cell segmentation by exploring instance relation interaction. Specifically, we propose the Instance Relation Module to construct the cell association matrix for transferring information among individual cell-instance features. With the collaboration of different instances, the augmented features gain benefits from contextual information and improve semantic consistency. Meanwhile, we proposed a sparsity constrained Duplicate Removal Module to eliminate the misalignment between classification and localization accuracy for candidates selection. The largest cervical Pap smear (CPS) dataset with more than 8000 cell annotations in Pap smear image was constructed for comprehensive evaluation. Our method outperforms other methods by a large margin, demonstrating the effectiveness of exploring instance relation.</li><li><a href="https://www.researchgate.net/publication/336392797_Weakly_Supervised_Cell_Instance_Segmentation_by_Propagating_from_Detection_Response">Weakly Supervised Cell Instance Segmentation by Propagating from Detection Response</a> - Cell shape analysis is important in biomedical research. Deep learning methods may perform to segment individual cells if they use sufficient training data that the boundary of each cell is annotated. However, it is very time-consuming for preparing such detailed annotation for many cell culture conditions. In this paper, we propose a weakly supervised method that can segment individual cell regions who touch each other with unclear boundaries in dense conditions without the training data for cell regions. We demonstrated the efficacy of our method using several data-set including multiple cell types captured by several types of microscopy. Our method achieved the highest accuracy compared with several conventional methods. In addition, we demonstrated that our method can perform without any annotation by using fluorescence images that cell nuclear were stained as training data.</li><li><a href="https://arxiv.org/abs/2007.10787">Deep Semi-supervised Knowledge Distillation for Overlapping Cervical Cell Instance Segmentation</a> - Deep learning methods show promising results for overlapping cervical cell instance segmentation. However, in order to train a model with good generalization ability, voluminous pixel-level annotations are demanded which is quite expensive and time-consuming for acquisition. In this paper, we propose to leverage both labeled and unlabeled data for instance segmentation with improved accuracy by knowledge distillation. We propose a novel Mask-guided Mean Teacher framework with Perturbation-sensitive Sample Mining (MMT-PSM), which consists of a teacher and a student network during training. Two networks are encouraged to be consistent both in feature and semantic level under small perturbations. The teacherâ€™s self-ensemble predictions from K-time augmented samples are used to construct the reliable pseudolabels for optimizing the student. We design a novel strategy to estimate the sensitivity to perturbations for each proposal and select informative samples from massive cases to facilitate fast and effective semantic distillation. In addition, to eliminate the unavoidable noise from the background region, we propose to use the predicted segmentation mask as guidance to enforce the feature distillation in the foreground region. Experiments show that the proposed method improves the performance significantly compared with the supervised method learned from labeled data only, and outperforms state-of-the-art semi-supervised methods.</li><li><a href="https://www.sciencedirect.com/science/article/pii/S1361841518308442">Attentive neural cell instance segmentation</a> - Neural cell instance segmentation, which aims at joint detection and segmentation of every neural cell in a microscopic image, is essential to many neuroscience applications. The challenge of this task in- volves cell adhesion, cell distortion, unclear cell contours, low-contrast cell protrusion structures, and background impurities. Consequently, current instance segmentation methods generally fall short of pre- cision. In this paper, we propose an attentive instance segmentation method that accurately predicts the bounding box of each cell as well as its segmentation mask simultaneously. In particular, our method builds on a joint network that combines a single shot multi-box detector (SSD) and a U-net. Furthermore, we employ the attention mechanism in both detection and segmentation modules to focus the model on the useful features. The proposed method is validated on a dataset of neural cell microscopic images. Experimental results demonstrate that our approach can accurately detect and segment neural cell in- stances at a fast speed, comparing favorably with the state-of-the-art methods.</li></ul><p>ğŸ“Œ <a href="https://github.com/milesial/Pytorch-UNet">U-net with Pytorch</a><br>ğŸ“Œ <a href="https://github.com/Fpiotro/MOLECULAR-TRANSLATION">Using U-net for a Kaggle competition (AutoEncoder)</a></p><h4 id="attention">attention</h4><p><strong>ä¸»åŠæ–¹æœ‰å…³LIVECellçš„è®ºæ–‡</strong></p><p>Edlund, C., Jackson, T.R., Khalid, N. et al.<br>LIVECell-A large-scale dataset for label-free live cell segmentation.<br>Nat Methods 18, 1038 -1045 (2021).<br>Available at: <a href="https://doi.org/10.1038/s41592-021-01249-6">https://doi.org/10.1038/s41592-021-01249-6</a></p><p>Their paper is not just a dataset paper, <strong>it evaluates the performance of both recent anchor-free and anchor-based models for each cell type under four task conditions</strong>, which I think is very informative.<br>Within their paper, it is shown that <font color="purple"><strong>the results are better when other cell types not included in the test data are also included in the training</strong></font>. This may be because using even unrelated cell types in the training data allows the model to learn morphology and other factors.</p><p>Therefore, in addition to the dataset provided in Kaggle, transfer learning using other cell types in LIVECell, the predecessor of the data, will be important for this competition.</p><p>If you want to use the model trained by LIVECell for transfer learning, this page on GitHub may be useful.<br>ğŸ‘‰ <a href="https://github.com/sartorius-research/LIVECell/tree/main/model">https://github.com/sartorius-research/LIVECell/tree/main/model</a></p><p>The models are based on PyTorch, but are from FIARâ€™s Dectron 2 library.<br>Dectron2: <a href="https://github.com/facebookresearch/detectron2">https://github.com/facebookresearch/detectron2</a></p>]]></content>
    
    
    <categories>
      
      <category>kaggle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>kaggle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyQt5ä¸­æ”¾ç½®å›¾ç‰‡</title>
    <link href="/2021/10/21/python/pyqt/pyqtimg/"/>
    <url>/2021/10/21/python/pyqt/pyqtimg/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨pyqtä¸­ä½¿ç”¨labelæ˜¾ç¤ºå›¾ç‰‡ï¼Œæˆ–è€…ä½¿ç”¨ç»§æ‰¿äº†QLabelçš„ç±»æ˜¾ç¤ºå›¾ç‰‡ï¼Œå®ç°åœ¨å›¾ç‰‡ä¸Šè¿›è¡Œé•¿åº¦ï¼Œè§’åº¦æµ‹é‡ï¼Œæ ‡æ³¨ï¼Œç”»æ¿ç­‰åŠŸèƒ½ã€‚</p></blockquote><h2 id="QLabel">QLabel</h2><p>Qlabeléƒ¨ä»¶æ—¶ç”¨äºæä¾›æ–‡æœ¬æˆ–è€…å›¾åƒæ˜¾ç¤ºã€‚Qlabelå¯ä»¥åŒ…å«çº¯æ–‡æœ¬ï¼ˆå°†å­—ç¬¦ä¸²ä¼ é€’ç»™setTextï¼‰ï¼Œå¯Œæ–‡æœ¬ï¼ˆå°†å¯Œæ–‡æœ¬ä¼ é€’ç»™setTextï¼‰ï¼Œå›¾åƒï¼ˆå°†QPixmapå¯¹è±¡ä¼ é€’setPixmapï¼‰ï¼ŒåŠ¨ç”»ï¼ˆå°†QMovieå¯¹è±¡ä¼ é€’ç»™setMovieï¼‰ï¼Œæ•°å­—ï¼ˆå°†intæˆ–åœ¨doubleæ•°å­—ä¼ é€’ç»™setNumï¼‰ï¼Œç©ºï¼ˆé»˜è®¤ï¼Œç”±clearè®¾ç½®ï¼‰ã€‚</p><ul><li>å½“Qlabelä½¿ç”¨setTextè®¾ç½®æ–‡æœ¬å†…å®¹ï¼Œå› ä¸ºQlabelä¼šåˆ¤æ–­å…¶ä¸ºçº¯æ–‡æœ¬è¿˜æ˜¯ä½œä¸ºHTMLæ ‡è®°çš„å¯Œæ–‡æœ¬ï¼Œæƒ³æ˜ç¡®æ˜¾ç¤ºæ–‡æœ¬æ ¼å¼ï¼Œåˆ™è°ƒç”¨setTextFormatã€‚</li></ul><h2 id="å›¾ç‰‡æ’å…¥">å›¾ç‰‡æ’å…¥</h2><p>é¦–å…ˆä½¿ç”¨QPixmap()åˆ›å»ºä¸€ä¸ªQPixmapå¯¹è±¡ï¼Œä½¿ç”¨setPixmapå‡½æ•°æ’å…¥å›¾ç‰‡ï¼Œè‹¥ä½¿ç”¨setScaledContentsï¼ˆTrueï¼‰å¯ä»¥è®¾ç½®å°†å›¾ç‰‡å¡«å……è¯¥labelçš„æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼Œæ­¤å‚æ•°é»˜è®¤æ˜¯Falseã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><span class="hljs-comment">#lb1æ˜¯ç›´æ¥æ’å…¥ï¼›lb2æ˜¯ç¼©æ”¾å›¾ç‰‡å¡«å……labelåŒºåŸŸï¼›</span><br>        pix = QPixmap(<span class="hljs-string">'sexy.jpg'</span>)<br><br>        lb1 = QLabel(self)<br>        lb1.setGeometry(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">300</span>,<span class="hljs-number">200</span>)<br>        lb1.setStyleSheet(<span class="hljs-string">"border: 2px solid red"</span>)<br>        lb1.setPixmap(pix)<br><br>        lb2 = QLabel(self)<br>        lb2.setGeometry(<span class="hljs-number">0</span>,<span class="hljs-number">250</span>,<span class="hljs-number">300</span>,<span class="hljs-number">200</span>)<br>        lb2.setPixmap(pix)<br>        lb2.setStyleSheet(<span class="hljs-string">"border: 2px solid red"</span>)<br>        lb2.setScaledContents(<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><h2 id="é¡¹ç›®å®ä¾‹">é¡¹ç›®å®ä¾‹</h2><p>åœ¨é¡¹ç›®ä»£ç ä¸­æœ‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">self.lab = MyLabel(self.widget)<br><span class="hljs-comment"># self.lab.setStyleSheet("QLabel{background:black;}")</span><br>img_width = <span class="hljs-number">1102</span><br>img_height = <span class="hljs-number">629</span><br>self.image_list = [<span class="hljs-string">"./temp.jpg"</span>]<br>self.image = QPixmap(self.image_list[<span class="hljs-number">0</span>])<br>self.image = self.image.scaled(img_width, img_height)<br>self.lab.setPixmap(self.image)<br>self.lab.setMinimumSize(img_width, img_height)<br></code></pre></td></tr></tbody></table></figure><ul><li><p>é¦–å…ˆåˆ›å»ºQpixmap(path)</p></li><li><p>å¯¹Qpixmapå¯¹è±¡scaledè°ƒæ•´å›¾ç‰‡å¤§å°</p></li><li><p>æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨Qtè‡ªå¸¦çš„scaled()å‡½æ•°ï¼›QImageã€QPixmapç­‰ç»˜å›¾è®¾å¤‡ç±»éƒ½æä¾›scaled()å‡½æ•°ã€‚</p><p>scaled()æ˜¯ä¸€ä¸ªé‡è½½å‡½æ•°ï¼ŒæŒ‰ç…§æŒ‡å®šçš„å®½å’Œé«˜ï¼Œæ ¹æ®ç»™çš„sizeå’ŒaspectRatioModeä»åŸæœ‰å›¾åƒè¿”å›ä¸€ä¸ªç»è¿‡æ¯”ä¾‹è½¬æ¢çš„å›¾åƒï¼Œå¦‚æœå®½é«˜ä¸º0ï¼Œè¿”å›ä¸€ä¸ªç©ºå›¾åƒ<br>æ‰€ä»¥ï¼Œè·å–æ§ä»¶çš„æ”¹å˜åçš„å®½é«˜ï¼Œå°±èƒ½è®¾å®šå›¾åƒè½¬æ¢çš„å®½é«˜è½¬æ¢æ¯”ä¾‹ï¼Œç”¨scaled()çš„è¿”å›é‡æ–°è¿›è¡Œç»˜å›¾å³å¯è‡ªé€‚åº”çª—å£ã€‚</p><p>é¡¹ç›®ä¸­è¿™é‡Œä½¿ç”¨ <code>Qt.IgnoreAspectRatio</code></p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">QPixmap::scaled(const QSize &amp; size, Qt::AspectRatioMode aspectRatioMode = Qt::IgnoreAspectRatio, Qt::TransformationMode transformMode = Qt::FastTransformation) const<br>å…¶ä¸­aspectRatioMode<br>IgnoreAspectRatio  <span class="hljs-comment">#çŸ©å½¢æ¡†æœ‰å¤šå¤§ï¼Œå›¾ç‰‡å°±ç¼©æ”¾æˆå¤šå¤§ï¼Œä¸é™åˆ¶åŸå›¾ç‰‡çš„é•¿å®½æ¯”</span><br>KeepAspectRatio    <span class="hljs-comment">#ä¿æŒåŸå›¾ç‰‡çš„é•¿å®½æ¯”ï¼Œä¸”ä¸è¶…è¿‡çŸ©å½¢æ¡†çš„å¤§å°</span><br>KeepAspectRatioByExpanding   <span class="hljs-comment">#æ ¹æ®çŸ©å½¢æ¡†çš„å¤§å°æœ€å¤§ç¼©æ”¾å›¾ç‰‡</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scaled</span>(<span class="hljs-params">self, *__args</span>):</span> <span class="hljs-comment"># real signature unknown; restored from __doc__ with multiple overloads</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">        scaled(self, int, int, aspectRatioMode: Qt.AspectRatioMode = Qt.IgnoreAspectRatio, transformMode: Qt.TransformationMode = Qt.FastTransformation) -&gt; QPixmap</span><br><span class="hljs-string">        scaled(self, QSize, aspectRatioMode: Qt.AspectRatioMode = Qt.IgnoreAspectRatio, transformMode: Qt.TransformationMode = Qt.FastTransformation) -&gt; QPixmap</span><br><span class="hljs-string">        """</span><br>    <span class="hljs-keyword">return</span> QPixmap<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cvè¯»å–å¸¦æœ‰ä¸­æ–‡è·¯å¾„çš„å›¾ç‰‡</title>
    <link href="/2021/10/20/python/img/cvread/"/>
    <url>/2021/10/20/python/img/cvread/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¸¸è§„åœ¨è¯»å–å›¾ç‰‡æ—¶ä½¿ç”¨çš„ä»£ç æ˜¯<code>cv.imread(path)</code>ï¼Œä½†æ˜¯è·¯å¾„ä¸­å‡ºç°ä¸­æ–‡æ—¶å°±ä¼šå‡ºç°ï¼Œè¯»å–ä¸ºç©ºçš„æƒ…å†µï¼Œä»¥ä¸‹ç»™å‡ºè§£å†³æ–¹æ³•ã€‚</p></blockquote><h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹<code>cv2.imread()å‡½æ•°</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">cv2.imread(filepath,flags)<br>filepath:æ˜¯è¦è¯»å…¥çš„å›¾ç‰‡è·¯å¾„<br>flags: è¯»å…¥å›¾ç‰‡çš„æ ¼å¼<br>cv2.IMRAED_COLOR:é»˜è®¤é€‰æ‹©æ­¤å‚æ•°ï¼Œè¯»å…¥å½©è‰²å›¾ç‰‡ï¼ŒBGRçš„æ ¼å¼ï¼Œå¿½ç•¥äº†alphaé€šé“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—<span class="hljs-number">1</span>ä»£æ›¿ã€‚<br>cv2.IMREAD_GRAYSCALE:è¯»å…¥ç°åº¦å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥å†™<span class="hljs-number">0</span><br>cv2.IMREAD_UNCHANGED:é¡¾åæ€ä¹‰ï¼Œè¯»å…¥å®Œæ•´å›¾ç‰‡ï¼ŒåŒ…æ‹¬alphaé€šé“ï¼Œå¯ä»¥ç›´æ¥å†™-<span class="hljs-number">1</span>ï¼ˆBGRAï¼‰<br><br>cv2.COLOR_BGR2GRAY:å¯ä»¥è½¬æ¢é¢œè‰²ç©ºé—´ï¼Œç”±BGRè½¬æ¢ä¸ºRGB<br>cv2.COLOR_RGB2GRAY:æœ‰RGBè½¬æ¢ä¸ºç°åº¦å›¾æ ¼å¼<br></code></pre></td></tr></tbody></table></figure><blockquote><p>alphaé€šé“ï¼Œåˆç§°Aé€šé“ï¼Œæ˜¯ä¸€ä¸ª8ä½çš„ç°åº¦é€šé“ï¼Œè¯¥é€šé“ç”¨256çº§ç°åº¦æ¥è®°å½•å›¾åƒä¸­çš„é€æ˜åº¦å¤ä¿¡æ¯ï¼Œå®šä¹‰é€æ˜ã€ä¸é€æ˜å’ŒåŠé€æ˜åŒºåŸŸï¼Œå…¶ä¸­é»‘è¡¨ç¤ºå…¨é€æ˜ï¼Œç™½è¡¨ç¤ºä¸é€æ˜ï¼Œç°è¡¨ç¤ºåŠé€æ˜ã€‚å¦‚æœè¯»å–çš„å›¾ç‰‡æ²¡æœ‰alphaé€šé“åˆ™è¿˜æ˜¯æŒ‰ç…§ä¸‰é€šé“è¯»å–ã€‚</p></blockquote><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><p><strong>åŸå› ï¼š</strong>  åœ¨è¯»å–å«æœ‰ä¸­æ–‡å­—ç¬¦çš„è·¯å¾„å›¾ç‰‡æ—¶ä¼šè¿”å›Noneï¼Œè¿™æ˜¯ç”±äºopencvä¸æ¥å—non-asciiçš„è·¯å¾„ã€‚</p><p><strong>æ–¹æ³•ï¼š</strong> å…ˆä½¿ç”¨numpyçš„fromfileå°†å›¾ç‰‡è¯»å–ä¸ºnp.uint8çš„æ ¼å¼ï¼Œå†ä½¿ç”¨cvçš„imdecodeå‡½æ•°è§£ç ã€‚</p><p><strong>å…·ä½“ä»£ç </strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>im_path = <span class="hljs-string">'./æµ‹è¯•æ•°æ®/temp_long.jpg'</span><br>im = cv2.imdecode(np.fromfile(im_path, dtype=np.uint8))<br>cv2.imshow(<span class="hljs-string">"æ˜¾ç¤ºå›¾ç‰‡"</span>,im)<br><span class="hljs-built_in">print</span>(im.shape)<br>cv2.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><p><strong>ä»£ç å…·ä½“åˆ†æï¼š</strong><br>å…ˆä¸ç›´æ¥è¯»å–å›¾ç‰‡ï¼Œè€Œæ˜¯é‡‡ç”¨<code>numpy</code>ä¸­çš„<code>fromfile</code>è¯»å–æ–‡ä»¶ï¼Œå°†å›¾ç‰‡æŒ‰ç…§intç±»å‹è¯»å…¥æ•°æ®ï¼Œè¯»å…¥çš„æ˜¯ä¸€ç»´æ•°ç»„ï¼Œç„¶åé€šè¿‡cvä¸­<code>imdecode</code>æ¥å¯¹æ•°ç»„è§£ç å¾—åˆ°å›¾ç‰‡ï¼Œ<code>imdecode</code>å‡½æ•°çš„ä½œç”¨æ˜¯<code>ä»å†…å­˜ç¼“å†²åŒºä¸­è¯»å–å›¾åƒ</code>ï¼Œå¦‚æœç¼“å†²åŒºå¤ªçŸ­æˆ–åŒ…å«æ— æ•ˆæ•°æ®æ—¶ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªç©ºçŸ©é˜µ(Mat::data==NULL)ã€‚å¦‚æœæ˜¯å½©è‰²å›¾åƒï¼Œè§£ç åçš„å›¾åƒå°†æŒ‰ç…§B G Ré¡ºåºå­˜å‚¨é€šé“ã€‚è¿™å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°<code>imdecode(buf,flags)</code>ï¼Œbufæ˜¯è¾“å…¥æ•°ç»„æˆ–å­—èŠ‚å‘é‡ï¼Œflags ä¸cv::imreadç›¸åŒçš„flagã€‚</p><blockquote><p>cv2.IMREAD_COLORï¼šåŠ è½½å½©è‰²å›¾ç‰‡ï¼Œè¿™ä¸ªæ˜¯é»˜è®¤å‚æ•°ï¼Œå¯ä»¥ç›´æ¥å†™1 ï¼ˆBGRå½¢å¼ï¼‰<br>cv2.IMREAD_GRAYSCALEï¼šä»¥ç°åº¦æ¨¡å¼åŠ è½½å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥å†™0<br>cv2.IMREAD_UNCHANGEDï¼šåŒ…æ‹¬alphaï¼Œå¯ä»¥ç›´æ¥å†™-1</p></blockquote><p><strong>ä¿å­˜</strong></p><p>'.jpgâ€™è¡¨ç¤ºæŠŠå½“å‰å›¾ç‰‡imgæŒ‰ç…§jpgæ ¼å¼ç¼–ç ï¼ŒæŒ‰ç…§ä¸åŒæ ¼å¼ç¼–ç çš„ç»“æœä¸ä¸€æ ·</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>im_path = <span class="hljs-string">'./æµ‹è¯•æ•°æ®/temp_long.jpg'</span><br>im = cv2.imdecode(np.fromfile(im_path, dtype=np.uint8))<br>cv2.imshow(<span class="hljs-string">"æ˜¾ç¤ºå›¾ç‰‡"</span>,im)<br>cv2.imencode(<span class="hljs-string">'.jpg'</span>, im)[<span class="hljs-number">1</span>].tofile(<span class="hljs-string">'E:\æµ‹è¯•è·¯å¾„/frameTest.jpg'</span>)<span class="hljs-comment">#è‹±æ–‡æˆ–ä¸­æ–‡è·¯å¾„å‡é€‚ç”¨</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer36 äºŒå‰æœç´¢æ ‘å’ŒåŒå‘é“¾è¡¨</title>
    <link href="/2021/10/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer36/"/>
    <url>/2021/10/08/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer36/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘å’ŒåŒå‘é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œå°†è¯¥äºŒå‰æœç´¢æ ‘è½¬æ¢æˆä¸€ä¸ªæ’åºçš„å¾ªç¯åŒå‘é“¾è¡¨ã€‚è¦æ±‚ä¸èƒ½åˆ›å»ºä»»ä½•æ–°çš„èŠ‚ç‚¹ï¼Œåªèƒ½è°ƒæ•´æ ‘ä¸­èŠ‚ç‚¹æŒ‡é’ˆçš„æŒ‡å‘<br>ä¸ºäº†è®©æ‚¨æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œä»¥ä¸‹é¢çš„äºŒå‰æœç´¢æ ‘ä¸ºä¾‹ï¼š</p><p><img src="https://picture.mulindya.com/leetcode-offer36-1.png" alt=""></p><p>æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªäºŒå‰æœç´¢æ ‘è½¬åŒ–ä¸ºåŒå‘å¾ªç¯é“¾è¡¨ã€‚é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå‰é©±å’Œåç»§æŒ‡é’ˆã€‚å¯¹äºåŒå‘å¾ªç¯é“¾è¡¨ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„åç»§æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸Šé¢çš„äºŒå‰æœç´¢æ ‘è½¬åŒ–æˆçš„é“¾è¡¨ã€‚â€œheadâ€ è¡¨ç¤ºæŒ‡å‘é“¾è¡¨ä¸­æœ‰æœ€å°å…ƒç´ çš„èŠ‚ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer36-2.png" alt=""></p><p>ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°±åœ°å®Œæˆè½¬æ¢æ“ä½œã€‚å½“è½¬åŒ–å®Œæˆä»¥åï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆéœ€è¦æŒ‡å‘å‰é©±ï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å³æŒ‡é’ˆéœ€è¦æŒ‡å‘åç»§ã€‚è¿˜éœ€è¦è¿”å›é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><p>æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 426 é¢˜ç›¸åŒï¼š<a href="https://leetcode-cn.com/problems/convert-binary-search-tree-to-sorted-doubly-linked-list/">https://leetcode-cn.com/problems/convert-binary-search-tree-to-sorted-doubly-linked-list/</a></p></li><li><p>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨ã€‚</p></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ¬é¢˜çš„ç®—æ³•æ€æƒ³æ˜¯åœ¨ä¸­åºéå†çš„åŸºç¡€ä¸Šï¼Œæ¶‰åŠå¯¹é“¾è¡¨çš„å¤„ç†ï¼Œä½†æ˜¯è¿˜æ˜¯æŒ‰ç…§ä¸­åºé€’å½’éå†çš„é€»è¾‘ï¼Œä½¿ç”¨selfå¯ä»¥å…¨å±€è®¾ç½®preå’Œheadï¼Œpreæ˜¯ç”¨æ¥æ›´æ–°èŠ‚ç‚¹çš„å·¦å³æŒ‡å‘ï¼Œheadæ˜¯ç”¨äºåç»­çš„å¤´å°¾èŠ‚ç‚¹çš„å¤„ç†ï¼Œå‡½æ•°ç»“æŸæ—¶çš„preå³ä¸ºå°¾èŠ‚ç‚¹ã€‚</p><p>ä¸­åºéå†ä»£ç ç»“æ„ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">root</span>):</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br><span class="hljs-keyword">return</span><br>dfs(root.left)<br><span class="hljs-built_in">print</span>(root)<br>dfs(root.right)<br></code></pre></td></tr></tbody></table></figure><p>æ³¨æ„è¾¹ç•Œæ¡ä»¶çš„å¤„ç†ï¼Œä»¥åŠself.preå’Œself.headçš„æ›´æ–°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">"""</span><br><span class="hljs-string"># Definition for a Node.</span><br><span class="hljs-string">class Node:</span><br><span class="hljs-string">    def __init__(self, val, left=None, right=None):</span><br><span class="hljs-string">        self.val = val</span><br><span class="hljs-string">        self.left = left</span><br><span class="hljs-string">        self.right = right</span><br><span class="hljs-string">"""</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">treeToDoublyList</span>(<span class="hljs-params">self, root: <span class="hljs-string">'Node'</span></span>) -&gt; 'Node':</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mediumfunc</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span><br>            mediumfunc(root.left)<br>            <span class="hljs-keyword">if</span>(self.pre):<br>                self.pre.right = root<br>                root.left = self.pre<br>            <span class="hljs-keyword">else</span>:<br>                self.head = root<br>            self.pre = root <span class="hljs-comment">#æ³¨æ„åœ¨åˆ¤æ–­ä¹‹åå¿…é¡»è¦æ›´æ–°pre</span><br>            mediumfunc(root.right)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(root):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        self.head = root<br>        self.pre = <span class="hljs-literal">None</span><br>        mediumfunc(root)<br>        self.head.left = self.pre<br>        self.pre.right = self.head<br>        <span class="hljs-keyword">return</span> self.head<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pipenvçš„å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2021/10/08/project_tool/pipenv/"/>
    <url>/2021/10/08/project_tool/pipenv/</url>
    
    <content type="html"><![CDATA[<blockquote><p>pipenv æ˜¯Kenneth Reitzå¤§ç¥çš„ä½œå“ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç®¡ç†Pythonå¤šä¸ªç¯å¢ƒï¼Œå„ç§åŒ…ã€‚è¿‡å»æˆ‘ä»¬ä¸€èˆ¬ç”¨virtualenvæ­å»ºè™šæ‹Ÿç¯å¢ƒï¼Œç®¡ç†pythonç‰ˆæœ¬ï¼Œä½†æ˜¯è·¨å¹³å°çš„ä½¿ç”¨ä¸å¤ªä¸€è‡´ï¼Œä¸”æœ‰æ—¶å€™å¤„ç†åŒ…ä¹‹é—´çš„ä¾èµ–æ€»å­˜åœ¨é—®é¢˜ï¼›è¿‡å»ä¹Ÿå¸¸å¸¸ç”¨ pipè¿›è¡ŒåŒ…çš„ç®¡ç†ï¼Œpipå·²ç»è¶³å¤Ÿå¥½ï¼Œä½†æ˜¯ä»ç„¶æ¨èpipenvï¼Œç›¸å½“äºvirtualenvå’Œpipçš„åˆä½“ï¼Œä¸”æ›´åŠ å¼ºå¤§ã€‚pipenvå¼€æºä¹‹åï¼Œåœ¨GitHubä¸Šæœ‰å¾ˆé«˜äººæ°”ï¼ˆæˆªæ­¢äºç°åœ¨æœ‰9600å¤šæ˜Ÿï¼‰ã€‚</p></blockquote><blockquote><p>åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œé¡¹ç›®æ–‡ä»¶104Mæ‰“åŒ…ä¹‹åæ–‡ä»¶5.8Gï¼Œæœ‰äººè¯´ï¼ŒAnacondaé‡Œå†…ç½®äº†å¾ˆå¤šåº“ï¼Œæ‰“åŒ…çš„æ—¶å€™æ‰“åŒ…äº†å¾ˆå¤šä¸å¿…è¦çš„æ¨¡å—è¿›å»ï¼Œè¦ç”¨çº¯å‡€çš„Pythonæ¥æ‰“åŒ…ã€‚äºæ˜¯å°è¯•ä½¿ç”¨pipenvè™šæ‹Ÿç¯å¢ƒæ¥æ‰“åŒ…ï¼Œemmmæœ€åå®Œæˆæ˜¯5.2Gï¼Œæ„Ÿè§‰ï¼Œä¹Ÿï¼Œæ²¡æœ‰ï¼Œå¤šå¤§æ”¹å˜å–ï¼Œå°¤å…¶æ˜¯torchåŒ…ç›´æ¥å åˆ°äº†2.8G(è¿™è¿˜æ˜¯æ”¹äº†from importä¹‹åå‘¢)ã€‚ å“ ğŸ˜£</p></blockquote><p><strong>pipenvä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</strong></p><p>ï¼ˆ1ï¼‰pipenvé›†æˆäº†pipï¼Œvirtualenvä¸¤è€…çš„åŠŸèƒ½ï¼Œä¸”å®Œå–„äº†ä¸¤è€…çš„ä¸€äº›ç¼ºé™·ã€‚</p><p>ï¼ˆ2ï¼‰è¿‡å»ç”¨virtualenvç®¡ç†requirements.txtæ–‡ä»¶å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼ŒPipenvä½¿ç”¨Pipfileå’ŒPipfile.lockï¼Œåè€…å­˜æ”¾å°†åŒ…çš„ä¾èµ–å…³ç³»ï¼ŒæŸ¥çœ‹ä¾èµ–å…³ç³»æ˜¯ååˆ†æ–¹ä¾¿ã€‚</p><p>ï¼ˆ3ï¼‰å„ä¸ªåœ°æ–¹ä½¿ç”¨äº†å“ˆå¸Œæ ¡éªŒï¼Œæ— è®ºå®‰è£…è¿˜æ˜¯å¸è½½åŒ…éƒ½ååˆ†å®‰å…¨ï¼Œä¸”ä¼šè‡ªåŠ¨å…¬å¼€å®‰å…¨æ¼æ´ã€‚ã€‚</p><p>ï¼ˆ4ï¼‰é€šè¿‡åŠ è½½.envæ–‡ä»¶ç®€åŒ–å¼€å‘å·¥ä½œæµç¨‹ã€‚</p><p>ï¼ˆ5ï¼‰æ”¯æŒPython2 å’Œ Python3ï¼Œåœ¨å„ä¸ªå¹³å°çš„å‘½ä»¤éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢å¿«é€Ÿä»‹ç»pipenvçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ–‡ç« æœ«å°¾æœ‰å…¶githubé“¾æ¥ã€‚æœ¬æ–‡çš„æµ‹è¯•ç¯å¢ƒæ˜¯windowsä¸‹çš„Python3.6ï¼Œå¯¹äºå…¶ä»–å¹³å°åŒæ ·é€‚ç”¨ã€‚</p><h2 id="1-å®‰è£…pipenv">1 å®‰è£…pipenv</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv<br></code></pre></td></tr></tbody></table></figure><h2 id="2-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><p>æ–°å»ºæ–‡ä»¶å¤¹åœ¨æ–‡ä»¶å¤¹ä¸­å»ºç«‹è™šæ‹Ÿç¯å¢ƒã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">mkdir envfile<br>cd envfile<br>pipenv install<br></code></pre></td></tr></tbody></table></figure><p>åˆå§‹åŒ–å¥½è™šæ‹Ÿç¯å¢ƒåï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆ2ä¸ªæ–‡ä»¶<code>Pipfile</code>å’Œ<code>Pipfile.lock</code>ã€‚ä¸ºpipenvåŒ…çš„é…ç½®æ–‡ä»¶ï¼Œä»£æ›¿åŸæ¥çš„ requirement.txtã€‚</p><p>é¡¹ç›®æäº¤æ—¶ï¼Œå¯å°†<code>Pipfile</code> æ–‡ä»¶å’Œ<code>Pipfile.lock</code>æ–‡ä»¶ä¸€å¹¶æäº¤ï¼Œå¾…å…¶ä»–å¼€å‘å…‹éš†ä¸‹è½½ï¼Œæ ¹æ®æ­¤Pipfile è¿è¡Œå‘½ä»¤<code>pipenv install --dev</code>ç”Ÿæˆè‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒã€‚</p><p><code>Pipfile.lock</code> æ–‡ä»¶æ˜¯é€šè¿‡hashç®—æ³•å°†åŒ…çš„åç§°å’Œç‰ˆæœ¬ï¼ŒåŠä¾èµ–å…³ç³»ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œå¯ä»¥ä¿è¯åŒ…çš„å®Œæ•´æ€§ã€‚</p><h2 id="3-å®‰è£…åŒ…">3 å®‰è£…åŒ…</h2><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…åŒ…</p><p>å¯ä»¥ä½¿ç”¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install package<br></code></pre></td></tr></tbody></table></figure><p>æˆ–è€…å…ˆè¿›å…¥è™šæ‹Ÿç¯å¢ƒä¸­å†å®‰è£…åŒ…ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell  <span class="hljs-comment">#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br>pip install package<br></code></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä½¿ç”¨txtæ–‡ä»¶æ¥å®‰è£…åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install -r requirements.txt <span class="hljs-comment">#é€šè¿‡requirementsæ–‡ä»¶å®‰è£…åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>requirements.txtæ–‡ä»¶å½¢å¦‚</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># pip install -r requirements.txt</span><br><br><span class="hljs-comment"># base ----------------------------------------</span><br><span class="hljs-attribute">matplotlib</span>&gt;=<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">numpy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">opencv</span>-python&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">Pillow</span><br><span class="hljs-attribute">PyYAML</span>&gt;=<span class="hljs-number">5</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">scipy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">torch</span>==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">torchvision</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">tqdm</span>&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">41</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">PyQt5</span><br><span class="hljs-attribute">fpdf</span><br><span class="hljs-comment"># logging -------------------------------------</span><br><span class="hljs-comment">#tensorboard&gt;=2.4.1</span><br><span class="hljs-comment"># wandb</span><br><br><span class="hljs-comment"># plotting ------------------------------------</span><br><span class="hljs-attribute">seaborn</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pandas</span><br><span class="hljs-attribute">requests</span><br></code></pre></td></tr></tbody></table></figure><h2 id="4-ç›¸å…³çš„å‘½ä»¤">4 ç›¸å…³çš„å‘½ä»¤</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv --py    <span class="hljs-comment">#æ˜¾ç¤ºpythonè§£é‡Šå™¨ä¿¡æ¯</span><br>pipenv --where <span class="hljs-comment">#æ˜¾ç¤ºæœ¬åœ°å·¥ç¨‹è·¯å¾„</span><br>pipenv --venv  <span class="hljs-comment">#æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒä¿¡æ¯</span><br>pipenv graph   <span class="hljs-comment">#æ˜¾ç¤ºç›®å‰å®‰è£…çš„åº“ä»¥åŠä¾èµ–å…³ç³»</span><br>pipenv uninstrall package <span class="hljs-comment">#å¸è½½ä¾èµ–åŒ…</span><br>pipenv uninstall --<span class="hljs-built_in">all</span>    <span class="hljs-comment">#å¸è½½å…¨éƒ¨ä¾èµ–åŒ…</span><br>exit                      <span class="hljs-comment">#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span><br>pipenv --rm               <span class="hljs-comment">#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></td></tr></tbody></table></figure><h4 id="è¿è¡Œä»£ç ">è¿è¡Œä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv run python XXX.py<br>æˆ–è€…<br>pipenv shell<br>python XXX.py<br></code></pre></td></tr></tbody></table></figure><h2 id="5-pyinstalleræ‰“åŒ…å‹ç¼©">5 pyinstalleræ‰“åŒ…å‹ç¼©</h2><h3 id="ç¬¬ä¸€æ¬¡æ‰“åŒ…">ç¬¬ä¸€æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv        <span class="hljs-comment">#å®‰è£…pipenvåº“</span><br>pipenv install            <span class="hljs-comment">#æ–°å»ºç¯å¢ƒï¼Œcdè¿›å…¥ï¼Œå»ºç«‹è™šæ‹Ÿç¯å¢ƒ</span><br>pipenv shell              <span class="hljs-comment">#è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [...]         <span class="hljs-comment">#å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ¨¡å—</span><br>pip install pyinstaller   <span class="hljs-comment">#å®‰è£…æ‰“åŒ…çš„æ¨¡å—</span><br>pyinstaller å‚æ•° [..]      <span class="hljs-comment">#æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>ç”Ÿæˆdistæ–‡ä»¶å¤¹å’Œç»“æœã€‚</p><h3 id="å†æ¬¡æ‰“åŒ…">å†æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell               <span class="hljs-comment">#cdè¿›å…¥ä¹‹å‰åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ï¼Œè¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [new package]  <span class="hljs-comment">#å®‰è£…æ–°æ¨¡å—</span><br>pyinstaller å‚æ•° [...]      <span class="hljs-comment">#å†æ¬¡æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®æ‰“åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å‰²æ–‡ä»¶åç›¸å…³æ“ä½œ</title>
    <link href="/2021/10/07/python/file/split-filename/"/>
    <url>/2021/10/07/python/file/split-filename/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¯¹æ–‡ä»¶åçš„ç›¸å…³æ“ä½œæ€»ç»“</p></blockquote><h3 id="å‡½æ•°ä»‹ç»">å‡½æ•°ä»‹ç»</h3><p><code>os.path</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">os.path.split() <span class="hljs-comment">#åˆ†å‰²æ–‡ä»¶å</span><br>os.path.splitdrive() <span class="hljs-comment">#åˆ†å‰²ç›˜ç¬¦</span><br>os.path.splitext() <span class="hljs-comment">#åˆ†å‰²æ‰©å±•å</span><br>os.path.basename() <span class="hljs-comment">#è·å–æ–‡ä»¶åï¼Œsplitçš„åä¸€å…ƒç´ </span><br>os.path.dirname()  <span class="hljs-comment">#è·å–è·¯å¾„åï¼Œsplitçš„å‰ä¸€å…ƒç´ </span><br>os.path.join()     <span class="hljs-comment">#è¿æ¥pathå­—ç¬¦ä¸²</span><br></code></pre></td></tr></tbody></table></figure><p><code>os</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.walk()     <span class="hljs-comment">#éå†è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯å’Œå­æ–‡ä»¶ä¿¡æ¯ï¼ˆrootï¼Œdirï¼Œfileçš„å½¢å¼ï¼‰</span><br>os.listdir()  <span class="hljs-comment">#è¿”å›è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“ä»‹ç»">å…·ä½“ä»‹ç»</h3><h4 id="os-path-split">os.path.split()</h4><p><code>os.path.split()</code>å‡½æ•°è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆçˆ¶è·¯å¾„ï¼Œæ–‡ä»¶åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.split(p)<br>Docstring:<br>Split a pathname.<br><br>Return <span class="hljs-built_in">tuple</span> (head, tail) where tail <span class="hljs-keyword">is</span> everything after the final slash.<br>Either part may be empty.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>spath = <span class="hljs-string">"./a/b/c/name.txt"</span><br>path,filename = os.path.split(spath)<br>path,filenameä¸º(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">'name.txt'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitdrive">os.path.splitdrive()</h4><p><code>os.path.splitdrive()</code>å‡½æ•°è¿”å›å…ƒç»„ä¿¡æ¯ï¼ˆç›˜ç¬¦ï¼Œè·¯å¾„ï¼ˆé™¤å»ç›˜ç¬¦ï¼‰ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitdrive(p)<br>Docstring:<br>Split a pathname into drive/UNC sharepoint <span class="hljs-keyword">and</span> relative path specifiers.<br>Returns a <span class="hljs-number">2</span>-<span class="hljs-built_in">tuple</span> (drive_or_unc, path); either part may be empty.<br><br>If you assign<br>    result = splitdrive(p)<br>It <span class="hljs-keyword">is</span> always true that:<br>    result[<span class="hljs-number">0</span>] + result[<span class="hljs-number">1</span>] == p<br><br>If the path contained a drive letter, drive_or_unc will contain everything<br>up to <span class="hljs-keyword">and</span> including the colon.  e.g. splitdrive(<span class="hljs-string">"c:/dir"</span>) returns (<span class="hljs-string">"c:"</span>, <span class="hljs-string">"/dir"</span>)<br><br>If the path contained a UNC path, the drive_or_unc will contain the host name<br><span class="hljs-keyword">and</span> share up to but <span class="hljs-keyword">not</span> including the fourth directory separator character.<br>e.g. splitdrive(<span class="hljs-string">"//host/computer/dir"</span>) returns (<span class="hljs-string">"//host/computer"</span>, <span class="hljs-string">"/dir"</span>)<br><br>Paths cannot contain both a drive letter <span class="hljs-keyword">and</span> a UNC path.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š  <br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.splitdrive(cpath)<br>(<span class="hljs-string">'C:'</span>, <span class="hljs-string">'/a/b/a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitext">os.path.splitext()</h4><p><code>os.path.splitext()</code>è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆè·¯å¾„åŠæ–‡ä»¶åï¼Œæ‰©å±•åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitext(p)<br>Docstring:<br>Split the extension <span class="hljs-keyword">from</span> a pathname.<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-dirname-ä¸os-path-basename">os.path.dirname()ä¸os.path.basename()</h4><p><code>os.path.dirname()</code>å’Œ<code>os.path.basename()</code>åˆ†åˆ«è¿”å›<code>split</code>å‡½æ•°çš„å‰åå…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.basename(p)<br>Docstring: Returns the final component of a pathname<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.dirname(cpath) <span class="hljs-comment">#dirpath</span><br><span class="hljs-string">'C:/a/b'</span><br>os.path.basename(cpath) <span class="hljs-comment">#filename</span><br><span class="hljs-string">'a.csv'</span><br>ç›¸å½“äºsplitçš„åˆ†è§£ï¼š<br>os.path.split(cpath)<br>(<span class="hljs-string">'C:/a/b'</span>, <span class="hljs-string">'a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-join">os.path.join()</h4><p><code>os.path.join()</code>ä½¿ç”¨ç‰¹å®šçš„åˆ†éš”ç¬¦è¿æ¥è·¯å¾„ã€‚Windowsä¸‹é»˜è®¤ä½¿ç”¨<code>\\</code>ã€‚Linuxä¸‹é»˜è®¤ä½¿ç”¨<code>/</code>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.join(path, *paths)<br>Docstring: &lt;no docstring&gt;<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>os.path.join(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">"a123"</span>, <span class="hljs-string">'name.txt'</span>) <br><span class="hljs-string">'./a/b/c\\a123\\name.txt'</span><br></code></pre></td></tr></tbody></table></figure><h4 id="os-walk">os.walk()</h4><p><code>os.walk()</code>éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼Œç„¶åé€’å½’éå†ä¸‹åˆ—å­æ–‡ä»¶å¤¹ã€‚<code>for root,dirs,files in os.walk(temp)</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.walk(top, topdown=<span class="hljs-literal">True</span>, onerror=<span class="hljs-literal">None</span>, followlinks=<span class="hljs-literal">False</span>)<br>Docstring:<br>Directory tree generator.<br><br>For each directory <span class="hljs-keyword">in</span> the directory tree rooted at top (including top<br>itself, but excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>), yields a <span class="hljs-number">3</span>-<span class="hljs-built_in">tuple</span><br>    dirpath, dirnames, filenames<br>dirpath <span class="hljs-keyword">is</span> a string, the path to the directory.  dirnames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of<br>the names of the subdirectories <span class="hljs-keyword">in</span> dirpath (excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>).<br>filenames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of the names of the non-directory files <span class="hljs-keyword">in</span> dirpath.<br>Note that the names <span class="hljs-keyword">in</span> the lists are just names, <span class="hljs-keyword">with</span> no path components.<br>To get a full path (which begins <span class="hljs-keyword">with</span> top) to a file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">in</span><br>dirpath, do os.path.join(dirpath, name).<br><br>If optional arg <span class="hljs-string">'topdown'</span> <span class="hljs-keyword">is</span> true <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> specified, the triple <span class="hljs-keyword">for</span> a<br>directory <span class="hljs-keyword">is</span> generated before the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">any</span> of its subdirectories<br>(directories are generated top down).  If topdown <span class="hljs-keyword">is</span> false, the triple<br><span class="hljs-keyword">for</span> a directory <span class="hljs-keyword">is</span> generated after the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> of its<br>subdirectories (directories are generated bottom up).<br><br>Caution:  <span class="hljs-keyword">if</span> you <span class="hljs-keyword">pass</span> a relative pathname <span class="hljs-keyword">for</span> top, don<span class="hljs-string">'t change the</span><br><span class="hljs-string">current working directory between resumptions of walk.  walk never</span><br><span class="hljs-string">changes the current directory, and assumes that the client doesn'</span>t<br>either.<br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br><span class="hljs-keyword">for</span> root,dirs,files <span class="hljs-keyword">in</span> os.walk(temp,topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-comment">#éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½• root,dirs,files,topdownä¸ºfalseæ—¶è¡¨ç¤ºä»åº•å‘ä¸Šï¼Œä¸ºtrueæ˜¯ä»é¡¶å‘ä¸‹</span><br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>        <br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>.exe<br>E:\è¿…é›·ä¸‹è½½\cuda_10<span class="hljs-number">.2</span><span class="hljs-number">.89_441</span><span class="hljs-number">.22</span>_win10.exe<br>E:\è¿…é›·ä¸‹è½½\Git-<span class="hljs-number">2.33</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>-<span class="hljs-number">64</span>-bit.exe<br>E:\è¿…é›·ä¸‹è½½\ide-<span class="hljs-built_in">eval</span>-resetter-<span class="hljs-number">2.1</span><span class="hljs-number">.13</span>.<span class="hljs-built_in">zip</span><br>E:\è¿…é›·ä¸‹è½½\npp<span class="hljs-number">.8</span><span class="hljs-number">.1</span><span class="hljs-number">.4</span>.Installer.exe<br>E:\è¿…é›·ä¸‹è½½\sogou_explorer_11<span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-number">.33862_7793</span>.exe<br>E:\è¿…é›·ä¸‹è½½\windows_v6<span class="hljs-number">.61</span>.rar<br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span> <br></code></pre></td></tr></tbody></table></figure><h4 id="os-listdir">os.listdir()</h4><p><code>os.listdir()</code>è¿”å›æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¸€çº§æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.listdir(path=<span class="hljs-literal">None</span>)<br>Docstring:<br>Return a <span class="hljs-built_in">list</span> containing the names of the files <span class="hljs-keyword">in</span> the directory.<br><br>path can be specified <span class="hljs-keyword">as</span> either <span class="hljs-built_in">str</span>, <span class="hljs-built_in">bytes</span>, <span class="hljs-keyword">or</span> a path-like <span class="hljs-built_in">object</span>.  If path <span class="hljs-keyword">is</span> <span class="hljs-built_in">bytes</span>,<br>  the filenames returned will also be <span class="hljs-built_in">bytes</span>; <span class="hljs-keyword">in</span> <span class="hljs-built_in">all</span> other circumstances<br>  the filenames returned will be <span class="hljs-built_in">str</span>.<br>If path <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>, uses the path=<span class="hljs-string">'.'</span>.<br>On some platforms, path may also be specified <span class="hljs-keyword">as</span> an <span class="hljs-built_in">open</span> file descriptor;\<br>  the file descriptor must refer to a directory.<br>  If this functionality <span class="hljs-keyword">is</span> unavailable, using it raises NotImplementedError.<br><br>The <span class="hljs-built_in">list</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> arbitrary order.  It does <span class="hljs-keyword">not</span> include the special<br>entries <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span> even <span class="hljs-keyword">if</span> they are present <span class="hljs-keyword">in</span> the directory.<br><span class="hljs-type">Type</span>:      builtin_function_or_method<br>    <br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br>os.listdir(temp) <span class="hljs-comment">#åˆ—å‡ºdirnameä¸‹çš„ç›®å½•å’Œæ–‡ä»¶</span><br>[<span class="hljs-string">'cuda_10.2.89_441.22_win10.exe'</span>,<br> <span class="hljs-string">'Git-2.33.0.2-64-bit.exe'</span>,<br> <span class="hljs-string">'ide-eval-resetter-2.1.13.zip'</span>,<br> <span class="hljs-string">'npp.8.1.4.Installer.exe'</span>,<br> <span class="hljs-string">'sogou_explorer_11.0.0.33862_7793.exe'</span>,<br> <span class="hljs-string">'Suplicant_for_Campus_Network_For_Windows_V6.61'</span>,<br> <span class="hljs-string">'windows_v6.61.rar'</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ–‡ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨pythonåˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</title>
    <link href="/2021/10/06/python/file/delete-file/"/>
    <url>/2021/10/06/python/file/delete-file/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ€»ç»“åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œå’Œå‡½æ•°ã€‚</p></blockquote><h3 id="åˆ é™¤å•ä¸ªæ–‡ä»¶">åˆ é™¤å•ä¸ªæ–‡ä»¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.remove(path)<br><span class="hljs-comment"># å¦‚æœpathæ˜¯ä¸€ä¸ªç›®å½•ï¼ŒæŠ›å‡ºOSErroré”™è¯¯ï¼Œå¦‚æœæ–‡ä»¶ä¸åœ¨æˆ–è€…è·¯å¾„é”™è¯¯ï¼Œä¼šæŠ›å‡ºé”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶å¤¹">åˆ é™¤æ–‡ä»¶å¤¹</h3><p>ç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">os.rmdir(dirName)<br>os.removedirs(dirName)<br><span class="hljs-comment"># åˆ é™¤ç›®å½• dirNameï¼Œè¦æ±‚dirNameå¿…é¡»æ˜¯ä¸ªç©ºç›®å½•ï¼Œå¦åˆ™æŠ›å‡ºOSErroré”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="é€’å½’åˆ é™¤æ–‡ä»¶å¤¹">é€’å½’åˆ é™¤æ–‡ä»¶å¤¹</h3><p>éç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br>shutil.rmtree()<br></code></pre></td></tr></tbody></table></figure><p>éå†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…ˆåˆ é™¤å­æ–‡ä»¶ï¼Œå†åˆ é™¤æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">"filename"</span>, topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        os.remove(os.path.join(root, name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        os.rmdir(os.path.join(root, name))<br> <br><span class="hljs-comment"># os.walkçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦éå†å¹¶åˆ é™¤å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ç›®å½•</span><br><span class="hljs-comment"># ä¸Šé¢çš„ä»£ç è¿è¡Œåï¼Œæ–‡ä»¶å¤¹"filename"é‡Œçš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å…¨è¢«åˆ é™¤ï¼Œä½†æ˜¯æ–‡ä»¶å¤¹"filename"è¿˜å­˜åœ¨</span><br><span class="hljs-comment"># å…·ä½“å¯ä»¥æŸ¥ä¸‹os.walk()çš„ç”¨æ³•ï¼Œä»¥åŠå…¶å‚æ•°topdownçš„åŠŸèƒ½</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>æ–‡ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer42 è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</title>
    <link href="/2021/10/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer42/"/>
    <url>/2021/10/06/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer42/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚</p><p>è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">è¾“å…¥: nums = [<span class="hljs-string">-2</span>,1,<span class="hljs-string">-3</span>,4,<span class="hljs-string">-1</span>,2,1,<span class="hljs-string">-5</span>,4]<br>è¾“å‡º: 6<br>è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,<span class="hljs-string">-1</span>,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= arr.length &lt;= 10^5</li><li>-100 &lt;= arr[i] &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨æ•°ç»„dp[i]ç”¨æ¥è¡¨ç¤ºä»0åˆ°iä¸‹æ ‡å…ƒç´ çš„å­æ•°ç»„ä¸­ï¼ŒåŒ…å«iå…ƒç´ çš„æœ€å¤§å’Œï¼Œä¾‹å¦‚ï¼šåŸå§‹æ•°åˆ—num=[-2,1,-3,4,-1,2,1,-5,4]ï¼Œdpä¸º[-2, 1, -2, 4, 3, 5, 6, 1, 5]ã€‚æ³¨æ„ä»ä¸‹æ ‡1å¼€å§‹ï¼Œdp[i] = num[i] + max(0, dp[i-1])ï¼Œå¦‚æœå‰é¡¹çš„æœ€å¤§å’Œ(ç›¸é‚»çš„å­æ•°ç»„)å¯¹æ­¤é¡¹<strong>æœ‰å¢ç›Š</strong>å°±æ·»åŠ è¿›å»ï¼Œå¦åˆ™å°±ç›´æ¥num[i]ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>            nums[i] += <span class="hljs-built_in">max</span>(nums[i - <span class="hljs-number">1</span>], <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(nums)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonå°†å›¾ç‰‡å­˜è¿›PDFä¸­</title>
    <link href="/2021/10/06/python/img/FPDF/"/>
    <url>/2021/10/06/python/img/FPDF/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨å…¬å®‰éƒ¨è¶³è¿¹é¡¹ç›®ä¸­ï¼Œéœ€è¦å°†çŸ«æ­£çš„è¶³è¿¹å›¾ç‰‡æ‰“å°å‡ºæ¥ï¼Œæ‰€æœ‰é¦–å…ˆè½¬æˆpdfæ–‡ä»¶ä¸­å†è¿›è¡Œæ‰“å°ã€‚å°±æ¶‰åŠåˆ°å°†å›¾ç‰‡å­˜å…¥pdfä¸­ï¼Œè¿™é‡Œä½¿ç”¨çš„å·¥å…·æ˜¯FPDFã€‚FPDFæ˜¯ä¸€ä¸ªpdfæ–‡ä»¶çš„å¤„ç†åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ªæ€§åŒ–åˆ›å»ºå’Œè§„èŒƒè®¾å®špdfæ–‡ä»¶ã€‚</p></blockquote><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install fpdf<br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“å†…å®¹">å…·ä½“å†…å®¹</h3><h4 id="å®ç°ä»£ç ">å®ç°ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fpdf <span class="hljs-keyword">import</span> FPDF<br><span class="hljs-keyword">import</span> glob<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">imagesTopdf</span>(<span class="hljs-params">imagesPath,pdfName</span>):</span><br>    pdf = FPDF()<br>    <span class="hljs-keyword">for</span> imagePath <span class="hljs-keyword">in</span> imagesPath:<br>        pdf.add_page()<br>        pdf.image(imagePath,x=<span class="hljs-number">0</span>,y=<span class="hljs-number">0</span>,w=<span class="hljs-number">170</span>,h=<span class="hljs-number">297</span>)<br>    pdf.output(pdfName,<span class="hljs-string">"F"</span>)<br><br>images = glob.glob(<span class="hljs-string">"current_revise/"</span>+<span class="hljs-string">"*.jpg"</span>)<br><span class="hljs-comment"># jpg_path = "test.jpg"</span><br>pdf_path = <span class="hljs-string">"test_file3.pdf"</span><br>imagesTopdf(images,pdf_path)<br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‚æ•°">ç›¸å…³å‚æ•°</h4><p>1ï¼Œå…¶ä¸­<code>pdf = FPDF()</code>æ˜¯åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤æ˜¯ï¼š</p><p>2ï¼Œ<code>orientation</code>ä¸ºç«–å‘ï¼ˆPï¼šç«–å‘ï¼ŒLæ¨ªå‘ï¼‰ï¼›</p><p>3ï¼Œ<code>unit</code>ä¸ºmmæ¯«ç±³ã€‚ç”¨äºè¡¨ç¤ºæ–‡æ¡£ä¸­ä½ç½®çš„è®¡é‡å•å…ƒã€‚å¯ç”¨çš„å€¼æœ‰ä»¥ä¸‹å››ç§:</p><ul><li>pt: ç‚¹</li><li>mm: æ¯«ç±³</li><li>cm: å˜ç±³</li><li>in: è‹±å¯¸</li></ul><p>4ï¼Œ<code>format</code>ç”¨äºè¡¨ç¤ºåˆ›å»ºçš„PDFæ–‡æ¡£çš„çº¸å¼ ç±»å‹ã€‚å¯ç”¨å€¼å¯ä»¥æ˜¯ç”¨äºè¡¨ç¤ºçº¸çš„å­—ç¬¦ä¸²ï¼Œå¦‚"A4"ã€â€œA5â€ã€"Letter"ç­‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FPDF</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-string">"PDF Generation class"</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, orientation=<span class="hljs-string">'P'</span>,unit=<span class="hljs-string">'mm'</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">'A4'</span></span>)</span><br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‡½æ•°">ç›¸å…³å‡½æ•°</h4><p><code>pdf.add_page()</code>ç”¨äºåˆ›å»ºæ–°é¡µã€‚</p><p><code> pdf.image(imagePath,x=0,y=0,w=170,h=297)</code>æ˜¯ç”¨äºæ·»åŠ å›¾åƒï¼Œå…¶ä¸­<code>x</code>å’Œ<code>y</code>è¡¨ç¤ºå›¾ç‰‡æ‰€åœ¨çš„åæ ‡ï¼Œ<code>width</code>å’Œ<code>height</code>è¡¨ç¤ºå›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ã€‚å¦‚æœéœ€è¦å›¾ç‰‡ä¿æŒåŸæ¥çš„å¤§å°ï¼Œåªéœ€è¦å°†<code>width</code>å’Œ<code>height</code>è®¾ç½®æˆ<code>0</code>å³å¯ã€‚çŸ«æ­£åçš„å›¾ç‰‡æ˜¯1700ï¼Œ2981ï¼›A4çº¸çš„å°ºå¯¸æ˜¯210*297ï¼Œæ‰€ä»¥åªèƒ½è®¾ç½®ä¸º297ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œè¯¯å·®è‡³å°‘æœ‰1.1mm</p><p>imageæºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">image</span>(<span class="hljs-params">self, name, x=<span class="hljs-literal">None</span>, y=<span class="hljs-literal">None</span>, w=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>,<span class="hljs-built_in">type</span>=<span class="hljs-string">''</span>,link=<span class="hljs-string">''</span></span>):</span><br>    <span class="hljs-string">"Put an image on the page"</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name <span class="hljs-keyword">in</span> self.images:<br>        <span class="hljs-comment">#First use of image, get info</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">''</span>):<br>            pos=name.rfind(<span class="hljs-string">'.'</span>)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> pos):<br>                self.error(<span class="hljs-string">'image file has no extension and no type was specified: '</span>+name)<br>            <span class="hljs-built_in">type</span>=substr(name,pos+<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">type</span>=<span class="hljs-built_in">type</span>.lower()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'jpg'</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">type</span>==<span class="hljs-string">'jpeg'</span>):<br>            info=self._parsejpg(name)<br>        <span class="hljs-keyword">elif</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'png'</span>):<br>            info=self._parsepng(name)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment">#Allow for additional formats</span><br>            <span class="hljs-comment">#maybe the image is not showing the correct extension,</span><br>            <span class="hljs-comment">#but the header is OK,</span><br>            succeed_parsing = <span class="hljs-literal">False</span><br>            <span class="hljs-comment">#try all the parsing functions</span><br>            parsing_functions = [self._parsejpg,self._parsepng,self._parsegif]<br>            <span class="hljs-keyword">for</span> pf <span class="hljs-keyword">in</span> parsing_functions:<br>                <span class="hljs-keyword">try</span>:<br>                    info = pf(name)<br>                    succeed_parsing = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">except</span>:<br>                    <span class="hljs-keyword">pass</span><br>            <span class="hljs-comment">#last resource</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> succeed_parsing:<br>                mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                    self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>                info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>            mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>            info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>        info[<span class="hljs-string">'i'</span>]=<span class="hljs-built_in">len</span>(self.images)+<span class="hljs-number">1</span><br>        self.images[name]=info<br>    <span class="hljs-keyword">else</span>:<br>        info=self.images[name]<br>    <span class="hljs-comment">#Automatic width and height calculation if needed</span><br>    <span class="hljs-keyword">if</span>(w==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> h==<span class="hljs-number">0</span>):<br>        <span class="hljs-comment">#Put image at 72 dpi</span><br>        w=info[<span class="hljs-string">'w'</span>]/self.k<br>        h=info[<span class="hljs-string">'h'</span>]/self.k<br>    <span class="hljs-keyword">elif</span>(w==<span class="hljs-number">0</span>):<br>        w=h*info[<span class="hljs-string">'w'</span>]/info[<span class="hljs-string">'h'</span>]<br>    <span class="hljs-keyword">elif</span>(h==<span class="hljs-number">0</span>):<br>        h=w*info[<span class="hljs-string">'h'</span>]/info[<span class="hljs-string">'w'</span>]<br>    <span class="hljs-comment"># Flowing mode</span><br>    <span class="hljs-keyword">if</span> y <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> (self.y + h &gt; self.page_break_trigger <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> self.in_footer <span class="hljs-keyword">and</span> self.accept_page_break()):<br>            <span class="hljs-comment">#Automatic page break</span><br>            x = self.x<br>            self.add_page(self.cur_orientation)<br>            self.x = x<br>        y = self.y<br>        self.y += h<br>    <span class="hljs-keyword">if</span> x <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        x = self.x<br>    self._out(sprintf(<span class="hljs-string">'q %.2f 0 0 %.2f %.2f %.2f cm /I%d Do Q'</span>,w*self.k,h*self.k,x*self.k,(self.h-(y+h))*self.k,info[<span class="hljs-string">'i'</span>]))<br>    <span class="hljs-keyword">if</span>(link):<br>        self.link(x,y,w,h,link)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pyinstalleræ‰“åŒ…é—®é¢˜</title>
    <link href="/2021/09/29/project_tool/pyinstaller-spec-problem/"/>
    <url>/2021/09/29/project_tool/pyinstaller-spec-problem/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„è¿‡ç¨‹ä¸­çš„å‘ç‚¹ï¼Œè®°å½•ä¸€ä¸‹<br>å‚è€ƒå¤§ä½¬ï¼š<a href="https://blog.csdn.net/u012219045/article/details/115397646">https://blog.csdn.net/u012219045/article/details/115397646</a></p></blockquote><figure class="highlight vhdl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸å°‘é—®é¢˜ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹ã€‚åé¢é‡åˆ°ä¼šç»§ç»­æ›´æ–°ï¼<br><br><span class="hljs-number">1</span>. åœ¨<span class="hljs-number">64</span>ä¸‹å¯è¿è¡Œï¼Œä¸èƒ½åœ¨<span class="hljs-number">32</span>ä½ä¸‹è¿è¡Œ<br>   è§£å†³ï¼šåœ¨<span class="hljs-number">32</span>ä½ç³»ç»Ÿä¸‹æ‰“åŒ…ï¼Œå¯ä»¥å‚è€ƒ https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">115320619</span><br><br><span class="hljs-number">2</span>. RecursionError:maximum recursion depth<br>   è§£å†³ï¼šåœ¨xxx.specæ–‡ä»¶å¼€å§‹å¢åŠ ä¸¤è¡Œï¼š<br><br>    import sys<br>    sys.setrecursionlimit(<span class="hljs-number">5000</span>)<br>å†æ‰§è¡Œæ‰“åŒ…ï¼špyinstaller xxx.spec <br><br><span class="hljs-number">3</span>. UnicodeDecodeError:<span class="hljs-symbol">'utf</span>-<span class="hljs-number">8</span>' codec can<span class="hljs-symbol">'t</span> decode byte <span class="hljs-number">0</span>xce <span class="hljs-keyword">in</span> position <span class="hljs-number">122</span>:invalid continuation byte<br>   è§£å†³ï¼šåœ¨ä½ æ‰“åŒ…çš„å‘½ä»¤è¡Œä¸­å…ˆè¾“å…¥chcp <span class="hljs-number">65001</span> ç„¶åå†è¾“å…¥æ‰“åŒ…å‘½ä»¤ã€‚<br><br><span class="hljs-number">4</span>. ä½¿ç”¨äº†å¤šè¿›ç¨‹ multiprocessing æ¨¡å—<br>   è§£å†³ï¼šå¿…é¡»è°ƒç”¨ multiprocessing.freeze_support()ï¼Œç›´æ¥åœ¨â€œ<span class="hljs-keyword">if</span> __name__ == '__main__'â€ä¹‹åè°ƒç”¨<br><br><span class="hljs-number">5</span>. æ‰“åŒ…PyQt5é—ªé€€<br>   åŸå› ï¼šå¯èƒ½æœªæ‰¾åˆ°æŸä¸ªæ–‡ä»¶<br>   è§£å†³åŠæ³•ï¼š<br>        <span class="hljs-number">1</span>. æŠŠéœ€è¦è¯»å–çš„æ–‡ä»¶åŠå…¶å…¶ä»–èµ„æº éƒ½æ”¾åˆ°distä¸­ã€‚<br>        <span class="hljs-number">2</span>. æ‰“åŒ…æˆexeçš„è¯ï¼Œéœ€ä½¿ç”¨ <span class="hljs-comment">--add-data é™„åŠ ã€‚å¯å‚è€ƒï¼šhttps://blog.csdn.net/u012219045/article/details/114841287</span><br><br><span class="hljs-number">6</span>. <span class="hljs-literal">WARNING</span>:<span class="hljs-keyword">file</span> already exists but should <span class="hljs-keyword">not</span>ï¼š_C.cp37-win_amd64<br>   è§£å†³ï¼šæŠ¥é”™å†…å®¹å¯èƒ½ä¸åŒï¼Œä½†éƒ½æ˜¯xxxå·²å­˜åœ¨ï¼Œé—®é¢˜çš„åŸå› æ˜¯pyinstalleræ‰“åŒ…æ—¶å¤šæ‰“äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¼šæŠ¥å·²ç»å­˜åœ¨äº†ã€‚<br>   è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå¤šä½™çš„å»æ‰ã€‚åœ¨è‡ªåŠ¨ç”Ÿæˆçš„xxx.specä¸­ï¼Œåœ¨ a å’Œ PYZ ä¸­é—´æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå»æ‰å¤šä½™ä¾èµ–é¡¹<br><br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>        <span class="hljs-keyword">if</span> '_C.cp37-win_amd64' <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>            a.datas.remove(d)<br>            break<br><span class="hljs-number">7</span>. Hidden import <span class="hljs-string">"xxx"</span>  <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.markers"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.py2_warn"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"MySQLdb"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"sqlalchemy.sql.functions.func"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"mx.DateTime"</span> <span class="hljs-keyword">not</span> found!<br>    è§£å†³ï¼š hiddenimports=[<span class="hljs-symbol">'pkg_resources</span>.markers', <span class="hljs-symbol">'pkg_resources</span>.py2_warn', '...']<br><br><span class="hljs-number">8</span>.  æ‰“åŒ…çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤š<span class="hljs-literal">warning</span>ï¼šlib <span class="hljs-keyword">not</span> found...dll, åŸå› æ˜¯pyinstaller æ²¡æœ‰åŠæ³•è¯†åˆ«åˆ°è¿™äº›dll<br>    è§£å†³åŠæ³•ï¼šcopy <span class="hljs-literal">warning</span>ä¸­ä¸€äº›dllæ–‡ä»¶çš„åå­—ï¼Œå†ç”µè„‘ä¸­æœç´¢åˆ°ä»–ä»¬çš„è·¯å¾„ï¼æ·»åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œé¢<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90rtl.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgc14.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:torch_python.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\lib\site-packages\torch\_C.cp37-win_amd64.pyd<br><br><span class="hljs-number">9</span>. åˆ‡æ¢äº†è™šæ‹Ÿç¯å¢ƒæ‰“åŒ…ï¼ŒæŠ¥DLLæ— æ³•å¯¼å…¥ï¼Œå®é™…æ˜¯æ‰“åŒ…æ—¶è¿˜åœ¨ä½¿ç”¨æ—§çš„è™šæ‹Ÿç¯å¢ƒ<br>    è§£å†³ï¼š æ‰“åŒ…æ—¶æŒ‡å®šè™šæ‹Ÿç¯å¢ƒï¼š-pã€‚å¯å‚è€ƒï¼š https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">113612475</span><br><br><span class="hljs-number">10</span>. DecodeEncodeError<br>    è§£å†³ï¼š æ£€æŸ¥æ‰§è¡Œè·¯å¾„ä¸­æ˜¯å¦æœ‰ä¸­æ–‡ï¼ŒéAcsiiç ï¼Œæ¢æˆè‹±æ–‡è·¯å¾„ã€‚Pythonæ–‡ä»¶å¼€å¤´åŠ  #-*-coding:utf-<span class="hljs-number">8</span>-*-<br><br><span class="hljs-number">11</span>. Pyqt5 æ‰“åŒ…åä¼šå‡ºç°é”™è¯¯:<span class="hljs-string">"QThread:Destroyed while thread is still running"</span><br>    è§£å†³åŠæ³•<span class="hljs-number">1</span>ï¼šå¯åŠ¨QThreadä½¿ç”¨äº†start(), æ”¹ä¸ºrun() å¯è§£å†³ï¼Œä½†è¿™æ ·ä¼šå¡ä¸»UIçº¿ç¨‹<br>    è§£å†³åŠæ³•<span class="hljs-number">2</span>ï¼šä¾ç„¶ä½¿ç”¨start()ï¼Œå†è¿½åŠ ä¸€å¥ exec()ã€‚æ¨èè¿™æ ·ï¼<br><br><span class="hljs-number">12</span>. No module named <span class="hljs-symbol">'sklearn</span>.xx'<br>    <span class="hljs-number">43852</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_validation"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43854</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_tools"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43866</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.lgamma"</span> <span class="hljs-keyword">not</span> found!<br>    No module named <span class="hljs-symbol">'sklearn</span>.utils._cython_blas'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree._utils'<br>    è§£å†³ï¼šhiddenimports=[<span class="hljs-symbol">'sklearn</span>', <span class="hljs-symbol">'sklearn</span>.tree', <span class="hljs-symbol">'sklearn</span>.tree._utils', <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree',<br>                       <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs', <span class="hljs-symbol">'sklearn</span>.utils._cython_blas',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_validation',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_tools', <span class="hljs-symbol">'sklearn</span>.utils.lgamma']<br><span class="hljs-number">13</span>. No module named <span class="hljs-symbol">'scipy</span>.special.cython_special'<br>   è§£å†³: ä½¿ç”¨scipy==<span class="hljs-number">1.4</span>.<span class="hljs-number">1</span> æˆ–è€… <span class="hljs-comment">--hidden-import scipy.special.cython_special</span><br><br><span class="hljs-number">14</span>. No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory: <span class="hljs-symbol">'xxx\\</span>librosa\\util\\example_data\\registry.txt'<br>   è§£å†³: ä½¿ç”¨<span class="hljs-comment">--add-dataæˆ–è€…ç›´æ¥æ‹·è´librosaä¸‹çš„å¯¹åº”æ–‡ä»¶åˆ°distã€‚</span><br>   <br><span class="hljs-number">15</span>. fatal <span class="hljs-literal">error</span>:zmq.h:No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory<br>    è§£å†³: sudo apt install libzmq3-dev<br><br><span class="hljs-number">16</span>. <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_detectron_ops_gpu.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorch==<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span> torchvision==<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> cudatoolkit=<span class="hljs-number">10.1</span>ï¼Œåæ¥æ›´æ¢é«˜ç‰ˆæœ¬torch1.<span class="hljs-number">7.0</span>è§£å†³ï¼<br>    # pip install torch===<span class="hljs-number">1.7</span>.<span class="hljs-number">0</span>+cu110 torchvision===<span class="hljs-number">0.8</span>.<span class="hljs-number">1</span>+cu110 torchaudio===<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> -f https://download.pytorch.org/whl/torch_stable.html<br><br><span class="hljs-number">17</span>. unhandled exception <br>    <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_nvrtc.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorché™ç‰ˆæœ¬åˆ°<span class="hljs-number">1.8</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>pyinstaller</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®æ‰“åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨specæ–‡ä»¶æ‰“åŒ…</title>
    <link href="/2021/09/28/project_tool/spec/"/>
    <url>/2021/09/28/project_tool/spec/</url>
    
    <content type="html"><![CDATA[<blockquote><p>pyinstalleræ‰“åŒ…æ–¹å¼ä¸€èˆ¬å¯ä»¥åˆ†ä¸º<strong>ç›´æ¥è¾“å…¥æŒ‡ä»¤</strong>å’Œ<strong>åˆ©ç”¨specæ–‡ä»¶</strong>è¿›è¡Œæ‰“åŒ…ä¸¤ç§æ–¹å¼ï¼Œç›´æ¥è¾“å…¥æŒ‡ä»¤å°±æ˜¯æ ¹æ®æŒ‡ä»¤ç”Ÿæˆspecæ–‡ä»¶ï¼Œå†æ ¹æ®specæ–‡ä»¶çš„å†…å®¹è¿›è¡Œæ‰“åŒ…æ“ä½œï¼Œå› æ­¤specæ–‡ä»¶å°±æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨æ­¤å¯¹å…¶å†…å®¹çš„ç›¸å…³é…ç½®è¿›è¡Œå½’çº³ã€‚</p></blockquote><h3 id="specæ–‡ä»¶å‚æ•°">specæ–‡ä»¶å‚æ•°</h3><p>specæ–‡ä»¶å‚æ•°ï¼šaï¼Œpyzï¼Œexeï¼Œcollï¼Œblock_cipher;</p><table><thead><tr><th style="text-align:center">å˜é‡</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:left">Analysisç±»çš„å®ä¾‹,è¦æ±‚ä¼ å…¥å„ç§è„šæœ¬ç”¨äºåˆ†æç¨‹åºçš„å¯¼å…¥å’Œä¾èµ–ï¼Œaä¸­çš„å†…å®¹ä¸»è¦åŒ…æ‹¬å››éƒ¨åˆ†ï¼šscriptsï¼šå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„pythonè„šæœ¬ï¼›pureï¼Œç¨‹åºä»£ç æ–‡ä»¶ä¸­çš„çº¯pythonæ¨¡å—ï¼›binariesï¼šç¨‹åºä»£ç æ–‡ä»¶ä¸­éœ€è¦çš„épythonæ¨¡å—ï¼ŒåŒ…æ‹¬add-binaryå‚æ•°æŒ‡å®šçš„å†…å®¹ï¼›datasï¼šéäºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…æ‹¬add-dataå‚æ•°æŒ‡å®šçš„å†…å®¹</td></tr><tr><td style="text-align:center">pyz</td><td style="text-align:left">pyzçš„å®ä¾‹ï¼Œæ˜¯ä¸€ä¸ª.pyzæ–‡ä»¶ï¼ŒåŒ…å«äº†æ‰€æœ‰pureçš„æ‰€æœ‰pythonæ¨¡å—</td></tr><tr><td style="text-align:center">exe</td><td style="text-align:left">exeç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥å¤„ç†Analysiså’ŒPYZçš„ç»“æœã€‚ä¹Ÿæ˜¯ç”¨æ¥ç”Ÿæˆæœ€åçš„exeå¯æ‰§è¡Œç¨‹åº</td></tr><tr><td style="text-align:center">coll</td><td style="text-align:left">collectç±»çš„å®ä¾‹ï¼Œç”¨äºåˆ›å»ºè¾“å‡ºç›®å½•ï¼Œåœ¨-Fæ¨¡å¼ï¼ˆå•ä¸€exeç¨‹åºï¼‰ä¸‹ï¼Œæ˜¯æ²¡æœ‰collectå®ä¾‹çš„ï¼Œå¹¶ä¸”æ‰€æœ‰è„šæœ¬ï¼Œæ¨¡å—å’ŒäºŒè¿›åˆ¶æ–‡ä»¶éƒ½åŒ…å«åœ¨æœ€ç»ˆç”Ÿæˆçš„exeæ–‡ä»¶ä¸­</td></tr><tr><td style="text-align:center">block_cipher</td><td style="text-align:left">åŠ å¯†å¯†é’¥</td></tr></tbody></table><p>ä»¥ä¸Šå†…å®¹ä¸­ä¿®æ”¹æ¯”è¾ƒå¤šçš„æ˜¯a,exeçš„å†…å®¹ï¼Œcollå’ŒpyzåŸºæœ¬ä¸Šæ²¡æœ‰é‡åˆ°éœ€è¦ä¿®æ”¹çš„æƒ…å†µã€‚</p><h3 id="å‚æ•°aï¼Œexeçš„è¯´æ˜">å‚æ•°aï¼Œexeçš„è¯´æ˜</h3><p>ä¸‹é¢å¯¹aå’Œexeå‚æ•°å†…å®¹è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼š</p><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">å­å‚æ•°</th><th style="text-align:left">å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">scripts</td><td style="text-align:left">ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»–æ˜¯ä¸€ä¸ªè„šæœ¬åˆ—è¡¨ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªpyè„šæœ¬ï¼Œæ•ˆæœä¸å‘½ä»¤è¡Œä¸­æŒ‡å®šå¤šä¸ªpyæ–‡ä»¶ç›¸åŒï¼Œæ¯”å¦‚è¯´â€œpyinstaller <a href="http://XXX1.py">XXX1.py</a> <a href="http://XXX2.py">XXX2.py</a>â€ï¼Œpyinstallerä¼šä¾æ¬¡åˆ†ææ‰§è¡Œï¼Œå¹¶ä¸”æŠŠç¬¬ä¸€ä¸ªpyæ–‡ä»¶çš„åç§°ä½œä¸ºspecå’Œdistä¸‹çš„æ–‡ä»¶å¤¹åŠç¨‹åºåç§°</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">pathex</td><td style="text-align:left">é»˜è®¤æœ‰ä¸€ä¸ªspecç›®å½•ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€äº›æ¨¡å—ä¸åœ¨è¯¥é¡¹ç›®è·¯å¾„ä¸‹çš„æ—¶å€™ï¼Œå¯ä»¥å°†ä½¿ç”¨åˆ°çš„æ¨¡å—è·¯å¾„æ·»åŠ åˆ°pathexå˜é‡ä¸­ï¼Œç›¸å½“äºâ€œ-p DIR/-paths DIRâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">datas</td><td style="text-align:left">ä½œç”¨æ˜¯å°†æœ¬åœ°æ–‡ä»¶æ‰“åŒ…æ—¶æ‹·è´åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚datasæ˜¯ä¸€ä¸ªå…ƒç´ ä¸ºå…ƒç»„çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œéƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•°æ®æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œå…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºè¿è¡Œæ—¶è¿™äº›æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼šdatas = [(â€˜./src/a.txtâ€™,â€˜./dstâ€™)]è¡¨ç¤ºæ‰“åŒ…æ—¶å°†â€™./src/a.txtâ€™æ–‡ä»¶æ·»åŠ åˆ°ç›¸å¯¹exeç›®å½•å…ˆçš„distç›®å½•ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦datas = [(â€˜./myfile/*.mp3â€™,â€˜sfxâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„æ‰€æœ‰mp3æ–‡ä»¶éƒ½copyåˆ°sfxæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼šdatas = [(â€˜./myfile/dataâ€™,â€˜dataâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„dataæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½copyåˆ°dataæ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒå‘½ä»¤â€œ-add-dataâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">binaries</td><td style="text-align:left">æ·»åŠ äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®šä¹‰æ–¹å¼ä¸dataså‚æ•°ä¸€æ ·ï¼ŒåŒå‘½ä»¤â€œ-add-binaryâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hiddenimports</td><td style="text-align:left">æŒ‡å®šè„šæœ¬ä¸­éœ€è¦éšå¼å¯¼å…¥çš„æ¨¡å—ï¼Œæ¯”å¦‚åœ¨importã€imp.find_module()ã€execã€evalç­‰è¯­å¥ä¸­å¯¼å…¥æ¨¡å—ï¼Œè¿™äº›æ¨¡å—PyInstalleræ˜¯æ‰¾ä¸åˆ°çš„ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“hidden-import MODULENAME/â€“hiddenimport MODULENAMEâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hookspath</td><td style="text-align:left">æŒ‡å®šé¢å¤–çš„hookæ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯pyæ–‡ä»¶ï¼‰çš„æŸ¥æ‰¾è·¯å¾„ï¼Œè¿™äº›æ–‡ä»¶çš„ä½œç”¨æ˜¯åœ¨pyinstallerè¿è¡Œæ—¶æ”¹å˜ä¸€äº›pythonæˆ–è€…å…¶ä»–åº“åŸæœ‰çš„å‡½æ•°æˆ–è€…å˜é‡çš„æ‰§è¡Œé€»è¾‘ï¼ˆå¹¶ä¸ä¼šæ”¹å˜è¿™äº›åº“æœ¬èº«çš„ä»£ç ï¼‰ï¼Œä»¥ä¾¿èƒ½é¡ºåˆ©çš„æ‰“åŒ…å®Œæˆï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“additional-hooks-dir HOOKSPATHâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">runtime_hooks</td><td style="text-align:left">æŒ‡å®šè‡ªå®šä¹‰çš„è¿è¡Œhookæ–‡ä»¶è·¯å¾„ï¼ˆå¯ä»¥æ—¶pyæ–‡ä»¶ï¼‰ï¼Œåœ¨æ‰“åŒ…å¥½çš„exeç¨‹åºä¸­ï¼Œè¿è¡Œè¿™ä¸ªexeç¨‹åºæ—¶ï¼ŒæŒ‡å®šçš„hookæ–‡ä»¶ä¼šåœ¨æ‰€æœ‰ä»£ç å’Œæ¨¡å—ä¹‹å‰è¿è¡Œï¼ŒåŒ…æ‹¬mainæ–‡ä»¶ï¼Œä»¥æ»¡è¶³ä¸€äº›è¿è¡Œç¯å¢ƒçš„ç‰¹æ®Šè¦æ±‚ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼ŒåŒå‘½ä»¤â€œ-runtime-hook RUNTIME_HOOKSâ€.</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">excludes</td><td style="text-align:left">æŒ‡å®šå¯ä»¥è¢«å¿½ç•¥çš„å¯é€‰çš„æ¨¡å—æˆ–åŒ…ï¼Œå› ä¸ºæŸäº›æ¨¡å—åªæ˜¯PyInstalleræ ¹æ®è‡ªèº«çš„é€»è¾‘å»æŸ¥æ‰¾çš„ï¼Œè¿™äº›æ¨¡å—å¯¹äºexeç¨‹åºæœ¬èº«å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯åœ¨æ—¥å¿—ä¸­è¿˜æ˜¯ä¼šæç¤ºâ€œmodule not foundâ€ï¼Œè¿™ç§æ—¥å¿—å¯ä»¥ä¸ç”¨ç®¡ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªå‚æ•°é€‰é¡¹æ¥æŒ‡å®šä¸ç”¨å¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“exclude-module EXCLUDESâ€ã€‚</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">console</td><td style="text-align:left">è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ŒåŒå‘½ä»¤ â€œ-W/-câ€</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">icon</td><td style="text-align:left">è®¾ç½®ç¨‹åºå›¾æ ‡ï¼Œé»˜è®¤specæ˜¯æ²¡æœ‰å›¾æ ‡çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œå‚æ•°å€¼å°±æ˜¯å›¾ç‰‡è·¯å¾„çš„å­—ç¬¦ä¸²ï¼ŒåŒå‘½ä»¤â€œ-i/-iconâ€</td></tr></tbody></table><h3 id="æˆ‘çš„è®°å½•">æˆ‘çš„è®°å½•</h3><p>åœ¨æ­¤è®°å½•ä¸€ä¸‹detectuiçš„specæ–‡ä»¶å‘¢~~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- mode: python ; coding: utf-8 -*-</span><br><br><br>block_cipher = <span class="hljs-literal">None</span><br><br><br>a = Analysis([<span class="hljs-string">'detectui.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\torch_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\autoanchor.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\datasets.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\general.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\google_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\metrics.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\plots.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\common.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\experimental.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\yolo.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\detectInfo.py'</span>,<br>              ],<br>             pathex=[<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\scipy\\.libs'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\torch\\lib'</span>,<br>              ],<br>             binaries=[],<br>             datas=[<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\weights\\best.pt'</span>,<span class="hljs-string">'.\\weights'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\*.yaml'</span>,<span class="hljs-string">'.\\models'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\hub\\*.yaml'</span>,<span class="hljs-string">'.\\models\\hub'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\icon.jpg'</span>,<span class="hljs-string">'.'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__pycache__\\torch_utils.pyc'</span>,<span class="hljs-string">'.\\utils'</span>),<br>             ],<br>             hiddenimports=[<span class="hljs-string">'pkg_resources.py2_warn'</span>,<span class="hljs-string">'pkg_resources.markers'</span>],<br>             hookspath=[],<br>             hooksconfig={},<br>             runtime_hooks=[],<br>             excludes=[],<br>             win_no_prefer_redirects=<span class="hljs-literal">False</span>,<br>             win_private_assemblies=<span class="hljs-literal">False</span>,<br>             cipher=block_cipher,<br>             noarchive=<span class="hljs-literal">False</span>)<br><span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">'_C.cp38-win_amd64.pyd'</span> <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>    a.datas.remove(d)<br>    <span class="hljs-keyword">break</span><br>pyz = PYZ(a.pure, a.zipped_data,<br>             cipher=block_cipher)<br><br>exe = EXE(pyz,<br>          a.scripts,<br>          [],<br>          exclude_binaries=<span class="hljs-literal">True</span>,<br>          name=<span class="hljs-string">'detectui'</span>,<br>          debug=<span class="hljs-literal">False</span>,<br>          bootloader_ignore_signals=<span class="hljs-literal">False</span>,<br>          strip=<span class="hljs-literal">False</span>,<br>          upx=<span class="hljs-literal">True</span>,<br>          console=<span class="hljs-literal">False</span>,<br>          icon=<span class="hljs-string">'icon.ico'</span>)<br>coll = COLLECT(exe,<br>               a.binaries,<br>               a.zipfiles,<br>               a.datas,<br>               strip=<span class="hljs-literal">False</span>,<br>               upx=<span class="hljs-literal">True</span>,<br>               name=<span class="hljs-string">'detectui'</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>pyinstaller</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®æ‰“åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pyinstalleræ‰“åŒ…exe</title>
    <link href="/2021/09/26/project_tool/pyinstaller/"/>
    <url>/2021/09/26/project_tool/pyinstaller/</url>
    
    <content type="html"><![CDATA[<blockquote><p>pyinstallerçš„ä½œç”¨æ˜¯å¯ä»¥å°†pythonåº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›¸å¯¹ä¸åŒç±»å·¥å…·è€Œè¨€ï¼Œå…¶ä¼˜åŠ¿åœ¨äºå¯ä»¥å’Œpythoné…åˆä½¿ç”¨ï¼Œæ„å»ºè¾ƒå°çš„å¯æ‰§è¡Œæ–‡ä»¶å¹¶ä¸”å®Œå…¨å¤šå¹³å°ï¼Œå®Œå…¨å…¼å®¹æ€§ã€‚</p></blockquote><blockquote><p>pyinstallerçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å…¼å®¹ï¼Œå› æ­¤åœ¨ä½¿ç”¨pyinstallerä¼šå°†æ‰€æœ‰çš„å¤–éƒ¨åŒ…ç»§æ‰¿åœ¨pyinstalleræœ¬èº«ä¸­ã€‚</p></blockquote><h2 id="å®‰è£…">å®‰è£…</h2><p>ç›´æ¥ä»pypiå®‰è£…pyinstallerï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pyinstaller<br></code></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨è‡ªå·±çš„ç¨‹åºç›®å½•ä¸­è¿è¡Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller yourprogram.py<br></code></pre></td></tr></tbody></table></figure><p>å°±ä¼šç”Ÿæˆdistæ–‡ä»¶å¤¹ï¼Œåœ¨distæ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„exeæ–‡ä»¶ã€‚</p><h2 id="å‘½ä»¤é€‰é¡¹è¯´æ˜">å‘½ä»¤é€‰é¡¹è¯´æ˜</h2><p>PyInstaller æ”¯æŒå¦‚è¡¨æ‰€ç¤ºçš„å¸¸ç”¨é€‰é¡¹ã€‚</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-hï¼Œâ€“help</td><td style="text-align:center">æŸ¥çœ‹è¯¥æ¨¡å—çš„å¸®åŠ©ä¿¡æ¯</td></tr><tr><td style="text-align:center">-Fï¼Œ-onefile</td><td style="text-align:center">äº§ç”Ÿå•ä¸ªçš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-Dï¼Œâ€“onedir</td><td style="text-align:center">äº§ç”Ÿä¸€ä¸ªç›®å½•ï¼ˆåŒ…å«å¤šä¸ªæ–‡ä»¶ï¼‰ä½œä¸ºå¯æ‰§è¡Œç¨‹åºï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td style="text-align:center">-aï¼Œâ€“ascii</td><td style="text-align:center">ä¸åŒ…å« Unicode å­—ç¬¦é›†æ”¯æŒ</td></tr><tr><td style="text-align:center">-dï¼Œâ€“debug</td><td style="text-align:center">äº§ç”Ÿ debug ç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-wï¼Œâ€“windowedï¼Œâ€“noconsolc</td><td style="text-align:center">æŒ‡å®šç¨‹åºè¿è¡Œæ—¶ä¸æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-cï¼Œâ€“nowindowedï¼Œâ€“console</td><td style="text-align:center">æŒ‡å®šä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿è¡Œç¨‹åºï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-o DIRï¼Œâ€“out=DIR</td><td style="text-align:center">æŒ‡å®š spec æ–‡ä»¶çš„ç”Ÿæˆç›®å½•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•æ¥ç”Ÿæˆ spec æ–‡ä»¶</td></tr><tr><td style="text-align:center">-p DIRï¼Œâ€“path=DIR</td><td style="text-align:center">è®¾ç½® Python å¯¼å…¥æ¨¡å—çš„è·¯å¾„ï¼ˆå’Œè®¾ç½® PYTHONPATH ç¯å¢ƒå˜é‡çš„ä½œç”¨ç›¸ä¼¼ï¼‰ã€‚ä¹Ÿå¯ä½¿ç”¨è·¯å¾„åˆ†éš”ç¬¦ï¼ˆWindows ä½¿ç”¨åˆ†å·ï¼ŒLinux ä½¿ç”¨å†’å·ï¼‰æ¥åˆ†éš”å¤šä¸ªè·¯å¾„</td></tr><tr><td style="text-align:center">-n NAMEï¼Œâ€“name=NAME</td><td style="text-align:center">æŒ‡å®šé¡¹ç›®ï¼ˆäº§ç”Ÿçš„ specï¼‰åå­—ã€‚å¦‚æœçœç•¥è¯¥é€‰é¡¹ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªè„šæœ¬çš„ä¸»æ–‡ä»¶åå°†ä½œä¸º spec çš„åå­—</td></tr></tbody></table><p>åœ¨æ­¤è¡¨åˆ—å‡ºçš„åªæ˜¯ PyInstaller æ¨¡å—æ‰€æ”¯æŒçš„å¸¸ç”¨é€‰é¡¹ï¼Œå¦‚æœéœ€è¦äº†è§£ PyInstaller é€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™å¯é€šè¿‡ pyinstaller -h æˆ–è€…â€“helpæŸ¥çœ‹å¸®åŠ©</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller --<span class="hljs-built_in">help</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨pyinstaller">ä½¿ç”¨pyinstaller</h2><ul><li><p>æ‰“åŒ…æˆä¸€ä¸ªå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller -F &lt;options&gt; test.py<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶å¤¹</p><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">pyinstaller --onefile/-D <span class="hljs-symbol">&lt;options&gt;</span> test.<span class="hljs-keyword">py</span> ï¼ˆé»˜è®¤ï¼‰<br></code></pre></td></tr></tbody></table></figure></li></ul><p>é»˜è®¤æƒ…å†µä¸‹æ‰“åŒ…ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆdistå’Œbuildæ–‡ä»¶å¤¹ä»¥åŠ.specæ–‡ä»¶ï¼Œdistä¸­å³æ‰“åŒ…å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼Œbuildæ–‡ä»¶å¤¹ä¸‹ä¸ºæ„å»ºè¿‡ç¨‹ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œ.specä¸ºæ‰“åŒ…çš„é…ç½®æ–‡ä»¶ã€‚</p><h3 id="å„è‡ªçš„ä¼˜ç¼ºç‚¹">å„è‡ªçš„ä¼˜ç¼ºç‚¹</h3><ul><li><p>å¯åŠ¨æ—¶é—´</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶æ¯”æ–‡ä»¶å¤¹çš„å¯åŠ¨æ—¶é—´è¦é•¿å¾ˆå¤šï¼Œå› ä¸ºå½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦è§£å‹ç¨‹åºçš„ç¬¬ä¸‰æ–¹ä¾èµ–æ–‡ä»¶åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œä¼šè€—è´¹ä¸€å®šçš„ä¸å¿…è¦æ—¶é—´ã€‚</p></li><li><p>æ–‡ä»¶ç»“æ„</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å’Œå·¥ç¨‹ç›®å½•æ˜¯ä¸€æ ·çš„ï¼Œå…¶è·¯å¾„ä¸å·¥ç¨‹ç›®å½•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”Ÿæˆæ–‡ä»¶å¤¹å°±ä¸ä¸€æ ·äº†ï¼Œè‹¥ç¨‹åºä¸­åŒ…å«ç›¸å¯¹è·¯å¾„ï¼Œè¿™ä¸ªç›¸å¯¹è·¯å¾„æ˜¯åŸºäºè¯¥æ–‡ä»¶å¤¹ç›®å½•çš„ã€‚</p></li></ul><h2 id="specæ–‡ä»¶">specæ–‡ä»¶</h2><p>.specæ–‡ä»¶ç±»ä¼¼äºcmakeçš„.makefileæ–‡ä»¶ï¼Œéƒ½æ˜¯ç”¨äº<code>æ§åˆ¶ç¼–è¯‘æ„å»ºè¿‡ç¨‹</code>çš„é…ç½®æ–‡ä»¶ã€‚æ­£å¸¸ä½¿ç”¨å®é™…ä¸Šä¸éœ€è¦ç®¡specæ–‡ä»¶çš„ï¼Œä½†æ˜¯ä¸‹é¢å‡ ç§æƒ…å†µéœ€è¦ä¿®æ”¹specæ–‡ä»¶ï¼š</p><ul><li><p>éœ€è¦æ‰“åŒ…èµ„æºæ–‡ä»¶</p></li><li><p>éœ€è¦includeä¸€äº›pyinstallerä¸çŸ¥é“çš„run-timeåº“</p></li><li><p>ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ run-timeé€‰é¡¹</p></li><li><p>å¤šç¨‹åºæ‰“åŒ…</p></li></ul><p>åé¢å¯ä»¥ç›´æ¥é€šè¿‡.specæ–‡ä»¶æ¥æ‰“åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller &lt;options&gt; test.spec<br></code></pre></td></tr></tbody></table></figure><p>å½“é€šè¿‡specæ–‡ä»¶æ¥ç”Ÿæˆappæ–‡ä»¶æ—¶åªæœ‰ä¸‹é¢å‚æ•°æ˜¯æœ‰ç”¨çš„ï¼š</p><ul><li><code>-upx-dir</code>  Path to UPX utility (default: search the execution path)</li><li><code>-distpath</code>   Where to put the bundled app (default: .\dist)</li><li><code>-y â€“noconfirm</code>  Replace output directory (default: SPECPATH\dist\SPECNAME) without asking for confirmation</li><li><code>-a â€“ascii</code> Do not include unicode encoding support (default: included if available)</li></ul>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>pyinstaller</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¡¹ç›®æ‰“åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer30 åŒ…å«minå‡½æ•°çš„æ ˆ</title>
    <link href="/2021/09/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer30/"/>
    <url>/2021/09/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer30/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åŒ…å«minå‡½æ•°çš„æ ˆ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight pf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pf">M<span class="hljs-keyword">in</span>Stack <span class="hljs-keyword">min</span>Stack = new M<span class="hljs-keyword">in</span>Stack();<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">2</span>);<br><span class="hljs-keyword">min</span>Stack.push(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">3</span>);<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">3</span>.<br><span class="hljs-keyword">min</span>Stack.pop();<br><span class="hljs-keyword">min</span>Stack.top();      --&gt; è¿”å› <span class="hljs-number">0</span>.<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">2</span>.<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>å„å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ 20000 æ¬¡</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>emmè¿™æ ·å­ä½¿ç”¨minå‡½æ•°ï¼Œä¸å¤ªç§‘å­¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.stack = []<br>        self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        <span class="hljs-keyword">if</span>(self.minnum&gt;x): self.minnum = x<br>        self.stack.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        item = self.top()<br>        self.stack.pop()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(self.stack) == <span class="hljs-number">0</span>): <br>            self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br>        <span class="hljs-keyword">elif</span>(item==self.minnum):<br>            self.minnum = <span class="hljs-built_in">min</span>(self.stack)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.stack[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.minnum<br><br><span class="hljs-comment"># Your MinStack object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = MinStack()</span><br><span class="hljs-comment"># obj.push(x)</span><br><span class="hljs-comment"># obj.pop()</span><br><span class="hljs-comment"># param_3 = obj.top()</span><br><span class="hljs-comment"># param_4 = obj.min()</span><br></code></pre></td></tr></tbody></table></figure><p>-å®é™…ä¸Šåº”è¯¥åˆ›å»ºä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªä½œä¸ºæ™®é€šçš„æ ˆAè®°å½•æ•°æ®ï¼Œå¦ä¸€ä¸ªBç”¨äºè¾…åŠ©æ ˆminçš„å®ç°ï¼›ä½¿å¾—Aä¸­çš„æœ€å°å…ƒç´ å§‹ç»ˆå¯¹åº”äºBçš„æ ˆé¡¶å…ƒç´ ã€‚<strong>æ ˆBçš„ä¸»è¦ç›®çš„æ˜¯è®°å½•æœ€å°å€¼ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯éœ€è¦æ‰€æœ‰å®Œæ•´çš„æ•°æ®ã€‚</strong></p><ul><li>åœ¨è°ƒç”¨pushå‡½æ•°æ—¶ï¼Œæ³¨æ„è¦ç»´æŠ¤å¥½æ ˆBï¼Œä¹Ÿå°±æ˜¯è¯´åˆ¤æ–­xæ—¶å°äºç­‰äºæ ˆé¡¶å…ƒç´ ï¼Œæ‰å‹å…¥æ ˆBï¼›</li><li>åœ¨è°ƒç”¨popå‡½æ•°æ—¶ï¼Œè¦ä¿æŒAï¼ŒBå…ƒç´ çš„ä¸€è‡´æ€§ï¼Œåœ¨Aä¸­popçš„å…ƒç´ æ˜¯Bçš„æ ˆé¡¶å…ƒç´ å°±è¦åŒæ­¥åˆ é™¤æ‰æ ˆBçš„æ ˆé¡¶å…ƒç´ ï¼›</li></ul><p>è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯åœ¨åˆ é™¤æ‰Aå’ŒBçš„æ ˆé¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰ä¹‹åï¼ŒBçš„æ ˆé¡¶å…ƒç´ ä¾ç„¶è¿˜æ˜¯Açš„æœ€å°å€¼ã€‚</p><p>å—¯å‰å®³~ o(<em>ï¿£â–½ï¿£</em>)o</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.A,self.B = [],[]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>self.A.append(x)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.B <span class="hljs-keyword">or</span> self.B[-<span class="hljs-number">1</span>]&gt;=x: <span class="hljs-comment">#æ³¨æ„æ˜¯å¤§äºç­‰äºï¼Œå› ä¸ºéœ€è¦è®°å½•é¿å…åç»­å¼¹å‡ºå¯¼è‡´å…ƒç´ ä¸åŒæ­¥</span><br>            self.B.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br><span class="hljs-keyword">if</span>(self.A.pop() == self.B[-<span class="hljs-number">1</span>]): <span class="hljs-comment">#å¦‚æœæ˜¯ç›¸åŒå…ƒç´ å°±æ³¨æ„åŒæ­¥åˆ é™¤</span><br>            self.B.pop()<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.A[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.B[-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer35 å¤æ‚é“¾è¡¨çš„å¤åˆ¶</title>
    <link href="/2021/09/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer35/"/>
    <url>/2021/09/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer35/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¤æ‚é“¾è¡¨çš„å¤åˆ¶</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç° copyRandomList å‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª random æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[1,1],[2,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,1],[2,1]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br>è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-10000 &lt;= Node.val &lt;= 10000</li><li>Node.random ä¸ºç©ºï¼ˆnullï¼‰æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚</li><li>èŠ‚ç‚¹æ•°ç›®ä¸è¶…è¿‡ 1000 ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é€šå¸¸æ™®é€šçš„é“¾è¡¨å¤åˆ¶åªéœ€è¦éå†é“¾è¡¨ï¼Œæ¯è½®æ–°å»ºç«‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æ·»åŠ å‰é©±èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘å³å¯ï¼Œä½†æ˜¯æœ¬é¢˜çš„èŠ‚ç‚¹æ–°å¢äº†randomæŒ‡é’ˆï¼Œå› æ­¤éœ€è¦å¤„ç†randomæŒ‡é’ˆã€‚</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>å“ˆå¸Œè¡¨</code></li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>æ‹¼æ¥+æ‹†åˆ†</code></li></ul><h4 id="å“ˆå¸Œè¡¨">å“ˆå¸Œè¡¨</h4><p>å…ˆæ„å»ºåŸé“¾è¡¨èŠ‚ç‚¹å’Œæ–°é“¾è¡¨èŠ‚ç‚¹çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨èŠ‚ç‚¹çš„nextå’Œrandomçš„å¼•ç”¨æŒ‡å‘ã€‚</p><p>è¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­—å…¸ï¼Œé”®å€¼å¯¹å°±æ˜¯ï¼ˆåŸèŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹ï¼‰ï¼Œç„¶åç›´æ¥åœ¨å­—å…¸ä¸­æ„å»ºï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>        dic = {}<br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur] = Node(cur.val)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur].<span class="hljs-built_in">next</span> = dic.get(cur.<span class="hljs-built_in">next</span>)<br>            dic[cur].random = dic.get(cur.random)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> dic[head]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>dict.get(key,default=None) keyæ˜¯å­—å…¸ä¸­è¦æŸ¥æ‰¾çš„é”®ï¼Œdefaultæ˜¯æŒ‡å®šé”®å€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›é»˜è®¤å€¼ï¼›</p></blockquote><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><h4 id="æ‹¼æ¥-æ‹†åˆ†">æ‹¼æ¥+æ‹†åˆ†</h4><p>æ„å»ºæ‹¼æ¥é“¾è¡¨<code>åŸèŠ‚ç‚¹1-&gt;æ–°èŠ‚ç‚¹1-&gt;åŸèŠ‚ç‚¹2-&gt;æ–°èŠ‚ç‚¹2-&gt;......</code>,è¿™æ—¶ï¼Œåœ¨è®¿é—®åŸèŠ‚ç‚¹çš„randomæ—¶å¯ä»¥æ‰¾åˆ°æ–°å¯¹åº”æ–°èŠ‚ç‚¹çš„randomçš„æŒ‡å‘èŠ‚ç‚¹ã€‚<br>å½“è®¿é—®<code>cur.random</code>æ—¶ï¼Œå¯¹åº”çš„æ–°èŠ‚ç‚¹<code>cur.next</code>çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ä¸º<code>cur.random.next</code>ï¼Œå°±å¯ä»¥è§£å†³randomçš„é—®é¢˜ï¼Œå†è¿›è¡Œæ‹†åˆ†é“¾è¡¨ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>cur = head<br><span class="hljs-comment">#å¤åˆ¶å„ä¸ªèŠ‚ç‚¹ï¼Œå¹¶æ„å»ºæ‹¼æ¥é“¾è¡¨</span><br><span class="hljs-keyword">while</span> cur:<br>tmp = Node(cur.val)<br>tmp.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span><br>cur.<span class="hljs-built_in">next</span> = tmp<br>cur = tmp.<span class="hljs-built_in">next</span><br><span class="hljs-comment">#æ„å»ºrandomæŒ‡å‘</span><br>cur = head<br><span class="hljs-keyword">while</span> cur:<br><span class="hljs-keyword">if</span> cur.random:<br>cur.<span class="hljs-built_in">next</span>.random = cur.random.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>        <span class="hljs-comment">#æ‹†åˆ†é“¾è¡¨</span><br>        cur = res = head.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span> cur.<span class="hljs-built_in">next</span>:<br>            cur.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éšæœºæ•°çš„æ€»ç»“</title>
    <link href="/2021/09/09/python/package_usage/random-summarize/"/>
    <url>/2021/09/09/python/package_usage/random-summarize/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç»å¸¸ä¼šç”¨åˆ°éšæœºæ•°ï¼Œåœ¨æ­¤ï¼Œå¯¹numpyåŒ…ä¸­çš„éšæœºæ•°ç›¸å…³å‡½æ•°è¿›è¡Œæ€»ç»“ã€‚</p></blockquote><ul><li><p>numpy.random.rand(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°å¯ä»¥æŒ‡å®šshapeï¼Œè¿”å›æœä»0~1å‡åŒ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.randint(low, high=None, size=None, dtype=â€˜lâ€™)<br>è¯¥å‡½æ•°è¿”å›éšæœºçš„æ•´æ•°ï¼Œå¯ä»¥æŒ‡å®šéšæœºæ•°ç»„èŒƒå›´å’Œå¤§å°ï¼›åœ¨è¿™é‡Œlowæ˜¯åŒ…å«ï¼Œhighä¸åŒ…å«;é»˜è®¤æ•°æ®ç±»å‹æ˜¯longã€‚</p></li><li><p>numpy.random.randn(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°ä¸randç±»ä¼¼ï¼Œä½†æ˜¯åˆ†å¸ƒä¸åŒï¼Œè¿™é‡Œæ˜¯è¿”å›æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.uniform(low=0.0, high=1.0, size=None)<br>è¯¥å‡½æ•°ä¸randintç±»ä¼¼ï¼Œå¯ä»¥æŒ‡å®šèŒƒå›´å’Œå¤§å°ï¼Œä½†æ˜¯è¿™é‡Œè¿”å›çš„éšæœºæ•°æœä»åŒºé—´çš„å‡åŒ€åˆ†å¸ƒã€‚</p></li><li><p>numpy.random.choice(a, size=None, replace=True, p=None)<br>è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ç»™å®šçš„æ•°æ®ç‚¹ä¸­ï¼ˆä¸€ç»´æ•°ç»„ï¼‰éšæœºä¸é‡å¤çš„æŠ½å–å¤§å°ä¸ºsizeçš„æ ·æœ¬æ•°æ®ã€‚</p></li><li><p>numpy.random.random_sample(size=None)<br>è¯¥å‡½æ•°æ˜¯åœ¨[0,1)çš„èŒƒå›´éšæœºè¿”å›æŒ‡å®šå¤§å°çš„æµ®ç‚¹æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸numpy.random.rand()ç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯éœ€è¦è¾“å…¥sizeï¼Œè€Œrandç›´æ¥è¾“å…¥ç»´åº¦å³å¯ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>package</category>
      
    </categories>
    
    
    <tags>
      
      <tag>numpy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è·å–ä¸¤ä¸ªå‘é‡è§’åº¦</title>
    <link href="/2021/09/08/img_process/getAngle/"/>
    <url>/2021/09/08/img_process/getAngle/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è·å–ä¸¤ä¸ªå‘é‡çš„å¤¹è§’</p></blockquote><p><img src="https://picture.mulindya.com/getAngle.jpg" alt=""></p><p>æ¯”å¦‚ABå‘é‡è¡¨ç¤ºä¸º[1,-3,5,-1],å‰ä¸¤ä½æ˜¯Açš„åæ ‡ï¼Œåä¸¤ä½æ˜¯Bçš„åæ ‡ã€‚</p><p>ç›´æ¥è®¡ç®—å‡ºæ¯ä¸ªå‘é‡ä¸xæ­£è½´çš„å¤¹è§’ï¼Œç„¶åç›¸å‡å³å¯ï¼›æ ¸å¿ƒçš„éƒ¨åˆ†ä½¿ç”¨atan2å‡½æ•°ï¼ˆatanå’Œatan2ä¼˜å…ˆä½¿ç”¨atan2ï¼‰ã€‚</p><blockquote><p>atanä¸atan2çš„åŒºåˆ«ï¼š<br>atan å’Œ atan2 éƒ½æ˜¯æ±‚åæ­£åˆ‡å‡½æ•°ï¼Œå¦‚ï¼šæœ‰ä¸¤ä¸ªç‚¹ point(x1,y1), å’Œ point(x2,y2);<br>é‚£ä¹ˆè¿™ä¸¤ä¸ªç‚¹å½¢æˆçš„æ–œç‡çš„è§’åº¦è®¡ç®—æ–¹æ³•åˆ†åˆ«æ˜¯ï¼š<br>float angle = atan( (y2-y1)/(x2-x1) ); æˆ– float angle = atan2( y2-y1, x2-x1 );<br>atan2 çš„ä¼˜ç‚¹åœ¨äºå¦‚æœ x2-x1ç­‰äº0 ä¾ç„¶å¯ä»¥è®¡ç®—ï¼Œä½†æ˜¯atanå‡½æ•°å°±ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ï¼›</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_angle</span>(<span class="hljs-params">vec1,vec2</span>):</span><br>    dx1 = vec1[<span class="hljs-number">2</span>] - vec1[<span class="hljs-number">0</span>]<br>    dy1 = vec1[<span class="hljs-number">3</span>] - vec1[<span class="hljs-number">1</span>]<br>    dx2 = vec2[<span class="hljs-number">2</span>] - vec2[<span class="hljs-number">0</span>]<br>    dy2 = vec2[<span class="hljs-number">3</span>] - vec2[<span class="hljs-number">1</span>]<br>    angle1 = math.atan2(dy1,dx1)*<span class="hljs-number">180</span>/math.pi <span class="hljs-comment">#atan2ç»“æœä¸ºå¼§åº¦åˆ¶(å¯ä»¥å¤„ç†90åº¦çš„æƒ…å†µ)</span><br>    angle2 = math.atan2(dy2,dx2)*<span class="hljs-number">180</span>/math.pi<br>    angle = <span class="hljs-built_in">abs</span>(angle1-angle2)<br>    <span class="hljs-keyword">if</span>(angle&gt;<span class="hljs-number">180</span>):angle = <span class="hljs-number">360</span>-angle<br>    <span class="hljs-keyword">return</span> angle<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å›¾åƒå¤„ç†ï¼Œè§’åº¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>YOLOv2</title>
    <link href="/2021/08/27/deep_learning/yolov2/"/>
    <url>/2021/08/27/deep_learning/yolov2/</url>
    
    <content type="html"><![CDATA[<h2 id="YOLOv2">YOLOv2</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡åœ°å€</strong>ï¼š<a href="https://arxiv.org/abs/1612.08242">https://arxiv.org/abs/1612.08242</a></p><p>Yolov2ä¸Yolov1åœ¨ä¿æŒé€Ÿåº¦çš„åŸºç¡€ä¸Šï¼Œå¯¹é¢„æµ‹æ•ˆæœçš„å‡†ç¡®åº¦ï¼Œè€—è´¹æ—¶é—´ï¼Œé²æ£’æ€§ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†æ”¹è¿›ï¼Œæ£€æµ‹èƒ½åŠ›æé«˜åˆ°9000ç§ä¸åŒå¯¹è±¡ã€‚æ–‡ç« æå‡ºäº†ä¸€ç§æ–°çš„<strong>è®­ç»ƒæ–¹æ³•â€“è”åˆè®­ç»ƒ</strong>æ–¹æ³•ã€‚è¿™ç§ç®—æ³•å¯ä»¥å°†ä¸¤ç§æ•°æ®é›†æ··åˆåˆ°ä¸€èµ·ï¼Œä½¿ç”¨ä¸€ç§åˆ†å±‚çš„è§‚ç‚¹è¿›è¡Œåˆ†ç±»ï¼Œç”¨å¤§å‹çš„åˆ†ç±»æ•°æ®é›†æ‰©å……æ£€æµ‹çš„æ•°æ®é›†ã€‚ä¹Ÿæˆä¸ºYOLO9000.</p><p>è”åˆè®­ç»ƒçš„æ€è·¯ï¼š<strong>åœ¨æ£€æµ‹æ•°æ®é›†å’Œåˆ†ç±»æ•°æ®é›†ä¸Šè®­ç»ƒç‰©ä½“æ£€æµ‹å™¨ï¼ˆObject Detectorsï¼‰ï¼Œç”¨æ£€æµ‹æ•°æ®é›†å­¦ä¹ ç‰©ä½“çš„å‡†ç¡®ä½ç½®ï¼Œç”¨åˆ†ç±»æ•°æ®é›†æ¥å¢åŠ åˆ†ç±»çš„ç±»åˆ«ä¸¤ã€‚æå‡å¥å£®æ€§ã€‚</strong></p><p>Yolo9000å°±æ˜¯ä½¿ç”¨è”åˆè®­ç»ƒçš„ç®—æ³•ï¼Œæ‹¥æœ‰æ¥è‡ªäºImagenetçš„9000ç§åˆ†ç±»ä¿¡æ¯ï¼Œç‰©ä½“æ£€æµ‹çš„éƒ¨åˆ†æ¥è‡ªäºCoCoçš„æ£€æµ‹æ•°æ®é›†ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov2 è®ºæ–‡ï¼šYOLO9000: Better, Faster, Stronger</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/YOLOv2.pdf" width="100%" height="650"></iframe></details><h3 id="æ”¹è¿›ç‚¹">æ”¹è¿›ç‚¹</h3><h4 id="BN-batch-normalization-æ‰¹é‡å½’ä¸€åŒ–">BN(batch normalization) æ‰¹é‡å½’ä¸€åŒ–</h4><p>BNå±‚æœ‰åŠ©äºè§£å†³åå‘ä¼ æ’­è¿‡ç¨‹çš„<strong>æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸</strong>çš„é—®é¢˜ï¼Œ<strong>é™ä½</strong>å¯¹è¶…å‚æ•°çš„<strong>æ•æ„Ÿæ€§</strong>ï¼ŒåŒæ—¶å¯¹batchå½’ä¸€åŒ–æ—¶ï¼Œèµ·åˆ°äº†ä¸€å®šçš„<strong>æ­£åˆ™åŒ–</strong>çš„æ•ˆæœï¼ˆå»æ‰çš„dropoutå±‚ï¼‰ã€‚é€šå¸¸ï¼Œåœ¨ç½‘ç»œçš„çº¿æ€§å˜æ¢ä¸æ¿€æ´»å‡½æ•°ä¹‹å‰å¢åŠ ä¸€ä¸ªBNå±‚ï¼ŒBNå±‚å¯ä»¥å°†å…¶ç‰¹å¾é‡å½’ä¸€åŒ–ä½¿å¾—å˜æ¢åçš„ç‰¹å¾å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œä»è€Œæ¯ä¸€æ‰¹è®­ç»ƒæ ·æœ¬éƒ½æœ‰ç±»ä¼¼çš„åˆ†å¸ƒã€‚åŒæ—¶è¿˜æœ‰ä¿®æ­£çš„å‚æ•°$\gamma,\beta$å¯ä»¥æ¢å¤åŸæœ‰ä¿¡æ¯ã€‚å®éªŒç»“æœmAPæå‡2.4%</p><p>ä¸€èˆ¬çš„å½’ä¸€åŒ–å…¬å¼ï¼š</p>$$\widehat x^{(k)} = \frac{x^{(k)}-E[x^{(k)}]}{\sqrt {Var[x^{(k)}]}} \\$$<p><img src="https://picture.mulindya.com/yolov2-pic1.png" alt=""></p><h4 id="High-resolution-classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰">High resolution classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰</h4><p>ç”±äºå¯¹è±¡æ£€æµ‹çš„æ ·æœ¬ç›¸å¯¹å›¾åƒåˆ†ç±»çš„è®­ç»ƒæ ·æœ¬è¦å°‘å¾—å¤šï¼Œåœ¨å¯¹è±¡æ£€æµ‹æ—¶æ¨¡å‹é€šå¸¸æ—¶å…ˆç”¨å›¾åƒåˆ†ç±»çš„æ ·æœ¬è®­ç»ƒå·ç§¯å±‚æå–å›¾åƒç‰¹å¾ï¼ˆè®­ç»ƒbackboneï¼‰ã€‚ä½†æ˜¯å›¾åƒåˆ†ç±»æ ·æœ¬çš„åˆ†è¾¨ç‡ä¸é«˜ï¼Œæ¯”å¦‚åœ¨yolov1ä¸­ï¼Œè®­ç»ƒé›†æ˜¯224*224çš„å›¾ç‰‡æ¥è®­ç»ƒå·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨è®­ç»ƒå¯¹è±¡æ£€æµ‹çš„æ¨¡å‹ä½¿ç”¨çš„æ˜¯448*448çš„å›¾ç‰‡ï¼Œè¿™æ ·çš„åˆ‡æ¢å¯¹æ¨¡å‹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚æ‰€ä»¥Yolo2åœ¨é‡‡ç”¨<strong>224*224å›¾åƒåˆ†ç±»æ¨¡å‹é¢„è®­ç»ƒä¹‹åå†é‡‡ç”¨448*448çš„é«˜åˆ†è¾¨ç‡æ ·æœ¬å¯¹åˆ†ç±»æ¨¡å‹è¿›è¡Œå¾®è°ƒ</strong>(10ä¸ªepoch)ï¼Œè¿™æ ·å†è®­ç»ƒå¯¹è±¡æ£€æµ‹æ¨¡å‹ä¹‹å‰ï¼Œç½‘ç»œç‰¹å¾å°±é€æ¸é€‚åº”448*448çš„åˆ†è¾¨ç‡ï¼Œç„¶åå†ä½¿ç”¨448*448çš„æ£€æµ‹æ ·æœ¬è¿›è¡Œå¯¹è±¡æ£€æµ‹æ¨¡å‹çš„è®­ç»ƒï¼Œä»¥ç¼“è§£äº†åˆ†è¾¨ç‡çªç„¶åˆ‡æ¢é€ æˆçš„å½±å“ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒmAPæå‡äº†3.7%ã€‚</p><h4 id="Convolution-with-anchor-boxes-ä½¿ç”¨å…ˆéªŒæ¡†">Convolution with anchor boxes(ä½¿ç”¨å…ˆéªŒæ¡†)</h4><p>Yolov1æ˜¯ä½¿ç”¨å…¨è¿æ¥å±‚ç›´æ¥é¢„æµ‹BBoxçš„åæ ‡å€¼ï¼ˆæ¯ä¸ªgridé¢„æµ‹kä¸ªBboxï¼‰ï¼ŒFaster R-CNNçš„æ–¹æ³•æ˜¯åªç”¨å·ç§¯å±‚å’Œregion proposal networkæ¥é¢„æµ‹é”šæ¡†çš„åç§»åº¦å’Œç½®ä¿¡åº¦ã€‚ä½†æ˜¯ä½œè€…å‘ç°é‡‡ç”¨Faster R-CNNçš„æ–¹æ³•æ¯”Yolov1çš„æ–¹æ³•æ›´åŠ ç®€ä¾¿ï¼Œè®©ç¥ç»ç½‘ç»œå­¦ä¹ èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚</p><p>å› æ­¤ï¼ŒYolov2ä¹Ÿå°è¯•äº†å…ˆéªŒæ¡†ï¼ˆanchorï¼‰ï¼Œåœ¨æ¯ä¸ªgridé¢„å…ˆè®¾å®šä¸€ç»„ä¸åŒå¤§å°ä¸åŒå®½é«˜æ¯”çš„è¾¹æ¡†ï¼Œæ¥è¦†ç›–æ•´ä¸ªå›¾åƒçš„ä¸åŒä½ç½®å’Œå¤šç§å°ºåº¦ï¼Œè¿™äº›å…ˆéªŒæ¡†ä½œä¸ºé¢„å®šä¹‰çš„å€™é€‰åŒºæ£€æµ‹æ¡†å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œä»¥åŠå¾®è°ƒè¾¹æ¡†çš„ä½ç½®ã€‚ä¹‹å‰yolov1å¹¶æ²¡æœ‰é‡‡ç”¨å…ˆéªŒæ¡†ï¼Œå¹¶ä¸”æ¯ä¸ªgridåªé¢„æµ‹ä¸¤ä¸ªbounding boxï¼Œæ•´ä¸ªå›¾åƒæœ‰98ä¸ªï¼Œyolov2å…¥è½¨æ¯ä¸ªgridé‡‡ç”¨9ä¸ªå…ˆéªŒæ¡†ï¼Œæ”¶ç¼©ç½‘ç»œè¿è¡Œåœ¨416*416çš„å›¾ç‰‡ï¼Œä¸€ä¸ªgridæœ‰32åƒç´ ï¼Œé‚£ä¹ˆæ€»å…±æœ‰13*13*9=1521ä¸ªå…ˆéªŒæ¡†ï¼Œæœ€ç»ˆå»æ‰äº†å…¨è¿æ¥å±‚ï¼Œé‡‡ç”¨anchor boxesæ¥é¢„æµ‹bounding boxesã€‚ç”±äºå›¾ç‰‡ä¸­çš„ç‰©ä½“éƒ½å€¾å‘äºå‡ºç°åœ¨å›¾ç‰‡çš„ä¸­å¿ƒä½ç½®ï¼Œç‰¹åˆ«æ˜¯é‚£ç§æ¯”è¾ƒå¤§çš„ç‰©ä½“ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå•ç‹¬ä½äºç‰©ä½“ä¸­å¿ƒçš„ä½ç½®ç”¨äºé¢„æµ‹è¿™äº›ç‰©ä½“ã€‚YOLOçš„å·ç§¯å±‚é‡‡ç”¨32è¿™ä¸ªå€¼æ¥ä¸‹é‡‡æ ·å›¾ç‰‡ï¼Œæ‰€ä»¥é€šè¿‡é€‰æ‹©416*416ç”¨ä½œè¾“å…¥å°ºå¯¸æœ€ç»ˆèƒ½è¾“å‡ºä¸€ä¸ª13*13çš„Feature Mapã€‚ä½¿ç”¨Anchor Boxä¼šè®©ç²¾ç¡®åº¦ç¨å¾®ä¸‹é™ï¼Œä½†ç”¨äº†å®ƒèƒ½è®©YOLOèƒ½é¢„æµ‹å‡ºå¤§äºä¸€åƒä¸ªæ¡†ï¼ŒåŒæ—¶recallè¾¾åˆ°88%ï¼ŒmAPè¾¾åˆ°69.2%ã€‚</p><h4 id="Dimension-clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰">Dimension clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰</h4><p>ä¹‹å‰Anchor Boxçš„å°ºå¯¸æ˜¯æ‰‹åŠ¨é€‰æ‹©çš„ï¼Œæ‰€ä»¥å°ºå¯¸è¿˜æœ‰ä¼˜åŒ–çš„ä½™åœ°ã€‚YOLO2å°è¯•ç»Ÿè®¡å‡ºæ›´ç¬¦åˆæ ·æœ¬ä¸­å¯¹è±¡å°ºå¯¸çš„å…ˆéªŒæ¡†ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç½‘ç»œå¾®è°ƒå…ˆéªŒæ¡†åˆ°å®é™…ä½ç½®çš„éš¾åº¦ã€‚YOLO2çš„åšæ³•æ˜¯å¯¹è®­ç»ƒé›†ä¸­æ ‡æ³¨çš„è¾¹æ¡†è¿›è¡ŒK-meanèšç±»åˆ†æï¼Œä»¥å¯»æ‰¾å°½å¯èƒ½åŒ¹é…æ ·æœ¬çš„è¾¹æ¡†å°ºå¯¸ã€‚</p><p>åœ¨ä½¿ç”¨Kmeansèšç±»åˆ†ææ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥é‡‡ç”¨çš„æ¬§æ°è·ç¦»åº¦é‡ï¼Œå› ä¸ºè¿™æ ·å¤§è¾¹æ¡†çš„è·ç¦»ä¼šç›¸å¯¹å°è¾¹æ¡†å¤§ï¼Œè¿™æ ·è¯¯å·®å°±å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨IOUçš„å½¢å¼ã€‚<br>$$<br>d(box,centroid) = 1-IOU(box,centroid)<br>$$<br>centroidæ˜¯èšç±»æ—¶è¢«é€‰ä½œä¸­å¿ƒçš„è¾¹æ¡†ï¼Œboxå°±æ˜¯å…¶å®ƒè¾¹æ¡†ï¼Œdå°±æ˜¯ä¸¤è€…é—´çš„â€œè·ç¦»â€ã€‚IOUè¶Šå¤§ï¼Œâ€œè·ç¦»â€è¶Šè¿‘ã€‚YOLO2ç»™å‡ºçš„èšç±»åˆ†æç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic2.png" alt=""></p><p>é€šè¿‡åˆ†æå®éªŒç»“æœï¼Œåœ¨modelå¤æ‚æ€§ä¸high recallä¹‹é—´æƒè¡¡ä¹‹åï¼Œé€‰æ‹©èšç±»åˆ†ç±»æ•°K=5ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic3.png" alt=""></p><p>è¯´æ˜ç”¨K-meansé€‰æ‹©Anchor Boxesæ—¶ï¼Œé€‰æ‹©å€¼ä¸º5æ—¶ï¼ŒAVG IOUçš„å€¼æ˜¯61ï¼Œè¿™ä¸ªå€¼è¦æ¯”ä¸ç”¨èšç±»çš„æ–¹æ³•çš„60.9è¦é«˜ã€‚é€‰æ‹©å€¼ä¸º9çš„æ—¶å€™ï¼ŒAVG IOUæ›´æœ‰æ˜¾è‘—æé«˜ã€‚æ€»ä¹‹å°±æ˜¯è¯´æ˜ç”¨èšç±»çš„æ–¹æ³•æ˜¯æœ‰æ•ˆæœçš„ã€‚</p><h4 id="Direct-location-predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰">Direct location predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰</h4><p>å€Ÿé‰´äºFaster RCNNçš„å…ˆéªŒæ¡†æ–¹æ³•ï¼Œåœ¨è®­ç»ƒçš„æ—©æœŸé˜¶æ®µï¼Œå…¶ä½ç½®é¢„æµ‹å®¹æ˜“ä¸ç¨³å®šã€‚å…¶ä½ç½®é¢„æµ‹å…¬å¼ä¸ºï¼š</p>$$x = (t_x*w_a)+x_a \\y = (t_y*h_a)+y_a$$<p>å…¶ä¸­ï¼Œ æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒï¼Œ $x_a,y_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„ä¸­å¿ƒç‚¹åæ ‡ï¼Œ $w_a,h_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„å®½å’Œé«˜ï¼Œ$t_x,t_y$ æ˜¯è¦å­¦ä¹ çš„å‚æ•°ã€‚æ³¨æ„ï¼ŒYOLOè®ºæ–‡ä¸­å†™çš„æ˜¯$x = (t_x*w_a)-x_a$ ï¼Œæ ¹æ®Faster RCNNï¼Œåº”è¯¥æ˜¯"+"ã€‚</p><p>ä½†æ˜¯$t_x,t_y$ ä¸åŠ çº¦æŸçš„è¿™ç§æ–¹å¼ï¼Œä¼šå¯¼è‡´é¢„æµ‹è¾¹æ¡†ä¸­å¿ƒä¼šå‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œå› æ­¤åœ¨æ—©æœŸè®­ç»ƒé˜¶æ®µä¸ç¨³å®šï¼Œæ–‡ç« å°†è¾¹æ¡†çš„ä¸­å¿ƒçº¦æŸåœ¨gridç½‘æ ¼å½“ä¸­ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic4.png" alt=""></p><p>å…¶ä¸­ï¼Œ $b_x,b_y,b_w,b_h$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ã€‚ $Pr(object)*IOU(b,object)$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ç½®ä¿¡åº¦ï¼Œåœ¨YOLO1æ˜¯ç›´æ¥é¢„æµ‹ç½®ä¿¡åº¦çš„å€¼ï¼Œè¿™é‡Œå¯¹é¢„æµ‹å‚æ•°$t_o$è¿›è¡ŒÏƒå˜æ¢åä½œä¸ºç½®ä¿¡åº¦çš„å€¼ã€‚ $c_x,c_y$æ˜¯å½“å‰ç½‘æ ¼å·¦ä¸Šè§’åˆ°å›¾åƒå·¦ä¸Šè§’çš„è·ç¦»ï¼Œè¦å…ˆå°†ç½‘æ ¼å¤§å°å½’ä¸€åŒ–ï¼Œå³ä»¤ä¸€ä¸ªç½‘æ ¼çš„å®½=1ï¼Œé«˜=1ã€‚ $p_w,p_h$æ˜¯å…ˆéªŒæ¡†çš„å®½å’Œé«˜($t_w,t_h$ä¼šå¯¹åˆå§‹çš„è®¾ç½®è¿›è¡Œè°ƒæ•´)ã€‚Ïƒæ˜¯sigmoidå‡½æ•°ã€‚ $t_x,t_y,t_w,t_h,t_o$æ˜¯è¦å­¦ä¹ çš„å‚æ•°($t_o$ä¹Ÿå¯ä»¥å­¦ä¹ çš„å˜›ï¼Œå­¦åˆ°æŸç§è§„å¾‹ç”¨ä»¥è¡¨ç¤ºç½®ä¿¡åº¦â“)ï¼Œåˆ†åˆ«ç”¨äºé¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ï¼Œä»¥åŠç½®ä¿¡åº¦ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic5.png" alt=""></p><p>è¿™ç§æ–¹å¼å¯ä»¥è®©æ•°å€¼æ›´å¹…åº¦ç¨³å®šï¼Œä¹Ÿè®©ç½‘ç»œæ›´å®¹æ˜“å­¦ä¹ ã€‚</p><h4 id="Fine-Grained-Features-passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾">Fine-Grained Features(passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾)</h4><p>å¯¹è±¡æ£€æµ‹é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼šå³ç›®æ ‡æ£€æµ‹çš„å¯¹è±¡æœ‰å¤§æœ‰å°ï¼Œè¾“å…¥å›¾åƒç»è¿‡å¤šå±‚ç½‘ç»œæå–ç‰¹å¾ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾ä¸­ï¼ˆæ¯”å¦‚YOLO2ä¸­è¾“å…¥416<em>416ç»è¿‡å·ç§¯ç½‘ç»œä¸‹é‡‡æ ·æœ€åè¾“å‡ºæ˜¯13</em>13ï¼‰ï¼Œè¾ƒå°çš„å¯¹è±¡å¯èƒ½ç‰¹å¾å·²ç»ä¸æ˜æ˜¾ç”šè‡³è¢«å¿½ç•¥æ‰äº†ã€‚ä¸ºäº†æ›´å¥½çš„æ£€æµ‹å‡ºä¸€äº›æ¯”è¾ƒå°çš„å¯¹è±¡ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾éœ€è¦ä¿ç•™ä¸€äº›æ›´ç»†èŠ‚çš„ä¿¡æ¯ã€‚</p><p>YOLO2å¼•å…¥ä¸€ç§ç§°ä¸ºpassthroughå±‚çš„æ–¹æ³•åœ¨ç‰¹å¾å›¾ä¸­ä¿ç•™ä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨æœ€åä¸€ä¸ªpoolingä¹‹å‰ï¼Œç‰¹å¾å›¾çš„å¤§å°æ˜¯26*26*512ï¼Œå°†å…¶1æ‹†4ï¼Œç›´æ¥ä¼ é€’ï¼ˆpassthroughï¼‰åˆ°poolingåï¼ˆå¹¶ä¸”åˆç»è¿‡ä¸€ç»„å·ç§¯ï¼‰çš„ç‰¹å¾å›¾ï¼Œä¸¤è€…å åŠ åˆ°ä¸€èµ·ä½œä¸ºè¾“å‡ºçš„ç‰¹å¾å›¾ã€‚<br><img src="https://picture.mulindya.com/yolov2-pic11.png" alt=""></p><p>å…·ä½“æ€æ ·1æ‹†4ï¼Œä¸‹é¢å€Ÿç”¨ä¸€å‰¯å›¾çœ‹çš„å¾ˆæ¸…æ¥šã€‚å›¾ä¸­ç¤ºä¾‹çš„æ˜¯1ä¸ª4*4æ‹†æˆ4ä¸ª2*2ã€‚å¦å¤–ï¼Œæ ¹æ®YOLO2çš„ä»£ç ï¼Œç‰¹å¾å›¾å…ˆç”¨1*1å·ç§¯ä» 26*26*512 é™ç»´åˆ° 26*26*64ï¼Œå†åš1æ‹†4å¹¶passthroughã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">ut = tf.extract_image_patches(<span class="hljs-keyword">in</span>, [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], padding=<span class="hljs-string">"VALID"</span>)<br><span class="hljs-comment"># or use tf.space_to_depth</span><br><span class="hljs-comment"># out = tf.space_to_depth(in, 2)</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">tf.extract_image_patches(<br>    images,<br>    ksizes,<br>    strides,<br>    rates,<br>    padding,<br>    name=<span class="hljs-literal">None</span><br>)<br><span class="hljs-comment">#imagesï¼šå¿…é¡»æ˜¯shapeä¸º[batch, in_rows, in_cols, depth]çš„tensorï¼›</span><br><span class="hljs-comment">#ksizeï¼šé•¿åº¦å¤§äºç­‰äº4çš„listï¼Œæ»‘åŠ¨çª—çš„å¤§å°</span><br><span class="hljs-comment">#strides:æ¯å—patchåŒºåŸŸä¹‹é—´ä¸­å¿ƒç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå¿…é¡»æ˜¯: [1, stride_rows, stride_cols, 1].</span><br>    <span class="hljs-comment">#å…·ä½“ç‚¹è¯´å°±æ˜¯ç”¨æ¥è®¡ç®—æ¯æ¬¡é€‰å–patchçš„åˆå§‹ç‚¹ä½ç½®</span><br><span class="hljs-comment">#rates: åœ¨æ¯æ¬¡æå–çš„patchä¸­ï¼Œå¯¹åº”dimåƒç´ ç‚¹ä½ç½®ä¹‹é—´çš„å·®è·ï¼Œå¿…é¡»æ˜¯[1, rate_rows, rate_cols, 1]ï¼›ã€Œæˆ–è€…ç†è§£ä¸º æå–å‡ºæ¥çš„æ¯ä¸ªæ¡†é‡Œé¢çš„åƒç´ ä¸æ˜¯éƒ½é€‰æ‹©çš„ æ ¹æ®rateçš„ä¸åŒ éš”å‡ ä¸ªé€‰ä¸€ä¸ª é»˜è®¤æ˜¯1ä¹Ÿå°±æ˜¯çš„éƒ½é€‰æ‹© è‹¥ä¸º2 é‚£ä¹ˆå°±æ˜¯éš”ä¸€ä¸ªæ¥é€‰æ‹©ã€</span><br><span class="hljs-comment">#padding:æœ‰ä¸¤ä¸ªå–å€¼ï¼Œâ€œVALIDâ€æˆ–è€…â€œSAMEâ€ï¼Œâ€œVALIDâ€è¡¨ç¤ºæ‰€å–çš„patchåŒºåŸŸå¿…é¡»å®Œå…¨åŒ…å«åœ¨åŸå§‹å›¾åƒä¸­."SAME"è¡¨ç¤ºå¯ä»¥å–è¶…å‡ºåŸå§‹å›¾åƒçš„éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†è¿›è¡Œ0å¡«å……ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h4 id="Multi-scale-Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰">Multi-scale Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰</h4><p>ä½œè€…å¸Œæœ›YOLOv2èƒ½å¥å£®çš„è¿è¡Œäºä¸åŒå°ºå¯¸çš„å›¾ç‰‡ä¹‹ä¸Šï¼Œæ‰€ä»¥æŠŠè¿™ä¸€æƒ³æ³•ç”¨äºè®­ç»ƒmodelä¸­ã€‚</p><p>åŒºåˆ«äºä¹‹å‰çš„è¡¥å…¨å›¾ç‰‡çš„å°ºå¯¸çš„æ–¹æ³•ï¼ŒYOLOv2æ¯è¿­ä»£å‡ æ¬¡éƒ½ä¼šæ”¹å˜ç½‘ç»œå‚æ•°ã€‚æ¯10ä¸ªBatchï¼Œç½‘ç»œä¼š<strong>éšæœºåœ°é€‰æ‹©ä¸€ä¸ªæ–°çš„å›¾ç‰‡å°ºå¯¸</strong>ï¼Œç”±äºä½¿ç”¨äº†ä¸‹é‡‡æ ·å‚æ•°æ˜¯32ï¼Œæ‰€ä»¥ä¸åŒçš„å°ºå¯¸å¤§å°ä¹Ÿé€‰æ‹©ä¸º32çš„å€æ•°{320ï¼Œ352â€¦â€¦608}ï¼Œæœ€å°320*320ï¼Œæœ€å¤§608*608ï¼Œç½‘ç»œä¼šè‡ªåŠ¨æ”¹å˜å°ºå¯¸ï¼Œå¹¶ç»§ç»­è®­ç»ƒçš„è¿‡ç¨‹ã€‚</p><p>è¿™ä¸€æ–¹æ³•è®©ç½‘ç»œåœ¨ä¸åŒçš„è¾“å…¥å°ºå¯¸ä¸Šéƒ½èƒ½è¾¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„é¢„æµ‹æ•ˆæœï¼ŒåŒä¸€ç½‘ç»œèƒ½åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸Šè¿›è¡Œæ£€æµ‹ã€‚å½“è¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå°çš„ç²¾åº¦é«˜ï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå¤§çš„æ—¶å€™ç²¾åº¦ç›¸å¯¹ä½ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨YOLOv2çš„é€Ÿåº¦å’Œç²¾åº¦ä¸Šè¿›è¡Œæƒè¡¡ã€‚</p><center class="half"><img src="https://picture.mulindya.com/yolov2-pic6.png"><img src="https://picture.mulindya.com/yolov2-pic7.png"></center><h4 id="hi-res-detect-é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹">hi-res-detect(é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹)</h4><p>ä¸Šé¢å·¦å›¾è¡¨æ ¼ä¸­æœ€åä¸€è¡Œæ˜¯ä½¿ç”¨é«˜åˆ†è¾¨lç‡çš„å›¾åƒhi-res detectorï¼Œå› ä¸ºYOLO2è°ƒæ•´ç½‘ç»œç»“æ„åèƒ½å¤Ÿæ”¯æŒå¤šç§å°ºå¯¸çš„è¾“å…¥å›¾åƒã€‚é€šå¸¸æ˜¯ä½¿ç”¨416*416çš„è¾“å…¥å›¾åƒï¼Œå¦‚æœç”¨è¾ƒé«˜åˆ†è¾¨ç‡çš„è¾“å…¥å›¾åƒï¼Œæ¯”å¦‚544*544ï¼Œåˆ™mAPå¯ä»¥è¾¾åˆ°78.6ï¼Œæœ‰1.8çš„æå‡ã€‚</p><h4 id="Hierarchical-classification-åˆ†å±‚åˆ†ç±»">Hierarchical classification(åˆ†å±‚åˆ†ç±»)</h4><p>ä½œè€…æå‡ºäº†ä¸€ç§åœ¨åˆ†ç±»æ•°æ®é›†å’Œæ£€æµ‹æ•°æ®é›†ä¸Šè”åˆè®­ç»ƒçš„æœºåˆ¶ã€‚ä½¿ç”¨æ£€æµ‹æ•°æ®é›†çš„å›¾ç‰‡å»å­¦ä¹ æ£€æµ‹ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚bounding box åæ ‡é¢„æµ‹ï¼Œæ˜¯å¦åŒ…å«ç‰©ä½“ä»¥åŠå±äºå„ä¸ªç‰©ä½“çš„æ¦‚ç‡ã€‚ä½¿ç”¨ä»…æœ‰ç±»åˆ«æ ‡ç­¾çš„åˆ†ç±»æ•°æ®é›†å›¾ç‰‡å»æ‰©å±•å¯ä»¥æ£€æµ‹çš„ç§ç±»ã€‚ä½œè€…é€šè¿‡ImageNetè®­ç»ƒåˆ†ç±»ã€COCOå’ŒVOCæ•°æ®é›†æ¥è®­ç»ƒæ£€æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„æ€è·¯ï¼Œå¯ä»¥è®©æˆ‘ä»¬è¾¾åˆ°æ¯”è¾ƒä¼˜çš„æ•ˆæœã€‚é€šè¿‡å°†ä¸¤ä¸ªæ•°æ®é›†æ··åˆè®­ç»ƒï¼Œ<strong>å¦‚æœé‡åˆ°æ¥è‡ªåˆ†ç±»é›†çš„å›¾ç‰‡åˆ™åªè®¡ç®—åˆ†ç±»çš„Lossï¼Œé‡åˆ°æ¥è‡ªæ£€æµ‹é›†çš„å›¾ç‰‡åˆ™è®¡ç®—å®Œæ•´çš„Loss</strong>ã€‚</p><p>ä½†æ˜¯ImageNetå¯¹åº”åˆ†ç±»æœ‰9000ç§ï¼Œè€ŒCOCOåˆ™åªæä¾›80ç§ç›®æ ‡æ£€æµ‹ï¼Œä½œè€…ä½¿ç”¨multi-labelæ¨¡å‹ï¼Œå³å‡å®šä¸€å¼ å›¾ç‰‡å¯ä»¥æœ‰å¤šä¸ªlabelï¼Œå¹¶ä¸”ä¸è¦æ±‚labelé—´ç‹¬ç«‹ã€‚å› ä¸ºä½œè€…é€‰æ‹©åœ¨COCOå’ŒImageNetæ•°æ®é›†ä¸Šè¿›è¡Œè”åˆè®­ç»ƒï¼Œé‡åˆ°çš„ç¬¬ä¸€é—®é¢˜æ˜¯ä¸¤è€…çš„ç±»åˆ«å¹¶ä¸æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œæ¯”å¦‚"Norfolk terrier"æ˜æ˜¾å±äº"dog"ï¼Œæ‰€ä»¥ä½œè€…æå‡ºäº†ä¸€ç§å±‚çº§åˆ†ç±»æ–¹æ³•ï¼ˆHierarchical classificationï¼‰ï¼Œä¸»è¦æ€è·¯æ˜¯æ ¹æ®å„ä¸ªç±»åˆ«ä¹‹é—´çš„ä»å±å…³ç³»ï¼ˆæ ¹æ®WordNetï¼‰å»ºç«‹ä¸€ç§æ ‘ç»“æ„WordTreeï¼Œç»“åˆCOCOå’ŒImageNetå»ºç«‹çš„WordTreeå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic8.png" alt=""></p><ol><li>éå†Imagenetçš„labelï¼Œç„¶ååœ¨WordNetä¸­å¯»æ‰¾è¯¥labelåˆ°æ ¹èŠ‚ç‚¹(æŒ‡å‘ä¸€ä¸ªç‰©ç†å¯¹è±¡)çš„è·¯å¾„ï¼›</li><li>å¦‚æœè·¯å¾„åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆå°±å°†è¯¥è·¯å¾„ç›´æ¥åŠ å…¥åˆ°åˆ†å±‚æ ‘ç»“æ„ä¸­ï¼›</li><li>å¦åˆ™ï¼Œä»å‰©ä½™çš„è·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼ŒåŠ å…¥åˆ°åˆ†å±‚æ ‘ã€‚</li></ol><p>è¿™ä¸ªåˆ†å±‚æ ‘æˆ‘ä»¬ç§°ä¹‹ä¸º WordTreeï¼Œä½œç”¨å°±åœ¨äºå°†ä¸¤ç§æ•°æ®é›†æŒ‰ç…§å±‚çº§è¿›è¡Œç»“åˆã€‚(æ„Ÿè§‰å°±æ˜¯ä¸ºäº†æ‰©å……æ•°æ®é›†åŒæ—¶ç®€ä¾¿è®¡ç®—)</p><p>åˆ†ç±»æ—¶çš„æ¦‚ç‡è®¡ç®—å€Ÿç”¨äº†<strong>å†³ç­–æ ‘æ€æƒ³</strong>ï¼Œ<strong>æŸä¸ªèŠ‚ç‚¹çš„æ¦‚ç‡å€¼ç­‰äºè¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ‰€æœ‰æ¡ä»¶æ¦‚ç‡ä¹‹ç§¯</strong>ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€é¢— WordTree ï¼ˆè§†è§‰åè¯ç»„æˆçš„å±‚æ¬¡ç»“æ„æ¨¡å‹ï¼‰ã€‚ç”¨WordTreeæ‰§è¡Œåˆ†ç±»æ—¶ï¼Œé¢„æµ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶æ¦‚ç‡ã€‚å¦‚æœæƒ³æ±‚å¾—ç‰¹å®šèŠ‚ç‚¹çš„ç»å¯¹æ¦‚ç‡ï¼Œåªéœ€è¦æ²¿ç€è·¯å¾„åšè¿ç»­ä¹˜ç§¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³çŸ¥é“ä¸€å¼ å›¾ç‰‡æ˜¯ä¸æ˜¯â€œNorfolk terrier â€éœ€è¦è®¡ç®—ï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic10.png" alt=""></p><p>å¦å¤–ï¼Œä¸ºäº†éªŒè¯è¿™ç§æ–¹æ³•ä½œè€…åœ¨WordTreeï¼ˆç”¨1000ç±»åˆ«çš„ImageNetåˆ›å»ºï¼‰ä¸Šè®­ç»ƒäº†Darknet-19æ¨¡å‹ã€‚ä¸ºäº†åˆ›å»ºWordTree1kï¼Œä½œè€…æ·»åŠ äº†å¾ˆå¤šä¸­é—´èŠ‚ç‚¹ï¼ŒæŠŠlabelç”±1000æ‰©å±•åˆ°1369ã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ground truthæ ‡ç­¾è¦é¡ºç€å‘æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¼ æ’­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å¼ å›¾ç‰‡è¢«æ ‡è®°ä¸ºâ€œNorfolk terrierâ€ï¼Œå®ƒä¹Ÿè¢«æ ‡è®°ä¸ºâ€œdogâ€ å’Œâ€œmammalâ€ç­‰ã€‚ä¸ºäº†è®¡ç®—æ¡ä»¶æ¦‚ç‡ï¼Œæ¨¡å‹é¢„æµ‹äº†ä¸€ä¸ªåŒ…å«1369ä¸ªå…ƒç´ çš„å‘é‡ï¼Œè€Œä¸”åŸºäºæ‰€æœ‰â€œåŒä¹‰è¯é›†â€è®¡ç®—softmaxã€‚</p><p>softmaxæ“ä½œä¹ŸåŒæ—¶åº”è¯¥é‡‡ç”¨åˆ†ç»„æ“ä½œï¼Œä¸‹å›¾ä¸ŠåŠéƒ¨åˆ†ä¸ºImageNetå¯¹åº”çš„åŸç”ŸSoftmaxï¼Œä¸‹åŠéƒ¨åˆ†å¯¹åº”åŸºäºWordTreeçš„Softmaxï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic9.png" alt=""></p><p>é€šè¿‡ä¸Šè¿°æ–¹æ¡ˆæ„é€ WordTreeï¼Œå¾—åˆ°å¯¹åº”9418ä¸ªåˆ†ç±»ï¼Œé€šè¿‡é‡é‡‡æ ·ä¿è¯Imagenetå’ŒCOCOçš„æ ·æœ¬æ•°æ®æ¯”ä¾‹ä¸º4:1ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>é€šè¿‡è”åˆè®­ç»ƒç­–ç•¥ï¼ŒYOLO9000å¯ä»¥å¿«é€Ÿæ£€æµ‹å‡ºè¶…è¿‡9000ä¸ªç±»åˆ«çš„ç‰©ä½“ï¼Œæ€»ä½“mAPå€¼ä¸º19,7%ã€‚æˆ‘è§‰å¾—è¿™æ˜¯ä½œè€…åœ¨è¿™ç¯‡è®ºæ–‡ä½œå‡ºçš„æœ€å¤§çš„è´¡çŒ®ï¼Œå› ä¸ºYOLOv2çš„æ”¹è¿›ç­–ç•¥äº®ç‚¹å¹¶ä¸æ˜¯å¾ˆçªå‡ºï¼Œä½†æ˜¯YOLO9000ç®—æ˜¯å¼€åˆ›ä¹‹ä¸¾ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
      <tag>yolo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨åšå®¢ä¸­æ˜¾ç¤ºpdf&amp;æŠ˜å </title>
    <link href="/2021/08/25/config/pdf-config/"/>
    <url>/2021/08/25/config/pdf-config/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„çš„æ–¹æ³•é…ç½®<br><a href="https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/">https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/</a></p></blockquote><h2 id="é…ç½®">é…ç½®</h2><p>pdf.js æ˜¯ç”¨äºè§£æå’Œå‘ˆç° PDF çš„åŸºäº Web æ ‡å‡†å¹³å°çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://mozilla.github.io/pdf.js/">https://mozilla.github.io/pdf.js/</a></p><p>ç”±äºæˆ‘çš„æµè§ˆå™¨çš„ç‰ˆæœ¬å¯èƒ½ä¸é«˜ï¼Œè€ƒè™‘åˆ°å…¼å®¹æ€§ä¸‹è½½æ—§ç‰ˆçš„æ–‡ä»¶ã€‚ç„¶åæŒ‰å¸ˆå…„çš„æ­¥éª¤é…ç½®å³å¯ã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><figure class="highlight llvm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&lt;iframe src<span class="hljs-operator">=</span>'/js/pdfjs_old/web/viewer.html?file<span class="hljs-operator">=</span>https://paper.mulindya.com/An<span class="hljs-variable">%20</span>Isotropic<span class="hljs-variable">%203</span><span class="hljs-keyword">x</span><span class="hljs-number">3</span><span class="hljs-variable">%20</span>Image<span class="hljs-variable">%20</span>Gradient<span class="hljs-variable">%20</span>Operator.pdf' width<span class="hljs-operator">=</span><span class="hljs-number">100</span>% height<span class="hljs-operator">=</span><span class="hljs-number">450</span>&gt;&lt;/iframe&gt;<br></code></pre></td></tr></tbody></table></figure><p>fileè®¾ç½®ä¸ºæ–‡ä»¶çš„åœ°å€ï¼Œå®½é«˜å¯ä»¥è‡ªå·±è®¾ç½®ã€‚</p><h2 id="æ•ˆæœ">æ•ˆæœ</h2><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe><h2 id="æŠ˜å ">æŠ˜å </h2><p>é€šè¿‡htmlçš„detailså…ƒç´ å¯ä»¥æŠ˜å éšè—çš„å†…å®¹ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä½¿ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span> æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—çš„å†…å®¹<br>åœ¨å…¶ä¸­ä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—å†…å®¹çš„æ ‡é¢˜<br></code></pre></td></tr></tbody></table></figure><p>è¿™æ ·å¦‚æœéœ€è¦é˜…è¯»pdfå°±å¯ä»¥å±•å¼€ï¼Œä¸éœ€è¦å°±éšè—ï¼ŒçœŸæ˜¯ç‚’é¸¡ä¾¿åˆ©ï¼ğŸ˜‰</p><details><summary>å±•å¼€pdf</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="650"></iframe></details>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é…ç½®</tag>
      
      <tag>pdf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>swinç½‘ç»œ</title>
    <link href="/2021/08/25/deep_learning/swin/"/>
    <url>/2021/08/25/deep_learning/swin/</url>
    
    <content type="html"><![CDATA[<blockquote><p>swin_transformerçš„ç»“æ„å’Œä»£ç å®ç°éƒ¨åˆ†ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ freezeçš„ç›¸å…³æ“ä½œï¼Œè®°å½•å¦‚ä¸‹ã€‚</p></blockquote><h2 id="è®ºæ–‡ä¸­çš„æ¶æ„">è®ºæ–‡ä¸­çš„æ¶æ„</h2><p><img src="https://picture.mulindya.com/swin-pic1.png" alt=""></p><h2 id="è®ºæ–‡ç¬”è®°">è®ºæ–‡ç¬”è®°</h2><details><summary>Swin Transformer:Hierarchical Vision Transformer using Shifted Windows</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf" width="100%" height="650"></iframe></details><h2 id="modelæ¶æ„">modelæ¶æ„</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br></pre></td><td class="code"><pre><code class="hljs python">ImageClassifier(<br>  (backbone): SwinTransformer(<br>    (patch_embed): PatchEmbed(<br>      (projection): Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">96</span>, kernel_size=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>), stride=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))<br>      (norm): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>    )<br>    (drop_after_pos): Dropout(p=<span class="hljs-number">0.0</span>, inplace=<span class="hljs-literal">False</span>)<br>    (stages): ModuleList(<br>      (<span class="hljs-number">0</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">1</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">2</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">2</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">3</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">4</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">5</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">6</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">7</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">8</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">9</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">10</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">11</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">12</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">13</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">14</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">15</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">16</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">17</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">1536</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">3</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>      )<br>    )<br>    (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>  )<br>  (neck): GlobalAveragePooling(<br>    (gap): AdaptiveAvgPool1d(output_size=<span class="hljs-number">1</span>)<br>  )<br>  (head): MultiLabelLinearClsHead(<br>    (compute_loss): CrossEntropyLoss()<br>    (fc): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">11</span>, bias=<span class="hljs-literal">True</span>)<br>  )<br>)<br></code></pre></td></tr></tbody></table></figure><h2 id="ä»£ç ">ä»£ç </h2><p>æ·»åŠ fronzen_stages:</p><blockquote><p>è¯¥å‚æ•°è¡¨ç¤ºä½ æƒ³å†»ç»“å‰å‡ ä¸ª stages çš„æƒé‡ï¼Œswin ç»“æ„åŒ…æ‹¬ 4 stageå†…éƒ¨ç»“æ„(2,2,18,2)</p><p>frozen_stages=-1ï¼Œè¡¨ç¤ºå…¨éƒ¨å¯å­¦ä¹ </p><p>frozen_stage=0ï¼Œè¡¨ç¤ºstemæƒé‡å›ºå®š</p><p>frozen_stages=1ï¼Œè¡¨ç¤º stem å’Œç¬¬ä¸€ä¸ª stage æƒé‡å›ºå®š</p><p>frozen_stages=2ï¼Œè¡¨ç¤º stem å’Œå‰ä¸¤ä¸ª stage æƒé‡å›ºå®š</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">stage = SwinBlockSequence(**_stage_cfg)<br><span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br><span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>stage.<span class="hljs-built_in">eval</span>()<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>param.requires_grad = <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure><p>å…¨éƒ¨ä»£ç </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> deepcopy<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Sequence</span><br><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> mmcv.cnn <span class="hljs-keyword">import</span> build_norm_layer<br><span class="hljs-keyword">from</span> mmcv.cnn.bricks.transformer <span class="hljs-keyword">import</span> FFN<br><span class="hljs-keyword">from</span> mmcv.cnn.utils.weight_init <span class="hljs-keyword">import</span> trunc_normal_<br><span class="hljs-keyword">from</span> mmcv.runner.base_module <span class="hljs-keyword">import</span> BaseModule, ModuleList<br><br><span class="hljs-keyword">from</span> ..builder <span class="hljs-keyword">import</span> BACKBONES<br><span class="hljs-keyword">from</span> ..utils <span class="hljs-keyword">import</span> PatchEmbed, PatchMerging, ShiftWindowMSA<br><span class="hljs-keyword">from</span> .base_backbone <span class="hljs-keyword">import</span> BaseBackbone<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlock</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Swin Transformer block.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        window_size (int, optional): The height and width of the window.</span><br><span class="hljs-string">            Defaults to 7.</span><br><span class="hljs-string">        shift (bool, optional): Shift the attention window or not.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        ffn_ratio (float, optional): The expansion ratio of feedforward network</span><br><span class="hljs-string">            hidden layer channels. Defaults to 4.</span><br><span class="hljs-string">        drop_path (float, optional): The drop path rate after attention and</span><br><span class="hljs-string">            ffn. Defaults to 0.</span><br><span class="hljs-string">        attn_cfgs (dict, optional): The extra config of Shift Window-MSA.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        ffn_cfgs (dict, optional): The extra config of FFN.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        norm_cfg (dict, optional): The config of norm layers.</span><br><span class="hljs-string">            Defaults to dict(type='LN').</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 window_size=<span class="hljs-number">7</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 shift=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_ratio=<span class="hljs-number">4.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 attn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br><br>        <span class="hljs-built_in">super</span>(SwinBlock, self).__init__(init_cfg)<br><br>        _attn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>            <span class="hljs-string">'num_heads'</span>: num_heads,<br>            <span class="hljs-string">'shift_size'</span>: window_size // <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> shift <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'window_size'</span>: window_size,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>            **attn_cfgs<br>        }<br>        self.norm1 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.attn = ShiftWindowMSA(**_attn_cfgs)<br><br>        _ffn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'feedforward_channels'</span>: <span class="hljs-built_in">int</span>(embed_dims * ffn_ratio),<br>            <span class="hljs-string">'num_fcs'</span>: <span class="hljs-number">2</span>,<br>            <span class="hljs-string">'ffn_drop'</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'act_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'GELU'</span>),<br>            **ffn_cfgs<br>        }<br>        self.norm2 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.ffn = FFN(**_ffn_cfgs)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        identity = x<br>        x = self.norm1(x)<br>        x = self.attn(x)<br>        x = x + identity<br><br>        identity = x<br>        x = self.norm2(x)<br>        x = self.ffn(x, identity=identity)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlockSequence</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Module with successive Swin Transformer blocks and downsample layer.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        depth (int): Number of successive swin transformer blocks.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        downsample (bool, optional): Downsample the output of blocks by patch</span><br><span class="hljs-string">            merging. Defaults to False.</span><br><span class="hljs-string">        downsample_cfg (dict, optional): The extra config of the patch merging</span><br><span class="hljs-string">            layer. Defaults to empty dict.</span><br><span class="hljs-string">        drop_paths (Sequence[float] | float, optional): The drop path rate in</span><br><span class="hljs-string">            each block. Defaults to 0.</span><br><span class="hljs-string">        block_cfgs (Sequence[dict] | dict, optional): The extra config of each</span><br><span class="hljs-string">            block. Defaults to empty dicts.</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 depth,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_paths=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 block_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>().__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(drop_paths, <span class="hljs-type">Sequence</span>):<br>            drop_paths = [drop_paths] * depth<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(block_cfgs, <span class="hljs-type">Sequence</span>):<br>            block_cfg = [deepcopy(block_cfgs) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth)]<br><br>        self.blocks = ModuleList()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth):<br>            _block_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'shift'</span>: <span class="hljs-literal">False</span> <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">True</span>,<br>                <span class="hljs-string">'drop_path'</span>: drop_paths[i],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **block_cfg[i]<br>            }<br>            block = SwinBlock(**_block_cfg)<br>            self.blocks.append(block)<br><br>        <span class="hljs-keyword">if</span> downsample:<br>            _downsample_cfg = {<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'in_channels'</span>: embed_dims,<br>                <span class="hljs-string">'expansion_ratio'</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-string">'norm_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>                **downsample_cfg<br>            }<br>            self.downsample = PatchMerging(**_downsample_cfg)<br>        <span class="hljs-keyword">else</span>:<br>            self.downsample = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> self.blocks:<br>            x = block(x)<br><br>        <span class="hljs-keyword">if</span> self.downsample:<br>            x = self.downsample(x)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-meta">@BACKBONES.register_module()</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinTransformer</span>(<span class="hljs-params">BaseBackbone</span>):</span><br>    <span class="hljs-string">""" Swin Transformer</span><br><span class="hljs-string">    A PyTorch implement of : `Swin Transformer:</span><br><span class="hljs-string">    Hierarchical Vision Transformer using Shifted Windows`  -</span><br><span class="hljs-string">        https://arxiv.org/abs/2103.14030</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Inspiration from</span><br><span class="hljs-string">    https://github.com/microsoft/Swin-Transformer</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        arch (str | dict): Swin Transformer architecture</span><br><span class="hljs-string">            Defaults to 'T'.</span><br><span class="hljs-string">        img_size (int | tuple): The size of input image.</span><br><span class="hljs-string">            Defaults to 224.</span><br><span class="hljs-string">        in_channels (int): The num of input channels.</span><br><span class="hljs-string">            Defaults to 3.</span><br><span class="hljs-string">        drop_rate (float): Dropout rate after embedding.</span><br><span class="hljs-string">            Defaults to 0.</span><br><span class="hljs-string">        drop_path_rate (float): Stochastic depth rate.</span><br><span class="hljs-string">            Defaults to 0.1.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        # add attr</span><br><span class="hljs-string">        frozen_stages: defaults-1 dont freeze,0: all freeze,other: frozen_stages stages to freeze</span><br><span class="hljs-string"></span><br><span class="hljs-string">        use_abs_pos_embed (bool): If True, add absolute position embedding to</span><br><span class="hljs-string">            the patch embedding. Defaults to False.</span><br><span class="hljs-string">        auto_pad (bool): If True, auto pad feature map to fit window_size.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        norm_cfg (dict, optional): Config dict for normalization layer at end</span><br><span class="hljs-string">            of backone. Defaults to dict(type='LN')</span><br><span class="hljs-string">        stage_cfgs (Sequence | dict, optional): Extra config dict for each</span><br><span class="hljs-string">            stage. Defaults to empty dict.</span><br><span class="hljs-string">        patch_cfg (dict, optional): Extra config dict for patch embedding.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        init_cfg (dict, optional): The Config for initialization.</span><br><span class="hljs-string">            Defaults to None.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Examples:</span><br><span class="hljs-string">        &gt;&gt;&gt; from mmcls.models import SwinTransformer</span><br><span class="hljs-string">        &gt;&gt;&gt; import torch</span><br><span class="hljs-string">        &gt;&gt;&gt; extra_config = dict(</span><br><span class="hljs-string">        &gt;&gt;&gt;     arch='tiny',</span><br><span class="hljs-string">        &gt;&gt;&gt;     stage_cfgs=dict(downsample_cfg={'kernel_size': 3,</span><br><span class="hljs-string">        &gt;&gt;&gt;                                     'expansion_ratio': 3}),</span><br><span class="hljs-string">        &gt;&gt;&gt;     auto_pad=True)</span><br><span class="hljs-string">        &gt;&gt;&gt; self = SwinTransformer(**extra_config)</span><br><span class="hljs-string">        &gt;&gt;&gt; inputs = torch.rand(1, 3, 224, 224)</span><br><span class="hljs-string">        &gt;&gt;&gt; output = self.forward(inputs)</span><br><span class="hljs-string">        &gt;&gt;&gt; print(output.shape)</span><br><span class="hljs-string">        (1, 2592, 4)</span><br><span class="hljs-string">    """</span><br>    arch_zoo = {<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'t'</span>, <span class="hljs-string">'tiny'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'s'</span>, <span class="hljs-string">'small'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'b'</span>, <span class="hljs-string">'base'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">128</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'l'</span>, <span class="hljs-string">'large'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">192</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>,  <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>, <span class="hljs-number">48</span>]}),<br>    }  <span class="hljs-comment"># yapf: disable</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 arch=<span class="hljs-string">'T'</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 img_size=<span class="hljs-number">224</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 in_channels=<span class="hljs-number">3</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_rate=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path_rate=<span class="hljs-number">0.1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 frozen_stages=-<span class="hljs-number">1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 use_abs_pos_embed=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 stage_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 patch_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">str</span>):<br>            arch = arch.lower()<br>            <span class="hljs-keyword">assert</span> arch <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span>(self.arch_zoo), \<br>                <span class="hljs-string">f'Arch <span class="hljs-subst">{arch}</span> is not in default archs <span class="hljs-subst">{<span class="hljs-built_in">set</span>(self.arch_zoo)}</span>'</span><br>            self.arch_settings = self.arch_zoo[arch]<br>        <span class="hljs-keyword">else</span>:<br>            essential_keys = {<span class="hljs-string">'embed_dims'</span>, <span class="hljs-string">'depths'</span>, <span class="hljs-string">'num_head'</span>}<br>            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">dict</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">set</span>(arch) == essential_keys, \<br>                <span class="hljs-string">f'Custom arch needs a dict with keys <span class="hljs-subst">{essential_keys}</span>'</span><br>            self.arch_settings = arch<br><br>        self.embed_dims = self.arch_settings[<span class="hljs-string">'embed_dims'</span>]<br>        self.depths = self.arch_settings[<span class="hljs-string">'depths'</span>]<br>        self.num_heads = self.arch_settings[<span class="hljs-string">'num_heads'</span>]<br>        self.num_layers = <span class="hljs-built_in">len</span>(self.depths)<br>        self.use_abs_pos_embed = use_abs_pos_embed<br>        self.auto_pad = auto_pad<br><br>        _patch_cfg = <span class="hljs-built_in">dict</span>(<br>            img_size=img_size,<br>            in_channels=in_channels,<br>            embed_dims=self.embed_dims,<br>            conv_cfg=<span class="hljs-built_in">dict</span>(<br>                <span class="hljs-built_in">type</span>=<span class="hljs-string">'Conv2d'</span>, kernel_size=<span class="hljs-number">4</span>, stride=<span class="hljs-number">4</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>),<br>            norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>            **patch_cfg)<br>        self.patch_embed = PatchEmbed(**_patch_cfg)<br>        num_patches = self.patch_embed.num_patches<br>        patches_resolution = self.patch_embed.patches_resolution<br>        self.patches_resolution = patches_resolution<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            self.absolute_pos_embed = nn.Parameter(<br>                torch.zeros(<span class="hljs-number">1</span>, num_patches, self.embed_dims))<br><br>        self.drop_after_pos = nn.Dropout(p=drop_rate)<br><br>        <span class="hljs-comment"># stochastic depth</span><br>        total_depth = <span class="hljs-built_in">sum</span>(self.depths)<br>        dpr = [<br>            x.item() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> torch.linspace(<span class="hljs-number">0</span>, drop_path_rate, total_depth)<br>        ]  <span class="hljs-comment"># stochastic depth decay rule</span><br><br>        self.stages = ModuleList()<br>        embed_dims = self.embed_dims<br>        input_resolution = patches_resolution<br>        <span class="hljs-keyword">for</span> i, (depth,<br>                num_heads) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(self.depths, self.num_heads)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(stage_cfgs, <span class="hljs-type">Sequence</span>):<br>                stage_cfg = stage_cfgs[i]<br>            <span class="hljs-keyword">else</span>:<br>                stage_cfg = deepcopy(stage_cfgs)<br>            downsample = <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> i &lt; self.num_layers - <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span><br>            _stage_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'depth'</span>: depth,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'downsample'</span>: downsample,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'drop_paths'</span>: dpr[:depth],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **stage_cfg<br>            }<br><br>            stage = SwinBlockSequence(**_stage_cfg)<br>            <span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br>            <span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>                stage.<span class="hljs-built_in">eval</span>()<br>                <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>                    param.requires_grad = <span class="hljs-literal">False</span><br>            <br>            self.stages.append(stage)<br><br>            dpr = dpr[depth:]<br>            <span class="hljs-keyword">if</span> downsample:<br>                embed_dims = stage.downsample.out_channels<br>                input_resolution = stage.downsample.output_resolution<br>            <br><br>        <span class="hljs-keyword">if</span> norm_cfg <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            self.norm = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            self.norm = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init_weights</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).init_weights()<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            trunc_normal_(self.absolute_pos_embed, std=<span class="hljs-number">0.02</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        x = self.patch_embed(x)<br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            x = x + self.absolute_pos_embed<br>        x = self.drop_after_pos(x)<br><br>        <span class="hljs-keyword">for</span> stage <span class="hljs-keyword">in</span> self.stages:<br>            x = stage(x)<br><br>        x = self.norm(x) <span class="hljs-keyword">if</span> self.norm <span class="hljs-keyword">else</span> x<br><br>        <span class="hljs-keyword">return</span> x.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
      <category>ç½‘ç»œæ¶æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>swin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer40 æœ€å°çš„kä¸ªæ•°</title>
    <link href="/2021/08/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer40/"/>
    <url>/2021/08/24/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer40/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€å°çš„kä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•´æ•°æ•°ç»„ arr ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„ k ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥4ã€5ã€1ã€6ã€2ã€7ã€3ã€8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1ã€2ã€3ã€4ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[3,2,1]</span>, k = 2<br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2]</span> æˆ–è€… <span class="hljs-comment">[2,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[0,1,2,1]</span>, k = 1<br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= k &lt;= arr.length &lt;= 10000</li><li>0 &lt;= arr[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å°è£…çš„sortedå‡½æ•°ï¼Œè¿™ç§æ–¹æ³•éœ€è¦æ’åºO(NlogN)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(arr)[<span class="hljs-number">0</span>:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯é‡‡å–å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œå¯ä»¥å°†å¤æ‚åº¦é™åˆ°O(N)<br>é¦–å…ˆå¤ä¹ ä¸€ä¸‹å¿«é€Ÿæ’åºçš„ä»£ç ã€‚Kç¥çš„æ–¹æ³•æ˜¯i&lt;jçš„æƒ…å†µä¸‹å°±è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ç§æ–¹å¼è¦æ³¨æ„jçš„æ”¶ç¼©è¦åœ¨içš„æ‰©å¼ ä¹‹å‰ï¼›è¿™æ ·å¯ä»¥ä¿è¯æœ€ååœæ­¢çš„æ—¶å€™iï¼ŒjæŒ‡å‘éƒ½æ˜¯æ¯”è¾ƒå°çš„é‚£ä¸ªæ•°å€¼ã€‚(æœ€åäº¤æ¢æ—¶i,jéƒ½å¯ä»¥ï¼Œå› ä¸ºç»“æŸæ—¶ä¸€å®šæœ‰iå’Œjç›¸ç­‰)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (i&lt;j):<br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>æœ€åäº¤æ¢çš„æ—¶å€™åªèƒ½æ˜¯jå¹¶ä¸”ä¸€å®šè¦ä¿è¯iå’Œjä¸å¯è¶Šç•Œï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨iå’Œjåˆ°ä¸´ç•Œå€¼çš„æ—¶å€™å°±ä¸ç”¨ç§»åŠ¨äº†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">True</span>):<br>        <span class="hljs-keyword">while</span> j&gt;l <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <br>        <span class="hljs-keyword">while</span> i&lt;r <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>   <br>        <span class="hljs-keyword">if</span>(i&gt;=j):<span class="hljs-keyword">break</span><br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>é‚£ä¹ˆè¿™ä¸ªé¢˜ç›®å€Ÿç”¨è¿™ç§æ€æƒ³åªè¦æ‰¾åˆ°è¿™ä¸ªpivotä»–åŸæœ¬æ‰€åœ¨çš„ä½ç½®ä¸‹æ ‡ä¸ºkï¼Œé‚£ä¹ˆä»–çš„å·¦è¾¹çš„éƒ¨åˆ†å°±æ˜¯è¦æ‰¾çš„éƒ¨åˆ†å“¦~~ğŸ˜‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>            <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>            pivot = arr[l]<br>            i,j = l,r<br>            <span class="hljs-keyword">while</span> (i&lt;j):<br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>                arr[i],arr[j] = arr[j],arr[i]<br>            arr[l], arr[j] = arr[j], arr[l]<br>            <span class="hljs-keyword">if</span>(k&gt;j):quicksort(j+<span class="hljs-number">1</span>,r)<br>            <span class="hljs-keyword">if</span>(k&lt;j):quicksort(l,j-<span class="hljs-number">1</span>)            <br>        quicksort(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> arr[:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿™ç§æ–¹æ³•çš„å¤æ‚åº¦æ˜¯N+N/2+N/4+N/8+â€¦ = N(1/2+1/4+1/8+â€¦) ~ 2N</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å¿«é€Ÿæ’åº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å¿«é€Ÿæ’åº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åšå®¢ä¸­çš„emoji</title>
    <link href="/2021/08/24/config/hexo-emoji/"/>
    <url>/2021/08/24/config/hexo-emoji/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨åšå®¢ä¸­ä½¿ç”¨emojiï¼Œå¯å¯çˆ±çˆ±å°è¡¨æƒ…ğŸ˜</p></blockquote><blockquote><p>ç›¸å…³é…ç½®å‚è§è¿™ä¸ªåšå®¢å“Ÿ <a href="https://www.zywvvd.com/2021/08/23/hexo/19%20hexo-emoji/hexo-emoji/">Hexo -19- æ·»åŠ emojiè¡¨æƒ…</a><br>å¯ä»¥åœ¨è¿™ä¸¤ä¸ªç½‘ç«™çœ‹çœ‹æœ‰å“ªäº›å°è¡¨æƒ…<br><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">https://www.webfx.com/tools/emoji-cheat-sheet/</a><br><a href="https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/">https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/</a></p></blockquote><h2 id="å®‰è£…æ¸²æŸ“å™¨">å®‰è£…æ¸²æŸ“å™¨</h2><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">npm un hexo-renderer-marked <span class="hljs-comment">--save</span><br>npm i hexo-renderer-markdown-<span class="hljs-keyword">it</span> <span class="hljs-comment">--save</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>åœ¨_config.ymlæ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹æ®µä»£ç </p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Markdown-it config</span><br><span class="hljs-comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">render:</span><br>    <span class="hljs-attr">html:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">xhtmlOut:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">linkify:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">typographer:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">quotes:</span> <span class="hljs-string">'â€œâ€â€˜â€™'</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-abbr</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-footnote</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-ins</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sup</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-emoji</span>  <span class="hljs-comment"># add emoji</span><br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çš„æ—¶å€™å°±ç›´æ¥åœ¨mdæ–‡ä»¶ä¸­ç”¨ä¸¤ä¸ªå¼•å·ä¸­é—´å¡«å†™emojiçš„åç§°å³å¯å•¦ :happy:</p>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>emoji</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>YOLOv1</title>
    <link href="/2021/08/21/deep_learning/yolov1/"/>
    <url>/2021/08/21/deep_learning/yolov1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>YOLOç³»åˆ—æ˜¯åŸºäºæ·±åº¦å­¦ä¹ çš„å›å½’æ–¹æ³•ã€‚YOLOï¼šyou only look onceçš„ä¼˜ç‚¹æ˜¯å®æ—¶å¿«é€Ÿç›®æ ‡æ£€æµ‹ã€‚ä¸€ç›´éƒ½å¾ˆæƒ³æŠŠYOLOç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹ã€‚åœ¨æ­¤ï¼Œè®°å½•ä¸‹ç›¸å…³çš„çŸ¥è¯†å’Œä¸ªäººç†è§£ã€‚åšç¬”è®°ä¹Ÿç®—æ˜¯ç£ä¿ƒæˆ‘å¥½å¥½çš„æ•´ç†ç›¸å…³å†…å®¹å­ï¼okå¼€å§‹ï¼ğŸ˜‰</p></blockquote><blockquote><p>å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/136382095">https://zhuanlan.zhihu.com/p/136382095</a><br><a href="https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw">https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw</a></p></blockquote><h2 id="YOLO-å’Œ-Faster-R-CNN">YOLO å’Œ Faster R-CNN</h2><p>ä¸¤ä¸ªç½‘ç»œçš„å·®å¼‚æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li><p>Yoloæ²¡æœ‰æ˜¾ç¤ºæ±‚å–region proposalçš„è¿‡ç¨‹ï¼Œè™½ç„¶Faster R-CNNä¸­çš„RPNäºFast R-CNNå…±äº«å·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯éœ€è¦åå¤çš„è®­ç»ƒRPNäºFast R-CNNï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§æ–¹å¼è¿˜æ˜¯éœ€è¦â€look twiceâ€œ ï¼šç¡®å®šå€™é€‰æ¡†å’Œåˆ†ç±»ï¼›è€ŒYoloç³»åˆ—åªéœ€è¦â€look onceâ€œ</p><blockquote><p>å…³äºFaster R-CNNçš„çŸ¥è¯†åç»­å†å¡«å‘â€¦</p></blockquote></li><li><p>Yoloå°†æ£€æµ‹ç»Ÿä¸€ä¸ºä¸€ä¸ªå›å½’é—®é¢˜ã€‚è€ŒR-CNNå°†æ£€æµ‹ç»“æœåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œæ±‚è§£ï¼šåˆ†ç±»<code>ç‰©ä½“çš„ç±»åˆ«</code> ï¼Œ å›å½’<code>ç‰©ä½“çš„bounding  box</code></p></li></ol><h2 id="YOLOv1">YOLOv1</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡ä¸‹è½½ï¼š</strong> <a href="http://arxiv.org/abs/1506.02640">http://arxiv.org/abs/1506.02640</a></p><p><strong>ä»£ç ä¸‹è½½ï¼š</strong> <a href="https://github.com/pjreddie/darknet">https://github.com/pjreddie/darknet</a></p><p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†æ•´å¼ å›¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼ˆä¸Faster-RCNNç±»ä¼¼ï¼‰ï¼Œç›´æ¥åœ¨è¾“å‡ºå±‚å¯¹BBoxçš„ä½ç½®å’Œç±»åˆ«è¿›è¡Œå›å½’ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov1 è®ºæ–‡ï¼šYou Only Look Once:Unified, Real-Time Object Detection</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/yolov1.pdf" width="100%" height="650"></iframe></details><p>å®ç°æ–¹æ³•ï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic1.png" alt=""></p><ul><li><p>é¦–å…ˆå°†ä¸€å¹…å›¾åƒåˆ†æˆS*Sä¸ªç½‘æ ¼ï¼ˆgrid cellï¼‰,å¦‚æœæŸä¸ªç‰©ä½“çš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç‰©ä½“ã€‚</p></li><li><p>æ¯ä¸ªç½‘æ ¼éœ€è¦é¢„æµ‹Bä¸ªè¾¹ç•Œæ¡†(BBox)çš„ä½ç½®ä¿¡æ¯å’Œå¯¹åº”çš„ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰;ä¸€ä¸ªBBoxå¯¹åº”å››ä¸ªä½ç½®ä¿¡æ¯å’Œä¸€ä¸ªconfidenceä¿¡æ¯ï¼Œconfidenceè¡¨ç¤ºæ‰€é¢„æµ‹çš„Boxä¸­å«æœ‰objextçš„ç½®ä¿¡åº¦å’Œboxçš„é¢„æµ‹æƒ…å†µã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯$conf = Pr(object)\times IOU^{truth}_{pred}$ å¦‚æœæœ‰objectè½åœ¨å…¶ä¸­çš„grid cellé‡Œï¼Œé‚£ä¹ˆç¬¬ä¸€é¡¹ä¸º1å¦åˆ™å–0.</p></blockquote></li></ul><p>æ¯ä¸ªbounding boxè¦é¢„æµ‹(x, y, w, h)å’Œconfidenceå…±5ä¸ªå€¼ï¼Œæ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹ä¸€ä¸ªç±»åˆ«ä¿¡æ¯ï¼Œè®°ä¸ºCç±»ã€‚åˆ™SxSä¸ªç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹Bä¸ªbounding boxè¿˜è¦é¢„æµ‹Cä¸ªcategoriesã€‚åˆ¤æ–­è¿™ä¸ªè½åœ¨æ­¤ç½‘æ ¼çš„ç‰©ä½“æ˜¯cä¸ªç‰©ä½“ä¸­çš„å“ªä¸€ä¸ªç‰©ä½“ã€‚è¾“å‡ºå°±æ˜¯S x S x (5*B+C)çš„ä¸€ä¸ªtensorã€‚ï¼ˆ<strong>æ³¨æ„ï¼šclassä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªç½‘æ ¼çš„ï¼Œconfidenceä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªbounding boxçš„ã€‚</strong>ï¼‰</p><p>ä¸¾ä¾‹è¯´æ˜: åœ¨PASCAL VOCä¸­ï¼Œå›¾åƒè¾“å…¥ä¸º448x448ï¼Œå–S=7ï¼ŒB=2ï¼Œä¸€å…±æœ‰20ä¸ªç±»åˆ«(C=20)ã€‚åˆ™è¾“å‡ºå°±æ˜¯7x7x30çš„ä¸€ä¸ªtensorã€‚*å…¶ä¸­30ä¹Ÿå°±æ˜¯2*5+20ï¼Œæ•´ä¸ªç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic2.png" alt=""></p><p>åœ¨testçš„æ—¶å€™ï¼Œæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„classä¿¡æ¯ä¸BBoxå¾—åˆ°çš„confidenciä¿¡æ¯ç›¸ä¹˜ï¼Œå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªBBoxçš„class-specific confidence scoreï¼š</p>$$Pr(Class_i \vert Object) \times Pr(Object) \times IOU^{truth}_{pred} = Pr(Class_i) \times IOU^{truth}_{pred}$$<p>å¾—åˆ°æ¯ä¸ªboxçš„class-specific confidence scoreä¹‹åï¼Œè®¾ç½®é˜ˆå€¼ï¼Œè¿‡æ»¤æ‰å¾—åˆ†ä½çš„boxesï¼Œå¯¹ä¿ç•™çš„boxesè¿›è¡ŒNMSå¤„ç†ï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æœã€‚</p><blockquote><p>NMSï¼šnon-maximum suppression éæå¤§æŠ‘åˆ¶ï¼Œå…¶æ“ä½œå³æ˜¯ä»é›†åˆä¸­æ‰¾åˆ°å¾—åˆ†scoreæœ€é«˜çš„å€™é€‰æ¡†ï¼Œä¸å…¶ä»–å€™é€‰æ¡†è®¡ç®—IOUï¼Œåˆ é™¤é‡åˆç‡é«˜çš„å€™é€‰æ¡†ï¼Œå› ä¸ºè¿™äº›å€™é€‰æ¡†å’Œæœ€é«˜scoreçš„æ¡†â€œç«äº‰â€åŒä¸€ä¸ªç‰©ä½“ï¼Œä½†æ˜¯scoreåˆä¸å¤Ÿé«˜ï¼Œæ‰€ä»¥æ˜¯åº”è¯¥è¢«æ·˜æ±°çš„ã€‚ç¡®å®šäº†è¿™ä¸ªæœ€é«˜scoreçš„BBOXä¹‹åå°±å¯ä»¥ä¸è€ƒè™‘ä»–äº†ï¼Œå†ç»§ç»­æ‰¾å¯»æœ€é«˜scoreçš„å€™é€‰æ¡†ï¼ŒæŠŠä¸ä»–ç«äº‰çš„å€™é€‰æ¡†ç»™passæ‰å³å¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p></blockquote><h4 id="æµç¨‹">æµç¨‹</h4><ol><li>è¾“å…¥ä¸€å¼ å›¾åƒå°†å…¶åˆ†ä¸º7*7çš„ç½‘æ ¼</li><li>å¯¹äºæ¯ä¸€ä¸ªç½‘æ ¼,é¢„æµ‹ä¸¤ä¸ªè¾¹æ¡†ï¼›ï¼ˆåŒ…æ‹¬è¾¹æ¡†çš„ç½®ä¿¡åº¦å’Œå…¶å¯¹åº”çš„ç±»åˆ«æ¦‚ç‡ï¼‰</li><li>æ ¹æ®é¢„æµ‹çš„7*7*2çš„ç›®æ ‡çª—å£ï¼Œé¦–å…ˆé€šè¿‡é˜ˆå€¼å»é™¤å¯èƒ½æ€§åœ°çš„çª—å£ï¼Œå†é‡‡ç”¨NMSå»é™¤å†—ä½™çš„çª—å£ã€‚</li></ol><h3 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°</h3><p>æœ€é‡è¦çš„æ˜¯è®¾è®¡æŸå¤±å‡½æ•°ï¼Œä½œè€…ä½¿ç”¨äº†sum-squared error lossï¼ˆ<a href="https://blog.csdn.net/shengyan5515/article/details/84036734">https://blog.csdn.net/shengyan5515/article/details/84036734</a> ï¼‰</p><blockquote><p>å…³äºYOLOçš„æŸå¤±å‡½æ•°ï¼Œé‡‡ç”¨sum-squared erroræ•´åˆlocalization errorï¼ˆbboxesçš„åæ ‡è¯¯å·®ï¼‰å’Œclassification errorï¼Œå…¶ä¸­classification erroråŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ²¡æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼</p></blockquote><p><img src="https://picture.mulindya.com/yolov1-pic3.png" alt=""></p><h4 id="é—®é¢˜ï¼š">é—®é¢˜ï¼š</h4><ul><li>8ç»´çš„localization error(4*2),å’Œ20ç»´çš„classification erroråŒç­‰é‡è¦æ˜¯ä¸åˆç†çš„</li><li>å¦‚æœä¸€ä¸ªç½‘æ ¼ä¸­æ²¡æœ‰object(å¤§éƒ¨åˆ†),å°†è¿™äº›ç½‘æ ¼çš„boxå¯¹åº”confidenceè®¾ç½®ä¸º0ï¼Œæ˜¯æ¯”è¾ƒâ€œæš´åŠ›â€çš„ï¼Œä¼šè®©lossç‰¹åˆ«å¤§ï¼Œç½‘ç»œä¸ç¨³å®šå¹¶ä¸”ä¸å®¹æ˜“æ”¶æ•›ã€‚</li></ul><h4 id="è§£å†³æ–¹æ¡ˆï¼š">è§£å†³æ–¹æ¡ˆï¼š</h4><ul><li><p>å¯¹äºåæ ‡é¢„æµ‹èµ‹äºˆæ›´å¤§çš„æƒé‡ï¼ˆé‡è§†æ¡†çš„ä½ç½®ï¼‰</p></li><li><p>å¯¹æ²¡æœ‰objectçš„confidence lossï¼Œèµ‹äºˆå°çš„æƒé‡(æ³¨æ„åŠ›è½¬ç§»åˆ°å…¶ä»–åœ°æ–¹)</p></li><li><p>å¯¹å­˜åœ¨objectçš„boxçš„confidence losså’Œç±»åˆ«çš„é¢„æµ‹æƒé‡æ­£å¸¸å–1</p></li></ul><blockquote><p>ä¸ºä»€ä¹ˆç¬¬äºŒé¡¹å‡ºç°äº†æ ¹å·å‘¢ï¼Ÿ</p><p>æ˜¯å› ä¸ºæˆ‘ä»¬çš„è¯¯å·®åº¦é‡ï¥¾ååº”å‡ºå¤§boxçš„å°åå·®è¦å°äºå°boxã€‚ä¸ºäº†é€æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¢„æµ‹ï¦ºè¾¹ç•Œæ¡†çš„å®½åº¦å’Œé«˜åº¦çš„å¹³â½…æ ¹ï¼Œè€Œï¥§æ˜¯ç›´æ¥é¢„æµ‹å®½åº¦å’Œâ¾¼åº¦ã€‚å› ä¸ºæ ¹å·ä¹‹åæ›²çº¿è¶Šå¤§è¶Šå¹³ç¼“ã€‚è¿™æ ·å¯¹å°çš„boxçš„åå·®ç›¸å¯¹æ›´åŠ æ•æ„Ÿã€‚</p></blockquote><p>è§‚å¯ŸæŸå¤±å‡½æ•°å¯ä»¥çœ‹å‡ºï¼š</p><ul><li><p>åªæœ‰åœ¨ç½‘æ ¼ä¸­å­˜åœ¨objectçš„æ—¶å€™æ‰ä¼šå¯¹classification errorè¿›è¡Œè®¡ç®—</p></li><li><p>åªæœ‰å½“æŸä¸ªç½‘æ ¼çš„boxçš„å’Œå¯¹äºçš„ground truth boxæ˜¯è´Ÿè´£å›å½’çš„ï¼Œæ‰ä¼šå¯¹è¿™ä¸ªbox çš„ä½ç½®xywhæŸå¤±è¿›è¡Œè®¡ç®—ï¼Œç¡®å®šå¯¹åº”ground truth boxå°±éœ€è¦å°†è¿™ä¸ªboxä¸è¿™ä¸ªç½‘æ ¼ä¸­çš„æ‰€æœ‰bboxè®¡ç®—IOUï¼Œæœ€å¤§çš„é‚£ä¸ªground truthæ˜¯ç”±è¿™ä¸ªç½‘ç»œè´Ÿè´£é¢„æµ‹çš„ã€‚</p><p>æ¿€æ´»å‡½æ•°ä½¿ç”¨çš„æ˜¯leak reluï¼Œæ¨¡å‹æ˜¯ä½¿ç”¨é¢„è®­ç»ƒçš„Imagenetã€‚</p></li></ul><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ul><li><p>å¿«é€Ÿï¼Œpiplineç®€å•</p></li><li><p>èƒŒæ™¯è¯¯æ£€ç‡ä½</p></li><li><p>é€šç”¨æ€§å¼ºï¼Œå¯¹è‰ºæœ¯å“ä¸­çš„ç‰©ä½“ä¹Ÿå¯ä»¥æ£€æµ‹ï¼Œå¯¹éè‡ªç„¶çš„å›¾åƒç‰©ä½“çš„æ£€æµ‹ç‡æ¯”ä¸€èˆ¬çš„DOMï¼ŒR-CNNéƒ½è¦å¥½å¾ˆå¤š</p></li></ul><h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3><ul><li>ç”±äºè¾“å‡ºå±‚æ˜¯å…¨è¿æ¥å±‚ï¼Œå› æ­¤åœ¨æ£€æµ‹æ—¶ï¼ŒYOLOè®­ç»ƒæ¨¡å‹åªèƒ½æ”¯æŒä¸è®­ç»ƒå›¾åƒåˆ†è¾¨ç‡ç›¸åŒçš„å›¾åƒ</li><li>æ¯ä¸ªæ ¼å­å¯ä»¥é¢„æµ‹Bä¸ªBboxï¼Œä½†æ˜¯æœ€ç»ˆåªèƒ½é€‰æ‹©IOUæœ€é«˜çš„BBoxä½œä¸ºç‰©ä½“æ£€æµ‹ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå„è‡ªåªèƒ½æœ€å¤šé¢„æµ‹å‡ºä¸€ä¸ªç‰©ä½“ï¼›å½“ç‰©ä½“æ¯”è¾ƒå°æˆ–è€…åˆ†å¸ƒå¯†é›†çš„æ—¶å€™ä¹Ÿåªèƒ½æ£€æµ‹å‡ºä¸€ä¸ªã€‚</li><li>åœ¨lossçš„æ±‚è§£æ–¹ç¨‹ä¸­ï¼Œå¤§ç›®æ ‡å’Œå°ç›®æ ‡çš„IOUè¯¯å·®åœ¨lossè®¡ç®—ä¸Šæ˜¯æ¥è¿‘çš„ï¼ˆå³ä½¿ç”¨äº†å¹³æ–¹æ ¹ç¼“è§£ï¼‰ï¼Œå› æ­¤å¯¹äºå°ç‰©ä½“çš„æ£€æµ‹å‡†ç¡®æ€§ä¸é«˜ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
      <tag>yolo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer19</title>
    <link href="/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer19/"/>
    <url>/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer19/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…å«â€™. â€˜å’Œâ€™<em>â€˜çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦â€™.â€˜è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œâ€™</em>'è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆå«0æ¬¡ï¼‰ã€‚åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"aaa"ä¸æ¨¡å¼"a.a"å’Œ"ab<em>ac</em>a"åŒ¹é…ï¼Œä½†ä¸"aa.a"å’Œ"ab*a"å‡ä¸åŒ¹é…ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"aa"</span><br>p = <span class="hljs-string">"a"</span><br><span class="hljs-section">è¾“å‡º: false</span><br><span class="hljs-section">è§£é‡Š: "a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aa"</span><br>p = <span class="hljs-comment">"a*"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ <span class="hljs-string">'a'</span>ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² <span class="hljs-comment">"aa"</span> å¯è¢«è§†ä¸º <span class="hljs-string">'a'</span> é‡å¤äº†ä¸€æ¬¡ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"ab"</span><br>p = <span class="hljs-string">".*"</span><br><span class="hljs-section">è¾“å‡º: true</span><br><span class="hljs-section">è§£é‡Š: ".*" è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ'*'ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ'.'ï¼‰ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aab"</span><br>p = <span class="hljs-comment">"c*a*b"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ <span class="hljs-string">'c'</span> ä¸º <span class="hljs-number">0</span> ä¸ª, <span class="hljs-string">'a'</span> è¢«é‡å¤ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² <span class="hljs-comment">"aab"</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-5ï¼š">ç¤ºä¾‹ 5ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"mississippi"</span><br>p = <span class="hljs-string">"mis*is*p*."</span><br><span class="hljs-section">è¾“å‡º: false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>s</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ã€‚</li><li><code>p</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ä»¥åŠå­—ç¬¦ <code>.</code> å’Œ <code>*</code>ï¼Œæ— è¿ç»­çš„ <code>'*'</code>ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯å»ºç«‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚dp[i][j]è¡¨ç¤ºå‰jä¸ªæ¨¡å¼ä¸²åŒ¹é…sçš„å‰iä¸ªå­—æ¯çš„åŒ¹é…æƒ…å†µã€‚</p><p>é‚£ä¹ˆå°±è¦åˆ†æƒ…å†µè®¨è®ºäº†ï¼Œä¸€ç§æ˜¯p[j]æ˜¯<code>å­—æ¯</code>ï¼Œç¬¬äºŒæ˜¯<code> .</code> ,ç¬¬ä¸‰æ˜¯ <code>*</code>.</p><ol><li><p><code>å­—æ¯</code>:ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœ$p[j]==s[i]$å°±å¯ä»¥è½¬ç§» $dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code> .</code> : å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ç›´æ¥è½¬ç§»$dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code>*</code>ï¼šå¦‚æœå‰ä¸€ä¸ªå­—ç¬¦$p[j-1]==s[i]$ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>*</code>å¯ä»¥é€‰æ‹©æ˜¯åŒ¹é…sçš„<strong>ä¸€ä¸ªå…ƒç´ è¿˜æ˜¯å¤šä¸ªå…ƒç´ </strong></p><p>$dp[i][j] = dp[i][j-2] \quad or \quad dp[i-1][j]$</p></li></ol><p>å¦‚æœå…ƒç´ ä¸ç›¸ç­‰ï¼Œå°±ç›´æ¥å‘å‰åŒ¹é…ï¼ˆ0æ¬¡åŒ¹é…ï¼‰$dp[i][j-2]$</p><blockquote><p>$dp[i][j-2]$æ˜¯åŒ¹é…0ä¸ªï¼›$dp[i-1][j]$æ˜¯åŒ¹é…å¤šä¸ªï¼Œå¿½ç•¥iå…ƒç´ ç»§ç»­å‘å‰æŸ¥æ‰¾ï¼›$dp[i-1][j-2]$æ˜¯åŒ¹é…1ä¸ªæ˜¯åŒ…å«äºå¤šä¸ª$dp[i-1][j]$ä¸­</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isMatch</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, p: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        s = <span class="hljs-string">" "</span>+s<br>        p = <span class="hljs-string">" "</span>+p<br>        dp = [[<span class="hljs-literal">False</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(p))] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s))]<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(p)):<br>                <span class="hljs-keyword">if</span>(p[j]!=<span class="hljs-string">'*'</span>):<br>                    <span class="hljs-keyword">if</span>((p[j]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>) <span class="hljs-keyword">or</span> p[j]==s[i]):<br>                        dp[i][j] = dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">if</span>(p[j-<span class="hljs-number">1</span>]==s[i] <span class="hljs-keyword">or</span> (p[j-<span class="hljs-number">1</span>]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>)): dp[i][j] = dp[i][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j] <br>                    <span class="hljs-comment">#dp[i][j] = dp[i][j-2] or dp[i-1][j] #ç›´æ¥0æ¬¡æˆ–è€…å¤šæ¬¡</span><br>                    <span class="hljs-keyword">else</span>:dp[i][j] = dp[i][j-<span class="hljs-number">2</span>]<br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>][<span class="hljs-built_in">len</span>(p)-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer18 åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</title>
    <link href="/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer18/"/>
    <url>/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer18/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚è¿”å›åˆ é™¤åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚<br>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 5</span><br><span class="hljs-section">è¾“å‡º: [4,1,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;5&nbsp;çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 1 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 1</span><br><span class="hljs-section">è¾“å‡º: [4,5,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;1&nbsp;çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 5 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>é¢˜ç›®ä¿è¯é“¾è¡¨ä¸­èŠ‚ç‚¹çš„å€¼äº’ä¸ç›¸åŒ</li><li>è‹¥ä½¿ç”¨ C æˆ– C++ è¯­è¨€ï¼Œä½ ä¸éœ€è¦ free æˆ– delete è¢«åˆ é™¤çš„èŠ‚ç‚¹</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¸¸è§„æ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteNode</span>(<span class="hljs-params">self, head: ListNode, val: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        p = head<br>        <span class="hljs-keyword">if</span>(head.val==val):<span class="hljs-keyword">return</span> p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span>(p.<span class="hljs-built_in">next</span>):<br>            <span class="hljs-keyword">if</span>(p.<span class="hljs-built_in">next</span>.val == val):<br>                p.<span class="hljs-built_in">next</span> = p.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>                <span class="hljs-keyword">return</span> head<br>            p = p.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer24 åè½¬é“¾è¡¨</title>
    <link href="/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer24/"/>
    <url>/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer24/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åè½¬é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL<br>è¾“å‡º: <span class="hljs-number">5</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">1</span>-&gt;NULL<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ¯”è¾ƒå¸¸è§„ï¼Œéå†é“¾è¡¨æŠŠå…ƒç´ ç§»åŠ¨åˆ°å¤´èŠ‚ç‚¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(head):<span class="hljs-keyword">return</span> head<br>        p = head.<span class="hljs-built_in">next</span><br>        head.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span>(p):<br>            t = p.<span class="hljs-built_in">next</span><br>            p.<span class="hljs-built_in">next</span> = head<br>            head = p<br>            p = t<br>        <span class="hljs-keyword">return</span> head<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer16  æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</title>
    <link href="/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer16/"/>
    <url>/2021/08/21/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer16/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œxnï¼‰ã€‚ä¸å¾—ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.00000</span>, n = <span class="hljs-number">10</span><br>è¾“å‡ºï¼š<span class="hljs-number">1024.00000</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.10000</span>, n = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">9.26100</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-100.0 &lt; x &lt; 100.0</li><li>$-2^{31}$ &lt;= n &lt;= $2^{31}-1$</li><li>$-10^4$ &lt;= $x^n$ &lt;= $10^4$</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å°†xä¹˜ä»¥næ¬¡ï¼Œä½†æ˜¯è¿™ç§æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚åˆ¤é¢˜æ—¶æ—¶é—´è¶…å‡ºé™åˆ¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n):<br>            result *= x<br>            n -=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šå¯ä»¥åˆ©ç”¨x *= x å’Œå¯¹nå³ç§»æ“ä½œå¯ä»¥å¾—åˆ°$x,x<sup>2,x</sup>4,x<sup>8,x</sup>{16}â€¦$ï¼Œè€Œ$x<sup>{11}$å¯ä»¥äºŒè¿›åˆ¶æŒ‡æ•°è¡¨ç¤ºä¸º$x</sup>{1011}$ä¹Ÿå°±æ˜¯$x \times x^2 \times x^8$ã€‚è¿™æ ·åŸæœ¬éœ€è¦å¾ªç¯11æ¬¡å°±åªéœ€è¦å¾ªç¯4æ¬¡</p><p>æ ¹æ®æç¤ºæ¡ä»¶ï¼Œå¾ªç¯æœ€å¤šä¸ä¼šè¶…è¿‡32æ¬¡ã€‚å°±å¾ˆæ£’ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n): <span class="hljs-comment">#æ—¶é—´å¤æ‚åº¦å¤§å¤§é™ä½ ä¸è¶…è¿‡32æ¬¡ O(logn)</span><br>            <span class="hljs-keyword">if</span>(n &amp; <span class="hljs-number">1</span>):result *= x <span class="hljs-comment">#çœ‹æœ€åä¸€ä½æ˜¯å¦ä¸º1</span><br>            x *= x<br>            n = n&gt;&gt;<span class="hljs-number">1</span> <span class="hljs-comment">#nå³ç§» 1011-ã€‹101</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å¿«é€Ÿå¹‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>å¿«é€Ÿå¹‚</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer17 æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</title>
    <link href="/2021/08/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer17/"/>
    <url>/2021/08/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer17/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•°å­— nï¼ŒæŒ‰é¡ºåºæ‰“å°å‡ºä» 1 åˆ°æœ€å¤§çš„ n ä½åè¿›åˆ¶æ•°ã€‚æ¯”å¦‚è¾“å…¥ 3ï¼Œåˆ™æ‰“å°å‡º 1ã€2ã€3 ä¸€ç›´åˆ°æœ€å¤§çš„ 3 ä½æ•° 999ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: n = <span class="hljs-number">1</span><br>è¾“å‡º: [<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">5,6,7,8</span>,<span class="hljs-number">9</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>ç”¨è¿”å›ä¸€ä¸ªæ•´æ•°åˆ—è¡¨æ¥ä»£æ›¿æ‰“å°</li><li>n ä¸ºæ­£æ•´æ•°</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å€Ÿç”¨pythonçš„ç±»å‹è½¬æ¢çš„åŒ…å®¹æ€§ï¼Œç›´æ¥å¯ä»¥è¿”å›åˆ—è¡¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">pow</span>(<span class="hljs-number">10</span>,n))] <span class="hljs-comment">#æˆ–è€…10**n</span><br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œè€ƒç‚¹æ˜¯å¤§æ•°è¶Šç•Œæƒ…å†µä¸‹çš„æ‰“å°ã€‚<br>è§£å†³æ€è·¯ï¼Œç”¨å­—ç¬¦ä¸²çš„å…¨æ’åˆ—æ¥è§£å†³æ•°å­—çš„è¶Šç•Œæƒ…å†µã€‚åŸºäºåˆ†æ²»ç®—æ³•çš„æ€æƒ³ï¼Œå…ˆå›ºå®šé«˜ä½ï¼Œå‘ä½ä½é€’å½’ï¼Œå½“ä¸ªä½å·²è¢«å›ºå®šæ—¶ï¼Œæ·»åŠ æ•°å­—çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚å½“ n = 2æ—¶ï¼ˆæ•°å­—èŒƒå›´ 1 - 99 ï¼‰ï¼Œå›ºå®šåä½ä¸º 0- 9 ï¼ŒæŒ‰é¡ºåºä¾æ¬¡å¼€å¯é€’å½’ï¼Œå›ºå®šä¸ªä½ 0 - 9 ï¼Œç»ˆæ­¢é€’å½’å¹¶æ·»åŠ æ•°å­—å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; [<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">x</span>):</span><br>            <span class="hljs-keyword">if</span> x == n:<br>                s = <span class="hljs-string">''</span>.join(num[self.start:])<br>                <span class="hljs-keyword">if</span> s != <span class="hljs-string">'0'</span>: res.append(<span class="hljs-built_in">int</span>(s))<br>                <span class="hljs-keyword">if</span> n - self.start == self.nine: self.start -= <span class="hljs-number">1</span><br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>                <span class="hljs-keyword">if</span> i == <span class="hljs-number">9</span>: self.nine += <span class="hljs-number">1</span><br>                num[x] = <span class="hljs-built_in">str</span>(i)<br>                dfs(x + <span class="hljs-number">1</span>)<br>            self.nine -= <span class="hljs-number">1</span><br>        <br>        num, res = [<span class="hljs-string">'0'</span>] * n, []<br>        self.nine = <span class="hljs-number">0</span><br>        self.start = n - <span class="hljs-number">1</span><br>        dfs(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><ul><li>å­—ç¬¦ä¸²å·¦è¾¹ç•Œå®šä¹‰ï¼š å£°æ˜å˜é‡ start è§„å®šå­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œï¼Œä»¥ä¿è¯æ·»åŠ çš„æ•°å­—å­—ç¬¦ä¸² num[start:] ä¸­æ— é«˜ä½å¤šä½™çš„ 0 ã€‚ä¾‹å¦‚å½“ n = 2 æ—¶, 1 - 9æ—¶ start = 1ï¼Œ 10 - 99 æ—¶ start = 0ã€‚</li><li>å·¦è¾¹ç•Œ start å˜åŒ–è§„å¾‹ï¼š è§‚å¯Ÿå¯çŸ¥ï¼Œå½“è¾“å‡ºæ•°å­—çš„æ‰€æœ‰ä½éƒ½æ˜¯ 9 æ—¶ï¼Œåˆ™ä¸‹ä¸ªæ•°å­—éœ€è¦å‘æ›´é«˜ä½è¿› 11 ï¼Œæ­¤æ—¶å·¦è¾¹ç•Œ start éœ€è¦å‡11 ï¼ˆå³é«˜ä½å¤šä½™çš„ 0 å‡å°‘ä¸€ä¸ªï¼‰ã€‚ä¾‹å¦‚å½“ n = 3ï¼ˆæ•°å­—èŒƒå›´ 1 - 999 ï¼‰æ—¶ï¼Œå·¦è¾¹ç•Œ start éœ€è¦å‡ 1 çš„æƒ…å†µæœ‰ï¼š â€œ009â€ è¿›ä½è‡³ â€œ010â€ ï¼Œ â€œ099â€ è¿›ä½è‡³ â€œ100â€ ã€‚è®¾æ•°å­—å„ä½ä¸­ 9 çš„æ•°é‡ä¸º nine ï¼Œæ‰€æœ‰ä½éƒ½ä¸º 9 çš„åˆ¤æ–­æ¡ä»¶å¯ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼šn - start = nineç»Ÿè®¡ nine çš„æ–¹æ³•ï¼š å›ºå®šç¬¬ x ä½æ—¶ï¼Œå½“ i = 9åˆ™æ‰§è¡Œ nine = nine + 1 ï¼Œå¹¶åœ¨å›æº¯å‰æ¢å¤ nine = nine - 1</li></ul>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å¤§æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å¤§æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‹‰æ™®æ‹‰æ–¯ç®—å­</title>
    <link href="/2021/08/20/img_process/laplace/"/>
    <url>/2021/08/20/img_process/laplace/</url>
    
    <content type="html"><![CDATA[<blockquote><p>â€‹å›¾åƒé”åŒ–å¤„ç†çš„ä½œç”¨æ˜¯ä½¿ç°åº¦åå·®å¢å¼ºï¼Œä»è€Œä½¿æ¨¡ç³Šå›¾åƒå˜å¾—æ›´åŠ æ¸…æ™°ã€‚å›¾åƒæ¨¡ç³Šçš„å®è´¨å°±æ˜¯å›¾åƒå—åˆ°å¹³å‡è¿ç®—æˆ–ç§¯åˆ†è¿ç®—ï¼Œå› æ­¤å¯ä»¥å¯¹å›¾åƒè¿›è¡Œé€†è¿ç®—ï¼Œå¦‚å¾®åˆ†è¿ç®—èƒ½å¤Ÿçªå‡ºå›¾åƒç»†èŠ‚ï¼Œä½¿å›¾åƒå˜å¾—æ›´ä¸ºæ¸…æ™°ã€‚<br>â€‹ç§¯åˆ†è¿ç®—çš„æ¨¡æ¿å¯ä»¥å¹³æ»‘å›¾åƒï¼Œåè¿‡æ¥å¯¹åº”å¾®åˆ†è¿ç®—çš„æ¨¡æ¿å·ç§¯å¯ä»¥é”åŒ–å›¾åƒã€‚é”åŒ–æ¨¡æ¿ç³»æ•°çš„å–å€¼å†ä¸­å¿ƒä¸ºæ­£æ•°è€Œå‘¨å›´ä¸ºè´Ÿæ•°ã€‚æˆ–è€…ä¸­å¿ƒä¸ºè´Ÿæ•°å‘¨å›´ä¸ºæ­£æ•°ã€‚è€Œæ‹‰æ™®æ‹‰æ–¯ç®—å­å°±æ˜¯ä¸€ç§å¸¸ç”¨çš„çº¿æ€§é”åŒ–æ»¤æ³¢çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯">æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯</h2><p>åœ¨å›¾åƒä¸­çš„è¾¹ç¼˜åŒºåŸŸï¼Œåƒç´ å€¼ä¼šå‘ç”Ÿâ€œè·³è·ƒâ€ï¼Œå¯¹è¿™äº›åƒç´ æ±‚å¯¼ï¼Œåœ¨å…¶ä¸€é˜¶å¯¼æ•°åœ¨è¾¹ç¼˜ä½ç½®ä¸ºæå€¼ï¼ˆSobelç®—å­ï¼‰ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic1.png" alt="img"></p><p>å¦‚æœå¯¹åƒç´ å€¼æ±‚äºŒé˜¶å¯¼æ•°ï¼Œä¼šå‘ç°è¾¹ç¼˜å¤„çš„å¯¼æ•°å€¼ä¸º0ï¼›<strong>ä½†æ˜¯å¹¶ä¸æ˜¯è¯´äºŒé˜¶å¯¼æ•°ä¸º0å°±æ„å‘³ç€æ˜¯è¾¹ç¼˜</strong>ã€‚</p><p><img src="https://picture.mulindya.com/laplace-pic2.png" alt=""></p><h2 id="è®¡ç®—æ–¹æ³•">è®¡ç®—æ–¹æ³•</h2><h3 id="åƒç´ äºŒé˜¶å¯¼æ•°">åƒç´ äºŒé˜¶å¯¼æ•°</h3><p>äºŒé˜¶å¯¼æ•°çš„è®¡ç®—æ–¹æ³•ï¼š<br>$$<br>\nabla^2f = \frac{\partial^2 f}{\partial x<sup>2}+\frac{\partial</sup>2 f}{\partial y^2}<br>$$<br>åˆ†åˆ«æ²¿ç€Xå’ŒYæ–¹å‘æœ‰äºŒé˜¶åå¯¼æ•°å‡å¯å€Ÿç”¨å·®åˆ†è®¡ç®—ï¼š<br>$$<br>\frac{\partial^2 f}{\partial x^2} = f(x+1,y)+f(x-1,y)-2f(x,y)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial y^2} = f(x,y+1)+f(x,y-1)-2f(x,y)<br>$$</p><p>é‚£ä¹ˆå¯ä»¥å¾—åˆ°<br>$$<br>\nabla^2f = f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)<br>$$</p><h3 id="æ¨¡æ¿å·ç§¯">æ¨¡æ¿å·ç§¯</h3><p>å¯¹åº”çš„æ¨¡æ¿å·ç§¯å³ä¸º</p>$$\begin{bmatrix} 0 &amp; 1 &amp; 0\\ 1 &amp; -4 &amp; 1 \\ 0 &amp; 1 &amp; 0 \end{bmatrix} æˆ–è€…\begin{bmatrix} 0 &amp; -1 &amp; 0 \\ -1 &amp; 4 &amp; -1 \\ 0 &amp; -1 &amp; 0 \end{bmatrix}$$<p>å‰è€…æ˜¯maskä¸­å¿ƒä¸ºè´Ÿæ•°ï¼Œåè€…æ˜¯maskä¸­å¿ƒä¸ºæ­£æ•°ï¼›ä»–ä»¬çš„ç›®çš„å’Œæ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯è¡¨ç°å½¢å¼ç¨æœ‰ä¸åŒï¼Œå‰è€…åœ¨å·ç§¯åï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚åè€…ç›¸åã€‚</p><p>maskä¸ºè´Ÿæ•°æ—¶ï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚å¯ä»¥å‚è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic3.png" alt=""></p><p>ä¸Šè¿°æ˜¯è€ƒè™‘ä¸­å¿ƒåƒç´ 4é‚»åŸŸï¼Œç±»ä¼¼è¿˜æœ‰è€ƒè™‘8é‚»åŸŸï¼Œæ­¤æ—¶ä¸­å¿ƒç‚¹åŒº8æˆ–-8ï¼Œå‘¨å›´ä¸º-1æˆ–1ã€‚</p>$$\begin{bmatrix} 1 &amp; 1 &amp; 1 \\ 1 &amp; -8 &amp; 1 \\ 1 &amp; 1 &amp; 1 \end{bmatrix} æˆ–è€…\begin{bmatrix} -1 &amp; -1 &amp; -1 \\ -1 &amp; 8 &amp; -1 \\ -1 &amp; -1 &amp; -1 \end{bmatrix}$$<h2 id="å›¾åƒé”åŒ–">å›¾åƒé”åŒ–</h2><p>é”åŒ–å¤„ç†å¯é€‰æ‹©æ‹‰æ™®æ‹‰æ–¯ç®—å­å¯¹åŸå›¾åƒè¿›è¡Œå¤„ç†ï¼Œäº§ç”Ÿæè¿°ç°åº¦çªå˜çš„å›¾åƒï¼Œå†å°†æ‹‰æ™®æ‹‰æ–¯å›¾åƒä¸åŸå§‹å›¾åƒå åŠ è€Œäº§ç”Ÿé”åŒ–å›¾åƒã€‚æ‹‰æ™®æ‹‰æ–¯é”åŒ–çš„åŸºæœ¬æ–¹æ³•å¯ä»¥ç”±ä¸‹å¼è¡¨ç¤ºï¼š<br>$$<br>g(x,y) = \begin{cases} f(x,y) - \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºè´Ÿæ•°}\f(x,y) + \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºæ­£æ•°} \end{cases}<br>$$</p><p>è¿™ç§ç®€å•çš„é”åŒ–æ–¹æ³•æ—¢å¯ä»¥äº§ç”Ÿæ‹‰æ™®æ‹‰æ–¯é”åŒ–å¤„ç†çš„æ•ˆæœï¼ŒåŒæ—¶åˆèƒ½ä¿ç•™èƒŒæ™¯ä¿¡æ¯ï¼Œå°†åŸå§‹å›¾åƒå åŠ åˆ°æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„å¤„ç†ç»“æœä¸­å»ï¼Œå¯ä»¥ä½¿å›¾åƒä¸­çš„å„ç°åº¦å€¼å¾—åˆ°ä¿ç•™ï¼Œä½¿ç°åº¦çªå˜å¤„çš„å¯¹æ¯”åº¦å¾—åˆ°å¢å¼ºï¼Œ<strong>æœ€ç»ˆç»“æœæ˜¯åœ¨ä¿ç•™å›¾åƒèƒŒæ™¯çš„å‰æä¸‹ï¼Œçªç°å‡ºå›¾åƒä¸­å°çš„ç»†èŠ‚ä¿¡æ¯</strong>ã€‚</p><p>ç¼ºç‚¹æ˜¯æ²¡æœ‰äº†è¾¹ç¼˜çš„æ–¹å‘ä¿¡æ¯ï¼›åŒå€åŠ å¼ºäº†å™ªå£°çš„å½±å“ã€‚</p><blockquote><p>é”åŒ–å¤„ç†çš„å…¬å¼ä»æ¨¡æ¿å½¢å¼å®¹æ˜“çœ‹å‡ºï¼Œå¦‚æœåœ¨å›¾åƒä¸­ä¸€ä¸ªè¾ƒæš—çš„åŒºåŸŸä¸­å‡ºç°äº†ä¸€ä¸ªäº®ç‚¹ï¼Œé‚£ä¹ˆç”¨æ‹‰æ™®æ‹‰æ–¯è¿ç®—å°±ä¼šä½¿è¿™ä¸ªäº®ç‚¹å˜å¾—æ›´äº®ã€‚å› ä¸ºå›¾åƒä¸­çš„è¾¹ç¼˜å°±æ˜¯é‚£äº›ç°åº¦å‘ç”Ÿè·³å˜çš„åŒºåŸŸï¼Œæ‰€ä»¥æ‹‰æ™®æ‹‰æ–¯é”åŒ–æ¨¡æ¿åœ¨è¾¹ç¼˜æ£€æµ‹ä¸­å¾ˆæœ‰ç”¨ã€‚ä¸€èˆ¬å¢å¼ºæŠ€æœ¯å¯¹äºé™¡å³­çš„è¾¹ç¼˜å’Œç¼“æ…¢å˜åŒ–çš„è¾¹ç¼˜å¾ˆéš¾ç¡®å®šå…¶è¾¹ç¼˜çº¿çš„ä½ç½®ã€‚ä½†æ­¤ç®—å­å´å¯ç”¨äºŒæ¬¡å¾®åˆ†æ­£å³°å’Œè´Ÿå³°ä¹‹é—´çš„è¿‡é›¶ç‚¹æ¥ç¡®å®šï¼Œå¯¹å­¤ç«‹ç‚¹æˆ–ç«¯ç‚¹æ›´ä¸ºæ•æ„Ÿï¼Œå› æ­¤ç‰¹åˆ«é€‚ç”¨äºä»¥<strong>çªå‡ºå›¾åƒä¸­çš„å­¤ç«‹ç‚¹ã€å­¤ç«‹çº¿æˆ–çº¿ç«¯ç‚¹ä¸ºç›®çš„çš„åœºåˆ</strong>ã€‚åŒæ¢¯åº¦ç®—å­ä¸€æ ·ï¼Œæ‹‰æ™®æ‹‰æ–¯ç®—å­ä¹Ÿä¼šå¢å¼ºå›¾åƒä¸­çš„å™ªå£°ï¼Œæœ‰æ—¶ç”¨æ‹‰æ™®æ‹‰æ–¯ç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹æ—¶ï¼Œå¯å°†å›¾åƒå…ˆè¿›è¡Œ<strong>å¹³æ»‘å¤„ç†</strong>ã€‚</p></blockquote><h2 id="ä»£ç ">ä»£ç </h2><p>åœ¨OpenCVå†…ä½¿ç”¨å‡½æ•°cv2.Laplacian()å®ç°Laplacianç®—å­çš„è®¡ç®—ï¼Œè¯¥å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">dst = cv2.<span class="hljs-constructor">Laplacian( <span class="hljs-params">src</span>, <span class="hljs-params">ddepth</span>[, <span class="hljs-params">ksize</span>[, <span class="hljs-params">scale</span>[, <span class="hljs-params">delta</span>[, <span class="hljs-params">borderType</span>]]]] )</span><br></code></pre></td></tr></tbody></table></figure><p>å¼ä¸­ï¼š<br>â— dstä»£è¡¨ç›®æ ‡å›¾åƒã€‚<br>â— srcä»£è¡¨åŸå§‹å›¾åƒã€‚<br>â— ddepthä»£è¡¨ç›®æ ‡å›¾åƒçš„æ·±åº¦ã€‚<br>â— ksizeä»£è¡¨ç”¨äºè®¡ç®—äºŒé˜¶å¯¼æ•°çš„æ ¸å°ºå¯¸å¤§å°ã€‚è¯¥å€¼å¿…é¡»æ˜¯æ­£çš„å¥‡æ•°ã€‚<br>â— scaleä»£è¡¨è®¡ç®—Laplacianå€¼çš„ç¼©æ”¾æ¯”ä¾‹å› å­ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å€¼ä¸º1ï¼Œè¡¨ç¤ºä¸è¿›è¡Œç¼©æ”¾ã€‚<br>â— deltaä»£è¡¨åŠ åˆ°ç›®æ ‡å›¾åƒä¸Šçš„å¯é€‰å€¼ï¼Œé»˜è®¤ä¸º0ã€‚<br>â— borderType : ç”¨äºæ¨æ–­å›¾åƒå¤–éƒ¨åƒç´ çš„è¾¹ç•Œæ¨¡å¼ï¼Œä¸€èˆ¬æ˜¯DORDER_DEFAULT,ä¸æ”¯æŒBORDER_WRAP.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br>img = cv2.imread(<span class="hljs-string">"img.png"</span>,<span class="hljs-number">0</span>)<br>laplacian = cv2.Laplacian(img,cv2.CV_64F)<br>laplacian = cv2.convertScaleABs(laplacian)<br>cv2.imshow(img)<br>cv2.imshow(laplacian)<br></code></pre></td></tr></tbody></table></figure><p>åŸå›¾<br><img src="https://picture.mulindya.com/laplace-pic4.png" alt=""><br>å¤„ç†ä¹‹å<br><img src="https://picture.mulindya.com/laplace-pic5.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer22 é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</title>
    <link href="/2021/08/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer22/"/>
    <url>/2021/08/20/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer22/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬1ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ 6 ä¸ªèŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯ 1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ 3 ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º 4 çš„èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">ç»™å®šä¸€ä¸ªé“¾è¡¨: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>, å’Œ k = <span class="hljs-number">2.</span><br>è¿”å›é“¾è¡¨ <span class="hljs-number">4</span>-&gt;<span class="hljs-number">5.</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å…ˆç¡®å®šé“¾è¡¨çš„é•¿åº¦ï¼Œç„¶åå†ç§»åŠ¨å¯¹åº”çš„ç»“ç‚¹ä¸ªæ•°ã€‚é‚£ä¹ˆå°±éœ€è¦O(2n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(x):<br>            cnt += <span class="hljs-number">1</span><br>            x = x.<span class="hljs-built_in">next</span><br>        t = cnt - k<br>        <span class="hljs-keyword">while</span>(t):<br>            y = y.<span class="hljs-built_in">next</span><br>            t -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œä½¿å¾—xä¸yç›¸è·kå…ƒç´ ï¼Œç„¶åxéå†åˆ°æœ€åï¼Œyå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„ç»“æœã€‚æ­¤æ—¶åªéœ€è¦O(n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        <span class="hljs-keyword">while</span>(x):<br>            <span class="hljs-keyword">if</span>(k&lt;=<span class="hljs-number">0</span>):y = y.<span class="hljs-built_in">next</span><br>            x = x.<span class="hljs-built_in">next</span><br>            k -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤–åˆŠé˜…è¯»--Self-awareness</title>
    <link href="/2021/08/19/english/self-aware/"/>
    <url>/2021/08/19/english/self-aware/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://paper.mulindya.com/Self-awareness.pdf">https://paper.mulindya.com/Self-awareness.pdf</a></p></blockquote><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Self-awareness.pdf" width="100%" height="600"></iframe>]]></content>
    
    
    <categories>
      
      <category>è‹±è¯­</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‹±è¯­</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer29 é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</title>
    <link href="/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer29/"/>
    <url>/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer29/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,2,3]</span>,<span class="hljs-comment">[4,5,6]</span>,<span class="hljs-comment">[7,8,9]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2,3,6,9,8,7,4,5]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šmatrix = [[<span class="hljs-number">1,2,3,4</span>],[<span class="hljs-number">5,6,7,8</span>],[<span class="hljs-number">9,10,11,12</span>]]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">8,12,11,10</span>,<span class="hljs-number">9,5,6,7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= matrix.length &lt;= 100</code></li><li><code>0 &lt;= matrix[i].length &lt;= 100</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ˜¯å¯¹æ•°ç»„è¿›è¡Œå¸¸è§„æ“ä½œï¼Œå®‰è£…é¢˜ç›®è¦æ±‚è¿›è¡Œéå†åˆ¤æ–­ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> matrix: <span class="hljs-keyword">return</span> []<br>        l, r, t, b, res = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>]) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix) - <span class="hljs-number">1</span>, []<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(l, r + <span class="hljs-number">1</span>): res.append(matrix[t][i]) <span class="hljs-comment"># left to right</span><br>            t += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t, b + <span class="hljs-number">1</span>): res.append(matrix[i][r]) <span class="hljs-comment"># top to bottom</span><br>            r -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r, l - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[b][i]) <span class="hljs-comment"># right to left</span><br>            b -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b, t - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[i][l]) <span class="hljs-comment"># bottom to top</span><br>            l += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ˜¯é‡‡ç”¨ç›¸å…³çš„æ–¹æ³•ï¼Œ<code>pop(0)</code>å¯ä»¥å¼¹å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨$zip(<em>)$ç›¸å½“äºå¯¹çŸ©é˜µè½¬ç½®ã€‚<code>list(zip(*matrix))[::-1]</code>å°±æ˜¯å¯¹çŸ©é˜µé€†æ—‹è½¬90åº¦ã€‚zipå’Œzip(</em>)ä¹Ÿæ˜¯ä¸€å¯¹é€†æ“ä½œï¼›å‰è€…è¡¨ç¤ºå‹ç¼©ï¼Œåè€…è¡¨ç¤ºè§£å‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        res = []<br>        <span class="hljs-keyword">while</span> matrix:<br>            res += matrix.pop(<span class="hljs-number">0</span>)<br>            matrix = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(*matrix))[::-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><blockquote><p>pop &amp; zipçŸ¥è¯†å‚è€ƒ</p><p><a href="https://blog.csdn.net/zhanshen112/article/details/90341177">https://blog.csdn.net/zhanshen112/article/details/90341177</a></p><p><a href="https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html">https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer15 äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</title>
    <link href="/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer15/"/>
    <url>/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer15/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º â€˜1â€™ çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸º æ±‰æ˜é‡é‡).ï¼‰ã€‚<br>æç¤ºï¼š</p><ul><li>è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚</li><li>åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ äºŒè¿›åˆ¶è¡¥ç  è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„&nbsp;ç¤ºä¾‹ 3&nbsp;ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">11</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000000001011</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000000001011</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">128</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000010000000</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000010000000</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn =<span class="hljs-number"> 4294967293 </span>(æ§åˆ¶å°è¾“å…¥ 11111111111111111111111111111101ï¼Œéƒ¨åˆ†è¯­è¨€ä¸­ n = -3ï¼‰<br>è¾“å‡ºï¼š31<br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸²<span class="hljs-number"> 11111111111111111111111111111101 </span>ä¸­ï¼Œå…±æœ‰<span class="hljs-number"> 31 </span>ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯é‡‡ç”¨å†…ç½®çš„binå‡½æ•°ï¼Œå°†nè½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ã€‚ç„¶åç»Ÿè®¡å…¶å­—ç¬¦ä¸²çš„1çš„ä¸ªæ•°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        s = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">bin</span>(n))<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span>(x==<span class="hljs-string">'1'</span>):<br>                cnt+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯é‡‡ç”¨ç§»ä½æ“ä½œ<code>&lt;&lt;</code>å’ŒæŒ‰ä½ä¸<code>&amp;</code>å¯¹è¾“å…¥çš„æ•°å­—è¿›è¡Œç»Ÿè®¡ã€‚å¦‚ï¼š11 &amp; 8 = 8ï¼ˆ1011 &amp; 100 = 100ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>       cnt = <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">if</span>(n &amp; (<span class="hljs-number">1</span> &lt;&lt; i)))<br>       <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p><font color="hotpink">ä¸‹é¢è¿™ä¸ªå°±å¾ˆå¦™äº†</font></p><p>ç¬¬ä¸‰ç§æ–¹æ³• åˆ©ç”¨ <code>n &amp;ï¼ˆn-1ï¼‰</code></p><p>(nâˆ’1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1 å˜æˆ 0 ï¼Œæ­¤ 1 å³è¾¹çš„ 0 éƒ½å˜æˆ 1ã€‚<br>n &amp; (n - 1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1å˜æˆ 0ï¼Œå…¶ä½™ä¸å˜ã€‚<br>åˆ©ç”¨æ­¤ç‰¹æ€§æ¯æ¬¡å¾ªç¯å¯ä»¥æ¶ˆå»ä¸€ä¸ª1</p><p><img src="https://picture.mulindya.com/leetcode-offer15pic1.png" alt=""></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> n:<br>            res += <span class="hljs-number">1</span><br>            n &amp;= n - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å˜é‡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å˜é‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer20 è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</title>
    <link href="/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer20/"/>
    <url>/2021/08/19/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer20/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚</p><p><strong>æ•°å€¼</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>è‹¥å¹²ç©ºæ ¼</li><li>ä¸€ä¸ª&nbsp;å°æ•°&nbsp;æˆ–è€…&nbsp;æ•´æ•°</li><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ª&nbsp;â€˜eâ€™&nbsp;æˆ–&nbsp;â€˜Eâ€™&nbsp;ï¼Œåé¢è·Ÿç€ä¸€ä¸ª&nbsp;æ•´æ•°</li><li>è‹¥å¹²ç©ºæ ¼</li></ol><p><strong>å°æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</p></li><li><p>ä¸‹è¿°æ ¼å¼ä¹‹ä¸€ï¼š</p><ol><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™</li><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢å†è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li><li>ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li></ol></li></ol><p><strong>æ•´æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</li><li>è‡³å°‘ä¸€ä½æ•°å­—</li></ol><p>éƒ¨åˆ†<strong>æ•°å€¼</strong>åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ+100â€, â€œ5e2â€, â€œ-123â€, â€œ3.1416â€, â€œ-1E-16â€, â€œ0123â€]</li></ul><p>éƒ¨åˆ†éæ•°å€¼åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ12eâ€, â€œ1a3.14â€, â€œ1.2.3â€, â€œÂ±5â€, â€œ12e+5.4â€]</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"0"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"e"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"."</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"    .1  "</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length &lt;= 20</li><li>s ä»…å«è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ï¼Œæ•°å­—ï¼ˆ0-9ï¼‰ï¼ŒåŠ å· â€˜+â€™ ï¼Œå‡å· â€˜-â€™ ï¼Œç©ºæ ¼ â€™ â€™ æˆ–è€…ç‚¹ â€˜.â€™ ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h3><p>æœ¬é¢˜è§£å†³æ–¹æ¡ˆæ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºã€‚æ ¹æ®å­—ç¬¦ç±»å‹å’Œåˆæ³•æ•°å€¼çš„ç‰¹ç‚¹ï¼Œå®šä¹‰çŠ¶æ€ï¼Œå†ç”»å‡ºçŠ¶æ€è½¬ç§»å›¾ã€‚</p><h4 id="å­—ç¬¦ç±»å‹">å­—ç¬¦ç±»å‹</h4><p>ç©ºæ ¼:â€™ â€˜ï¼Œæ•°å­—:dï¼Œæ­£è´Ÿå·:sï¼Œå°æ•°ç‚¹:â€™.'ï¼Œå¹‚ç¬¦å·ï¼še</p><h4 id="çŠ¶æ€å®šä¹‰">çŠ¶æ€å®šä¹‰</h4><p>ä»å·¦åˆ°å³å¯ä»¥å®šä¹‰ä¸º</p><p>0.å·¦è¾¹çš„<code>ç©ºæ ¼</code></p><ol><li>Eä¹‹å‰çš„<code>æ­£è´Ÿå·</code></li><li>å°æ•°ç‚¹å‰çš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹ï¼Œå°æ•°ç‚¹ä¹‹åçš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹å‰ä¸ºç©ºæ ¼ï¼Œ<code>å°æ•°ç‚¹</code>ï¼Œå°æ•°ç‚¹åä¸ºæ•°å­—</li><li><code>å¹‚ç¬¦å·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ­£è´Ÿå·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ•°å­—</code></li><li>ç»“å°¾çš„<code>ç©ºæ ¼</code></li></ol><p><img src="https://picture.mulindya.com/leetcode-offer20-pic1.png" alt=""></p><h4 id="ç»“æŸçŠ¶æ€">ç»“æŸçŠ¶æ€</h4><p>æ­£å¸¸çš„ç»“æŸçŠ¶æ€æœ‰2ï¼Œ3ï¼Œ7ï¼Œ8</p><h3 id="ç®—æ³•æµç¨‹">ç®—æ³•æµç¨‹</h3><h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4><h5 id="1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status">1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status</h5><p>$states[i]$è¡¨ç¤ºæ‰€å¤„çš„çŠ¶æ€ï¼Œ$i$ä¸ºæ‰€å¤„çš„çŠ¶æ€è¡¨ç¤ºï¼Œ$states[i]$ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ä»içŠ¶æ€åˆ°å¯è½¬ç§»çš„çŠ¶æ€ï¼›ä½¿ç”¨é”®å€¼å¯¹æ¥è¡¨ç¤º$(key,value)$ï¼šè‹¥è¾“å…¥$key$ï¼Œå¯ä»çŠ¶æ€$i$è½¬ç§»è‡³çŠ¶æ€$value$.</p><p>å½“å‰çŠ¶æ€pï¼šåˆå§‹çŠ¶æ€ä¸º0</p><h5 id="2ï¼Œè½¬ç§»å¾ªç¯">2ï¼Œè½¬ç§»å¾ªç¯</h5><p>è¿˜éœ€è¦<strong>è®°å½•å­—ç¬¦ç±»å‹</strong>tï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦c</p><ul><li>å½“ c ä¸ºæ­£è´Ÿå·æ—¶ï¼Œæ‰§è¡Œ t = â€˜sâ€™ ;</li><li>å½“ c ä¸ºæ•°å­—æ—¶ï¼Œæ‰§è¡Œ t = â€˜dâ€™ ;</li><li>å½“ c ä¸º e , E æ—¶ï¼Œæ‰§è¡Œ t = â€˜eâ€™ ;</li><li>å½“ c ä¸º . , ç©ºæ ¼ æ—¶ï¼Œæ‰§è¡Œ t = c ï¼ˆå³ç”¨å­—ç¬¦æœ¬èº«è¡¨ç¤ºå­—ç¬¦ç±»å‹ï¼‰;</li><li>å¦åˆ™ï¼Œæ‰§è¡Œ t = â€˜?â€™ ï¼Œä»£è¡¨ä¸ºä¸å±äºåˆ¤æ–­èŒƒå›´çš„éæ³•å­—ç¬¦ï¼Œåç»­ç›´æ¥è¿”å› falseã€‚</li></ul><p><strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼š è‹¥å­—ç¬¦ç±»å‹ tä¸åœ¨å“ˆå¸Œè¡¨  $states[p]$ ä¸­ï¼Œè¯´æ˜æ— æ³•è½¬ç§»è‡³ä¸‹ä¸€çŠ¶æ€ï¼Œå› æ­¤ç›´æ¥è¿”å› False ã€‚<br><strong>çŠ¶æ€è½¬ç§»</strong>ï¼š çŠ¶æ€ p è½¬ç§»è‡³ $states[p][t]$ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        states = [<br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'s'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> }, <span class="hljs-comment"># 0. start with 'blank'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> } ,                <span class="hljs-comment"># 1. 'sign' before 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }, <span class="hljs-comment"># 2. 'digit' before 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },         <span class="hljs-comment"># 3. 'digit' after 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span> },                         <span class="hljs-comment"># 4. 'digit' after 'dot' (â€˜blankâ€™ before 'dot')</span><br>            { <span class="hljs-string">'s'</span>: <span class="hljs-number">6</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                 <span class="hljs-comment"># 5. 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                         <span class="hljs-comment"># 6. 'sign' after 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },                 <span class="hljs-comment"># 7. 'digit' after 'e'</span><br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }                          <span class="hljs-comment"># 8. end with 'blank'</span><br>        ]<br>        p = <span class="hljs-number">0</span>                           <span class="hljs-comment"># start with state 0</span><br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> <span class="hljs-string">'0'</span> &lt;= c &lt;= <span class="hljs-string">'9'</span>: t = <span class="hljs-string">'d'</span> <span class="hljs-comment"># digit</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"+-"</span>: t = <span class="hljs-string">'s'</span>     <span class="hljs-comment"># sign</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"eE"</span>: t = <span class="hljs-string">'e'</span>     <span class="hljs-comment"># e or E</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">". "</span>: t = c       <span class="hljs-comment"># dot, blank</span><br>            <span class="hljs-keyword">else</span>: t = <span class="hljs-string">'?'</span>               <span class="hljs-comment"># unknown</span><br>            <span class="hljs-keyword">if</span> t <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> states[p]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            p = states[p][t]<br>        <span class="hljs-keyword">return</span> p <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æœ‰é™çŠ¶æ€æœº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>æœ‰é™çŠ¶æ€æœº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer21 è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</title>
    <link href="/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer21/"/>
    <url>/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer21/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">1,2,3,4</span>]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,3,2,4</span>] <br>æ³¨ï¼š[<span class="hljs-number">3,1,2,4</span>] ä¹Ÿæ˜¯æ­£ç¡®çš„ç­”æ¡ˆä¹‹ä¸€ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= nums.length &lt;= 50000</li><li>1 &lt;= nums[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonçš„listçš„å¸¸è§„æ“ä½œã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        odd = []<br>        even = []<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span>(x%<span class="hljs-number">2</span>):<br>                odd.append(x)<br>            <span class="hljs-keyword">else</span>:<br>                even.append(x)<br>        <span class="hljs-keyword">return</span> odd+even<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer28 å¯¹ç§°çš„äºŒå‰æ ‘</title>
    <link href="/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer28/"/>
    <url>/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer28/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å¯¹ç§°çš„äºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯ä¸æ˜¯å¯¹ç§°çš„ã€‚å¦‚æœä¸€æ£µäºŒå‰æ ‘å’Œå®ƒçš„é•œåƒä¸€æ ·ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¯¹ç§°çš„ã€‚</p><p>ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘&nbsp;[1,2,2,3,4,4,3] æ˜¯å¯¹ç§°çš„ã€‚</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp;/ \ / <br>3 &nbsp;4 4 &nbsp;3<br>ä½†æ˜¯ä¸‹é¢è¿™ä¸ª&nbsp;[1,2,2,null,3,null,3] åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„:</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp; &nbsp;\ &nbsp; <br>&nbsp; &nbsp;3 &nbsp; &nbsp;3</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœrootä¸ºç©ºå°±ç›´æ¥è¿”å›Trueï¼Œç„¶ååˆ¤æ–­å…¶å·¦å³å­æ ‘æ˜¯å¦ä¸ºé•œåƒç»“æ„ã€‚å¦‚æœä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ºç©ºåˆ™ä¸ºçœŸï¼Œå¦‚æœä¸€ç©ºåˆ™ä¸ºå‡ï¼Œç„¶ååˆ†åˆ«åˆ¤æ–­å…¶å¯¹ç§°ç»“æ„ã€‚ <code>judge(A.left,B.right) and judge(A.right,B.left)</code> æ³¨æ„æ˜¯é•œåƒå› æ­¤å·¦å³æ—¶ç›¸åçš„å‘¢</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSymmetric</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judge</span>(<span class="hljs-params">A,B</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">or</span> B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judge(A.left,B.right) <span class="hljs-keyword">and</span> judge(A.right,B.left) <br>        <span class="hljs-keyword">return</span> judge(root.left,root.right)<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer26 æ ‘çš„å­ç»“æ„</title>
    <link href="/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer26/"/>
    <url>/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer26/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ ‘çš„å­ç»“æ„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aå’ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚(çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„)<br>Bæ˜¯Açš„å­ç»“æ„ï¼Œ å³ Aä¸­æœ‰å‡ºç°å’ŒBç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><p>ä¾‹å¦‚:<br>ç»™å®šçš„æ ‘ A:</p><p>3<br>&nbsp; &nbsp; / <br>&nbsp; &nbsp;4 &nbsp; 5<br>&nbsp; / <br>&nbsp;1 &nbsp; 2<br>ç»™å®šçš„æ ‘ Bï¼š</p><p>4&nbsp;<br>&nbsp; /<br>&nbsp;1<br>è¿”å› trueï¼Œå› ä¸º B ä¸ A çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonä»£ç çœŸçš„ï¼å¥½ï¼ç®€æ´ï¼</p><p><code>isSubStructure</code>çš„ä½œç”¨æ˜¯å…ˆåºæŸ¥æ‰¾Aï¼ŒBçš„åŒ¹é…æƒ…å†µã€‚è€Œåœ¨å†…éƒ¨ä¼šå¯¹åŒ¹é…çš„<code>judgechildren(A,B)</code>è¿›è¡Œåˆ¤æ–­ï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸ºå…¶å­ç»“æ„ã€‚</p><p>å¦‚æœBä¸ºç©ºäº†åˆ™è¡¨ç¤ºåŒ¹é…æˆåŠŸã€‚å¦‚æœæ ¹èŠ‚ç‚¹ä¸åŒ¹é…æˆ–è€…Aä¸ºç©ºäº†å°±ç›´æ¥è¿”å›å¤±è´¥ã€‚å¦‚æœå¯ä»¥ç»§ç»­åˆ¤æ–­ï¼Œå°±ç»§ç»­åˆ¤æ–­å¯¹åº”çš„å·¦å³å­æ ‘ã€‚</p><p><code>(judgechildren(A,B) or self.isSubStructure(A.left,B) or self.isSubStructure(A.right,B))</code> åˆ¤æ–­ABä¸¤å­æ ‘ï¼›å…ˆåºåˆ¤æ–­å·¦å³å­æ ‘ï¼Œ<code>æ³¨æ„è¿™é‡Œæ˜¯self.isSubStructure</code>è¿›è¡Œé€’å½’å“¦~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSubStructure</span>(<span class="hljs-params">self, A: TreeNode, B: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judgechildren</span>(<span class="hljs-params">A,B</span>):</span> <span class="hljs-comment">#åˆ¤æ–­ä»¥ABä¸ºæ ¹èŠ‚ç‚¹çš„æ¡ä»¶ä¸‹ï¼ŒBæ˜¯å¦ä¸ºAçš„å­ç»“æ„</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> A) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judgechildren(A.right,B.right) <span class="hljs-keyword">and</span> judgechildren(A.left,B.left)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bool</span>(A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">and</span> (judgechildren(A,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.left,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.right,B))<br></code></pre></td></tr></tbody></table></figure><blockquote><p>bool(A and B)æ³¨æ„è¦è½¬æ¢ä¸ºboolå˜é‡</p></blockquote><ul><li><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(MN)</p></li><li><p>ç©ºé—´å¤æ‚åº¦ O(M)ï¼š å½“æ ‘ Aå’Œæ ‘ B éƒ½é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’è°ƒç”¨æ·±åº¦æœ€å¤§ã€‚å½“ Mâ‰¤N æ—¶ï¼Œéå†æ ‘ A ä¸é€’å½’åˆ¤æ–­çš„æ€»é€’å½’æ·±åº¦ä¸º M ï¼›å½“ M&gt;N æ—¶ï¼Œæœ€å·®æƒ…å†µä¸ºéå†è‡³æ ‘ Aå¶å­èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ€»é€’å½’æ·±åº¦ä¸º Mã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer14.2 å‰ªç»³å­2</title>
    <link href="/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer14-2/"/>
    <url>/2021/08/18/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer14-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­2</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m - 1] .è¯·é—® k[0]<em>k[1]</em>â€¦*k[m - 1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>2 &lt;= n &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’å…·ä½“å‚ç…§å‰ªç»³å­1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i):<br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j]))<br>        <span class="hljs-keyword">return</span> dp[n]%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯è¿™ç§æ–¹å¼æ—¶é—´å¤æ‚åº¦è¾ƒå¤§ã€‚</p><p>æ­¥éª¤å¦‚ä¸‹ï¼š(æ•°å­¦å¯ä»¥è¯æ˜å°½é‡åˆ†æˆå¤šçš„3)<a href="https://leetcode-cn.com/problems/jian-sheng-zi-lcof/solution/mian-shi-ti-14-i-jian-sheng-zi-tan-xin-si-xiang-by/">å‚è§é¢˜è§£</a></p><ul><li>å¦‚æœ n == 2ï¼Œè¿”å›1ï¼Œå¦‚æœ n == 3ï¼Œè¿”å›2ï¼Œä¸¤ä¸ªå¯ä»¥åˆå¹¶æˆnå°äº4çš„æ—¶å€™è¿”å›n - 1</li><li>å¦‚æœ n == 4ï¼Œè¿”å›4</li><li>å¦‚æœ n &gt; 4ï¼Œåˆ†æˆå°½å¯èƒ½å¤šçš„é•¿åº¦ä¸º3çš„å°æ®µï¼Œæ¯æ¬¡å¾ªç¯é•¿åº¦nå‡å»3ï¼Œä¹˜ç§¯resä¹˜ä»¥3ï¼›æœ€åè¿”å›æ—¶ä¹˜ä»¥å°äºç­‰äº4çš„æœ€åä¸€å°æ®µï¼›æ¯æ¬¡ä¹˜æ³•æ“ä½œåè®°å¾—å–ä½™å°±è¡Œ<br>ä»¥ä¸Š2å’Œ3å¯ä»¥åˆå¹¶</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">4</span>:<br>            <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span><br>        res = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">4</span>: <span class="hljs-comment"># æ‰¾å¯»å°½é‡å¤šçš„3</span><br>            res = res * <span class="hljs-number">3</span> % <span class="hljs-number">1000000007</span><br>            n -= <span class="hljs-number">3</span><br>        <span class="hljs-keyword">return</span> res * n % <span class="hljs-number">1000000007</span> <span class="hljs-comment">#ä¹˜ä»¥å‰©ä½™çš„</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer14.1 å‰ªç»³å­1</title>
    <link href="/2021/08/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer14-1/"/>
    <url>/2021/08/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer14-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m-1] ã€‚è¯·é—® k[0]<em>k[1]</em>â€¦*k[m-1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><h4 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h5 id="æç¤ºï¼š">æç¤ºï¼š</h5><ul><li><code>2 &lt;= n &lt;= 58</code></li></ul><h4 id="é¢˜è§£">é¢˜è§£</h4><p>è¯¥é¢˜é‡‡ç”¨åŠ¨æ€è§„åˆ’æ¯”è¾ƒå¥½ç†è§£ï¼Œdp[i]è¡¨ç¤ºé•¿åº¦ä¸ºiçš„ç»³å­åˆ†æˆmçš„æœ€å¤§ä¹˜ç§¯ã€‚jè¡¨ç¤ºç¬¬ä¸€æ®µçš„é•¿åº¦ï¼Œéå†jçš„å–å€¼ï¼ˆå¯ä»¥ç›´æ¥ä»2å¼€å§‹ï¼‰ï¼Œåœ¨å‰©ä½™çš„i-jï¼ˆ<strong>ç¼©å°èŒƒå›´</strong>ï¼‰çš„é•¿åº¦é€‰æ‹©ä¸åˆ‡åˆ†æˆ–è€…æœ€å¤§ä¹˜ç§¯ï¼Œå³dp[i][j] = max(j*(i-j),j*dp[i-j])ã€‚<strong>ä½†æ˜¯å®é™…ä¸Šâ€œã€jã€‘â€å¹¶ä¸å…³å¿ƒ</strong>ï¼Œå› æ­¤å¯ä»¥ä¸dp[i]æ¯”è¾ƒ,é€‰æ‹©æœ€å¤§çš„æ›´æ–°dp[i]å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]  <span class="hljs-comment"># è¡¨ç¤ºé•¿åº¦ä¸ºnçš„ç»³å­å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯</span><br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i): <span class="hljs-comment"># ç¬¬ä¸€æ®µ</span><br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j])) <br>                <span class="hljs-comment">#å‘å‰è·å–ä¿¡æ¯ï¼Œåœ¨é€‰å®šjä¹‹åï¼Œæ³¨æ„è¿˜è¦æ¯”è¾ƒdp[i]æœ¬èº«ï¼Œä»¥åŠåœ¨ç¬¬ä¸€æ®µjçš„åŸºç¡€ä¸Šå‰©ä¸‹çš„æ˜¯å¦åˆ‡</span><br>        <span class="hljs-keyword">return</span> dp[n]<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer07 é‡å»ºäºŒå‰æ ‘</title>
    <link href="/2021/08/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer07/"/>
    <url>/2021/08/17/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer07/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é‡å»ºäºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·æ„å»ºè¯¥äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><p>å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer07-tree.jpg" alt="img"></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">Input: <span class="hljs-attr">preorder</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>], <span class="hljs-attr">inorder</span> = [<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">20</span>,<span class="hljs-number">7</span>]<br>Output: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Input: preorder = <span class="hljs-comment">[-1]</span>, inorder = <span class="hljs-comment">[-1]</span><br>Output: <span class="hljs-comment">[-1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨é—­åŒ…å‡½æ•°ï¼Œæ„å»ºå¯¹åº”åŒºåŸŸçš„æ ‘ï¼Œè¿”å›æ ¹èŠ‚ç‚¹ã€‚å…³é”®æ­¥éª¤æ˜¯æŸ¥æ‰¾åˆ°rootindexåœ¨ä¸­åºéå†ä¸­çš„ä½ç½®ï¼Œç„¶ååˆ†åˆ«æ„å»ºå¯¹åº”çš„å­æ ‘ã€‚åœ¨æŸ¥æ‰¾æ—¶å¯ä»¥å…ˆå»ºç«‹å“ˆå¸Œè¡¨ï¼Œä½¿ç”¨å­—å…¸å’Œæšä¸¾ç»“åˆæ„å»ºflag <code>flag = {ele:i for i,ele in enumerate(inorder)}</code>ã€‚å¯ä»¥å‡å°‘æ‰§è¡Œæ—¶é—´çš„å¼€é”€ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildTree</span>(<span class="hljs-params">self, preorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], inorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; TreeNode:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">rootindex,ins,ine</span>):</span><br>            <span class="hljs-keyword">if</span>(ins&gt;ine): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>            root = TreeNode(preorder[rootindex])<br>            <span class="hljs-comment"># t = ins</span><br>            <span class="hljs-comment"># while(inorder[t]!=preorder[rootindex]):t+=1</span><br>            t = flag[preorder[rootindex]]<br>            root.left = func(rootindex+<span class="hljs-number">1</span>,ins,t-<span class="hljs-number">1</span>)<br>            root.right = func(rootindex+t-ins+<span class="hljs-number">1</span>,t+<span class="hljs-number">1</span>,ine)<br>            <span class="hljs-keyword">return</span> root<br>        <span class="hljs-comment"># æ„å»ºå“ˆå¸Œè¡¨ åœ¨æŸ¥æ‰¾æ—¶æ›´æ–¹ä¾¿</span><br>        flag = {ele:i <span class="hljs-keyword">for</span> i,ele <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(inorder)} <span class="hljs-comment">#ä½¿ç”¨å­—å…¸æ„å»º</span><br>        root = func(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(inorder)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¢¯åº¦æ¶ˆå¤±&amp;æ¢¯åº¦çˆ†ç‚¸</title>
    <link href="/2021/08/17/deep_learning/gradient-exp/"/>
    <url>/2021/08/17/deep_learning/gradient-exp/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ¢è®¨æ·±åº¦å­¦ä¹ ä¸­ç»å¸¸æåˆ°çš„æ¦‚å¿µâ€“æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ ã€‚ä»–ä»¬æ˜¯å½±å“æ¨¡å‹æ”¶æ•›ï¼Œå­¦ä¹ å¥½åçš„é‡è¦å› ç´ ã€‚å¯¹æ­¤ç°è±¡ä¹Ÿæå‡ºäº†å¾ˆå¤šå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æ¥å¤§è‡´åšä¸€ä¸ªæ€»ç»“ï¼Œå¯¹å…¶æ¦‚å¿µï¼ŒåŸå› å’Œç›¸å…³çš„è§£å†³æ–¹æ¡ˆè¿›è¡Œæ¢è®¨å­~~</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸-æ¢¯åº¦æ¶ˆå¤±">æ¢¯åº¦çˆ†ç‚¸&amp;æ¢¯åº¦æ¶ˆå¤±</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>æ¢¯åº¦æ¶ˆå¤±å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå°ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆåŠ¨ä¸äº†ï¼‰ã€‚<br>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› ">æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› </h2><ul><li><p>è®­ç»ƒæ–¹å¼ï¼šç½‘ç»œè®­ç»ƒæ—¶é‡‡ç”¨åå‘ä¼ æ’­çš„æ–¹å¼ï¼Œä¼šä½¿ç”¨é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼Œå› æ­¤å¯¹æ¿€æ´»å‡½æ•°æ±‚å¯¼æ—¶ï¼Œå¦‚æœæƒé‡ä¹˜ä»¥æ¿€æ´»å‡½æ•°å¯¼æ•°æ­¤éƒ¨åˆ†å¤§äº1ï¼Œé‚£ä¹ˆå½“å±‚æ•°å¾ˆå¤šæ—¶ï¼Œæ±‚å‡ºçš„æ¢¯åº¦æ›´æ–°å°†ä»¥æŒ‡æ•°çš„å½¢å¼å¢åŠ ï¼Œåˆ™ä¼šæ¢¯åº¦çˆ†ç‚¸ã€‚å¦‚æœæ­¤éƒ¨åˆ†å°äº1ï¼Œåˆ™éšç€å±‚æ•°å¢å¤šï¼Œæ±‚å‡ºçš„æ¢¯åº¦ä¼šæŒ‡æ•°è¡°å‡ï¼Œåˆ™ä¼šæ¢¯åº¦æ¶ˆå¤±ã€‚</p></li><li><p>æ¿€æ´»å‡½æ•°ï¼šå¦‚æœé€‰ç”¨sigmoidï¼Œ$S(x) = \frac{1}{1+e^{-x}}$ ï¼Œè€Œå…¶å¯¼æ•° $Sâ€™(x) = \frac{e<sup>{-x}}{(1+e</sup>{-x})^2}=S(x)(1-S(x))$ ï¼Œå…¶æ¢¯åº¦ä¸ä¼šè¶…è¿‡0.25ã€‚</p></li><li><p>æƒé‡åˆå§‹å€¼ï¼šå› æ­¤ä¸€ä¸ªå‡å€¼ä¸º0æ ‡å‡†å·®ä¸º1çš„é«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–å‚æ•°å¾ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±ï¼Œå› ä¸ºæƒé‡é›†ä¸­åœ¨-1åˆ°1ä¹‹é—´ã€‚å¦‚æœåˆå§‹åŒ–æ¯”è¾ƒå¤§çš„å€¼</p></li><li><p>æ ¹æ®é“¾å¼æ±‚å¯¼å’Œåå‘ä¼ æ’­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—å‡ºï¼Œå…¶ä¸­Cæ˜¯ä»£ä»·å‡½æ•°</p><p><img src="https://picture.mulindya.com/gradient-exp-pic2.png" alt=""></p><p><img src="https://picture.mulindya.com/gradient-exp-pic3.png" alt=""></p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><h3 id="1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚Heæ–¹æ³•">1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚<a href="https://blog.csdn.net/u010505915/article/details/106608922/?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.base&amp;spm=1001.2101.3001.4242">Heæ–¹æ³•</a></h3><ol><li>å‰å‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€å±‚çš„å·ç§¯è®¡ç®—ç»“æœçš„æ–¹å·®ä¸º1.</li><li>åå‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€ å±‚çš„ç»§ç»­å¾€å‰ä¼ çš„æ¢¯åº¦æ–¹å·®ä¸º1(å› ä¸ºæ¯å±‚ä¼šæœ‰ä¸¤ä¸ªæ¢¯åº¦çš„è®¡ç®—, ä¸€ä¸ªç”¨æ¥æ›´æ–°å½“å‰å±‚çš„æƒé‡, ä¸€ä¸ªç»§ç»­ä¼ æ’­, ç”¨äºå‰é¢å±‚çš„æ¢¯åº¦çš„è®¡ç®—.)</li></ol><h3 id="2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸">2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h3 id="3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸">3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>â€‹é‡‡ç”¨æƒé‡æ­£åˆ™åŒ–ï¼Œä¸»è¦æ˜¯é€šè¿‡å¯¹ç½‘ç»œæƒé‡åšæ­£åˆ™æ¥é™åˆ¶è¿‡æ‹Ÿåˆï¼ŒåŒæ—¶ï¼Œå¦‚æœå‘ç”Ÿæ¢¯åº¦çˆ†ç‚¸ï¼Œé‚£ä¹ˆæƒå€¼çš„èŒƒæ•°å°±ä¼šå˜çš„éå¸¸å¤§ï¼Œåè¿‡æ¥ï¼Œé€šè¿‡é™åˆ¶æ­£åˆ™åŒ–é¡¹çš„å¤§å°ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶æ¢¯åº¦çˆ†ç‚¸çš„å‘ç”Ÿã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯l1æ­£åˆ™ï¼Œå’Œl2æ­£åˆ™ï¼Œåœ¨å„ä¸ªæ·±åº¦æ¡†æ¶ä¸­éƒ½æœ‰ç›¸åº”çš„APIå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œæ¯”å¦‚åœ¨pytorchä¸­ï¼Œè‹¥æ­å»ºç½‘ç»œçš„æ—¶å€™å·²ç»è®¾ç½®äº†æ­£åˆ™åŒ–å‚æ•°ï¼Œåˆ™è°ƒç”¨ä»¥ä¸‹ä»£ç å¯ä»¥ç›´æ¥è®¡ç®—å‡ºæ­£åˆ™æŸå¤±ã€‚<br>â€‹torch.optimé›†æˆäº†å¾ˆå¤šä¼˜åŒ–å™¨ï¼Œå¦‚SGDï¼ŒAdadeltaï¼ŒAdamï¼ŒAdagradï¼ŒRMSpropç­‰ï¼Œè¿™äº›ä¼˜åŒ–å™¨è‡ªå¸¦çš„ä¸€ä¸ªå‚æ•°weight_decayï¼Œç”¨äºæŒ‡å®šæƒå€¼è¡°å‡ç‡ï¼Œç›¸å½“äºL2æ­£åˆ™åŒ–ä¸­çš„Î»å‚æ•°ï¼Œæ³¨æ„torch.optimé›†æˆçš„ä¼˜åŒ–å™¨åªæœ‰L2æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ³¨é‡Šï¼Œå‚æ•°weight_decay çš„è§£ææ˜¯ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">weight_decay (<span class="hljs-built_in">float</span>, optional): weight decay (L2 penalty) (default: <span class="hljs-number">0</span>)<br>optimizer = optim.Adam(model.parameters(),lr=learning_rate,weight_decay=<span class="hljs-number">0.01</span>)<br></code></pre></td></tr></tbody></table></figure><p>lossè®¡ç®—å…¬å¼<br>$$<br>Loss = (y-W<sup>Tx)</sup>2+\alpha {\Vert W \Vert}^2<br>$$</p><h3 id="4ï¼Œæ¿€æ´»å‡½æ•°">4ï¼Œæ¿€æ´»å‡½æ•°</h3><h4 id="1-ReLUå‡½æ•°ï¼š">1.ReLUå‡½æ•°ï¼š</h4><p>å¦‚æœæ¿€æ´»å‡½æ•°çš„å¯¼æ•°ä¸º1ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸çš„é—®é¢˜äº†ï¼Œæ¯å±‚çš„ç½‘ç»œéƒ½å¯ä»¥å¾—åˆ°ç›¸åŒçš„æ›´æ–°é€Ÿåº¦ï¼ŒReLUå°±è¿™æ ·åº”è¿è€Œç”Ÿã€‚</p><p>ReLUçš„ä¸»è¦è´¡çŒ®åœ¨äºï¼š</p><p><img src="https://picture.mulindya.com/gradient-exp-pic4.png" alt=""></p><h5 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h5><p>è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±ã€çˆ†ç‚¸çš„é—®é¢˜ã€‚<br>è®¡ç®—æ–¹ä¾¿ï¼Œè®¡ç®—é€Ÿåº¦å¿«ã€‚<br>åŠ é€Ÿäº†ç½‘ç»œçš„è®­ç»ƒã€‚</p><h5 id="ç¼ºç‚¹ï¼š">ç¼ºç‚¹ï¼š</h5><p>ç”±äºè´Ÿæ•°éƒ¨åˆ†æ’ä¸º0ï¼Œä¼šå¯¼è‡´ä¸€äº›ç¥ç»å…ƒæ— æ³•æ¿€æ´»ï¼ˆå¯é€šè¿‡è®¾ç½®å°å­¦ä¹ ç‡éƒ¨åˆ†è§£å†³ï¼‰ã€‚<br>è¾“å‡ºä¸æ˜¯ä»¥0ä¸ºä¸­å¿ƒçš„ã€‚</p><h4 id="2-LeakyReLUå‡½æ•°ï¼š">2.LeakyReLUå‡½æ•°ï¼š</h4><p>LeakyReLUå°±æ˜¯ä¸ºäº†è§£å†³ReLUçš„0åŒºé—´å¸¦æ¥çš„å½±å“ï¼Œè¯¥å‡½æ•°è¾“å‡ºå¯¹è´Ÿå€¼è¾“å…¥æœ‰å¾ˆå°çš„å¡åº¦ï¼Œç”±äºå¯¼æ•°æ€»æ˜¯ä¸ä¸ºé›¶ï¼Œè¿™èƒ½å‡å°‘é™é»˜ç¥ç»å…ƒçš„å‡ºç°ï¼Œå…è®¸åŸºäºæ¢¯åº¦çš„å­¦ä¹ ï¼ˆè™½ç„¶ä¼šå¾ˆæ…¢ï¼‰ï¼Œè§£å†³äº†ReLUå‡½æ•°è¿›å…¥è´ŸåŒºé—´åï¼Œå¯¼è‡´ç¥ç»å…ƒä¸å­¦ä¹ çš„é—®é¢˜ã€‚</p><p><img src="https://picture.mulindya.com/gradient-exp-pic5.png" alt=""></p><h4 id="3-ELUå‡½æ•°ï¼š">3.ELUå‡½æ•°ï¼š</h4><p><img src="https://picture.mulindya.com/gradient-exp-pic6.png" alt=""></p><ul><li><p>èåˆäº†sigmoidå’ŒReLUï¼Œ<strong>å·¦ä¾§å…·æœ‰è½¯é¥±å’Œæ€§ï¼Œå³ä¾§æ— é¥±å’Œæ€§</strong>ã€‚</p></li><li><p>å³ä¾§çº¿æ€§éƒ¨åˆ†ä½¿å¾—ELUèƒ½å¤Ÿç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼Œè€Œå·¦ä¾§è½¯é¥±èƒ½å¤Ÿè®©ELUå¯¹è¾“å…¥å˜åŒ–æˆ–å™ªå£°æ›´é²æ£’ã€‚</p></li><li><p>ELUçš„è¾“å‡ºå‡å€¼æ¥è¿‘äºé›¶ï¼Œæ‰€ä»¥æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼Œä½†ç›¸å¯¹äºLeakyReLUæ¥è¯´ï¼Œè®¡ç®—è¦æ›´è€—æ—¶é—´ä¸€äº›ã€‚</p></li></ul><p><font size="3" color="BlueViolet">å°çŸ¥è¯†ï¼š</font></p><blockquote><p>æ¢¯åº¦é¥±å’Œå¸¸å¸¸æ˜¯å’Œæ¿€æ´»å‡½æ•°ç›¸å…³çš„ï¼Œæ¯”å¦‚sigmodå’Œtanhå°±å±äºå…¸å‹å®¹æ˜“è¿›å…¥æ¢¯åº¦é¥±å’ŒåŒºçš„å‡½æ•°ï¼Œå³è‡ªå˜é‡è¿›å…¥æŸä¸ªåŒºé—´åï¼Œæ¢¯åº¦å˜åŒ–ä¼šéå¸¸å°ï¼Œè¡¨ç°åœ¨å›¾ä¸Šå°±æ˜¯å‡½æ•°æ›²çº¿è¿›å…¥æŸäº›åŒºåŸŸåï¼Œè¶Šæ¥è¶Šè¶‹è¿‘ä¸€æ¡ç›´çº¿ï¼Œæ¢¯åº¦å˜åŒ–å¾ˆå°ï¼Œæ¢¯åº¦é¥±å’Œä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦å˜åŒ–ç¼“æ…¢ï¼Œä»è€Œé€ æˆæ¨¡å‹è®­ç»ƒç¼“æ…¢</p></blockquote><h3 id="4ï¼ŒBatch-Normalization">4ï¼ŒBatch Normalization</h3><p>BNæ˜¯æ·±åº¦å­¦ä¹ å‘å±•ä»¥æ¥æå‡ºçš„æœ€é‡è¦çš„æˆæœä¹‹ä¸€äº†ï¼Œç›®å‰å·²ç»è¢«å¹¿æ³›çš„åº”ç”¨åˆ°äº†å„å¤§ç½‘ç»œä¸­ï¼Œå…·æœ‰åŠ é€Ÿç½‘ç»œæ”¶æ•›é€Ÿåº¦ï¼Œæå‡è®­ç»ƒç¨³å®šæ€§çš„æ•ˆæœï¼Œ**BNæœ¬è´¨ä¸Šæ˜¯è§£å†³åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦é—®é¢˜ã€‚**BNå…¨åæ˜¯Batch Normalizationï¼Œç®€ç§°BNï¼Œå³æ‰¹è§„èŒƒåŒ–ï¼Œ<strong>é€šè¿‡è§„èŒƒåŒ–æ“ä½œå°†è¾“å‡ºä¿¡å·xè§„èŒƒåŒ–ä¿è¯ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</strong><br>åå‘ä¼ æ’­å¼å­ä¸­æœ‰wçš„å­˜åœ¨ï¼Œæ‰€ä»¥wçš„å¤§å°å½±å“äº†æ¢¯åº¦çš„æ¶ˆå¤±å’Œçˆ†ç‚¸ï¼Œ<strong>BNå°±æ˜¯é€šè¿‡å¯¹æ¯ä¸€å±‚çš„è¾“å‡ºè§„èŒƒä¸ºå‡å€¼å’Œæ–¹å·®ä¸€è‡´çš„æ–¹æ³•</strong>ï¼Œæ¶ˆé™¤äº†wå¸¦æ¥çš„æ”¾å¤§ç¼©å°çš„å½±å“ï¼Œè¿›è€Œè§£å†³æ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸çš„é—®é¢˜ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºBNå°†è¾“å‡ºä»é¥±å’ŒåŒºæ‹‰å€’äº†éé¥±å’ŒåŒºã€‚<br>æœ‰å…³Batch Normalizationè¯¦ç»†çš„å†…å®¹å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼š <a href="http://blog.csdn.net/qq_25737169/article/details/79048516">Batch Normalization</a></p><h3 id="5-æ®‹å·®ç»“æ„">5,æ®‹å·®ç»“æ„</h3><p>äº‹å®ä¸Šï¼Œå°±æ˜¯æ®‹å·®ç½‘ç»œçš„å‡ºç°å¯¼è‡´äº†image netæ¯”èµ›çš„ç»ˆç»“ï¼Œè‡ªä»æ®‹å·®æå‡ºåï¼Œå‡ ä¹æ‰€æœ‰çš„æ·±åº¦ç½‘ç»œéƒ½ç¦»ä¸å¼€æ®‹å·®çš„èº«å½±ï¼Œç›¸æ¯”è¾ƒä¹‹å‰çš„å‡ å±‚ï¼Œå‡ åå±‚çš„æ·±åº¦ç½‘ç»œï¼Œåœ¨æ®‹å·®ç½‘ç»œé¢å‰éƒ½ä¸å€¼ä¸€æï¼Œæ®‹å·®å¯ä»¥å¾ˆè½»æ¾çš„æ„å»ºå‡ ç™¾å±‚ï¼Œä¸€åƒå¤šå±‚çš„ç½‘ç»œè€Œä¸ç”¨æ‹…å¿ƒæ¢¯åº¦æ¶ˆå¤±è¿‡å¿«çš„é—®é¢˜ï¼ŒåŸå› å°±åœ¨äºæ®‹å·®çš„æ·å¾„ï¼ˆshortcutï¼‰éƒ¨åˆ†ã€‚åŸç†å¯å‚è§ï¼š<a href="https://zhuanlan.zhihu.com/p/42706477">æ®‹å·®ç»“æ„</a></p><h3 id="6ï¼ŒLSTMç½‘ç»œ">6ï¼ŒLSTMç½‘ç»œ</h3><p>LSTMæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œRNNçš„å˜ä½“ï¼Œå…¨ç§°æ˜¯é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆlong-short term memory networksï¼‰ï¼Œå®ƒæ˜¯ä¸é‚£ä¹ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±çš„ï¼Œä¸»è¦åŸå› åœ¨äºLSTMå†…éƒ¨å¤æ‚çš„â€œé—¨â€ç»“æ„ï¼Œ<strong>LSTMé€šè¿‡å®ƒå†…éƒ¨çš„â€œé—¨â€å¯ä»¥æ¥ä¸‹æ¥æ›´æ–°çš„æ—¶å€™â€œè®°ä½â€å‰å‡ æ¬¡è®­ç»ƒçš„â€œæ®‹ç•™è®°å¿†â€</strong>ï¼Œå› æ­¤ï¼Œç»å¸¸ç”¨äºç”Ÿæˆæ–‡æœ¬ä¸­ã€‚å…³äºLSTMçš„åŸç†è¯¦è§£åç»­å†åˆ†æã€‚<a href="https://zhuanlan.zhihu.com/p/32085405">LSTM</a></p><p><img src="https://picture.mulindya.com/gradient-exp-pic7.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer27 äºŒå‰æ ‘çš„é•œåƒ</title>
    <link href="/2021/08/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer27/"/>
    <url>/2021/08/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer27/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„é•œåƒ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯¥å‡½æ•°è¾“å‡ºå®ƒçš„é•œåƒã€‚</p><p>ä¾‹å¦‚è¾“å…¥ï¼š</p><p>â€‹     4<br>2     7<br>1   3  6   9<br>é•œåƒè¾“å‡ºï¼š</p><p>â€‹     4<br>7     2<br>9   6 3   1</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šroot = <span class="hljs-string">[4,2,7,1,3,6,9]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[4,7,2,9,6,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœä¸ºç©ºæ ‘å°±è¿”å›ç©ºã€‚ç„¶åä¿å­˜å·¦å­æ ‘ï¼Œç¿»è½¬å³å­æ ‘åèµ‹å€¼ä¸ºå·¦èŠ‚ç‚¹ï¼Œç¿»è½¬å·¦å­æ ‘èµ‹å€¼ä¸ºå³èŠ‚ç‚¹ã€‚</p><p><strong>if not(root.left or root.right): return root #ä¸ºå•ä¸€èŠ‚ç‚¹å°±ç›´æ¥è¿”å› å¯ä»¥çœç•¥ï¼Œå› ä¸ºå·²ç»åŒ…å«åœ¨å†…</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mirrorTree</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; TreeNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(root): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        x = root.left<br>        root.left = self.mirrorTree(root.right)<br>        root.right = self.mirrorTree(x)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer06 åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</title>
    <link href="/2021/08/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer25/"/>
    <url>/2021/08/16/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer25/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»ç„¶æ˜¯é€’å¢æ’åºçš„ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥ï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">4</span>, <span class="hljs-number">1</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœç›´æ¥ç”¨p = l.next  é‚£ä¹ˆä¸èƒ½è¾¾åˆ°â€œæŒ‡é’ˆâ€çš„æ•ˆæœã€‚è¿™æ ·çš„æ“ä½œå¯¹læ²¡æœ‰å½±å“ï¼Œæ— æ³•æ›´æ–°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        l = ListNode(<span class="hljs-number">0</span>) <br>        p = l.<span class="hljs-built_in">next</span>     <br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure><p>æ­£ç¡®æ–¹å¼ï¼Œä¸èƒ½ä½¿ç”¨ p = p.nextï¼Œ å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼ï¼Œæ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´lï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        p = l = ListNode(<span class="hljs-number">0</span>) <span class="hljs-comment">#å…ˆæŒ‡å‘åŒä¸€å—ç©ºé—´</span><br>        <span class="hljs-comment">#p = p.next      </span><br>        <span class="hljs-comment"># ä¸èƒ½ä½¿ç”¨p = p.next  å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼æ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚</span><br>        <span class="hljs-comment"># æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´ï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹</span><br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p.<span class="hljs-built_in">next</span> = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p.<span class="hljs-built_in">next</span> = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p.<span class="hljs-built_in">next</span> = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer13 æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</title>
    <link href="/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer13/"/>
    <url>/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer13/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ°ä¸Šæœ‰ä¸€ä¸ªmè¡Œnåˆ—çš„æ–¹æ ¼ï¼Œä»åæ ‡ [0,0] åˆ°åæ ‡ [m-1,n-1] ã€‚ä¸€ä¸ªæœºå™¨äººä»åæ ‡ [0, 0] çš„æ ¼å­å¼€å§‹ç§»åŠ¨ï¼Œå®ƒæ¯æ¬¡å¯ä»¥å‘å·¦ã€å³ã€ä¸Šã€ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼ˆä¸èƒ½ç§»åŠ¨åˆ°æ–¹æ ¼å¤–ï¼‰ï¼Œä¹Ÿä¸èƒ½è¿›å…¥è¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œå¤§äºkçš„æ ¼å­ã€‚ä¾‹å¦‚ï¼Œå½“kä¸º18æ—¶ï¼Œæœºå™¨äººèƒ½å¤Ÿè¿›å…¥æ–¹æ ¼ [35, 37] ï¼Œå› ä¸º3+5+3+7=18ã€‚ä½†å®ƒä¸èƒ½è¿›å…¥æ–¹æ ¼ [35, 38]ï¼Œå› ä¸º3+5+3+8=19ã€‚è¯·é—®è¯¥æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾å¤šå°‘ä¸ªæ ¼å­ï¼Ÿ</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">1</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= n,m &lt;= 100</code></li><li><code>0 &lt;= k &lt;= 20</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£æ³•ä¸€-DFS">è§£æ³•ä¸€ DFS</h3><ul><li>æ·±æœ+å‰ªæ</li><li>ä¼˜åŒ–æŠ€å·§å°±æ˜¯åªåˆ¤æ–­å³è¾¹å’Œä¸‹è¾¹å°±è¡Œäº†ï¼Œå› ä¸ºå·¦å’Œä¸Šæ˜¯ä¸€å®šä¼šåœ¨æœç´¢çš„è¿‡ç¨‹ä¸­è¢«åŒ…æ‹¬çš„</li></ul><p>â€‹        <font color="purple">æ³¨æ„[[1]*n]*m æ˜¯æµ…æ‹·è´å¤åˆ¶ï¼ˆâ€œ=â€å¤åˆ¶ï¼‰å› æ­¤å¦‚æœä¸€ä¸ªå…ƒç´ æ”¹å˜äº†ï¼Œæ­¤åˆ—éƒ½ä¼šæ”¹å˜</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m, n, k</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type m: int</span><br><span class="hljs-string">        :type n: int</span><br><span class="hljs-string">        :type k: int</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        """</span><br>        <br>        fflag = [[<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)]  <br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numsum</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span><br>            <span class="hljs-keyword">while</span>(i):<br>                <span class="hljs-built_in">sum</span>+=(i%<span class="hljs-number">10</span>)<br>                i = i//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">while</span>(j):<br>                <span class="hljs-built_in">sum</span>+=(j%<span class="hljs-number">10</span>)<br>                j = j//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> m&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> n&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (fflag[i][j]==<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (numsum(i,j)&gt;k): <br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            fflag[i][j] = <span class="hljs-number">0</span><br>            <span class="hljs-comment"># return 1+dfs(i+1,j)+dfs(i-1,j)+dfs(i,j+1)+dfs(i,j-1)</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>+dfs(i+<span class="hljs-number">1</span>,j)+dfs(i,j+<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">return</span> dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•äºŒ-é€’æ¨">è§£æ³•äºŒ é€’æ¨</h3><h4 id="æ€è·¯">æ€è·¯</h4><p>è€ƒè™‘åˆ°æ–¹æ³•ä¸€æåˆ°æœç´¢çš„æ–¹å‘åªéœ€è¦æœä¸‹æˆ–æœå³ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ç§é€’æ¨çš„æ±‚è§£æ–¹æ³•ã€‚</p><h4 id="ç®—æ³•">ç®—æ³•</h4><p>å®šä¹‰ <code>vis[i][j]</code> ä¸º <code>(i, j)</code> åæ ‡æ˜¯å¦å¯è¾¾ï¼Œå¦‚æœå¯è¾¾è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚</p><p>é¦–å…ˆ (i, j) æœ¬èº«éœ€è¦å¯ä»¥è¿›å…¥ï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­ i å’Œ j çš„æ•°ä½ä¹‹å’Œæ˜¯å¦å¤§äº k ï¼Œå¦‚æœå¤§äºçš„è¯ç›´æ¥è®¾ç½® <code>vis[i][j]</code> ä¸ºä¸å¯è¾¾å³å¯ã€‚</p><p>å¦åˆ™ï¼Œå‰é¢æåˆ°æœç´¢æ–¹å‘åªéœ€æœä¸‹æˆ–æœå³ï¼Œå› æ­¤ (i, j) çš„æ ¼å­åªä¼šä» (i - 1, j) æˆ–è€… (i, j - 1) ä¸¤ä¸ªæ ¼å­èµ°è¿‡æ¥ï¼ˆä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼‰ï¼Œé‚£ä¹ˆ <code>vis[i][j]</code> æ˜¯å¦å¯è¾¾çš„çŠ¶æ€åˆ™å¯ç”±å¦‚ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°ï¼š</p><p>å³åªè¦æœ‰ä¸€ä¸ªæ ¼å­å¯è¾¾ï¼Œé‚£ä¹ˆ (i, j) è¿™ä¸ªæ ¼å­å°±æ˜¯å¯è¾¾çš„ï¼Œå› æ­¤æˆ‘ä»¬åªè¦éå†æ‰€æœ‰æ ¼å­ï¼Œé€’æ¨è®¡ç®—å‡ºå®ƒä»¬æ˜¯å¦å¯è¾¾ç„¶åç”¨å˜é‡ ans è®°å½•å¯è¾¾çš„æ ¼å­æ•°é‡å³å¯ã€‚</p><p>åˆå§‹æ¡ä»¶ <code>vis[i][j] = 1</code> ï¼Œé€’æ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­æ³¨æ„è¾¹ç•Œçš„å¤„ç†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        vis = <span class="hljs-built_in">set</span>([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-keyword">if</span> ((i - <span class="hljs-number">1</span>, j) <span class="hljs-keyword">in</span> vis <span class="hljs-keyword">or</span> (i, j - <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> vis) <span class="hljs-keyword">and</span> digitsum(i) + digitsum(j) &lt;= k:<br>                    vis.add((i, j))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(vis)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•ä¸‰">è§£æ³•ä¸‰</h3><h4 id="æ€è·¯å’Œç®—æ³•">æ€è·¯å’Œç®—æ³•</h4><p>æˆ‘ä»¬å°†è¡Œåæ ‡å’Œåˆ—åæ ‡æ•°ä½ä¹‹å’Œå¤§äº k çš„æ ¼å­çœ‹ä½œéšœç¢ç‰©ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±æ˜¯ä¸€é“å¾ˆä¼ ç»Ÿçš„æœç´¢é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–è€…æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è§£å†³å®ƒï¼Œæœ¬æ–‡é€‰æ‹©ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹æ³•æ¥è®²è§£ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¡ç®—ä¸€ä¸ªæ•°çš„æ•°ä½ä¹‹å’Œå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å¯¹æ•° x æ¯æ¬¡å¯¹ 10 å–ä½™ï¼Œå°±èƒ½çŸ¥é“æ•° x çš„ä¸ªä½æ•°æ˜¯å¤šå°‘ï¼Œç„¶åå†å°† x é™¤ 10ï¼Œè¿™ä¸ªæ“ä½œç­‰ä»·äºå°† x çš„åè¿›åˆ¶æ•°å‘å³ç§»ä¸€ä½ï¼Œåˆ é™¤ä¸ªä½æ•°ï¼ˆç±»ä¼¼äºäºŒè¿›åˆ¶ä¸­çš„ &gt;&gt; å³ç§»è¿ç®—ç¬¦ï¼‰ï¼Œä¸æ–­é‡å¤ç›´åˆ° x ä¸º 0 æ—¶ç»“æŸã€‚</p><p>åŒæ—¶è¿™é“é¢˜è¿˜æœ‰ä¸€ä¸ªéšè—çš„ä¼˜åŒ–ï¼šæˆ‘ä»¬åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­æœç´¢æ–¹å‘å¯ä»¥ç¼©å‡ä¸ºå‘å³å’Œå‘ä¸‹ï¼Œè€Œä¸å¿…å†å‘ä¸Šå’Œå‘å·¦è¿›è¡Œæœç´¢ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å±•ç¤ºäº† 16 * 16 çš„åœ°å›¾éšç€é™åˆ¶æ¡ä»¶ k çš„æ”¾å¤§ï¼Œå¯è¡Œæ–¹æ ¼çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ¯ä¸ªæ ¼å­é‡Œçš„å€¼ä¸ºè¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œï¼Œè“è‰²æ–¹æ ¼ä»£è¡¨ééšœç¢æ–¹æ ¼ï¼Œå³å…¶å€¼å°äºç­‰äºå½“å‰çš„é™åˆ¶æ¡ä»¶ kã€‚æˆ‘ä»¬å¯ä»¥å‘ç°éšç€é™åˆ¶æ¡ä»¶ k çš„å¢å¤§ï¼Œ(0, 0) æ‰€åœ¨çš„è“è‰²æ–¹æ ¼åŒºåŸŸå†…æ–°åŠ å…¥çš„ééšœç¢æ–¹æ ¼éƒ½å¯ä»¥ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ã€‚è€Œå…¶ä»–ä¸è¿é€šçš„è“è‰²æ–¹æ ¼åŒºåŸŸä¼šéšç€ k çš„å¢å¤§è€Œè¿é€šï¼Œä¸”è¿é€šçš„æ—¶å€™ä¹Ÿæ˜¯ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æœç´¢æ–¹å‘ç¼©å‡ä¸ºå‘å³æˆ–å‘ä¸‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br>        q = Queue()<br>        q.put((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<br>        s = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>            x, y = q.get()<br>            <span class="hljs-keyword">if</span> (x, y) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= x &lt; m <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; n <span class="hljs-keyword">and</span> digitsum(x) + digitsum(y) &lt;= k:<br>                s.add((x, y))<br>                <span class="hljs-keyword">for</span> nx, ny <span class="hljs-keyword">in</span> [(x + <span class="hljs-number">1</span>, y), (x, y + <span class="hljs-number">1</span>)]:<br>                    q.put((nx, ny))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s)<br></code></pre></td></tr></tbody></table></figure><h4 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h4><h5 id="æ—¶é—´å¤æ‚åº¦ï¼šO-mn">æ—¶é—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚è€ƒè™‘æ‰€æœ‰æ ¼å­éƒ½èƒ½è¿›å…¥ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™ä¸€ä¸ªæ ¼å­æœ€å¤šä¼šè¢«è®¿é—®çš„æ¬¡æ•°ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(2mn)=O(mn)ã€‚</p><h5 id="ç©ºé—´å¤æ‚åº¦ï¼šO-mn">ç©ºé—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚æœç´¢çš„æ—¶å€™éœ€è¦ä¸€ä¸ªå¤§å°ä¸º O(mn)çš„æ ‡è®°ç»“æ„ç”¨æ¥æ ‡è®°æ¯ä¸ªæ ¼å­æ˜¯å¦è¢«èµ°è¿‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>DFS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>DFS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Sobelç®—å­</title>
    <link href="/2021/08/14/img_process/sobel/"/>
    <url>/2021/08/14/img_process/sobel/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»Sobelç®—å­ï¼Œä¸»è¦ç”¨äºè¾¹ç¼˜æ£€æµ‹ï¼›ç”±äºè¯¥ç®—å­å¼•å…¥äº†å±€éƒ¨å¹³å‡ï¼Œå¯¹å™ªå£°æœ‰å¹³æ»‘ä½œç”¨ï¼Œå› æ­¤è¿˜å¯ä»¥æ¶ˆé™¤å™ªå£°ã€‚</p></blockquote><h2 id="å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦">å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦</h2><p>åœ¨å›¾åƒè¾¹ç¼˜ï¼Œç°åº¦å€¼çš„å˜åŒ–è¾ƒå¤§ï¼Œå› æ­¤å›¾åƒåœ¨æ­¤å¤„çš„æ¢¯åº¦å€¼ä¹Ÿè¾ƒå¤§ã€‚ä¸€èˆ¬æƒ…å†µï¼Œå›¾åƒæ¢¯åº¦æ—¶è®¡ç®—å›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯ã€‚å›¾åƒæ¢¯åº¦ä¸¥æ ¼æ¥è¯´æ—¶éœ€è¦æ±‚å¯¼æ•°ï¼Œä½†æ˜¯åœ¨å›¾åƒè®¡ç®—ä¸Šæ—¶ä½¿ç”¨åƒç´ å€¼çš„å·®å¾—åˆ°æ¢¯åº¦çš„è¿‘ä¼¼å€¼ã€‚<br>å›¾åƒå¼ºåº¦çš„æ˜¾è‘—å˜åŒ–å¯åˆ†ä¸ºï¼š</p><ul><li>é˜¶è·ƒå˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦åœ¨ä¸è¿ç»­å¤„çš„ä¸¤è¾¹çš„åƒç´ ç°åº¦å€¼æœ‰ç€æ˜¾è‘—çš„å·®å¼‚ï¼›</li><li>çº¿æ¡ï¼ˆå±‹é¡¶ï¼‰å˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦çªç„¶ä»ä¸€ä¸ªå€¼å˜åŒ–åˆ°å¦ä¸€ä¸ªå€¼ï¼Œä¿æŒä¸€è¾ƒå°è¡Œç¨‹ååˆå›åˆ°åŸæ¥çš„å€¼ã€‚</li></ul><p><img src="https://picture.mulindya.com/sobel-pic1.png" alt=""></p><p>ï¼ˆaï¼‰ï¼ˆbï¼‰åˆ†åˆ«æ˜¯é˜¶è·ƒå‡½æ•°å’Œå±‹é¡¶å‡½æ•°çš„äºŒç»´å›¾åƒï¼›ï¼ˆcï¼‰ï¼ˆdï¼‰æ˜¯é˜¶è·ƒå’Œå±‹é¡¶å‡½æ•°çš„å‡½æ•°å›¾è±¡ï¼›ï¼ˆeï¼‰ï¼ˆfï¼‰å¯¹åº”ä¸€é˜¶å€’æ•°ï¼›ï¼ˆgï¼‰ï¼ˆhï¼‰æ˜¯äºŒé˜¶å€’æ•°ã€‚</p><h2 id="Sobelç®—å­">Sobelç®—å­</h2><p>å¸¸ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ¨¡æ¿è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå°†Gxï¼ŒGyä¸å›¾åƒå·ç§¯ï¼Œå³å¯å¾—åˆ°æ¨ªå‘å’Œçºµå‘çš„äº®åº¦å·®åˆ†è¿‘ä¼¼å€¼ã€‚</p>$$G_x = \begin{bmatrix} -1 &amp; 0 &amp; 1 \\ -2 &amp; 0 &amp; 2\\-1 &amp; 0 &amp; 1\end{bmatrix} \qquad G_y = \begin{bmatrix} 1 &amp; 2 &amp; 1 \\ 0 &amp; 0 &amp; 0\\-1 &amp; -2 &amp; -1\end{bmatrix}$$<p>å›¾åƒæ¯ä¸€ä¸ªåƒç´ çš„æ¢¯åº¦å¯ä»¥ä½¿ç”¨$G = \sqrt{G<sup>2_x+G</sup>2_y}$æ¥è¡¨ç¤ºï¼Œæ¢¯åº¦çš„æ–¹å‘ä½¿ç”¨$\Theta = arctan(\frac{G_y}{G_x})$ã€‚</p><p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¯”<code>Sobel</code>å‡½æ•°çš„è¿‘ä¼¼æ•ˆæœæ›´å¥½çš„ <code>Scharr</code>å‡½æ•°ï¼Œå…¶å†…æ ¸çŸ©é˜µå¦‚ä¸‹:</p>$$G_x = \begin{bmatrix} -3 &amp; 0 &amp; 3 \\ -10 &amp; 0 &amp; 10 \\ -3 &amp; 0 &amp; 3\end{bmatrix} \qquad G_y = \begin{bmatrix} -3 &amp; -10 &amp; -3 \\ 0 &amp; 0 &amp; 0 \\ 3 &amp; 10 &amp; 3\end{bmatrix}$$<h2 id="ä»£ç ä½¿ç”¨">ä»£ç ä½¿ç”¨</h2><h3 id="cv2-Sobel">cv2.Sobel()</h3><p>Sobelç®—å­ä¾ç„¶æ˜¯ä¸€ç§è¿‡æ»¤å™¨ï¼Œåªæ˜¯å…¶æ˜¯å¸¦æœ‰æ–¹å‘çš„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dst = cv2.Sobel(src, ddepth, dx, dy[,ksize[, scale[, delta[, borderType]]]])<br></code></pre></td></tr></tbody></table></figure><ul><li>dstä»£è¡¨ç›®æ ‡å‡½æ•°</li><li>srcä»£è¡¨åŸå§‹å›¾åƒ</li><li>ddpethä»£è¡¨è¾“å‡ºå›¾åƒçš„æ·±åº¦ ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯ä¸åŸå›¾åƒç›¸åŒçš„æ·±åº¦ã€‚ç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼›</li><li>dxä»£è¡¨xæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•° ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>dyä»£è¡¨yæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>ksizeä»£è¡¨Sobelæ ¸çš„å¤§å°ï¼Œè¯¥å€¼ä¸º-1æ—¶ï¼Œåˆ™ä¼šä½¿ç”¨Scharrç®—å­è¿›è¡Œè¿ç®—,ä¸€èˆ¬é€‰æ‹©ä¸º1ã€3ã€5ã€7</li><li>scaleä»£è¡¨è®¡ç®—å¯¼æ•°æ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>deltaä»£è¡¨åŠ åœ¨ç›®æ ‡å›¾åƒdstä¸Šçš„å€¼ï¼Œè¯¥å€¼æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º0</li><li>borderTypeä»£è¡¨è¾¹ç•Œæ ·å¼ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</li></ul><blockquote><p>å…¶ä¸­ddepthè®¾è®¡å›¾åƒæ·±åº¦çš„æ¦‚å¿µï¼š<br>å›¾åƒæ·±åº¦æ˜¯æŒ‡å­˜å‚¨æ¯ä¸ªåƒç´ å€¼æ‰€ç”¨çš„ä½æ•°ï¼Œä¾‹å¦‚cv2.CV_8Uï¼ŒæŒ‡çš„æ˜¯8ä½æ— ç¬¦å·æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0~255ï¼Œè¶…å‡ºèŒƒå›´åˆ™ä¼šè¢«æˆªæ–­ï¼ˆæˆªæ–­æŒ‡çš„æ˜¯ï¼Œå½“æ•°å€¼å¤§äº255ä¿ç•™ä¸º255ï¼Œå½“æ•°å€¼å°äº0ä¿ç•™ä¸º0ï¼Œå…¶ä½™ä¸å˜ï¼‰ã€‚</p><p>å…·ä½“è¿˜æœ‰ï¼šCV_16Sï¼ˆ16ä½æ— ç¬¦å·æ•°ï¼‰ï¼ŒCV_16Uï¼ˆ16ä½æœ‰ç¬¦å·æ•°ï¼‰ï¼ŒCV_32Fï¼ˆ32ä½æµ®ç‚¹æ•°ï¼‰ï¼ŒCV_64Fï¼ˆ64ä½æµ®ç‚¹æ•°ï¼‰ç­‰.</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-comment">#è½½å…¥åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#æ±‚Xæ–¹å‘æ¢¯åº¦ï¼Œå¹¶ä¸”è¾“å‡ºå›¾åƒä¸€ä¸ªä¸ºCV_8U,ä¸€ä¸ªä¸ºCV_64F</span><br>img_gradient_X_8U=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>img_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å°†å›¾åƒæ·±åº¦æ”¹ä¸ºCV_8U</span><br>img_gradient_X_64Fto8U=cv2.convertScaleAbs(img_gradient_X_64F)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'X_gradient_8U'</span>,img_gradient_X)<br>cv2.imshow(<span class="hljs-string">'X_gradient_64Fto8U'</span>,img_gradient_X_64Fto8U)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic2.png" alt=""></p><p><code>cv2.imshow()</code>çš„é»˜è®¤æ˜¾ç¤ºä¸º8ä½æ— ç¬¦å·æ•°ï¼Œå³[0,255]ï¼Œå› æ­¤åœ¨æ˜¾ç¤º<code>CV_64F</code>çš„å›¾åƒå‰ä½¿ç”¨äº†å‡½æ•°<code>cv2.convertScaleAbs()</code>å°†å›¾åƒæ·±åº¦ä¸º<code>CV_64F</code>çš„æ¢¯åº¦å›¾åƒé‡æ–°è½¬åŒ–ä¸º<code>CV_8U</code>ã€‚</p><h3 id="cv2-convertScaleAbs">cv2.convertScaleAbs()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.convert<span class="hljs-constructor">ScaleAbs(<span class="hljs-params">src</span>[,<span class="hljs-params">alpha</span>[,<span class="hljs-params">beta</span>]])</span><br></code></pre></td></tr></tbody></table></figure><p>å…ˆè®¡ç®—æ•°ç»„ç»å¯¹å€¼ï¼Œåè½¬åŒ–ä¸º8ä½æ— ç¬¦å·æ•°</p><ul><li>src:è¾“å…¥å›¾åƒï¼ˆå¤šç»´æ•°ç»„ï¼‰</li><li>alpha:æ¯”ä¾‹å› å­</li><li>beta:ä¿å­˜æ–°å›¾åƒï¼ˆæ•°ç»„ï¼‰å‰å¯ä»¥å¢åŠ çš„å€¼</li></ul><h3 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h3><p>é˜²æ­¢æ¢¯åº¦å¤§å°è¢«æˆªæ–­æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å…ˆå°†è¾“å…¥å›¾åƒå½’ä¸€åŒ–ï¼ˆå®é™…å½’ä¸€åŒ–çš„è¿‡ç¨‹å°±å·²ç»å®ç°äº†å›¾åƒæ·±åº¦çš„è½¬å˜ï¼‰ã€‚åœ¨ä½¿ç”¨æ·±åº¦å¤§äº8Uçš„æ ¼å¼ä¹‹å‰å°†ç°åº¦å…ˆå½’ä¸€åŒ–ï¼Œå°±ä¸ç”¨<code>convertScaleAbs</code>è½¬æ¢äº†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#åŸå›¾å½’ä¸€åŒ–,å®é™…å›¾åƒæ·±åº¦å·²ç»å˜ä¸ºCV_64F</span><br>img_standard=img_original/<span class="hljs-number">255</span><br><span class="hljs-comment">#é‡‡ç”¨ç°åº¦åŸå›¾æ±‚Xæ–¹å‘æ¢¯åº¦</span><br>original_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>original_gradient_X_64Fto8U=cv2.convertScaleAbs(original_gradient_X_64F)<br><span class="hljs-comment">#é‡‡ç”¨å½’ä¸€åŒ–çš„å›¾åƒæ±‚Xæ–¹å‘æ¢¯åº¦</span><br>standard_gradient_X=cv2.Sobel(img_standard,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'original'</span>,img_original)<br>cv2.imshow(<span class="hljs-string">'original_X'</span>,original_gradient_X_64Fto8U)<br>cv2.imshow(<span class="hljs-string">'standard_X'</span>,standard_gradient_X)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic3.png" alt=""></p><h3 id="cv2-addWeighted">cv2.addWeighted()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.add<span class="hljs-constructor">Weighted(<span class="hljs-params">src1</span>, <span class="hljs-params">alpha</span>, <span class="hljs-params">src2</span>, <span class="hljs-params">beta</span>, <span class="hljs-params">gamma</span>[, <span class="hljs-params">dst</span>[, <span class="hljs-params">dtype</span>]])</span> â†’ dst<br></code></pre></td></tr></tbody></table></figure><ul><li>src1 è¾“å…¥çš„ç¬¬ä¸€ä¸ªæ•°ç»„</li><li>alpha ç¬¬ä¸€ä¸ªæ•°ç»„çš„æƒé‡</li><li>src2 è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°ç»„ï¼ˆä¸ç¬¬ä¸€ä¸ªæ•°ç»„æœ‰ç›¸åŒçš„shapeï¼‰</li><li>beta ç¬¬äºŒä¸ªæ•°ç»„çš„æƒé‡</li><li>dst è¾“å‡ºçš„æ•°ç»„åç§°</li><li>gamma è®¡ç®—å’Œæ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>dtype è¾“å‡ºå›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºå’Œinputç›¸åŒ</li><li></li></ul><blockquote><p>dst = src1 * alpha + src2 * beta + gamma;</p></blockquote><p>æ³¨æ„ï¼šç”±å‚æ•°è¯´æ˜å¯ä»¥çœ‹å‡ºï¼Œè¢«å åŠ çš„ä¸¤å¹…å›¾åƒå¿…é¡»æ˜¯å°ºå¯¸ç›¸åŒã€ç±»å‹ç›¸åŒçš„ï¼›å¹¶ä¸”ï¼Œå½“è¾“å‡ºå›¾åƒarrayçš„æ·±åº¦ä¸ºCV_32Sæ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸é€‚ç”¨äº†ï¼Œè¿™æ—¶å€™å°±ä¼šå†…å­˜æº¢å‡ºæˆ–è€…ç®—å‡ºçš„ç»“æœå‹æ ¹ä¸å¯¹ã€‚</p><h3 id="è¾¹ç¼˜æ£€æµ‹">è¾¹ç¼˜æ£€æµ‹</h3><p>é€šè¿‡cv2.Sobel()æˆ‘ä»¬å¯ä»¥è½»æ¾è®¡ç®—å‡ºX,Yæ–¹å‘çš„æ¢¯åº¦å¤§å°ï¼Œæ ¹æ®å…¬å¼</p><p>$$<br>G = \sqrt{G<sup>2_x+G</sup>2_y}<br>$$<br>å¯ä»¥æ±‚å‡ºæ¢¯åº¦å›¾åƒï¼Œå®é™…æ“ä½œæ—¶ï¼Œä¸ºäº†ç®€åŒ–è¿ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¬å¼</p><p>$$<br>G = \vert{G_x}\vert+\vert{G_y}\vert<br>$$</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå¹¶ä¸”å½’ä¸€åŒ–</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)/<span class="hljs-number">255</span><br><span class="hljs-comment">#åˆ†åˆ«æ±‚X,Yæ–¹å‘çš„æ¢¯åº¦</span><br>grad_X=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>grad_Y=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)<br><span class="hljs-comment">#æ±‚æ¢¯åº¦å›¾åƒ</span><br>grad=cv2.addWeighted(grad_X,<span class="hljs-number">0.5</span>,grad_Y,<span class="hljs-number">0.5</span>,<span class="hljs-number">0</span>)<br>cv2.imshow(<span class="hljs-string">'gradient'</span>,grad)<br></code></pre></td></tr></tbody></table></figure><h2 id="å®˜æ–¹è¯´æ˜">å®˜æ–¹è¯´æ˜</h2><p>å½“å¹´ä½œè€…å¹¶æ²¡æœ‰å…¬å¼€å‘è¡¨è¿‡è®ºæ–‡ï¼Œä»…ä»…æ˜¯åœ¨ä¸€æ¬¡åšå£«ç”Ÿè¯¾é¢˜è®¨è®ºä¼š(1968)ä¸Šæå‡º(â€œA 3x3 Isotropic Gradient Operator for Image Processingâ€)ï¼Œååœ¨1973å¹´å‡ºç‰ˆçš„ä¸€æœ¬ä¸“è‘—ï¼ˆâ€œPattern Classification and Scene Analysisâ€ï¼‰çš„è„šæ³¨é‡Œä½œä¸ºæ³¨é‡Šå‡ºç°å’Œå…¬å¼€çš„ã€‚</p><p>è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä»¥ä¸‹å†…å®¹ã€‚</p><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe>]]></content>
    
    
    <categories>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer06 ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</title>
    <link href="/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer06/"/>
    <url>/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer06/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[1,3,2]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>éå†é“¾è¡¨ï¼Œç›´æ¥æ’å…¥åˆ°å¤´ä½ç½®ã€‚å°±å¯ä»¥ç›´æ¥è¾“å‡ºäº†ã€‚æˆ–è€…é‡‡ç”¨é€’å½’ï¼Œè¶…çº§ç®€æ´ï¼Œå€¼å¾—å€Ÿé‰´ã€‚æ³¨æ„ifçš„æ¡ä»¶å’Œå¯¹åº”ç»“æœã€‚ï¼ˆé€’å½’å°±ä»ä¸­é—´æ™®é€‚çš„èŠ‚ç‚¹å¼€å§‹è€ƒè™‘ ç„¶åè¡¥å……è¾¹ç•Œç»†èŠ‚ï¼‰</p><p><font color="orange">return self.reversePrint( head.next ) + [ head.val ] if head else []</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode(object):</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reversePrint</span>(<span class="hljs-params">self, head</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type head: ListNode</span><br><span class="hljs-string">        :rtype: List[int]</span><br><span class="hljs-string">        """</span><br>        p=head<br>        result = []<br>        <span class="hljs-keyword">while</span>(p):<br>            result = [p.val]+result <span class="hljs-comment">#ç›´æ¥æ·»åŠ åˆ°å‰é¢</span><br>            p = p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> result<br>        <span class="hljs-comment">#ä½¿ç”¨é€’å½’ä¸€æ¡è¯­å¥è¶…çº§ç®€æ´ é€’å½’åä¸€ä¸ªå…ƒç´ +å½“å‰å…ƒç´  å¦‚æœå½“å‰ä¸ºç©ºåˆ™+ã€ã€‘ ä¹Ÿæ˜¯ç»ˆæ­¢æœªçŸ¥</span><br>        <span class="hljs-comment">#return self.reversePrint(head.next) + [head.val] if head else []</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>é“¾è¡¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer12 çŸ©é˜µä¸­çš„è·¯å¾„</title>
    <link href="/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer12/"/>
    <url>/2021/08/14/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer12/</url>
    
    <content type="html"><![CDATA[<blockquote><p>çŸ©é˜µä¸­çš„è·¯å¾„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ 3Ã—4 çš„çŸ©é˜µä¸­åŒ…å«å•è¯ â€œABCCEDâ€ï¼ˆå•è¯ä¸­çš„å­—æ¯å·²æ ‡å‡ºï¼‰ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer12-pic1.jpg" alt=""></p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šboard = [[<span class="hljs-string">"A"</span>,<span class="hljs-string">"B"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"E"</span>],[<span class="hljs-string">"S"</span>,<span class="hljs-string">"F"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"S"</span>],[<span class="hljs-string">"A"</span>,<span class="hljs-string">"D"</span>,<span class="hljs-string">"E"</span>,<span class="hljs-string">"E"</span>]], word = <span class="hljs-string">"ABCCED"</span><br>è¾“å‡ºï¼štrue<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">board</span> = [[<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>],[<span class="hljs-string">"c"</span>,<span class="hljs-string">"d"</span>]], <span class="hljs-attr">word</span> = <span class="hljs-string">"abcd"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= board.length &lt;= 200</code></li><li><code>1 &lt;= board[i].length &lt;= 200</code></li><li><code>board</code> å’Œ <code>word</code> ä»…ç”±å¤§å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¾ªç¯éå†äºŒç»´æ•°ç»„ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿ç»­çš„å­—ç¬¦ä¸²ã€‚åœ¨dfsä¸­é¦–å…ˆè¿›è¡Œè¾¹ç•ŒèŒƒå›´åˆ¤æ–­ï¼Œä»¥åŠæ­¤ç‚¹æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœä¸æ»¡è¶³è¦æ±‚ç›´æ¥è¿”å›å‡ï¼Œä¸ºçœŸåˆ™ç»§ç»­wordåˆ¤æ–­ä¹‹åçš„å­—ç¬¦ã€‚å¦‚æœä»¥åŠæ˜¯æœ€åçš„å­—ç¬¦å°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚<font color="purple">æ³¨æ„åœ¨åˆ¤æ–­k+1ä¹‹å‰éœ€è¦å…ˆmaskæ‰è‡ªèº«çš„å€¼ï¼Œé˜²æ­¢åç»­â€œè·¯çº¿è¿”å›â€</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exist</span>(<span class="hljs-params">self, board, word</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type board: List[List[str]]</span><br><span class="hljs-string">        :type word: str</span><br><span class="hljs-string">        :rtype: bool</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j,k</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board)&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> board[i][j]!=word[k]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> <br>            <span class="hljs-comment">#ä¸åŒ¹é…çš„æƒ…å†µ</span><br>            <span class="hljs-keyword">if</span> k == <span class="hljs-built_in">len</span>(word)-<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#ä¸ç”¨ç»§ç»­åˆ¤æ–­</span><br>            board[i][j] = <span class="hljs-string">' '</span><br>            <span class="hljs-comment"># #æ³¨æ„ä¸èƒ½ç›´æ¥è¿”å› å› ä¸ºåœ¨å¤„ç†é‚»è¿‘çš„å†…å®¹ä¼šåˆ¤æ–­åˆ°è‡ªèº«ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ï¼Œæ‰€ä»¥å…ˆmask</span><br>            <span class="hljs-comment"># return dfs(i+1,j,k+1) or dfs(i-1,j,k+1) or dfs(i,j+1,k+1) or dfs(i,j-1,k+1) </span><br>            res = dfs(i+<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i-<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j+<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j-<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <br>            board[i][j] = word[k]<br>            <span class="hljs-keyword">return</span> res<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])):<br>                <span class="hljs-keyword">if</span> dfs(i,j,<span class="hljs-number">0</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#å¦‚æœä»ijå¼€å§‹æ‰¾0ä¹‹åçš„å­—ç¬¦ä¸²æ‰¾åˆ°åˆ™ä¸ºçœŸ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>DFS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>DFS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer11 æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</title>
    <link href="/2021/08/13/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer11/"/>
    <url>/2021/08/13/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer11/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [3,4,5,1,2] ä¸º [1,2,3,4,5] çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[3,4,5,1,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[2,2,2,0,1]</span><br>è¾“å‡ºï¼š<span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å°†æ•°ç»„éå†ä¸€éï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªéå¢åºçš„å…ƒç´ å³ä¸ºæœ€å°å€¼ã€‚å¤æ‚åº¦ä¸ºçº¿æ€§çº§åˆ«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(numbers):<span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        minitem = numbers[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(numbers)):<br>            <span class="hljs-keyword">if</span> numbers[i]&lt;numbers[i-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(minitem,numbers[i])<br>        <span class="hljs-keyword">return</span> minitem<br></code></pre></td></tr></tbody></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•ï¼Œå°†çº¿æ€§çº§åˆ«çš„å¤æ‚åº¦é™ä½åˆ°å¯¹æ•°çº§åˆ«ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer11-pic1.png" alt=""></p><p>æœ€ä½ç‚¹æœ‰ç‰¹æ€§ï¼šå·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½è¦æ¯”å³è¾¹æ‰€æœ‰å…ƒç´ å¤§ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥é€æ¸ç¼©å°èŒƒå›´ã€‚</p><p>ä¸­é—´å…ƒç´ å’ŒæŸä¸ªè¾¹ç•Œå…ƒç´ æ¯”è¾ƒå¤§å°ï¼Œæ¥ç¡®å®šèŒƒå›´ï¼Œ<u>ä½†æ˜¯è¦æ³¨æ„ä¸¤è€…ç›¸ç­‰æ—¶å°±æ²¡æœ‰ç¡®åˆ‡çš„åˆ¤æ–­äº†</u>ã€‚å¯ä»¥ç›´æ¥ç”¨çº¿æ€§æ¯”è¾ƒæ¥æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: j -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œå½“å‡ºç° nums[m] = nums[j] æ—¶ï¼Œä¸€å®šæœ‰åŒºé—´[i,m]å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ æˆ– åŒºé—´ [m,j] å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ï¼ˆæˆ–ä¸¤è€…çš†æ»¡è¶³ï¼‰ã€‚å¯¹äºå¯»æ‰¾æ­¤ç±»æ•°ç»„çš„æœ€å°å€¼é—®é¢˜ï¼Œå¯ç›´æ¥æ”¾å¼ƒäºŒåˆ†æŸ¥æ‰¾ï¼Œè€Œä½¿ç”¨çº¿æ€§æŸ¥æ‰¾æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(numbers[i:j])<br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡çŒ®æ•´ç†ç¬”è®°</title>
    <link href="/2021/08/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E6%95%B4%E7%90%86%E5%BD%92%E7%BA%B3/paper-site/"/>
    <url>/2021/08/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/paper/%E6%95%B4%E7%90%86%E5%BD%92%E7%BA%B3/paper-site/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŸ¥æ‰¾æ–‡çŒ®çš„ç½‘ç«™<br><a href="https://www.thecvf.com/">https://www.thecvf.com/</a><br><a href="https://arxiv.org/list/cs/recent">https://arxiv.org/list/cs/recent</a><br><a href="https://www.researchgate.net/">https://www.researchgate.net/</a></p></blockquote><blockquote><p>è¶…å®è—åšä¸»ï¼š <a href="https://www.zhihu.com/people/wang-jia-hao-53-3">ç§‘æŠ€çŒ›å…½</a><br>å®è—å…¬ä¼—å·ï¼š æå¸‚å¹³å°<br>ç³»åˆ—å­¦ä¹ ï¼š <a href="https://zhuanlan.zhihu.com/p/348593638">VITå­¦ä¹ </a></p></blockquote><h3 id="å¾®è°ƒæŠ€å·§">å¾®è°ƒæŠ€å·§</h3><p><a href="https://paper.mulindya.com/Accurate%2C%20Large%20Minibatch%20SGD%20Training%20ImageNet%20in%201%20Hour.pdf"><strong>Accurate, Large Minibatch SGD Training ImageNet in 1 Hour.pdf</strong></a></p><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Co-Tuning%20for%20Transfer%20Learning.pdf"><strong>Co-Tuning for Transfer Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><p><a href="https://paper.mulindya.com/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf"><strong>He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Simple%20Copy-Paste%20is%20a%20Strong%20Data%20Augmentation%20Method.pdf"><strong>Simple Copy-Paste is a Strong Data Augmentation Method.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Discriminative%20Feature%20Alignment%20Improving%20Transferability%20of.pdf"><strong>Discriminative Feature Alignment Improving Transferability of.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Movement%20Pruning%20adaptive%20sparsity%20by%20fine-tuning.pdf"><strong>Movement Pruning adaptive sparsity by fine-tuning.pdf</strong></a></p><h3 id="FPN">FPN</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Feature Pyramid Networks for Object Detection</strong></a>ï¼ˆFPNç›®æ ‡æ£€æµ‹ è§£è¯»https://zhuanlan.zhihu.com/p/36461718ï¼‰</p><h3 id="Transformer">Transformer</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Attention Is All You Need</strong></a> (è®²è§£Attentionæœºåˆ¶)</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey of Transformers</strong></a>ï¼ˆTransformerçš„æ€»ç»“ï¼‰</p><h3 id="VIT">VIT</h3><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>AN IMAGE IS WORTH 16X16 WORDS: TRANSFORMERS FOR IMAGE RECOGNITION AT</strong></a>ï¼ˆå°†transformeråº”ç”¨äºå›¾åƒåˆ†ç±»ï¼‰</p><p><a href="https://paper.mulindya.com/How%20to%20train%20your%20ViT.pdf"><strong>How to train your ViT? Data, Augmentation,and Regularization in Vision Transformers</strong></a>ï¼ˆè®­ç»ƒæŠ€å·§ï¼‰</p><p><a href="https://paper.mulindya.com/Scaling%20Vision%20Transformers.pdf"><strong>Scaling Vision Transformers</strong></a>ï¼ˆç²¾ç‚¼VITï¼‰</p><p><a href="https://paper.mulindya.com/levit.pdf"><strong>LeViT: a Vision Transformer in ConvNetâ€™s Clothing for Faster Inference</strong></a> ï¼ˆæ··åˆç½‘ç»œï¼‰</p><p><a href="https://paper.mulindya.com/End-to-End%20Semi-Supervised%20Object%20Detection%20with%20Soft%20Teacher.pdf"><strong>End-to-End Video Instance Segmentation with Transformers</strong></a>ï¼ˆä½¿ç”¨transformerè¿›è¡Œå®ä¾‹åˆ†å‰²ï¼‰</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey on Visual Transformer</strong></a> ï¼ˆæ€»ç»“ï¼‰</p><h3 id="EfficientNet">EfficientNet</h3><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><h3 id="BIT">BIT</h3><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><h3 id="YOLOv4">YOLOv4</h3><p><a href="https://paper.mulindya.com/yolo4.pdf"><strong>YOLOv4: Optimal Speed and Accuracy of Object Detection</strong></a></p><h3 id="PaDim">PaDim</h3><p><a href="https://paper.mulindya.com/PaDiM_a%20Patch%20Distribution%20Modeling%20Framework.pdf"><strong>PaDiM: a Patch Distribution Modeling Framework for Anomaly Detection and Localization</strong></a> (ä½¿ç”¨é©¬æ°è·ç¦»)</p><p><a href="https://paper.mulindya.com/Semi-orthogonal%20Embedding%20for%20Efficient%20Unsupervised%20Anomaly%20Segmentation.pdf"><strong>Semi-orthogonal Embedding for Efficient Unsupervised Anomaly Segmentation</strong></a> ï¼ˆå¾ˆå¤šæ•°å­¦çŸ¥è¯†ï¼‰</p><h3 id="Swin">Swin</h3><p><a href="https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf"><strong>Swin Transformer: Hierarchical Vision Transformer using Shifted Windows</strong></a></p><h3 id="å…¶ä»–">å…¶ä»–</h3><p>è°·æ­Œæå‡ºçš„ä½¿ç”¨MPLä»£æ›¿Transformerï¼ŒCNNï¼ˆ<a href="https://zhuanlan.zhihu.com/p/370780575">ä¹Ÿå¼•å‘äº†ä¸€äº›äº‰è®®</a>ï¼‰</p><p><a href="https://paper.mulindya.com/MLP-Mixer_An%20all-MLP%20Architecture%20for%20Vision.pdf"><strong>MLP-Mixer: An all-MLP Architecture for Vision</strong></a></p>]]></content>
    
    
    <categories>
      
      <category>æ–‡çŒ®</category>
      
      <category>æ•´ç†å½’çº³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡çŒ®</tag>
      
      <tag>æ•´ç†å½’çº³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>fine-tuningçš„æ–¹æ³•</title>
    <link href="/2021/08/13/deep_learning/fine-tuning/"/>
    <url>/2021/08/13/deep_learning/fine-tuning/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ”¶é›†å…³äºæ·±åº¦å­¦ä¹ çš„è°ƒå‚çš„ç›¸å…³ç¬”è®°ï¼Œä¸»è¦ç”¨äºç½‘ç»œè®­ç»ƒçš„å¾®è°ƒã€‚</p></blockquote><h3 id="è®­ç»ƒæŠ€å·§"><strong>è®­ç»ƒæŠ€å·§</strong></h3><p>1.è¦åš<strong>æ¢¯åº¦å½’ä¸€åŒ–</strong>,å³ç®—å‡ºæ¥çš„æ¢¯åº¦é™¤ä»¥minibatch size</p><p>2.clip c(æ¢¯åº¦è£å‰ª): é™åˆ¶æœ€å¤§æ¢¯åº¦,å…¶å®æ˜¯value = sqrt(w1^2 +w2^2â€¦.),å¦‚æœvalueè¶…è¿‡äº†é˜ˆå€¼,å°±ç®—ä¸€ä¸ªè¡°å‡ç³»æ•°,è®©valueçš„å€¼ç­‰äºé˜ˆå€¼: 5,10,15</p><p><strong>3.é˜²æ­¢è¿‡æ‹Ÿåˆ</strong></p><p>â€‹ä¸€èˆ¬å¸¸ç”¨çš„é˜²æ­¢è¿‡æ‹Ÿåˆæ–¹æ³•æœ‰ä½¿ç”¨<strong>L1æ­£åˆ™é¡¹ã€L2æ­£åˆ™é¡¹ã€dropoutã€æå‰ç»ˆæ­¢ã€æ•°æ®é›†æ‰©å……ç­‰</strong>ã€‚å¦‚æœæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°æ¯”è¾ƒå¥½ä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°æ¬ ä½³å¯ä»¥é€‰æ‹©å¢å¤§L1æˆ–L2æ­£åˆ™çš„æƒ©ç½šåŠ›åº¦ï¼ˆ<strong>L2æ­£åˆ™ç»éªŒä¸Šé¦–é€‰1.0</strong>ï¼Œè¶…è¿‡10å¾ˆå°‘è§ï¼‰ï¼Œæˆ–<strong>å¢å¤§dropoutçš„éšæœºå¤±æ´»æ¦‚ç‡</strong>ï¼ˆç»éªŒé¦–é€‰0.5ï¼‰ï¼›æˆ–è€…å½“éšç€è®­ç»ƒçš„æŒç»­åœ¨æµ‹è¯•é›†ä¸Šä¸å¢åé™æ—¶ï¼Œä½¿ç”¨æå‰ç»ˆæ­¢è®­ç»ƒçš„æ–¹æ³•ã€‚å½“ç„¶<strong>æœ€æœ‰æ•ˆçš„è¿˜æ˜¯å¢å¤§è®­ç»ƒé›†çš„è§„æ¨¡</strong>ï¼Œå®åœ¨éš¾ä»¥è·å¾—æ–°æ•°æ®ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®é›†å¢å¼ºçš„æ–¹æ³•ï¼Œæ¯”å¦‚CVä»»åŠ¡å¯ä»¥å¯¹æ•°æ®é›†è¿›è¡Œè£å‰ªã€ç¿»è½¬ã€å¹³ç§»ç­‰æ–¹æ³•è¿›è¡Œæ•°æ®é›†å¢å¼ºï¼Œè¿™ç§æ–¹æ³•å¾€å¾€éƒ½ä¼šæé«˜æœ€åæ¨¡å‹çš„æµ‹è¯•ç²¾åº¦ã€‚<br>dropoutå¯¹å°æ•°æ®é˜²æ­¢è¿‡æ‹Ÿåˆæœ‰å¾ˆå¥½çš„æ•ˆæœ,å€¼ä¸€èˆ¬è®¾ä¸º0.5,å°æ•°æ®ä¸Šdropout+sgdã€‚åœ¨å¤§éƒ¨åˆ†å®éªŒä¸­ï¼Œæ•ˆæœæå‡éƒ½éå¸¸æ˜æ˜¾.<strong>å»ºè®®å°è¯•</strong>ã€‚ dropoutçš„ä½ç½®æ¯”è¾ƒæœ‰è®²ç©¶, å¯¹äºRNN,å»ºè®®æ”¾åˆ°è¾“å…¥-&gt;RNNä¸RNN-&gt;è¾“å‡ºçš„ä½ç½®.å…³äºRNNå¦‚ä½•ç”¨dropout,å¯ä»¥å‚è€ƒ:<a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1409.2329">http://arxiv.org/abs/1409.2329</a>(Captain Jackä»¤è¨€:(ä¸ä»…ä»…å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ, å…¶å®è¿™ç›¸å½“äºåšäººåŠ›æˆæœ¬æœ€ä½çš„Ensemble, å½“ç„¶, è®­ç»ƒèµ·æ¥ä¼šæ¯”æ²¡æœ‰Dropoutçš„è¦æ…¢ä¸€ç‚¹, åŒæ—¶ç½‘ç»œå‚æ•°ä½ æœ€å¥½ç›¸åº”åŠ ä¸€ç‚¹, å¯¹, è¿™ä¼šå†æ…¢ä¸€ç‚¹).)</p><p><strong>4.è¶…å‚</strong></p><p>â€‹learning rate æœ€é‡è¦**ï¼Œæ¨èäº†è§£ cosine learning rate å’Œ cyclic learning rateï¼Œå…¶æ¬¡æ˜¯ <strong>batchsize å’Œ weight decay</strong>ã€‚å½“ä½ çš„æ¨¡å‹è¿˜ä¸é”™çš„æ—¶å€™ï¼Œå¯ä»¥è¯•ç€åšæ•°æ®å¢å¹¿å’Œæ”¹æŸå¤±å‡½æ•°é”¦ä¸Šæ·»èŠ±äº†ã€‚(ç½—æµ©ZJUä»¤è¨€ï¼šéšç€ç½‘ç»œè®­ç»ƒçš„è¿›è¡Œï¼Œå­¦ä¹ ç‡è¦é€æ¸é™ä¸‹æ¥ï¼›ç½‘ç»œæ€§èƒ½è¶Šå¥½ï¼Œå­¦ä¹ ç‡è¦è¶Šå°ï¼ˆå³è¶Šéœ€è¦å¾®è°ƒè€Œéç²—è°ƒ)ï¼›batchsizeé€šå¸¸å½±å“æ²¡é‚£ä¹ˆå¤§ï¼Œå¡æ»¡å¡å°±è¡Œï¼Œé™¤äº†ç‰¹æ®Šçš„ç®—æ³•éœ€è¦batchå¤§ä¸€ç‚¹)<br>â€‹adam,adadeltaç­‰,åœ¨å°æ•°æ®ä¸Š,æˆ‘è¿™é‡Œå®éªŒçš„æ•ˆæœä¸å¦‚sgd, sgdæ”¶æ•›é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æœ€ç»ˆæ”¶æ•›åçš„ç»“æœï¼Œä¸€èˆ¬éƒ½æ¯”è¾ƒå¥½ã€‚<strong>å¦‚æœä½¿ç”¨sgdçš„è¯,å¯ä»¥é€‰æ‹©ä»1.0æˆ–è€…0.1çš„å­¦ä¹ ç‡å¼€å§‹,éš”ä¸€æ®µæ—¶é—´,åœ¨éªŒè¯é›†ä¸Šæ£€æŸ¥ä¸€ä¸‹,å¦‚æœcostæ²¡æœ‰ä¸‹é™,å°±å¯¹</strong>å­¦ä¹ ç‡å‡åŠ**. æˆ‘çœ‹è¿‡å¾ˆå¤šè®ºæ–‡éƒ½è¿™ä¹ˆæ,æˆ‘è‡ªå·±å®éªŒçš„ç»“æœä¹Ÿå¾ˆå¥½. å½“ç„¶,ä¹Ÿå¯ä»¥å…ˆç”¨adaç³»åˆ—å…ˆè·‘,æœ€åå¿«æ”¶æ•›çš„æ—¶å€™,æ›´æ¢æˆsgdç»§ç»­è®­ç»ƒ.åŒæ ·ä¹Ÿä¼šæœ‰æå‡.æ®è¯´adadeltaä¸€èˆ¬åœ¨åˆ†ç±»é—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ï¼Œadamåœ¨ç”Ÿæˆé—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ã€‚(Captain Jackä»¤è¨€ï¼šsgd adam è¿™äº›é€‰æ‹©ä¸Š, çœ‹ä½ ä¸ªäººé€‰æ‹©. ä¸€èˆ¬å¯¹ç½‘ç»œä¸æ˜¯å†³å®šæ€§çš„. åæ­£æˆ‘æ— è„‘ç”¨sgd + momentum. ï¼‰</p><p>5.<strong>æ¿€æ´»å‡½æ•°</strong><br>é™¤äº†gateä¹‹ç±»çš„åœ°æ–¹,éœ€è¦æŠŠè¾“å‡ºé™åˆ¶æˆ0-1ä¹‹å¤–,<strong>å°½é‡ä¸è¦ç”¨sigmoid</strong>,å¯ä»¥ç”¨tanhæˆ–è€…reluä¹‹ç±»çš„æ¿€æ´»å‡½æ•°.1. sigmoidå‡½æ•°åœ¨-4åˆ°4ä¹‹å¤–çš„åŒºé—´æ¢¯åº¦æ¥è¿‘0ï¼Œå¾ˆå®¹æ˜“é€ æˆæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚2. è¾“å…¥0å‡å€¼ï¼Œsigmoidå‡½æ•°çš„è¾“å‡ºä¸æ˜¯0å‡å€¼çš„ã€‚ï¼ˆhzwerä»¤è¨€:è™½ç„¶æœ‰è‡³å°‘åç§æ¿€æ´»å‡½æ•°ï¼Œä½†åœ¨ Relu å¤–åªæ¨èè¯•ä¸€ä¸‹ Swishã€‚)</p><p>6.BNå±‚å…·æœ‰åŠ é€Ÿè®­ç»ƒé€Ÿåº¦ï¼Œæœ‰æ•ˆé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸ï¼Œå…·æœ‰é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ•ˆæœï¼Œæ‰€ä»¥æ„å»ºç½‘ç»œæ—¶æœ€å¥½è¦åŠ ä¸Šè¿™ä¸ªç»„ä»¶ã€‚(Captain Jackä»¤è¨€ï¼šbatch normalizationæˆ‘ä¸€ç›´æ²¡ç”¨, è™½ç„¶æˆ‘çŸ¥é“è¿™ä¸ªå¾ˆå¥½, æˆ‘ä¸ç”¨ä»…ä»…æ˜¯å› ä¸ºæˆ‘æ‡’. æ‰€ä»¥è¦é¼“åŠ±ä½¿ç”¨batch normalization.ï¼‰</p><p>7.å¦‚æœä½ çš„æ¨¡å‹åŒ…å«å…¨è¿æ¥å±‚ï¼ˆMLPï¼‰ï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºå¤§å°ä¸€æ ·ï¼Œå¯ä»¥è€ƒè™‘å°†MLPæ›¿æ¢æˆ<strong>Highway Network</strong>,æˆ‘å°è¯•å¯¹ç»“æœæœ‰ä¸€ç‚¹æå‡ï¼Œå»ºè®®ä½œä¸ºæœ€åæå‡æ¨¡å‹çš„æ‰‹æ®µï¼ŒåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç»™<strong>è¾“å‡ºåŠ äº†ä¸€ä¸ªgateæ¥æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨</strong>ï¼Œè¯¦ç»†ä»‹ç»è¯·å‚è€ƒè®ºæ–‡: <a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1505.00387">http://arxiv.org/abs/1505.00387</a></p><p>8.æ¥è‡ª@å¼ é¦¨å®‡çš„æŠ€å·§ï¼š<strong>ä¸€è½®åŠ æ­£åˆ™ï¼Œä¸€è½®ä¸åŠ æ­£åˆ™ï¼Œåå¤è¿›è¡Œã€‚</strong></p><p><strong>9.Ensemble</strong><br>Ensembleæ˜¯è®ºæ–‡åˆ·ç»“æœçš„ç»ˆææ ¸æ­¦å™¨,æ·±åº¦å­¦ä¹ ä¸­ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼<br>åŒæ ·çš„å‚æ•°,ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼<br>ä¸åŒçš„å‚æ•°,é€šè¿‡cross-validation,é€‰å–æœ€å¥½çš„å‡ ç»„<br>åŒæ ·çš„å‚æ•°,æ¨¡å‹è®­ç»ƒçš„ä¸åŒé˜¶æ®µï¼Œå³ä¸åŒè¿­ä»£æ¬¡æ•°çš„æ¨¡å‹ã€‚<br>ä¸åŒçš„æ¨¡å‹,è¿›è¡Œçº¿æ€§èåˆ. ä¾‹å¦‚RNNå’Œä¼ ç»Ÿæ¨¡å‹.</p><p><strong>10.è‡ªåŠ¨è°ƒå‚æ–¹æ³•</strong><br>ï¼ˆ1ï¼‰Grid Searchï¼šå…¶åŸç†å°±åƒæ˜¯åœ¨æ•°ç»„é‡Œæ‰¾æœ€å¤§å€¼ã€‚ç¼ºç‚¹æ˜¯å¤ªè´¹æ—¶é—´äº†ï¼Œç‰¹åˆ«åƒç¥ç»ç½‘ç»œï¼Œä¸€èˆ¬å°è¯•ä¸äº†å¤ªå¤šçš„å‚æ•°ç»„åˆã€‚<br>ï¼ˆ2ï¼‰Random Searchï¼šç»éªŒä¸Šï¼ŒRandom Searchæ¯”Gird Searchæ›´æœ‰æ•ˆã€‚å®é™…æ“ä½œçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯å…ˆç”¨Gird Searchçš„æ–¹æ³•ï¼Œå¾—åˆ°æ‰€æœ‰å€™é€‰å‚æ•°ï¼Œç„¶åæ¯æ¬¡ä»ä¸­éšæœºé€‰æ‹©è¿›è¡Œè®­ç»ƒã€‚å¦å¤–Random Searchå¾€å¾€ä¼šå’Œç”±ç²—åˆ°ç»†çš„è°ƒå‚ç­–ç•¥ç»“åˆä½¿ç”¨ï¼Œå³åœ¨æ•ˆæœæ¯”è¾ƒå¥½çš„å‚æ•°é™„è¿‘è¿›è¡Œæ›´åŠ ç²¾ç»†çš„æœç´¢ã€‚<br>ï¼ˆ3ï¼‰Bayesian Optimizationï¼šè´å¶æ–¯ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°äº†ä¸åŒå‚æ•°å¯¹åº”çš„ å®éªŒç»“æœå€¼ï¼Œå› æ­¤æ›´èŠ‚çœæ—¶é—´ï¼Œè´å¶æ–¯è°ƒå‚æ¯”Grid Searchè¿­ä»£æ¬¡æ•°å°‘ï¼Œ é€Ÿåº¦å¿«ï¼›è€Œä¸”å…¶é’ˆå¯¹éå‡¸é—®é¢˜ä¾ç„¶ç¨³å¥ã€‚</p><p><strong>11.Lossè®¾è®¡</strong><br>+ ä¸€èˆ¬æ¥è¯´åˆ†ç±»å°±æ˜¯Softmax, å›å½’å°±æ˜¯L2çš„loss. ä½†æ˜¯è¦æ³¨æ„lossçš„é”™è¯¯èŒƒå›´(ä¸»è¦æ˜¯å›å½’), ä½ é¢„æµ‹ä¸€ä¸ªlabelæ˜¯10000çš„å€¼, æ¨¡å‹è¾“å‡º0, ä½ ç®—ç®—è¿™losså¤šå¤§, è¿™è¿˜æ˜¯å•å˜é‡çš„æƒ…å†µä¸‹. ä¸€èˆ¬ç»“æœéƒ½æ˜¯nan. æ‰€ä»¥ä¸ä»…ä»…è¾“å…¥è¦åšnormalization, è¾“å‡ºä¹Ÿè¦.<br>+ å¤šä»»åŠ¡æƒ…å†µä¸‹, å„lossæƒ³æ³•é™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, æˆ–è€…æœ€ç»ˆé™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, åˆæœŸå¯ä»¥ç€é‡ä¸€ä¸ªä»»åŠ¡çš„lossã€‚</p><h3 id="ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE"><strong>ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE)</strong></h3><p>SEåœ¨åˆ†ç±»ä¸Šæ˜¯ä¸ªæ¶¨ç‚¹å¿…å¤‡çš„å·¥å…·ï¼Œæ¢è¨€ä¹‹ï¼Œå †æœ€é«˜ç²¾åº¦æ˜¯ä¸€å®šè¦ç»™æ¯ä¸ªblockéƒ½åŠ ä¸Šå®ƒçš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦è€ƒè™‘æ—¶é—´ï¼Œå‚æ•°é‡å’Œç²¾åº¦ç­‰çš„trade-offï¼Œæ— è„‘å †å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥è¦é€‰æ‹©åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨åˆé€‚çš„æ¨¡å—ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<strong>æ¨èåœ¨blockæ•°é‡å’Œæ·»åŠ SEä¸Šåšæƒè¡¡</strong>ï¼Œå³<strong>ç»™éƒ¨åˆ†blcokåŠ ä¸ŠSEï¼ŒåŒæ—¶ç æ‰ä¸€äº›blockæ¥åŠ é€Ÿ</strong>ï¼Œè¿™æ ·å¯ä»¥åœ¨ç²¾åº¦å·®ä¸å¤šçš„æƒ…å†µä¸‹å‡å°‘ä¸€äº›å‚æ•°é‡ã€‚å½“ç„¶inferenceæ—¶é—´è¿™ä¸ªäº‹éœ€è¦çœ‹å…·ä½“çš„åº”ç”¨å¹³å°å¯¹SEçš„å®ç°ï¼Œå°±æ˜¯GAPå’ŒFCçš„é€Ÿåº¦ï¼Œè¿™å°±å…·ä½“é—®é¢˜å…·ä½“åˆ†æäº†ã€‚<strong>æœ‰ä½™åŠ›æœ‰å¡çš„äººï¼Œå¯ä»¥è¿ç§»æŸç§NASæ–¹æ³•æ¥åšè¿™ä¸ªçš„æœç´¢ã€‚</strong><br>å‚è€ƒè‡ªï¼š<br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - è§ç‘Ÿçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/94816420">https://www.zhihu.com/question/41631631/answer/94816420</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - Towserçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/862075836">https://www.zhihu.com/question/41631631/answer/862075836</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - ç½—æµ©.ZJUçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/216788968">https://www.zhihu.com/question/41631631/answer/216788968</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - äº¬ä¸œç™½æ¡çš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/776852832">https://www.zhihu.com/question/4163</a></p><blockquote><p>æ‰€è°“SEï¼šSENetæ˜¯Squeeze-and-Excitation Networksçš„ç®€ç§°ï¼Œæ‹¿åˆ°äº†ImageNet2017åˆ†ç±»æ¯”èµ›å† å†›ï¼Œå…¶æ•ˆæœå¾—åˆ°äº†è®¤å¯ï¼Œå…¶æå‡ºçš„SEæ¨¡å—æ€æƒ³ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å¯ä»¥åŠ è½½åˆ°ç°æœ‰çš„ç½‘ç»œæ¨¡å‹æ¡†æ¶ä¸­ã€‚<em><u>SENetä¸»è¦æ˜¯å­¦ä¹ äº†channelä¹‹é—´çš„ç›¸å…³æ€§ï¼Œç­›é€‰å‡ºäº†é’ˆå¯¹é€šé“çš„æ³¨æ„åŠ›</u></em>ï¼Œç¨å¾®å¢åŠ äº†ä¸€ç‚¹è®¡ç®—é‡ï¼Œä½†æ˜¯æ•ˆæœæ¯”è¾ƒå¥½ã€‚</p></blockquote><p>å¯¹äºCNNç½‘ç»œæ¥è¯´ï¼Œå…¶æ ¸å¿ƒè®¡ç®—æ˜¯å·ç§¯ç®—å­ï¼Œå…¶é€šè¿‡å·ç§¯æ ¸ä»è¾“å…¥ç‰¹å¾å›¾å­¦ä¹ åˆ°æ–°ç‰¹å¾å›¾ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå·ç§¯æ˜¯å¯¹ä¸€ä¸ªå±€éƒ¨åŒºåŸŸè¿›è¡Œç‰¹å¾èåˆï¼Œè¿™åŒ…æ‹¬ç©ºé—´ä¸Šï¼ˆHå’ŒWç»´åº¦ï¼‰ä»¥åŠé€šé“é—´ï¼ˆCç»´åº¦ï¼‰çš„ç‰¹å¾èåˆã€‚</p><p><img src="https://picture.mulindya.com/fine-tuning-pic1.png" alt=""></p><p>å·ç§¯å®é™…ä¸Šæ˜¯å¯¹<u>å±€éƒ¨åŒºåŸŸ</u>è¿›è¡Œçš„ç‰¹å¾èåˆã€‚ è¿™ä¹Ÿå¯¼è‡´äº†æ™®é€šå·ç§¯ç¥ç»ç½‘ç»œçš„æ„Ÿå—é‡ä¸å¤§ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾è®¡å‡ºæ›´å¤šçš„é€šé“ç‰¹å¾æ¥å¢åŠ è¿™ä¸ªï¼Œä½†æ˜¯è¿™æ ·åšå¯¼è‡´äº†è®¡ç®—é‡å¤§å¤§çš„å¢åŠ ã€‚å› æ­¤ä¸ºäº†ç©ºé—´ä¸Šèåˆæ›´å¤šç‰¹å¾èåˆï¼Œæˆ–è€…æ˜¯æå–å¤šå°ºåº¦ç©ºé—´ä¿¡æ¯ã€‚ä¹Ÿæå‡ºäº†è®¸å¤šä¸åŒçš„æ–¹æ³•å¦‚Inceptionç½‘ç»œçš„å¤šåˆ†æ”¯ç»“æ„ã€‚å¯¹äºchannelç»´åº¦çš„ç‰¹å¾èåˆï¼Œå·ç§¯æ“ä½œåŸºæœ¬ä¸Šé»˜è®¤å¯¹è¾“å…¥ç‰¹å¾å›¾çš„æ‰€æœ‰channelè¿›è¡Œèåˆã€‚<u>è€ŒSENetç½‘ç»œçš„åˆ›æ–°ç‚¹åœ¨äºå…³æ³¨channelä¹‹é—´çš„å…³ç³»ï¼Œå¸Œæœ›æ¨¡å‹å¯ä»¥è‡ªåŠ¨å­¦ä¹ åˆ°ä¸åŒchannelç‰¹å¾çš„é‡è¦ç¨‹åº¦</u>ã€‚ä¸ºæ­¤ï¼ŒSENetæå‡ºäº†Squeeze-and-Excitation (SE)æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/fine-tuning-pic2.png" alt=""></p><h3 id="åé¢è®­è¯«">åé¢è®­è¯«</h3><p>1.1ã€ä¸€ä¸Šæ¥å°±è‡ªå·±åŠ¨æ‰‹å†™æ¨¡å‹ã€‚<br>å»ºè®®é¦–å…ˆç”¨<strong>æˆç†Ÿçš„å¼€æºé¡¹ç›®åŠå…¶é»˜è®¤é…ç½®</strong>ï¼ˆä¾‹å¦‚ Gluon å¯¹ç»å…¸æ¨¡å‹çš„å„ç§å¤ç°ã€å„ä¸ªè‘—åæ¨¡å‹ä½œè€…è‡ªå·±æ”¾å‡ºæ¥çš„ä»£ç ä»“åº“ï¼‰åœ¨è‡ªå·±çš„æ•°æ®é›†ä¸Šè·‘ä¸€éï¼Œåœ¨ç­‰ç¨‹åºè¿è¡Œç»“æŸçš„æ—¶é—´é‡Œä»”ç»†ç ”ç©¶ä¸€ä¸‹ä»£ç é‡Œçš„å„ç§ç»†èŠ‚ï¼Œæœ€åå†è‡ªå·±å†™æˆ–è€…æ”¹ä»£ç ã€‚</p><p>1.2ã€<strong>ä¸æ¨èåšäººè‚‰æ¨¡å‹è®¾è®¡</strong>ï¼Œæ¯”å¦‚æŠŠæŸå±‚å·ç§¯æ”¹å¤§ä¸€ç‚¹ï¼Œæˆ–è€…å¾®è°ƒä¸€ä¸‹é€šé“æ•°ã€‚é™¤éæœ‰ç‰¹åˆ« insightï¼Œä¸è¦è‡ªå·±ä¹±è®¾è®¡æ–°ç»„ä»¶ã€‚</p><p>2ã€è®­ RNN ä¸åŠ  gradient clippingï¼Œå¯¼è‡´è®­ç»ƒä¸€æ®µæ—¶é—´ä»¥å loss çªç„¶å˜æˆ Nanã€‚</p><p>3ã€tying input &amp; output embeddingï¼ˆå°±æ˜¯è¯å‘é‡å±‚å’Œè¾“å‡º softmax å‰çš„çŸ©é˜µå…±äº«å‚æ•°ï¼Œåœ¨è¯­è¨€æ¨¡å‹æˆ–æœºå™¨ç¿»è¯‘ä¸­å¸¸ç”¨ï¼‰æ—¶å­¦ä¹ ç‡éœ€è¦è®¾ç½®å¾—éå¸¸å°ï¼Œä¸ç„¶å®¹æ˜“ Nanã€‚</p><p>4.1ã€åœ¨æ•°æ®é›†å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸Šæ¥å°±è·‘å…¨é‡æ•°æ®ã€‚å»ºè®®å…ˆç”¨ 1/100ã€1/10 çš„æ•°æ®è·‘ä¸€è·‘ï¼Œå¯¹æ¨¡å‹æ€§èƒ½å’Œè®­ç»ƒæ—¶é—´æœ‰ä¸ªåº•ã€‚</p><p>4.2è®¤ä¸ºç½‘ç»œå±‚æ•°è¶Šå¤§è¶Šå¥½ã€‚å‚æ•°é‡ä»€ä¹ˆçš„éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œåœ¨æ€§èƒ½ä¸ä¸¢çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œå±‚æ•°å‡åˆ°æœ€å°.ï¼ˆCaptain Jackä»¤è¨€ï¼šä½ æœ‰95%æ¦‚ç‡ä¸ä¼šä½¿ç”¨è¶…è¿‡40å±‚çš„æ¨¡å‹. ï¼‰</p><p>5ã€åªå–œæ¬¢æ¼‚äº®çš„æ¨¡å‹ç»“æ„ï¼Œç§ä¸èµ·è°ƒå‚æ•°çš„è®ºæ–‡/å®éªŒæŠ¥å‘Šï¼Œ<strong>çœ‹è®ºæ–‡æ—¶ç»å¸¸ä¸çœ‹è¶…å‚æ•°è®¾ç½®ç­‰ç»†èŠ‚</strong>ã€‚æ®Šä¸çŸ¥åœ¨è‡ªå·±æ²¡æœ‰å¤ªå¤šèµ„æºå®éªŒçš„æƒ…å†µä¸‹ï¼Œå®éªŒæŠ¥å‘Šç±»æ–‡ç« ç®€ç›´æ˜¯ä¸šç•Œè‰¯å¿ƒï¼<br>NLP é¢†åŸŸä¸»è¦æ¨èä»¥ä¸‹å‡ ç¯‡ï¼š<br>Regularizing and Optimizing LSTM Language Modelsï¼ˆLSTM çš„è®­ç»ƒæŠ€å·§ï¼‰<br>Massive Exploration of Neural Machine Translation Architecturesï¼ˆNMT é‡Œå„ä¸ªè¶…å‚çš„å½±å“ï¼‰<br>Training Tips for the Transformer Modelï¼ˆè®­ç»ƒ Transformer æ—¶ä¼šå‘ç”Ÿçš„å„ç§ç°è±¡ï¼‰<br>RoBERTa: A Robustly Optimized BERT Pretraining Approachï¼ˆBERT é¢„è®­ç»ƒæŠ€å·§ï¼Œè™½ç„¶è·Ÿå¤§éƒ¨åˆ†äººæ²¡å•¥å…³ç³»ï¼‰<br>CV æˆ‘ä¸ç®—å¤ªç†Ÿï¼Œä¸è¿‡ä¹Ÿå¯ä»¥å‹‰å¼ºæ¨èå‡ ç¯‡ï¼š</p><p><a href="https://arxiv.org/pdf/1706.02677.pdf">Training ImageNet in 1 Hourï¼ˆå¤§æ‰¹é‡è®­ç»ƒæŠ€å·§ï¼‰</a><br><a href="https://openaccess.thecvf.com/content_CVPR_2019/papers/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf">Bag of Tricks for Image Classification with Convolutional Neural Networksï¼ˆå„ç§è®­ç»ƒæŠ€å·§é›†å¤§æˆï¼‰</a><br><a href="https://arxiv.org/pdf/1905.11946.pdf">EfficientNet: Rethinking Model Scaling for Convolutional Neural Networksï¼ˆå½“å‰å¯¹å‚æ•°åˆ©ç”¨æœ€æœ‰æ•ˆçš„ CNNï¼‰</a></p><p>6ã€å¯¹äºlossè¿™ç§å— batch sizeã€sequence length å„ç§å› ç´ å½±å“çš„æ•°å­—ï¼Œäººæ˜¯æ²¡æœ‰æ•°æ„Ÿçš„ï¼Œå»ºè®®é¦–å…ˆè®¡ç®—ä¸€ä¸‹ per token lossï¼ˆå¦‚æœæ˜¯å¤šä»»åŠ¡ï¼Œå¯ä»¥æ¯ä¸ªä»»åŠ¡å•ç‹¬ç®—ï¼›ç±»ä¼¼åœ°ï¼ŒæŸäº› CV ä»»åŠ¡å¯ä»¥è®¡ç®— per pixel lossï¼‰ï¼Œå¿ƒé‡Œæœ‰ç‚¹æ„Ÿè§‰ã€‚<strong>è„±ç¦»æŸå¤±å‡½æ•°çš„å½¢å¼è°ˆå­¦ä¹ ç‡æ²¡æœ‰æ„ä¹‰</strong>ï¼ˆä¾‹å¦‚å•æ˜¯å¯¹ batch size æ±‚å’Œæˆ–è€…å–å¹³å‡è¿™ä¸ªå·®å¼‚å°±ä¼šä½¿æ¢¯åº¦å·®æˆç™¾ä¸Šåƒå€ï¼‰ã€‚<br>åœ¨ç¡®å®šåˆå§‹å­¦ä¹ ç‡çš„æ—¶å€™ï¼Œä»ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼ˆä¾‹å¦‚ 1e-7ï¼‰å¼€å§‹ï¼Œç„¶å**æ¯ä¸€æ­¥æŒ‡æ•°å¢å¤§å­¦ä¹ ç‡ï¼ˆä¾‹å¦‚æ‰©å¤§1.05 å€ï¼‰è¿›è¡Œè®­ç»ƒã€‚**è®­ç»ƒå‡ ç™¾æ­¥åº”è¯¥èƒ½è§‚å¯Ÿåˆ°æŸå¤±å‡½æ•°éšè®­ç»ƒæ­¥æ•°å‘ˆå¯¹å‹¾å½¢ï¼Œé€‰æ‹©æŸå¤±ä¸‹é™æœ€å¿«é‚£ä¸€æ®µçš„å­¦ä¹ ç‡å³å¯ã€‚<br>(Captain Jackä»¤è¨€ï¼š<strong>è§‚å¯Ÿlossèƒœäºè§‚å¯Ÿå‡†ç¡®ç‡</strong><br>å‡†ç¡®ç‡è™½ç„¶æ˜¯è¯„æµ‹æŒ‡æ ‡, ä½†æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­è¿˜æ˜¯è¦æ³¨æ„lossçš„. ä½ ä¼šå‘ç°æœ‰äº›æƒ…å†µä¸‹, å‡†ç¡®ç‡æ˜¯çªå˜çš„, åŸæ¥ä¸€ç›´æ˜¯0, å¯èƒ½ä¿æŒä¸Šåƒè¿­ä»£, ç„¶åçªç„¶å˜1. è¦æ˜¯å› ä¸ºè¿™ä¸ªä½ æå‰ä¸­æ–­è®­ç»ƒäº†, åªæœ‰è€å¤©æ›¿ä½ æƒ‹æƒœäº†. è€Œlossæ˜¯ä¸ä¼šæœ‰è¿™ä¹ˆè¯¡å¼‚çš„æƒ…å†µå‘ç”Ÿçš„, æ¯•ç«Ÿä¼˜åŒ–ç›®æ ‡æ˜¯loss.<br>ç»™NNä¸€ç‚¹æ—¶é—´, è¦æ ¹æ®ä»»åŠ¡ç•™ç»™NNçš„å­¦ä¹ ä¸€å®šç©ºé—´. ä¸èƒ½è¯´å‰é¢ä¸€æ®µæ—¶é—´æ²¡èµ·è‰²å°±ä¸ç®¡äº†. æœ‰äº›æƒ…å†µä¸‹å°±æ˜¯å‰é¢ä¸€æ®µæ—¶é—´çœ‹ä¸å‡ºèµ·è‰², ç„¶åå¼€å§‹ç¨³å®šå­¦ä¹ .ï¼‰</p><p>7.1ã€ä¼˜åŒ–å™¨<strong>åªæ¨è</strong> Momentum å’Œ Adamã€‚åœ¨è¿™äº›æ–¹é¢åšå°è¯•æ„ä¹‰ä¸å¤§ï¼Œå¦‚æœæ€§èƒ½æå‡åå€’å¯èƒ½è¯´æ˜æ¨¡å‹ä¸æˆç†Ÿã€‚</p><p>7.2ã€<strong>Adam å¯ä»¥è§£å†³ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæœ‰æ—¶ loss é™ä¸ä¸‹å»ï¼Œæ¢ Adam ç¬é—´å°±å¥½äº†ï¼‰ï¼Œ<strong>ä¹Ÿå¯ä»¥å¸¦æ¥ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæ¯”å¦‚å•è¯è¯é¢‘å·®å¼‚å¾ˆå¤§ï¼Œå½“å‰ batch æ²¡æœ‰çš„å•è¯çš„è¯å‘é‡ä¹Ÿè¢«æ›´æ–°ï¼›å†æ¯”å¦‚Adamå’ŒL2æ­£åˆ™ç»“åˆäº§ç”Ÿçš„å¤æ‚æ•ˆæœï¼‰ã€‚ç”¨çš„æ—¶å€™è¦èƒ†å¤§å¿ƒç»†ï¼Œä¸‡ä¸€é‡åˆ°é—®é¢˜æ‰¾å„ç§é­”æ”¹ Adamï¼ˆæ¯”å¦‚ <a href="https://www.zhihu.com/question/265357659/answer/580469438">MaskedAdam</a>, AdamW å•¥çš„ï¼‰æŠ¢æ•‘ã€‚</p><p>8ã€subword æ€»æ˜¯ä¼šå¾ˆç¨³å®šåœ°æ¶¨ç‚¹ï¼Œåªç®¡ç”¨å°±å¯¹äº†ã€‚</p><p>9ã€<strong>GPU ä¸ŠæŠ¥é”™æ—¶å°½é‡æ”¾åœ¨ CPU ä¸Šé‡è·‘</strong>ï¼Œé”™è¯¯ä¿¡æ¯æ›´å‹å¥½ã€‚ä¾‹å¦‚ â€œERROR:tensorflow:Model diverged with loss = NaNâ€ å…¶å®å¾ˆæœ‰å¯èƒ½æ˜¯è¾“å…¥ ID è¶…å‡ºäº† softmax è¯è¡¨çš„èŒƒå›´ã€‚</p><p><strong>10ã€åˆ«æ²¡è€å¿ƒ</strong>ï¼<br>**æœ‰äº›æŒ‡æ ‡æ˜¯æœ‰æ»åæ€§çš„ï¼Œéœ€è¦ç­‰è®­ç»ƒä¸€æ®µæ—¶é—´æ‰å¼€å§‹åŠ¨ã€‚**å¾ˆå¤šäººè®­ç»ƒå‡ æ­¥çœ‹æ²¡ä»€ä¹ˆæ•ˆæœå°±æŠŠç¨‹åºåœæ‰å¼€å§‹ debug äº†ï¼Œä½†å…¶å®ä»£ç æ¯«æ— é—®é¢˜ã€‚å¦‚æ­¤åå¤å¥½å‡ å¤©ç”šè‡³ä¸€ä¸¤å‘¨éƒ½åœ¨åŸåœ°è¸æ­¥ï¼Œå…¶å®éœ€è¦åšçš„ä»…ä»…æ˜¯è®©ç¨‹åºè‡ªä¸ªå„¿å®‰å®‰é™é™åœ°è·‘ä¸Šå‡ ä¸ªå°æ—¶æˆ–è€…ä¸€å¤©â€¦â€¦</p><h3 id="ç›¸å…³trick">ç›¸å…³trick</h3><ul><li><p>fine-tuning: é€šå¸¸æ¥è¯´ï¼Œç›´æ¥æŠŠé¢„è®­ç»ƒæ¨¡å‹æ¥ç”¨æ•ˆæœä¸ä¸€å®šè¶³å¤Ÿå¥½ï¼Œå› æ­¤éœ€è¦è¿›è¡Œfine-tuningï¼ˆå¾®è°ƒï¼‰ã€‚fine-tuningéœ€è¦å†»ç»“ç½‘ç»œçš„å‰å‡ å±‚å‚æ•°ï¼Œåªæ›´æ–°ç½‘ç»œç»“æ„çš„åé¢å‡ å±‚å’Œæœ€åçš„å…¨è¿æ¥å±‚ï¼Œè¿™æ ·æ•ˆæœä¼šæ›´å¥½ã€‚</p></li><li><p>Learning rate:åœ¨è¿ç§»å­¦ä¹ çš„å¾®è°ƒè¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨è¿‡å¤§çš„å­¦ä¹ ç‡ï¼Œé€šå¸¸æ¥è¯´1e-5æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚</p></li></ul><h4 id="è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚">è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</h4><ul><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œåœ¨è¿›è¡Œfinetuneå­˜åœ¨overfitçš„é£é™©ï¼Œåˆç”±äºæ•°æ®é›†å’ŒåŸå§‹æ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œå› æ­¤äºŒè€…ä¸è®ºæ˜¯local featureè¿˜æ˜¯global featureéƒ½æ¯”è¾ƒç›¸   è¿‘ï¼Œæ‰€ä»¥æ­¤æ—¶æœ€ä½³çš„æ–¹æ³•æ˜¯æŠŠCNNç½‘ç»œå½“åšç‰¹å¾æå–å™¨ç„¶åè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨è¿›è¡Œåˆ†ç±»</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š</h5><p>å¾ˆæ˜æ˜¾ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒoverfitï¼Œå› æ­¤å¯¹å…¨éƒ¨ç½‘ç»œç»“æ„è¿›è¡Œfine-tuneæ˜¯è¾ƒå¥½çš„ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œä¸é€‚åˆè¿›è¡Œfine-tuneï¼Œç”±äºæ•°æ®é›†å·®å¼‚å¤§ï¼Œåº”è¯¥åœ¨å•ç‹¬è®­ç»ƒç½‘ç»œç»“æ„ä¸­è¾ƒé«˜çš„å±‚ï¼Œå‰é¢å‡ å±‚localçš„å°±ä¸ç”¨è®­ç»ƒäº†ï¼Œç›´æ¥å›ºå®šæƒå€¼ã€‚åœ¨å®é™…ä¸­ï¼Œè¿™ç§é—®é¢˜ä¸‹è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬æ˜¯ä»ç½‘ç»œçš„æŸå±‚å¼€å§‹å–å‡ºç‰¹å¾ï¼Œç„¶åè®­ç»ƒSVMåˆ†ç±»å™¨ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>æœ¬æ¥ç”±äºæ•°æ®é›†è¾ƒå¤§ï¼Œå¯ä»¥ä»å¤´å¼€å§‹è®­ç»ƒçš„ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­æ›´åå‘äºè®­ç»ƒæ•´ä¸ªpre-trained modelçš„ç½‘ç»œã€‚</p></li></ul><p>â€‹</p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>å¾®è°ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¢¯åº¦è£å‰ª</title>
    <link href="/2021/08/12/deep_learning/gradient-clip/"/>
    <url>/2021/08/12/deep_learning/gradient-clip/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é˜…è¯»ä»£ç  optimizer_config = dict(grad_clip=dict(max_norm=35, norm_type=2))ï¼Œå°±æ­¤æ¢ç©¶ä¸€ä¸‹grap_clipã€‚ä»–çš„ä½œç”¨æ˜¯æ¢¯åº¦è£å‰ªï¼Œä¸ºäº†é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ã€‚å…¶ä¸­max_normæ˜¯æœ€å¤§æ¢¯åº¦é˜ˆå€¼ï¼Œnorm_typeæ˜¯æŒ‡å®šçš„èŒƒæ•°ç±»å‹ã€‚</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸">æ¢¯åº¦çˆ†ç‚¸</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦è£å‰ª">æ¢¯åº¦è£å‰ª</h2><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>è®­ç»ƒæ¨¡å‹å‡ºç°Losså€¼å‡ºç°è·³åŠ¨ï¼Œä¸€ç›´ä¸æ”¶æ•›æ—¶ï¼Œé™¤äº†è®¾å°å­¦ä¹ ç‡ä¹‹å¤–ï¼Œæ¢¯åº¦è£å‰ªä¹Ÿæ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ã€‚</p><p>ç„¶è€Œæ•ˆæœä¸ä½³æ—¶ï¼Œé‚£è¿™å°±è·Ÿå­¦ä¹ ç‡å’Œæ¢¯åº¦çˆ†ç‚¸æ²¡å•¥å…³ç³»äº†ã€‚å› æ­¤ï¼Œ<strong>å­¦ä¹ ç‡</strong>çš„è®¾å®šå’Œ<strong>æ¢¯åº¦è£å‰ª</strong>çš„é˜ˆå€¼å¹¶ä¸èƒ½æé«˜æ¨¡å‹çš„å‡†ç¡®ç‡</p>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ·±åº¦å­¦ä¹ ï¼Œæ¢¯åº¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer05 æ›¿æ¢ç©ºæ ¼</title>
    <link href="/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer05/"/>
    <url>/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer05/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ›¿æ¢ç©ºæ ¼</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² <code>s</code> ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ"%20"ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">è¾“å…¥ï¼šs = <span class="hljs-string">"We are happy."</span><br>è¾“å‡ºï¼š<span class="hljs-string">"We%20are%20happy."</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= s çš„é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç›´æ¥æ›¿æ¢å³å¯ã€‚ç›¸å½“äºä½¿ç”¨replaceæ–¹æ³•</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">replaceSpace</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>       <span class="hljs-comment">#ç›¸å½“äºç°æˆå‡½æ•° return s.replace(" ","%20")</span><br>        result = <span class="hljs-string">""</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x==<span class="hljs-string">' '</span>:<br>                x = <span class="hljs-string">"%20"</span><br>            result += x<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>å­—ç¬¦ä¸²</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>å­—ç¬¦ä¸²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer04 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</title>
    <link href="/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer04/"/>
    <url>/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer04/</url>
    
    <content type="html"><![CDATA[<blockquote><p>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  [<span class="hljs-number">1</span>,   <span class="hljs-number">4</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">15</span>],<br>  [<span class="hljs-number">2</span>,   <span class="hljs-number">5</span>,  <span class="hljs-number">8</span>, <span class="hljs-number">12</span>, <span class="hljs-number">19</span>],<br>  [<span class="hljs-number">3</span>,   <span class="hljs-number">6</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">22</span>],<br>  [<span class="hljs-number">10</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">17</span>, <span class="hljs-number">24</span>],<br>  [<span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">23</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>]<br>]<br></code></pre></td></tr></tbody></table></figure><p>ç»™å®š target = <code>5</code>ï¼Œè¿”å› <code>true</code>ã€‚</p><p>ç»™å®š target = <code>20</code>ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 1000</li><li>0 &lt;= m &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å½“å¼€å§‹æƒ³è¦é‡‡ç”¨äºŒåˆ†æ³•çš„æ€æƒ³è¿›è¡Œåˆ¤æ–­ã€‚ä½†æ˜¯å‘ç°äºŒåˆ†åªèƒ½è€ƒè™‘åˆ°å·¦ä¸Šå’Œå³ä¸‹å—çš„å†…å®¹ã€‚å³ä¸Šå’Œå·¦ä¸‹çš„å†…å®¹æ— æ³•åˆ¤æ–­å…¶å¤§å°åˆ’åˆ†ã€‚æ‰€ä»¥ä¼šæœ‰è§†è§‰ç›²åŒºæ— æ³•äºŒåˆ†ç¼©å°åŒºåŸŸã€‚</p><p><font color="purple">äºŒç»´æ•°ç»„æ— æ³•ç”¨äºŒåˆ†æ³•ï¼Œå› ä¸ºå…¶â€œäºŒåˆ†â€æ˜¯åˆ†ä¸º4ä»½ï¼Œæ— æ³•å……åˆ†æ¶µç›–è¿›è¡Œåˆ¤æ–­ï¼Œä¼šå‡ºç°é”™è¯¯ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        si,sj = <span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        ei,ej = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isExit</span>(<span class="hljs-params">matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], si, sj, ei, ej, target: <span class="hljs-built_in">int</span></span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (si&lt;=ei <span class="hljs-keyword">and</span> sj&lt;=ej): <span class="hljs-comment">#å…ˆåˆ¤æ–­èŒƒå›´</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target&lt;matrix[si][sj] <span class="hljs-keyword">or</span> target&gt;matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target==matrix[si][sj] <span class="hljs-keyword">or</span> target==matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            mi,mj = <span class="hljs-built_in">int</span>((si+ei)/<span class="hljs-number">2</span>),<span class="hljs-built_in">int</span>((sj+ej)/<span class="hljs-number">2</span>)<br>            <span class="hljs-keyword">if</span>(target==matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> (target&gt;matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> isExit(matrix,mi+<span class="hljs-number">1</span>,mj,ei,ej,target) <span class="hljs-keyword">or</span> isExit(matrix,mi,mj+<span class="hljs-number">1</span>,ei,ej,target)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> isExit(matrix,si,sj,mi-<span class="hljs-number">1</span>,mj,target) <span class="hljs-keyword">or</span> isExit(matrix,si,sj,mi,mj-<span class="hljs-number">1</span>,target)<br>        <span class="hljs-keyword">return</span> isExit(matrix,si,sj,ei,ej,target)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çº¿æ€§æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿å¾—å¤æ‚åº¦ä»æš´åŠ›çš„O(n*m)åˆ°O(n+m)<br>æ€æƒ³æ˜¯é€‰å–å·¦ä¸‹è§’æˆ–è€…å³ä¸Šè§’ï¼Œå‘¨å›´ä¸å‡è¡¡çš„ç‚¹å¼€å§‹è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·æ‰çŸ¥é“åº”è¯¥å‘å“ªä¸ªæ–¹å‘ç¼©å°åŒºåŸŸ.</p><p><font color="hotpink">ä¾‹å¦‚æ­¤å¤„æ˜¯é€‰å–å·¦ä¸‹è§’ä½œä¸ºåˆå§‹ï¼Œå‘ä¸Šæ­¤åˆ—é€æ¸å˜å°ï¼Œå‘å³æ­¤è¡Œé€æ¸å˜å¤§ã€‚å› æ­¤targetå¦‚æœæ¯”æ­¤ç‚¹å°ï¼Œå°±å‘ä¸Šç§»åŠ¨æŸ¥æ‰¾ï¼Œå¦‚æœæ¯”æ­¤ç‚¹å¤§ï¼Œå°±å‘å³æŸ¥æ‰¾ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        i,j = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j&lt;=<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span>(target==matrix[i][j]):<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span>(target&gt;matrix[i][j]):j += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:i -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>æ•°ç»„æŸ¥æ‰¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer03 æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</title>
    <link href="/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer03/"/>
    <url>/2021/08/11/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer03/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚</p><p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<br><span class="hljs-string">[2, 3, 1, 0, 2, 5, 3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span> æˆ– <span class="hljs-number">3</span> <br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>2 &lt;= n &lt;= 100000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åˆ›å»ºä¸€ä¸ªflagæ•°ç»„è¿›è¡Œæ ‡è®°ï¼›</p><p>æŒ‡å®šå¤§å°çš„æ•°ç»„åˆ›å»º</p><p><strong>å¡«å‘ï¼š</strong> <font color="red"> ä¸è¦ä½¿ç”¨åè€…,å› ä¸ºåè€…æ˜¯æµ…æ‹·è´ï¼Œæ”¹å˜æŸä¸€å…ƒç´ ï¼Œè¯¥åˆ—å‡ä¼šæ”¹å˜</font></p><ul><li><p>ä¸€ç»´</p><p>a = [0 for _ in range(n)]  ã€Š=ã€‹  a = [0] * n</p></li><li><p>äºŒç»´</p><p>a = [[0 for col in range(m)] for row in range(n)]  <em># åˆ›å»ºä¸€ä¸ªn*mçš„äºŒç»´çŸ©é˜µaï¼Œæ¯ä¸ªåˆå€¼éƒ½æ˜¯0</em>   ã€Š=ã€‹  a = [[0] *m] *n</p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        flag = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))] <span class="hljs-comment">#åˆ›å»ºé•¿åº¦ä¸ºnumsçš„æ•°ç»„ ä¹Ÿå¯ä»¥ç”¨[0]*n</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            flag[x] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span>(flag[x]&gt;<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">return</span> x<br></code></pre></td></tr></tbody></table></figure><p><font color="purple" size="4">å®é™…ä¸Šæ— éœ€æ„å»ºæ–°çš„æ•°ç»„è¿›è¡Œæ ‡è®°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨setçš„é•¿åº¦è¿›è¡Œåˆ¤æ–­ã€‚æˆ–è€…ä½¿ç”¨sortï¼Œä½¿ç”¨listçš„sortæ–¹æ³•ã€‚åˆ¤æ–­ç›¸é‚»çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚</font></p><p>æ–¹æ³•1ï¼šåˆ©ç”¨python setçš„æ— åºä¸é‡å¤ç‰¹æ€§ï¼šåˆ©ç”¨Pythonä¸­çš„seté›†åˆä¸ºæ— åºä¸é‡å¤é›†åˆï¼Œé€šè¿‡åˆ¤æ–­temp_setçš„é•¿åº¦ç¡®å®šæ˜¯å¦æ˜¯é‡å¤æ•°å­—ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        temp_set = <span class="hljs-built_in">set</span>()<br>        repeat = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            temp_set.add(nums[i])<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(temp_set) &lt; i + <span class="hljs-number">1</span>:<br>                repeat = nums[i]<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> repeat<br></code></pre></td></tr></tbody></table></figure><p>æ–¹æ³•2ï¼šåˆ©ç”¨pythonçš„sortå‡½æ•°æ’åºï¼Œç„¶åè®¡ç®—ç›¸é‚»ä¸¤ä¸ªæ•°æ®æ˜¯å¦ç›¸ç­‰å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        nums.sort()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> nums[i]==nums[i+<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> nums[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ•°ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ•°ç»„</tag>
      
      <tag>idea</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dvcç›¸å…³è®¾ç½®</title>
    <link href="/2021/08/10/config/dvc/dvc-config/"/>
    <url>/2021/08/10/config/dvc/dvc-config/</url>
    
    <content type="html"><![CDATA[<p>è¿è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™ï¼š</p><blockquote><p>(base) root@9b1a4b217508:/workspace/fanmeilin/project/task/ai_lab# sh <a href="http://setup.sh">setup.sh</a> detection<br><a href="http://setup.sh">setup.sh</a>: 12: <a href="http://setup.sh">setup.sh</a>: dvc: not found<br>cp: failed to get attributes of â€˜assets/examplesâ€™: No such file or directory<br>[*] copy DETECTION skeleton scripts to upper directory</p></blockquote><p>åŸå› æ˜¯æœªå®‰è£…dvcï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…dvc</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip</span> install dvc==<span class="hljs-number">2</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pip</span> install 'dvc[s<span class="hljs-number">3</span>]'<br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨Winå¹³å°ä¸‹å¯èƒ½ä¼šæŠ¥é”™ï¼š</p><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR: </span>Cannot uninstall 'ruamel-yaml'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶éœ€è¦è¿›å…¥python çš„lib/site-packages ä¸­åˆ é™¤ â€˜ruamel-yamlâ€™ ç›¸å…³çš„æ–‡ä»¶</p></blockquote><p><strong>æ³¨æ„ï¼š</strong> dvc 2.3.0 ç‰ˆæœ¬ä¸ä¹‹åçš„hashè®¡ç®—æ–¹æ³•ä¸åŒï¼Œä¸èƒ½æ··ç”¨</p><p>å†æ¬¡æ‰§è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™</p><blockquote><p>ERROR: unexpected error - Cannot connect to host ceph01:80 ssl:default [Name or service not known]: [Errno -2] Name or service not known</p></blockquote><p>åˆ™ä¿®æ”¹etc/hostsæ–‡ä»¶</p><ul><li>é…ç½®hostsæ–‡ä»¶ï¼Œåœ¨hostsæ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹<br><code>192.168.10.91 ceph01</code></li></ul><h5 id="è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥-å¸ˆå…„åšå®¢-DVC-ä½¿ç”¨æ‰‹å†Œ"><em>è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥</em> <a href="https://www.zywvvd.com/2020/12/17/dvc/dvc/">å¸ˆå…„åšå®¢ DVC ä½¿ç”¨æ‰‹å†Œ</a></h5>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>dvc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dvc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dockerçš„sshç›¸å…³é…ç½®</title>
    <link href="/2021/08/10/config/docker/docker-ssh/"/>
    <url>/2021/08/10/config/docker/docker-ssh/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„åšå®¢ï¼š<a href="https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/">https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/</a></p></blockquote><blockquote><p>sshæ˜¯è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ï¼Œå¹¿æ³›ç”¨äºè¿œç¨‹ç™»å½•çš„åœºæ™¯ï¼Œä¹Ÿæ˜¯è¿œç¨‹è°ƒè¯•ä»£ç çš„ç¥å…µåˆ©å™¨ã€‚åœ¨å¼€å‘ä¸­ç»å¸¸ä¼šåœ¨æœåŠ¡å™¨å¯åŠ¨è‡ªå·±çš„ docker å®¹å™¨è¿›è¡Œå¼€å‘ï¼Œåˆéœ€è¦è°ƒè¯•ä»£ç ï¼Œvimçš„è°ƒè¯•ç¯å¢ƒé…ç½®èµ·æ¥é—¨æ§›åˆå¤ªé«˜ã€‚äºæ˜¯å°±æœ‰äº†ä½¿ç”¨Windowsç›´æ¥sshæ‰“é€šdockerè¿›è¡Œè°ƒè¯•çš„éœ€æ±‚ã€‚æœ¬æ–‡è®°å½•Windowsè¿œç¨‹ç™»å½•LinuxæœåŠ¡å™¨dockerå®¹å™¨çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜</h2><ul><li>ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ Win 10</li><li>è¢«ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ docker container in Linux</li><li>ä¸»æœºä¸è¢«ç™»å½•ä¸»æœºï¼ˆæ­¤å¤„æŒ‡æœåŠ¡å™¨ï¼Œä¸æ˜¯dockerï¼‰ç½‘ç»œè”é€šï¼ŒIPåœ¨åŒä¸€ç½‘æ®µ</li><li>æœåŠ¡å™¨ä¸dockerçš„IPåœ¨åŒä¸€ç½‘æ®µ</li></ul><h2 id="é…ç½®æ–¹æ³•">é…ç½®æ–¹æ³•</h2><h3 id="å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„">å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„</h3><blockquote><p>sshåè®®é“¾æ¥æ—¶é»˜è®¤ä½¿ç”¨22ç«¯å£ï¼ŒWindowsä¸dockerçš„ç«¯å£å¾€å¾€ä¸èƒ½ç›´æ¥è¿›è¡Œæ˜ å°„ï¼ˆå¾ˆå¯èƒ½ä¸åœ¨ä¸€ä¸ªç½‘æ®µï¼‰ï¼Œå› æ­¤éœ€è¦å°†dockerçš„22ç«¯å£æ˜ å°„åˆ°LinuxæœåŠ¡å™¨çš„æŸä¸ªç«¯å£ï¼Œæ­¤æ—¶éœ€è¦åœ¨å»ºç«‹dockerå®¹å™¨æ—¶è¿›è¡Œ<a href="https://www.zywvvd.com/2020/05/14/coding/environment/wingide-remote-docker/wingide-remote-docker/#docker%E9%85%8D%E7%BD%AE">é…ç½®</a>ï¼š</p></blockquote><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ docker run -it --name vvd -p <span class="hljs-number">3721</span>:<span class="hljs-number">22</span> -v <span class="hljs-regexp">/root/</span>tmp:<span class="hljs-regexp">/root/</span>tmp my_docker bash<br></code></pre></td></tr></tbody></table></figure><ul><li>å…¶ä¸­ <code>-p</code> çš„éƒ¨åˆ†è¡¨ç¤ºå°†æœ¬æœºï¼ˆæœåŠ¡å™¨ï¼‰çš„3721ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„22ç«¯å£ã€‚</li></ul><h3 id="å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡">å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡</h3><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•çš„å®¹å™¨å†…éƒ¨å»ºç«‹å¹¶å¯åŠ¨sshæœåŠ¡ã€‚</p></blockquote><ul><li>é¦–å…ˆéœ€è¦å®‰è£…ï¼š</li></ul><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-builtin-name">get</span> update<br>apt-<span class="hljs-builtin-name">get</span> install openssh-server<br>apt-<span class="hljs-builtin-name">get</span> install openssh-client<br></code></pre></td></tr></tbody></table></figure><ul><li>å®‰è£…å®Œæˆåéœ€è¦å®¹å™¨æ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æœåŠ¡ï¼Œå¯ä»¥åœ¨ <code>~/.bashrc</code>ä¸­åŠ å…¥ï¼š</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿™æ ·å°±ä¿è¯äº†dockerå®¹å™¨è‡ªåŠ¨å¯åŠ¨è¯¥æœåŠ¡ã€‚</p></blockquote><ul><li>æŸ¥çœ‹sshè¿è¡ŒçŠ¶æ€</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh status<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¦‚æœæ˜¯ <code>* sshd is running</code> è¯´æ˜sshæ­£å¸¸è¿è¡Œ</p></blockquote><h3 id="ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®">ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®</h3><blockquote><p>æœ‰çš„å®¹å™¨é»˜è®¤ä¸æ”¯æŒrootç”¨æˆ·è¿œç¨‹ä½¿ç”¨sshåè®®è¿›è¡Œå¯†ç ç™»å½•çš„ï¼Œæ­¤æ—¶éœ€è¦æ›´æ”¹è®¾ç½®ã€‚</p></blockquote><ul><li>æ‰“å¼€ <code>/etc/ssh/sshd_config</code>æ–‡ä»¶ï¼š</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å°† <code>PermitRootLogin</code> è®¾ç½®ä¸º yes</li></ul><h3 id="ä¿®æ”¹rootå¯†ç ">ä¿®æ”¹rootå¯†ç </h3><blockquote><p>è¿œç¨‹ç™»å½•æ—¶éœ€è¦ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·å¯†ç ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨rootç”¨æˆ·ç™»å½•å¥½äº†ï¼Œéœ€è¦è®¾ç½®æ–°å»ºå®¹å™¨çš„å¯†ç ï¼š</p></blockquote><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></tbody></table></figure><h3 id="è®¾ç½®SSH">è®¾ç½®SSH</h3><ul><li><a href="https://www.zywvvd.com/2020/02/23/git/link_github/Git-connect-remote-pos/#%E5%88%9B%E5%BB%BASSH%E5%AF%86%E9%92%A5">æœ¬åœ°ç”Ÿæˆssh key</a></li><li>å°†.pub å†…å®¹å¤åˆ¶ç²˜è´´åŠ å…¥åˆ°è¿œç¨‹ ~/.ssh/authorized_keys</li></ul><h3 id="SSHè¿æ¥æœåŠ¡å™¨">SSHè¿æ¥æœåŠ¡å™¨</h3><blockquote><p>éœ€è¦ç”¨æˆ·åï¼ˆè¢«ç™»å½•ç«¯ç”¨æˆ·ï¼‰ä¸è¢«ç™»å½•çš„ä¸»æœºipå’Œç«¯å£å·</p><p>ä¾‹å¦‚ï¼š ç”¨æˆ·å- root ipï¼š192.168.10.12 ç«¯å£æ˜ å°„ä¸º 3721</p></blockquote><ul><li>linux</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> root@<span class="hljs-number">192.168.10.12:3721</span><br></code></pre></td></tr></tbody></table></figure><ul><li>Windows</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ssh</span> -p <span class="hljs-number">3721</span> root@<span class="hljs-number">192.168.10.12</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200256.png" alt=""></p><ul><li>å¦‚æœä¸æ¸…æ¥šLinuxç³»ç»Ÿç«¯å£æ˜ å°„é…ç½®æƒ…å†µï¼š</li></ul><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">iptables -<span class="hljs-built_in">t</span> nat -L -<span class="hljs-built_in">n</span><br></code></pre></td></tr></tbody></table></figure><h3 id="X-shellé…ç½®">X-shellé…ç½®</h3><blockquote><p>å‘½ä»¤è¡Œsshç™»å½•æˆåŠŸåå°±å¯ä»¥åœ¨X-shellä¸­å»ºç«‹é…ç½®ä¿¡æ¯æ–¹ä¾¿åœ°è¿æ¥äº†ã€‚</p></blockquote><ul><li>æ–°å»ºä¼šè¯ï¼Œå¡«å†™åç§°ã€IPã€ç«¯å£å·ï¼ˆæˆ‘ä»¬åˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200522.png" alt=""></p><ul><li>ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œå¡«å…¥ç”¨æˆ·åå¯†ç ï¼ˆåˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200640.png" alt=""></p><ul><li>éšåå°±å¯ä»¥ä½¿ç”¨è¯¥ä¼šè¯ç›´æ¥ç™»å½•dockerå®¹å™¨äº†ï¼Œä¸ºè¿œç¨‹è°ƒè¯•æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200804.png" alt=""></p><h3 id="å¡«å‘">å¡«å‘</h3><ul><li><p>ssh: Could not resolve hostname 192.168.10.12:3721: Name or service not known</p><blockquote><p>è¿™æ˜¯åœ¨Windowsä¸­ä½¿ç”¨äº†Linuxæ ¼å¼çš„SSHç™»å½•å‘½ä»¤å¯¼è‡´çš„è§£æé”™è¯¯</p><p>å°†å‘½ä»¤è¯­æ³•æ›´æ¢ä¸ºWindowsçš„æ ¼å¼å³å¯</p></blockquote></li><li><p>root ç”¨æˆ·æ— è®ºå¦‚ä½•å¯†ç ä¸è¢«æ¥å—</p><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•ä¸»æœº /etc/ssh/sshd_config ä¸­è®¾ç½®ï¼š</p><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡ç‚¹ï¼š<strong>PermitRootLogin yes</strong></li></ul></blockquote></li><li><p>Connection to 192.168.10.12 closed.</p></li><li><p>æˆ–</p></li><li><p>Connection closed by foreign host.</p><blockquote><p>æ„æ€æ˜¯ æ–­å¼€ä¸»æœºé“¾æ¥äº†ï¼Œå‡ºç°è¿™ç§é—®é¢˜ï¼Œè·Ÿä½ çš„IPTABLESï¼Œé˜²ç«å¢™ä»€ä¹ˆçš„éƒ½æ²¡å…³ç³»ã€‚</p><p>é€ æˆè¿™ä¸ªåŸ å› æ˜¯å› ä¸ºåŸæ¥è¿æ¥åˆ°SSHDæœåŠ¡å™¨è¿›ç¨‹çš„22ç«¯å£ï¼Œå½“ä½ çš„å®¢æˆ·ç«¯çªç„¶æ–­å¼€æ—¶ï¼ŒæœåŠ¡å™¨ç«¯çš„TCPè¿æ¥å°±å¤„äºä¸€ä¸ªåŠæ‰“å¼€çŠ¶æ€ã€‚å½“ä¸‹ä¸€æ¬¡åŒä¸€å®¢æˆ·æœºå†æ¬¡å»ºç«‹ TCPè¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ£€æµ‹åˆ°è¿™ä¸ªåŠæ‰“å¼€çš„TCPè¿æ¥ï¼Œå¹¶å‘å®¢æˆ·æœºå›ä¼ ä¸€ä¸ªç½®ä½RSTçš„TCPæŠ¥æ–‡ï¼Œå®¢æˆ·æœºå°±ä¼šæ˜¾ç¤ºconnection closed by foreign hostã€‚<br>è¿™æ˜¯TCPåè®®æœ¬èº«çš„ä¸€ä¸ªä¿æŠ¤æªæ–½ï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œä½ åªè¦å†é‡æ–°è¿æ¥æœåŠ¡å™¨å°±èƒ½è¿ä¸Šã€‚</p><p>â€”â€”â€” <a href="http://www.pooy.net/connection-closed-foreign-host.html">http://www.pooy.net/connection-closed-foreign-host.html</a></p><p>æ€»ç»“ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š <strong>å…³æœºé‡å¯</strong></p></blockquote></li></ul><h3 id="å…³äºsshçš„ç›¸å…³é…ç½®">å…³äºsshçš„ç›¸å…³é…ç½®</h3><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>ssh<br>vi ssh_config <span class="hljs-comment">#å¯è®¾ç½®sshçš„é»˜è®¤ç«¯å£ï¼ˆ22ï¼‰</span><br>vi sshd_config<br></code></pre></td></tr></tbody></table></figure><p>ssh_configå’Œsshd_configéƒ½æ˜¯sshæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼ŒäºŒè€…åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½å…è®¸ä½ é€šè¿‡è®¾ç½®ä¸åŒçš„é€‰é¡¹æ¥æ”¹å˜å®¢æˆ·ç«¯ç¨‹åºçš„è¿è¡Œæ–¹å¼ã€‚</p><h4 id="é‡å¯sshæœåŠ¡">é‡å¯sshæœåŠ¡</h4><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">service sshd restart</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæŠ¥é”™ sshd: unrecognized service åˆ™éœ€è¦å¼€å¯sshæœåŠ¡ã€‚</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><h2 id="vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨">vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨</h2><ul><li><p>æ­£ç¡®çš„sshæœåŠ¡</p></li><li><p>å¯†ç è®¾ç½®å®Œæˆï¼ˆpasswd rootï¼‰</p></li></ul><h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3><ul><li><p>å®‰è£… Remote Development æ’ä»¶</p><blockquote><p>ä¼šè‡ªåŠ¨å®‰è£… Remote-WSL / Containers / SSH ç­‰æ’ä»¶ã€‚</p></blockquote></li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028143530.png" alt=""></p><h3 id="é…ç½®ä¸»æœºä¿¡æ¯">é…ç½®ä¸»æœºä¿¡æ¯</h3><blockquote><p>ctrl + shift + p</p></blockquote><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028174129.png" alt=""></p><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175152.png" alt=""></p><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host Enter<br>  HostName <span class="hljs-number">192.168</span>.<span class="hljs-number">10.15</span><br>  Port <span class="hljs-number">12345</span><br>  <span class="hljs-keyword">User</span> <span class="hljs-title">root</span><br>  IdentityFile ~\.ssh\id_rsa<br>  IdentitiesOnly yes<br></code></pre></td></tr></tbody></table></figure><h3 id="vs-code-è¿æ¥è¿œç¨‹ä¸»æœº">vs code è¿æ¥è¿œç¨‹ä¸»æœº</h3><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175324.png" alt=""></p><blockquote><p>ä¹‹åé€‰æ‹©ç›®æ ‡ä¸»æœºçš„æ“ä½œç³»ç»Ÿã€‚</p></blockquote><ul><li><p>æˆåŠŸè¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼š</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¤¹è¿è¡Œç¨‹åºæ—¶ï¼Œé€‰æ‹©ä½¿ç”¨çš„Pythonç¯å¢ƒï¼š</p></li></ul><h4 id="ç›¸å¯¹è·¯å¾„çš„è®¾ç½®">ç›¸å¯¹è·¯å¾„çš„è®¾ç½®</h4><p>åœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„å‡ºç°é”™è¯¯ã€‚</p><blockquote><p>python æ’ä»¶è®¾ç½®ä¸­æ²¡æœ‰è®¾ç½®<code>ç»ˆç«¯æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨æ–‡ä»¶çš„è·¯å¾„ä»£æ›¿ç°åœ¨æ‰“å¼€çš„ç›®å½•</code>ã€‚</p></blockquote><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><ul><li>æœç´¢é…ç½® <code>execute in file</code>ï¼š</li></ul><p><img src="https://photos.zywvvd.com/win11-mt/20210717114300.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>è¿œç¨‹é…ç½®</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dockerç›¸å…³å‘½ä»¤</title>
    <link href="/2021/08/10/config/docker/docker-intro/"/>
    <url>/2021/08/10/config/docker/docker-intro/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç®€è¦ä»‹ç»Dockerï¼Œè®°å½•Dockerå¸¸ç”¨å‘½ä»¤ä½¿ç”¨æ–¹æ³•ã€‚</p><p>æ¬è¿è‡ªå¸ˆå…„çš„åšå®¢ åˆè§è‹å²š ï¼š<a href="https://www.zywvvd.com/2020/05/06/docker/docker_usage/">https://www.zywvvd.com/2020/05/06/docker/docker_usage/</a></p></blockquote><h3 id="Docker-ç®€ä»‹">Docker ç®€ä»‹</h3><blockquote><p>**Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚**Docker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p></blockquote><h3 id="Docker-ä½¿ç”¨æµç¨‹">Docker ä½¿ç”¨æµç¨‹</h3><ul><li><a href="https://docs.docker.com/desktop/">å®‰è£…docker</a></li><li>åˆ›å»ºImage</li><li>ä»Imageåˆ›å»ºContainer</li><li>åœ¨Containerä¸­å·¥ä½œ</li><li>å°†åœ¨Containerä¸­åšçš„ä¿®æ”¹æäº¤ç»™Image</li><li>é”€æ¯Container</li></ul><h3 id="å‘½ä»¤ä»‹ç»">å‘½ä»¤ä»‹ç»</h3><ul><li>æ‹‰å– image</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> image pull<span class="hljs-meta"> [docker-url]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>è·å–docker images åˆ—è¡¨</li></ul><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">docker images<br>æˆ–<br>docker <span class="hljs-keyword">image</span> <span class="hljs-keyword">ls</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å»ºç«‹container ï¼ˆnvidia docker)</li></ul><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">NV_GPU=<span class="hljs-selector-attr">[gpu_num]</span> nvidia-docker run -it --name <span class="hljs-selector-attr">[container_name]</span> --shm-size=<span class="hljs-selector-attr">[shm_size]</span> --rm -v <span class="hljs-selector-attr">[current_dir]</span>:<span class="hljs-selector-attr">[container_dir]</span> -<span class="hljs-selector-tag">p</span> <span class="hljs-selector-attr">[current_port]</span>:<span class="hljs-selector-attr">[container_port]</span> <span class="hljs-selector-attr">[image_name]</span>:<span class="hljs-selector-attr">[image_tag]</span>  <span class="hljs-selector-attr">[command]</span> <br></code></pre></td></tr></tbody></table></figure><p>å®ä¾‹ï¼š</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nvidia</span>-docker run -it --name mlfan --shm-size=<span class="hljs-number">10</span>g -v /disk/fanmeilin:/workspace/fanmeilin -p <span class="hljs-number">12345</span>:<span class="hljs-number">22</span> -p <span class="hljs-number">12346</span>:<span class="hljs-number">8080</span> -p <span class="hljs-number">12347</span>:<span class="hljs-number">5678</span> tf-<span class="hljs-number">1</span>.<span class="hljs-number">14</span>-<span class="hljs-number">2</span>.<span class="hljs-number">0</span>-<span class="hljs-number">2</span>.<span class="hljs-number">1</span>:<span class="hljs-number">1</span>.<span class="hljs-number">0</span> bash<br></code></pre></td></tr></tbody></table></figure><p><font color="SlateBlue" size="4">æ³¨æ„ä¸è¦åŠ  --rm&nbsp; å¦åˆ™è½½åœ¨container stopä¹‹åä¼šè‡ªåŠ¨åˆ é™¤æ­¤å®¹å™¨</font></p><blockquote><p>NV_GPU: containerä¸­å¯è§çš„GPUï¼Œå¦‚æœä¸è®¾ç½®å¯è§æ‰€æœ‰GPU</p><p>-it: å°†å®¹å™¨çš„ Shell æ˜ å°„åˆ°å½“å‰çš„ Shellï¼Œç„¶åä½ åœ¨æœ¬æœºçª—å£è¾“å…¥çš„å‘½ä»¤ï¼Œå°±ä¼šä¼ å…¥å®¹å™¨</p><p>â€“name: å®¹å™¨åç§°ï¼Œå¦‚æœä¸è®¾ç½®ä¼šéšæœºåˆ†é…ä¸€ä¸ªåå­—</p><p>â€“shm-size: å®¹å™¨å…±äº«å†…å­˜å¤§å°è®¾ç½®ã€‚å¦‚æœä¸è®¾ç½®é»˜è®¤å¤§å°64Mï¼Œå¯¹äºéœ€è¦ä½¿ç”¨å…±äº«å†…å­˜çš„æƒ…å†µå¾€å¾€æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå¦‚æœè®¾ç½®ä¸º10gï¼Œè¿™æ ·é…ç½®ï¼š <code>--ssh-size="10g"</code></p><p>â€“rm: å®¹å™¨å…³é—­åè‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æœä¸è®¾ç½®å®¹å™¨ä¸ä¼šè‡ªåŠ¨åˆ é™¤</p><p>-v: é©±åŠ¨å™¨æ˜ å°„ï¼Œå°†æœ¬æœºçš„ç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„æŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼›éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ä¸»æœºæ–‡ä»¶å¤¹ä¸­çš„æŒ‚è½½ç›®å½•åœ¨å®¹å™¨ä¸­æ˜¯å¯è§çš„ï¼›éœ€è¦å†è¯´æ˜çš„æ˜¯å®¹å™¨å¯åŠ¨æ—¶ä¸»æœºæŒ‚è½½çš„ç›®å½•å®¹å™¨æ˜¯è§ä¸åˆ°çš„ï¼›æœ€åè¯´æ˜ï¼Œå®¹å™¨å…³é—­å†æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°ä¸»æœºæŒ‚è½½çš„æ‰€æœ‰æ–‡ä»¶å¤¹äº†ã€‚</p><p>-p: æš´æ¼å®¹å™¨çš„ç«¯å£åˆ°æœ¬æœºçš„ç«¯å£ä¸Šï¼Œä¾‹å¦‚ç”¨äºsshè¿æ¥å®¹å™¨æ—¶éœ€è¦å°†å®¹å™¨çš„22ç«¯å£æš´éœ²åˆ°ä¸»æœºçš„ç«¯å£ä¸Š(æ¯”å¦‚3721)ï¼Œåˆ™å¯ä»¥è®¾ç½® <code>-p 3721:22</code></p><p>image_name, image_tag: è¿™æ˜¯dockeré•œåƒçš„åç§°ä¸æ ‡è®°ï¼Œå¦‚æœä½¿ç”¨æœ¬æœºé•œåƒå¯ä»¥åœ¨docker imagesåˆ—è¡¨ä¸­æŸ¥è¯¢åˆ°</p><p>command: å¯åŠ¨å®¹å™¨åå†…éƒ¨æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ä¸º <code>/bin/bash</code></p></blockquote><ul><li>æŸ¥è¯¢containeråˆ—è¡¨</li></ul><figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker container <span class="hljs-keyword">ls</span> <span class="hljs-params">--all</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>â€“all: åŠ ä¸Šè¯¥å‚æ•°ä¼šæ˜¾ç¤ºæ²¡æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä¸åŠ çš„è¯ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨</p></blockquote><ul><li>åœæ­¢æŒ‡å®šçš„å®¹å™¨è¿è¡Œ</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> kill <span class="hljs-comment">[containerID]</span><br>docker stop <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p><code>docker container kill</code>å‘½ä»¤ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGKILL ä¿¡å·ã€‚<code>docker container stop</code>å‘½ä»¤ç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGTERM ä¿¡å·ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†å‘å‡º SIGKILL ä¿¡å·ã€‚</p></blockquote><ul><li>å¯åŠ¨åœæ­¢çš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> start<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡å¯è¿è¡Œçš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> restart<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>åˆ é™¤æŒ‡å®šçš„å®¹å™¨æ–‡ä»¶ï¼ˆä»…åœ¨åœæ­¢è¿è¡Œæ—¶å¯ç”¨ï¼‰</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> rm <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>æŸ¥çœ‹å®¹å™¨è¾“å‡º</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> logs <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å¯åŠ¨å®¹å™¨çš„ä¸€ä¸ªç»ˆç«¯</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it [containerID] <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ­¤ç§æ–¹æ³•å¯åŠ¨çš„ç»ˆç«¯ï¼Œå³ä½¿é€€å‡ºä¹Ÿä¸ä¼šå…³é—­å®¹å™¨</p><p>ç›¸å - å¦‚æœç›´æ¥é€šè¿‡ç«¯å£æ˜ å°„è¿æ¥ docker å»ºç«‹çš„sshé“¾æ¥ï¼Œçª—å£é€€å‡ºåè¯¥ç»ˆç«¯çš„å·¥ä½œä¹Ÿä¼šä¸€åŒåœæ­¢</p></blockquote><ul><li>è¿›å…¥å®¹å™¨çš„ä¸»ç»ˆç«¯</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> attach<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿æ¥åˆ°å®¹å™¨çš„ä¸»ç»ˆç«¯ï¼Œè¯¥ç»ˆç«¯é€€å‡ºåå®¹å™¨å…³é—­ã€‚</p><p>å¦‚æœä¸å¸Œæœ›é€€å‡ºåå…³é—­ï¼Œå¯ä»¥åŠ å…¥é€‰é¡¹ <code>--sig-proxy=false</code></p></blockquote><ul><li>é€€å‡ºç»ˆç«¯</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ctrl <span class="hljs-selector-tag">p</span> + ctrl <span class="hljs-selector-tag">q</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¯ä»¥åœ¨é€€å‡ºç»ˆç«¯çš„åŒæ—¶ä¿æŒç»ˆç«¯ç»§ç»­å·¥ä½œ</p></blockquote><ul><li>é€€å‡ºå®¹å™¨</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨å®¹å™¨ä¸­è¿è¡Œæ­¤å‘½ä»¤</p></blockquote><ul><li>æ‹·è´å®¹å™¨é‡Œçš„æ–‡ä»¶åˆ°æœ¬æœº</li></ul><figure class="highlight gradle"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker container cp [containerID]:[<span class="hljs-regexp">/path/</span>to/<span class="hljs-keyword">file</span>]<br></code></pre></td></tr></tbody></table></figure><ul><li>æäº¤å®¹å™¨ä¿®æ”¹åˆ°é•œåƒ</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker commit -<span class="hljs-selector-tag">a</span> <span class="hljs-selector-attr">[name]</span> -m <span class="hljs-selector-attr">[comments]</span> -<span class="hljs-selector-tag">p</span>  <span class="hljs-selector-attr">[containerID[:TAG]</span>]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>-a: æäº¤çš„é•œåƒä½œè€…</p><p>-m: æäº¤æ—¶çš„è¯´æ˜æ–‡å­—</p><p>-p: åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœ</p></blockquote><ul><li>åˆ é™¤é•œåƒ</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> rmi<span class="hljs-meta"> [image]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æˆ–</p></blockquote><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">docker image rm [image]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</p></blockquote><ul><li><code>-f, -force</code>: å¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä¾¿æœ‰å®¹å™¨å¼•ç”¨è¯¥é•œåƒï¼›</li><li><code>-no-prune</code>: ä¸è¦åˆ é™¤æœªå¸¦æ ‡ç­¾çš„çˆ¶é•œåƒï¼›</li></ul><h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></li><li><a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>è¿œç¨‹é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer10-2 é’è›™è·³å°é˜¶é—®é¢˜</title>
    <link href="/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer10-2/"/>
    <url>/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer10-2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é’è›™è·³å°é˜¶é—®é¢˜</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ª n çº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">7</span><br>è¾“å‡ºï¼š<span class="hljs-number">21</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹3ï¼š">ç¤ºä¾‹3ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å®é™…ä¸Šæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å˜ç§ã€‚è·³ä¸Šnçº§å°é˜¶çš„æ–¹æ³•ä¸ªæ•° å¯ä»¥åˆ†è§£ä¸ºï¼š<em>è·³ä¸Šæ­¤å°é˜¶å‰çš„ä¸€æ­¥æ˜¯1æ­¥è¿˜æ˜¯2æ­¥</em>ã€‚ä¹Ÿå°±æ˜¯ $f(n) = f(n-1) + f(n-2)$ã€‚</p><p>ä¸åŒä¹‹å¤„åœ¨äºæ­¤æ—¶çš„f(0) = 1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numWays</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">1</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b<br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>idea</tag>
      
      <tag>æ–æ³¢é‚£å¥‘</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer10-1 æ–æ³¢é‚£å¥‘æ•°åˆ—</title>
    <link href="/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer10-1/"/>
    <url>/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer10-1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ–æ³¢é‚£å¥‘æ•°åˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ n ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ n é¡¹ï¼ˆå³ F(N)ï¼‰ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>F(0) = 0,   F(1) = 1 \\<br>F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N &gt; 1.<br>$$<br>æ–æ³¢é‚£å¥‘æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œä¹‹åçš„æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ç”±ä¹‹å‰çš„ä¸¤æ•°ç›¸åŠ è€Œå¾—å‡ºã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ‰ä¸‰ç§æ–¹å‘ï¼š</p><ul><li><p>ä½¿ç”¨é€’å½’</p><p>å¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´è¶…æ—¶ã€‚</p></li><li><p>ä½¿ç”¨æ•°ç»„å­˜å‚¨</p><p>æ–°å»ºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œåœ¨é€’å½’åŸºç¡€ä¸Šï¼Œå­˜å‚¨è®¡ç®—çš„ç»“æœï¼Œåç›´æ¥å–ç”¨ã€‚ä½†æ˜¯å ç”¨äº†é¢å¤–çš„ç©ºé—´$O(n)$</p></li><li><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’</p><p><code>ä»¥å…¶å…¬å¼F(N) = F(N - 1) + F(N - 2)ä¸ºè½¬ç§»æ–¹ç¨‹ã€‚</code></p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">0</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b <span class="hljs-comment">#sum = a+b a = b b = sum aç›¸å½“äºf(i) bç›¸å½“äºf(i+1)</span><br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br>    <span class="hljs-comment"># def fib(self, n: int) -&gt; int:</span><br>    <span class="hljs-comment">#     if(n==0): return 0</span><br>    <span class="hljs-comment">#     if(n==1): return 1</span><br>    <span class="hljs-comment">#     return (self.fib(n-1)+self.fib(n-2))%1000000007 #è¶…æ—¶ é€’å½’æ—¶é—´å¤æ‚åº¦å¤§</span><br></code></pre></td></tr></tbody></table></figure><p>å¾ªç¯næ¬¡</p><p>æ³¨æ„<code>a,b = b,a+b</code> ç›¸å½“äºsum = a+b ï¼›a = bï¼› b = sum ï¼›</p><p>ç¬¬iè½®ä¸­ aç›¸å½“äºf(i)ï¼Œbç›¸å½“äºf(i+1) ã€‚å› æ­¤æœ€åè¿”å›a</p>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>åŠ¨æ€è§„åˆ’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ–æ³¢é‚£å¥‘</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰‘æŒ‡offer09 ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
    <link href="/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer09/"/>
    <url>/2021/08/10/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/leetcode/leetcode-offer09/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[<span class="hljs-number">3</span>],[],[]]<br>è¾“å‡ºï¼š[null,null,<span class="hljs-number">3</span>,<span class="hljs-number">-1</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[],[<span class="hljs-number">5</span>],[<span class="hljs-number">2</span>],[],[]]<br>è¾“å‡ºï¼š[null,<span class="hljs-number">-1</span>,null,null,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= values &lt;= 10000</li><li>æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œ<em>ä¸€ä¸ªä½œä¸ºæ’å…¥æ ˆï¼Œä¸€ä¸ªä½œä¸ºåˆ é™¤æ ˆ</em>ã€‚<code>ä½¿ç”¨listè¿›è¡Œç›¸å…³æ“ä½œï¼ˆappendï¼Œpopï¼‰</code>ï¼›åœ¨æ’å…¥æ—¶ç›´æ¥å¯¹stack1è¿›è¡Œappendæ“ä½œï¼Œåˆ é™¤æ—¶é¦–å…ˆéœ€è¦æ„å»ºåˆ é™¤æ ˆå†…å®¹ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œæœ€ååŒæ­¥åˆ°æ’å…¥æ ˆä¸­ï¼ˆæ­¤æ—¶åˆ é™¤æ ˆåˆä¸ºç©ºï¼‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CQueue</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># stack1æ˜¯insertæ ˆ stack2æ˜¯deleteæ ˆ</span><br>        self.stack1 = [] <span class="hljs-comment">#listä½œç”¨å’Œstackç±»ä¼¼</span><br>        self.stack2 = []<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">appendTail</span>(<span class="hljs-params">self, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        self.stack1.append(value) <span class="hljs-comment"># ç›´æ¥æ’å…¥æ ˆé¡¶</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteHead</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">while</span> self.stack1: <span class="hljs-comment">#é¦–å…ˆæ›´æ–°deleteæ ˆ</span><br>            self.stack2.append(self.stack1.pop())<br>        <span class="hljs-comment">#è¿›è¡ŒdeleteHeadæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.stack2: <br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        popitem = self.stack2.pop()<br>        <span class="hljs-comment"># å°†æ›´æ–°ç»“æœå†™å›stack1ä¸­ ä¿æŒä¸€è‡´</span><br>        <span class="hljs-keyword">while</span> self.stack2:<br>            self.stack1.append(self.stack2.pop())<br>        <span class="hljs-keyword">return</span> popitem<br><br><span class="hljs-comment"># Your CQueue object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = CQueue()</span><br><span class="hljs-comment"># obj.appendTail(value)</span><br><span class="hljs-comment"># param_2 = obj.deleteHead()</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡</category>
      
      <category>æ ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰‘æŒ‡</tag>
      
      <tag>æ ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mahalanobis_distance</title>
    <link href="/2021/08/09/math/Mahalanobis-distance/"/>
    <url>/2021/08/09/math/Mahalanobis-distance/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯åº¦é‡å­¦ä¹ ä¸­ä¸€ç§å¸¸ç”¨çš„è·ç¦»æŒ‡æ ‡ï¼ŒåŒæ¬§æ°è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»ã€æ±‰æ˜è·ç¦»ç­‰ä¸€æ ·è¢«ç”¨ä½œè¯„å®šæ•°æ®ä¹‹é—´çš„ç›¸ä¼¼åº¦æŒ‡æ ‡ã€‚ä½†å´å¯ä»¥åº”å¯¹é«˜ç»´çº¿æ€§åˆ†å¸ƒçš„æ•°æ®ä¸­å„ç»´åº¦é—´éç‹¬ç«‹åŒåˆ†å¸ƒçš„é—®é¢˜ã€‚</p></blockquote><p><em>ä½¿ç”¨é©¬æ°è·ç¦»ï¼Œå¯¹é«˜ç»´éç‹¬ç«‹åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œè·ç¦»åº¦é‡ã€‚</em></p><p><strong>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨é©¬æ°è·ç¦»å‘¢ï¼Ÿ</strong><br>é©¬æ°è·ç¦»æœ‰å¾ˆå¤š<strong>ä¼˜ç‚¹ï¼š</strong> <strong>é©¬æ°è·ç¦»ä¸å—é‡çº²çš„å½±å“</strong>ï¼Œä¸¤ç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ä¸åŸå§‹æ•°æ®çš„æµ‹é‡å•ä½æ— å…³ï¼›ç”±æ ‡å‡†åŒ–æ•°æ®å’Œä¸­å¿ƒåŒ–æ•°æ®(å³åŸå§‹æ•°æ®ä¸å‡å€¼ä¹‹å·®ï¼‰è®¡ç®—å‡ºçš„äºŒç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ç›¸åŒã€‚<strong>é©¬æ°è·ç¦»è¿˜å¯ä»¥æ’é™¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¹²æ‰°</strong>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»">ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»</h2><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯ä¸€ç§è·ç¦»çš„åº¦é‡ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æ¬§æ°è·ç¦»çš„ä¸€ç§ä¿®æ­£ï¼Œä¿®æ­£äº†æ¬§å¼è·ç¦»ä¸­å„ä¸ªç»´åº¦å°ºåº¦ä¸ä¸€è‡´ä¸”ç›¸å…³çš„é—®é¢˜ã€‚</p><p>å•ä¸ªæ•°æ®ç‚¹çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic1.png" alt=""></p><p>æ•°æ®ç‚¹x, yä¹‹é—´çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic2.png" alt=""></p><p><em>å…¶ä¸­Î£æ˜¯å¤šç»´éšæœºå˜é‡çš„åæ–¹å·®çŸ©é˜µï¼ŒÎ¼ä¸ºæ ·æœ¬å‡å€¼ï¼Œå¦‚æœåæ–¹å·®çŸ©é˜µæ˜¯å•ä½å‘é‡ï¼Œä¹Ÿå°±æ˜¯å„ç»´åº¦ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œé©¬æ°è·ç¦»å°±å˜æˆäº†æ¬§æ°è·ç¦»ã€‚</em></p><h2 id="é©¬æ°è·ç¦»å®é™…æ„ä¹‰">é©¬æ°è·ç¦»å®é™…æ„ä¹‰</h2><p>é‚£ä¹ˆé©¬æ°è·ç¦»å°±èƒ½èƒ½å¹²ä»€ä¹ˆï¼Ÿå®ƒæ¯”æ¬§æ°è·ç¦»å¥½åœ¨å“ªé‡Œï¼Ÿä¸¾å‡ ä¸ªæ —å­</p><p><strong>æ¬§å¼è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å…ˆä¸¾ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ä¾‹å­ï¼Œèº«é«˜å’Œä½“é‡ï¼Œè¿™ä¸¤ä¸ªå˜é‡æ‹¥æœ‰ä¸åŒçš„å•ä½æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸åŒçš„scaleã€‚æ¯”å¦‚èº«é«˜ç”¨æ¯«ç±³è®¡ç®—ï¼Œè€Œä½“é‡ç”¨åƒå…‹è®¡ç®—ï¼Œæ˜¾ç„¶å·®10mmçš„èº«é«˜ä¸å·®10kgçš„ä½“é‡æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä½†åœ¨æ™®é€šçš„æ¬§æ°è·ç¦»ä¸­ï¼Œè¿™å°†ä¼šç®—ä½œç›¸åŒçš„å·®è·ã€‚</p><p><strong>å½’ä¸€åŒ–åæ¬§æ°è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥å…ˆåšå½’ä¸€åŒ–æ¥æ¶ˆé™¤è¿™ç§ç»´åº¦é—´scaleä¸åŒçš„é—®é¢˜ï¼Œä½†æ˜¯æ ·æœ¬åˆ†å¸ƒä¹Ÿä¼šå½±å“åˆ†ç±»</p><p>ä¸¾ä¸ªä¸€ç»´çš„æ —å­ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªç±»åˆ«ï¼Œç»Ÿä¸€å•ä½ï¼Œç¬¬ä¸€ä¸ªç±»åˆ«å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º0.1ï¼Œç¬¬äºŒä¸ªç±»åˆ«å‡å€¼ä¸º5ï¼Œæ–¹å·®ä¸º5ã€‚é‚£ä¹ˆä¸€ä¸ªå€¼ä¸º2çš„ç‚¹å±äºç¬¬ä¸€ç±»çš„æ¦‚ç‡å¤§è¿˜æ˜¯ç¬¬äºŒç±»çš„æ¦‚ç‡å¤§ï¼Ÿè·ç¦»ä¸Šè¯´åº”è¯¥æ˜¯ç¬¬ä¸€ç±»ï¼Œä½†æ˜¯ç›´è§‰ä¸Šæ˜¾ç„¶æ˜¯ç¬¬äºŒç±»ï¼Œå› ä¸ºç¬¬ä¸€ç±»ä¸å¤ªå¯èƒ½åˆ°è¾¾2è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªæ–¹å·®è¾ƒå°çš„ç»´åº¦ä¸‹å¾ˆå°çš„å·®åˆ«å°±æœ‰å¯èƒ½æˆä¸ºç¦»ç¾¤ç‚¹ã€‚å°±åƒä¸‹å›¾ä¸€æ ·ï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯ç”±äºæ ·æœ¬æ€»ä½“æ²¿ç€æ¨ªè½´åˆ†å¸ƒï¼Œæ‰€ä»¥Bç‚¹æ›´æœ‰å¯èƒ½æ˜¯è¿™ä¸ªæ ·æœ¬ä¸­çš„ç‚¹ï¼Œè€ŒAåˆ™æ›´æœ‰å¯èƒ½æ˜¯ç¦»ç¾¤ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic3.png" alt=""></p><p><strong>ç®—ä¸Šç»´åº¦çš„æ–¹å·®å°±å¤Ÿäº†ï¼Ÿ</strong></p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœç»´åº¦é—´ä¸ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œæ ·æœ¬ç‚¹ä¸€å®šä¸æ¬§æ°è·ç¦»è¿‘çš„æ ·æœ¬ç‚¹åŒç±»çš„æ¦‚ç‡æ›´å¤§å—ï¼Ÿ</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic4.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æ ·æœ¬åŸºæœ¬æœä»f(x) = xçš„çº¿æ€§åˆ†å¸ƒï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»ä¾æ—§ç›¸ç­‰ï¼Œæ˜¾ç„¶Aæ›´åƒæ˜¯ä¸€ä¸ªç¦»ç¾¤ç‚¹</p><p>å³ä½¿æ•°æ®å·²ç»ç»è¿‡äº†æ ‡å‡†åŒ–ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ABä¸åŸç‚¹é—´è·ç¦»å¤§å°çš„ç›¸äº’å…³ç³»ã€‚æ‰€ä»¥è¦æœ¬è´¨ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦é’ˆå¯¹<a href="https://link.zhihu.com/?target=https%3A//www.ph0en1x.space/2018/03/06/PCA/">ä¸»æˆåˆ†åˆ†æ</a>ä¸­çš„<code>ä¸»æˆåˆ†</code>æ¥è¿›è¡Œæ ‡å‡†åŒ–ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰">é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰</h2><p>ä¸Šé¢ææ‡‚äº†ï¼Œé©¬æ°è·ç¦»å°±å¥½ç†è§£äº†ï¼Œ<u>åªéœ€è¦å°†å˜é‡<code>æŒ‰ç…§ä¸»æˆåˆ†è¿›è¡Œæ—‹è½¬</code>ï¼Œè®©ç»´åº¦é—´ç›¸äº’<strong>ç‹¬ç«‹</strong>ï¼Œç„¶åè¿›è¡Œ<code>æ ‡å‡†åŒ–</code></u>ï¼Œè®©ç»´åº¦<strong>åŒåˆ†å¸ƒ</strong>å°±å¯ä»¥äº†ã€‚</p><p>ç”±ä¸»æˆåˆ†åˆ†æå¯çŸ¥ï¼Œç”±äºä¸»æˆåˆ†å°±æ˜¯ç‰¹å¾å‘é‡æ–¹å‘ï¼Œæ¯ä¸ªæ–¹å‘çš„æ–¹å·®å°±æ˜¯å¯¹åº”çš„ç‰¹å¾å€¼ï¼Œæ‰€ä»¥åªéœ€è¦æŒ‰ç…§ç‰¹å¾å‘é‡çš„æ–¹å‘æ—‹è½¬ï¼Œç„¶åç¼©æ”¾ç‰¹å¾å€¼å€å°±å¯ä»¥äº†ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic5.png" alt=""></p><p>ç¦»ç¾¤ç‚¹å°±è¢«æˆåŠŸåˆ†ç¦»ï¼Œè¿™æ—¶å€™çš„æ¬§å¼è·ç¦»å°±æ˜¯é©¬æ°è·ç¦»ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„æ¨å¯¼">é©¬æ°è·ç¦»çš„æ¨å¯¼</h2><p>é¦–å…ˆè¦å¯¹æ•°æ®ç‚¹è¿›è¡Œ<em>æ—‹è½¬</em>ï¼Œæ—‹è½¬è‡³ä¸»æˆåˆ†ï¼Œç»´åº¦é—´çº¿æ€§æ— å…³ï¼Œå‡è®¾æ–°çš„åæ ‡ä¸º</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic6.png" alt=""></p><p>åˆå˜æ¢å<em>ç»´åº¦é—´çº¿æ€§æ— å…³ä¸”æ¯ä¸ªç»´åº¦è‡ªå·±çš„æ–¹å·®ä¸ºç‰¹å¾å€¼</em>ï¼Œæ‰€ä»¥æ»¡è¶³ï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic7.png" alt=""></p><p>é©¬æ°è·ç¦»æ˜¯æ—‹è½¬å˜æ¢ç¼©æ”¾ä¹‹åçš„æ¬§å¼è·ç¦»ï¼Œæ‰€ä»¥é©¬æ°è·ç¦»çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic8.png" alt=""></p><p>è¿™å°±æ˜¯ä¹‹å‰æåˆ°çš„é©¬æ°è·ç¦»çš„å…¬å¼</p><h2 id="é©¬æ°è·ç¦»çš„é—®é¢˜">é©¬æ°è·ç¦»çš„é—®é¢˜</h2><ul><li>åæ–¹å·®çŸ©é˜µå¿…é¡»æ»¡ç§©</li></ul><p>é‡Œé¢æœ‰æ±‚é€†çŸ©é˜µçš„è¿‡ç¨‹ï¼Œä¸æ»¡ç§©ä¸è¡Œï¼Œè¦æ±‚æ•°æ®è¦æœ‰åŸç»´åº¦ä¸ªç‰¹å¾å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥è€ƒè™‘å…ˆè¿›è¡ŒPCAï¼Œè¿™ç§æƒ…å†µä¸‹PCAä¸ä¼šæŸå¤±ä¿¡æ¯</p><ul><li>ä¸èƒ½å¤„ç†éçº¿æ€§æµå½¢(manifold)ä¸Šçš„é—®é¢˜</li></ul><p>åªå¯¹çº¿æ€§ç©ºé—´æœ‰æ•ˆï¼Œå¦‚æœè¦å¤„ç†æµå½¢ï¼Œåªèƒ½åœ¨å±€éƒ¨å®šä¹‰ï¼Œå¯ä»¥ç”¨æ¥å»ºç«‹KNNå›¾</p><blockquote><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/46626607">https://zhuanlan.zhihu.com/p/46626607</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>math</category>
      
      <category>æ¦‚ç‡è®º</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é©¬æ°è·ç¦»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Eckark_youngå®šç†</title>
    <link href="/2021/08/09/math/Eckark-young/"/>
    <url>/2021/08/09/math/Eckark-young/</url>
    
    <content type="html"><![CDATA[<p>æœ€ä½³ä½ç§©é€¼è¿‘å’Œå¥‡å¼‚å€¼çš„å…³ç³»(<em>Eckart</em>-<em>Youngå®šç†</em>)</p><h3 id="å®šç†">å®šç†</h3><p>Suppose a matrix $A\in \mathbb{R}^{m\times n}$has an SVD-decomposition$A=U\Sigma V^T$. Let $k &lt; r= \mathsf{rank}(A)$and truncated matrix<br>$$<br>A_k = \sum_{i=1}^k \sigma_i \mathbf u_i \mathbf v_i^T,<br>$$<br>then, for any matrix B of rank k , the minimal error is achieved with $A_k$:</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_2 = || A - A_k||_2 = \sigma_{k+1}.$$<p>The same holds for Frobenius norm as well</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_F = || A - A_k||_F = \sqrt{\sigma_{k+1}^2 + \cdots + \sigma_p^2}.$$<h3 id="è¯æ˜-2-norm-case">è¯æ˜ (2-norm case)</h3><p>Since $U^\ A_k V = \mathrm{diag}(\sigma_1,\ldots, \sigma_k,0,\ldots,0)$ it means that $A_k$ is rank K. Moreover, $U^T (A-A_k) V =  \mathrm{diag}(0,\ldots, 0,\sigma_{k+1},\ldots, \sigma_p)$with the largest singular value is $\sigma_{k+1}$ and thus $||A-A_k||_2 = \sigma_{k+1}$.</p><h3 id="è¯æ˜-Frobenius-norm-case">è¯æ˜ (Frobenius norm case)</h3><blockquote><p>Lemma: If $A,B \in \mathbb{R}^{m\times n}$ , with B having rank K , then $\sigma_{k+i}(A) \le \sigma_i(A-B) \text{ for all }; i.$</p></blockquote><p>To prove the lemma, first consider the case i=1, we have proved that $\sigma_{k+1}(A) \le \sigma_1(A-B) = ||A-B||_2$in the 2-norm case. Then we do the general case:</p>$$\begin{aligned} \sigma_i(A-B) = &amp; \sigma_i(A-B) + \sigma_1(B-B_k)\qquad\text{since } B=B_k\\ =&amp; \sigma_1(A-B - (A-B)_{i-1}) + \sigma_1(B-B_k)\qquad\\ \ge &amp; \sigma_1(A-B - (A-B)_{i-1}+B-B_k)   \\ =&amp; \sigma_1(A  - (A-B)_{i-1} -B_k)\\ \ge &amp; \sigma_1(A - A_{k+i-1})\\ =&amp; \sigma_{k+i}(A)   \end{aligned} $$<blockquote><p><a href="https://zhuanlan.zhihu.com/p/361938622">https://zhuanlan.zhihu.com/p/361938622</a></p><p><a href="https://zhuanlan.zhihu.com/p/75283604">https://zhuanlan.zhihu.com/p/75283604</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>math</category>
      
      <category>çº¿æ€§ä»£æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>math</tag>
      
      <tag>çº¿æ€§ä»£æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½ç§©é€¼è¿‘çš„æ€è€ƒ</title>
    <link href="/2021/08/06/math/low-rank-app/"/>
    <url>/2021/08/06/math/low-rank-app/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é˜…è¯»æ–‡ç« <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>æ—¶å‡ºç°ä¸€ä¸ªæ¦‚å¿µâ€“<strong>Low-rank approximation</strong> ï¼Œå°±æ­¤è¿›è¡Œç›¸å…³è®¨è®ºã€‚</p></blockquote><h3 id="ä½ç§©ï¼ˆLow-Rankï¼‰">ä½ç§©ï¼ˆLow-Rankï¼‰</h3><p>å¦‚æœXæ˜¯ä¸€ä¸ªmè¡Œnåˆ—çš„æ•°å€¼çŸ©é˜µï¼Œrank(X)æ˜¯Xçš„ç§©ï¼Œå‡å¦‚rank (X)è¿œå°äºmå’Œnï¼Œåˆ™æˆ‘ä»¬ç§°Xæ˜¯ä½ç§©çŸ©é˜µã€‚ä½ç§©çŸ©é˜µæ¯è¡Œæˆ–æ¯åˆ—éƒ½å¯ä»¥ç”¨å…¶ä»–çš„è¡Œæˆ–åˆ—çº¿æ€§è¡¨å‡ºï¼Œå¯è§å®ƒåŒ…å«å¤§é‡çš„å†—ä½™ä¿¡æ¯ã€‚åˆ©ç”¨è¿™ç§å†—ä½™ä¿¡æ¯ï¼Œå¯ä»¥å¯¹ç¼ºå¤±æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œç‰¹å¾æå–ã€‚</p><p>å›¾åƒå¤„ç†ä¸­ï¼Œ<em>rankå¯ä»¥ç†è§£ä¸ºå›¾åƒæ‰€åŒ…å«çš„ä¿¡æ¯çš„ä¸°å¯Œç¨‹åº¦</em>ï¼Œåœ¨æ˜¾ç¤ºç”Ÿæ´»ä¸­ï¼Œä¸€å¼ å›¾ç‰‡ä¸­å¤§éƒ¨åˆ†æˆåˆ†æ˜¯ç›¸ä¼¼çš„ã€‚æ¯”å¦‚ç»™ä¸€å¼ å¤§è‰åŸçš„å›¾ç‰‡</p><p><img src="https://picture.mulindya.com/low-rank-app-pic1.png" alt=""></p><p>è‰åŸæ˜¯ç”±å¾ˆå¤šè‰ç»„æˆçš„ï¼Œè€Œè‰æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥å¦‚æœå…¨æ˜¯è‰ï¼Œé‚£ä¹ˆè¿™å¼ å›¾æ‰€åŒ…å«çš„ä¿¡æ¯é‡æ˜¯å¾ˆå°‘çš„çš„ï¼Œå› ä¸ºå¯ä»¥ç†è§£ä¸ºè‰æ˜¯è‰çš„å¤åˆ¶å“ã€‚è€Œä¸Šå›¾çš„è’™å¤åŒ…ï¼Œäººï¼Œé©¬ä¹‹ç±»çš„åˆ™å¯ä»¥ç†è§£ä¸ºå›¾ç‰‡æ‰€åŒ…å«çš„ä¿¡æ¯ï¼Œå®é™…ä¸Šï¼Œç›¸å¯¹äºåªæœ‰è‰çš„è‰åŸå›¾ç‰‡å’Œæœ‰è‰å’Œè’™å¤åŒ…çš„è‰åŸå›¾ç‰‡ï¼Œåè€…çš„ç§©æ˜¯è¾ƒé«˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡ä¸­æ¯”è¾ƒçªå…€çš„æˆåˆ†ï¼Œæ¯”å¦‚è’™å¤åŒ…ï¼Œæ¯”å¦‚äººåƒç…§ç‰‡ä¸­çš„çº¢çœ¼äº®ç‚¹ï¼Œä¼šå¢åŠ å›¾åƒçŸ©é˜µçš„ç§©ã€‚è€Œç°å®ç”Ÿæ´»ä¸­ä¸€å¼ ä¸é”™çš„å›¾ç‰‡çš„ç§©å…¶å®æ˜¯æ¯”è¾ƒä½çš„ï¼Œå¦‚æœå›¾åƒçš„ç§©æ¯”è¾ƒé«˜ï¼Œå¾€å¾€æ˜¯å› ä¸ºå›¾åƒä¸­çš„å™ªå£°æ¯”è¾ƒä¸¥é‡ã€‚æ¯”å¦‚æ‹ç…§çš„æ—¶å€™ISOæ„Ÿå…‰åº¦è®¾ç½®è¿‡é«˜é€ æˆå™ªç‚¹å¤ªè¿‡æ³›æ»¥ä¹‹ç±»çš„ã€‚æ‰€ä»¥ï¼Œ<em>å›¾åƒå¤„ç†çš„ä½ç§©æ€§å…¶å®å¯ä»¥æ‹¿æ¥å»é™¤ç…§ç‰‡ä¸­çš„å™ªç‚¹</em>ã€‚</p><h3 id="ä½ç§©å’Œç¨€ç–">ä½ç§©å’Œç¨€ç–</h3><p>æˆ‘ä»¬è®¤ä¸ºå›¾åƒæœ‰ä¸€äº›å…¬å…±çš„æ¨¡å¼ï¼Œæ‰€æœ‰å›¾åƒéƒ½ç”±è¿™äº›åŸºæœ¬çš„æ¨¡å¼ç»„æˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœå›¾åƒæ˜¯ä¸€ä¸ªå‰ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ­£æ–œçº¿å’Œåæ–œçº¿çš„å åŠ ã€‚<strong>åªè¦æˆ‘ä»¬æ‰¾åˆ°äº†æ‰€æœ‰çš„åŸºåº•ï¼ˆç§°ä½œå­—å…¸</strong>ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„æ­£æ–œçº¿å’Œåæ–œçº¿ä¹‹ç±»çš„ä¸œè¥¿ï¼‰**ï¼Œå°±èƒ½é€šè¿‡åŸºåº•çš„çº¿æ€§ç»„åˆè¡¨ç¤ºå‡ºæ‰€æœ‰çš„å›¾åƒã€‚**è¿™å°±å¥½åƒå­¦ç”»ç”»ï¼Œå…ˆå­¦ä¼šåŸºæœ¬çš„ç”»æ­£æ–¹ä½“ã€çƒä½“ã€åœ†æŸ±ä½“ç­‰ç­‰ï¼Œå°±å¯ä»¥ç»„åˆå‡ºå„ç§å„æ ·çš„å¤æ‚å½¢çŠ¶ã€‚</p><p><strong>åœ¨å¾ˆå¤šæƒ…å½¢ä¸‹ï¼ŒåŸºåº•çš„æ•°é‡æ˜¯å¾ˆå°‘çš„</strong>ï¼Œæ¯”å¦‚ä¸€å¼ ç…§ç‰‡æ‹çš„æ˜¯ä¸€é¢ç –å¢™ï¼Œé‚£ä¹ˆå®ƒæ˜¾ç„¶å…·æœ‰å‘¨æœŸé‡å¤çš„ç‰¹ç‚¹ï¼Œæ¢å¥è¯è¯´ä½ç§©ã€‚å³ä½¿æ•´ä¸ªå›¾ä¸ä½ç§©ï¼Œå¾€å¾€ä¹Ÿèƒ½æ‰¾å‡ºä¸€äº›ç›¸ä¼¼çš„å—ï¼Œè¿™äº›å—æ˜¯ä½ç§©çš„ã€‚å†é€€ä¸€æ­¥ï¼Œå°±ç®—è¿™ä¹Ÿåšä¸åˆ°ï¼Œå¾€å¾€ä¹Ÿå¯ä»¥æŠŠå·²æœ‰çš„æ•°æ®çœ‹æˆä¸€ç»„ä½ç»´çš„ç»“æœåŠ ä¸Šå™ªå£°ï¼Œä¹Ÿå³åŸæ¥çš„æ•°æ®<strong>å¯ä»¥è¢«ä½ç§©çŸ©é˜µå¾ˆå¥½çš„é€¼è¿‘</strong>ã€‚<strong>ç¨€ç–æ€§</strong>çš„æ„æ€æ˜¯ï¼ˆä»¥ç¨€ç–è¡¨ç¤ºä¸ºä¾‹ï¼‰ï¼Œä»»ç»™ä¸€ä¸ªå›¾åƒï¼Œ<strong>å­—å…¸å¯èƒ½æ˜¯è¿‡å®Œå¤‡çš„</strong>ï¼Œä»è€Œç”¨å­—å…¸é‡Œçš„åŸºå‘é‡è¡¨å‡ºè¿™å¹…å›¾æœ‰å¾ˆå¤šç§ä¸åŒçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬å¸Œæœ›<strong>é€‰å–ä½¿ç”¨åŸºåº•æ•°é‡æœ€å°‘çš„é‚£ç§æ–¹æ¡ˆ</strong>ï¼Œ</p><p>åº”ç”¨ï¼š</p><p><em><strong>1ï¼‰çŸ©é˜µå¡«å……(Matrix Completion)</strong></em></p><p><em><strong>2ï¼‰é²æ£’PCA</strong></em></p><p><em><strong>3ï¼‰èƒŒæ™¯å»ºæ¨¡</strong></em></p><p><em><strong>4ï¼‰å˜æ¢ä¸å˜ä½ç§©çº¹ç†ï¼ˆTILTï¼‰</strong></em></p><blockquote><p>åœ¨è®ºæ–‡ <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>ä¸­æœ‰ä¸€æ®µå¯ä»¥å‚è€ƒã€‚</p></blockquote><p><strong>Low-rank approximation of precision matrix</strong></p><p>The feature data <strong>X</strong> is subject to low-rank approximation due to the narrower target domain for anomaly-free images than the ImageNet datasetâ€™s. The multi-scale features from different layers may also contribute to it due to the inter-dependency among the features from the layers. Inspired by the truncated SVD of a precision matrix, a low-rank embedding of input features with $W \in R^{F \times k}$,where <em>F &gt; k</em>, is considered as follows:</p>$$d^2_{i,j} = X^TW(W^TC_{i,j}W)^{âˆ’1}W^TX$$<p>where the below Theorem 1 shows the optimal <strong>W</strong>* is the eigenvectors related to the <em>k</em>-smallest eigenvalues of $C_{i,j}$ . Notice that 1) the computational complexity of the equation is cubically reduced to <em>O</em>($HWk^3$) set aside the cost of SVD, although which is the concern, 2) PCA embedding would fail to minimize approximation error since it uses the <em>k</em>-largest eigenvectors [14], and 3) near-zero eigenvalues may induce substantial anomaly scores.</p><p>é€‰å–åæ–¹å·®çŸ©é˜µçš„kä¸ªæœ€å°çš„ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œè¿›è¡Œä½ç§©é€¼è¿‘</p><blockquote><p>å‚è€ƒ</p><p><a href="https://www.zhihu.com/question/28630628">https://www.zhihu.com/question/28630628</a></p><p><a href="https://blog.csdn.net/zouxy09/article/details/24972869">https://blog.csdn.net/zouxy09/article/details/24972869</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>math</category>
      
      <category>çº¿æ€§ä»£æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>math</tag>
      
      <tag>çº¿æ€§ä»£æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­æ¨¡å—ä¸ºç©ºçš„è§£å†³æ–¹æ¡ˆ</title>
    <link href="/2021/08/06/config/git-submodule/"/>
    <url>/2021/08/06/config/git-submodule/</url>
    
    <content type="html"><![CDATA[<blockquote><p>é’ˆå¯¹å­æ¨¡å—æ–‡ä»¶å¤¹ä¸ºç©ºçš„æƒ…å†µï¼Œé‡‡å–ä¸‹åˆ—è§£å†³æ–¹æ¡ˆã€‚</p><p>å½“ä¸€ä¸ª git é¡¹ç›®åŒ…å«å­æ¨¡å—ï¼ˆsubmodule) æ—¶ï¼Œç›´æ¥å…‹éš†ä¸‹æ¥çš„å­æ¨¡å—ç›®å½•é‡Œé¢æ˜¯ç©ºçš„ã€‚</p></blockquote><p><strong>æœ‰ä¸¤ç§æ–¹æ³•è§£å†³</strong>ï¼š</p><h3 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h3><p>å¦‚æœé¡¹ç›®å·²ç»å…‹éš†åˆ°äº†æœ¬åœ°ï¼Œæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p><ol><li><p>åˆå§‹åŒ–æœ¬åœ°å­æ¨¡å—é…ç½®æ–‡ä»¶</p><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git submodule <span class="hljs-keyword">init</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>æ›´æ–°é¡¹ç›®ï¼ŒæŠ“å–å­æ¨¡å—å†…å®¹ã€‚</p><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git submodule update</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>è¿›å…¥å¯¹åº”å­æ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œ</p><figure class="highlight brainfuck"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">git</span> <span class="hljs-comment">submodule</span> <span class="hljs-comment">update</span> --<span class="hljs-comment">init</span> --<span class="hljs-comment">recursive</span><br></code></pre></td></tr></tbody></table></figure></li></ol><h3 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h3><p>å¦å¤–ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œ <code>git clone</code> æ—¶åŠ ä¸Š <code>--recursive</code> å‚æ•°ã€‚å®ƒä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°æ¯ä¸€ä¸ªå­æ¨¡å—ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone --recursive https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/example/</span>example.git<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é…ç½®</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoä¸­å…¬å¼æ˜¾ç¤º</title>
    <link href="/2021/08/05/config/hexo-math-config/"/>
    <url>/2021/08/05/config/hexo-math-config/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å…¬å¼çš„æ˜¾ç¤ºé—®é¢˜ã€‚Hexoä¸­Mathjaxæ˜¯ç”¨äºæ˜¾ç¤ºå…¬å¼çš„æ’ä»¶ï¼Œä½†æ˜¯å¤šè¡Œæ˜¾ç¤ºä¼šå‡ºç°é—®é¢˜ï¼Œæœ‰æ—¶è¿˜ä¼šå‡ºç°ä¹±ç çš„æƒ…å†µã€‚</p></blockquote><h3 id="é…ç½®">é…ç½®</h3><p>åœ¨æ ¹ç›®å½•ä¸‹çš„config_fluid.ymlâ€‹æ–‡ä»¶ä¸­æ‰“å¼€mathçš„ç›¸å…³é…ç½®ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># æ•°å­¦å…¬å¼ï¼Œå¼€å¯ä¹‹å‰éœ€è¦æ›´æ¢ Markdown æ¸²æŸ“å™¨ï¼Œå¦åˆ™å¤æ‚å…¬å¼ä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œå…·ä½“è¯·è§ï¼šhttps://hexo.fluid-dev.com/docs/guide/##latex-æ•°å­¦å…¬å¼</span><br><span class="hljs-comment"># Mathematical formula. If enable, you need to change the Markdown renderer, see: https://hexo.fluid-dev.com/docs/en/guide/#math</span><br><span class="hljs-attr">math:</span><br>  <span class="hljs-comment"># å¼€å¯åæ–‡ç« é»˜è®¤å¯ç”¨ï¼Œè‡ªå®šä¹‰é¡µé¢å¦‚éœ€ä½¿ç”¨ï¼Œéœ€åœ¨ Front-matter ä¸­æŒ‡å®š `math: true`</span><br>  <span class="hljs-comment"># If you want to use math on the custom page, you need to set `math: true` in Front-matter</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># å¼€å¯åï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter é‡ŒæŒ‡å®š `math: true` æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦</span><br>  <span class="hljs-comment"># If true, only set `math: true` in Front-matter will enable math, to load faster when the page does not contain math</span><br>  <span class="hljs-attr">specific:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># Options: mathjax | katex</span><br>  <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="å‡ºç°çš„é—®é¢˜">å‡ºç°çš„é—®é¢˜</h3><h4 id="é—®é¢˜1">é—®é¢˜1</h4><ul><li>ç”±äºhexoè§£ç æ—¶å…³æ³¨ï¼Œ%% ç­‰è¿ç»­å­—ç¬¦ï¼Œä¼šå°†è¿™éƒ¨åˆ†ä»£ç è§£è¯»ä¸ºå…¶ä»–å¸¦æœ‰ç‰¹æ®Šå«ä¹‰çš„å†…å®¹</li><li>å¦‚æœå…¬å¼ä¸­æ°å·§å‡ºç°äº†æ­¤ç±»å­—ç¬¦ï¼Œä¼šæŠ¥å‡ºä¸Šè¿°é”™è¯¯</li></ul><h4 id="é—®é¢˜2">é—®é¢˜2</h4><ul><li>ç”±äºhexoåœ¨å…¬å¼ä¸­çš„<code>\\</code>é”™ä¼šæˆäº†è½¬ä¹‰ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–åªçœ‹è§äº†ä¸€ä¸ªåæ–œæ ï¼Œä¸ä¼šæ‰§è¡Œæ¢è¡Œå‘½ä»¤ï¼Œå¯¼è‡´å…¬å¼å †æˆä¸€è¡Œ</li></ul><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><h4 id="ä¸´æ—¶æ–¹æ¡ˆ">ä¸´æ—¶æ–¹æ¡ˆ</h4><h5 id="é’ˆå¯¹é—®é¢˜1">é’ˆå¯¹é—®é¢˜1</h5><ul><li>å¯ä»¥åœ¨è¿ç»­çš„ <code>{</code> <code>}</code> <code>%</code>ä¸­é—´æ’å…¥ç©ºæ ¼ï¼Œåˆ†å¼€å°±æ²¡äº‹äº†</li></ul><h5 id="é’ˆå¯¹é—®é¢˜2">é’ˆå¯¹é—®é¢˜2</h5><ul><li>å¯ä»¥å°†<code>\\</code>æ¢æˆ<code>\\\\</code>ï¼Œå¯ä»¥å®ç°å…¬å¼çš„å¤šè¡Œæ­£ç¡®æ˜¾ç¤º</li></ul><h4 id="ç»ˆææ–¹æ¡ˆ">ç»ˆææ–¹æ¡ˆ</h4><ul><li><p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°äº†å¯ä»¥ä¸ºhexoæä¾›æ ‡è®°ï¼Œé˜»æ­¢å…¶æŒ‰ç…§è‡ªå·±çš„è§„åˆ™è§£é‡Šæˆ‘ä»¬çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºå…¶åŸæœ¬çš„å«ä¹‰</p></li><li><p>æ ‡è®°ä¸º</p><figure class="highlight django"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">{% <span class="hljs-name">raw</span> %}</span><span class="xml"></span><br><span class="xml">$$</span><br><span class="xml">...</span><br><span class="xml">$$</span><br><span class="xml"></span><span class="hljs-template-tag">{% <span class="hljs-name">endraw</span> %}</span><br></code></pre></td></tr></tbody></table></figure></li></ul><h3 id="å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½">å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½</h3><ul><li><p>é»˜è®¤æ˜¯æ˜¾ç¤ºä¸ºä¸€è¡Œè¦å®ç°å…¬å¼å¤šè¡Œå’Œå¯¹é½å¯ä»¥ä½¿ç”¨{aligned}æ¨¡å¼ï¼Œä½¿ç”¨"&amp;â€œæ¥æ ‡è®°å¯¹é½ä½ç½®ã€‚â€\\"è¡¨ç¤ºæ¢è¡Œ</p>  <figure class="highlight taggerscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">$$<br><span class="hljs-symbol">\b</span>egin{aligned}<br><span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}C<span class="hljs-symbol">\b</span>oldsymbol{x}&amp;=<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\r</span>ight]<span class="hljs-symbol">\b</span>oldsymbol{x} <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight] <span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\r</span>ight] <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft<span class="hljs-symbol">\V</span>ert <span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight<span class="hljs-symbol">\V</span>ert ^{2}<span class="hljs-symbol">\r</span>ight) <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\s</span>igma_{X}^{2}<br><span class="hljs-symbol">\e</span>nd{aligned}<br>$$<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ˜¾ç¤ºä¸º</p></li></ul>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$]]></content>
    
    
    <categories>
      
      <category>é…ç½®</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é…ç½®</tag>
      
      <tag>hexo</tag>
      
      <tag>fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç›´è§‚ç†è§£åæ–¹å·®çŸ©é˜µ</title>
    <link href="/2021/08/05/math/covariance-matrix/"/>
    <url>/2021/08/05/math/covariance-matrix/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡å‡ºè‡ª <a href="https://zhuanlan.zhihu.com/p/349802953">https://zhuanlan.zhihu.com/p/349802953</a></p></blockquote><h2 id="1-æ¦‚ç‡è®ºä¸­çš„å®šä¹‰">1 æ¦‚ç‡è®ºä¸­çš„å®šä¹‰</h2><h3 id="éšæœºå˜é‡ï¼š">éšæœºå˜é‡ï¼š</h3><p>éšæœºå˜é‡(Random Variable) X æ˜¯ä¸€ä¸ªæ˜ å°„ï¼ŒæŠŠéšæœºè¯•éªŒçš„ç»“æœä¸å®æ•°å»ºç«‹èµ·äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚è€ŒæœŸæœ›ä¸æ–¹å·®æ˜¯éšæœºå˜é‡çš„ä¸¤ä¸ªé‡è¦çš„æ•°å­—ç‰¹å¾ã€‚</p><h3 id="æ•°å­¦æœŸæœ›ï¼š">æ•°å­¦æœŸæœ›ï¼š</h3><p>åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)(æˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›(Expectation, or expected value))æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°ã€‚ æœŸæœ›å€¼æ˜¯è¯¥å˜é‡è¾“å‡ºå€¼çš„å¹³å‡æ•°ã€‚æœŸæœ›å€¼å¹¶ä¸ä¸€å®šåŒ…å«äºå˜é‡çš„è¾“å‡ºå€¼é›†åˆé‡Œã€‚</p><p>å¤§æ•°å®šå¾‹è§„å®šï¼Œéšç€é‡å¤æ¬¡æ•°æ¥è¿‘æ— ç©·å¤§ï¼Œæ•°å€¼çš„ç®—æœ¯å¹³å‡å€¼å‡ ä¹è‚¯å®šåœ°æ”¶æ•›äºæœŸæœ›å€¼ã€‚</p><h3 id="æ–¹å·®ï¼š">æ–¹å·®ï¼š</h3><p>æ–¹å·®(Variance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›(å³å‡å€¼)ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®(æ ·æœ¬æ–¹å·®)æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚</p><p>è®¾$X$ä¸ºéšæœºå˜é‡ï¼Œ å¦‚æœ$\mathrm{E}[X]$ï¼Œåˆ™éšæœºå˜é‡$X$çš„æ–¹å·®ä¸ºï¼š<br>$$<br>\mu=\mathrm{E}[X]<br>$$</p><p>æ–¹å·®ä¹Ÿè®°ä¸º $\sigma_{X}^{2}$ã€‚</p><p>æ ·æœ¬æ–¹å·®è®¡ç®—å…¬å¼ï¼š</p>$$S^{2}=\Sigma\left(X-\overline{X}\right)^{2}/\left(n-1\right)$$<p>å…¶ä¸­ï¼Œ$S^{2}$ä¸ºæ ·æœ¬æ–¹å·®ï¼Œ$X$ ä¸ºå˜é‡ï¼Œ$\overline{X}$ä¸ºæ ·æœ¬å‡å€¼ï¼Œ$n$ ä¸ºæ ·æœ¬ä¾‹æ•°ã€‚å¦‚æœè¦äº†è§£ä¸ºä»€ä¹ˆè¦é™¤ä»¥$n-1$ï¼Œè¯·çœ‹<a href="https://link.zhihu.com/?target=https%3A//www.visiondummy.com/2014/03/divide-variance-n-1/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="æ ‡å‡†å·®ï¼š">æ ‡å‡†å·®ï¼š</h3><p>æ ‡å‡†å·®(Standard Deviation)æ˜¯ç¦»å‡å·®å¹³æ–¹çš„ç®—æœ¯å¹³å‡æ•°(å³ï¼šæ–¹å·®)çš„ç®—æœ¯å¹³æ–¹æ ¹ï¼Œç”¨$\sigma$è¡¨ç¤ºã€‚æ ‡å‡†å·®ä¹Ÿè¢«ç§°ä¸ºæ ‡å‡†åå·®ï¼Œæˆ–è€…å®éªŒæ ‡å‡†å·®ï¼Œåœ¨æ¦‚ç‡ç»Ÿè®¡ä¸­æœ€å¸¸ä½¿ç”¨ä½œä¸ºç»Ÿè®¡åˆ†å¸ƒç¨‹åº¦ä¸Šçš„æµ‹é‡ä¾æ®ã€‚ è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/covariance-matrix-pic1.jpg" alt=""></p><p>æ ‡å‡†å·®æ˜¯æ–¹å·®çš„ç®—æœ¯å¹³æ–¹æ ¹ã€‚æ ‡å‡†å·®èƒ½åæ˜ ä¸€ä¸ªæ•°æ®é›†çš„ç¦»æ•£ç¨‹åº¦ã€‚å¹³å‡æ•°ç›¸åŒçš„ä¸¤ç»„æ•°æ®ï¼Œæ ‡å‡†å·®æœªå¿…ç›¸åŒã€‚</p><h3 id="åæ–¹å·®ï¼š">åæ–¹å·®ï¼š</h3><p><strong>åæ–¹å·®(Covariance)åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ç”¨äºè¡¡é‡ä¸¤ä¸ªå˜é‡çš„æ€»ä½“è¯¯å·®ã€‚è€Œæ–¹å·®æ˜¯åæ–¹å·®çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå³å½“ä¸¤ä¸ªå˜é‡æ˜¯ç›¸åŒçš„æƒ…å†µã€‚</strong></p><p>æœŸæœ›å€¼åˆ†åˆ«ä¸º$ E[X]$ä¸$[Y]$çš„ä¸¤ä¸ªå®éšæœºå˜é‡$X$ä¸$Y$ä¹‹é—´çš„åæ–¹å·® $\mathrm{Cov}(X,Y)$ å®šä¹‰ä¸ºï¼š</p>$$\begin{aligned}\mathrm{Cov}(X,Y)&amp;=\mathrm{E}\left[\left(X\mathrm{E}\left[X\right]\right)\left(Y-\mathrm{E}\left[Y\right]\right)\right]  \\&amp;=\mathrm{E}\left[XY\right]-2\mathrm{E}\left[Y\right]\mathrm{E}\left[X\right]+\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right] \\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\end{aligned}$$<p>åæ–¹å·®è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªå˜é‡æ€»ä½“è¯¯å·®çš„æœŸæœ›ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯æ­£å€¼ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ç›¸åï¼Œå³å…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªå´å°äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯è´Ÿå€¼ã€‚</p><p>å¦‚æœ$X$ä¸$Y$æ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆäºŒè€…ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯0ï¼Œå› ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„éšæœºå˜é‡æ»¡è¶³$\mathrm{E}[XY]=\mathrm{E}[X]\mathrm{E}[Y]$ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å¹¶ä¸æˆç«‹ã€‚å³å¦‚æœ$X$ä¸$Y$çš„åæ–¹å·®ä¸º0ï¼ŒäºŒè€…å¹¶ä¸ä¸€å®šæ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ã€‚</p><p><strong>åæ–¹å·®ä¸º0çš„ä¸¤ä¸ªéšæœºå˜é‡ç§°ä¸ºæ˜¯ä¸ç›¸å…³çš„ã€‚</strong></p><h3 id="åæ–¹å·®çŸ©é˜µï¼š">åæ–¹å·®çŸ©é˜µï¼š</h3><p>åœ¨ç»Ÿè®¡å­¦ä¸æ¦‚ç‡è®ºä¸­ï¼Œåæ–¹å·®çŸ©é˜µ(Covariance matrix)çš„æ¯ä¸ªå…ƒç´ æ˜¯å„ä¸ªå‘é‡å…ƒç´ ä¹‹é—´çš„åæ–¹å·®ï¼Œæ˜¯ä»æ ‡é‡éšæœºå˜é‡åˆ°é«˜ç»´åº¦éšæœºå‘é‡çš„è‡ªç„¶æ¨å¹¿ã€‚</p><p>è®¾$X=\left(X_{1},X_{2},\ldots,X_{n}\right)^{\mathrm{T}}$ä¸º$n$ ç»´éšæœºå˜é‡ï¼Œç§°çŸ©é˜µ</p>$$C=\left(\begin{array}{cccc} c_{11} &amp; c_{12} &amp; \cdots &amp; c_{1n}\\ c_{21} &amp; c_{22} &amp; \cdots &amp; c_{2n}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ c_{n1} &amp; c_{n2} &amp; \cdots &amp; c_{nn} \end{array}\right)$$<p>ä¸º n ç»´éšæœºå˜é‡xçš„åæ–¹å·®çŸ©é˜µï¼Œä¹Ÿè®°ä¸º $D\left(X\right)$ ï¼Œå…¶ä¸­<br>$$<br>c_{ij}=\mathrm{Cov}(X_{i},X_{j}),\quad i,j=1,2,\ldots,n<br>$$<br>ä¸ºXçš„åˆ†é‡$X_{i}$å’Œ$X_{j}$çš„åæ–¹å·®ã€‚<em>å¹¶ä¸”å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä¸ºå„ä¸ªéšæœºå˜é‡çš„æ–¹å·®ï¼š</em></p><p>$$<br>c_{ii}=\mathrm{Cov}(X_{i},X_{i}),\quad i=1,2,\ldots,n<br>$$</p><p>åæ–¹å·®çŸ©é˜µæ˜¯å¯¹ç§°åŠæ­£å®šçŸ©é˜µã€‚åæ–¹å·®çŸ©é˜µçš„å¯¹ç§°æ€§ï¼Œå¯ä»å®šä¹‰å¾—çŸ¥ã€‚å¯¹äºåŠæ­£å®šç‰¹æ€§ï¼Œè¯æ˜å¦‚ä¸‹ï¼š</p><p>ç°ç»™å®šä»»æ„ä¸€ä¸ªéé›¶å‘é‡$\boldsymbol{x}$ï¼Œåˆ™</p>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$<p>å…¶ä¸­ï¼Œ<br>$$<br>\sigma_{X}=\left(X-\mu \right)^{\mathrm{T}}\boldsymbol{x}<br>$$<br>ç”±äº $\sigma_{X}<sup>{2}\geq0$ï¼Œå› æ­¤$\boldsymbol{x}</sup>{\mathrm{T}}C\boldsymbol{x}\geq0$ï¼Œå› æ­¤åæ–¹å·®çŸ©é˜µ$C$ æ˜¯åŠæ­£å®šçŸ©é˜µã€‚</p>]]></content>
    
    
    <categories>
      
      <category>math</category>
      
      <category>æ¦‚ç‡è®º</category>
      
    </categories>
    
    
    <tags>
      
      <tag>math</tag>
      
      <tag>æ¦‚ç‡è®º</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
