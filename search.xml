<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>pipenvçš„å®‰è£…å’Œä½¿ç”¨</title>
      <link href="/2021/10/08/project_tool/pipenv/"/>
      <url>/2021/10/08/project_tool/pipenv/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pipenv æ˜¯Kenneth Reitzå¤§ç¥çš„ä½œå“ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç®¡ç†Pythonå¤šä¸ªç¯å¢ƒï¼Œå„ç§åŒ…ã€‚è¿‡å»æˆ‘ä»¬ä¸€èˆ¬ç”¨virtualenvæ­å»ºè™šæ‹Ÿç¯å¢ƒï¼Œç®¡ç†pythonç‰ˆæœ¬ï¼Œä½†æ˜¯è·¨å¹³å°çš„ä½¿ç”¨ä¸å¤ªä¸€è‡´ï¼Œä¸”æœ‰æ—¶å€™å¤„ç†åŒ…ä¹‹é—´çš„ä¾èµ–æ€»å­˜åœ¨é—®é¢˜ï¼›è¿‡å»ä¹Ÿå¸¸å¸¸ç”¨ pipè¿›è¡ŒåŒ…çš„ç®¡ç†ï¼Œpipå·²ç»è¶³å¤Ÿå¥½ï¼Œä½†æ˜¯ä»ç„¶æ¨èpipenvï¼Œç›¸å½“äºvirtualenvå’Œpipçš„åˆä½“ï¼Œä¸”æ›´åŠ å¼ºå¤§ã€‚pipenvå¼€æºä¹‹åï¼Œåœ¨GitHubä¸Šæœ‰å¾ˆé«˜äººæ°”ï¼ˆæˆªæ­¢äºç°åœ¨æœ‰9600å¤šæ˜Ÿï¼‰ã€‚</p></blockquote><blockquote><p>åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œé¡¹ç›®æ–‡ä»¶104Mæ‰“åŒ…ä¹‹åæ–‡ä»¶5.8Gï¼Œæœ‰äººè¯´ï¼ŒAnacondaé‡Œå†…ç½®äº†å¾ˆå¤šåº“ï¼Œæ‰“åŒ…çš„æ—¶å€™æ‰“åŒ…äº†å¾ˆå¤šä¸å¿…è¦çš„æ¨¡å—è¿›å»ï¼Œè¦ç”¨çº¯å‡€çš„Pythonæ¥æ‰“åŒ…ã€‚äºæ˜¯å°è¯•ä½¿ç”¨pipenvè™šæ‹Ÿç¯å¢ƒæ¥æ‰“åŒ…ï¼Œemmmæœ€åå®Œæˆæ˜¯5.2Gï¼Œæ„Ÿè§‰ï¼Œä¹Ÿï¼Œæ²¡æœ‰ï¼Œå¤šå¤§æ”¹å˜å–ï¼Œå°¤å…¶æ˜¯torchåŒ…ç›´æ¥å åˆ°äº†2.8G(è¿™è¿˜æ˜¯æ”¹äº†from importä¹‹åå‘¢)ã€‚ å“ ğŸ˜£</p></blockquote><p><strong>pipenvä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</strong></p><p>ï¼ˆ1ï¼‰pipenvé›†æˆäº†pipï¼Œvirtualenvä¸¤è€…çš„åŠŸèƒ½ï¼Œä¸”å®Œå–„äº†ä¸¤è€…çš„ä¸€äº›ç¼ºé™·ã€‚</p><p>ï¼ˆ2ï¼‰è¿‡å»ç”¨virtualenvç®¡ç†requirements.txtæ–‡ä»¶å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼ŒPipenvä½¿ç”¨Pipfileå’ŒPipfile.lockï¼Œåè€…å­˜æ”¾å°†åŒ…çš„ä¾èµ–å…³ç³»ï¼ŒæŸ¥çœ‹ä¾èµ–å…³ç³»æ˜¯ååˆ†æ–¹ä¾¿ã€‚</p><p>ï¼ˆ3ï¼‰å„ä¸ªåœ°æ–¹ä½¿ç”¨äº†å“ˆå¸Œæ ¡éªŒï¼Œæ— è®ºå®‰è£…è¿˜æ˜¯å¸è½½åŒ…éƒ½ååˆ†å®‰å…¨ï¼Œä¸”ä¼šè‡ªåŠ¨å…¬å¼€å®‰å…¨æ¼æ´ã€‚ã€‚</p><p>ï¼ˆ4ï¼‰é€šè¿‡åŠ è½½.envæ–‡ä»¶ç®€åŒ–å¼€å‘å·¥ä½œæµç¨‹ã€‚</p><p>ï¼ˆ5ï¼‰æ”¯æŒPython2 å’Œ Python3ï¼Œåœ¨å„ä¸ªå¹³å°çš„å‘½ä»¤éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢å¿«é€Ÿä»‹ç»pipenvçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ–‡ç« æœ«å°¾æœ‰å…¶githubé“¾æ¥ã€‚æœ¬æ–‡çš„æµ‹è¯•ç¯å¢ƒæ˜¯windowsä¸‹çš„Python3.6ï¼Œå¯¹äºå…¶ä»–å¹³å°åŒæ ·é€‚ç”¨ã€‚</p><h2 id="1-å®‰è£…pipenv">1 å®‰è£…pipenv</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv<br></code></pre></td></tr></tbody></table></figure><h2 id="2-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><p>æ–°å»ºæ–‡ä»¶å¤¹åœ¨æ–‡ä»¶å¤¹ä¸­å»ºç«‹è™šæ‹Ÿç¯å¢ƒã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">mkdir envfile<br>cd envfile<br>pipenv install<br></code></pre></td></tr></tbody></table></figure><p>åˆå§‹åŒ–å¥½è™šæ‹Ÿç¯å¢ƒåï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆ2ä¸ªæ–‡ä»¶<code>Pipfile</code>å’Œ<code>Pipfile.lock</code>ã€‚ä¸ºpipenvåŒ…çš„é…ç½®æ–‡ä»¶ï¼Œä»£æ›¿åŸæ¥çš„ requirement.txtã€‚</p><p>é¡¹ç›®æäº¤æ—¶ï¼Œå¯å°†<code>Pipfile</code> æ–‡ä»¶å’Œ<code>Pipfile.lock</code>æ–‡ä»¶ä¸€å¹¶æäº¤ï¼Œå¾…å…¶ä»–å¼€å‘å…‹éš†ä¸‹è½½ï¼Œæ ¹æ®æ­¤Pipfile è¿è¡Œå‘½ä»¤<code>pipenv install --dev</code>ç”Ÿæˆè‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒã€‚</p><p><code>Pipfile.lock</code> æ–‡ä»¶æ˜¯é€šè¿‡hashç®—æ³•å°†åŒ…çš„åç§°å’Œç‰ˆæœ¬ï¼ŒåŠä¾èµ–å…³ç³»ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œå¯ä»¥ä¿è¯åŒ…çš„å®Œæ•´æ€§ã€‚</p><h2 id="3-å®‰è£…åŒ…">3 å®‰è£…åŒ…</h2><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…åŒ…</p><p>å¯ä»¥ä½¿ç”¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install package<br></code></pre></td></tr></tbody></table></figure><p>æˆ–è€…å…ˆè¿›å…¥è™šæ‹Ÿç¯å¢ƒä¸­å†å®‰è£…åŒ…ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell  <span class="hljs-comment">#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br>pip install package<br></code></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä½¿ç”¨txtæ–‡ä»¶æ¥å®‰è£…åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install -r requirements.txt <span class="hljs-comment">#é€šè¿‡requirementsæ–‡ä»¶å®‰è£…åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>requirements.txtæ–‡ä»¶å½¢å¦‚</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># pip install -r requirements.txt</span><br><br><span class="hljs-comment"># base ----------------------------------------</span><br><span class="hljs-attribute">matplotlib</span>&gt;=<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">numpy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">opencv</span>-python&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">Pillow</span><br><span class="hljs-attribute">PyYAML</span>&gt;=<span class="hljs-number">5</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">scipy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">torch</span>==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">torchvision</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">tqdm</span>&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">41</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">PyQt5</span><br><span class="hljs-attribute">fpdf</span><br><span class="hljs-comment"># logging -------------------------------------</span><br><span class="hljs-comment">#tensorboard&gt;=2.4.1</span><br><span class="hljs-comment"># wandb</span><br><br><span class="hljs-comment"># plotting ------------------------------------</span><br><span class="hljs-attribute">seaborn</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pandas</span><br><span class="hljs-attribute">requests</span><br></code></pre></td></tr></tbody></table></figure><h2 id="4-ç›¸å…³çš„å‘½ä»¤">4 ç›¸å…³çš„å‘½ä»¤</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv --py    <span class="hljs-comment">#æ˜¾ç¤ºpythonè§£é‡Šå™¨ä¿¡æ¯</span><br>pipenv --where <span class="hljs-comment">#æ˜¾ç¤ºæœ¬åœ°å·¥ç¨‹è·¯å¾„</span><br>pipenv --venv  <span class="hljs-comment">#æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒä¿¡æ¯</span><br>pipenv graph   <span class="hljs-comment">#æ˜¾ç¤ºç›®å‰å®‰è£…çš„åº“ä»¥åŠä¾èµ–å…³ç³»</span><br>pipenv uninstrall package <span class="hljs-comment">#å¸è½½ä¾èµ–åŒ…</span><br>pipenv uninstall --<span class="hljs-built_in">all</span>    <span class="hljs-comment">#å¸è½½å…¨éƒ¨ä¾èµ–åŒ…</span><br>exit                      <span class="hljs-comment">#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span><br>pipenv --rm               <span class="hljs-comment">#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></td></tr></tbody></table></figure><h4 id="è¿è¡Œä»£ç ">è¿è¡Œä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv run python XXX.py<br>æˆ–è€…<br>pipenv shell<br>python XXX.py<br></code></pre></td></tr></tbody></table></figure><h2 id="5-pyinstalleræ‰“åŒ…å‹ç¼©">5 pyinstalleræ‰“åŒ…å‹ç¼©</h2><h3 id="ç¬¬ä¸€æ¬¡æ‰“åŒ…">ç¬¬ä¸€æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv        <span class="hljs-comment">#å®‰è£…pipenvåº“</span><br>pipenv install            <span class="hljs-comment">#æ–°å»ºç¯å¢ƒï¼Œcdè¿›å…¥ï¼Œå»ºç«‹è™šæ‹Ÿç¯å¢ƒ</span><br>pipenv shell              <span class="hljs-comment">#è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [...]         <span class="hljs-comment">#å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ¨¡å—</span><br>pip install pyinstaller   <span class="hljs-comment">#å®‰è£…æ‰“åŒ…çš„æ¨¡å—</span><br>pyinstaller å‚æ•° [..]      <span class="hljs-comment">#æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>ç”Ÿæˆdistæ–‡ä»¶å¤¹å’Œç»“æœã€‚</p><h3 id="å†æ¬¡æ‰“åŒ…">å†æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell               <span class="hljs-comment">#cdè¿›å…¥ä¹‹å‰åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ï¼Œè¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [new package]  <span class="hljs-comment">#å®‰è£…æ–°æ¨¡å—</span><br>pyinstaller å‚æ•° [...]      <span class="hljs-comment">#å†æ¬¡æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å‰²æ–‡ä»¶åç›¸å…³æ“ä½œ</title>
      <link href="/2021/10/07/python/split-filename/"/>
      <url>/2021/10/07/python/split-filename/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹æ–‡ä»¶åçš„ç›¸å…³æ“ä½œæ€»ç»“</p></blockquote><h3 id="å‡½æ•°ä»‹ç»">å‡½æ•°ä»‹ç»</h3><p><code>os.path</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">os.path.split() <span class="hljs-comment">#åˆ†å‰²æ–‡ä»¶å</span><br>os.path.splitdrive() <span class="hljs-comment">#åˆ†å‰²ç›˜ç¬¦</span><br>os.path.splitext() <span class="hljs-comment">#åˆ†å‰²æ‰©å±•å</span><br>os.path.basename() <span class="hljs-comment">#è·å–æ–‡ä»¶åï¼Œsplitçš„åä¸€å…ƒç´ </span><br>os.path.dirname()  <span class="hljs-comment">#è·å–è·¯å¾„åï¼Œsplitçš„å‰ä¸€å…ƒç´ </span><br>os.path.join()     <span class="hljs-comment">#è¿æ¥pathå­—ç¬¦ä¸²</span><br></code></pre></td></tr></tbody></table></figure><p><code>os</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.walk()     <span class="hljs-comment">#éå†è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯å’Œå­æ–‡ä»¶ä¿¡æ¯ï¼ˆrootï¼Œdirï¼Œfileçš„å½¢å¼ï¼‰</span><br>os.listdir()  <span class="hljs-comment">#è¿”å›è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“ä»‹ç»">å…·ä½“ä»‹ç»</h3><h4 id="os-path-split">os.path.split()</h4><p><code>os.path.split()</code>å‡½æ•°è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆçˆ¶è·¯å¾„ï¼Œæ–‡ä»¶åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.split(p)<br>Docstring:<br>Split a pathname.<br><br>Return <span class="hljs-built_in">tuple</span> (head, tail) where tail <span class="hljs-keyword">is</span> everything after the final slash.<br>Either part may be empty.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>spath = <span class="hljs-string">"./a/b/c/name.txt"</span><br>path,filename = os.path.split(spath)<br>path,filenameä¸º(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">'name.txt'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitdrive">os.path.splitdrive()</h4><p><code>os.path.splitdrive()</code>å‡½æ•°è¿”å›å…ƒç»„ä¿¡æ¯ï¼ˆç›˜ç¬¦ï¼Œè·¯å¾„ï¼ˆé™¤å»ç›˜ç¬¦ï¼‰ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitdrive(p)<br>Docstring:<br>Split a pathname into drive/UNC sharepoint <span class="hljs-keyword">and</span> relative path specifiers.<br>Returns a <span class="hljs-number">2</span>-<span class="hljs-built_in">tuple</span> (drive_or_unc, path); either part may be empty.<br><br>If you assign<br>    result = splitdrive(p)<br>It <span class="hljs-keyword">is</span> always true that:<br>    result[<span class="hljs-number">0</span>] + result[<span class="hljs-number">1</span>] == p<br><br>If the path contained a drive letter, drive_or_unc will contain everything<br>up to <span class="hljs-keyword">and</span> including the colon.  e.g. splitdrive(<span class="hljs-string">"c:/dir"</span>) returns (<span class="hljs-string">"c:"</span>, <span class="hljs-string">"/dir"</span>)<br><br>If the path contained a UNC path, the drive_or_unc will contain the host name<br><span class="hljs-keyword">and</span> share up to but <span class="hljs-keyword">not</span> including the fourth directory separator character.<br>e.g. splitdrive(<span class="hljs-string">"//host/computer/dir"</span>) returns (<span class="hljs-string">"//host/computer"</span>, <span class="hljs-string">"/dir"</span>)<br><br>Paths cannot contain both a drive letter <span class="hljs-keyword">and</span> a UNC path.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š  <br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.splitdrive(cpath)<br>(<span class="hljs-string">'C:'</span>, <span class="hljs-string">'/a/b/a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitext">os.path.splitext()</h4><p><code>os.path.splitext()</code>è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆè·¯å¾„åŠæ–‡ä»¶åï¼Œæ‰©å±•åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitext(p)<br>Docstring:<br>Split the extension <span class="hljs-keyword">from</span> a pathname.<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-dirname-ä¸os-path-basename">os.path.dirname()ä¸os.path.basename()</h4><p><code>os.path.dirname()</code>å’Œ<code>os.path.basename()</code>åˆ†åˆ«è¿”å›<code>split</code>å‡½æ•°çš„å‰åå…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.basename(p)<br>Docstring: Returns the final component of a pathname<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.dirname(cpath) <span class="hljs-comment">#dirpath</span><br><span class="hljs-string">'C:/a/b'</span><br>os.path.basename(cpath) <span class="hljs-comment">#filename</span><br><span class="hljs-string">'a.csv'</span><br>ç›¸å½“äºsplitçš„åˆ†è§£ï¼š<br>os.path.split(cpath)<br>(<span class="hljs-string">'C:/a/b'</span>, <span class="hljs-string">'a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-join">os.path.join()</h4><p><code>os.path.join()</code>ä½¿ç”¨ç‰¹å®šçš„åˆ†éš”ç¬¦è¿æ¥è·¯å¾„ã€‚Windowsä¸‹é»˜è®¤ä½¿ç”¨<code>\\</code>ã€‚Linuxä¸‹é»˜è®¤ä½¿ç”¨<code>/</code>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.join(path, *paths)<br>Docstring: &lt;no docstring&gt;<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>os.path.join(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">"a123"</span>, <span class="hljs-string">'name.txt'</span>) <br><span class="hljs-string">'./a/b/c\\a123\\name.txt'</span><br></code></pre></td></tr></tbody></table></figure><h4 id="os-walk">os.walk()</h4><p><code>os.walk()</code>éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼Œç„¶åé€’å½’éå†ä¸‹åˆ—å­æ–‡ä»¶å¤¹ã€‚<code>for root,dirs,files in os.walk(temp)</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.walk(top, topdown=<span class="hljs-literal">True</span>, onerror=<span class="hljs-literal">None</span>, followlinks=<span class="hljs-literal">False</span>)<br>Docstring:<br>Directory tree generator.<br><br>For each directory <span class="hljs-keyword">in</span> the directory tree rooted at top (including top<br>itself, but excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>), yields a <span class="hljs-number">3</span>-<span class="hljs-built_in">tuple</span><br>    dirpath, dirnames, filenames<br>dirpath <span class="hljs-keyword">is</span> a string, the path to the directory.  dirnames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of<br>the names of the subdirectories <span class="hljs-keyword">in</span> dirpath (excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>).<br>filenames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of the names of the non-directory files <span class="hljs-keyword">in</span> dirpath.<br>Note that the names <span class="hljs-keyword">in</span> the lists are just names, <span class="hljs-keyword">with</span> no path components.<br>To get a full path (which begins <span class="hljs-keyword">with</span> top) to a file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">in</span><br>dirpath, do os.path.join(dirpath, name).<br><br>If optional arg <span class="hljs-string">'topdown'</span> <span class="hljs-keyword">is</span> true <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> specified, the triple <span class="hljs-keyword">for</span> a<br>directory <span class="hljs-keyword">is</span> generated before the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">any</span> of its subdirectories<br>(directories are generated top down).  If topdown <span class="hljs-keyword">is</span> false, the triple<br><span class="hljs-keyword">for</span> a directory <span class="hljs-keyword">is</span> generated after the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> of its<br>subdirectories (directories are generated bottom up).<br><br>Caution:  <span class="hljs-keyword">if</span> you <span class="hljs-keyword">pass</span> a relative pathname <span class="hljs-keyword">for</span> top, don<span class="hljs-string">'t change the</span><br><span class="hljs-string">current working directory between resumptions of walk.  walk never</span><br><span class="hljs-string">changes the current directory, and assumes that the client doesn'</span>t<br>either.<br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br><span class="hljs-keyword">for</span> root,dirs,files <span class="hljs-keyword">in</span> os.walk(temp,topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-comment">#éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½• root,dirs,files,topdownä¸ºfalseæ—¶è¡¨ç¤ºä»åº•å‘ä¸Šï¼Œä¸ºtrueæ˜¯ä»é¡¶å‘ä¸‹</span><br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>        <br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>.exe<br>E:\è¿…é›·ä¸‹è½½\cuda_10<span class="hljs-number">.2</span><span class="hljs-number">.89_441</span><span class="hljs-number">.22</span>_win10.exe<br>E:\è¿…é›·ä¸‹è½½\Git-<span class="hljs-number">2.33</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>-<span class="hljs-number">64</span>-bit.exe<br>E:\è¿…é›·ä¸‹è½½\ide-<span class="hljs-built_in">eval</span>-resetter-<span class="hljs-number">2.1</span><span class="hljs-number">.13</span>.<span class="hljs-built_in">zip</span><br>E:\è¿…é›·ä¸‹è½½\npp<span class="hljs-number">.8</span><span class="hljs-number">.1</span><span class="hljs-number">.4</span>.Installer.exe<br>E:\è¿…é›·ä¸‹è½½\sogou_explorer_11<span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-number">.33862_7793</span>.exe<br>E:\è¿…é›·ä¸‹è½½\windows_v6<span class="hljs-number">.61</span>.rar<br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span> <br></code></pre></td></tr></tbody></table></figure><h4 id="os-listdir">os.listdir()</h4><p><code>os.listdir()</code>è¿”å›æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¸€çº§æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.listdir(path=<span class="hljs-literal">None</span>)<br>Docstring:<br>Return a <span class="hljs-built_in">list</span> containing the names of the files <span class="hljs-keyword">in</span> the directory.<br><br>path can be specified <span class="hljs-keyword">as</span> either <span class="hljs-built_in">str</span>, <span class="hljs-built_in">bytes</span>, <span class="hljs-keyword">or</span> a path-like <span class="hljs-built_in">object</span>.  If path <span class="hljs-keyword">is</span> <span class="hljs-built_in">bytes</span>,<br>  the filenames returned will also be <span class="hljs-built_in">bytes</span>; <span class="hljs-keyword">in</span> <span class="hljs-built_in">all</span> other circumstances<br>  the filenames returned will be <span class="hljs-built_in">str</span>.<br>If path <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>, uses the path=<span class="hljs-string">'.'</span>.<br>On some platforms, path may also be specified <span class="hljs-keyword">as</span> an <span class="hljs-built_in">open</span> file descriptor;\<br>  the file descriptor must refer to a directory.<br>  If this functionality <span class="hljs-keyword">is</span> unavailable, using it raises NotImplementedError.<br><br>The <span class="hljs-built_in">list</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> arbitrary order.  It does <span class="hljs-keyword">not</span> include the special<br>entries <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span> even <span class="hljs-keyword">if</span> they are present <span class="hljs-keyword">in</span> the directory.<br><span class="hljs-type">Type</span>:      builtin_function_or_method<br>    <br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br>os.listdir(temp) <span class="hljs-comment">#åˆ—å‡ºdirnameä¸‹çš„ç›®å½•å’Œæ–‡ä»¶</span><br>[<span class="hljs-string">'cuda_10.2.89_441.22_win10.exe'</span>,<br> <span class="hljs-string">'Git-2.33.0.2-64-bit.exe'</span>,<br> <span class="hljs-string">'ide-eval-resetter-2.1.13.zip'</span>,<br> <span class="hljs-string">'npp.8.1.4.Installer.exe'</span>,<br> <span class="hljs-string">'sogou_explorer_11.0.0.33862_7793.exe'</span>,<br> <span class="hljs-string">'Suplicant_for_Campus_Network_For_Windows_V6.61'</span>,<br> <span class="hljs-string">'windows_v6.61.rar'</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨pythonåˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</title>
      <link href="/2021/10/06/python/delete-file/"/>
      <url>/2021/10/06/python/delete-file/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œå’Œå‡½æ•°ã€‚</p></blockquote><h3 id="åˆ é™¤å•ä¸ªæ–‡ä»¶">åˆ é™¤å•ä¸ªæ–‡ä»¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.remove(path)<br><span class="hljs-comment"># å¦‚æœpathæ˜¯ä¸€ä¸ªç›®å½•ï¼ŒæŠ›å‡ºOSErroré”™è¯¯ï¼Œå¦‚æœæ–‡ä»¶ä¸åœ¨æˆ–è€…è·¯å¾„é”™è¯¯ï¼Œä¼šæŠ›å‡ºé”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶å¤¹">åˆ é™¤æ–‡ä»¶å¤¹</h3><p>ç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">os.rmdir(dirName)<br>os.removedirs(dirName)<br><span class="hljs-comment"># åˆ é™¤ç›®å½• dirNameï¼Œè¦æ±‚dirNameå¿…é¡»æ˜¯ä¸ªç©ºç›®å½•ï¼Œå¦åˆ™æŠ›å‡ºOSErroré”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="é€’å½’åˆ é™¤æ–‡ä»¶å¤¹">é€’å½’åˆ é™¤æ–‡ä»¶å¤¹</h3><p>éç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br>shutil.rmtree()<br></code></pre></td></tr></tbody></table></figure><p>éå†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…ˆåˆ é™¤å­æ–‡ä»¶ï¼Œå†åˆ é™¤æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">"filename"</span>, topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        os.remove(os.path.join(root, name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        os.rmdir(os.path.join(root, name))<br> <br><span class="hljs-comment"># os.walkçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦éå†å¹¶åˆ é™¤å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ç›®å½•</span><br><span class="hljs-comment"># ä¸Šé¢çš„ä»£ç è¿è¡Œåï¼Œæ–‡ä»¶å¤¹"filename"é‡Œçš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å…¨è¢«åˆ é™¤ï¼Œä½†æ˜¯æ–‡ä»¶å¤¹"filename"è¿˜å­˜åœ¨</span><br><span class="hljs-comment"># å…·ä½“å¯ä»¥æŸ¥ä¸‹os.walk()çš„ç”¨æ³•ï¼Œä»¥åŠå…¶å‚æ•°topdownçš„åŠŸèƒ½</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer42 è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</title>
      <link href="/2021/10/06/leetcode/leetcode-offer42/"/>
      <url>/2021/10/06/leetcode/leetcode-offer42/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚</p><p>è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">è¾“å…¥: nums = [<span class="hljs-string">-2</span>,1,<span class="hljs-string">-3</span>,4,<span class="hljs-string">-1</span>,2,1,<span class="hljs-string">-5</span>,4]<br>è¾“å‡º: 6<br>è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,<span class="hljs-string">-1</span>,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= arr.length &lt;= 10^5</li><li>-100 &lt;= arr[i] &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨æ•°ç»„dp[i]ç”¨æ¥è¡¨ç¤ºä»0åˆ°iä¸‹æ ‡å…ƒç´ çš„å­æ•°ç»„ä¸­ï¼ŒåŒ…å«iå…ƒç´ çš„æœ€å¤§å’Œï¼Œä¾‹å¦‚ï¼šåŸå§‹æ•°åˆ—num=[-2,1,-3,4,-1,2,1,-5,4]ï¼Œdpä¸º[-2, 1, -2, 4, 3, 5, 6, 1, 5]ã€‚æ³¨æ„ä»ä¸‹æ ‡1å¼€å§‹ï¼Œdp[i] = num[i] + max(0, dp[i-1])ï¼Œå¦‚æœå‰é¡¹çš„æœ€å¤§å’Œ(ç›¸é‚»çš„å­æ•°ç»„)å¯¹æ­¤é¡¹<strong>æœ‰å¢ç›Š</strong>å°±æ·»åŠ è¿›å»ï¼Œå¦åˆ™å°±ç›´æ¥num[i]ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>            nums[i] += <span class="hljs-built_in">max</span>(nums[i - <span class="hljs-number">1</span>], <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(nums)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå°†å›¾ç‰‡å­˜è¿›PDFä¸­</title>
      <link href="/2021/10/06/python/FPDF/"/>
      <url>/2021/10/06/python/FPDF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å…¬å®‰éƒ¨è¶³è¿¹é¡¹ç›®ä¸­ï¼Œéœ€è¦å°†çŸ«æ­£çš„è¶³è¿¹å›¾ç‰‡æ‰“å°å‡ºæ¥ï¼Œæ‰€æœ‰é¦–å…ˆè½¬æˆpdfæ–‡ä»¶ä¸­å†è¿›è¡Œæ‰“å°ã€‚å°±æ¶‰åŠåˆ°å°†å›¾ç‰‡å­˜å…¥pdfä¸­ï¼Œè¿™é‡Œä½¿ç”¨çš„å·¥å…·æ˜¯FPDFã€‚FPDFæ˜¯ä¸€ä¸ªpdfæ–‡ä»¶çš„å¤„ç†åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ªæ€§åŒ–åˆ›å»ºå’Œè§„èŒƒè®¾å®špdfæ–‡ä»¶ã€‚</p></blockquote><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install fpdf<br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“å†…å®¹">å…·ä½“å†…å®¹</h3><h4 id="å®ç°ä»£ç ">å®ç°ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fpdf <span class="hljs-keyword">import</span> FPDF<br><span class="hljs-keyword">import</span> glob<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">imagesTopdf</span>(<span class="hljs-params">imagesPath,pdfName</span>):</span><br>    pdf = FPDF()<br>    <span class="hljs-keyword">for</span> imagePath <span class="hljs-keyword">in</span> imagesPath:<br>        pdf.add_page()<br>        pdf.image(imagePath,x=<span class="hljs-number">0</span>,y=<span class="hljs-number">0</span>,w=<span class="hljs-number">170</span>,h=<span class="hljs-number">297</span>)<br>    pdf.output(pdfName,<span class="hljs-string">"F"</span>)<br><br>images = glob.glob(<span class="hljs-string">"current_revise/"</span>+<span class="hljs-string">"*.jpg"</span>)<br><span class="hljs-comment"># jpg_path = "test.jpg"</span><br>pdf_path = <span class="hljs-string">"test_file3.pdf"</span><br>imagesTopdf(images,pdf_path)<br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‚æ•°">ç›¸å…³å‚æ•°</h4><p>1ï¼Œå…¶ä¸­<code>pdf = FPDF()</code>æ˜¯åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤æ˜¯ï¼š</p><p>2ï¼Œ<code>orientation</code>ä¸ºç«–å‘ï¼ˆPï¼šç«–å‘ï¼ŒLæ¨ªå‘ï¼‰ï¼›</p><p>3ï¼Œ<code>unit</code>ä¸ºmmæ¯«ç±³ã€‚ç”¨äºè¡¨ç¤ºæ–‡æ¡£ä¸­ä½ç½®çš„è®¡é‡å•å…ƒã€‚å¯ç”¨çš„å€¼æœ‰ä»¥ä¸‹å››ç§:</p><ul><li>pt: ç‚¹</li><li>mm: æ¯«ç±³</li><li>cm: å˜ç±³</li><li>in: è‹±å¯¸</li></ul><p>4ï¼Œ<code>format</code>ç”¨äºè¡¨ç¤ºåˆ›å»ºçš„PDFæ–‡æ¡£çš„çº¸å¼ ç±»å‹ã€‚å¯ç”¨å€¼å¯ä»¥æ˜¯ç”¨äºè¡¨ç¤ºçº¸çš„å­—ç¬¦ä¸²ï¼Œå¦‚"A4"ã€â€œA5â€ã€"Letter"ç­‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FPDF</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-string">"PDF Generation class"</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, orientation=<span class="hljs-string">'P'</span>,unit=<span class="hljs-string">'mm'</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">'A4'</span></span>)</span><br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‡½æ•°">ç›¸å…³å‡½æ•°</h4><p><code>pdf.add_page()</code>ç”¨äºåˆ›å»ºæ–°é¡µã€‚</p><p><code> pdf.image(imagePath,x=0,y=0,w=170,h=297)</code>æ˜¯ç”¨äºæ·»åŠ å›¾åƒï¼Œå…¶ä¸­<code>x</code>å’Œ<code>y</code>è¡¨ç¤ºå›¾ç‰‡æ‰€åœ¨çš„åæ ‡ï¼Œ<code>width</code>å’Œ<code>height</code>è¡¨ç¤ºå›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ã€‚å¦‚æœéœ€è¦å›¾ç‰‡ä¿æŒåŸæ¥çš„å¤§å°ï¼Œåªéœ€è¦å°†<code>width</code>å’Œ<code>height</code>è®¾ç½®æˆ<code>0</code>å³å¯ã€‚çŸ«æ­£åçš„å›¾ç‰‡æ˜¯1700ï¼Œ2981ï¼›A4çº¸çš„å°ºå¯¸æ˜¯210*297ï¼Œæ‰€ä»¥åªèƒ½è®¾ç½®ä¸º297ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œè¯¯å·®è‡³å°‘æœ‰1.1mm</p><p>imageæºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">image</span>(<span class="hljs-params">self, name, x=<span class="hljs-literal">None</span>, y=<span class="hljs-literal">None</span>, w=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>,<span class="hljs-built_in">type</span>=<span class="hljs-string">''</span>,link=<span class="hljs-string">''</span></span>):</span><br>    <span class="hljs-string">"Put an image on the page"</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name <span class="hljs-keyword">in</span> self.images:<br>        <span class="hljs-comment">#First use of image, get info</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">''</span>):<br>            pos=name.rfind(<span class="hljs-string">'.'</span>)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> pos):<br>                self.error(<span class="hljs-string">'image file has no extension and no type was specified: '</span>+name)<br>            <span class="hljs-built_in">type</span>=substr(name,pos+<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">type</span>=<span class="hljs-built_in">type</span>.lower()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'jpg'</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">type</span>==<span class="hljs-string">'jpeg'</span>):<br>            info=self._parsejpg(name)<br>        <span class="hljs-keyword">elif</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'png'</span>):<br>            info=self._parsepng(name)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment">#Allow for additional formats</span><br>            <span class="hljs-comment">#maybe the image is not showing the correct extension,</span><br>            <span class="hljs-comment">#but the header is OK,</span><br>            succeed_parsing = <span class="hljs-literal">False</span><br>            <span class="hljs-comment">#try all the parsing functions</span><br>            parsing_functions = [self._parsejpg,self._parsepng,self._parsegif]<br>            <span class="hljs-keyword">for</span> pf <span class="hljs-keyword">in</span> parsing_functions:<br>                <span class="hljs-keyword">try</span>:<br>                    info = pf(name)<br>                    succeed_parsing = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">except</span>:<br>                    <span class="hljs-keyword">pass</span><br>            <span class="hljs-comment">#last resource</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> succeed_parsing:<br>                mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                    self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>                info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>            mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>            info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>        info[<span class="hljs-string">'i'</span>]=<span class="hljs-built_in">len</span>(self.images)+<span class="hljs-number">1</span><br>        self.images[name]=info<br>    <span class="hljs-keyword">else</span>:<br>        info=self.images[name]<br>    <span class="hljs-comment">#Automatic width and height calculation if needed</span><br>    <span class="hljs-keyword">if</span>(w==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> h==<span class="hljs-number">0</span>):<br>        <span class="hljs-comment">#Put image at 72 dpi</span><br>        w=info[<span class="hljs-string">'w'</span>]/self.k<br>        h=info[<span class="hljs-string">'h'</span>]/self.k<br>    <span class="hljs-keyword">elif</span>(w==<span class="hljs-number">0</span>):<br>        w=h*info[<span class="hljs-string">'w'</span>]/info[<span class="hljs-string">'h'</span>]<br>    <span class="hljs-keyword">elif</span>(h==<span class="hljs-number">0</span>):<br>        h=w*info[<span class="hljs-string">'h'</span>]/info[<span class="hljs-string">'w'</span>]<br>    <span class="hljs-comment"># Flowing mode</span><br>    <span class="hljs-keyword">if</span> y <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> (self.y + h &gt; self.page_break_trigger <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> self.in_footer <span class="hljs-keyword">and</span> self.accept_page_break()):<br>            <span class="hljs-comment">#Automatic page break</span><br>            x = self.x<br>            self.add_page(self.cur_orientation)<br>            self.x = x<br>        y = self.y<br>        self.y += h<br>    <span class="hljs-keyword">if</span> x <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        x = self.x<br>    self._out(sprintf(<span class="hljs-string">'q %.2f 0 0 %.2f %.2f %.2f cm /I%d Do Q'</span>,w*self.k,h*self.k,x*self.k,(self.h-(y+h))*self.k,info[<span class="hljs-string">'i'</span>]))<br>    <span class="hljs-keyword">if</span>(link):<br>        self.link(x,y,w,h,link)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyinstalleræ‰“åŒ…é—®é¢˜</title>
      <link href="/2021/09/29/project_tool/pyinstaller-spec-problem/"/>
      <url>/2021/09/29/project_tool/pyinstaller-spec-problem/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„è¿‡ç¨‹ä¸­çš„å‘ç‚¹ï¼Œè®°å½•ä¸€ä¸‹<br>å‚è€ƒå¤§ä½¬ï¼š<a href="https://blog.csdn.net/u012219045/article/details/115397646">https://blog.csdn.net/u012219045/article/details/115397646</a></p></blockquote><figure class="highlight vhdl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸å°‘é—®é¢˜ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹ã€‚åé¢é‡åˆ°ä¼šç»§ç»­æ›´æ–°ï¼<br><br><span class="hljs-number">1</span>. åœ¨<span class="hljs-number">64</span>ä¸‹å¯è¿è¡Œï¼Œä¸èƒ½åœ¨<span class="hljs-number">32</span>ä½ä¸‹è¿è¡Œ<br>   è§£å†³ï¼šåœ¨<span class="hljs-number">32</span>ä½ç³»ç»Ÿä¸‹æ‰“åŒ…ï¼Œå¯ä»¥å‚è€ƒ https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">115320619</span><br><br><span class="hljs-number">2</span>. RecursionError:maximum recursion depth<br>   è§£å†³ï¼šåœ¨xxx.specæ–‡ä»¶å¼€å§‹å¢åŠ ä¸¤è¡Œï¼š<br><br>    import sys<br>    sys.setrecursionlimit(<span class="hljs-number">5000</span>)<br>å†æ‰§è¡Œæ‰“åŒ…ï¼špyinstaller xxx.spec <br><br><span class="hljs-number">3</span>. UnicodeDecodeError:<span class="hljs-symbol">'utf</span>-<span class="hljs-number">8</span>' codec can<span class="hljs-symbol">'t</span> decode byte <span class="hljs-number">0</span>xce <span class="hljs-keyword">in</span> position <span class="hljs-number">122</span>:invalid continuation byte<br>   è§£å†³ï¼šåœ¨ä½ æ‰“åŒ…çš„å‘½ä»¤è¡Œä¸­å…ˆè¾“å…¥chcp <span class="hljs-number">65001</span> ç„¶åå†è¾“å…¥æ‰“åŒ…å‘½ä»¤ã€‚<br><br><span class="hljs-number">4</span>. ä½¿ç”¨äº†å¤šè¿›ç¨‹ multiprocessing æ¨¡å—<br>   è§£å†³ï¼šå¿…é¡»è°ƒç”¨ multiprocessing.freeze_support()ï¼Œç›´æ¥åœ¨â€œ<span class="hljs-keyword">if</span> __name__ == '__main__'â€ä¹‹åè°ƒç”¨<br><br><span class="hljs-number">5</span>. æ‰“åŒ…PyQt5é—ªé€€<br>   åŸå› ï¼šå¯èƒ½æœªæ‰¾åˆ°æŸä¸ªæ–‡ä»¶<br>   è§£å†³åŠæ³•ï¼š<br>        <span class="hljs-number">1</span>. æŠŠéœ€è¦è¯»å–çš„æ–‡ä»¶åŠå…¶å…¶ä»–èµ„æº éƒ½æ”¾åˆ°distä¸­ã€‚<br>        <span class="hljs-number">2</span>. æ‰“åŒ…æˆexeçš„è¯ï¼Œéœ€ä½¿ç”¨ <span class="hljs-comment">--add-data é™„åŠ ã€‚å¯å‚è€ƒï¼šhttps://blog.csdn.net/u012219045/article/details/114841287</span><br><br><span class="hljs-number">6</span>. <span class="hljs-literal">WARNING</span>:<span class="hljs-keyword">file</span> already exists but should <span class="hljs-keyword">not</span>ï¼š_C.cp37-win_amd64<br>   è§£å†³ï¼šæŠ¥é”™å†…å®¹å¯èƒ½ä¸åŒï¼Œä½†éƒ½æ˜¯xxxå·²å­˜åœ¨ï¼Œé—®é¢˜çš„åŸå› æ˜¯pyinstalleræ‰“åŒ…æ—¶å¤šæ‰“äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¼šæŠ¥å·²ç»å­˜åœ¨äº†ã€‚<br>   è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå¤šä½™çš„å»æ‰ã€‚åœ¨è‡ªåŠ¨ç”Ÿæˆçš„xxx.specä¸­ï¼Œåœ¨ a å’Œ PYZ ä¸­é—´æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå»æ‰å¤šä½™ä¾èµ–é¡¹<br><br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>        <span class="hljs-keyword">if</span> '_C.cp37-win_amd64' <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>            a.datas.remove(d)<br>            break<br><span class="hljs-number">7</span>. Hidden import <span class="hljs-string">"xxx"</span>  <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.markers"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.py2_warn"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"MySQLdb"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"sqlalchemy.sql.functions.func"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"mx.DateTime"</span> <span class="hljs-keyword">not</span> found!<br>    è§£å†³ï¼š hiddenimports=[<span class="hljs-symbol">'pkg_resources</span>.markers', <span class="hljs-symbol">'pkg_resources</span>.py2_warn', '...']<br><br><span class="hljs-number">8</span>.  æ‰“åŒ…çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤š<span class="hljs-literal">warning</span>ï¼šlib <span class="hljs-keyword">not</span> found...dll, åŸå› æ˜¯pyinstaller æ²¡æœ‰åŠæ³•è¯†åˆ«åˆ°è¿™äº›dll<br>    è§£å†³åŠæ³•ï¼šcopy <span class="hljs-literal">warning</span>ä¸­ä¸€äº›dllæ–‡ä»¶çš„åå­—ï¼Œå†ç”µè„‘ä¸­æœç´¢åˆ°ä»–ä»¬çš„è·¯å¾„ï¼æ·»åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œé¢<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90rtl.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgc14.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:torch_python.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\lib\site-packages\torch\_C.cp37-win_amd64.pyd<br><br><span class="hljs-number">9</span>. åˆ‡æ¢äº†è™šæ‹Ÿç¯å¢ƒæ‰“åŒ…ï¼ŒæŠ¥DLLæ— æ³•å¯¼å…¥ï¼Œå®é™…æ˜¯æ‰“åŒ…æ—¶è¿˜åœ¨ä½¿ç”¨æ—§çš„è™šæ‹Ÿç¯å¢ƒ<br>    è§£å†³ï¼š æ‰“åŒ…æ—¶æŒ‡å®šè™šæ‹Ÿç¯å¢ƒï¼š-pã€‚å¯å‚è€ƒï¼š https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">113612475</span><br><br><span class="hljs-number">10</span>. DecodeEncodeError<br>    è§£å†³ï¼š æ£€æŸ¥æ‰§è¡Œè·¯å¾„ä¸­æ˜¯å¦æœ‰ä¸­æ–‡ï¼ŒéAcsiiç ï¼Œæ¢æˆè‹±æ–‡è·¯å¾„ã€‚Pythonæ–‡ä»¶å¼€å¤´åŠ  #-*-coding:utf-<span class="hljs-number">8</span>-*-<br><br><span class="hljs-number">11</span>. Pyqt5 æ‰“åŒ…åä¼šå‡ºç°é”™è¯¯:<span class="hljs-string">"QThread:Destroyed while thread is still running"</span><br>    è§£å†³åŠæ³•<span class="hljs-number">1</span>ï¼šå¯åŠ¨QThreadä½¿ç”¨äº†start(), æ”¹ä¸ºrun() å¯è§£å†³ï¼Œä½†è¿™æ ·ä¼šå¡ä¸»UIçº¿ç¨‹<br>    è§£å†³åŠæ³•<span class="hljs-number">2</span>ï¼šä¾ç„¶ä½¿ç”¨start()ï¼Œå†è¿½åŠ ä¸€å¥ exec()ã€‚æ¨èè¿™æ ·ï¼<br><br><span class="hljs-number">12</span>. No module named <span class="hljs-symbol">'sklearn</span>.xx'<br>    <span class="hljs-number">43852</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_validation"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43854</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_tools"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43866</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.lgamma"</span> <span class="hljs-keyword">not</span> found!<br>    No module named <span class="hljs-symbol">'sklearn</span>.utils._cython_blas'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree._utils'<br>    è§£å†³ï¼šhiddenimports=[<span class="hljs-symbol">'sklearn</span>', <span class="hljs-symbol">'sklearn</span>.tree', <span class="hljs-symbol">'sklearn</span>.tree._utils', <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree',<br>                       <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs', <span class="hljs-symbol">'sklearn</span>.utils._cython_blas',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_validation',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_tools', <span class="hljs-symbol">'sklearn</span>.utils.lgamma']<br><span class="hljs-number">13</span>. No module named <span class="hljs-symbol">'scipy</span>.special.cython_special'<br>   è§£å†³: ä½¿ç”¨scipy==<span class="hljs-number">1.4</span>.<span class="hljs-number">1</span> æˆ–è€… <span class="hljs-comment">--hidden-import scipy.special.cython_special</span><br><br><span class="hljs-number">14</span>. No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory: <span class="hljs-symbol">'xxx\\</span>librosa\\util\\example_data\\registry.txt'<br>   è§£å†³: ä½¿ç”¨<span class="hljs-comment">--add-dataæˆ–è€…ç›´æ¥æ‹·è´librosaä¸‹çš„å¯¹åº”æ–‡ä»¶åˆ°distã€‚</span><br>   <br><span class="hljs-number">15</span>. fatal <span class="hljs-literal">error</span>:zmq.h:No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory<br>    è§£å†³: sudo apt install libzmq3-dev<br><br><span class="hljs-number">16</span>. <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_detectron_ops_gpu.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorch==<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span> torchvision==<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> cudatoolkit=<span class="hljs-number">10.1</span>ï¼Œåæ¥æ›´æ¢é«˜ç‰ˆæœ¬torch1.<span class="hljs-number">7.0</span>è§£å†³ï¼<br>    # pip install torch===<span class="hljs-number">1.7</span>.<span class="hljs-number">0</span>+cu110 torchvision===<span class="hljs-number">0.8</span>.<span class="hljs-number">1</span>+cu110 torchaudio===<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> -f https://download.pytorch.org/whl/torch_stable.html<br><br><span class="hljs-number">17</span>. unhandled exception <br>    <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_nvrtc.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorché™ç‰ˆæœ¬åˆ°<span class="hljs-number">1.8</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨specæ–‡ä»¶æ‰“åŒ…</title>
      <link href="/2021/09/28/project_tool/spec/"/>
      <url>/2021/09/28/project_tool/spec/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pyinstalleræ‰“åŒ…æ–¹å¼ä¸€èˆ¬å¯ä»¥åˆ†ä¸º<strong>ç›´æ¥è¾“å…¥æŒ‡ä»¤</strong>å’Œ<strong>åˆ©ç”¨specæ–‡ä»¶</strong>è¿›è¡Œæ‰“åŒ…ä¸¤ç§æ–¹å¼ï¼Œç›´æ¥è¾“å…¥æŒ‡ä»¤å°±æ˜¯æ ¹æ®æŒ‡ä»¤ç”Ÿæˆspecæ–‡ä»¶ï¼Œå†æ ¹æ®specæ–‡ä»¶çš„å†…å®¹è¿›è¡Œæ‰“åŒ…æ“ä½œï¼Œå› æ­¤specæ–‡ä»¶å°±æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨æ­¤å¯¹å…¶å†…å®¹çš„ç›¸å…³é…ç½®è¿›è¡Œå½’çº³ã€‚</p></blockquote><h3 id="specæ–‡ä»¶å‚æ•°">specæ–‡ä»¶å‚æ•°</h3><p>specæ–‡ä»¶å‚æ•°ï¼šaï¼Œpyzï¼Œexeï¼Œcollï¼Œblock_cipher;</p><table><thead><tr><th style="text-align:center">å˜é‡</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:left">Analysisç±»çš„å®ä¾‹,è¦æ±‚ä¼ å…¥å„ç§è„šæœ¬ç”¨äºåˆ†æç¨‹åºçš„å¯¼å…¥å’Œä¾èµ–ï¼Œaä¸­çš„å†…å®¹ä¸»è¦åŒ…æ‹¬å››éƒ¨åˆ†ï¼šscriptsï¼šå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„pythonè„šæœ¬ï¼›pureï¼Œç¨‹åºä»£ç æ–‡ä»¶ä¸­çš„çº¯pythonæ¨¡å—ï¼›binariesï¼šç¨‹åºä»£ç æ–‡ä»¶ä¸­éœ€è¦çš„épythonæ¨¡å—ï¼ŒåŒ…æ‹¬add-binaryå‚æ•°æŒ‡å®šçš„å†…å®¹ï¼›datasï¼šéäºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…æ‹¬add-dataå‚æ•°æŒ‡å®šçš„å†…å®¹</td></tr><tr><td style="text-align:center">pyz</td><td style="text-align:left">pyzçš„å®ä¾‹ï¼Œæ˜¯ä¸€ä¸ª.pyzæ–‡ä»¶ï¼ŒåŒ…å«äº†æ‰€æœ‰pureçš„æ‰€æœ‰pythonæ¨¡å—</td></tr><tr><td style="text-align:center">exe</td><td style="text-align:left">exeç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥å¤„ç†Analysiså’ŒPYZçš„ç»“æœã€‚ä¹Ÿæ˜¯ç”¨æ¥ç”Ÿæˆæœ€åçš„exeå¯æ‰§è¡Œç¨‹åº</td></tr><tr><td style="text-align:center">coll</td><td style="text-align:left">collectç±»çš„å®ä¾‹ï¼Œç”¨äºåˆ›å»ºè¾“å‡ºç›®å½•ï¼Œåœ¨-Fæ¨¡å¼ï¼ˆå•ä¸€exeç¨‹åºï¼‰ä¸‹ï¼Œæ˜¯æ²¡æœ‰collectå®ä¾‹çš„ï¼Œå¹¶ä¸”æ‰€æœ‰è„šæœ¬ï¼Œæ¨¡å—å’ŒäºŒè¿›åˆ¶æ–‡ä»¶éƒ½åŒ…å«åœ¨æœ€ç»ˆç”Ÿæˆçš„exeæ–‡ä»¶ä¸­</td></tr><tr><td style="text-align:center">block_cipher</td><td style="text-align:left">åŠ å¯†å¯†é’¥</td></tr></tbody></table><p>ä»¥ä¸Šå†…å®¹ä¸­ä¿®æ”¹æ¯”è¾ƒå¤šçš„æ˜¯a,exeçš„å†…å®¹ï¼Œcollå’ŒpyzåŸºæœ¬ä¸Šæ²¡æœ‰é‡åˆ°éœ€è¦ä¿®æ”¹çš„æƒ…å†µã€‚</p><h3 id="å‚æ•°aï¼Œexeçš„è¯´æ˜">å‚æ•°aï¼Œexeçš„è¯´æ˜</h3><p>ä¸‹é¢å¯¹aå’Œexeå‚æ•°å†…å®¹è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼š</p><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">å­å‚æ•°</th><th style="text-align:left">å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">scripts</td><td style="text-align:left">ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»–æ˜¯ä¸€ä¸ªè„šæœ¬åˆ—è¡¨ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªpyè„šæœ¬ï¼Œæ•ˆæœä¸å‘½ä»¤è¡Œä¸­æŒ‡å®šå¤šä¸ªpyæ–‡ä»¶ç›¸åŒï¼Œæ¯”å¦‚è¯´â€œpyinstaller <a href="http://XXX1.py">XXX1.py</a> <a href="http://XXX2.py">XXX2.py</a>â€ï¼Œpyinstallerä¼šä¾æ¬¡åˆ†ææ‰§è¡Œï¼Œå¹¶ä¸”æŠŠç¬¬ä¸€ä¸ªpyæ–‡ä»¶çš„åç§°ä½œä¸ºspecå’Œdistä¸‹çš„æ–‡ä»¶å¤¹åŠç¨‹åºåç§°</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">pathex</td><td style="text-align:left">é»˜è®¤æœ‰ä¸€ä¸ªspecç›®å½•ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€äº›æ¨¡å—ä¸åœ¨è¯¥é¡¹ç›®è·¯å¾„ä¸‹çš„æ—¶å€™ï¼Œå¯ä»¥å°†ä½¿ç”¨åˆ°çš„æ¨¡å—è·¯å¾„æ·»åŠ åˆ°pathexå˜é‡ä¸­ï¼Œç›¸å½“äºâ€œ-p DIR/-paths DIRâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">datas</td><td style="text-align:left">ä½œç”¨æ˜¯å°†æœ¬åœ°æ–‡ä»¶æ‰“åŒ…æ—¶æ‹·è´åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚datasæ˜¯ä¸€ä¸ªå…ƒç´ ä¸ºå…ƒç»„çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œéƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•°æ®æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œå…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºè¿è¡Œæ—¶è¿™äº›æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼šdatas = [(â€˜./src/a.txtâ€™,â€˜./dstâ€™)]è¡¨ç¤ºæ‰“åŒ…æ—¶å°†â€™./src/a.txtâ€™æ–‡ä»¶æ·»åŠ åˆ°ç›¸å¯¹exeç›®å½•å…ˆçš„distç›®å½•ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦datas = [(â€˜./myfile/*.mp3â€™,â€˜sfxâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„æ‰€æœ‰mp3æ–‡ä»¶éƒ½copyåˆ°sfxæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼šdatas = [(â€˜./myfile/dataâ€™,â€˜dataâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„dataæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½copyåˆ°dataæ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒå‘½ä»¤â€œ-add-dataâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">binaries</td><td style="text-align:left">æ·»åŠ äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®šä¹‰æ–¹å¼ä¸dataså‚æ•°ä¸€æ ·ï¼ŒåŒå‘½ä»¤â€œ-add-binaryâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hiddenimports</td><td style="text-align:left">æŒ‡å®šè„šæœ¬ä¸­éœ€è¦éšå¼å¯¼å…¥çš„æ¨¡å—ï¼Œæ¯”å¦‚åœ¨importã€imp.find_module()ã€execã€evalç­‰è¯­å¥ä¸­å¯¼å…¥æ¨¡å—ï¼Œè¿™äº›æ¨¡å—PyInstalleræ˜¯æ‰¾ä¸åˆ°çš„ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“hidden-import MODULENAME/â€“hiddenimport MODULENAMEâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hookspath</td><td style="text-align:left">æŒ‡å®šé¢å¤–çš„hookæ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯pyæ–‡ä»¶ï¼‰çš„æŸ¥æ‰¾è·¯å¾„ï¼Œè¿™äº›æ–‡ä»¶çš„ä½œç”¨æ˜¯åœ¨pyinstallerè¿è¡Œæ—¶æ”¹å˜ä¸€äº›pythonæˆ–è€…å…¶ä»–åº“åŸæœ‰çš„å‡½æ•°æˆ–è€…å˜é‡çš„æ‰§è¡Œé€»è¾‘ï¼ˆå¹¶ä¸ä¼šæ”¹å˜è¿™äº›åº“æœ¬èº«çš„ä»£ç ï¼‰ï¼Œä»¥ä¾¿èƒ½é¡ºåˆ©çš„æ‰“åŒ…å®Œæˆï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“additional-hooks-dir HOOKSPATHâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">runtime_hooks</td><td style="text-align:left">æŒ‡å®šè‡ªå®šä¹‰çš„è¿è¡Œhookæ–‡ä»¶è·¯å¾„ï¼ˆå¯ä»¥æ—¶pyæ–‡ä»¶ï¼‰ï¼Œåœ¨æ‰“åŒ…å¥½çš„exeç¨‹åºä¸­ï¼Œè¿è¡Œè¿™ä¸ªexeç¨‹åºæ—¶ï¼ŒæŒ‡å®šçš„hookæ–‡ä»¶ä¼šåœ¨æ‰€æœ‰ä»£ç å’Œæ¨¡å—ä¹‹å‰è¿è¡Œï¼ŒåŒ…æ‹¬mainæ–‡ä»¶ï¼Œä»¥æ»¡è¶³ä¸€äº›è¿è¡Œç¯å¢ƒçš„ç‰¹æ®Šè¦æ±‚ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼ŒåŒå‘½ä»¤â€œ-runtime-hook RUNTIME_HOOKSâ€.</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">excludes</td><td style="text-align:left">æŒ‡å®šå¯ä»¥è¢«å¿½ç•¥çš„å¯é€‰çš„æ¨¡å—æˆ–åŒ…ï¼Œå› ä¸ºæŸäº›æ¨¡å—åªæ˜¯PyInstalleræ ¹æ®è‡ªèº«çš„é€»è¾‘å»æŸ¥æ‰¾çš„ï¼Œè¿™äº›æ¨¡å—å¯¹äºexeç¨‹åºæœ¬èº«å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯åœ¨æ—¥å¿—ä¸­è¿˜æ˜¯ä¼šæç¤ºâ€œmodule not foundâ€ï¼Œè¿™ç§æ—¥å¿—å¯ä»¥ä¸ç”¨ç®¡ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªå‚æ•°é€‰é¡¹æ¥æŒ‡å®šä¸ç”¨å¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“exclude-module EXCLUDESâ€ã€‚</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">console</td><td style="text-align:left">è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ŒåŒå‘½ä»¤ â€œ-W/-câ€</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">icon</td><td style="text-align:left">è®¾ç½®ç¨‹åºå›¾æ ‡ï¼Œé»˜è®¤specæ˜¯æ²¡æœ‰å›¾æ ‡çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œå‚æ•°å€¼å°±æ˜¯å›¾ç‰‡è·¯å¾„çš„å­—ç¬¦ä¸²ï¼ŒåŒå‘½ä»¤â€œ-i/-iconâ€</td></tr></tbody></table><h3 id="æˆ‘çš„è®°å½•">æˆ‘çš„è®°å½•</h3><p>åœ¨æ­¤è®°å½•ä¸€ä¸‹detectuiçš„specæ–‡ä»¶å‘¢~~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- mode: python ; coding: utf-8 -*-</span><br><br><br>block_cipher = <span class="hljs-literal">None</span><br><br><br>a = Analysis([<span class="hljs-string">'detectui.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\torch_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\autoanchor.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\datasets.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\general.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\google_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\metrics.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\plots.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\common.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\experimental.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\yolo.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\detectInfo.py'</span>,<br>              ],<br>             pathex=[<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\scipy\\.libs'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\torch\\lib'</span>,<br>              ],<br>             binaries=[],<br>             datas=[<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\weights\\best.pt'</span>,<span class="hljs-string">'.\\weights'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\*.yaml'</span>,<span class="hljs-string">'.\\models'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\hub\\*.yaml'</span>,<span class="hljs-string">'.\\models\\hub'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\icon.jpg'</span>,<span class="hljs-string">'.'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__pycache__\\torch_utils.pyc'</span>,<span class="hljs-string">'.\\utils'</span>),<br>             ],<br>             hiddenimports=[<span class="hljs-string">'pkg_resources.py2_warn'</span>,<span class="hljs-string">'pkg_resources.markers'</span>],<br>             hookspath=[],<br>             hooksconfig={},<br>             runtime_hooks=[],<br>             excludes=[],<br>             win_no_prefer_redirects=<span class="hljs-literal">False</span>,<br>             win_private_assemblies=<span class="hljs-literal">False</span>,<br>             cipher=block_cipher,<br>             noarchive=<span class="hljs-literal">False</span>)<br><span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">'_C.cp38-win_amd64.pyd'</span> <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>    a.datas.remove(d)<br>    <span class="hljs-keyword">break</span><br>pyz = PYZ(a.pure, a.zipped_data,<br>             cipher=block_cipher)<br><br>exe = EXE(pyz,<br>          a.scripts,<br>          [],<br>          exclude_binaries=<span class="hljs-literal">True</span>,<br>          name=<span class="hljs-string">'detectui'</span>,<br>          debug=<span class="hljs-literal">False</span>,<br>          bootloader_ignore_signals=<span class="hljs-literal">False</span>,<br>          strip=<span class="hljs-literal">False</span>,<br>          upx=<span class="hljs-literal">True</span>,<br>          console=<span class="hljs-literal">False</span>,<br>          icon=<span class="hljs-string">'icon.ico'</span>)<br>coll = COLLECT(exe,<br>               a.binaries,<br>               a.zipfiles,<br>               a.datas,<br>               strip=<span class="hljs-literal">False</span>,<br>               upx=<span class="hljs-literal">True</span>,<br>               name=<span class="hljs-string">'detectui'</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyinstalleræ‰“åŒ…exe</title>
      <link href="/2021/09/26/project_tool/pyinstaller/"/>
      <url>/2021/09/26/project_tool/pyinstaller/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pyinstallerçš„ä½œç”¨æ˜¯å¯ä»¥å°†pythonåº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›¸å¯¹ä¸åŒç±»å·¥å…·è€Œè¨€ï¼Œå…¶ä¼˜åŠ¿åœ¨äºå¯ä»¥å’Œpythoné…åˆä½¿ç”¨ï¼Œæ„å»ºè¾ƒå°çš„å¯æ‰§è¡Œæ–‡ä»¶å¹¶ä¸”å®Œå…¨å¤šå¹³å°ï¼Œå®Œå…¨å…¼å®¹æ€§ã€‚</p></blockquote><blockquote><p>pyinstallerçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å…¼å®¹ï¼Œå› æ­¤åœ¨ä½¿ç”¨pyinstallerä¼šå°†æ‰€æœ‰çš„å¤–éƒ¨åŒ…ç»§æ‰¿åœ¨pyinstalleræœ¬èº«ä¸­ã€‚</p></blockquote><h2 id="å®‰è£…">å®‰è£…</h2><p>ç›´æ¥ä»pypiå®‰è£…pyinstallerï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pyinstaller<br></code></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨è‡ªå·±çš„ç¨‹åºç›®å½•ä¸­è¿è¡Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller yourprogram.py<br></code></pre></td></tr></tbody></table></figure><p>å°±ä¼šç”Ÿæˆdistæ–‡ä»¶å¤¹ï¼Œåœ¨distæ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„exeæ–‡ä»¶ã€‚</p><h2 id="å‘½ä»¤é€‰é¡¹è¯´æ˜">å‘½ä»¤é€‰é¡¹è¯´æ˜</h2><p>PyInstaller æ”¯æŒå¦‚è¡¨æ‰€ç¤ºçš„å¸¸ç”¨é€‰é¡¹ã€‚</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-hï¼Œâ€“help</td><td style="text-align:center">æŸ¥çœ‹è¯¥æ¨¡å—çš„å¸®åŠ©ä¿¡æ¯</td></tr><tr><td style="text-align:center">-Fï¼Œ-onefile</td><td style="text-align:center">äº§ç”Ÿå•ä¸ªçš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-Dï¼Œâ€“onedir</td><td style="text-align:center">äº§ç”Ÿä¸€ä¸ªç›®å½•ï¼ˆåŒ…å«å¤šä¸ªæ–‡ä»¶ï¼‰ä½œä¸ºå¯æ‰§è¡Œç¨‹åºï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td style="text-align:center">-aï¼Œâ€“ascii</td><td style="text-align:center">ä¸åŒ…å« Unicode å­—ç¬¦é›†æ”¯æŒ</td></tr><tr><td style="text-align:center">-dï¼Œâ€“debug</td><td style="text-align:center">äº§ç”Ÿ debug ç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-wï¼Œâ€“windowedï¼Œâ€“noconsolc</td><td style="text-align:center">æŒ‡å®šç¨‹åºè¿è¡Œæ—¶ä¸æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-cï¼Œâ€“nowindowedï¼Œâ€“console</td><td style="text-align:center">æŒ‡å®šä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿è¡Œç¨‹åºï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-o DIRï¼Œâ€“out=DIR</td><td style="text-align:center">æŒ‡å®š spec æ–‡ä»¶çš„ç”Ÿæˆç›®å½•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•æ¥ç”Ÿæˆ spec æ–‡ä»¶</td></tr><tr><td style="text-align:center">-p DIRï¼Œâ€“path=DIR</td><td style="text-align:center">è®¾ç½® Python å¯¼å…¥æ¨¡å—çš„è·¯å¾„ï¼ˆå’Œè®¾ç½® PYTHONPATH ç¯å¢ƒå˜é‡çš„ä½œç”¨ç›¸ä¼¼ï¼‰ã€‚ä¹Ÿå¯ä½¿ç”¨è·¯å¾„åˆ†éš”ç¬¦ï¼ˆWindows ä½¿ç”¨åˆ†å·ï¼ŒLinux ä½¿ç”¨å†’å·ï¼‰æ¥åˆ†éš”å¤šä¸ªè·¯å¾„</td></tr><tr><td style="text-align:center">-n NAMEï¼Œâ€“name=NAME</td><td style="text-align:center">æŒ‡å®šé¡¹ç›®ï¼ˆäº§ç”Ÿçš„ specï¼‰åå­—ã€‚å¦‚æœçœç•¥è¯¥é€‰é¡¹ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªè„šæœ¬çš„ä¸»æ–‡ä»¶åå°†ä½œä¸º spec çš„åå­—</td></tr></tbody></table><p>åœ¨æ­¤è¡¨åˆ—å‡ºçš„åªæ˜¯ PyInstaller æ¨¡å—æ‰€æ”¯æŒçš„å¸¸ç”¨é€‰é¡¹ï¼Œå¦‚æœéœ€è¦äº†è§£ PyInstaller é€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™å¯é€šè¿‡ pyinstaller -h æˆ–è€…â€“helpæŸ¥çœ‹å¸®åŠ©</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller --<span class="hljs-built_in">help</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨pyinstaller">ä½¿ç”¨pyinstaller</h2><ul><li><p>æ‰“åŒ…æˆä¸€ä¸ªå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller -F &lt;options&gt; test.py<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶å¤¹</p><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">pyinstaller --onefile/-D <span class="hljs-symbol">&lt;options&gt;</span> test.<span class="hljs-keyword">py</span> ï¼ˆé»˜è®¤ï¼‰<br></code></pre></td></tr></tbody></table></figure></li></ul><p>é»˜è®¤æƒ…å†µä¸‹æ‰“åŒ…ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆdistå’Œbuildæ–‡ä»¶å¤¹ä»¥åŠ.specæ–‡ä»¶ï¼Œdistä¸­å³æ‰“åŒ…å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼Œbuildæ–‡ä»¶å¤¹ä¸‹ä¸ºæ„å»ºè¿‡ç¨‹ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œ.specä¸ºæ‰“åŒ…çš„é…ç½®æ–‡ä»¶ã€‚</p><h3 id="å„è‡ªçš„ä¼˜ç¼ºç‚¹">å„è‡ªçš„ä¼˜ç¼ºç‚¹</h3><ul><li><p>å¯åŠ¨æ—¶é—´</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶æ¯”æ–‡ä»¶å¤¹çš„å¯åŠ¨æ—¶é—´è¦é•¿å¾ˆå¤šï¼Œå› ä¸ºå½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦è§£å‹ç¨‹åºçš„ç¬¬ä¸‰æ–¹ä¾èµ–æ–‡ä»¶åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œä¼šè€—è´¹ä¸€å®šçš„ä¸å¿…è¦æ—¶é—´ã€‚</p></li><li><p>æ–‡ä»¶ç»“æ„</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å’Œå·¥ç¨‹ç›®å½•æ˜¯ä¸€æ ·çš„ï¼Œå…¶è·¯å¾„ä¸å·¥ç¨‹ç›®å½•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”Ÿæˆæ–‡ä»¶å¤¹å°±ä¸ä¸€æ ·äº†ï¼Œè‹¥ç¨‹åºä¸­åŒ…å«ç›¸å¯¹è·¯å¾„ï¼Œè¿™ä¸ªç›¸å¯¹è·¯å¾„æ˜¯åŸºäºè¯¥æ–‡ä»¶å¤¹ç›®å½•çš„ã€‚</p></li></ul><h2 id="specæ–‡ä»¶">specæ–‡ä»¶</h2><p>.specæ–‡ä»¶ç±»ä¼¼äºcmakeçš„.makefileæ–‡ä»¶ï¼Œéƒ½æ˜¯ç”¨äº<code>æ§åˆ¶ç¼–è¯‘æ„å»ºè¿‡ç¨‹</code>çš„é…ç½®æ–‡ä»¶ã€‚æ­£å¸¸ä½¿ç”¨å®é™…ä¸Šä¸éœ€è¦ç®¡specæ–‡ä»¶çš„ï¼Œä½†æ˜¯ä¸‹é¢å‡ ç§æƒ…å†µéœ€è¦ä¿®æ”¹specæ–‡ä»¶ï¼š</p><ul><li><p>éœ€è¦æ‰“åŒ…èµ„æºæ–‡ä»¶</p></li><li><p>éœ€è¦includeä¸€äº›pyinstallerä¸çŸ¥é“çš„run-timeåº“</p></li><li><p>ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ run-timeé€‰é¡¹</p></li><li><p>å¤šç¨‹åºæ‰“åŒ…</p></li></ul><p>åé¢å¯ä»¥ç›´æ¥é€šè¿‡.specæ–‡ä»¶æ¥æ‰“åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller &lt;options&gt; test.spec<br></code></pre></td></tr></tbody></table></figure><p>å½“é€šè¿‡specæ–‡ä»¶æ¥ç”Ÿæˆappæ–‡ä»¶æ—¶åªæœ‰ä¸‹é¢å‚æ•°æ˜¯æœ‰ç”¨çš„ï¼š</p><ul><li><code>-upx-dir</code>  Path to UPX utility (default: search the execution path)</li><li><code>-distpath</code>   Where to put the bundled app (default: .\dist)</li><li><code>-y â€“noconfirm</code>  Replace output directory (default: SPECPATH\dist\SPECNAME) without asking for confirmation</li><li><code>-a â€“ascii</code> Do not include unicode encoding support (default: included if available)</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer30 åŒ…å«minå‡½æ•°çš„æ ˆ</title>
      <link href="/2021/09/17/leetcode/leetcode-offer30/"/>
      <url>/2021/09/17/leetcode/leetcode-offer30/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŒ…å«minå‡½æ•°çš„æ ˆ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight pf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pf">M<span class="hljs-keyword">in</span>Stack <span class="hljs-keyword">min</span>Stack = new M<span class="hljs-keyword">in</span>Stack();<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">2</span>);<br><span class="hljs-keyword">min</span>Stack.push(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">3</span>);<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">3</span>.<br><span class="hljs-keyword">min</span>Stack.pop();<br><span class="hljs-keyword">min</span>Stack.top();      --&gt; è¿”å› <span class="hljs-number">0</span>.<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">2</span>.<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>å„å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ 20000 æ¬¡</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>emmè¿™æ ·å­ä½¿ç”¨minå‡½æ•°ï¼Œä¸å¤ªç§‘å­¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.stack = []<br>        self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        <span class="hljs-keyword">if</span>(self.minnum&gt;x): self.minnum = x<br>        self.stack.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        item = self.top()<br>        self.stack.pop()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(self.stack) == <span class="hljs-number">0</span>): <br>            self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br>        <span class="hljs-keyword">elif</span>(item==self.minnum):<br>            self.minnum = <span class="hljs-built_in">min</span>(self.stack)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.stack[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.minnum<br><br><span class="hljs-comment"># Your MinStack object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = MinStack()</span><br><span class="hljs-comment"># obj.push(x)</span><br><span class="hljs-comment"># obj.pop()</span><br><span class="hljs-comment"># param_3 = obj.top()</span><br><span class="hljs-comment"># param_4 = obj.min()</span><br></code></pre></td></tr></tbody></table></figure><p>-å®é™…ä¸Šåº”è¯¥åˆ›å»ºä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªä½œä¸ºæ™®é€šçš„æ ˆAè®°å½•æ•°æ®ï¼Œå¦ä¸€ä¸ªBç”¨äºè¾…åŠ©æ ˆminçš„å®ç°ï¼›ä½¿å¾—Aä¸­çš„æœ€å°å…ƒç´ å§‹ç»ˆå¯¹åº”äºBçš„æ ˆé¡¶å…ƒç´ ã€‚<strong>æ ˆBçš„ä¸»è¦ç›®çš„æ˜¯è®°å½•æœ€å°å€¼ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯éœ€è¦æ‰€æœ‰å®Œæ•´çš„æ•°æ®ã€‚</strong></p><ul><li>åœ¨è°ƒç”¨pushå‡½æ•°æ—¶ï¼Œæ³¨æ„è¦ç»´æŠ¤å¥½æ ˆBï¼Œä¹Ÿå°±æ˜¯è¯´åˆ¤æ–­xæ—¶å°äºç­‰äºæ ˆé¡¶å…ƒç´ ï¼Œæ‰å‹å…¥æ ˆBï¼›</li><li>åœ¨è°ƒç”¨popå‡½æ•°æ—¶ï¼Œè¦ä¿æŒAï¼ŒBå…ƒç´ çš„ä¸€è‡´æ€§ï¼Œåœ¨Aä¸­popçš„å…ƒç´ æ˜¯Bçš„æ ˆé¡¶å…ƒç´ å°±è¦åŒæ­¥åˆ é™¤æ‰æ ˆBçš„æ ˆé¡¶å…ƒç´ ï¼›</li></ul><p>è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯åœ¨åˆ é™¤æ‰Aå’ŒBçš„æ ˆé¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰ä¹‹åï¼ŒBçš„æ ˆé¡¶å…ƒç´ ä¾ç„¶è¿˜æ˜¯Açš„æœ€å°å€¼ã€‚</p><p>å—¯å‰å®³~ o(<em>ï¿£â–½ï¿£</em>)o</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.A,self.B = [],[]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>self.A.append(x)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.B <span class="hljs-keyword">or</span> self.B[-<span class="hljs-number">1</span>]&gt;=x: <span class="hljs-comment">#æ³¨æ„æ˜¯å¤§äºç­‰äºï¼Œå› ä¸ºéœ€è¦è®°å½•é¿å…åç»­å¼¹å‡ºå¯¼è‡´å…ƒç´ ä¸åŒæ­¥</span><br>            self.B.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br><span class="hljs-keyword">if</span>(self.A.pop() == self.B[-<span class="hljs-number">1</span>]): <span class="hljs-comment">#å¦‚æœæ˜¯ç›¸åŒå…ƒç´ å°±æ³¨æ„åŒæ­¥åˆ é™¤</span><br>            self.B.pop()<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.A[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.B[-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer35 å¤æ‚é“¾è¡¨çš„å¤åˆ¶</title>
      <link href="/2021/09/16/leetcode/leetcode-offer35/"/>
      <url>/2021/09/16/leetcode/leetcode-offer35/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤æ‚é“¾è¡¨çš„å¤åˆ¶</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç° copyRandomList å‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª random æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[1,1],[2,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,1],[2,1]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br>è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-10000 &lt;= Node.val &lt;= 10000</li><li>Node.random ä¸ºç©ºï¼ˆnullï¼‰æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚</li><li>èŠ‚ç‚¹æ•°ç›®ä¸è¶…è¿‡ 1000 ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é€šå¸¸æ™®é€šçš„é“¾è¡¨å¤åˆ¶åªéœ€è¦éå†é“¾è¡¨ï¼Œæ¯è½®æ–°å»ºç«‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æ·»åŠ å‰é©±èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘å³å¯ï¼Œä½†æ˜¯æœ¬é¢˜çš„èŠ‚ç‚¹æ–°å¢äº†randomæŒ‡é’ˆï¼Œå› æ­¤éœ€è¦å¤„ç†randomæŒ‡é’ˆã€‚</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>å“ˆå¸Œè¡¨</code></li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>æ‹¼æ¥+æ‹†åˆ†</code></li></ul><h4 id="å“ˆå¸Œè¡¨">å“ˆå¸Œè¡¨</h4><p>å…ˆæ„å»ºåŸé“¾è¡¨èŠ‚ç‚¹å’Œæ–°é“¾è¡¨èŠ‚ç‚¹çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨èŠ‚ç‚¹çš„nextå’Œrandomçš„å¼•ç”¨æŒ‡å‘ã€‚</p><p>è¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­—å…¸ï¼Œé”®å€¼å¯¹å°±æ˜¯ï¼ˆåŸèŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹ï¼‰ï¼Œç„¶åç›´æ¥åœ¨å­—å…¸ä¸­æ„å»ºï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>        dic = {}<br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur] = Node(cur.val)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur].<span class="hljs-built_in">next</span> = dic.get(cur.<span class="hljs-built_in">next</span>)<br>            dic[cur].random = dic.get(cur.random)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> dic[head]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>dict.get(key,default=None) keyæ˜¯å­—å…¸ä¸­è¦æŸ¥æ‰¾çš„é”®ï¼Œdefaultæ˜¯æŒ‡å®šé”®å€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›é»˜è®¤å€¼ï¼›</p></blockquote><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><h4 id="æ‹¼æ¥-æ‹†åˆ†">æ‹¼æ¥+æ‹†åˆ†</h4><p>æ„å»ºæ‹¼æ¥é“¾è¡¨<code>åŸèŠ‚ç‚¹1-&gt;æ–°èŠ‚ç‚¹1-&gt;åŸèŠ‚ç‚¹2-&gt;æ–°èŠ‚ç‚¹2-&gt;......</code>,è¿™æ—¶ï¼Œåœ¨è®¿é—®åŸèŠ‚ç‚¹çš„randomæ—¶å¯ä»¥æ‰¾åˆ°æ–°å¯¹åº”æ–°èŠ‚ç‚¹çš„randomçš„æŒ‡å‘èŠ‚ç‚¹ã€‚<br>å½“è®¿é—®<code>cur.random</code>æ—¶ï¼Œå¯¹åº”çš„æ–°èŠ‚ç‚¹<code>cur.next</code>çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ä¸º<code>cur.random.next</code>ï¼Œå°±å¯ä»¥è§£å†³randomçš„é—®é¢˜ï¼Œå†è¿›è¡Œæ‹†åˆ†é“¾è¡¨ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>cur = head<br><span class="hljs-comment">#å¤åˆ¶å„ä¸ªèŠ‚ç‚¹ï¼Œå¹¶æ„å»ºæ‹¼æ¥é“¾è¡¨</span><br><span class="hljs-keyword">while</span> cur:<br>tmp = Node(cur.val)<br>tmp.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span><br>cur.<span class="hljs-built_in">next</span> = tmp<br>cur = tmp.<span class="hljs-built_in">next</span><br><span class="hljs-comment">#æ„å»ºrandomæŒ‡å‘</span><br>cur = head<br><span class="hljs-keyword">while</span> cur:<br><span class="hljs-keyword">if</span> cur.random:<br>cur.<span class="hljs-built_in">next</span>.random = cur.random.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>        <span class="hljs-comment">#æ‹†åˆ†é“¾è¡¨</span><br>        cur = res = head.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span> cur.<span class="hljs-built_in">next</span>:<br>            cur.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éšæœºæ•°çš„æ€»ç»“</title>
      <link href="/2021/09/09/package_usage/random-summarize/"/>
      <url>/2021/09/09/package_usage/random-summarize/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç»å¸¸ä¼šç”¨åˆ°éšæœºæ•°ï¼Œåœ¨æ­¤ï¼Œå¯¹numpyåŒ…ä¸­çš„éšæœºæ•°ç›¸å…³å‡½æ•°è¿›è¡Œæ€»ç»“ã€‚</p></blockquote><ul><li><p>numpy.random.rand(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°å¯ä»¥æŒ‡å®šshapeï¼Œè¿”å›æœä»0~1å‡åŒ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.randint(low, high=None, size=None, dtype=â€˜lâ€™)<br>è¯¥å‡½æ•°è¿”å›éšæœºçš„æ•´æ•°ï¼Œå¯ä»¥æŒ‡å®šéšæœºæ•°ç»„èŒƒå›´å’Œå¤§å°ï¼›åœ¨è¿™é‡Œlowæ˜¯åŒ…å«ï¼Œhighä¸åŒ…å«;é»˜è®¤æ•°æ®ç±»å‹æ˜¯longã€‚</p></li><li><p>numpy.random.randn(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°ä¸randç±»ä¼¼ï¼Œä½†æ˜¯åˆ†å¸ƒä¸åŒï¼Œè¿™é‡Œæ˜¯è¿”å›æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.uniform(low=0.0, high=1.0, size=None)<br>è¯¥å‡½æ•°ä¸randintç±»ä¼¼ï¼Œå¯ä»¥æŒ‡å®šèŒƒå›´å’Œå¤§å°ï¼Œä½†æ˜¯è¿™é‡Œè¿”å›çš„éšæœºæ•°æœä»åŒºé—´çš„å‡åŒ€åˆ†å¸ƒã€‚</p></li><li><p>numpy.random.choice(a, size=None, replace=True, p=None)<br>è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ç»™å®šçš„æ•°æ®ç‚¹ä¸­ï¼ˆä¸€ç»´æ•°ç»„ï¼‰éšæœºä¸é‡å¤çš„æŠ½å–å¤§å°ä¸ºsizeçš„æ ·æœ¬æ•°æ®ã€‚</p></li><li><p>numpy.random.random_sample(size=None)<br>è¯¥å‡½æ•°æ˜¯åœ¨[0,1)çš„èŒƒå›´éšæœºè¿”å›æŒ‡å®šå¤§å°çš„æµ®ç‚¹æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸numpy.random.rand()ç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯éœ€è¦è¾“å…¥sizeï¼Œè€Œrandç›´æ¥è¾“å…¥ç»´åº¦å³å¯ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŒ…çš„ä½¿ç”¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å–ä¸¤ä¸ªå‘é‡è§’åº¦</title>
      <link href="/2021/09/08/img_process/getAngle/"/>
      <url>/2021/09/08/img_process/getAngle/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·å–ä¸¤ä¸ªå‘é‡çš„å¤¹è§’</p></blockquote><p><img src="https://picture.mulindya.com/getAngle.jpg" alt=""></p><p>æ¯”å¦‚ABå‘é‡è¡¨ç¤ºä¸º[1,-3,5,-1],å‰ä¸¤ä½æ˜¯Açš„åæ ‡ï¼Œåä¸¤ä½æ˜¯Bçš„åæ ‡ã€‚</p><p>ç›´æ¥è®¡ç®—å‡ºæ¯ä¸ªå‘é‡ä¸xæ­£è½´çš„å¤¹è§’ï¼Œç„¶åç›¸å‡å³å¯ï¼›æ ¸å¿ƒçš„éƒ¨åˆ†ä½¿ç”¨atan2å‡½æ•°ï¼ˆatanå’Œatan2ä¼˜å…ˆä½¿ç”¨atan2ï¼‰ã€‚</p><blockquote><p>atanä¸atan2çš„åŒºåˆ«ï¼š<br>atan å’Œ atan2 éƒ½æ˜¯æ±‚åæ­£åˆ‡å‡½æ•°ï¼Œå¦‚ï¼šæœ‰ä¸¤ä¸ªç‚¹ point(x1,y1), å’Œ point(x2,y2);<br>é‚£ä¹ˆè¿™ä¸¤ä¸ªç‚¹å½¢æˆçš„æ–œç‡çš„è§’åº¦è®¡ç®—æ–¹æ³•åˆ†åˆ«æ˜¯ï¼š<br>float angle = atan( (y2-y1)/(x2-x1) ); æˆ– float angle = atan2( y2-y1, x2-x1 );<br>atan2 çš„ä¼˜ç‚¹åœ¨äºå¦‚æœ x2-x1ç­‰äº0 ä¾ç„¶å¯ä»¥è®¡ç®—ï¼Œä½†æ˜¯atanå‡½æ•°å°±ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ï¼›</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_angle</span>(<span class="hljs-params">vec1,vec2</span>):</span><br>    dx1 = vec1[<span class="hljs-number">2</span>] - vec1[<span class="hljs-number">0</span>]<br>    dy1 = vec1[<span class="hljs-number">3</span>] - vec1[<span class="hljs-number">1</span>]<br>    dx2 = vec2[<span class="hljs-number">2</span>] - vec2[<span class="hljs-number">0</span>]<br>    dy2 = vec2[<span class="hljs-number">3</span>] - vec2[<span class="hljs-number">1</span>]<br>    angle1 = math.atan2(dy1,dx1)*<span class="hljs-number">180</span>/math.pi <span class="hljs-comment">#atan2ç»“æœä¸ºå¼§åº¦åˆ¶(å¯ä»¥å¤„ç†90åº¦çš„æƒ…å†µ)</span><br>    angle2 = math.atan2(dy2,dx2)*<span class="hljs-number">180</span>/math.pi<br>    angle = <span class="hljs-built_in">abs</span>(angle1-angle2)<br>    <span class="hljs-keyword">if</span>(angle&gt;<span class="hljs-number">180</span>):angle = <span class="hljs-number">360</span>-angle<br>    <span class="hljs-keyword">return</span> angle<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç†ï¼Œè§’åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YOLOv2</title>
      <link href="/2021/08/27/deep_learning/yolov2/"/>
      <url>/2021/08/27/deep_learning/yolov2/</url>
      
        <content type="html"><![CDATA[<h2 id="YOLOv2">YOLOv2</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡åœ°å€</strong>ï¼š<a href="https://arxiv.org/abs/1612.08242">https://arxiv.org/abs/1612.08242</a></p><p>Yolov2ä¸Yolov1åœ¨ä¿æŒé€Ÿåº¦çš„åŸºç¡€ä¸Šï¼Œå¯¹é¢„æµ‹æ•ˆæœçš„å‡†ç¡®åº¦ï¼Œè€—è´¹æ—¶é—´ï¼Œé²æ£’æ€§ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†æ”¹è¿›ï¼Œæ£€æµ‹èƒ½åŠ›æé«˜åˆ°9000ç§ä¸åŒå¯¹è±¡ã€‚æ–‡ç« æå‡ºäº†ä¸€ç§æ–°çš„<strong>è®­ç»ƒæ–¹æ³•â€“è”åˆè®­ç»ƒ</strong>æ–¹æ³•ã€‚è¿™ç§ç®—æ³•å¯ä»¥å°†ä¸¤ç§æ•°æ®é›†æ··åˆåˆ°ä¸€èµ·ï¼Œä½¿ç”¨ä¸€ç§åˆ†å±‚çš„è§‚ç‚¹è¿›è¡Œåˆ†ç±»ï¼Œç”¨å¤§å‹çš„åˆ†ç±»æ•°æ®é›†æ‰©å……æ£€æµ‹çš„æ•°æ®é›†ã€‚ä¹Ÿæˆä¸ºYOLO9000.</p><p>è”åˆè®­ç»ƒçš„æ€è·¯ï¼š<strong>åœ¨æ£€æµ‹æ•°æ®é›†å’Œåˆ†ç±»æ•°æ®é›†ä¸Šè®­ç»ƒç‰©ä½“æ£€æµ‹å™¨ï¼ˆObject Detectorsï¼‰ï¼Œç”¨æ£€æµ‹æ•°æ®é›†å­¦ä¹ ç‰©ä½“çš„å‡†ç¡®ä½ç½®ï¼Œç”¨åˆ†ç±»æ•°æ®é›†æ¥å¢åŠ åˆ†ç±»çš„ç±»åˆ«ä¸¤ã€‚æå‡å¥å£®æ€§ã€‚</strong></p><p>Yolo9000å°±æ˜¯ä½¿ç”¨è”åˆè®­ç»ƒçš„ç®—æ³•ï¼Œæ‹¥æœ‰æ¥è‡ªäºImagenetçš„9000ç§åˆ†ç±»ä¿¡æ¯ï¼Œç‰©ä½“æ£€æµ‹çš„éƒ¨åˆ†æ¥è‡ªäºCoCoçš„æ£€æµ‹æ•°æ®é›†ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov2 è®ºæ–‡ï¼šYOLO9000: Better, Faster, Stronger</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/YOLOv2.pdf" width="100%" height="650"></iframe></details><h3 id="æ”¹è¿›ç‚¹">æ”¹è¿›ç‚¹</h3><h4 id="BN-batch-normalization-æ‰¹é‡å½’ä¸€åŒ–">BN(batch normalization) æ‰¹é‡å½’ä¸€åŒ–</h4><p>BNå±‚æœ‰åŠ©äºè§£å†³åå‘ä¼ æ’­è¿‡ç¨‹çš„<strong>æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸</strong>çš„é—®é¢˜ï¼Œ<strong>é™ä½</strong>å¯¹è¶…å‚æ•°çš„<strong>æ•æ„Ÿæ€§</strong>ï¼ŒåŒæ—¶å¯¹batchå½’ä¸€åŒ–æ—¶ï¼Œèµ·åˆ°äº†ä¸€å®šçš„<strong>æ­£åˆ™åŒ–</strong>çš„æ•ˆæœï¼ˆå»æ‰çš„dropoutå±‚ï¼‰ã€‚é€šå¸¸ï¼Œåœ¨ç½‘ç»œçš„çº¿æ€§å˜æ¢ä¸æ¿€æ´»å‡½æ•°ä¹‹å‰å¢åŠ ä¸€ä¸ªBNå±‚ï¼ŒBNå±‚å¯ä»¥å°†å…¶ç‰¹å¾é‡å½’ä¸€åŒ–ä½¿å¾—å˜æ¢åçš„ç‰¹å¾å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œä»è€Œæ¯ä¸€æ‰¹è®­ç»ƒæ ·æœ¬éƒ½æœ‰ç±»ä¼¼çš„åˆ†å¸ƒã€‚åŒæ—¶è¿˜æœ‰ä¿®æ­£çš„å‚æ•°$\gamma,\beta$å¯ä»¥æ¢å¤åŸæœ‰ä¿¡æ¯ã€‚å®éªŒç»“æœmAPæå‡2.4%</p><p>ä¸€èˆ¬çš„å½’ä¸€åŒ–å…¬å¼ï¼š</p>$$\widehat x^{(k)} = \frac{x^{(k)}-E[x^{(k)}]}{\sqrt {Var[x^{(k)}]}} \\$$<p><img src="https://picture.mulindya.com/yolov2-pic1.png" alt=""></p><h4 id="High-resolution-classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰">High resolution classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰</h4><p>ç”±äºå¯¹è±¡æ£€æµ‹çš„æ ·æœ¬ç›¸å¯¹å›¾åƒåˆ†ç±»çš„è®­ç»ƒæ ·æœ¬è¦å°‘å¾—å¤šï¼Œåœ¨å¯¹è±¡æ£€æµ‹æ—¶æ¨¡å‹é€šå¸¸æ—¶å…ˆç”¨å›¾åƒåˆ†ç±»çš„æ ·æœ¬è®­ç»ƒå·ç§¯å±‚æå–å›¾åƒç‰¹å¾ï¼ˆè®­ç»ƒbackboneï¼‰ã€‚ä½†æ˜¯å›¾åƒåˆ†ç±»æ ·æœ¬çš„åˆ†è¾¨ç‡ä¸é«˜ï¼Œæ¯”å¦‚åœ¨yolov1ä¸­ï¼Œè®­ç»ƒé›†æ˜¯224*224çš„å›¾ç‰‡æ¥è®­ç»ƒå·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨è®­ç»ƒå¯¹è±¡æ£€æµ‹çš„æ¨¡å‹ä½¿ç”¨çš„æ˜¯448*448çš„å›¾ç‰‡ï¼Œè¿™æ ·çš„åˆ‡æ¢å¯¹æ¨¡å‹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚æ‰€ä»¥Yolo2åœ¨é‡‡ç”¨<strong>224*224å›¾åƒåˆ†ç±»æ¨¡å‹é¢„è®­ç»ƒä¹‹åå†é‡‡ç”¨448*448çš„é«˜åˆ†è¾¨ç‡æ ·æœ¬å¯¹åˆ†ç±»æ¨¡å‹è¿›è¡Œå¾®è°ƒ</strong>(10ä¸ªepoch)ï¼Œè¿™æ ·å†è®­ç»ƒå¯¹è±¡æ£€æµ‹æ¨¡å‹ä¹‹å‰ï¼Œç½‘ç»œç‰¹å¾å°±é€æ¸é€‚åº”448*448çš„åˆ†è¾¨ç‡ï¼Œç„¶åå†ä½¿ç”¨448*448çš„æ£€æµ‹æ ·æœ¬è¿›è¡Œå¯¹è±¡æ£€æµ‹æ¨¡å‹çš„è®­ç»ƒï¼Œä»¥ç¼“è§£äº†åˆ†è¾¨ç‡çªç„¶åˆ‡æ¢é€ æˆçš„å½±å“ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒmAPæå‡äº†3.7%ã€‚</p><h4 id="Convolution-with-anchor-boxes-ä½¿ç”¨å…ˆéªŒæ¡†">Convolution with anchor boxes(ä½¿ç”¨å…ˆéªŒæ¡†)</h4><p>Yolov1æ˜¯ä½¿ç”¨å…¨è¿æ¥å±‚ç›´æ¥é¢„æµ‹BBoxçš„åæ ‡å€¼ï¼ˆæ¯ä¸ªgridé¢„æµ‹kä¸ªBboxï¼‰ï¼ŒFaster R-CNNçš„æ–¹æ³•æ˜¯åªç”¨å·ç§¯å±‚å’Œregion proposal networkæ¥é¢„æµ‹é”šæ¡†çš„åç§»åº¦å’Œç½®ä¿¡åº¦ã€‚ä½†æ˜¯ä½œè€…å‘ç°é‡‡ç”¨Faster R-CNNçš„æ–¹æ³•æ¯”Yolov1çš„æ–¹æ³•æ›´åŠ ç®€ä¾¿ï¼Œè®©ç¥ç»ç½‘ç»œå­¦ä¹ èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚</p><p>å› æ­¤ï¼ŒYolov2ä¹Ÿå°è¯•äº†å…ˆéªŒæ¡†ï¼ˆanchorï¼‰ï¼Œåœ¨æ¯ä¸ªgridé¢„å…ˆè®¾å®šä¸€ç»„ä¸åŒå¤§å°ä¸åŒå®½é«˜æ¯”çš„è¾¹æ¡†ï¼Œæ¥è¦†ç›–æ•´ä¸ªå›¾åƒçš„ä¸åŒä½ç½®å’Œå¤šç§å°ºåº¦ï¼Œè¿™äº›å…ˆéªŒæ¡†ä½œä¸ºé¢„å®šä¹‰çš„å€™é€‰åŒºæ£€æµ‹æ¡†å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œä»¥åŠå¾®è°ƒè¾¹æ¡†çš„ä½ç½®ã€‚ä¹‹å‰yolov1å¹¶æ²¡æœ‰é‡‡ç”¨å…ˆéªŒæ¡†ï¼Œå¹¶ä¸”æ¯ä¸ªgridåªé¢„æµ‹ä¸¤ä¸ªbounding boxï¼Œæ•´ä¸ªå›¾åƒæœ‰98ä¸ªï¼Œyolov2å…¥è½¨æ¯ä¸ªgridé‡‡ç”¨9ä¸ªå…ˆéªŒæ¡†ï¼Œæ”¶ç¼©ç½‘ç»œè¿è¡Œåœ¨416*416çš„å›¾ç‰‡ï¼Œä¸€ä¸ªgridæœ‰32åƒç´ ï¼Œé‚£ä¹ˆæ€»å…±æœ‰13*13*9=1521ä¸ªå…ˆéªŒæ¡†ï¼Œæœ€ç»ˆå»æ‰äº†å…¨è¿æ¥å±‚ï¼Œé‡‡ç”¨anchor boxesæ¥é¢„æµ‹bounding boxesã€‚ç”±äºå›¾ç‰‡ä¸­çš„ç‰©ä½“éƒ½å€¾å‘äºå‡ºç°åœ¨å›¾ç‰‡çš„ä¸­å¿ƒä½ç½®ï¼Œç‰¹åˆ«æ˜¯é‚£ç§æ¯”è¾ƒå¤§çš„ç‰©ä½“ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå•ç‹¬ä½äºç‰©ä½“ä¸­å¿ƒçš„ä½ç½®ç”¨äºé¢„æµ‹è¿™äº›ç‰©ä½“ã€‚YOLOçš„å·ç§¯å±‚é‡‡ç”¨32è¿™ä¸ªå€¼æ¥ä¸‹é‡‡æ ·å›¾ç‰‡ï¼Œæ‰€ä»¥é€šè¿‡é€‰æ‹©416*416ç”¨ä½œè¾“å…¥å°ºå¯¸æœ€ç»ˆèƒ½è¾“å‡ºä¸€ä¸ª13*13çš„Feature Mapã€‚ä½¿ç”¨Anchor Boxä¼šè®©ç²¾ç¡®åº¦ç¨å¾®ä¸‹é™ï¼Œä½†ç”¨äº†å®ƒèƒ½è®©YOLOèƒ½é¢„æµ‹å‡ºå¤§äºä¸€åƒä¸ªæ¡†ï¼ŒåŒæ—¶recallè¾¾åˆ°88%ï¼ŒmAPè¾¾åˆ°69.2%ã€‚</p><h4 id="Dimension-clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰">Dimension clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰</h4><p>ä¹‹å‰Anchor Boxçš„å°ºå¯¸æ˜¯æ‰‹åŠ¨é€‰æ‹©çš„ï¼Œæ‰€ä»¥å°ºå¯¸è¿˜æœ‰ä¼˜åŒ–çš„ä½™åœ°ã€‚YOLO2å°è¯•ç»Ÿè®¡å‡ºæ›´ç¬¦åˆæ ·æœ¬ä¸­å¯¹è±¡å°ºå¯¸çš„å…ˆéªŒæ¡†ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç½‘ç»œå¾®è°ƒå…ˆéªŒæ¡†åˆ°å®é™…ä½ç½®çš„éš¾åº¦ã€‚YOLO2çš„åšæ³•æ˜¯å¯¹è®­ç»ƒé›†ä¸­æ ‡æ³¨çš„è¾¹æ¡†è¿›è¡ŒK-meanèšç±»åˆ†æï¼Œä»¥å¯»æ‰¾å°½å¯èƒ½åŒ¹é…æ ·æœ¬çš„è¾¹æ¡†å°ºå¯¸ã€‚</p><p>åœ¨ä½¿ç”¨Kmeansèšç±»åˆ†ææ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥é‡‡ç”¨çš„æ¬§æ°è·ç¦»åº¦é‡ï¼Œå› ä¸ºè¿™æ ·å¤§è¾¹æ¡†çš„è·ç¦»ä¼šç›¸å¯¹å°è¾¹æ¡†å¤§ï¼Œè¿™æ ·è¯¯å·®å°±å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨IOUçš„å½¢å¼ã€‚<br>$$<br>d(box,centroid) = 1-IOU(box,centroid)<br>$$<br>centroidæ˜¯èšç±»æ—¶è¢«é€‰ä½œä¸­å¿ƒçš„è¾¹æ¡†ï¼Œboxå°±æ˜¯å…¶å®ƒè¾¹æ¡†ï¼Œdå°±æ˜¯ä¸¤è€…é—´çš„â€œè·ç¦»â€ã€‚IOUè¶Šå¤§ï¼Œâ€œè·ç¦»â€è¶Šè¿‘ã€‚YOLO2ç»™å‡ºçš„èšç±»åˆ†æç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic2.png" alt=""></p><p>é€šè¿‡åˆ†æå®éªŒç»“æœï¼Œåœ¨modelå¤æ‚æ€§ä¸high recallä¹‹é—´æƒè¡¡ä¹‹åï¼Œé€‰æ‹©èšç±»åˆ†ç±»æ•°K=5ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic3.png" alt=""></p><p>è¯´æ˜ç”¨K-meansé€‰æ‹©Anchor Boxesæ—¶ï¼Œé€‰æ‹©å€¼ä¸º5æ—¶ï¼ŒAVG IOUçš„å€¼æ˜¯61ï¼Œè¿™ä¸ªå€¼è¦æ¯”ä¸ç”¨èšç±»çš„æ–¹æ³•çš„60.9è¦é«˜ã€‚é€‰æ‹©å€¼ä¸º9çš„æ—¶å€™ï¼ŒAVG IOUæ›´æœ‰æ˜¾è‘—æé«˜ã€‚æ€»ä¹‹å°±æ˜¯è¯´æ˜ç”¨èšç±»çš„æ–¹æ³•æ˜¯æœ‰æ•ˆæœçš„ã€‚</p><h4 id="Direct-location-predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰">Direct location predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰</h4><p>å€Ÿé‰´äºFaster RCNNçš„å…ˆéªŒæ¡†æ–¹æ³•ï¼Œåœ¨è®­ç»ƒçš„æ—©æœŸé˜¶æ®µï¼Œå…¶ä½ç½®é¢„æµ‹å®¹æ˜“ä¸ç¨³å®šã€‚å…¶ä½ç½®é¢„æµ‹å…¬å¼ä¸ºï¼š</p>$$x = (t_x*w_a)+x_a \\y = (t_y*h_a)+y_a$$<p>å…¶ä¸­ï¼Œ æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒï¼Œ $x_a,y_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„ä¸­å¿ƒç‚¹åæ ‡ï¼Œ $w_a,h_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„å®½å’Œé«˜ï¼Œ$t_x,t_y$ æ˜¯è¦å­¦ä¹ çš„å‚æ•°ã€‚æ³¨æ„ï¼ŒYOLOè®ºæ–‡ä¸­å†™çš„æ˜¯$x = (t_x*w_a)-x_a$ ï¼Œæ ¹æ®Faster RCNNï¼Œåº”è¯¥æ˜¯"+"ã€‚</p><p>ä½†æ˜¯$t_x,t_y$ ä¸åŠ çº¦æŸçš„è¿™ç§æ–¹å¼ï¼Œä¼šå¯¼è‡´é¢„æµ‹è¾¹æ¡†ä¸­å¿ƒä¼šå‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œå› æ­¤åœ¨æ—©æœŸè®­ç»ƒé˜¶æ®µä¸ç¨³å®šï¼Œæ–‡ç« å°†è¾¹æ¡†çš„ä¸­å¿ƒçº¦æŸåœ¨gridç½‘æ ¼å½“ä¸­ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic4.png" alt=""></p><p>å…¶ä¸­ï¼Œ $b_x,b_y,b_w,b_h$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ã€‚ $Pr(object)*IOU(b,object)$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ç½®ä¿¡åº¦ï¼Œåœ¨YOLO1æ˜¯ç›´æ¥é¢„æµ‹ç½®ä¿¡åº¦çš„å€¼ï¼Œè¿™é‡Œå¯¹é¢„æµ‹å‚æ•°$t_o$è¿›è¡ŒÏƒå˜æ¢åä½œä¸ºç½®ä¿¡åº¦çš„å€¼ã€‚ $c_x,c_y$æ˜¯å½“å‰ç½‘æ ¼å·¦ä¸Šè§’åˆ°å›¾åƒå·¦ä¸Šè§’çš„è·ç¦»ï¼Œè¦å…ˆå°†ç½‘æ ¼å¤§å°å½’ä¸€åŒ–ï¼Œå³ä»¤ä¸€ä¸ªç½‘æ ¼çš„å®½=1ï¼Œé«˜=1ã€‚ $p_w,p_h$æ˜¯å…ˆéªŒæ¡†çš„å®½å’Œé«˜($t_w,t_h$ä¼šå¯¹åˆå§‹çš„è®¾ç½®è¿›è¡Œè°ƒæ•´)ã€‚Ïƒæ˜¯sigmoidå‡½æ•°ã€‚ $t_x,t_y,t_w,t_h,t_o$æ˜¯è¦å­¦ä¹ çš„å‚æ•°($t_o$ä¹Ÿå¯ä»¥å­¦ä¹ çš„å˜›ï¼Œå­¦åˆ°æŸç§è§„å¾‹ç”¨ä»¥è¡¨ç¤ºç½®ä¿¡åº¦â“)ï¼Œåˆ†åˆ«ç”¨äºé¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ï¼Œä»¥åŠç½®ä¿¡åº¦ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic5.png" alt=""></p><p>è¿™ç§æ–¹å¼å¯ä»¥è®©æ•°å€¼æ›´å¹…åº¦ç¨³å®šï¼Œä¹Ÿè®©ç½‘ç»œæ›´å®¹æ˜“å­¦ä¹ ã€‚</p><h4 id="Fine-Grained-Features-passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾">Fine-Grained Features(passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾)</h4><p>å¯¹è±¡æ£€æµ‹é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼šå³ç›®æ ‡æ£€æµ‹çš„å¯¹è±¡æœ‰å¤§æœ‰å°ï¼Œè¾“å…¥å›¾åƒç»è¿‡å¤šå±‚ç½‘ç»œæå–ç‰¹å¾ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾ä¸­ï¼ˆæ¯”å¦‚YOLO2ä¸­è¾“å…¥416<em>416ç»è¿‡å·ç§¯ç½‘ç»œä¸‹é‡‡æ ·æœ€åè¾“å‡ºæ˜¯13</em>13ï¼‰ï¼Œè¾ƒå°çš„å¯¹è±¡å¯èƒ½ç‰¹å¾å·²ç»ä¸æ˜æ˜¾ç”šè‡³è¢«å¿½ç•¥æ‰äº†ã€‚ä¸ºäº†æ›´å¥½çš„æ£€æµ‹å‡ºä¸€äº›æ¯”è¾ƒå°çš„å¯¹è±¡ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾éœ€è¦ä¿ç•™ä¸€äº›æ›´ç»†èŠ‚çš„ä¿¡æ¯ã€‚</p><p>YOLO2å¼•å…¥ä¸€ç§ç§°ä¸ºpassthroughå±‚çš„æ–¹æ³•åœ¨ç‰¹å¾å›¾ä¸­ä¿ç•™ä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨æœ€åä¸€ä¸ªpoolingä¹‹å‰ï¼Œç‰¹å¾å›¾çš„å¤§å°æ˜¯26*26*512ï¼Œå°†å…¶1æ‹†4ï¼Œç›´æ¥ä¼ é€’ï¼ˆpassthroughï¼‰åˆ°poolingåï¼ˆå¹¶ä¸”åˆç»è¿‡ä¸€ç»„å·ç§¯ï¼‰çš„ç‰¹å¾å›¾ï¼Œä¸¤è€…å åŠ åˆ°ä¸€èµ·ä½œä¸ºè¾“å‡ºçš„ç‰¹å¾å›¾ã€‚<br><img src="https://picture.mulindya.com/yolov2-pic11.png" alt=""></p><p>å…·ä½“æ€æ ·1æ‹†4ï¼Œä¸‹é¢å€Ÿç”¨ä¸€å‰¯å›¾çœ‹çš„å¾ˆæ¸…æ¥šã€‚å›¾ä¸­ç¤ºä¾‹çš„æ˜¯1ä¸ª4*4æ‹†æˆ4ä¸ª2*2ã€‚å¦å¤–ï¼Œæ ¹æ®YOLO2çš„ä»£ç ï¼Œç‰¹å¾å›¾å…ˆç”¨1*1å·ç§¯ä» 26*26*512 é™ç»´åˆ° 26*26*64ï¼Œå†åš1æ‹†4å¹¶passthroughã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">ut = tf.extract_image_patches(<span class="hljs-keyword">in</span>, [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], padding=<span class="hljs-string">"VALID"</span>)<br><span class="hljs-comment"># or use tf.space_to_depth</span><br><span class="hljs-comment"># out = tf.space_to_depth(in, 2)</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">tf.extract_image_patches(<br>    images,<br>    ksizes,<br>    strides,<br>    rates,<br>    padding,<br>    name=<span class="hljs-literal">None</span><br>)<br><span class="hljs-comment">#imagesï¼šå¿…é¡»æ˜¯shapeä¸º[batch, in_rows, in_cols, depth]çš„tensorï¼›</span><br><span class="hljs-comment">#ksizeï¼šé•¿åº¦å¤§äºç­‰äº4çš„listï¼Œæ»‘åŠ¨çª—çš„å¤§å°</span><br><span class="hljs-comment">#strides:æ¯å—patchåŒºåŸŸä¹‹é—´ä¸­å¿ƒç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå¿…é¡»æ˜¯: [1, stride_rows, stride_cols, 1].</span><br>    <span class="hljs-comment">#å…·ä½“ç‚¹è¯´å°±æ˜¯ç”¨æ¥è®¡ç®—æ¯æ¬¡é€‰å–patchçš„åˆå§‹ç‚¹ä½ç½®</span><br><span class="hljs-comment">#rates: åœ¨æ¯æ¬¡æå–çš„patchä¸­ï¼Œå¯¹åº”dimåƒç´ ç‚¹ä½ç½®ä¹‹é—´çš„å·®è·ï¼Œå¿…é¡»æ˜¯[1, rate_rows, rate_cols, 1]ï¼›ã€Œæˆ–è€…ç†è§£ä¸º æå–å‡ºæ¥çš„æ¯ä¸ªæ¡†é‡Œé¢çš„åƒç´ ä¸æ˜¯éƒ½é€‰æ‹©çš„ æ ¹æ®rateçš„ä¸åŒ éš”å‡ ä¸ªé€‰ä¸€ä¸ª é»˜è®¤æ˜¯1ä¹Ÿå°±æ˜¯çš„éƒ½é€‰æ‹© è‹¥ä¸º2 é‚£ä¹ˆå°±æ˜¯éš”ä¸€ä¸ªæ¥é€‰æ‹©ã€</span><br><span class="hljs-comment">#padding:æœ‰ä¸¤ä¸ªå–å€¼ï¼Œâ€œVALIDâ€æˆ–è€…â€œSAMEâ€ï¼Œâ€œVALIDâ€è¡¨ç¤ºæ‰€å–çš„patchåŒºåŸŸå¿…é¡»å®Œå…¨åŒ…å«åœ¨åŸå§‹å›¾åƒä¸­."SAME"è¡¨ç¤ºå¯ä»¥å–è¶…å‡ºåŸå§‹å›¾åƒçš„éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†è¿›è¡Œ0å¡«å……ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h4 id="Multi-scale-Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰">Multi-scale Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰</h4><p>ä½œè€…å¸Œæœ›YOLOv2èƒ½å¥å£®çš„è¿è¡Œäºä¸åŒå°ºå¯¸çš„å›¾ç‰‡ä¹‹ä¸Šï¼Œæ‰€ä»¥æŠŠè¿™ä¸€æƒ³æ³•ç”¨äºè®­ç»ƒmodelä¸­ã€‚</p><p>åŒºåˆ«äºä¹‹å‰çš„è¡¥å…¨å›¾ç‰‡çš„å°ºå¯¸çš„æ–¹æ³•ï¼ŒYOLOv2æ¯è¿­ä»£å‡ æ¬¡éƒ½ä¼šæ”¹å˜ç½‘ç»œå‚æ•°ã€‚æ¯10ä¸ªBatchï¼Œç½‘ç»œä¼š<strong>éšæœºåœ°é€‰æ‹©ä¸€ä¸ªæ–°çš„å›¾ç‰‡å°ºå¯¸</strong>ï¼Œç”±äºä½¿ç”¨äº†ä¸‹é‡‡æ ·å‚æ•°æ˜¯32ï¼Œæ‰€ä»¥ä¸åŒçš„å°ºå¯¸å¤§å°ä¹Ÿé€‰æ‹©ä¸º32çš„å€æ•°{320ï¼Œ352â€¦â€¦608}ï¼Œæœ€å°320*320ï¼Œæœ€å¤§608*608ï¼Œç½‘ç»œä¼šè‡ªåŠ¨æ”¹å˜å°ºå¯¸ï¼Œå¹¶ç»§ç»­è®­ç»ƒçš„è¿‡ç¨‹ã€‚</p><p>è¿™ä¸€æ–¹æ³•è®©ç½‘ç»œåœ¨ä¸åŒçš„è¾“å…¥å°ºå¯¸ä¸Šéƒ½èƒ½è¾¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„é¢„æµ‹æ•ˆæœï¼ŒåŒä¸€ç½‘ç»œèƒ½åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸Šè¿›è¡Œæ£€æµ‹ã€‚å½“è¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå°çš„ç²¾åº¦é«˜ï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå¤§çš„æ—¶å€™ç²¾åº¦ç›¸å¯¹ä½ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨YOLOv2çš„é€Ÿåº¦å’Œç²¾åº¦ä¸Šè¿›è¡Œæƒè¡¡ã€‚</p><center class="half"><img src="https://picture.mulindya.com/yolov2-pic6.png"><img src="https://picture.mulindya.com/yolov2-pic7.png"></center><h4 id="hi-res-detect-é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹">hi-res-detect(é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹)</h4><p>ä¸Šé¢å·¦å›¾è¡¨æ ¼ä¸­æœ€åä¸€è¡Œæ˜¯ä½¿ç”¨é«˜åˆ†è¾¨lç‡çš„å›¾åƒhi-res detectorï¼Œå› ä¸ºYOLO2è°ƒæ•´ç½‘ç»œç»“æ„åèƒ½å¤Ÿæ”¯æŒå¤šç§å°ºå¯¸çš„è¾“å…¥å›¾åƒã€‚é€šå¸¸æ˜¯ä½¿ç”¨416*416çš„è¾“å…¥å›¾åƒï¼Œå¦‚æœç”¨è¾ƒé«˜åˆ†è¾¨ç‡çš„è¾“å…¥å›¾åƒï¼Œæ¯”å¦‚544*544ï¼Œåˆ™mAPå¯ä»¥è¾¾åˆ°78.6ï¼Œæœ‰1.8çš„æå‡ã€‚</p><h4 id="Hierarchical-classification-åˆ†å±‚åˆ†ç±»">Hierarchical classification(åˆ†å±‚åˆ†ç±»)</h4><p>ä½œè€…æå‡ºäº†ä¸€ç§åœ¨åˆ†ç±»æ•°æ®é›†å’Œæ£€æµ‹æ•°æ®é›†ä¸Šè”åˆè®­ç»ƒçš„æœºåˆ¶ã€‚ä½¿ç”¨æ£€æµ‹æ•°æ®é›†çš„å›¾ç‰‡å»å­¦ä¹ æ£€æµ‹ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚bounding box åæ ‡é¢„æµ‹ï¼Œæ˜¯å¦åŒ…å«ç‰©ä½“ä»¥åŠå±äºå„ä¸ªç‰©ä½“çš„æ¦‚ç‡ã€‚ä½¿ç”¨ä»…æœ‰ç±»åˆ«æ ‡ç­¾çš„åˆ†ç±»æ•°æ®é›†å›¾ç‰‡å»æ‰©å±•å¯ä»¥æ£€æµ‹çš„ç§ç±»ã€‚ä½œè€…é€šè¿‡ImageNetè®­ç»ƒåˆ†ç±»ã€COCOå’ŒVOCæ•°æ®é›†æ¥è®­ç»ƒæ£€æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„æ€è·¯ï¼Œå¯ä»¥è®©æˆ‘ä»¬è¾¾åˆ°æ¯”è¾ƒä¼˜çš„æ•ˆæœã€‚é€šè¿‡å°†ä¸¤ä¸ªæ•°æ®é›†æ··åˆè®­ç»ƒï¼Œ<strong>å¦‚æœé‡åˆ°æ¥è‡ªåˆ†ç±»é›†çš„å›¾ç‰‡åˆ™åªè®¡ç®—åˆ†ç±»çš„Lossï¼Œé‡åˆ°æ¥è‡ªæ£€æµ‹é›†çš„å›¾ç‰‡åˆ™è®¡ç®—å®Œæ•´çš„Loss</strong>ã€‚</p><p>ä½†æ˜¯ImageNetå¯¹åº”åˆ†ç±»æœ‰9000ç§ï¼Œè€ŒCOCOåˆ™åªæä¾›80ç§ç›®æ ‡æ£€æµ‹ï¼Œä½œè€…ä½¿ç”¨multi-labelæ¨¡å‹ï¼Œå³å‡å®šä¸€å¼ å›¾ç‰‡å¯ä»¥æœ‰å¤šä¸ªlabelï¼Œå¹¶ä¸”ä¸è¦æ±‚labelé—´ç‹¬ç«‹ã€‚å› ä¸ºä½œè€…é€‰æ‹©åœ¨COCOå’ŒImageNetæ•°æ®é›†ä¸Šè¿›è¡Œè”åˆè®­ç»ƒï¼Œé‡åˆ°çš„ç¬¬ä¸€é—®é¢˜æ˜¯ä¸¤è€…çš„ç±»åˆ«å¹¶ä¸æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œæ¯”å¦‚"Norfolk terrier"æ˜æ˜¾å±äº"dog"ï¼Œæ‰€ä»¥ä½œè€…æå‡ºäº†ä¸€ç§å±‚çº§åˆ†ç±»æ–¹æ³•ï¼ˆHierarchical classificationï¼‰ï¼Œä¸»è¦æ€è·¯æ˜¯æ ¹æ®å„ä¸ªç±»åˆ«ä¹‹é—´çš„ä»å±å…³ç³»ï¼ˆæ ¹æ®WordNetï¼‰å»ºç«‹ä¸€ç§æ ‘ç»“æ„WordTreeï¼Œç»“åˆCOCOå’ŒImageNetå»ºç«‹çš„WordTreeå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic8.png" alt=""></p><ol><li>éå†Imagenetçš„labelï¼Œç„¶ååœ¨WordNetä¸­å¯»æ‰¾è¯¥labelåˆ°æ ¹èŠ‚ç‚¹(æŒ‡å‘ä¸€ä¸ªç‰©ç†å¯¹è±¡)çš„è·¯å¾„ï¼›</li><li>å¦‚æœè·¯å¾„åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆå°±å°†è¯¥è·¯å¾„ç›´æ¥åŠ å…¥åˆ°åˆ†å±‚æ ‘ç»“æ„ä¸­ï¼›</li><li>å¦åˆ™ï¼Œä»å‰©ä½™çš„è·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼ŒåŠ å…¥åˆ°åˆ†å±‚æ ‘ã€‚</li></ol><p>è¿™ä¸ªåˆ†å±‚æ ‘æˆ‘ä»¬ç§°ä¹‹ä¸º WordTreeï¼Œä½œç”¨å°±åœ¨äºå°†ä¸¤ç§æ•°æ®é›†æŒ‰ç…§å±‚çº§è¿›è¡Œç»“åˆã€‚(æ„Ÿè§‰å°±æ˜¯ä¸ºäº†æ‰©å……æ•°æ®é›†åŒæ—¶ç®€ä¾¿è®¡ç®—)</p><p>åˆ†ç±»æ—¶çš„æ¦‚ç‡è®¡ç®—å€Ÿç”¨äº†<strong>å†³ç­–æ ‘æ€æƒ³</strong>ï¼Œ<strong>æŸä¸ªèŠ‚ç‚¹çš„æ¦‚ç‡å€¼ç­‰äºè¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ‰€æœ‰æ¡ä»¶æ¦‚ç‡ä¹‹ç§¯</strong>ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€é¢— WordTree ï¼ˆè§†è§‰åè¯ç»„æˆçš„å±‚æ¬¡ç»“æ„æ¨¡å‹ï¼‰ã€‚ç”¨WordTreeæ‰§è¡Œåˆ†ç±»æ—¶ï¼Œé¢„æµ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶æ¦‚ç‡ã€‚å¦‚æœæƒ³æ±‚å¾—ç‰¹å®šèŠ‚ç‚¹çš„ç»å¯¹æ¦‚ç‡ï¼Œåªéœ€è¦æ²¿ç€è·¯å¾„åšè¿ç»­ä¹˜ç§¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³çŸ¥é“ä¸€å¼ å›¾ç‰‡æ˜¯ä¸æ˜¯â€œNorfolk terrier â€éœ€è¦è®¡ç®—ï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic10.png" alt=""></p><p>å¦å¤–ï¼Œä¸ºäº†éªŒè¯è¿™ç§æ–¹æ³•ä½œè€…åœ¨WordTreeï¼ˆç”¨1000ç±»åˆ«çš„ImageNetåˆ›å»ºï¼‰ä¸Šè®­ç»ƒäº†Darknet-19æ¨¡å‹ã€‚ä¸ºäº†åˆ›å»ºWordTree1kï¼Œä½œè€…æ·»åŠ äº†å¾ˆå¤šä¸­é—´èŠ‚ç‚¹ï¼ŒæŠŠlabelç”±1000æ‰©å±•åˆ°1369ã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ground truthæ ‡ç­¾è¦é¡ºç€å‘æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¼ æ’­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å¼ å›¾ç‰‡è¢«æ ‡è®°ä¸ºâ€œNorfolk terrierâ€ï¼Œå®ƒä¹Ÿè¢«æ ‡è®°ä¸ºâ€œdogâ€ å’Œâ€œmammalâ€ç­‰ã€‚ä¸ºäº†è®¡ç®—æ¡ä»¶æ¦‚ç‡ï¼Œæ¨¡å‹é¢„æµ‹äº†ä¸€ä¸ªåŒ…å«1369ä¸ªå…ƒç´ çš„å‘é‡ï¼Œè€Œä¸”åŸºäºæ‰€æœ‰â€œåŒä¹‰è¯é›†â€è®¡ç®—softmaxã€‚</p><p>softmaxæ“ä½œä¹ŸåŒæ—¶åº”è¯¥é‡‡ç”¨åˆ†ç»„æ“ä½œï¼Œä¸‹å›¾ä¸ŠåŠéƒ¨åˆ†ä¸ºImageNetå¯¹åº”çš„åŸç”ŸSoftmaxï¼Œä¸‹åŠéƒ¨åˆ†å¯¹åº”åŸºäºWordTreeçš„Softmaxï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic9.png" alt=""></p><p>é€šè¿‡ä¸Šè¿°æ–¹æ¡ˆæ„é€ WordTreeï¼Œå¾—åˆ°å¯¹åº”9418ä¸ªåˆ†ç±»ï¼Œé€šè¿‡é‡é‡‡æ ·ä¿è¯Imagenetå’ŒCOCOçš„æ ·æœ¬æ•°æ®æ¯”ä¾‹ä¸º4:1ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>é€šè¿‡è”åˆè®­ç»ƒç­–ç•¥ï¼ŒYOLO9000å¯ä»¥å¿«é€Ÿæ£€æµ‹å‡ºè¶…è¿‡9000ä¸ªç±»åˆ«çš„ç‰©ä½“ï¼Œæ€»ä½“mAPå€¼ä¸º19,7%ã€‚æˆ‘è§‰å¾—è¿™æ˜¯ä½œè€…åœ¨è¿™ç¯‡è®ºæ–‡ä½œå‡ºçš„æœ€å¤§çš„è´¡çŒ®ï¼Œå› ä¸ºYOLOv2çš„æ”¹è¿›ç­–ç•¥äº®ç‚¹å¹¶ä¸æ˜¯å¾ˆçªå‡ºï¼Œä½†æ˜¯YOLO9000ç®—æ˜¯å¼€åˆ›ä¹‹ä¸¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç›®æ ‡æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
            <tag> yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨åšå®¢ä¸­æ˜¾ç¤ºpdf&amp;æŠ˜å </title>
      <link href="/2021/08/25/config/pdf-config/"/>
      <url>/2021/08/25/config/pdf-config/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„çš„æ–¹æ³•é…ç½®<br><a href="https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/">https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/</a></p></blockquote><h2 id="é…ç½®">é…ç½®</h2><p>pdf.js æ˜¯ç”¨äºè§£æå’Œå‘ˆç° PDF çš„åŸºäº Web æ ‡å‡†å¹³å°çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://mozilla.github.io/pdf.js/">https://mozilla.github.io/pdf.js/</a></p><p>ç”±äºæˆ‘çš„æµè§ˆå™¨çš„ç‰ˆæœ¬å¯èƒ½ä¸é«˜ï¼Œè€ƒè™‘åˆ°å…¼å®¹æ€§ä¸‹è½½æ—§ç‰ˆçš„æ–‡ä»¶ã€‚ç„¶åæŒ‰å¸ˆå…„çš„æ­¥éª¤é…ç½®å³å¯ã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><figure class="highlight llvm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&lt;iframe src<span class="hljs-operator">=</span>'/js/pdfjs_old/web/viewer.html?file<span class="hljs-operator">=</span>https://paper.mulindya.com/An<span class="hljs-variable">%20</span>Isotropic<span class="hljs-variable">%203</span><span class="hljs-keyword">x</span><span class="hljs-number">3</span><span class="hljs-variable">%20</span>Image<span class="hljs-variable">%20</span>Gradient<span class="hljs-variable">%20</span>Operator.pdf' width<span class="hljs-operator">=</span><span class="hljs-number">100</span>% height<span class="hljs-operator">=</span><span class="hljs-number">450</span>&gt;&lt;/iframe&gt;<br></code></pre></td></tr></tbody></table></figure><p>fileè®¾ç½®ä¸ºæ–‡ä»¶çš„åœ°å€ï¼Œå®½é«˜å¯ä»¥è‡ªå·±è®¾ç½®ã€‚</p><h2 id="æ•ˆæœ">æ•ˆæœ</h2><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe><h2 id="æŠ˜å ">æŠ˜å </h2><p>é€šè¿‡htmlçš„detailså…ƒç´ å¯ä»¥æŠ˜å éšè—çš„å†…å®¹ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä½¿ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span> æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—çš„å†…å®¹<br>åœ¨å…¶ä¸­ä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—å†…å®¹çš„æ ‡é¢˜<br></code></pre></td></tr></tbody></table></figure><p>è¿™æ ·å¦‚æœéœ€è¦é˜…è¯»pdfå°±å¯ä»¥å±•å¼€ï¼Œä¸éœ€è¦å°±éšè—ï¼ŒçœŸæ˜¯ç‚’é¸¡ä¾¿åˆ©ï¼ğŸ˜‰</p><details><summary>å±•å¼€pdf</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="650"></iframe></details>]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é…ç½® </tag>
            
            <tag> pdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swinç½‘ç»œ</title>
      <link href="/2021/08/25/deep_learning/swin/"/>
      <url>/2021/08/25/deep_learning/swin/</url>
      
        <content type="html"><![CDATA[<blockquote><p>swin_transformerçš„ç»“æ„å’Œä»£ç å®ç°éƒ¨åˆ†ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ freezeçš„ç›¸å…³æ“ä½œï¼Œè®°å½•å¦‚ä¸‹ã€‚</p></blockquote><h2 id="è®ºæ–‡ä¸­çš„æ¶æ„">è®ºæ–‡ä¸­çš„æ¶æ„</h2><p><img src="https://picture.mulindya.com/swin-pic1.png" alt=""></p><h2 id="è®ºæ–‡ç¬”è®°">è®ºæ–‡ç¬”è®°</h2><details><summary>Swin Transformer:Hierarchical Vision Transformer using Shifted Windows</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf" width="100%" height="650"></iframe></details><h2 id="modelæ¶æ„">modelæ¶æ„</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br></pre></td><td class="code"><pre><code class="hljs python">ImageClassifier(<br>  (backbone): SwinTransformer(<br>    (patch_embed): PatchEmbed(<br>      (projection): Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">96</span>, kernel_size=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>), stride=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))<br>      (norm): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>    )<br>    (drop_after_pos): Dropout(p=<span class="hljs-number">0.0</span>, inplace=<span class="hljs-literal">False</span>)<br>    (stages): ModuleList(<br>      (<span class="hljs-number">0</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">1</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">2</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">2</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">3</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">4</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">5</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">6</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">7</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">8</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">9</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">10</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">11</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">12</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">13</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">14</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">15</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">16</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">17</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">1536</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">3</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>      )<br>    )<br>    (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>  )<br>  (neck): GlobalAveragePooling(<br>    (gap): AdaptiveAvgPool1d(output_size=<span class="hljs-number">1</span>)<br>  )<br>  (head): MultiLabelLinearClsHead(<br>    (compute_loss): CrossEntropyLoss()<br>    (fc): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">11</span>, bias=<span class="hljs-literal">True</span>)<br>  )<br>)<br></code></pre></td></tr></tbody></table></figure><h2 id="ä»£ç ">ä»£ç </h2><p>æ·»åŠ fronzen_stages:</p><blockquote><p>è¯¥å‚æ•°è¡¨ç¤ºä½ æƒ³å†»ç»“å‰å‡ ä¸ª stages çš„æƒé‡ï¼Œswin ç»“æ„åŒ…æ‹¬ 4 stageå†…éƒ¨ç»“æ„(2,2,18,2)</p><p>frozen_stages=-1ï¼Œè¡¨ç¤ºå…¨éƒ¨å¯å­¦ä¹ </p><p>frozen_stage=0ï¼Œè¡¨ç¤ºstemæƒé‡å›ºå®š</p><p>frozen_stages=1ï¼Œè¡¨ç¤º stem å’Œç¬¬ä¸€ä¸ª stage æƒé‡å›ºå®š</p><p>frozen_stages=2ï¼Œè¡¨ç¤º stem å’Œå‰ä¸¤ä¸ª stage æƒé‡å›ºå®š</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">stage = SwinBlockSequence(**_stage_cfg)<br><span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br><span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>stage.<span class="hljs-built_in">eval</span>()<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>param.requires_grad = <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure><p>å…¨éƒ¨ä»£ç </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> deepcopy<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Sequence</span><br><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> mmcv.cnn <span class="hljs-keyword">import</span> build_norm_layer<br><span class="hljs-keyword">from</span> mmcv.cnn.bricks.transformer <span class="hljs-keyword">import</span> FFN<br><span class="hljs-keyword">from</span> mmcv.cnn.utils.weight_init <span class="hljs-keyword">import</span> trunc_normal_<br><span class="hljs-keyword">from</span> mmcv.runner.base_module <span class="hljs-keyword">import</span> BaseModule, ModuleList<br><br><span class="hljs-keyword">from</span> ..builder <span class="hljs-keyword">import</span> BACKBONES<br><span class="hljs-keyword">from</span> ..utils <span class="hljs-keyword">import</span> PatchEmbed, PatchMerging, ShiftWindowMSA<br><span class="hljs-keyword">from</span> .base_backbone <span class="hljs-keyword">import</span> BaseBackbone<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlock</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Swin Transformer block.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        window_size (int, optional): The height and width of the window.</span><br><span class="hljs-string">            Defaults to 7.</span><br><span class="hljs-string">        shift (bool, optional): Shift the attention window or not.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        ffn_ratio (float, optional): The expansion ratio of feedforward network</span><br><span class="hljs-string">            hidden layer channels. Defaults to 4.</span><br><span class="hljs-string">        drop_path (float, optional): The drop path rate after attention and</span><br><span class="hljs-string">            ffn. Defaults to 0.</span><br><span class="hljs-string">        attn_cfgs (dict, optional): The extra config of Shift Window-MSA.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        ffn_cfgs (dict, optional): The extra config of FFN.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        norm_cfg (dict, optional): The config of norm layers.</span><br><span class="hljs-string">            Defaults to dict(type='LN').</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 window_size=<span class="hljs-number">7</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 shift=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_ratio=<span class="hljs-number">4.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 attn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br><br>        <span class="hljs-built_in">super</span>(SwinBlock, self).__init__(init_cfg)<br><br>        _attn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>            <span class="hljs-string">'num_heads'</span>: num_heads,<br>            <span class="hljs-string">'shift_size'</span>: window_size // <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> shift <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'window_size'</span>: window_size,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>            **attn_cfgs<br>        }<br>        self.norm1 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.attn = ShiftWindowMSA(**_attn_cfgs)<br><br>        _ffn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'feedforward_channels'</span>: <span class="hljs-built_in">int</span>(embed_dims * ffn_ratio),<br>            <span class="hljs-string">'num_fcs'</span>: <span class="hljs-number">2</span>,<br>            <span class="hljs-string">'ffn_drop'</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'act_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'GELU'</span>),<br>            **ffn_cfgs<br>        }<br>        self.norm2 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.ffn = FFN(**_ffn_cfgs)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        identity = x<br>        x = self.norm1(x)<br>        x = self.attn(x)<br>        x = x + identity<br><br>        identity = x<br>        x = self.norm2(x)<br>        x = self.ffn(x, identity=identity)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlockSequence</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Module with successive Swin Transformer blocks and downsample layer.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        depth (int): Number of successive swin transformer blocks.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        downsample (bool, optional): Downsample the output of blocks by patch</span><br><span class="hljs-string">            merging. Defaults to False.</span><br><span class="hljs-string">        downsample_cfg (dict, optional): The extra config of the patch merging</span><br><span class="hljs-string">            layer. Defaults to empty dict.</span><br><span class="hljs-string">        drop_paths (Sequence[float] | float, optional): The drop path rate in</span><br><span class="hljs-string">            each block. Defaults to 0.</span><br><span class="hljs-string">        block_cfgs (Sequence[dict] | dict, optional): The extra config of each</span><br><span class="hljs-string">            block. Defaults to empty dicts.</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 depth,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_paths=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 block_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>().__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(drop_paths, <span class="hljs-type">Sequence</span>):<br>            drop_paths = [drop_paths] * depth<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(block_cfgs, <span class="hljs-type">Sequence</span>):<br>            block_cfg = [deepcopy(block_cfgs) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth)]<br><br>        self.blocks = ModuleList()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth):<br>            _block_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'shift'</span>: <span class="hljs-literal">False</span> <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">True</span>,<br>                <span class="hljs-string">'drop_path'</span>: drop_paths[i],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **block_cfg[i]<br>            }<br>            block = SwinBlock(**_block_cfg)<br>            self.blocks.append(block)<br><br>        <span class="hljs-keyword">if</span> downsample:<br>            _downsample_cfg = {<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'in_channels'</span>: embed_dims,<br>                <span class="hljs-string">'expansion_ratio'</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-string">'norm_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>                **downsample_cfg<br>            }<br>            self.downsample = PatchMerging(**_downsample_cfg)<br>        <span class="hljs-keyword">else</span>:<br>            self.downsample = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> self.blocks:<br>            x = block(x)<br><br>        <span class="hljs-keyword">if</span> self.downsample:<br>            x = self.downsample(x)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-meta">@BACKBONES.register_module()</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinTransformer</span>(<span class="hljs-params">BaseBackbone</span>):</span><br>    <span class="hljs-string">""" Swin Transformer</span><br><span class="hljs-string">    A PyTorch implement of : `Swin Transformer:</span><br><span class="hljs-string">    Hierarchical Vision Transformer using Shifted Windows`  -</span><br><span class="hljs-string">        https://arxiv.org/abs/2103.14030</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Inspiration from</span><br><span class="hljs-string">    https://github.com/microsoft/Swin-Transformer</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        arch (str | dict): Swin Transformer architecture</span><br><span class="hljs-string">            Defaults to 'T'.</span><br><span class="hljs-string">        img_size (int | tuple): The size of input image.</span><br><span class="hljs-string">            Defaults to 224.</span><br><span class="hljs-string">        in_channels (int): The num of input channels.</span><br><span class="hljs-string">            Defaults to 3.</span><br><span class="hljs-string">        drop_rate (float): Dropout rate after embedding.</span><br><span class="hljs-string">            Defaults to 0.</span><br><span class="hljs-string">        drop_path_rate (float): Stochastic depth rate.</span><br><span class="hljs-string">            Defaults to 0.1.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        # add attr</span><br><span class="hljs-string">        frozen_stages: defaults-1 dont freeze,0: all freeze,other: frozen_stages stages to freeze</span><br><span class="hljs-string"></span><br><span class="hljs-string">        use_abs_pos_embed (bool): If True, add absolute position embedding to</span><br><span class="hljs-string">            the patch embedding. Defaults to False.</span><br><span class="hljs-string">        auto_pad (bool): If True, auto pad feature map to fit window_size.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        norm_cfg (dict, optional): Config dict for normalization layer at end</span><br><span class="hljs-string">            of backone. Defaults to dict(type='LN')</span><br><span class="hljs-string">        stage_cfgs (Sequence | dict, optional): Extra config dict for each</span><br><span class="hljs-string">            stage. Defaults to empty dict.</span><br><span class="hljs-string">        patch_cfg (dict, optional): Extra config dict for patch embedding.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        init_cfg (dict, optional): The Config for initialization.</span><br><span class="hljs-string">            Defaults to None.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Examples:</span><br><span class="hljs-string">        &gt;&gt;&gt; from mmcls.models import SwinTransformer</span><br><span class="hljs-string">        &gt;&gt;&gt; import torch</span><br><span class="hljs-string">        &gt;&gt;&gt; extra_config = dict(</span><br><span class="hljs-string">        &gt;&gt;&gt;     arch='tiny',</span><br><span class="hljs-string">        &gt;&gt;&gt;     stage_cfgs=dict(downsample_cfg={'kernel_size': 3,</span><br><span class="hljs-string">        &gt;&gt;&gt;                                     'expansion_ratio': 3}),</span><br><span class="hljs-string">        &gt;&gt;&gt;     auto_pad=True)</span><br><span class="hljs-string">        &gt;&gt;&gt; self = SwinTransformer(**extra_config)</span><br><span class="hljs-string">        &gt;&gt;&gt; inputs = torch.rand(1, 3, 224, 224)</span><br><span class="hljs-string">        &gt;&gt;&gt; output = self.forward(inputs)</span><br><span class="hljs-string">        &gt;&gt;&gt; print(output.shape)</span><br><span class="hljs-string">        (1, 2592, 4)</span><br><span class="hljs-string">    """</span><br>    arch_zoo = {<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'t'</span>, <span class="hljs-string">'tiny'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'s'</span>, <span class="hljs-string">'small'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'b'</span>, <span class="hljs-string">'base'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">128</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'l'</span>, <span class="hljs-string">'large'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">192</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>,  <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>, <span class="hljs-number">48</span>]}),<br>    }  <span class="hljs-comment"># yapf: disable</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 arch=<span class="hljs-string">'T'</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 img_size=<span class="hljs-number">224</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 in_channels=<span class="hljs-number">3</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_rate=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path_rate=<span class="hljs-number">0.1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 frozen_stages=-<span class="hljs-number">1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 use_abs_pos_embed=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 stage_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 patch_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">str</span>):<br>            arch = arch.lower()<br>            <span class="hljs-keyword">assert</span> arch <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span>(self.arch_zoo), \<br>                <span class="hljs-string">f'Arch <span class="hljs-subst">{arch}</span> is not in default archs <span class="hljs-subst">{<span class="hljs-built_in">set</span>(self.arch_zoo)}</span>'</span><br>            self.arch_settings = self.arch_zoo[arch]<br>        <span class="hljs-keyword">else</span>:<br>            essential_keys = {<span class="hljs-string">'embed_dims'</span>, <span class="hljs-string">'depths'</span>, <span class="hljs-string">'num_head'</span>}<br>            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">dict</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">set</span>(arch) == essential_keys, \<br>                <span class="hljs-string">f'Custom arch needs a dict with keys <span class="hljs-subst">{essential_keys}</span>'</span><br>            self.arch_settings = arch<br><br>        self.embed_dims = self.arch_settings[<span class="hljs-string">'embed_dims'</span>]<br>        self.depths = self.arch_settings[<span class="hljs-string">'depths'</span>]<br>        self.num_heads = self.arch_settings[<span class="hljs-string">'num_heads'</span>]<br>        self.num_layers = <span class="hljs-built_in">len</span>(self.depths)<br>        self.use_abs_pos_embed = use_abs_pos_embed<br>        self.auto_pad = auto_pad<br><br>        _patch_cfg = <span class="hljs-built_in">dict</span>(<br>            img_size=img_size,<br>            in_channels=in_channels,<br>            embed_dims=self.embed_dims,<br>            conv_cfg=<span class="hljs-built_in">dict</span>(<br>                <span class="hljs-built_in">type</span>=<span class="hljs-string">'Conv2d'</span>, kernel_size=<span class="hljs-number">4</span>, stride=<span class="hljs-number">4</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>),<br>            norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>            **patch_cfg)<br>        self.patch_embed = PatchEmbed(**_patch_cfg)<br>        num_patches = self.patch_embed.num_patches<br>        patches_resolution = self.patch_embed.patches_resolution<br>        self.patches_resolution = patches_resolution<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            self.absolute_pos_embed = nn.Parameter(<br>                torch.zeros(<span class="hljs-number">1</span>, num_patches, self.embed_dims))<br><br>        self.drop_after_pos = nn.Dropout(p=drop_rate)<br><br>        <span class="hljs-comment"># stochastic depth</span><br>        total_depth = <span class="hljs-built_in">sum</span>(self.depths)<br>        dpr = [<br>            x.item() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> torch.linspace(<span class="hljs-number">0</span>, drop_path_rate, total_depth)<br>        ]  <span class="hljs-comment"># stochastic depth decay rule</span><br><br>        self.stages = ModuleList()<br>        embed_dims = self.embed_dims<br>        input_resolution = patches_resolution<br>        <span class="hljs-keyword">for</span> i, (depth,<br>                num_heads) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(self.depths, self.num_heads)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(stage_cfgs, <span class="hljs-type">Sequence</span>):<br>                stage_cfg = stage_cfgs[i]<br>            <span class="hljs-keyword">else</span>:<br>                stage_cfg = deepcopy(stage_cfgs)<br>            downsample = <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> i &lt; self.num_layers - <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span><br>            _stage_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'depth'</span>: depth,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'downsample'</span>: downsample,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'drop_paths'</span>: dpr[:depth],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **stage_cfg<br>            }<br><br>            stage = SwinBlockSequence(**_stage_cfg)<br>            <span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br>            <span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>                stage.<span class="hljs-built_in">eval</span>()<br>                <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>                    param.requires_grad = <span class="hljs-literal">False</span><br>            <br>            self.stages.append(stage)<br><br>            dpr = dpr[depth:]<br>            <span class="hljs-keyword">if</span> downsample:<br>                embed_dims = stage.downsample.out_channels<br>                input_resolution = stage.downsample.output_resolution<br>            <br><br>        <span class="hljs-keyword">if</span> norm_cfg <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            self.norm = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            self.norm = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init_weights</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).init_weights()<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            trunc_normal_(self.absolute_pos_embed, std=<span class="hljs-number">0.02</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        x = self.patch_embed(x)<br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            x = x + self.absolute_pos_embed<br>        x = self.drop_after_pos(x)<br><br>        <span class="hljs-keyword">for</span> stage <span class="hljs-keyword">in</span> self.stages:<br>            x = stage(x)<br><br>        x = self.norm(x) <span class="hljs-keyword">if</span> self.norm <span class="hljs-keyword">else</span> x<br><br>        <span class="hljs-keyword">return</span> x.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç½‘ç»œæ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> swin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer40 æœ€å°çš„kä¸ªæ•°</title>
      <link href="/2021/08/24/leetcode/leetcode-offer40/"/>
      <url>/2021/08/24/leetcode/leetcode-offer40/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€å°çš„kä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•´æ•°æ•°ç»„ arr ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„ k ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥4ã€5ã€1ã€6ã€2ã€7ã€3ã€8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1ã€2ã€3ã€4ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[3,2,1]</span>, k = 2<br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2]</span> æˆ–è€… <span class="hljs-comment">[2,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[0,1,2,1]</span>, k = 1<br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= k &lt;= arr.length &lt;= 10000</li><li>0 &lt;= arr[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å°è£…çš„sortedå‡½æ•°ï¼Œè¿™ç§æ–¹æ³•éœ€è¦æ’åºO(NlogN)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(arr)[<span class="hljs-number">0</span>:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯é‡‡å–å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œå¯ä»¥å°†å¤æ‚åº¦é™åˆ°O(N)<br>é¦–å…ˆå¤ä¹ ä¸€ä¸‹å¿«é€Ÿæ’åºçš„ä»£ç ã€‚Kç¥çš„æ–¹æ³•æ˜¯i&lt;jçš„æƒ…å†µä¸‹å°±è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ç§æ–¹å¼è¦æ³¨æ„jçš„æ”¶ç¼©è¦åœ¨içš„æ‰©å¼ ä¹‹å‰ï¼›è¿™æ ·å¯ä»¥ä¿è¯æœ€ååœæ­¢çš„æ—¶å€™iï¼ŒjæŒ‡å‘éƒ½æ˜¯æ¯”è¾ƒå°çš„é‚£ä¸ªæ•°å€¼ã€‚(æœ€åäº¤æ¢æ—¶i,jéƒ½å¯ä»¥ï¼Œå› ä¸ºç»“æŸæ—¶ä¸€å®šæœ‰iå’Œjç›¸ç­‰)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (i&lt;j):<br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>æœ€åäº¤æ¢çš„æ—¶å€™åªèƒ½æ˜¯jå¹¶ä¸”ä¸€å®šè¦ä¿è¯iå’Œjä¸å¯è¶Šç•Œï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨iå’Œjåˆ°ä¸´ç•Œå€¼çš„æ—¶å€™å°±ä¸ç”¨ç§»åŠ¨äº†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">True</span>):<br>        <span class="hljs-keyword">while</span> j&gt;l <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <br>        <span class="hljs-keyword">while</span> i&lt;r <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>   <br>        <span class="hljs-keyword">if</span>(i&gt;=j):<span class="hljs-keyword">break</span><br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>é‚£ä¹ˆè¿™ä¸ªé¢˜ç›®å€Ÿç”¨è¿™ç§æ€æƒ³åªè¦æ‰¾åˆ°è¿™ä¸ªpivotä»–åŸæœ¬æ‰€åœ¨çš„ä½ç½®ä¸‹æ ‡ä¸ºkï¼Œé‚£ä¹ˆä»–çš„å·¦è¾¹çš„éƒ¨åˆ†å°±æ˜¯è¦æ‰¾çš„éƒ¨åˆ†å“¦~~ğŸ˜‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>            <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>            pivot = arr[l]<br>            i,j = l,r<br>            <span class="hljs-keyword">while</span> (i&lt;j):<br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>                arr[i],arr[j] = arr[j],arr[i]<br>            arr[l], arr[j] = arr[j], arr[l]<br>            <span class="hljs-keyword">if</span>(k&gt;j):quicksort(j+<span class="hljs-number">1</span>,r)<br>            <span class="hljs-keyword">if</span>(k&lt;j):quicksort(l,j-<span class="hljs-number">1</span>)            <br>        quicksort(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> arr[:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿™ç§æ–¹æ³•çš„å¤æ‚åº¦æ˜¯N+N/2+N/4+N/8+â€¦ = N(1/2+1/4+1/8+â€¦) ~ 2N</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¿«é€Ÿæ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å¿«é€Ÿæ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢ä¸­çš„emoji</title>
      <link href="/2021/08/24/config/hexo-emoji/"/>
      <url>/2021/08/24/config/hexo-emoji/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨åšå®¢ä¸­ä½¿ç”¨emojiï¼Œå¯å¯çˆ±çˆ±å°è¡¨æƒ…ğŸ˜</p></blockquote><blockquote><p>ç›¸å…³é…ç½®å‚è§è¿™ä¸ªåšå®¢å“Ÿ <a href="https://www.zywvvd.com/2021/08/23/hexo/19%20hexo-emoji/hexo-emoji/">Hexo -19- æ·»åŠ emojiè¡¨æƒ…</a><br>å¯ä»¥åœ¨è¿™ä¸¤ä¸ªç½‘ç«™çœ‹çœ‹æœ‰å“ªäº›å°è¡¨æƒ…<br><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">https://www.webfx.com/tools/emoji-cheat-sheet/</a><br><a href="https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/">https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/</a></p></blockquote><h2 id="å®‰è£…æ¸²æŸ“å™¨">å®‰è£…æ¸²æŸ“å™¨</h2><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">npm un hexo-renderer-marked <span class="hljs-comment">--save</span><br>npm i hexo-renderer-markdown-<span class="hljs-keyword">it</span> <span class="hljs-comment">--save</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>åœ¨_config.ymlæ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹æ®µä»£ç </p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Markdown-it config</span><br><span class="hljs-comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">render:</span><br>    <span class="hljs-attr">html:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">xhtmlOut:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">linkify:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">typographer:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">quotes:</span> <span class="hljs-string">'â€œâ€â€˜â€™'</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-abbr</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-footnote</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-ins</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sup</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-emoji</span>  <span class="hljs-comment"># add emoji</span><br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çš„æ—¶å€™å°±ç›´æ¥åœ¨mdæ–‡ä»¶ä¸­ç”¨ä¸¤ä¸ªå¼•å·ä¸­é—´å¡«å†™emojiçš„åç§°å³å¯å•¦ :happy:</p>]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YOLOv1</title>
      <link href="/2021/08/21/deep_learning/yolov1/"/>
      <url>/2021/08/21/deep_learning/yolov1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>YOLOç³»åˆ—æ˜¯åŸºäºæ·±åº¦å­¦ä¹ çš„å›å½’æ–¹æ³•ã€‚YOLOï¼šyou only look onceçš„ä¼˜ç‚¹æ˜¯å®æ—¶å¿«é€Ÿç›®æ ‡æ£€æµ‹ã€‚ä¸€ç›´éƒ½å¾ˆæƒ³æŠŠYOLOç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹ã€‚åœ¨æ­¤ï¼Œè®°å½•ä¸‹ç›¸å…³çš„çŸ¥è¯†å’Œä¸ªäººç†è§£ã€‚åšç¬”è®°ä¹Ÿç®—æ˜¯ç£ä¿ƒæˆ‘å¥½å¥½çš„æ•´ç†ç›¸å…³å†…å®¹å­ï¼okå¼€å§‹ï¼ğŸ˜‰</p></blockquote><blockquote><p>å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/136382095">https://zhuanlan.zhihu.com/p/136382095</a><br><a href="https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw">https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw</a></p></blockquote><h2 id="YOLO-å’Œ-Faster-R-CNN">YOLO å’Œ Faster R-CNN</h2><p>ä¸¤ä¸ªç½‘ç»œçš„å·®å¼‚æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li><p>Yoloæ²¡æœ‰æ˜¾ç¤ºæ±‚å–region proposalçš„è¿‡ç¨‹ï¼Œè™½ç„¶Faster R-CNNä¸­çš„RPNäºFast R-CNNå…±äº«å·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯éœ€è¦åå¤çš„è®­ç»ƒRPNäºFast R-CNNï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§æ–¹å¼è¿˜æ˜¯éœ€è¦â€look twiceâ€œ ï¼šç¡®å®šå€™é€‰æ¡†å’Œåˆ†ç±»ï¼›è€ŒYoloç³»åˆ—åªéœ€è¦â€look onceâ€œ</p><blockquote><p>å…³äºFaster R-CNNçš„çŸ¥è¯†åç»­å†å¡«å‘â€¦</p></blockquote></li><li><p>Yoloå°†æ£€æµ‹ç»Ÿä¸€ä¸ºä¸€ä¸ªå›å½’é—®é¢˜ã€‚è€ŒR-CNNå°†æ£€æµ‹ç»“æœåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œæ±‚è§£ï¼šåˆ†ç±»<code>ç‰©ä½“çš„ç±»åˆ«</code> ï¼Œ å›å½’<code>ç‰©ä½“çš„bounding  box</code></p></li></ol><h2 id="YOLOv1">YOLOv1</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡ä¸‹è½½ï¼š</strong> <a href="http://arxiv.org/abs/1506.02640">http://arxiv.org/abs/1506.02640</a></p><p><strong>ä»£ç ä¸‹è½½ï¼š</strong> <a href="https://github.com/pjreddie/darknet">https://github.com/pjreddie/darknet</a></p><p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†æ•´å¼ å›¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼ˆä¸Faster-RCNNç±»ä¼¼ï¼‰ï¼Œç›´æ¥åœ¨è¾“å‡ºå±‚å¯¹BBoxçš„ä½ç½®å’Œç±»åˆ«è¿›è¡Œå›å½’ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov1 è®ºæ–‡ï¼šYou Only Look Once:Unified, Real-Time Object Detection</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/yolov1.pdf" width="100%" height="650"></iframe></details><p>å®ç°æ–¹æ³•ï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic1.png" alt=""></p><ul><li><p>é¦–å…ˆå°†ä¸€å¹…å›¾åƒåˆ†æˆS*Sä¸ªç½‘æ ¼ï¼ˆgrid cellï¼‰,å¦‚æœæŸä¸ªç‰©ä½“çš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç‰©ä½“ã€‚</p></li><li><p>æ¯ä¸ªç½‘æ ¼éœ€è¦é¢„æµ‹Bä¸ªè¾¹ç•Œæ¡†(BBox)çš„ä½ç½®ä¿¡æ¯å’Œå¯¹åº”çš„ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰;ä¸€ä¸ªBBoxå¯¹åº”å››ä¸ªä½ç½®ä¿¡æ¯å’Œä¸€ä¸ªconfidenceä¿¡æ¯ï¼Œconfidenceè¡¨ç¤ºæ‰€é¢„æµ‹çš„Boxä¸­å«æœ‰objextçš„ç½®ä¿¡åº¦å’Œboxçš„é¢„æµ‹æƒ…å†µã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯$conf = Pr(object)\times IOU^{truth}_{pred}$ å¦‚æœæœ‰objectè½åœ¨å…¶ä¸­çš„grid cellé‡Œï¼Œé‚£ä¹ˆç¬¬ä¸€é¡¹ä¸º1å¦åˆ™å–0.</p></blockquote></li></ul><p>æ¯ä¸ªbounding boxè¦é¢„æµ‹(x, y, w, h)å’Œconfidenceå…±5ä¸ªå€¼ï¼Œæ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹ä¸€ä¸ªç±»åˆ«ä¿¡æ¯ï¼Œè®°ä¸ºCç±»ã€‚åˆ™SxSä¸ªç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹Bä¸ªbounding boxè¿˜è¦é¢„æµ‹Cä¸ªcategoriesã€‚åˆ¤æ–­è¿™ä¸ªè½åœ¨æ­¤ç½‘æ ¼çš„ç‰©ä½“æ˜¯cä¸ªç‰©ä½“ä¸­çš„å“ªä¸€ä¸ªç‰©ä½“ã€‚è¾“å‡ºå°±æ˜¯S x S x (5*B+C)çš„ä¸€ä¸ªtensorã€‚ï¼ˆ<strong>æ³¨æ„ï¼šclassä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªç½‘æ ¼çš„ï¼Œconfidenceä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªbounding boxçš„ã€‚</strong>ï¼‰</p><p>ä¸¾ä¾‹è¯´æ˜: åœ¨PASCAL VOCä¸­ï¼Œå›¾åƒè¾“å…¥ä¸º448x448ï¼Œå–S=7ï¼ŒB=2ï¼Œä¸€å…±æœ‰20ä¸ªç±»åˆ«(C=20)ã€‚åˆ™è¾“å‡ºå°±æ˜¯7x7x30çš„ä¸€ä¸ªtensorã€‚*å…¶ä¸­30ä¹Ÿå°±æ˜¯2*5+20ï¼Œæ•´ä¸ªç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic2.png" alt=""></p><p>åœ¨testçš„æ—¶å€™ï¼Œæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„classä¿¡æ¯ä¸BBoxå¾—åˆ°çš„confidenciä¿¡æ¯ç›¸ä¹˜ï¼Œå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªBBoxçš„class-specific confidence scoreï¼š</p>$$Pr(Class_i \vert Object) \times Pr(Object) \times IOU^{truth}_{pred} = Pr(Class_i) \times IOU^{truth}_{pred}$$<p>å¾—åˆ°æ¯ä¸ªboxçš„class-specific confidence scoreä¹‹åï¼Œè®¾ç½®é˜ˆå€¼ï¼Œè¿‡æ»¤æ‰å¾—åˆ†ä½çš„boxesï¼Œå¯¹ä¿ç•™çš„boxesè¿›è¡ŒNMSå¤„ç†ï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æœã€‚</p><blockquote><p>NMSï¼šnon-maximum suppression éæå¤§æŠ‘åˆ¶ï¼Œå…¶æ“ä½œå³æ˜¯ä»é›†åˆä¸­æ‰¾åˆ°å¾—åˆ†scoreæœ€é«˜çš„å€™é€‰æ¡†ï¼Œä¸å…¶ä»–å€™é€‰æ¡†è®¡ç®—IOUï¼Œåˆ é™¤é‡åˆç‡é«˜çš„å€™é€‰æ¡†ï¼Œå› ä¸ºè¿™äº›å€™é€‰æ¡†å’Œæœ€é«˜scoreçš„æ¡†â€œç«äº‰â€åŒä¸€ä¸ªç‰©ä½“ï¼Œä½†æ˜¯scoreåˆä¸å¤Ÿé«˜ï¼Œæ‰€ä»¥æ˜¯åº”è¯¥è¢«æ·˜æ±°çš„ã€‚ç¡®å®šäº†è¿™ä¸ªæœ€é«˜scoreçš„BBOXä¹‹åå°±å¯ä»¥ä¸è€ƒè™‘ä»–äº†ï¼Œå†ç»§ç»­æ‰¾å¯»æœ€é«˜scoreçš„å€™é€‰æ¡†ï¼ŒæŠŠä¸ä»–ç«äº‰çš„å€™é€‰æ¡†ç»™passæ‰å³å¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p></blockquote><h4 id="æµç¨‹">æµç¨‹</h4><ol><li>è¾“å…¥ä¸€å¼ å›¾åƒå°†å…¶åˆ†ä¸º7*7çš„ç½‘æ ¼</li><li>å¯¹äºæ¯ä¸€ä¸ªç½‘æ ¼,é¢„æµ‹ä¸¤ä¸ªè¾¹æ¡†ï¼›ï¼ˆåŒ…æ‹¬è¾¹æ¡†çš„ç½®ä¿¡åº¦å’Œå…¶å¯¹åº”çš„ç±»åˆ«æ¦‚ç‡ï¼‰</li><li>æ ¹æ®é¢„æµ‹çš„7*7*2çš„ç›®æ ‡çª—å£ï¼Œé¦–å…ˆé€šè¿‡é˜ˆå€¼å»é™¤å¯èƒ½æ€§åœ°çš„çª—å£ï¼Œå†é‡‡ç”¨NMSå»é™¤å†—ä½™çš„çª—å£ã€‚</li></ol><h3 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°</h3><p>æœ€é‡è¦çš„æ˜¯è®¾è®¡æŸå¤±å‡½æ•°ï¼Œä½œè€…ä½¿ç”¨äº†sum-squared error lossï¼ˆ<a href="https://blog.csdn.net/shengyan5515/article/details/84036734">https://blog.csdn.net/shengyan5515/article/details/84036734</a> ï¼‰</p><blockquote><p>å…³äºYOLOçš„æŸå¤±å‡½æ•°ï¼Œé‡‡ç”¨sum-squared erroræ•´åˆlocalization errorï¼ˆbboxesçš„åæ ‡è¯¯å·®ï¼‰å’Œclassification errorï¼Œå…¶ä¸­classification erroråŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ²¡æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼</p></blockquote><p><img src="https://picture.mulindya.com/yolov1-pic3.png" alt=""></p><h4 id="é—®é¢˜ï¼š">é—®é¢˜ï¼š</h4><ul><li>8ç»´çš„localization error(4*2),å’Œ20ç»´çš„classification erroråŒç­‰é‡è¦æ˜¯ä¸åˆç†çš„</li><li>å¦‚æœä¸€ä¸ªç½‘æ ¼ä¸­æ²¡æœ‰object(å¤§éƒ¨åˆ†),å°†è¿™äº›ç½‘æ ¼çš„boxå¯¹åº”confidenceè®¾ç½®ä¸º0ï¼Œæ˜¯æ¯”è¾ƒâ€œæš´åŠ›â€çš„ï¼Œä¼šè®©lossç‰¹åˆ«å¤§ï¼Œç½‘ç»œä¸ç¨³å®šå¹¶ä¸”ä¸å®¹æ˜“æ”¶æ•›ã€‚</li></ul><h4 id="è§£å†³æ–¹æ¡ˆï¼š">è§£å†³æ–¹æ¡ˆï¼š</h4><ul><li><p>å¯¹äºåæ ‡é¢„æµ‹èµ‹äºˆæ›´å¤§çš„æƒé‡ï¼ˆé‡è§†æ¡†çš„ä½ç½®ï¼‰</p></li><li><p>å¯¹æ²¡æœ‰objectçš„confidence lossï¼Œèµ‹äºˆå°çš„æƒé‡(æ³¨æ„åŠ›è½¬ç§»åˆ°å…¶ä»–åœ°æ–¹)</p></li><li><p>å¯¹å­˜åœ¨objectçš„boxçš„confidence losså’Œç±»åˆ«çš„é¢„æµ‹æƒé‡æ­£å¸¸å–1</p></li></ul><blockquote><p>ä¸ºä»€ä¹ˆç¬¬äºŒé¡¹å‡ºç°äº†æ ¹å·å‘¢ï¼Ÿ</p><p>æ˜¯å› ä¸ºæˆ‘ä»¬çš„è¯¯å·®åº¦é‡ï¥¾ååº”å‡ºå¤§boxçš„å°åå·®è¦å°äºå°boxã€‚ä¸ºäº†é€æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¢„æµ‹ï¦ºè¾¹ç•Œæ¡†çš„å®½åº¦å’Œé«˜åº¦çš„å¹³â½…æ ¹ï¼Œè€Œï¥§æ˜¯ç›´æ¥é¢„æµ‹å®½åº¦å’Œâ¾¼åº¦ã€‚å› ä¸ºæ ¹å·ä¹‹åæ›²çº¿è¶Šå¤§è¶Šå¹³ç¼“ã€‚è¿™æ ·å¯¹å°çš„boxçš„åå·®ç›¸å¯¹æ›´åŠ æ•æ„Ÿã€‚</p></blockquote><p>è§‚å¯ŸæŸå¤±å‡½æ•°å¯ä»¥çœ‹å‡ºï¼š</p><ul><li><p>åªæœ‰åœ¨ç½‘æ ¼ä¸­å­˜åœ¨objectçš„æ—¶å€™æ‰ä¼šå¯¹classification errorè¿›è¡Œè®¡ç®—</p></li><li><p>åªæœ‰å½“æŸä¸ªç½‘æ ¼çš„boxçš„å’Œå¯¹äºçš„ground truth boxæ˜¯è´Ÿè´£å›å½’çš„ï¼Œæ‰ä¼šå¯¹è¿™ä¸ªbox çš„ä½ç½®xywhæŸå¤±è¿›è¡Œè®¡ç®—ï¼Œç¡®å®šå¯¹åº”ground truth boxå°±éœ€è¦å°†è¿™ä¸ªboxä¸è¿™ä¸ªç½‘æ ¼ä¸­çš„æ‰€æœ‰bboxè®¡ç®—IOUï¼Œæœ€å¤§çš„é‚£ä¸ªground truthæ˜¯ç”±è¿™ä¸ªç½‘ç»œè´Ÿè´£é¢„æµ‹çš„ã€‚</p><p>æ¿€æ´»å‡½æ•°ä½¿ç”¨çš„æ˜¯leak reluï¼Œæ¨¡å‹æ˜¯ä½¿ç”¨é¢„è®­ç»ƒçš„Imagenetã€‚</p></li></ul><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ul><li><p>å¿«é€Ÿï¼Œpiplineç®€å•</p></li><li><p>èƒŒæ™¯è¯¯æ£€ç‡ä½</p></li><li><p>é€šç”¨æ€§å¼ºï¼Œå¯¹è‰ºæœ¯å“ä¸­çš„ç‰©ä½“ä¹Ÿå¯ä»¥æ£€æµ‹ï¼Œå¯¹éè‡ªç„¶çš„å›¾åƒç‰©ä½“çš„æ£€æµ‹ç‡æ¯”ä¸€èˆ¬çš„DOMï¼ŒR-CNNéƒ½è¦å¥½å¾ˆå¤š</p></li></ul><h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3><ul><li>ç”±äºè¾“å‡ºå±‚æ˜¯å…¨è¿æ¥å±‚ï¼Œå› æ­¤åœ¨æ£€æµ‹æ—¶ï¼ŒYOLOè®­ç»ƒæ¨¡å‹åªèƒ½æ”¯æŒä¸è®­ç»ƒå›¾åƒåˆ†è¾¨ç‡ç›¸åŒçš„å›¾åƒ</li><li>æ¯ä¸ªæ ¼å­å¯ä»¥é¢„æµ‹Bä¸ªBboxï¼Œä½†æ˜¯æœ€ç»ˆåªèƒ½é€‰æ‹©IOUæœ€é«˜çš„BBoxä½œä¸ºç‰©ä½“æ£€æµ‹ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå„è‡ªåªèƒ½æœ€å¤šé¢„æµ‹å‡ºä¸€ä¸ªç‰©ä½“ï¼›å½“ç‰©ä½“æ¯”è¾ƒå°æˆ–è€…åˆ†å¸ƒå¯†é›†çš„æ—¶å€™ä¹Ÿåªèƒ½æ£€æµ‹å‡ºä¸€ä¸ªã€‚</li><li>åœ¨lossçš„æ±‚è§£æ–¹ç¨‹ä¸­ï¼Œå¤§ç›®æ ‡å’Œå°ç›®æ ‡çš„IOUè¯¯å·®åœ¨lossè®¡ç®—ä¸Šæ˜¯æ¥è¿‘çš„ï¼ˆå³ä½¿ç”¨äº†å¹³æ–¹æ ¹ç¼“è§£ï¼‰ï¼Œå› æ­¤å¯¹äºå°ç‰©ä½“çš„æ£€æµ‹å‡†ç¡®æ€§ä¸é«˜ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç›®æ ‡æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
            <tag> yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer19</title>
      <link href="/2021/08/21/leetcode/leetcode-offer19/"/>
      <url>/2021/08/21/leetcode/leetcode-offer19/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…å«â€™. â€˜å’Œâ€™<em>â€˜çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦â€™.â€˜è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œâ€™</em>'è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆå«0æ¬¡ï¼‰ã€‚åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"aaa"ä¸æ¨¡å¼"a.a"å’Œ"ab<em>ac</em>a"åŒ¹é…ï¼Œä½†ä¸"aa.a"å’Œ"ab*a"å‡ä¸åŒ¹é…ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"aa"</span><br>p = <span class="hljs-string">"a"</span><br><span class="hljs-section">è¾“å‡º: false</span><br><span class="hljs-section">è§£é‡Š: "a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aa"</span><br>p = <span class="hljs-comment">"a*"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ <span class="hljs-string">'a'</span>ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² <span class="hljs-comment">"aa"</span> å¯è¢«è§†ä¸º <span class="hljs-string">'a'</span> é‡å¤äº†ä¸€æ¬¡ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"ab"</span><br>p = <span class="hljs-string">".*"</span><br><span class="hljs-section">è¾“å‡º: true</span><br><span class="hljs-section">è§£é‡Š: ".*" è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ'*'ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ'.'ï¼‰ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aab"</span><br>p = <span class="hljs-comment">"c*a*b"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ <span class="hljs-string">'c'</span> ä¸º <span class="hljs-number">0</span> ä¸ª, <span class="hljs-string">'a'</span> è¢«é‡å¤ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² <span class="hljs-comment">"aab"</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-5ï¼š">ç¤ºä¾‹ 5ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"mississippi"</span><br>p = <span class="hljs-string">"mis*is*p*."</span><br><span class="hljs-section">è¾“å‡º: false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>s</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ã€‚</li><li><code>p</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ä»¥åŠå­—ç¬¦ <code>.</code> å’Œ <code>*</code>ï¼Œæ— è¿ç»­çš„ <code>'*'</code>ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯å»ºç«‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚dp[i][j]è¡¨ç¤ºå‰jä¸ªæ¨¡å¼ä¸²åŒ¹é…sçš„å‰iä¸ªå­—æ¯çš„åŒ¹é…æƒ…å†µã€‚</p><p>é‚£ä¹ˆå°±è¦åˆ†æƒ…å†µè®¨è®ºäº†ï¼Œä¸€ç§æ˜¯p[j]æ˜¯<code>å­—æ¯</code>ï¼Œç¬¬äºŒæ˜¯<code> .</code> ,ç¬¬ä¸‰æ˜¯ <code>*</code>.</p><ol><li><p><code>å­—æ¯</code>:ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœ$p[j]==s[i]$å°±å¯ä»¥è½¬ç§» $dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code> .</code> : å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ç›´æ¥è½¬ç§»$dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code>*</code>ï¼šå¦‚æœå‰ä¸€ä¸ªå­—ç¬¦$p[j-1]==s[i]$ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>*</code>å¯ä»¥é€‰æ‹©æ˜¯åŒ¹é…sçš„<strong>ä¸€ä¸ªå…ƒç´ è¿˜æ˜¯å¤šä¸ªå…ƒç´ </strong></p><p>$dp[i][j] = dp[i][j-2] \quad or \quad dp[i-1][j]$</p></li></ol><p>å¦‚æœå…ƒç´ ä¸ç›¸ç­‰ï¼Œå°±ç›´æ¥å‘å‰åŒ¹é…ï¼ˆ0æ¬¡åŒ¹é…ï¼‰$dp[i][j-2]$</p><blockquote><p>$dp[i][j-2]$æ˜¯åŒ¹é…0ä¸ªï¼›$dp[i-1][j]$æ˜¯åŒ¹é…å¤šä¸ªï¼Œå¿½ç•¥iå…ƒç´ ç»§ç»­å‘å‰æŸ¥æ‰¾ï¼›$dp[i-1][j-2]$æ˜¯åŒ¹é…1ä¸ªæ˜¯åŒ…å«äºå¤šä¸ª$dp[i-1][j]$ä¸­</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isMatch</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, p: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        s = <span class="hljs-string">" "</span>+s<br>        p = <span class="hljs-string">" "</span>+p<br>        dp = [[<span class="hljs-literal">False</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(p))] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s))]<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(p)):<br>                <span class="hljs-keyword">if</span>(p[j]!=<span class="hljs-string">'*'</span>):<br>                    <span class="hljs-keyword">if</span>((p[j]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>) <span class="hljs-keyword">or</span> p[j]==s[i]):<br>                        dp[i][j] = dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">if</span>(p[j-<span class="hljs-number">1</span>]==s[i] <span class="hljs-keyword">or</span> (p[j-<span class="hljs-number">1</span>]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>)): dp[i][j] = dp[i][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j] <br>                    <span class="hljs-comment">#dp[i][j] = dp[i][j-2] or dp[i-1][j] #ç›´æ¥0æ¬¡æˆ–è€…å¤šæ¬¡</span><br>                    <span class="hljs-keyword">else</span>:dp[i][j] = dp[i][j-<span class="hljs-number">2</span>]<br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>][<span class="hljs-built_in">len</span>(p)-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer18 åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</title>
      <link href="/2021/08/21/leetcode/leetcode-offer18/"/>
      <url>/2021/08/21/leetcode/leetcode-offer18/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚è¿”å›åˆ é™¤åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚<br>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 5</span><br><span class="hljs-section">è¾“å‡º: [4,1,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;5&nbsp;çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 1 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 1</span><br><span class="hljs-section">è¾“å‡º: [4,5,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;1&nbsp;çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 5 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>é¢˜ç›®ä¿è¯é“¾è¡¨ä¸­èŠ‚ç‚¹çš„å€¼äº’ä¸ç›¸åŒ</li><li>è‹¥ä½¿ç”¨ C æˆ– C++ è¯­è¨€ï¼Œä½ ä¸éœ€è¦ free æˆ– delete è¢«åˆ é™¤çš„èŠ‚ç‚¹</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¸¸è§„æ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteNode</span>(<span class="hljs-params">self, head: ListNode, val: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        p = head<br>        <span class="hljs-keyword">if</span>(head.val==val):<span class="hljs-keyword">return</span> p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span>(p.<span class="hljs-built_in">next</span>):<br>            <span class="hljs-keyword">if</span>(p.<span class="hljs-built_in">next</span>.val == val):<br>                p.<span class="hljs-built_in">next</span> = p.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>                <span class="hljs-keyword">return</span> head<br>            p = p.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer24 åè½¬é“¾è¡¨</title>
      <link href="/2021/08/21/leetcode/leetcode-offer24/"/>
      <url>/2021/08/21/leetcode/leetcode-offer24/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åè½¬é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL<br>è¾“å‡º: <span class="hljs-number">5</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">1</span>-&gt;NULL<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ¯”è¾ƒå¸¸è§„ï¼Œéå†é“¾è¡¨æŠŠå…ƒç´ ç§»åŠ¨åˆ°å¤´èŠ‚ç‚¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(head):<span class="hljs-keyword">return</span> head<br>        p = head.<span class="hljs-built_in">next</span><br>        head.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span>(p):<br>            t = p.<span class="hljs-built_in">next</span><br>            p.<span class="hljs-built_in">next</span> = head<br>            head = p<br>            p = t<br>        <span class="hljs-keyword">return</span> head<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer16  æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</title>
      <link href="/2021/08/21/leetcode/leetcode-offer16/"/>
      <url>/2021/08/21/leetcode/leetcode-offer16/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œxnï¼‰ã€‚ä¸å¾—ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.00000</span>, n = <span class="hljs-number">10</span><br>è¾“å‡ºï¼š<span class="hljs-number">1024.00000</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.10000</span>, n = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">9.26100</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-100.0 &lt; x &lt; 100.0</li><li>$-2^{31}$ &lt;= n &lt;= $2^{31}-1$</li><li>$-10^4$ &lt;= $x^n$ &lt;= $10^4$</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å°†xä¹˜ä»¥næ¬¡ï¼Œä½†æ˜¯è¿™ç§æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚åˆ¤é¢˜æ—¶æ—¶é—´è¶…å‡ºé™åˆ¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n):<br>            result *= x<br>            n -=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šå¯ä»¥åˆ©ç”¨x *= x å’Œå¯¹nå³ç§»æ“ä½œå¯ä»¥å¾—åˆ°$x,x<sup>2,x</sup>4,x<sup>8,x</sup>{16}â€¦$ï¼Œè€Œ$x<sup>{11}$å¯ä»¥äºŒè¿›åˆ¶æŒ‡æ•°è¡¨ç¤ºä¸º$x</sup>{1011}$ä¹Ÿå°±æ˜¯$x \times x^2 \times x^8$ã€‚è¿™æ ·åŸæœ¬éœ€è¦å¾ªç¯11æ¬¡å°±åªéœ€è¦å¾ªç¯4æ¬¡</p><p>æ ¹æ®æç¤ºæ¡ä»¶ï¼Œå¾ªç¯æœ€å¤šä¸ä¼šè¶…è¿‡32æ¬¡ã€‚å°±å¾ˆæ£’ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n): <span class="hljs-comment">#æ—¶é—´å¤æ‚åº¦å¤§å¤§é™ä½ ä¸è¶…è¿‡32æ¬¡ O(logn)</span><br>            <span class="hljs-keyword">if</span>(n &amp; <span class="hljs-number">1</span>):result *= x <span class="hljs-comment">#çœ‹æœ€åä¸€ä½æ˜¯å¦ä¸º1</span><br>            x *= x<br>            n = n&gt;&gt;<span class="hljs-number">1</span> <span class="hljs-comment">#nå³ç§» 1011-ã€‹101</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¿«é€Ÿå¹‚ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> å¿«é€Ÿå¹‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer17 æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</title>
      <link href="/2021/08/20/leetcode/leetcode-offer17/"/>
      <url>/2021/08/20/leetcode/leetcode-offer17/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•°å­— nï¼ŒæŒ‰é¡ºåºæ‰“å°å‡ºä» 1 åˆ°æœ€å¤§çš„ n ä½åè¿›åˆ¶æ•°ã€‚æ¯”å¦‚è¾“å…¥ 3ï¼Œåˆ™æ‰“å°å‡º 1ã€2ã€3 ä¸€ç›´åˆ°æœ€å¤§çš„ 3 ä½æ•° 999ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: n = <span class="hljs-number">1</span><br>è¾“å‡º: [<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">5,6,7,8</span>,<span class="hljs-number">9</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>ç”¨è¿”å›ä¸€ä¸ªæ•´æ•°åˆ—è¡¨æ¥ä»£æ›¿æ‰“å°</li><li>n ä¸ºæ­£æ•´æ•°</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å€Ÿç”¨pythonçš„ç±»å‹è½¬æ¢çš„åŒ…å®¹æ€§ï¼Œç›´æ¥å¯ä»¥è¿”å›åˆ—è¡¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">pow</span>(<span class="hljs-number">10</span>,n))] <span class="hljs-comment">#æˆ–è€…10**n</span><br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œè€ƒç‚¹æ˜¯å¤§æ•°è¶Šç•Œæƒ…å†µä¸‹çš„æ‰“å°ã€‚<br>è§£å†³æ€è·¯ï¼Œç”¨å­—ç¬¦ä¸²çš„å…¨æ’åˆ—æ¥è§£å†³æ•°å­—çš„è¶Šç•Œæƒ…å†µã€‚åŸºäºåˆ†æ²»ç®—æ³•çš„æ€æƒ³ï¼Œå…ˆå›ºå®šé«˜ä½ï¼Œå‘ä½ä½é€’å½’ï¼Œå½“ä¸ªä½å·²è¢«å›ºå®šæ—¶ï¼Œæ·»åŠ æ•°å­—çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚å½“ n = 2æ—¶ï¼ˆæ•°å­—èŒƒå›´ 1 - 99 ï¼‰ï¼Œå›ºå®šåä½ä¸º 0- 9 ï¼ŒæŒ‰é¡ºåºä¾æ¬¡å¼€å¯é€’å½’ï¼Œå›ºå®šä¸ªä½ 0 - 9 ï¼Œç»ˆæ­¢é€’å½’å¹¶æ·»åŠ æ•°å­—å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; [<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">x</span>):</span><br>            <span class="hljs-keyword">if</span> x == n:<br>                s = <span class="hljs-string">''</span>.join(num[self.start:])<br>                <span class="hljs-keyword">if</span> s != <span class="hljs-string">'0'</span>: res.append(<span class="hljs-built_in">int</span>(s))<br>                <span class="hljs-keyword">if</span> n - self.start == self.nine: self.start -= <span class="hljs-number">1</span><br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>                <span class="hljs-keyword">if</span> i == <span class="hljs-number">9</span>: self.nine += <span class="hljs-number">1</span><br>                num[x] = <span class="hljs-built_in">str</span>(i)<br>                dfs(x + <span class="hljs-number">1</span>)<br>            self.nine -= <span class="hljs-number">1</span><br>        <br>        num, res = [<span class="hljs-string">'0'</span>] * n, []<br>        self.nine = <span class="hljs-number">0</span><br>        self.start = n - <span class="hljs-number">1</span><br>        dfs(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><ul><li>å­—ç¬¦ä¸²å·¦è¾¹ç•Œå®šä¹‰ï¼š å£°æ˜å˜é‡ start è§„å®šå­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œï¼Œä»¥ä¿è¯æ·»åŠ çš„æ•°å­—å­—ç¬¦ä¸² num[start:] ä¸­æ— é«˜ä½å¤šä½™çš„ 0 ã€‚ä¾‹å¦‚å½“ n = 2 æ—¶, 1 - 9æ—¶ start = 1ï¼Œ 10 - 99 æ—¶ start = 0ã€‚</li><li>å·¦è¾¹ç•Œ start å˜åŒ–è§„å¾‹ï¼š è§‚å¯Ÿå¯çŸ¥ï¼Œå½“è¾“å‡ºæ•°å­—çš„æ‰€æœ‰ä½éƒ½æ˜¯ 9 æ—¶ï¼Œåˆ™ä¸‹ä¸ªæ•°å­—éœ€è¦å‘æ›´é«˜ä½è¿› 11 ï¼Œæ­¤æ—¶å·¦è¾¹ç•Œ start éœ€è¦å‡11 ï¼ˆå³é«˜ä½å¤šä½™çš„ 0 å‡å°‘ä¸€ä¸ªï¼‰ã€‚ä¾‹å¦‚å½“ n = 3ï¼ˆæ•°å­—èŒƒå›´ 1 - 999 ï¼‰æ—¶ï¼Œå·¦è¾¹ç•Œ start éœ€è¦å‡ 1 çš„æƒ…å†µæœ‰ï¼š â€œ009â€ è¿›ä½è‡³ â€œ010â€ ï¼Œ â€œ099â€ è¿›ä½è‡³ â€œ100â€ ã€‚è®¾æ•°å­—å„ä½ä¸­ 9 çš„æ•°é‡ä¸º nine ï¼Œæ‰€æœ‰ä½éƒ½ä¸º 9 çš„åˆ¤æ–­æ¡ä»¶å¯ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼šn - start = nineç»Ÿè®¡ nine çš„æ–¹æ³•ï¼š å›ºå®šç¬¬ x ä½æ—¶ï¼Œå½“ i = 9åˆ™æ‰§è¡Œ nine = nine + 1 ï¼Œå¹¶åœ¨å›æº¯å‰æ¢å¤ nine = nine - 1</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¤§æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å¤§æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‹‰æ™®æ‹‰æ–¯ç®—å­</title>
      <link href="/2021/08/20/img_process/laplace/"/>
      <url>/2021/08/20/img_process/laplace/</url>
      
        <content type="html"><![CDATA[<blockquote><p>â€‹å›¾åƒé”åŒ–å¤„ç†çš„ä½œç”¨æ˜¯ä½¿ç°åº¦åå·®å¢å¼ºï¼Œä»è€Œä½¿æ¨¡ç³Šå›¾åƒå˜å¾—æ›´åŠ æ¸…æ™°ã€‚å›¾åƒæ¨¡ç³Šçš„å®è´¨å°±æ˜¯å›¾åƒå—åˆ°å¹³å‡è¿ç®—æˆ–ç§¯åˆ†è¿ç®—ï¼Œå› æ­¤å¯ä»¥å¯¹å›¾åƒè¿›è¡Œé€†è¿ç®—ï¼Œå¦‚å¾®åˆ†è¿ç®—èƒ½å¤Ÿçªå‡ºå›¾åƒç»†èŠ‚ï¼Œä½¿å›¾åƒå˜å¾—æ›´ä¸ºæ¸…æ™°ã€‚<br>â€‹ç§¯åˆ†è¿ç®—çš„æ¨¡æ¿å¯ä»¥å¹³æ»‘å›¾åƒï¼Œåè¿‡æ¥å¯¹åº”å¾®åˆ†è¿ç®—çš„æ¨¡æ¿å·ç§¯å¯ä»¥é”åŒ–å›¾åƒã€‚é”åŒ–æ¨¡æ¿ç³»æ•°çš„å–å€¼å†ä¸­å¿ƒä¸ºæ­£æ•°è€Œå‘¨å›´ä¸ºè´Ÿæ•°ã€‚æˆ–è€…ä¸­å¿ƒä¸ºè´Ÿæ•°å‘¨å›´ä¸ºæ­£æ•°ã€‚è€Œæ‹‰æ™®æ‹‰æ–¯ç®—å­å°±æ˜¯ä¸€ç§å¸¸ç”¨çš„çº¿æ€§é”åŒ–æ»¤æ³¢çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯">æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯</h2><p>åœ¨å›¾åƒä¸­çš„è¾¹ç¼˜åŒºåŸŸï¼Œåƒç´ å€¼ä¼šå‘ç”Ÿâ€œè·³è·ƒâ€ï¼Œå¯¹è¿™äº›åƒç´ æ±‚å¯¼ï¼Œåœ¨å…¶ä¸€é˜¶å¯¼æ•°åœ¨è¾¹ç¼˜ä½ç½®ä¸ºæå€¼ï¼ˆSobelç®—å­ï¼‰ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic1.png" alt="img"></p><p>å¦‚æœå¯¹åƒç´ å€¼æ±‚äºŒé˜¶å¯¼æ•°ï¼Œä¼šå‘ç°è¾¹ç¼˜å¤„çš„å¯¼æ•°å€¼ä¸º0ï¼›<strong>ä½†æ˜¯å¹¶ä¸æ˜¯è¯´äºŒé˜¶å¯¼æ•°ä¸º0å°±æ„å‘³ç€æ˜¯è¾¹ç¼˜</strong>ã€‚</p><p><img src="https://picture.mulindya.com/laplace-pic2.png" alt=""></p><h2 id="è®¡ç®—æ–¹æ³•">è®¡ç®—æ–¹æ³•</h2><h3 id="åƒç´ äºŒé˜¶å¯¼æ•°">åƒç´ äºŒé˜¶å¯¼æ•°</h3><p>äºŒé˜¶å¯¼æ•°çš„è®¡ç®—æ–¹æ³•ï¼š<br>$$<br>\nabla^2f = \frac{\partial^2 f}{\partial x<sup>2}+\frac{\partial</sup>2 f}{\partial y^2}<br>$$<br>åˆ†åˆ«æ²¿ç€Xå’ŒYæ–¹å‘æœ‰äºŒé˜¶åå¯¼æ•°å‡å¯å€Ÿç”¨å·®åˆ†è®¡ç®—ï¼š<br>$$<br>\frac{\partial^2 f}{\partial x^2} = f(x+1,y)+f(x-1,y)-2f(x,y)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial y^2} = f(x,y+1)+f(x,y-1)-2f(x,y)<br>$$</p><p>é‚£ä¹ˆå¯ä»¥å¾—åˆ°<br>$$<br>\nabla^2f = f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)<br>$$</p><h3 id="æ¨¡æ¿å·ç§¯">æ¨¡æ¿å·ç§¯</h3><p>å¯¹åº”çš„æ¨¡æ¿å·ç§¯å³ä¸º</p>$$\begin{bmatrix} 0 &amp; 1 &amp; 0\\ 1 &amp; -4 &amp; 1 \\ 0 &amp; 1 &amp; 0 \end{bmatrix} æˆ–è€…\begin{bmatrix} 0 &amp; -1 &amp; 0 \\ -1 &amp; 4 &amp; -1 \\ 0 &amp; -1 &amp; 0 \end{bmatrix}$$<p>å‰è€…æ˜¯maskä¸­å¿ƒä¸ºè´Ÿæ•°ï¼Œåè€…æ˜¯maskä¸­å¿ƒä¸ºæ­£æ•°ï¼›ä»–ä»¬çš„ç›®çš„å’Œæ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯è¡¨ç°å½¢å¼ç¨æœ‰ä¸åŒï¼Œå‰è€…åœ¨å·ç§¯åï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚åè€…ç›¸åã€‚</p><p>maskä¸ºè´Ÿæ•°æ—¶ï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚å¯ä»¥å‚è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic3.png" alt=""></p><p>ä¸Šè¿°æ˜¯è€ƒè™‘ä¸­å¿ƒåƒç´ 4é‚»åŸŸï¼Œç±»ä¼¼è¿˜æœ‰è€ƒè™‘8é‚»åŸŸï¼Œæ­¤æ—¶ä¸­å¿ƒç‚¹åŒº8æˆ–-8ï¼Œå‘¨å›´ä¸º-1æˆ–1ã€‚</p>$$\begin{bmatrix} 1 &amp; 1 &amp; 1 \\ 1 &amp; -8 &amp; 1 \\ 1 &amp; 1 &amp; 1 \end{bmatrix} æˆ–è€…\begin{bmatrix} -1 &amp; -1 &amp; -1 \\ -1 &amp; 8 &amp; -1 \\ -1 &amp; -1 &amp; -1 \end{bmatrix}$$<h2 id="å›¾åƒé”åŒ–">å›¾åƒé”åŒ–</h2><p>é”åŒ–å¤„ç†å¯é€‰æ‹©æ‹‰æ™®æ‹‰æ–¯ç®—å­å¯¹åŸå›¾åƒè¿›è¡Œå¤„ç†ï¼Œäº§ç”Ÿæè¿°ç°åº¦çªå˜çš„å›¾åƒï¼Œå†å°†æ‹‰æ™®æ‹‰æ–¯å›¾åƒä¸åŸå§‹å›¾åƒå åŠ è€Œäº§ç”Ÿé”åŒ–å›¾åƒã€‚æ‹‰æ™®æ‹‰æ–¯é”åŒ–çš„åŸºæœ¬æ–¹æ³•å¯ä»¥ç”±ä¸‹å¼è¡¨ç¤ºï¼š<br>$$<br>g(x,y) = \begin{cases} f(x,y) - \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºè´Ÿæ•°}\f(x,y) + \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºæ­£æ•°} \end{cases}<br>$$</p><p>è¿™ç§ç®€å•çš„é”åŒ–æ–¹æ³•æ—¢å¯ä»¥äº§ç”Ÿæ‹‰æ™®æ‹‰æ–¯é”åŒ–å¤„ç†çš„æ•ˆæœï¼ŒåŒæ—¶åˆèƒ½ä¿ç•™èƒŒæ™¯ä¿¡æ¯ï¼Œå°†åŸå§‹å›¾åƒå åŠ åˆ°æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„å¤„ç†ç»“æœä¸­å»ï¼Œå¯ä»¥ä½¿å›¾åƒä¸­çš„å„ç°åº¦å€¼å¾—åˆ°ä¿ç•™ï¼Œä½¿ç°åº¦çªå˜å¤„çš„å¯¹æ¯”åº¦å¾—åˆ°å¢å¼ºï¼Œ<strong>æœ€ç»ˆç»“æœæ˜¯åœ¨ä¿ç•™å›¾åƒèƒŒæ™¯çš„å‰æä¸‹ï¼Œçªç°å‡ºå›¾åƒä¸­å°çš„ç»†èŠ‚ä¿¡æ¯</strong>ã€‚</p><p>ç¼ºç‚¹æ˜¯æ²¡æœ‰äº†è¾¹ç¼˜çš„æ–¹å‘ä¿¡æ¯ï¼›åŒå€åŠ å¼ºäº†å™ªå£°çš„å½±å“ã€‚</p><blockquote><p>é”åŒ–å¤„ç†çš„å…¬å¼ä»æ¨¡æ¿å½¢å¼å®¹æ˜“çœ‹å‡ºï¼Œå¦‚æœåœ¨å›¾åƒä¸­ä¸€ä¸ªè¾ƒæš—çš„åŒºåŸŸä¸­å‡ºç°äº†ä¸€ä¸ªäº®ç‚¹ï¼Œé‚£ä¹ˆç”¨æ‹‰æ™®æ‹‰æ–¯è¿ç®—å°±ä¼šä½¿è¿™ä¸ªäº®ç‚¹å˜å¾—æ›´äº®ã€‚å› ä¸ºå›¾åƒä¸­çš„è¾¹ç¼˜å°±æ˜¯é‚£äº›ç°åº¦å‘ç”Ÿè·³å˜çš„åŒºåŸŸï¼Œæ‰€ä»¥æ‹‰æ™®æ‹‰æ–¯é”åŒ–æ¨¡æ¿åœ¨è¾¹ç¼˜æ£€æµ‹ä¸­å¾ˆæœ‰ç”¨ã€‚ä¸€èˆ¬å¢å¼ºæŠ€æœ¯å¯¹äºé™¡å³­çš„è¾¹ç¼˜å’Œç¼“æ…¢å˜åŒ–çš„è¾¹ç¼˜å¾ˆéš¾ç¡®å®šå…¶è¾¹ç¼˜çº¿çš„ä½ç½®ã€‚ä½†æ­¤ç®—å­å´å¯ç”¨äºŒæ¬¡å¾®åˆ†æ­£å³°å’Œè´Ÿå³°ä¹‹é—´çš„è¿‡é›¶ç‚¹æ¥ç¡®å®šï¼Œå¯¹å­¤ç«‹ç‚¹æˆ–ç«¯ç‚¹æ›´ä¸ºæ•æ„Ÿï¼Œå› æ­¤ç‰¹åˆ«é€‚ç”¨äºä»¥<strong>çªå‡ºå›¾åƒä¸­çš„å­¤ç«‹ç‚¹ã€å­¤ç«‹çº¿æˆ–çº¿ç«¯ç‚¹ä¸ºç›®çš„çš„åœºåˆ</strong>ã€‚åŒæ¢¯åº¦ç®—å­ä¸€æ ·ï¼Œæ‹‰æ™®æ‹‰æ–¯ç®—å­ä¹Ÿä¼šå¢å¼ºå›¾åƒä¸­çš„å™ªå£°ï¼Œæœ‰æ—¶ç”¨æ‹‰æ™®æ‹‰æ–¯ç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹æ—¶ï¼Œå¯å°†å›¾åƒå…ˆè¿›è¡Œ<strong>å¹³æ»‘å¤„ç†</strong>ã€‚</p></blockquote><h2 id="ä»£ç ">ä»£ç </h2><p>åœ¨OpenCVå†…ä½¿ç”¨å‡½æ•°cv2.Laplacian()å®ç°Laplacianç®—å­çš„è®¡ç®—ï¼Œè¯¥å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">dst = cv2.<span class="hljs-constructor">Laplacian( <span class="hljs-params">src</span>, <span class="hljs-params">ddepth</span>[, <span class="hljs-params">ksize</span>[, <span class="hljs-params">scale</span>[, <span class="hljs-params">delta</span>[, <span class="hljs-params">borderType</span>]]]] )</span><br></code></pre></td></tr></tbody></table></figure><p>å¼ä¸­ï¼š<br>â— dstä»£è¡¨ç›®æ ‡å›¾åƒã€‚<br>â— srcä»£è¡¨åŸå§‹å›¾åƒã€‚<br>â— ddepthä»£è¡¨ç›®æ ‡å›¾åƒçš„æ·±åº¦ã€‚<br>â— ksizeä»£è¡¨ç”¨äºè®¡ç®—äºŒé˜¶å¯¼æ•°çš„æ ¸å°ºå¯¸å¤§å°ã€‚è¯¥å€¼å¿…é¡»æ˜¯æ­£çš„å¥‡æ•°ã€‚<br>â— scaleä»£è¡¨è®¡ç®—Laplacianå€¼çš„ç¼©æ”¾æ¯”ä¾‹å› å­ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å€¼ä¸º1ï¼Œè¡¨ç¤ºä¸è¿›è¡Œç¼©æ”¾ã€‚<br>â— deltaä»£è¡¨åŠ åˆ°ç›®æ ‡å›¾åƒä¸Šçš„å¯é€‰å€¼ï¼Œé»˜è®¤ä¸º0ã€‚<br>â— borderType : ç”¨äºæ¨æ–­å›¾åƒå¤–éƒ¨åƒç´ çš„è¾¹ç•Œæ¨¡å¼ï¼Œä¸€èˆ¬æ˜¯DORDER_DEFAULT,ä¸æ”¯æŒBORDER_WRAP.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br>img = cv2.imread(<span class="hljs-string">"img.png"</span>,<span class="hljs-number">0</span>)<br>laplacian = cv2.Laplacian(img,cv2.CV_64F)<br>laplacian = cv2.convertScaleABs(laplacian)<br>cv2.imshow(img)<br>cv2.imshow(laplacian)<br></code></pre></td></tr></tbody></table></figure><p>åŸå›¾<br><img src="https://picture.mulindya.com/laplace-pic4.png" alt=""><br>å¤„ç†ä¹‹å<br><img src="https://picture.mulindya.com/laplace-pic5.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer22 é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</title>
      <link href="/2021/08/20/leetcode/leetcode-offer22/"/>
      <url>/2021/08/20/leetcode/leetcode-offer22/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬1ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ 6 ä¸ªèŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯ 1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ 3 ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º 4 çš„èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">ç»™å®šä¸€ä¸ªé“¾è¡¨: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>, å’Œ k = <span class="hljs-number">2.</span><br>è¿”å›é“¾è¡¨ <span class="hljs-number">4</span>-&gt;<span class="hljs-number">5.</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å…ˆç¡®å®šé“¾è¡¨çš„é•¿åº¦ï¼Œç„¶åå†ç§»åŠ¨å¯¹åº”çš„ç»“ç‚¹ä¸ªæ•°ã€‚é‚£ä¹ˆå°±éœ€è¦O(2n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(x):<br>            cnt += <span class="hljs-number">1</span><br>            x = x.<span class="hljs-built_in">next</span><br>        t = cnt - k<br>        <span class="hljs-keyword">while</span>(t):<br>            y = y.<span class="hljs-built_in">next</span><br>            t -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œä½¿å¾—xä¸yç›¸è·kå…ƒç´ ï¼Œç„¶åxéå†åˆ°æœ€åï¼Œyå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„ç»“æœã€‚æ­¤æ—¶åªéœ€è¦O(n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        <span class="hljs-keyword">while</span>(x):<br>            <span class="hljs-keyword">if</span>(k&lt;=<span class="hljs-number">0</span>):y = y.<span class="hljs-built_in">next</span><br>            x = x.<span class="hljs-built_in">next</span><br>            k -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Self-awareness</title>
      <link href="/2021/08/19/english/self-aware/"/>
      <url>/2021/08/19/english/self-aware/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><p><a href="https://paper.mulindya.com/Self-awareness.pdf">https://paper.mulindya.com/Self-awareness.pdf</a></p><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Self-awareness.pdf" width="100%" height="600"></iframe>]]></content>
      
      
      <categories>
          
          <category> è‹±è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer29 é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</title>
      <link href="/2021/08/19/leetcode/leetcode-offer29/"/>
      <url>/2021/08/19/leetcode/leetcode-offer29/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,2,3]</span>,<span class="hljs-comment">[4,5,6]</span>,<span class="hljs-comment">[7,8,9]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2,3,6,9,8,7,4,5]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šmatrix = [[<span class="hljs-number">1,2,3,4</span>],[<span class="hljs-number">5,6,7,8</span>],[<span class="hljs-number">9,10,11,12</span>]]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">8,12,11,10</span>,<span class="hljs-number">9,5,6,7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= matrix.length &lt;= 100</code></li><li><code>0 &lt;= matrix[i].length &lt;= 100</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ˜¯å¯¹æ•°ç»„è¿›è¡Œå¸¸è§„æ“ä½œï¼Œå®‰è£…é¢˜ç›®è¦æ±‚è¿›è¡Œéå†åˆ¤æ–­ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> matrix: <span class="hljs-keyword">return</span> []<br>        l, r, t, b, res = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>]) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix) - <span class="hljs-number">1</span>, []<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(l, r + <span class="hljs-number">1</span>): res.append(matrix[t][i]) <span class="hljs-comment"># left to right</span><br>            t += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t, b + <span class="hljs-number">1</span>): res.append(matrix[i][r]) <span class="hljs-comment"># top to bottom</span><br>            r -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r, l - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[b][i]) <span class="hljs-comment"># right to left</span><br>            b -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b, t - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[i][l]) <span class="hljs-comment"># bottom to top</span><br>            l += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ˜¯é‡‡ç”¨ç›¸å…³çš„æ–¹æ³•ï¼Œ<code>pop(0)</code>å¯ä»¥å¼¹å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨$zip(<em>)$ç›¸å½“äºå¯¹çŸ©é˜µè½¬ç½®ã€‚<code>list(zip(*matrix))[::-1]</code>å°±æ˜¯å¯¹çŸ©é˜µé€†æ—‹è½¬90åº¦ã€‚zipå’Œzip(</em>)ä¹Ÿæ˜¯ä¸€å¯¹é€†æ“ä½œï¼›å‰è€…è¡¨ç¤ºå‹ç¼©ï¼Œåè€…è¡¨ç¤ºè§£å‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        res = []<br>        <span class="hljs-keyword">while</span> matrix:<br>            res += matrix.pop(<span class="hljs-number">0</span>)<br>            matrix = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(*matrix))[::-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><blockquote><p>pop &amp; zipçŸ¥è¯†å‚è€ƒ</p><p><a href="https://blog.csdn.net/zhanshen112/article/details/90341177">https://blog.csdn.net/zhanshen112/article/details/90341177</a></p><p><a href="https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html">https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer15 äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</title>
      <link href="/2021/08/19/leetcode/leetcode-offer15/"/>
      <url>/2021/08/19/leetcode/leetcode-offer15/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º â€˜1â€™ çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸º æ±‰æ˜é‡é‡).ï¼‰ã€‚<br>æç¤ºï¼š</p><ul><li>è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚</li><li>åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ äºŒè¿›åˆ¶è¡¥ç  è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„&nbsp;ç¤ºä¾‹ 3&nbsp;ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">11</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000000001011</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000000001011</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">128</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000010000000</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000010000000</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn =<span class="hljs-number"> 4294967293 </span>(æ§åˆ¶å°è¾“å…¥ 11111111111111111111111111111101ï¼Œéƒ¨åˆ†è¯­è¨€ä¸­ n = -3ï¼‰<br>è¾“å‡ºï¼š31<br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸²<span class="hljs-number"> 11111111111111111111111111111101 </span>ä¸­ï¼Œå…±æœ‰<span class="hljs-number"> 31 </span>ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯é‡‡ç”¨å†…ç½®çš„binå‡½æ•°ï¼Œå°†nè½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ã€‚ç„¶åç»Ÿè®¡å…¶å­—ç¬¦ä¸²çš„1çš„ä¸ªæ•°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        s = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">bin</span>(n))<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span>(x==<span class="hljs-string">'1'</span>):<br>                cnt+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯é‡‡ç”¨ç§»ä½æ“ä½œ<code>&lt;&lt;</code>å’ŒæŒ‰ä½ä¸<code>&amp;</code>å¯¹è¾“å…¥çš„æ•°å­—è¿›è¡Œç»Ÿè®¡ã€‚å¦‚ï¼š11 &amp; 8 = 8ï¼ˆ1011 &amp; 100 = 100ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>       cnt = <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">if</span>(n &amp; (<span class="hljs-number">1</span> &lt;&lt; i)))<br>       <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p><font color="hotpink">ä¸‹é¢è¿™ä¸ªå°±å¾ˆå¦™äº†</font></p><p>ç¬¬ä¸‰ç§æ–¹æ³• åˆ©ç”¨ <code>n &amp;ï¼ˆn-1ï¼‰</code></p><p>(nâˆ’1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1 å˜æˆ 0 ï¼Œæ­¤ 1 å³è¾¹çš„ 0 éƒ½å˜æˆ 1ã€‚<br>n &amp; (n - 1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1å˜æˆ 0ï¼Œå…¶ä½™ä¸å˜ã€‚<br>åˆ©ç”¨æ­¤ç‰¹æ€§æ¯æ¬¡å¾ªç¯å¯ä»¥æ¶ˆå»ä¸€ä¸ª1</p><p><img src="https://picture.mulindya.com/leetcode-offer15pic1.png" alt=""></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> n:<br>            res += <span class="hljs-number">1</span><br>            n &amp;= n - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å˜é‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å˜é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer20 è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</title>
      <link href="/2021/08/19/leetcode/leetcode-offer20/"/>
      <url>/2021/08/19/leetcode/leetcode-offer20/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚</p><p><strong>æ•°å€¼</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>è‹¥å¹²ç©ºæ ¼</li><li>ä¸€ä¸ª&nbsp;å°æ•°&nbsp;æˆ–è€…&nbsp;æ•´æ•°</li><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ª&nbsp;â€˜eâ€™&nbsp;æˆ–&nbsp;â€˜Eâ€™&nbsp;ï¼Œåé¢è·Ÿç€ä¸€ä¸ª&nbsp;æ•´æ•°</li><li>è‹¥å¹²ç©ºæ ¼</li></ol><p><strong>å°æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</p></li><li><p>ä¸‹è¿°æ ¼å¼ä¹‹ä¸€ï¼š</p><ol><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™</li><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢å†è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li><li>ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li></ol></li></ol><p><strong>æ•´æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</li><li>è‡³å°‘ä¸€ä½æ•°å­—</li></ol><p>éƒ¨åˆ†<strong>æ•°å€¼</strong>åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ+100â€, â€œ5e2â€, â€œ-123â€, â€œ3.1416â€, â€œ-1E-16â€, â€œ0123â€]</li></ul><p>éƒ¨åˆ†éæ•°å€¼åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ12eâ€, â€œ1a3.14â€, â€œ1.2.3â€, â€œÂ±5â€, â€œ12e+5.4â€]</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"0"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"e"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"."</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"    .1  "</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length &lt;= 20</li><li>s ä»…å«è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ï¼Œæ•°å­—ï¼ˆ0-9ï¼‰ï¼ŒåŠ å· â€˜+â€™ ï¼Œå‡å· â€˜-â€™ ï¼Œç©ºæ ¼ â€™ â€™ æˆ–è€…ç‚¹ â€˜.â€™ ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h3><p>æœ¬é¢˜è§£å†³æ–¹æ¡ˆæ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºã€‚æ ¹æ®å­—ç¬¦ç±»å‹å’Œåˆæ³•æ•°å€¼çš„ç‰¹ç‚¹ï¼Œå®šä¹‰çŠ¶æ€ï¼Œå†ç”»å‡ºçŠ¶æ€è½¬ç§»å›¾ã€‚</p><h4 id="å­—ç¬¦ç±»å‹">å­—ç¬¦ç±»å‹</h4><p>ç©ºæ ¼:â€™ â€˜ï¼Œæ•°å­—:dï¼Œæ­£è´Ÿå·:sï¼Œå°æ•°ç‚¹:â€™.'ï¼Œå¹‚ç¬¦å·ï¼še</p><h4 id="çŠ¶æ€å®šä¹‰">çŠ¶æ€å®šä¹‰</h4><p>ä»å·¦åˆ°å³å¯ä»¥å®šä¹‰ä¸º</p><p>0.å·¦è¾¹çš„<code>ç©ºæ ¼</code></p><ol><li>Eä¹‹å‰çš„<code>æ­£è´Ÿå·</code></li><li>å°æ•°ç‚¹å‰çš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹ï¼Œå°æ•°ç‚¹ä¹‹åçš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹å‰ä¸ºç©ºæ ¼ï¼Œ<code>å°æ•°ç‚¹</code>ï¼Œå°æ•°ç‚¹åä¸ºæ•°å­—</li><li><code>å¹‚ç¬¦å·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ­£è´Ÿå·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ•°å­—</code></li><li>ç»“å°¾çš„<code>ç©ºæ ¼</code></li></ol><p><img src="https://picture.mulindya.com/leetcode-offer20-pic1.png" alt=""></p><h4 id="ç»“æŸçŠ¶æ€">ç»“æŸçŠ¶æ€</h4><p>æ­£å¸¸çš„ç»“æŸçŠ¶æ€æœ‰2ï¼Œ3ï¼Œ7ï¼Œ8</p><h3 id="ç®—æ³•æµç¨‹">ç®—æ³•æµç¨‹</h3><h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4><h5 id="1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status">1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status</h5><p>$states[i]$è¡¨ç¤ºæ‰€å¤„çš„çŠ¶æ€ï¼Œ$i$ä¸ºæ‰€å¤„çš„çŠ¶æ€è¡¨ç¤ºï¼Œ$states[i]$ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ä»içŠ¶æ€åˆ°å¯è½¬ç§»çš„çŠ¶æ€ï¼›ä½¿ç”¨é”®å€¼å¯¹æ¥è¡¨ç¤º$(key,value)$ï¼šè‹¥è¾“å…¥$key$ï¼Œå¯ä»çŠ¶æ€$i$è½¬ç§»è‡³çŠ¶æ€$value$.</p><p>å½“å‰çŠ¶æ€pï¼šåˆå§‹çŠ¶æ€ä¸º0</p><h5 id="2ï¼Œè½¬ç§»å¾ªç¯">2ï¼Œè½¬ç§»å¾ªç¯</h5><p>è¿˜éœ€è¦<strong>è®°å½•å­—ç¬¦ç±»å‹</strong>tï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦c</p><ul><li>å½“ c ä¸ºæ­£è´Ÿå·æ—¶ï¼Œæ‰§è¡Œ t = â€˜sâ€™ ;</li><li>å½“ c ä¸ºæ•°å­—æ—¶ï¼Œæ‰§è¡Œ t = â€˜dâ€™ ;</li><li>å½“ c ä¸º e , E æ—¶ï¼Œæ‰§è¡Œ t = â€˜eâ€™ ;</li><li>å½“ c ä¸º . , ç©ºæ ¼ æ—¶ï¼Œæ‰§è¡Œ t = c ï¼ˆå³ç”¨å­—ç¬¦æœ¬èº«è¡¨ç¤ºå­—ç¬¦ç±»å‹ï¼‰;</li><li>å¦åˆ™ï¼Œæ‰§è¡Œ t = â€˜?â€™ ï¼Œä»£è¡¨ä¸ºä¸å±äºåˆ¤æ–­èŒƒå›´çš„éæ³•å­—ç¬¦ï¼Œåç»­ç›´æ¥è¿”å› falseã€‚</li></ul><p><strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼š è‹¥å­—ç¬¦ç±»å‹ tä¸åœ¨å“ˆå¸Œè¡¨  $states[p]$ ä¸­ï¼Œè¯´æ˜æ— æ³•è½¬ç§»è‡³ä¸‹ä¸€çŠ¶æ€ï¼Œå› æ­¤ç›´æ¥è¿”å› False ã€‚<br><strong>çŠ¶æ€è½¬ç§»</strong>ï¼š çŠ¶æ€ p è½¬ç§»è‡³ $states[p][t]$ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        states = [<br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'s'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> }, <span class="hljs-comment"># 0. start with 'blank'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> } ,                <span class="hljs-comment"># 1. 'sign' before 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }, <span class="hljs-comment"># 2. 'digit' before 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },         <span class="hljs-comment"># 3. 'digit' after 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span> },                         <span class="hljs-comment"># 4. 'digit' after 'dot' (â€˜blankâ€™ before 'dot')</span><br>            { <span class="hljs-string">'s'</span>: <span class="hljs-number">6</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                 <span class="hljs-comment"># 5. 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                         <span class="hljs-comment"># 6. 'sign' after 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },                 <span class="hljs-comment"># 7. 'digit' after 'e'</span><br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }                          <span class="hljs-comment"># 8. end with 'blank'</span><br>        ]<br>        p = <span class="hljs-number">0</span>                           <span class="hljs-comment"># start with state 0</span><br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> <span class="hljs-string">'0'</span> &lt;= c &lt;= <span class="hljs-string">'9'</span>: t = <span class="hljs-string">'d'</span> <span class="hljs-comment"># digit</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"+-"</span>: t = <span class="hljs-string">'s'</span>     <span class="hljs-comment"># sign</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"eE"</span>: t = <span class="hljs-string">'e'</span>     <span class="hljs-comment"># e or E</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">". "</span>: t = c       <span class="hljs-comment"># dot, blank</span><br>            <span class="hljs-keyword">else</span>: t = <span class="hljs-string">'?'</span>               <span class="hljs-comment"># unknown</span><br>            <span class="hljs-keyword">if</span> t <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> states[p]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            p = states[p][t]<br>        <span class="hljs-keyword">return</span> p <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æœ‰é™çŠ¶æ€æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æœ‰é™çŠ¶æ€æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer21 è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</title>
      <link href="/2021/08/18/leetcode/leetcode-offer21/"/>
      <url>/2021/08/18/leetcode/leetcode-offer21/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">1,2,3,4</span>]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,3,2,4</span>] <br>æ³¨ï¼š[<span class="hljs-number">3,1,2,4</span>] ä¹Ÿæ˜¯æ­£ç¡®çš„ç­”æ¡ˆä¹‹ä¸€ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= nums.length &lt;= 50000</li><li>1 &lt;= nums[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonçš„listçš„å¸¸è§„æ“ä½œã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        odd = []<br>        even = []<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span>(x%<span class="hljs-number">2</span>):<br>                odd.append(x)<br>            <span class="hljs-keyword">else</span>:<br>                even.append(x)<br>        <span class="hljs-keyword">return</span> odd+even<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer28 å¯¹ç§°çš„äºŒå‰æ ‘</title>
      <link href="/2021/08/18/leetcode/leetcode-offer28/"/>
      <url>/2021/08/18/leetcode/leetcode-offer28/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹ç§°çš„äºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯ä¸æ˜¯å¯¹ç§°çš„ã€‚å¦‚æœä¸€æ£µäºŒå‰æ ‘å’Œå®ƒçš„é•œåƒä¸€æ ·ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¯¹ç§°çš„ã€‚</p><p>ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘&nbsp;[1,2,2,3,4,4,3] æ˜¯å¯¹ç§°çš„ã€‚</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp;/ \ / <br>3 &nbsp;4 4 &nbsp;3<br>ä½†æ˜¯ä¸‹é¢è¿™ä¸ª&nbsp;[1,2,2,null,3,null,3] åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„:</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp; &nbsp;\ &nbsp; <br>&nbsp; &nbsp;3 &nbsp; &nbsp;3</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœrootä¸ºç©ºå°±ç›´æ¥è¿”å›Trueï¼Œç„¶ååˆ¤æ–­å…¶å·¦å³å­æ ‘æ˜¯å¦ä¸ºé•œåƒç»“æ„ã€‚å¦‚æœä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ºç©ºåˆ™ä¸ºçœŸï¼Œå¦‚æœä¸€ç©ºåˆ™ä¸ºå‡ï¼Œç„¶ååˆ†åˆ«åˆ¤æ–­å…¶å¯¹ç§°ç»“æ„ã€‚ <code>judge(A.left,B.right) and judge(A.right,B.left)</code> æ³¨æ„æ˜¯é•œåƒå› æ­¤å·¦å³æ—¶ç›¸åçš„å‘¢</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSymmetric</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judge</span>(<span class="hljs-params">A,B</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">or</span> B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judge(A.left,B.right) <span class="hljs-keyword">and</span> judge(A.right,B.left) <br>        <span class="hljs-keyword">return</span> judge(root.left,root.right)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer26 æ ‘çš„å­ç»“æ„</title>
      <link href="/2021/08/18/leetcode/leetcode-offer26/"/>
      <url>/2021/08/18/leetcode/leetcode-offer26/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ ‘çš„å­ç»“æ„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aå’ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚(çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„)<br>Bæ˜¯Açš„å­ç»“æ„ï¼Œ å³ Aä¸­æœ‰å‡ºç°å’ŒBç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><p>ä¾‹å¦‚:<br>ç»™å®šçš„æ ‘ A:</p><p>3<br>&nbsp; &nbsp; / <br>&nbsp; &nbsp;4 &nbsp; 5<br>&nbsp; / <br>&nbsp;1 &nbsp; 2<br>ç»™å®šçš„æ ‘ Bï¼š</p><p>4&nbsp;<br>&nbsp; /<br>&nbsp;1<br>è¿”å› trueï¼Œå› ä¸º B ä¸ A çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonä»£ç çœŸçš„ï¼å¥½ï¼ç®€æ´ï¼</p><p><code>isSubStructure</code>çš„ä½œç”¨æ˜¯å…ˆåºæŸ¥æ‰¾Aï¼ŒBçš„åŒ¹é…æƒ…å†µã€‚è€Œåœ¨å†…éƒ¨ä¼šå¯¹åŒ¹é…çš„<code>judgechildren(A,B)</code>è¿›è¡Œåˆ¤æ–­ï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸ºå…¶å­ç»“æ„ã€‚</p><p>å¦‚æœBä¸ºç©ºäº†åˆ™è¡¨ç¤ºåŒ¹é…æˆåŠŸã€‚å¦‚æœæ ¹èŠ‚ç‚¹ä¸åŒ¹é…æˆ–è€…Aä¸ºç©ºäº†å°±ç›´æ¥è¿”å›å¤±è´¥ã€‚å¦‚æœå¯ä»¥ç»§ç»­åˆ¤æ–­ï¼Œå°±ç»§ç»­åˆ¤æ–­å¯¹åº”çš„å·¦å³å­æ ‘ã€‚</p><p><code>(judgechildren(A,B) or self.isSubStructure(A.left,B) or self.isSubStructure(A.right,B))</code> åˆ¤æ–­ABä¸¤å­æ ‘ï¼›å…ˆåºåˆ¤æ–­å·¦å³å­æ ‘ï¼Œ<code>æ³¨æ„è¿™é‡Œæ˜¯self.isSubStructure</code>è¿›è¡Œé€’å½’å“¦~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSubStructure</span>(<span class="hljs-params">self, A: TreeNode, B: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judgechildren</span>(<span class="hljs-params">A,B</span>):</span> <span class="hljs-comment">#åˆ¤æ–­ä»¥ABä¸ºæ ¹èŠ‚ç‚¹çš„æ¡ä»¶ä¸‹ï¼ŒBæ˜¯å¦ä¸ºAçš„å­ç»“æ„</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> A) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judgechildren(A.right,B.right) <span class="hljs-keyword">and</span> judgechildren(A.left,B.left)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bool</span>(A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">and</span> (judgechildren(A,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.left,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.right,B))<br></code></pre></td></tr></tbody></table></figure><blockquote><p>bool(A and B)æ³¨æ„è¦è½¬æ¢ä¸ºboolå˜é‡</p></blockquote><ul><li><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(MN)</p></li><li><p>ç©ºé—´å¤æ‚åº¦ O(M)ï¼š å½“æ ‘ Aå’Œæ ‘ B éƒ½é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’è°ƒç”¨æ·±åº¦æœ€å¤§ã€‚å½“ Mâ‰¤N æ—¶ï¼Œéå†æ ‘ A ä¸é€’å½’åˆ¤æ–­çš„æ€»é€’å½’æ·±åº¦ä¸º M ï¼›å½“ M&gt;N æ—¶ï¼Œæœ€å·®æƒ…å†µä¸ºéå†è‡³æ ‘ Aå¶å­èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ€»é€’å½’æ·±åº¦ä¸º Mã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer14.2 å‰ªç»³å­2</title>
      <link href="/2021/08/18/leetcode/leetcode-offer14-2/"/>
      <url>/2021/08/18/leetcode/leetcode-offer14-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­2</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m - 1] .è¯·é—® k[0]<em>k[1]</em>â€¦*k[m - 1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>2 &lt;= n &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’å…·ä½“å‚ç…§å‰ªç»³å­1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i):<br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j]))<br>        <span class="hljs-keyword">return</span> dp[n]%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯è¿™ç§æ–¹å¼æ—¶é—´å¤æ‚åº¦è¾ƒå¤§ã€‚</p><p>æ­¥éª¤å¦‚ä¸‹ï¼š(æ•°å­¦å¯ä»¥è¯æ˜å°½é‡åˆ†æˆå¤šçš„3)<a href="https://leetcode-cn.com/problems/jian-sheng-zi-lcof/solution/mian-shi-ti-14-i-jian-sheng-zi-tan-xin-si-xiang-by/">å‚è§é¢˜è§£</a></p><ul><li>å¦‚æœ n == 2ï¼Œè¿”å›1ï¼Œå¦‚æœ n == 3ï¼Œè¿”å›2ï¼Œä¸¤ä¸ªå¯ä»¥åˆå¹¶æˆnå°äº4çš„æ—¶å€™è¿”å›n - 1</li><li>å¦‚æœ n == 4ï¼Œè¿”å›4</li><li>å¦‚æœ n &gt; 4ï¼Œåˆ†æˆå°½å¯èƒ½å¤šçš„é•¿åº¦ä¸º3çš„å°æ®µï¼Œæ¯æ¬¡å¾ªç¯é•¿åº¦nå‡å»3ï¼Œä¹˜ç§¯resä¹˜ä»¥3ï¼›æœ€åè¿”å›æ—¶ä¹˜ä»¥å°äºç­‰äº4çš„æœ€åä¸€å°æ®µï¼›æ¯æ¬¡ä¹˜æ³•æ“ä½œåè®°å¾—å–ä½™å°±è¡Œ<br>ä»¥ä¸Š2å’Œ3å¯ä»¥åˆå¹¶</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">4</span>:<br>            <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span><br>        res = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">4</span>: <span class="hljs-comment"># æ‰¾å¯»å°½é‡å¤šçš„3</span><br>            res = res * <span class="hljs-number">3</span> % <span class="hljs-number">1000000007</span><br>            n -= <span class="hljs-number">3</span><br>        <span class="hljs-keyword">return</span> res * n % <span class="hljs-number">1000000007</span> <span class="hljs-comment">#ä¹˜ä»¥å‰©ä½™çš„</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer14.1 å‰ªç»³å­1</title>
      <link href="/2021/08/17/leetcode/leetcode-offer14-1/"/>
      <url>/2021/08/17/leetcode/leetcode-offer14-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m-1] ã€‚è¯·é—® k[0]<em>k[1]</em>â€¦*k[m-1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><h4 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h5 id="æç¤ºï¼š">æç¤ºï¼š</h5><ul><li><code>2 &lt;= n &lt;= 58</code></li></ul><h4 id="é¢˜è§£">é¢˜è§£</h4><p>è¯¥é¢˜é‡‡ç”¨åŠ¨æ€è§„åˆ’æ¯”è¾ƒå¥½ç†è§£ï¼Œdp[i]è¡¨ç¤ºé•¿åº¦ä¸ºiçš„ç»³å­åˆ†æˆmçš„æœ€å¤§ä¹˜ç§¯ã€‚jè¡¨ç¤ºç¬¬ä¸€æ®µçš„é•¿åº¦ï¼Œéå†jçš„å–å€¼ï¼ˆå¯ä»¥ç›´æ¥ä»2å¼€å§‹ï¼‰ï¼Œåœ¨å‰©ä½™çš„i-jï¼ˆ<strong>ç¼©å°èŒƒå›´</strong>ï¼‰çš„é•¿åº¦é€‰æ‹©ä¸åˆ‡åˆ†æˆ–è€…æœ€å¤§ä¹˜ç§¯ï¼Œå³dp[i][j] = max(j*(i-j),j*dp[i-j])ã€‚<strong>ä½†æ˜¯å®é™…ä¸Šâ€œã€jã€‘â€å¹¶ä¸å…³å¿ƒ</strong>ï¼Œå› æ­¤å¯ä»¥ä¸dp[i]æ¯”è¾ƒ,é€‰æ‹©æœ€å¤§çš„æ›´æ–°dp[i]å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]  <span class="hljs-comment"># è¡¨ç¤ºé•¿åº¦ä¸ºnçš„ç»³å­å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯</span><br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i): <span class="hljs-comment"># ç¬¬ä¸€æ®µ</span><br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j])) <br>                <span class="hljs-comment">#å‘å‰è·å–ä¿¡æ¯ï¼Œåœ¨é€‰å®šjä¹‹åï¼Œæ³¨æ„è¿˜è¦æ¯”è¾ƒdp[i]æœ¬èº«ï¼Œä»¥åŠåœ¨ç¬¬ä¸€æ®µjçš„åŸºç¡€ä¸Šå‰©ä¸‹çš„æ˜¯å¦åˆ‡</span><br>        <span class="hljs-keyword">return</span> dp[n]<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer07 é‡å»ºäºŒå‰æ ‘</title>
      <link href="/2021/08/17/leetcode/leetcode-offer07/"/>
      <url>/2021/08/17/leetcode/leetcode-offer07/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡å»ºäºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·æ„å»ºè¯¥äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><p>å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer07-tree.jpg" alt="img"></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">Input: <span class="hljs-attr">preorder</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>], <span class="hljs-attr">inorder</span> = [<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">20</span>,<span class="hljs-number">7</span>]<br>Output: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Input: preorder = <span class="hljs-comment">[-1]</span>, inorder = <span class="hljs-comment">[-1]</span><br>Output: <span class="hljs-comment">[-1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨é—­åŒ…å‡½æ•°ï¼Œæ„å»ºå¯¹åº”åŒºåŸŸçš„æ ‘ï¼Œè¿”å›æ ¹èŠ‚ç‚¹ã€‚å…³é”®æ­¥éª¤æ˜¯æŸ¥æ‰¾åˆ°rootindexåœ¨ä¸­åºéå†ä¸­çš„ä½ç½®ï¼Œç„¶ååˆ†åˆ«æ„å»ºå¯¹åº”çš„å­æ ‘ã€‚åœ¨æŸ¥æ‰¾æ—¶å¯ä»¥å…ˆå»ºç«‹å“ˆå¸Œè¡¨ï¼Œä½¿ç”¨å­—å…¸å’Œæšä¸¾ç»“åˆæ„å»ºflag <code>flag = {ele:i for i,ele in enumerate(inorder)}</code>ã€‚å¯ä»¥å‡å°‘æ‰§è¡Œæ—¶é—´çš„å¼€é”€ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildTree</span>(<span class="hljs-params">self, preorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], inorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; TreeNode:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">rootindex,ins,ine</span>):</span><br>            <span class="hljs-keyword">if</span>(ins&gt;ine): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>            root = TreeNode(preorder[rootindex])<br>            <span class="hljs-comment"># t = ins</span><br>            <span class="hljs-comment"># while(inorder[t]!=preorder[rootindex]):t+=1</span><br>            t = flag[preorder[rootindex]]<br>            root.left = func(rootindex+<span class="hljs-number">1</span>,ins,t-<span class="hljs-number">1</span>)<br>            root.right = func(rootindex+t-ins+<span class="hljs-number">1</span>,t+<span class="hljs-number">1</span>,ine)<br>            <span class="hljs-keyword">return</span> root<br>        <span class="hljs-comment"># æ„å»ºå“ˆå¸Œè¡¨ åœ¨æŸ¥æ‰¾æ—¶æ›´æ–¹ä¾¿</span><br>        flag = {ele:i <span class="hljs-keyword">for</span> i,ele <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(inorder)} <span class="hljs-comment">#ä½¿ç”¨å­—å…¸æ„å»º</span><br>        root = func(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(inorder)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢¯åº¦æ¶ˆå¤±&amp;æ¢¯åº¦çˆ†ç‚¸</title>
      <link href="/2021/08/17/deep_learning/gradient-exp/"/>
      <url>/2021/08/17/deep_learning/gradient-exp/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ¢è®¨æ·±åº¦å­¦ä¹ ä¸­ç»å¸¸æåˆ°çš„æ¦‚å¿µâ€“æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ ã€‚ä»–ä»¬æ˜¯å½±å“æ¨¡å‹æ”¶æ•›ï¼Œå­¦ä¹ å¥½åçš„é‡è¦å› ç´ ã€‚å¯¹æ­¤ç°è±¡ä¹Ÿæå‡ºäº†å¾ˆå¤šå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æ¥å¤§è‡´åšä¸€ä¸ªæ€»ç»“ï¼Œå¯¹å…¶æ¦‚å¿µï¼ŒåŸå› å’Œç›¸å…³çš„è§£å†³æ–¹æ¡ˆè¿›è¡Œæ¢è®¨å­~~</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸-æ¢¯åº¦æ¶ˆå¤±">æ¢¯åº¦çˆ†ç‚¸&amp;æ¢¯åº¦æ¶ˆå¤±</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>æ¢¯åº¦æ¶ˆå¤±å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå°ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆåŠ¨ä¸äº†ï¼‰ã€‚<br>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› ">æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› </h2><ul><li><p>è®­ç»ƒæ–¹å¼ï¼šç½‘ç»œè®­ç»ƒæ—¶é‡‡ç”¨åå‘ä¼ æ’­çš„æ–¹å¼ï¼Œä¼šä½¿ç”¨é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼Œå› æ­¤å¯¹æ¿€æ´»å‡½æ•°æ±‚å¯¼æ—¶ï¼Œå¦‚æœæƒé‡ä¹˜ä»¥æ¿€æ´»å‡½æ•°å¯¼æ•°æ­¤éƒ¨åˆ†å¤§äº1ï¼Œé‚£ä¹ˆå½“å±‚æ•°å¾ˆå¤šæ—¶ï¼Œæ±‚å‡ºçš„æ¢¯åº¦æ›´æ–°å°†ä»¥æŒ‡æ•°çš„å½¢å¼å¢åŠ ï¼Œåˆ™ä¼šæ¢¯åº¦çˆ†ç‚¸ã€‚å¦‚æœæ­¤éƒ¨åˆ†å°äº1ï¼Œåˆ™éšç€å±‚æ•°å¢å¤šï¼Œæ±‚å‡ºçš„æ¢¯åº¦ä¼šæŒ‡æ•°è¡°å‡ï¼Œåˆ™ä¼šæ¢¯åº¦æ¶ˆå¤±ã€‚</p></li><li><p>æ¿€æ´»å‡½æ•°ï¼šå¦‚æœé€‰ç”¨sigmoidï¼Œ$S(x) = \frac{1}{1+e^{-x}}$ ï¼Œè€Œå…¶å¯¼æ•° $Sâ€™(x) = \frac{e<sup>{-x}}{(1+e</sup>{-x})^2}=S(x)(1-S(x))$ ï¼Œå…¶æ¢¯åº¦ä¸ä¼šè¶…è¿‡0.25ã€‚</p></li><li><p>æƒé‡åˆå§‹å€¼ï¼šå› æ­¤ä¸€ä¸ªå‡å€¼ä¸º0æ ‡å‡†å·®ä¸º1çš„é«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–å‚æ•°å¾ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±ï¼Œå› ä¸ºæƒé‡é›†ä¸­åœ¨-1åˆ°1ä¹‹é—´ã€‚å¦‚æœåˆå§‹åŒ–æ¯”è¾ƒå¤§çš„å€¼</p></li><li><p>æ ¹æ®é“¾å¼æ±‚å¯¼å’Œåå‘ä¼ æ’­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—å‡ºï¼Œå…¶ä¸­Cæ˜¯ä»£ä»·å‡½æ•°</p><p><img src="https://picture.mulindya.com/gradient-exp-pic2.png" alt=""></p><p><img src="https://picture.mulindya.com/gradient-exp-pic3.png" alt=""></p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><h3 id="1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚Heæ–¹æ³•">1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚<a href="https://blog.csdn.net/u010505915/article/details/106608922/?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.base&amp;spm=1001.2101.3001.4242">Heæ–¹æ³•</a></h3><ol><li>å‰å‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€å±‚çš„å·ç§¯è®¡ç®—ç»“æœçš„æ–¹å·®ä¸º1.</li><li>åå‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€ å±‚çš„ç»§ç»­å¾€å‰ä¼ çš„æ¢¯åº¦æ–¹å·®ä¸º1(å› ä¸ºæ¯å±‚ä¼šæœ‰ä¸¤ä¸ªæ¢¯åº¦çš„è®¡ç®—, ä¸€ä¸ªç”¨æ¥æ›´æ–°å½“å‰å±‚çš„æƒé‡, ä¸€ä¸ªç»§ç»­ä¼ æ’­, ç”¨äºå‰é¢å±‚çš„æ¢¯åº¦çš„è®¡ç®—.)</li></ol><h3 id="2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸">2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h3 id="3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸">3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>â€‹é‡‡ç”¨æƒé‡æ­£åˆ™åŒ–ï¼Œä¸»è¦æ˜¯é€šè¿‡å¯¹ç½‘ç»œæƒé‡åšæ­£åˆ™æ¥é™åˆ¶è¿‡æ‹Ÿåˆï¼ŒåŒæ—¶ï¼Œå¦‚æœå‘ç”Ÿæ¢¯åº¦çˆ†ç‚¸ï¼Œé‚£ä¹ˆæƒå€¼çš„èŒƒæ•°å°±ä¼šå˜çš„éå¸¸å¤§ï¼Œåè¿‡æ¥ï¼Œé€šè¿‡é™åˆ¶æ­£åˆ™åŒ–é¡¹çš„å¤§å°ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶æ¢¯åº¦çˆ†ç‚¸çš„å‘ç”Ÿã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯l1æ­£åˆ™ï¼Œå’Œl2æ­£åˆ™ï¼Œåœ¨å„ä¸ªæ·±åº¦æ¡†æ¶ä¸­éƒ½æœ‰ç›¸åº”çš„APIå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œæ¯”å¦‚åœ¨pytorchä¸­ï¼Œè‹¥æ­å»ºç½‘ç»œçš„æ—¶å€™å·²ç»è®¾ç½®äº†æ­£åˆ™åŒ–å‚æ•°ï¼Œåˆ™è°ƒç”¨ä»¥ä¸‹ä»£ç å¯ä»¥ç›´æ¥è®¡ç®—å‡ºæ­£åˆ™æŸå¤±ã€‚<br>â€‹torch.optimé›†æˆäº†å¾ˆå¤šä¼˜åŒ–å™¨ï¼Œå¦‚SGDï¼ŒAdadeltaï¼ŒAdamï¼ŒAdagradï¼ŒRMSpropç­‰ï¼Œè¿™äº›ä¼˜åŒ–å™¨è‡ªå¸¦çš„ä¸€ä¸ªå‚æ•°weight_decayï¼Œç”¨äºæŒ‡å®šæƒå€¼è¡°å‡ç‡ï¼Œç›¸å½“äºL2æ­£åˆ™åŒ–ä¸­çš„Î»å‚æ•°ï¼Œæ³¨æ„torch.optimé›†æˆçš„ä¼˜åŒ–å™¨åªæœ‰L2æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ³¨é‡Šï¼Œå‚æ•°weight_decay çš„è§£ææ˜¯ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">weight_decay (<span class="hljs-built_in">float</span>, optional): weight decay (L2 penalty) (default: <span class="hljs-number">0</span>)<br>optimizer = optim.Adam(model.parameters(),lr=learning_rate,weight_decay=<span class="hljs-number">0.01</span>)<br></code></pre></td></tr></tbody></table></figure><p>lossè®¡ç®—å…¬å¼<br>$$<br>Loss = (y-W<sup>Tx)</sup>2+\alpha {\Vert W \Vert}^2<br>$$</p><h3 id="4ï¼Œæ¿€æ´»å‡½æ•°">4ï¼Œæ¿€æ´»å‡½æ•°</h3><h4 id="1-ReLUå‡½æ•°ï¼š">1.ReLUå‡½æ•°ï¼š</h4><p>å¦‚æœæ¿€æ´»å‡½æ•°çš„å¯¼æ•°ä¸º1ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸çš„é—®é¢˜äº†ï¼Œæ¯å±‚çš„ç½‘ç»œéƒ½å¯ä»¥å¾—åˆ°ç›¸åŒçš„æ›´æ–°é€Ÿåº¦ï¼ŒReLUå°±è¿™æ ·åº”è¿è€Œç”Ÿã€‚</p><p>ReLUçš„ä¸»è¦è´¡çŒ®åœ¨äºï¼š</p><p><img src="https://picture.mulindya.com/gradient-exp-pic4.png" alt=""></p><h5 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h5><p>è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±ã€çˆ†ç‚¸çš„é—®é¢˜ã€‚<br>è®¡ç®—æ–¹ä¾¿ï¼Œè®¡ç®—é€Ÿåº¦å¿«ã€‚<br>åŠ é€Ÿäº†ç½‘ç»œçš„è®­ç»ƒã€‚</p><h5 id="ç¼ºç‚¹ï¼š">ç¼ºç‚¹ï¼š</h5><p>ç”±äºè´Ÿæ•°éƒ¨åˆ†æ’ä¸º0ï¼Œä¼šå¯¼è‡´ä¸€äº›ç¥ç»å…ƒæ— æ³•æ¿€æ´»ï¼ˆå¯é€šè¿‡è®¾ç½®å°å­¦ä¹ ç‡éƒ¨åˆ†è§£å†³ï¼‰ã€‚<br>è¾“å‡ºä¸æ˜¯ä»¥0ä¸ºä¸­å¿ƒçš„ã€‚</p><h4 id="2-LeakyReLUå‡½æ•°ï¼š">2.LeakyReLUå‡½æ•°ï¼š</h4><p>LeakyReLUå°±æ˜¯ä¸ºäº†è§£å†³ReLUçš„0åŒºé—´å¸¦æ¥çš„å½±å“ï¼Œè¯¥å‡½æ•°è¾“å‡ºå¯¹è´Ÿå€¼è¾“å…¥æœ‰å¾ˆå°çš„å¡åº¦ï¼Œç”±äºå¯¼æ•°æ€»æ˜¯ä¸ä¸ºé›¶ï¼Œè¿™èƒ½å‡å°‘é™é»˜ç¥ç»å…ƒçš„å‡ºç°ï¼Œå…è®¸åŸºäºæ¢¯åº¦çš„å­¦ä¹ ï¼ˆè™½ç„¶ä¼šå¾ˆæ…¢ï¼‰ï¼Œè§£å†³äº†ReLUå‡½æ•°è¿›å…¥è´ŸåŒºé—´åï¼Œå¯¼è‡´ç¥ç»å…ƒä¸å­¦ä¹ çš„é—®é¢˜ã€‚</p><p><img src="https://picture.mulindya.com/gradient-exp-pic5.png" alt=""></p><h4 id="3-ELUå‡½æ•°ï¼š">3.ELUå‡½æ•°ï¼š</h4><p><img src="https://picture.mulindya.com/gradient-exp-pic6.png" alt=""></p><ul><li><p>èåˆäº†sigmoidå’ŒReLUï¼Œ<strong>å·¦ä¾§å…·æœ‰è½¯é¥±å’Œæ€§ï¼Œå³ä¾§æ— é¥±å’Œæ€§</strong>ã€‚</p></li><li><p>å³ä¾§çº¿æ€§éƒ¨åˆ†ä½¿å¾—ELUèƒ½å¤Ÿç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼Œè€Œå·¦ä¾§è½¯é¥±èƒ½å¤Ÿè®©ELUå¯¹è¾“å…¥å˜åŒ–æˆ–å™ªå£°æ›´é²æ£’ã€‚</p></li><li><p>ELUçš„è¾“å‡ºå‡å€¼æ¥è¿‘äºé›¶ï¼Œæ‰€ä»¥æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼Œä½†ç›¸å¯¹äºLeakyReLUæ¥è¯´ï¼Œè®¡ç®—è¦æ›´è€—æ—¶é—´ä¸€äº›ã€‚</p></li></ul><p><font size="3" color="BlueViolet">å°çŸ¥è¯†ï¼š</font></p><blockquote><p>æ¢¯åº¦é¥±å’Œå¸¸å¸¸æ˜¯å’Œæ¿€æ´»å‡½æ•°ç›¸å…³çš„ï¼Œæ¯”å¦‚sigmodå’Œtanhå°±å±äºå…¸å‹å®¹æ˜“è¿›å…¥æ¢¯åº¦é¥±å’ŒåŒºçš„å‡½æ•°ï¼Œå³è‡ªå˜é‡è¿›å…¥æŸä¸ªåŒºé—´åï¼Œæ¢¯åº¦å˜åŒ–ä¼šéå¸¸å°ï¼Œè¡¨ç°åœ¨å›¾ä¸Šå°±æ˜¯å‡½æ•°æ›²çº¿è¿›å…¥æŸäº›åŒºåŸŸåï¼Œè¶Šæ¥è¶Šè¶‹è¿‘ä¸€æ¡ç›´çº¿ï¼Œæ¢¯åº¦å˜åŒ–å¾ˆå°ï¼Œæ¢¯åº¦é¥±å’Œä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦å˜åŒ–ç¼“æ…¢ï¼Œä»è€Œé€ æˆæ¨¡å‹è®­ç»ƒç¼“æ…¢</p></blockquote><h3 id="4ï¼ŒBatch-Normalization">4ï¼ŒBatch Normalization</h3><p>BNæ˜¯æ·±åº¦å­¦ä¹ å‘å±•ä»¥æ¥æå‡ºçš„æœ€é‡è¦çš„æˆæœä¹‹ä¸€äº†ï¼Œç›®å‰å·²ç»è¢«å¹¿æ³›çš„åº”ç”¨åˆ°äº†å„å¤§ç½‘ç»œä¸­ï¼Œå…·æœ‰åŠ é€Ÿç½‘ç»œæ”¶æ•›é€Ÿåº¦ï¼Œæå‡è®­ç»ƒç¨³å®šæ€§çš„æ•ˆæœï¼Œ**BNæœ¬è´¨ä¸Šæ˜¯è§£å†³åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦é—®é¢˜ã€‚**BNå…¨åæ˜¯Batch Normalizationï¼Œç®€ç§°BNï¼Œå³æ‰¹è§„èŒƒåŒ–ï¼Œ<strong>é€šè¿‡è§„èŒƒåŒ–æ“ä½œå°†è¾“å‡ºä¿¡å·xè§„èŒƒåŒ–ä¿è¯ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</strong><br>åå‘ä¼ æ’­å¼å­ä¸­æœ‰wçš„å­˜åœ¨ï¼Œæ‰€ä»¥wçš„å¤§å°å½±å“äº†æ¢¯åº¦çš„æ¶ˆå¤±å’Œçˆ†ç‚¸ï¼Œ<strong>BNå°±æ˜¯é€šè¿‡å¯¹æ¯ä¸€å±‚çš„è¾“å‡ºè§„èŒƒä¸ºå‡å€¼å’Œæ–¹å·®ä¸€è‡´çš„æ–¹æ³•</strong>ï¼Œæ¶ˆé™¤äº†wå¸¦æ¥çš„æ”¾å¤§ç¼©å°çš„å½±å“ï¼Œè¿›è€Œè§£å†³æ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸çš„é—®é¢˜ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºBNå°†è¾“å‡ºä»é¥±å’ŒåŒºæ‹‰å€’äº†éé¥±å’ŒåŒºã€‚<br>æœ‰å…³Batch Normalizationè¯¦ç»†çš„å†…å®¹å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼š <a href="http://blog.csdn.net/qq_25737169/article/details/79048516">Batch Normalization</a></p><h3 id="5-æ®‹å·®ç»“æ„">5,æ®‹å·®ç»“æ„</h3><p>äº‹å®ä¸Šï¼Œå°±æ˜¯æ®‹å·®ç½‘ç»œçš„å‡ºç°å¯¼è‡´äº†image netæ¯”èµ›çš„ç»ˆç»“ï¼Œè‡ªä»æ®‹å·®æå‡ºåï¼Œå‡ ä¹æ‰€æœ‰çš„æ·±åº¦ç½‘ç»œéƒ½ç¦»ä¸å¼€æ®‹å·®çš„èº«å½±ï¼Œç›¸æ¯”è¾ƒä¹‹å‰çš„å‡ å±‚ï¼Œå‡ åå±‚çš„æ·±åº¦ç½‘ç»œï¼Œåœ¨æ®‹å·®ç½‘ç»œé¢å‰éƒ½ä¸å€¼ä¸€æï¼Œæ®‹å·®å¯ä»¥å¾ˆè½»æ¾çš„æ„å»ºå‡ ç™¾å±‚ï¼Œä¸€åƒå¤šå±‚çš„ç½‘ç»œè€Œä¸ç”¨æ‹…å¿ƒæ¢¯åº¦æ¶ˆå¤±è¿‡å¿«çš„é—®é¢˜ï¼ŒåŸå› å°±åœ¨äºæ®‹å·®çš„æ·å¾„ï¼ˆshortcutï¼‰éƒ¨åˆ†ã€‚åŸç†å¯å‚è§ï¼š<a href="https://zhuanlan.zhihu.com/p/42706477">æ®‹å·®ç»“æ„</a></p><h3 id="6ï¼ŒLSTMç½‘ç»œ">6ï¼ŒLSTMç½‘ç»œ</h3><p>LSTMæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œRNNçš„å˜ä½“ï¼Œå…¨ç§°æ˜¯é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆlong-short term memory networksï¼‰ï¼Œå®ƒæ˜¯ä¸é‚£ä¹ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±çš„ï¼Œä¸»è¦åŸå› åœ¨äºLSTMå†…éƒ¨å¤æ‚çš„â€œé—¨â€ç»“æ„ï¼Œ<strong>LSTMé€šè¿‡å®ƒå†…éƒ¨çš„â€œé—¨â€å¯ä»¥æ¥ä¸‹æ¥æ›´æ–°çš„æ—¶å€™â€œè®°ä½â€å‰å‡ æ¬¡è®­ç»ƒçš„â€œæ®‹ç•™è®°å¿†â€</strong>ï¼Œå› æ­¤ï¼Œç»å¸¸ç”¨äºç”Ÿæˆæ–‡æœ¬ä¸­ã€‚å…³äºLSTMçš„åŸç†è¯¦è§£åç»­å†åˆ†æã€‚<a href="https://zhuanlan.zhihu.com/p/32085405">LSTM</a></p><p><img src="https://picture.mulindya.com/gradient-exp-pic7.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer27 äºŒå‰æ ‘çš„é•œåƒ</title>
      <link href="/2021/08/16/leetcode/leetcode-offer27/"/>
      <url>/2021/08/16/leetcode/leetcode-offer27/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„é•œåƒ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯¥å‡½æ•°è¾“å‡ºå®ƒçš„é•œåƒã€‚</p><p>ä¾‹å¦‚è¾“å…¥ï¼š</p><p>â€‹     4<br>2     7<br>1   3  6   9<br>é•œåƒè¾“å‡ºï¼š</p><p>â€‹     4<br>7     2<br>9   6 3   1</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šroot = <span class="hljs-string">[4,2,7,1,3,6,9]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[4,7,2,9,6,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœä¸ºç©ºæ ‘å°±è¿”å›ç©ºã€‚ç„¶åä¿å­˜å·¦å­æ ‘ï¼Œç¿»è½¬å³å­æ ‘åèµ‹å€¼ä¸ºå·¦èŠ‚ç‚¹ï¼Œç¿»è½¬å·¦å­æ ‘èµ‹å€¼ä¸ºå³èŠ‚ç‚¹ã€‚</p><p><strong>if not(root.left or root.right): return root #ä¸ºå•ä¸€èŠ‚ç‚¹å°±ç›´æ¥è¿”å› å¯ä»¥çœç•¥ï¼Œå› ä¸ºå·²ç»åŒ…å«åœ¨å†…</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mirrorTree</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; TreeNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(root): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        x = root.left<br>        root.left = self.mirrorTree(root.right)<br>        root.right = self.mirrorTree(x)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer06 åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</title>
      <link href="/2021/08/16/leetcode/leetcode-offer25/"/>
      <url>/2021/08/16/leetcode/leetcode-offer25/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»ç„¶æ˜¯é€’å¢æ’åºçš„ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥ï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">4</span>, <span class="hljs-number">1</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœç›´æ¥ç”¨p = l.next  é‚£ä¹ˆä¸èƒ½è¾¾åˆ°â€œæŒ‡é’ˆâ€çš„æ•ˆæœã€‚è¿™æ ·çš„æ“ä½œå¯¹læ²¡æœ‰å½±å“ï¼Œæ— æ³•æ›´æ–°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        l = ListNode(<span class="hljs-number">0</span>) <br>        p = l.<span class="hljs-built_in">next</span>     <br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure><p>æ­£ç¡®æ–¹å¼ï¼Œä¸èƒ½ä½¿ç”¨ p = p.nextï¼Œ å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼ï¼Œæ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´lï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        p = l = ListNode(<span class="hljs-number">0</span>) <span class="hljs-comment">#å…ˆæŒ‡å‘åŒä¸€å—ç©ºé—´</span><br>        <span class="hljs-comment">#p = p.next      </span><br>        <span class="hljs-comment"># ä¸èƒ½ä½¿ç”¨p = p.next  å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼æ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚</span><br>        <span class="hljs-comment"># æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´ï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹</span><br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p.<span class="hljs-built_in">next</span> = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p.<span class="hljs-built_in">next</span> = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p.<span class="hljs-built_in">next</span> = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer13 æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</title>
      <link href="/2021/08/14/leetcode/leetcode-offer13/"/>
      <url>/2021/08/14/leetcode/leetcode-offer13/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ°ä¸Šæœ‰ä¸€ä¸ªmè¡Œnåˆ—çš„æ–¹æ ¼ï¼Œä»åæ ‡ [0,0] åˆ°åæ ‡ [m-1,n-1] ã€‚ä¸€ä¸ªæœºå™¨äººä»åæ ‡ [0, 0] çš„æ ¼å­å¼€å§‹ç§»åŠ¨ï¼Œå®ƒæ¯æ¬¡å¯ä»¥å‘å·¦ã€å³ã€ä¸Šã€ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼ˆä¸èƒ½ç§»åŠ¨åˆ°æ–¹æ ¼å¤–ï¼‰ï¼Œä¹Ÿä¸èƒ½è¿›å…¥è¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œå¤§äºkçš„æ ¼å­ã€‚ä¾‹å¦‚ï¼Œå½“kä¸º18æ—¶ï¼Œæœºå™¨äººèƒ½å¤Ÿè¿›å…¥æ–¹æ ¼ [35, 37] ï¼Œå› ä¸º3+5+3+7=18ã€‚ä½†å®ƒä¸èƒ½è¿›å…¥æ–¹æ ¼ [35, 38]ï¼Œå› ä¸º3+5+3+8=19ã€‚è¯·é—®è¯¥æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾å¤šå°‘ä¸ªæ ¼å­ï¼Ÿ</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">1</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= n,m &lt;= 100</code></li><li><code>0 &lt;= k &lt;= 20</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£æ³•ä¸€-DFS">è§£æ³•ä¸€ DFS</h3><ul><li>æ·±æœ+å‰ªæ</li><li>ä¼˜åŒ–æŠ€å·§å°±æ˜¯åªåˆ¤æ–­å³è¾¹å’Œä¸‹è¾¹å°±è¡Œäº†ï¼Œå› ä¸ºå·¦å’Œä¸Šæ˜¯ä¸€å®šä¼šåœ¨æœç´¢çš„è¿‡ç¨‹ä¸­è¢«åŒ…æ‹¬çš„</li></ul><p>â€‹        <font color="purple">æ³¨æ„[[1]*n]*m æ˜¯æµ…æ‹·è´å¤åˆ¶ï¼ˆâ€œ=â€å¤åˆ¶ï¼‰å› æ­¤å¦‚æœä¸€ä¸ªå…ƒç´ æ”¹å˜äº†ï¼Œæ­¤åˆ—éƒ½ä¼šæ”¹å˜</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m, n, k</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type m: int</span><br><span class="hljs-string">        :type n: int</span><br><span class="hljs-string">        :type k: int</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        """</span><br>        <br>        fflag = [[<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)]  <br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numsum</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span><br>            <span class="hljs-keyword">while</span>(i):<br>                <span class="hljs-built_in">sum</span>+=(i%<span class="hljs-number">10</span>)<br>                i = i//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">while</span>(j):<br>                <span class="hljs-built_in">sum</span>+=(j%<span class="hljs-number">10</span>)<br>                j = j//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> m&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> n&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (fflag[i][j]==<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (numsum(i,j)&gt;k): <br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            fflag[i][j] = <span class="hljs-number">0</span><br>            <span class="hljs-comment"># return 1+dfs(i+1,j)+dfs(i-1,j)+dfs(i,j+1)+dfs(i,j-1)</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>+dfs(i+<span class="hljs-number">1</span>,j)+dfs(i,j+<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">return</span> dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•äºŒ-é€’æ¨">è§£æ³•äºŒ é€’æ¨</h3><h4 id="æ€è·¯">æ€è·¯</h4><p>è€ƒè™‘åˆ°æ–¹æ³•ä¸€æåˆ°æœç´¢çš„æ–¹å‘åªéœ€è¦æœä¸‹æˆ–æœå³ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ç§é€’æ¨çš„æ±‚è§£æ–¹æ³•ã€‚</p><h4 id="ç®—æ³•">ç®—æ³•</h4><p>å®šä¹‰ <code>vis[i][j]</code> ä¸º <code>(i, j)</code> åæ ‡æ˜¯å¦å¯è¾¾ï¼Œå¦‚æœå¯è¾¾è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚</p><p>é¦–å…ˆ (i, j) æœ¬èº«éœ€è¦å¯ä»¥è¿›å…¥ï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­ i å’Œ j çš„æ•°ä½ä¹‹å’Œæ˜¯å¦å¤§äº k ï¼Œå¦‚æœå¤§äºçš„è¯ç›´æ¥è®¾ç½® <code>vis[i][j]</code> ä¸ºä¸å¯è¾¾å³å¯ã€‚</p><p>å¦åˆ™ï¼Œå‰é¢æåˆ°æœç´¢æ–¹å‘åªéœ€æœä¸‹æˆ–æœå³ï¼Œå› æ­¤ (i, j) çš„æ ¼å­åªä¼šä» (i - 1, j) æˆ–è€… (i, j - 1) ä¸¤ä¸ªæ ¼å­èµ°è¿‡æ¥ï¼ˆä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼‰ï¼Œé‚£ä¹ˆ <code>vis[i][j]</code> æ˜¯å¦å¯è¾¾çš„çŠ¶æ€åˆ™å¯ç”±å¦‚ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°ï¼š</p><p>å³åªè¦æœ‰ä¸€ä¸ªæ ¼å­å¯è¾¾ï¼Œé‚£ä¹ˆ (i, j) è¿™ä¸ªæ ¼å­å°±æ˜¯å¯è¾¾çš„ï¼Œå› æ­¤æˆ‘ä»¬åªè¦éå†æ‰€æœ‰æ ¼å­ï¼Œé€’æ¨è®¡ç®—å‡ºå®ƒä»¬æ˜¯å¦å¯è¾¾ç„¶åç”¨å˜é‡ ans è®°å½•å¯è¾¾çš„æ ¼å­æ•°é‡å³å¯ã€‚</p><p>åˆå§‹æ¡ä»¶ <code>vis[i][j] = 1</code> ï¼Œé€’æ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­æ³¨æ„è¾¹ç•Œçš„å¤„ç†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        vis = <span class="hljs-built_in">set</span>([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-keyword">if</span> ((i - <span class="hljs-number">1</span>, j) <span class="hljs-keyword">in</span> vis <span class="hljs-keyword">or</span> (i, j - <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> vis) <span class="hljs-keyword">and</span> digitsum(i) + digitsum(j) &lt;= k:<br>                    vis.add((i, j))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(vis)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•ä¸‰">è§£æ³•ä¸‰</h3><h4 id="æ€è·¯å’Œç®—æ³•">æ€è·¯å’Œç®—æ³•</h4><p>æˆ‘ä»¬å°†è¡Œåæ ‡å’Œåˆ—åæ ‡æ•°ä½ä¹‹å’Œå¤§äº k çš„æ ¼å­çœ‹ä½œéšœç¢ç‰©ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±æ˜¯ä¸€é“å¾ˆä¼ ç»Ÿçš„æœç´¢é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–è€…æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è§£å†³å®ƒï¼Œæœ¬æ–‡é€‰æ‹©ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹æ³•æ¥è®²è§£ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¡ç®—ä¸€ä¸ªæ•°çš„æ•°ä½ä¹‹å’Œå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å¯¹æ•° x æ¯æ¬¡å¯¹ 10 å–ä½™ï¼Œå°±èƒ½çŸ¥é“æ•° x çš„ä¸ªä½æ•°æ˜¯å¤šå°‘ï¼Œç„¶åå†å°† x é™¤ 10ï¼Œè¿™ä¸ªæ“ä½œç­‰ä»·äºå°† x çš„åè¿›åˆ¶æ•°å‘å³ç§»ä¸€ä½ï¼Œåˆ é™¤ä¸ªä½æ•°ï¼ˆç±»ä¼¼äºäºŒè¿›åˆ¶ä¸­çš„ &gt;&gt; å³ç§»è¿ç®—ç¬¦ï¼‰ï¼Œä¸æ–­é‡å¤ç›´åˆ° x ä¸º 0 æ—¶ç»“æŸã€‚</p><p>åŒæ—¶è¿™é“é¢˜è¿˜æœ‰ä¸€ä¸ªéšè—çš„ä¼˜åŒ–ï¼šæˆ‘ä»¬åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­æœç´¢æ–¹å‘å¯ä»¥ç¼©å‡ä¸ºå‘å³å’Œå‘ä¸‹ï¼Œè€Œä¸å¿…å†å‘ä¸Šå’Œå‘å·¦è¿›è¡Œæœç´¢ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å±•ç¤ºäº† 16 * 16 çš„åœ°å›¾éšç€é™åˆ¶æ¡ä»¶ k çš„æ”¾å¤§ï¼Œå¯è¡Œæ–¹æ ¼çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ¯ä¸ªæ ¼å­é‡Œçš„å€¼ä¸ºè¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œï¼Œè“è‰²æ–¹æ ¼ä»£è¡¨ééšœç¢æ–¹æ ¼ï¼Œå³å…¶å€¼å°äºç­‰äºå½“å‰çš„é™åˆ¶æ¡ä»¶ kã€‚æˆ‘ä»¬å¯ä»¥å‘ç°éšç€é™åˆ¶æ¡ä»¶ k çš„å¢å¤§ï¼Œ(0, 0) æ‰€åœ¨çš„è“è‰²æ–¹æ ¼åŒºåŸŸå†…æ–°åŠ å…¥çš„ééšœç¢æ–¹æ ¼éƒ½å¯ä»¥ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ã€‚è€Œå…¶ä»–ä¸è¿é€šçš„è“è‰²æ–¹æ ¼åŒºåŸŸä¼šéšç€ k çš„å¢å¤§è€Œè¿é€šï¼Œä¸”è¿é€šçš„æ—¶å€™ä¹Ÿæ˜¯ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æœç´¢æ–¹å‘ç¼©å‡ä¸ºå‘å³æˆ–å‘ä¸‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br>        q = Queue()<br>        q.put((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<br>        s = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>            x, y = q.get()<br>            <span class="hljs-keyword">if</span> (x, y) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= x &lt; m <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; n <span class="hljs-keyword">and</span> digitsum(x) + digitsum(y) &lt;= k:<br>                s.add((x, y))<br>                <span class="hljs-keyword">for</span> nx, ny <span class="hljs-keyword">in</span> [(x + <span class="hljs-number">1</span>, y), (x, y + <span class="hljs-number">1</span>)]:<br>                    q.put((nx, ny))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s)<br></code></pre></td></tr></tbody></table></figure><h4 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h4><h5 id="æ—¶é—´å¤æ‚åº¦ï¼šO-mn">æ—¶é—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚è€ƒè™‘æ‰€æœ‰æ ¼å­éƒ½èƒ½è¿›å…¥ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™ä¸€ä¸ªæ ¼å­æœ€å¤šä¼šè¢«è®¿é—®çš„æ¬¡æ•°ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(2mn)=O(mn)ã€‚</p><h5 id="ç©ºé—´å¤æ‚åº¦ï¼šO-mn">ç©ºé—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚æœç´¢çš„æ—¶å€™éœ€è¦ä¸€ä¸ªå¤§å°ä¸º O(mn)çš„æ ‡è®°ç»“æ„ç”¨æ¥æ ‡è®°æ¯ä¸ªæ ¼å­æ˜¯å¦è¢«èµ°è¿‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sobelç®—å­</title>
      <link href="/2021/08/14/img_process/sobel/"/>
      <url>/2021/08/14/img_process/sobel/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»Sobelç®—å­ï¼Œä¸»è¦ç”¨äºè¾¹ç¼˜æ£€æµ‹ï¼›ç”±äºè¯¥ç®—å­å¼•å…¥äº†å±€éƒ¨å¹³å‡ï¼Œå¯¹å™ªå£°æœ‰å¹³æ»‘ä½œç”¨ï¼Œå› æ­¤è¿˜å¯ä»¥æ¶ˆé™¤å™ªå£°ã€‚</p></blockquote><h2 id="å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦">å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦</h2><p>åœ¨å›¾åƒè¾¹ç¼˜ï¼Œç°åº¦å€¼çš„å˜åŒ–è¾ƒå¤§ï¼Œå› æ­¤å›¾åƒåœ¨æ­¤å¤„çš„æ¢¯åº¦å€¼ä¹Ÿè¾ƒå¤§ã€‚ä¸€èˆ¬æƒ…å†µï¼Œå›¾åƒæ¢¯åº¦æ—¶è®¡ç®—å›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯ã€‚å›¾åƒæ¢¯åº¦ä¸¥æ ¼æ¥è¯´æ—¶éœ€è¦æ±‚å¯¼æ•°ï¼Œä½†æ˜¯åœ¨å›¾åƒè®¡ç®—ä¸Šæ—¶ä½¿ç”¨åƒç´ å€¼çš„å·®å¾—åˆ°æ¢¯åº¦çš„è¿‘ä¼¼å€¼ã€‚<br>å›¾åƒå¼ºåº¦çš„æ˜¾è‘—å˜åŒ–å¯åˆ†ä¸ºï¼š</p><ul><li>é˜¶è·ƒå˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦åœ¨ä¸è¿ç»­å¤„çš„ä¸¤è¾¹çš„åƒç´ ç°åº¦å€¼æœ‰ç€æ˜¾è‘—çš„å·®å¼‚ï¼›</li><li>çº¿æ¡ï¼ˆå±‹é¡¶ï¼‰å˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦çªç„¶ä»ä¸€ä¸ªå€¼å˜åŒ–åˆ°å¦ä¸€ä¸ªå€¼ï¼Œä¿æŒä¸€è¾ƒå°è¡Œç¨‹ååˆå›åˆ°åŸæ¥çš„å€¼ã€‚</li></ul><p><img src="https://picture.mulindya.com/sobel-pic1.png" alt=""></p><p>ï¼ˆaï¼‰ï¼ˆbï¼‰åˆ†åˆ«æ˜¯é˜¶è·ƒå‡½æ•°å’Œå±‹é¡¶å‡½æ•°çš„äºŒç»´å›¾åƒï¼›ï¼ˆcï¼‰ï¼ˆdï¼‰æ˜¯é˜¶è·ƒå’Œå±‹é¡¶å‡½æ•°çš„å‡½æ•°å›¾è±¡ï¼›ï¼ˆeï¼‰ï¼ˆfï¼‰å¯¹åº”ä¸€é˜¶å€’æ•°ï¼›ï¼ˆgï¼‰ï¼ˆhï¼‰æ˜¯äºŒé˜¶å€’æ•°ã€‚</p><h2 id="Sobelç®—å­">Sobelç®—å­</h2><p>å¸¸ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ¨¡æ¿è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå°†Gxï¼ŒGyä¸å›¾åƒå·ç§¯ï¼Œå³å¯å¾—åˆ°æ¨ªå‘å’Œçºµå‘çš„äº®åº¦å·®åˆ†è¿‘ä¼¼å€¼ã€‚</p>$$G_x = \begin{bmatrix} -1 &amp; 0 &amp; 1 \\ -2 &amp; 0 &amp; 2\\-1 &amp; 0 &amp; 1\end{bmatrix} \qquad G_y = \begin{bmatrix} 1 &amp; 2 &amp; 1 \\ 0 &amp; 0 &amp; 0\\-1 &amp; -2 &amp; -1\end{bmatrix}$$<p>å›¾åƒæ¯ä¸€ä¸ªåƒç´ çš„æ¢¯åº¦å¯ä»¥ä½¿ç”¨$G = \sqrt{G<sup>2_x+G</sup>2_y}$æ¥è¡¨ç¤ºï¼Œæ¢¯åº¦çš„æ–¹å‘ä½¿ç”¨$\Theta = arctan(\frac{G_y}{G_x})$ã€‚</p><p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¯”<code>Sobel</code>å‡½æ•°çš„è¿‘ä¼¼æ•ˆæœæ›´å¥½çš„ <code>Scharr</code>å‡½æ•°ï¼Œå…¶å†…æ ¸çŸ©é˜µå¦‚ä¸‹:</p>$$G_x = \begin{bmatrix} -3 &amp; 0 &amp; 3 \\ -10 &amp; 0 &amp; 10 \\ -3 &amp; 0 &amp; 3\end{bmatrix} \qquad G_y = \begin{bmatrix} -3 &amp; -10 &amp; -3 \\ 0 &amp; 0 &amp; 0 \\ 3 &amp; 10 &amp; 3\end{bmatrix}$$<h2 id="ä»£ç ä½¿ç”¨">ä»£ç ä½¿ç”¨</h2><h3 id="cv2-Sobel">cv2.Sobel()</h3><p>Sobelç®—å­ä¾ç„¶æ˜¯ä¸€ç§è¿‡æ»¤å™¨ï¼Œåªæ˜¯å…¶æ˜¯å¸¦æœ‰æ–¹å‘çš„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dst = cv2.Sobel(src, ddepth, dx, dy[,ksize[, scale[, delta[, borderType]]]])<br></code></pre></td></tr></tbody></table></figure><ul><li>dstä»£è¡¨ç›®æ ‡å‡½æ•°</li><li>srcä»£è¡¨åŸå§‹å›¾åƒ</li><li>ddpethä»£è¡¨è¾“å‡ºå›¾åƒçš„æ·±åº¦ ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯ä¸åŸå›¾åƒç›¸åŒçš„æ·±åº¦ã€‚ç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼›</li><li>dxä»£è¡¨xæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•° ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>dyä»£è¡¨yæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>ksizeä»£è¡¨Sobelæ ¸çš„å¤§å°ï¼Œè¯¥å€¼ä¸º-1æ—¶ï¼Œåˆ™ä¼šä½¿ç”¨Scharrç®—å­è¿›è¡Œè¿ç®—,ä¸€èˆ¬é€‰æ‹©ä¸º1ã€3ã€5ã€7</li><li>scaleä»£è¡¨è®¡ç®—å¯¼æ•°æ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>deltaä»£è¡¨åŠ åœ¨ç›®æ ‡å›¾åƒdstä¸Šçš„å€¼ï¼Œè¯¥å€¼æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º0</li><li>borderTypeä»£è¡¨è¾¹ç•Œæ ·å¼ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</li></ul><blockquote><p>å…¶ä¸­ddepthè®¾è®¡å›¾åƒæ·±åº¦çš„æ¦‚å¿µï¼š<br>å›¾åƒæ·±åº¦æ˜¯æŒ‡å­˜å‚¨æ¯ä¸ªåƒç´ å€¼æ‰€ç”¨çš„ä½æ•°ï¼Œä¾‹å¦‚cv2.CV_8Uï¼ŒæŒ‡çš„æ˜¯8ä½æ— ç¬¦å·æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0~255ï¼Œè¶…å‡ºèŒƒå›´åˆ™ä¼šè¢«æˆªæ–­ï¼ˆæˆªæ–­æŒ‡çš„æ˜¯ï¼Œå½“æ•°å€¼å¤§äº255ä¿ç•™ä¸º255ï¼Œå½“æ•°å€¼å°äº0ä¿ç•™ä¸º0ï¼Œå…¶ä½™ä¸å˜ï¼‰ã€‚</p><p>å…·ä½“è¿˜æœ‰ï¼šCV_16Sï¼ˆ16ä½æ— ç¬¦å·æ•°ï¼‰ï¼ŒCV_16Uï¼ˆ16ä½æœ‰ç¬¦å·æ•°ï¼‰ï¼ŒCV_32Fï¼ˆ32ä½æµ®ç‚¹æ•°ï¼‰ï¼ŒCV_64Fï¼ˆ64ä½æµ®ç‚¹æ•°ï¼‰ç­‰.</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-comment">#è½½å…¥åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#æ±‚Xæ–¹å‘æ¢¯åº¦ï¼Œå¹¶ä¸”è¾“å‡ºå›¾åƒä¸€ä¸ªä¸ºCV_8U,ä¸€ä¸ªä¸ºCV_64F</span><br>img_gradient_X_8U=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>img_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å°†å›¾åƒæ·±åº¦æ”¹ä¸ºCV_8U</span><br>img_gradient_X_64Fto8U=cv2.convertScaleAbs(img_gradient_X_64F)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'X_gradient_8U'</span>,img_gradient_X)<br>cv2.imshow(<span class="hljs-string">'X_gradient_64Fto8U'</span>,img_gradient_X_64Fto8U)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic2.png" alt=""></p><p><code>cv2.imshow()</code>çš„é»˜è®¤æ˜¾ç¤ºä¸º8ä½æ— ç¬¦å·æ•°ï¼Œå³[0,255]ï¼Œå› æ­¤åœ¨æ˜¾ç¤º<code>CV_64F</code>çš„å›¾åƒå‰ä½¿ç”¨äº†å‡½æ•°<code>cv2.convertScaleAbs()</code>å°†å›¾åƒæ·±åº¦ä¸º<code>CV_64F</code>çš„æ¢¯åº¦å›¾åƒé‡æ–°è½¬åŒ–ä¸º<code>CV_8U</code>ã€‚</p><h3 id="cv2-convertScaleAbs">cv2.convertScaleAbs()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.convert<span class="hljs-constructor">ScaleAbs(<span class="hljs-params">src</span>[,<span class="hljs-params">alpha</span>[,<span class="hljs-params">beta</span>]])</span><br></code></pre></td></tr></tbody></table></figure><p>å…ˆè®¡ç®—æ•°ç»„ç»å¯¹å€¼ï¼Œåè½¬åŒ–ä¸º8ä½æ— ç¬¦å·æ•°</p><ul><li>src:è¾“å…¥å›¾åƒï¼ˆå¤šç»´æ•°ç»„ï¼‰</li><li>alpha:æ¯”ä¾‹å› å­</li><li>beta:ä¿å­˜æ–°å›¾åƒï¼ˆæ•°ç»„ï¼‰å‰å¯ä»¥å¢åŠ çš„å€¼</li></ul><h3 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h3><p>é˜²æ­¢æ¢¯åº¦å¤§å°è¢«æˆªæ–­æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å…ˆå°†è¾“å…¥å›¾åƒå½’ä¸€åŒ–ï¼ˆå®é™…å½’ä¸€åŒ–çš„è¿‡ç¨‹å°±å·²ç»å®ç°äº†å›¾åƒæ·±åº¦çš„è½¬å˜ï¼‰ã€‚åœ¨ä½¿ç”¨æ·±åº¦å¤§äº8Uçš„æ ¼å¼ä¹‹å‰å°†ç°åº¦å…ˆå½’ä¸€åŒ–ï¼Œå°±ä¸ç”¨<code>convertScaleAbs</code>è½¬æ¢äº†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#åŸå›¾å½’ä¸€åŒ–,å®é™…å›¾åƒæ·±åº¦å·²ç»å˜ä¸ºCV_64F</span><br>img_standard=img_original/<span class="hljs-number">255</span><br><span class="hljs-comment">#é‡‡ç”¨ç°åº¦åŸå›¾æ±‚Xæ–¹å‘æ¢¯åº¦</span><br>original_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>original_gradient_X_64Fto8U=cv2.convertScaleAbs(original_gradient_X_64F)<br><span class="hljs-comment">#é‡‡ç”¨å½’ä¸€åŒ–çš„å›¾åƒæ±‚Xæ–¹å‘æ¢¯åº¦</span><br>standard_gradient_X=cv2.Sobel(img_standard,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'original'</span>,img_original)<br>cv2.imshow(<span class="hljs-string">'original_X'</span>,original_gradient_X_64Fto8U)<br>cv2.imshow(<span class="hljs-string">'standard_X'</span>,standard_gradient_X)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic3.png" alt=""></p><h3 id="cv2-addWeighted">cv2.addWeighted()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.add<span class="hljs-constructor">Weighted(<span class="hljs-params">src1</span>, <span class="hljs-params">alpha</span>, <span class="hljs-params">src2</span>, <span class="hljs-params">beta</span>, <span class="hljs-params">gamma</span>[, <span class="hljs-params">dst</span>[, <span class="hljs-params">dtype</span>]])</span> â†’ dst<br></code></pre></td></tr></tbody></table></figure><ul><li>src1 è¾“å…¥çš„ç¬¬ä¸€ä¸ªæ•°ç»„</li><li>alpha ç¬¬ä¸€ä¸ªæ•°ç»„çš„æƒé‡</li><li>src2 è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°ç»„ï¼ˆä¸ç¬¬ä¸€ä¸ªæ•°ç»„æœ‰ç›¸åŒçš„shapeï¼‰</li><li>beta ç¬¬äºŒä¸ªæ•°ç»„çš„æƒé‡</li><li>dst è¾“å‡ºçš„æ•°ç»„åç§°</li><li>gamma è®¡ç®—å’Œæ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>dtype è¾“å‡ºå›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºå’Œinputç›¸åŒ</li><li></li></ul><blockquote><p>dst = src1 * alpha + src2 * beta + gamma;</p></blockquote><p>æ³¨æ„ï¼šç”±å‚æ•°è¯´æ˜å¯ä»¥çœ‹å‡ºï¼Œè¢«å åŠ çš„ä¸¤å¹…å›¾åƒå¿…é¡»æ˜¯å°ºå¯¸ç›¸åŒã€ç±»å‹ç›¸åŒçš„ï¼›å¹¶ä¸”ï¼Œå½“è¾“å‡ºå›¾åƒarrayçš„æ·±åº¦ä¸ºCV_32Sæ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸é€‚ç”¨äº†ï¼Œè¿™æ—¶å€™å°±ä¼šå†…å­˜æº¢å‡ºæˆ–è€…ç®—å‡ºçš„ç»“æœå‹æ ¹ä¸å¯¹ã€‚</p><h3 id="è¾¹ç¼˜æ£€æµ‹">è¾¹ç¼˜æ£€æµ‹</h3><p>é€šè¿‡cv2.Sobel()æˆ‘ä»¬å¯ä»¥è½»æ¾è®¡ç®—å‡ºX,Yæ–¹å‘çš„æ¢¯åº¦å¤§å°ï¼Œæ ¹æ®å…¬å¼</p><p>$$<br>G = \sqrt{G<sup>2_x+G</sup>2_y}<br>$$<br>å¯ä»¥æ±‚å‡ºæ¢¯åº¦å›¾åƒï¼Œå®é™…æ“ä½œæ—¶ï¼Œä¸ºäº†ç®€åŒ–è¿ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¬å¼</p><p>$$<br>G = \vert{G_x}\vert+\vert{G_y}\vert<br>$$</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå¹¶ä¸”å½’ä¸€åŒ–</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)/<span class="hljs-number">255</span><br><span class="hljs-comment">#åˆ†åˆ«æ±‚X,Yæ–¹å‘çš„æ¢¯åº¦</span><br>grad_X=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>grad_Y=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)<br><span class="hljs-comment">#æ±‚æ¢¯åº¦å›¾åƒ</span><br>grad=cv2.addWeighted(grad_X,<span class="hljs-number">0.5</span>,grad_Y,<span class="hljs-number">0.5</span>,<span class="hljs-number">0</span>)<br>cv2.imshow(<span class="hljs-string">'gradient'</span>,grad)<br></code></pre></td></tr></tbody></table></figure><h2 id="å®˜æ–¹è¯´æ˜">å®˜æ–¹è¯´æ˜</h2><p>å½“å¹´ä½œè€…å¹¶æ²¡æœ‰å…¬å¼€å‘è¡¨è¿‡è®ºæ–‡ï¼Œä»…ä»…æ˜¯åœ¨ä¸€æ¬¡åšå£«ç”Ÿè¯¾é¢˜è®¨è®ºä¼š(1968)ä¸Šæå‡º(â€œA 3x3 Isotropic Gradient Operator for Image Processingâ€)ï¼Œååœ¨1973å¹´å‡ºç‰ˆçš„ä¸€æœ¬ä¸“è‘—ï¼ˆâ€œPattern Classification and Scene Analysisâ€ï¼‰çš„è„šæ³¨é‡Œä½œä¸ºæ³¨é‡Šå‡ºç°å’Œå…¬å¼€çš„ã€‚</p><p>è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä»¥ä¸‹å†…å®¹ã€‚</p><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer06 ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</title>
      <link href="/2021/08/14/leetcode/leetcode-offer06/"/>
      <url>/2021/08/14/leetcode/leetcode-offer06/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[1,3,2]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>éå†é“¾è¡¨ï¼Œç›´æ¥æ’å…¥åˆ°å¤´ä½ç½®ã€‚å°±å¯ä»¥ç›´æ¥è¾“å‡ºäº†ã€‚æˆ–è€…é‡‡ç”¨é€’å½’ï¼Œè¶…çº§ç®€æ´ï¼Œå€¼å¾—å€Ÿé‰´ã€‚æ³¨æ„ifçš„æ¡ä»¶å’Œå¯¹åº”ç»“æœã€‚ï¼ˆé€’å½’å°±ä»ä¸­é—´æ™®é€‚çš„èŠ‚ç‚¹å¼€å§‹è€ƒè™‘ ç„¶åè¡¥å……è¾¹ç•Œç»†èŠ‚ï¼‰</p><p><font color="orange">return self.reversePrint( head.next ) + [ head.val ] if head else []</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode(object):</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reversePrint</span>(<span class="hljs-params">self, head</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type head: ListNode</span><br><span class="hljs-string">        :rtype: List[int]</span><br><span class="hljs-string">        """</span><br>        p=head<br>        result = []<br>        <span class="hljs-keyword">while</span>(p):<br>            result = [p.val]+result <span class="hljs-comment">#ç›´æ¥æ·»åŠ åˆ°å‰é¢</span><br>            p = p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> result<br>        <span class="hljs-comment">#ä½¿ç”¨é€’å½’ä¸€æ¡è¯­å¥è¶…çº§ç®€æ´ é€’å½’åä¸€ä¸ªå…ƒç´ +å½“å‰å…ƒç´  å¦‚æœå½“å‰ä¸ºç©ºåˆ™+ã€ã€‘ ä¹Ÿæ˜¯ç»ˆæ­¢æœªçŸ¥</span><br>        <span class="hljs-comment">#return self.reversePrint(head.next) + [head.val] if head else []</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer12 çŸ©é˜µä¸­çš„è·¯å¾„</title>
      <link href="/2021/08/14/leetcode/leetcode-offer12/"/>
      <url>/2021/08/14/leetcode/leetcode-offer12/</url>
      
        <content type="html"><![CDATA[<blockquote><p>çŸ©é˜µä¸­çš„è·¯å¾„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ 3Ã—4 çš„çŸ©é˜µä¸­åŒ…å«å•è¯ â€œABCCEDâ€ï¼ˆå•è¯ä¸­çš„å­—æ¯å·²æ ‡å‡ºï¼‰ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer12-pic1.jpg" alt=""></p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šboard = [[<span class="hljs-string">"A"</span>,<span class="hljs-string">"B"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"E"</span>],[<span class="hljs-string">"S"</span>,<span class="hljs-string">"F"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"S"</span>],[<span class="hljs-string">"A"</span>,<span class="hljs-string">"D"</span>,<span class="hljs-string">"E"</span>,<span class="hljs-string">"E"</span>]], word = <span class="hljs-string">"ABCCED"</span><br>è¾“å‡ºï¼štrue<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">board</span> = [[<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>],[<span class="hljs-string">"c"</span>,<span class="hljs-string">"d"</span>]], <span class="hljs-attr">word</span> = <span class="hljs-string">"abcd"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= board.length &lt;= 200</code></li><li><code>1 &lt;= board[i].length &lt;= 200</code></li><li><code>board</code> å’Œ <code>word</code> ä»…ç”±å¤§å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¾ªç¯éå†äºŒç»´æ•°ç»„ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿ç»­çš„å­—ç¬¦ä¸²ã€‚åœ¨dfsä¸­é¦–å…ˆè¿›è¡Œè¾¹ç•ŒèŒƒå›´åˆ¤æ–­ï¼Œä»¥åŠæ­¤ç‚¹æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœä¸æ»¡è¶³è¦æ±‚ç›´æ¥è¿”å›å‡ï¼Œä¸ºçœŸåˆ™ç»§ç»­wordåˆ¤æ–­ä¹‹åçš„å­—ç¬¦ã€‚å¦‚æœä»¥åŠæ˜¯æœ€åçš„å­—ç¬¦å°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚<font color="purple">æ³¨æ„åœ¨åˆ¤æ–­k+1ä¹‹å‰éœ€è¦å…ˆmaskæ‰è‡ªèº«çš„å€¼ï¼Œé˜²æ­¢åç»­â€œè·¯çº¿è¿”å›â€</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exist</span>(<span class="hljs-params">self, board, word</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type board: List[List[str]]</span><br><span class="hljs-string">        :type word: str</span><br><span class="hljs-string">        :rtype: bool</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j,k</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board)&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> board[i][j]!=word[k]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> <br>            <span class="hljs-comment">#ä¸åŒ¹é…çš„æƒ…å†µ</span><br>            <span class="hljs-keyword">if</span> k == <span class="hljs-built_in">len</span>(word)-<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#ä¸ç”¨ç»§ç»­åˆ¤æ–­</span><br>            board[i][j] = <span class="hljs-string">' '</span><br>            <span class="hljs-comment"># #æ³¨æ„ä¸èƒ½ç›´æ¥è¿”å› å› ä¸ºåœ¨å¤„ç†é‚»è¿‘çš„å†…å®¹ä¼šåˆ¤æ–­åˆ°è‡ªèº«ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ï¼Œæ‰€ä»¥å…ˆmask</span><br>            <span class="hljs-comment"># return dfs(i+1,j,k+1) or dfs(i-1,j,k+1) or dfs(i,j+1,k+1) or dfs(i,j-1,k+1) </span><br>            res = dfs(i+<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i-<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j+<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j-<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <br>            board[i][j] = word[k]<br>            <span class="hljs-keyword">return</span> res<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])):<br>                <span class="hljs-keyword">if</span> dfs(i,j,<span class="hljs-number">0</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#å¦‚æœä»ijå¼€å§‹æ‰¾0ä¹‹åçš„å­—ç¬¦ä¸²æ‰¾åˆ°åˆ™ä¸ºçœŸ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer11 æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</title>
      <link href="/2021/08/13/leetcode/leetcode-offer11/"/>
      <url>/2021/08/13/leetcode/leetcode-offer11/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [3,4,5,1,2] ä¸º [1,2,3,4,5] çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[3,4,5,1,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[2,2,2,0,1]</span><br>è¾“å‡ºï¼š<span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å°†æ•°ç»„éå†ä¸€éï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªéå¢åºçš„å…ƒç´ å³ä¸ºæœ€å°å€¼ã€‚å¤æ‚åº¦ä¸ºçº¿æ€§çº§åˆ«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(numbers):<span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        minitem = numbers[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(numbers)):<br>            <span class="hljs-keyword">if</span> numbers[i]&lt;numbers[i-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(minitem,numbers[i])<br>        <span class="hljs-keyword">return</span> minitem<br></code></pre></td></tr></tbody></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•ï¼Œå°†çº¿æ€§çº§åˆ«çš„å¤æ‚åº¦é™ä½åˆ°å¯¹æ•°çº§åˆ«ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer11-pic1.png" alt=""></p><p>æœ€ä½ç‚¹æœ‰ç‰¹æ€§ï¼šå·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½è¦æ¯”å³è¾¹æ‰€æœ‰å…ƒç´ å¤§ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥é€æ¸ç¼©å°èŒƒå›´ã€‚</p><p>ä¸­é—´å…ƒç´ å’ŒæŸä¸ªè¾¹ç•Œå…ƒç´ æ¯”è¾ƒå¤§å°ï¼Œæ¥ç¡®å®šèŒƒå›´ï¼Œ<u>ä½†æ˜¯è¦æ³¨æ„ä¸¤è€…ç›¸ç­‰æ—¶å°±æ²¡æœ‰ç¡®åˆ‡çš„åˆ¤æ–­äº†</u>ã€‚å¯ä»¥ç›´æ¥ç”¨çº¿æ€§æ¯”è¾ƒæ¥æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: j -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œå½“å‡ºç° nums[m] = nums[j] æ—¶ï¼Œä¸€å®šæœ‰åŒºé—´[i,m]å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ æˆ– åŒºé—´ [m,j] å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ï¼ˆæˆ–ä¸¤è€…çš†æ»¡è¶³ï¼‰ã€‚å¯¹äºå¯»æ‰¾æ­¤ç±»æ•°ç»„çš„æœ€å°å€¼é—®é¢˜ï¼Œå¯ç›´æ¥æ”¾å¼ƒäºŒåˆ†æŸ¥æ‰¾ï¼Œè€Œä½¿ç”¨çº¿æ€§æŸ¥æ‰¾æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(numbers[i:j])<br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡çŒ®æ•´ç†ç¬”è®°</title>
      <link href="/2021/08/13/paper/paper-site/"/>
      <url>/2021/08/13/paper/paper-site/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æŸ¥æ‰¾æ–‡çŒ®çš„ç½‘ç«™<br><a href="https://www.thecvf.com/">https://www.thecvf.com/</a><br><a href="https://arxiv.org/list/cs/recent">https://arxiv.org/list/cs/recent</a><br><a href="https://www.researchgate.net/">https://www.researchgate.net/</a></p></blockquote><blockquote><p>è¶…å®è—åšä¸»ï¼š <a href="https://www.zhihu.com/people/wang-jia-hao-53-3">ç§‘æŠ€çŒ›å…½</a><br>å®è—å…¬ä¼—å·ï¼š æå¸‚å¹³å°<br>ç³»åˆ—å­¦ä¹ ï¼š <a href="https://zhuanlan.zhihu.com/p/348593638">VITå­¦ä¹ </a></p></blockquote><h3 id="å¾®è°ƒæŠ€å·§">å¾®è°ƒæŠ€å·§</h3><p><a href="https://paper.mulindya.com/Accurate%2C%20Large%20Minibatch%20SGD%20Training%20ImageNet%20in%201%20Hour.pdf"><strong>Accurate, Large Minibatch SGD Training ImageNet in 1 Hour.pdf</strong></a></p><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Co-Tuning%20for%20Transfer%20Learning.pdf"><strong>Co-Tuning for Transfer Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><p><a href="https://paper.mulindya.com/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf"><strong>He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Simple%20Copy-Paste%20is%20a%20Strong%20Data%20Augmentation%20Method.pdf"><strong>Simple Copy-Paste is a Strong Data Augmentation Method.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Discriminative%20Feature%20Alignment%20Improving%20Transferability%20of.pdf"><strong>Discriminative Feature Alignment Improving Transferability of.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Movement%20Pruning%20adaptive%20sparsity%20by%20fine-tuning.pdf"><strong>Movement Pruning adaptive sparsity by fine-tuning.pdf</strong></a></p><h3 id="FPN">FPN</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Feature Pyramid Networks for Object Detection</strong></a>ï¼ˆFPNç›®æ ‡æ£€æµ‹ è§£è¯»https://zhuanlan.zhihu.com/p/36461718ï¼‰</p><h3 id="Transformer">Transformer</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Attention Is All You Need</strong></a> (è®²è§£Attentionæœºåˆ¶)</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey of Transformers</strong></a>ï¼ˆTransformerçš„æ€»ç»“ï¼‰</p><h3 id="VIT">VIT</h3><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>AN IMAGE IS WORTH 16X16 WORDS: TRANSFORMERS FOR IMAGE RECOGNITION AT</strong></a>ï¼ˆå°†transformeråº”ç”¨äºå›¾åƒåˆ†ç±»ï¼‰</p><p><a href="https://paper.mulindya.com/How%20to%20train%20your%20ViT.pdf"><strong>How to train your ViT? Data, Augmentation,and Regularization in Vision Transformers</strong></a>ï¼ˆè®­ç»ƒæŠ€å·§ï¼‰</p><p><a href="https://paper.mulindya.com/Scaling%20Vision%20Transformers.pdf"><strong>Scaling Vision Transformers</strong></a>ï¼ˆç²¾ç‚¼VITï¼‰</p><p><a href="https://paper.mulindya.com/levit.pdf"><strong>LeViT: a Vision Transformer in ConvNetâ€™s Clothing for Faster Inference</strong></a> ï¼ˆæ··åˆç½‘ç»œï¼‰</p><p><a href="https://paper.mulindya.com/End-to-End%20Semi-Supervised%20Object%20Detection%20with%20Soft%20Teacher.pdf"><strong>End-to-End Video Instance Segmentation with Transformers</strong></a>ï¼ˆä½¿ç”¨transformerè¿›è¡Œå®ä¾‹åˆ†å‰²ï¼‰</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey on Visual Transformer</strong></a> ï¼ˆæ€»ç»“ï¼‰</p><h3 id="EfficientNet">EfficientNet</h3><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><h3 id="BIT">BIT</h3><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><h3 id="YOLOv4">YOLOv4</h3><p><a href="https://paper.mulindya.com/yolo4.pdf"><strong>YOLOv4: Optimal Speed and Accuracy of Object Detection</strong></a></p><h3 id="PaDim">PaDim</h3><p><a href="https://paper.mulindya.com/PaDiM_a%20Patch%20Distribution%20Modeling%20Framework.pdf"><strong>PaDiM: a Patch Distribution Modeling Framework for Anomaly Detection and Localization</strong></a> (ä½¿ç”¨é©¬æ°è·ç¦»)</p><p><a href="https://paper.mulindya.com/Semi-orthogonal%20Embedding%20for%20Efficient%20Unsupervised%20Anomaly%20Segmentation.pdf"><strong>Semi-orthogonal Embedding for Efficient Unsupervised Anomaly Segmentation</strong></a> ï¼ˆå¾ˆå¤šæ•°å­¦çŸ¥è¯†ï¼‰</p><h3 id="Swin">Swin</h3><p><a href="https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf"><strong>Swin Transformer: Hierarchical Vision Transformer using Shifted Windows</strong></a></p><h3 id="å…¶ä»–">å…¶ä»–</h3><p>è°·æ­Œæå‡ºçš„ä½¿ç”¨MPLä»£æ›¿Transformerï¼ŒCNNï¼ˆ<a href="https://zhuanlan.zhihu.com/p/370780575">ä¹Ÿå¼•å‘äº†ä¸€äº›äº‰è®®</a>ï¼‰</p><p><a href="https://paper.mulindya.com/MLP-Mixer_An%20all-MLP%20Architecture%20for%20Vision.pdf"><strong>MLP-Mixer: An all-MLP Architecture for Vision</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> æ–‡çŒ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡çŒ® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>fine-tuningçš„æ–¹æ³•</title>
      <link href="/2021/08/13/deep_learning/fine-tuning/"/>
      <url>/2021/08/13/deep_learning/fine-tuning/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ”¶é›†å…³äºæ·±åº¦å­¦ä¹ çš„è°ƒå‚çš„ç›¸å…³ç¬”è®°ï¼Œä¸»è¦ç”¨äºç½‘ç»œè®­ç»ƒçš„å¾®è°ƒã€‚</p></blockquote><h3 id="è®­ç»ƒæŠ€å·§"><strong>è®­ç»ƒæŠ€å·§</strong></h3><p>1.è¦åš<strong>æ¢¯åº¦å½’ä¸€åŒ–</strong>,å³ç®—å‡ºæ¥çš„æ¢¯åº¦é™¤ä»¥minibatch size</p><p>2.clip c(æ¢¯åº¦è£å‰ª): é™åˆ¶æœ€å¤§æ¢¯åº¦,å…¶å®æ˜¯value = sqrt(w1^2 +w2^2â€¦.),å¦‚æœvalueè¶…è¿‡äº†é˜ˆå€¼,å°±ç®—ä¸€ä¸ªè¡°å‡ç³»æ•°,è®©valueçš„å€¼ç­‰äºé˜ˆå€¼: 5,10,15</p><p><strong>3.é˜²æ­¢è¿‡æ‹Ÿåˆ</strong></p><p>â€‹ä¸€èˆ¬å¸¸ç”¨çš„é˜²æ­¢è¿‡æ‹Ÿåˆæ–¹æ³•æœ‰ä½¿ç”¨<strong>L1æ­£åˆ™é¡¹ã€L2æ­£åˆ™é¡¹ã€dropoutã€æå‰ç»ˆæ­¢ã€æ•°æ®é›†æ‰©å……ç­‰</strong>ã€‚å¦‚æœæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°æ¯”è¾ƒå¥½ä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°æ¬ ä½³å¯ä»¥é€‰æ‹©å¢å¤§L1æˆ–L2æ­£åˆ™çš„æƒ©ç½šåŠ›åº¦ï¼ˆ<strong>L2æ­£åˆ™ç»éªŒä¸Šé¦–é€‰1.0</strong>ï¼Œè¶…è¿‡10å¾ˆå°‘è§ï¼‰ï¼Œæˆ–<strong>å¢å¤§dropoutçš„éšæœºå¤±æ´»æ¦‚ç‡</strong>ï¼ˆç»éªŒé¦–é€‰0.5ï¼‰ï¼›æˆ–è€…å½“éšç€è®­ç»ƒçš„æŒç»­åœ¨æµ‹è¯•é›†ä¸Šä¸å¢åé™æ—¶ï¼Œä½¿ç”¨æå‰ç»ˆæ­¢è®­ç»ƒçš„æ–¹æ³•ã€‚å½“ç„¶<strong>æœ€æœ‰æ•ˆçš„è¿˜æ˜¯å¢å¤§è®­ç»ƒé›†çš„è§„æ¨¡</strong>ï¼Œå®åœ¨éš¾ä»¥è·å¾—æ–°æ•°æ®ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®é›†å¢å¼ºçš„æ–¹æ³•ï¼Œæ¯”å¦‚CVä»»åŠ¡å¯ä»¥å¯¹æ•°æ®é›†è¿›è¡Œè£å‰ªã€ç¿»è½¬ã€å¹³ç§»ç­‰æ–¹æ³•è¿›è¡Œæ•°æ®é›†å¢å¼ºï¼Œè¿™ç§æ–¹æ³•å¾€å¾€éƒ½ä¼šæé«˜æœ€åæ¨¡å‹çš„æµ‹è¯•ç²¾åº¦ã€‚<br>dropoutå¯¹å°æ•°æ®é˜²æ­¢è¿‡æ‹Ÿåˆæœ‰å¾ˆå¥½çš„æ•ˆæœ,å€¼ä¸€èˆ¬è®¾ä¸º0.5,å°æ•°æ®ä¸Šdropout+sgdã€‚åœ¨å¤§éƒ¨åˆ†å®éªŒä¸­ï¼Œæ•ˆæœæå‡éƒ½éå¸¸æ˜æ˜¾.<strong>å»ºè®®å°è¯•</strong>ã€‚ dropoutçš„ä½ç½®æ¯”è¾ƒæœ‰è®²ç©¶, å¯¹äºRNN,å»ºè®®æ”¾åˆ°è¾“å…¥-&gt;RNNä¸RNN-&gt;è¾“å‡ºçš„ä½ç½®.å…³äºRNNå¦‚ä½•ç”¨dropout,å¯ä»¥å‚è€ƒ:<a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1409.2329">http://arxiv.org/abs/1409.2329</a>(Captain Jackä»¤è¨€:(ä¸ä»…ä»…å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ, å…¶å®è¿™ç›¸å½“äºåšäººåŠ›æˆæœ¬æœ€ä½çš„Ensemble, å½“ç„¶, è®­ç»ƒèµ·æ¥ä¼šæ¯”æ²¡æœ‰Dropoutçš„è¦æ…¢ä¸€ç‚¹, åŒæ—¶ç½‘ç»œå‚æ•°ä½ æœ€å¥½ç›¸åº”åŠ ä¸€ç‚¹, å¯¹, è¿™ä¼šå†æ…¢ä¸€ç‚¹).)</p><p><strong>4.è¶…å‚</strong></p><p>â€‹learning rate æœ€é‡è¦**ï¼Œæ¨èäº†è§£ cosine learning rate å’Œ cyclic learning rateï¼Œå…¶æ¬¡æ˜¯ <strong>batchsize å’Œ weight decay</strong>ã€‚å½“ä½ çš„æ¨¡å‹è¿˜ä¸é”™çš„æ—¶å€™ï¼Œå¯ä»¥è¯•ç€åšæ•°æ®å¢å¹¿å’Œæ”¹æŸå¤±å‡½æ•°é”¦ä¸Šæ·»èŠ±äº†ã€‚(ç½—æµ©ZJUä»¤è¨€ï¼šéšç€ç½‘ç»œè®­ç»ƒçš„è¿›è¡Œï¼Œå­¦ä¹ ç‡è¦é€æ¸é™ä¸‹æ¥ï¼›ç½‘ç»œæ€§èƒ½è¶Šå¥½ï¼Œå­¦ä¹ ç‡è¦è¶Šå°ï¼ˆå³è¶Šéœ€è¦å¾®è°ƒè€Œéç²—è°ƒ)ï¼›batchsizeé€šå¸¸å½±å“æ²¡é‚£ä¹ˆå¤§ï¼Œå¡æ»¡å¡å°±è¡Œï¼Œé™¤äº†ç‰¹æ®Šçš„ç®—æ³•éœ€è¦batchå¤§ä¸€ç‚¹)<br>â€‹adam,adadeltaç­‰,åœ¨å°æ•°æ®ä¸Š,æˆ‘è¿™é‡Œå®éªŒçš„æ•ˆæœä¸å¦‚sgd, sgdæ”¶æ•›é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æœ€ç»ˆæ”¶æ•›åçš„ç»“æœï¼Œä¸€èˆ¬éƒ½æ¯”è¾ƒå¥½ã€‚<strong>å¦‚æœä½¿ç”¨sgdçš„è¯,å¯ä»¥é€‰æ‹©ä»1.0æˆ–è€…0.1çš„å­¦ä¹ ç‡å¼€å§‹,éš”ä¸€æ®µæ—¶é—´,åœ¨éªŒè¯é›†ä¸Šæ£€æŸ¥ä¸€ä¸‹,å¦‚æœcostæ²¡æœ‰ä¸‹é™,å°±å¯¹</strong>å­¦ä¹ ç‡å‡åŠ**. æˆ‘çœ‹è¿‡å¾ˆå¤šè®ºæ–‡éƒ½è¿™ä¹ˆæ,æˆ‘è‡ªå·±å®éªŒçš„ç»“æœä¹Ÿå¾ˆå¥½. å½“ç„¶,ä¹Ÿå¯ä»¥å…ˆç”¨adaç³»åˆ—å…ˆè·‘,æœ€åå¿«æ”¶æ•›çš„æ—¶å€™,æ›´æ¢æˆsgdç»§ç»­è®­ç»ƒ.åŒæ ·ä¹Ÿä¼šæœ‰æå‡.æ®è¯´adadeltaä¸€èˆ¬åœ¨åˆ†ç±»é—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ï¼Œadamåœ¨ç”Ÿæˆé—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ã€‚(Captain Jackä»¤è¨€ï¼šsgd adam è¿™äº›é€‰æ‹©ä¸Š, çœ‹ä½ ä¸ªäººé€‰æ‹©. ä¸€èˆ¬å¯¹ç½‘ç»œä¸æ˜¯å†³å®šæ€§çš„. åæ­£æˆ‘æ— è„‘ç”¨sgd + momentum. ï¼‰</p><p>5.<strong>æ¿€æ´»å‡½æ•°</strong><br>é™¤äº†gateä¹‹ç±»çš„åœ°æ–¹,éœ€è¦æŠŠè¾“å‡ºé™åˆ¶æˆ0-1ä¹‹å¤–,<strong>å°½é‡ä¸è¦ç”¨sigmoid</strong>,å¯ä»¥ç”¨tanhæˆ–è€…reluä¹‹ç±»çš„æ¿€æ´»å‡½æ•°.1. sigmoidå‡½æ•°åœ¨-4åˆ°4ä¹‹å¤–çš„åŒºé—´æ¢¯åº¦æ¥è¿‘0ï¼Œå¾ˆå®¹æ˜“é€ æˆæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚2. è¾“å…¥0å‡å€¼ï¼Œsigmoidå‡½æ•°çš„è¾“å‡ºä¸æ˜¯0å‡å€¼çš„ã€‚ï¼ˆhzwerä»¤è¨€:è™½ç„¶æœ‰è‡³å°‘åç§æ¿€æ´»å‡½æ•°ï¼Œä½†åœ¨ Relu å¤–åªæ¨èè¯•ä¸€ä¸‹ Swishã€‚)</p><p>6.BNå±‚å…·æœ‰åŠ é€Ÿè®­ç»ƒé€Ÿåº¦ï¼Œæœ‰æ•ˆé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸ï¼Œå…·æœ‰é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ•ˆæœï¼Œæ‰€ä»¥æ„å»ºç½‘ç»œæ—¶æœ€å¥½è¦åŠ ä¸Šè¿™ä¸ªç»„ä»¶ã€‚(Captain Jackä»¤è¨€ï¼šbatch normalizationæˆ‘ä¸€ç›´æ²¡ç”¨, è™½ç„¶æˆ‘çŸ¥é“è¿™ä¸ªå¾ˆå¥½, æˆ‘ä¸ç”¨ä»…ä»…æ˜¯å› ä¸ºæˆ‘æ‡’. æ‰€ä»¥è¦é¼“åŠ±ä½¿ç”¨batch normalization.ï¼‰</p><p>7.å¦‚æœä½ çš„æ¨¡å‹åŒ…å«å…¨è¿æ¥å±‚ï¼ˆMLPï¼‰ï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºå¤§å°ä¸€æ ·ï¼Œå¯ä»¥è€ƒè™‘å°†MLPæ›¿æ¢æˆ<strong>Highway Network</strong>,æˆ‘å°è¯•å¯¹ç»“æœæœ‰ä¸€ç‚¹æå‡ï¼Œå»ºè®®ä½œä¸ºæœ€åæå‡æ¨¡å‹çš„æ‰‹æ®µï¼ŒåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç»™<strong>è¾“å‡ºåŠ äº†ä¸€ä¸ªgateæ¥æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨</strong>ï¼Œè¯¦ç»†ä»‹ç»è¯·å‚è€ƒè®ºæ–‡: <a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1505.00387">http://arxiv.org/abs/1505.00387</a></p><p>8.æ¥è‡ª@å¼ é¦¨å®‡çš„æŠ€å·§ï¼š<strong>ä¸€è½®åŠ æ­£åˆ™ï¼Œä¸€è½®ä¸åŠ æ­£åˆ™ï¼Œåå¤è¿›è¡Œã€‚</strong></p><p><strong>9.Ensemble</strong><br>Ensembleæ˜¯è®ºæ–‡åˆ·ç»“æœçš„ç»ˆææ ¸æ­¦å™¨,æ·±åº¦å­¦ä¹ ä¸­ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼<br>åŒæ ·çš„å‚æ•°,ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼<br>ä¸åŒçš„å‚æ•°,é€šè¿‡cross-validation,é€‰å–æœ€å¥½çš„å‡ ç»„<br>åŒæ ·çš„å‚æ•°,æ¨¡å‹è®­ç»ƒçš„ä¸åŒé˜¶æ®µï¼Œå³ä¸åŒè¿­ä»£æ¬¡æ•°çš„æ¨¡å‹ã€‚<br>ä¸åŒçš„æ¨¡å‹,è¿›è¡Œçº¿æ€§èåˆ. ä¾‹å¦‚RNNå’Œä¼ ç»Ÿæ¨¡å‹.</p><p><strong>10.è‡ªåŠ¨è°ƒå‚æ–¹æ³•</strong><br>ï¼ˆ1ï¼‰Grid Searchï¼šå…¶åŸç†å°±åƒæ˜¯åœ¨æ•°ç»„é‡Œæ‰¾æœ€å¤§å€¼ã€‚ç¼ºç‚¹æ˜¯å¤ªè´¹æ—¶é—´äº†ï¼Œç‰¹åˆ«åƒç¥ç»ç½‘ç»œï¼Œä¸€èˆ¬å°è¯•ä¸äº†å¤ªå¤šçš„å‚æ•°ç»„åˆã€‚<br>ï¼ˆ2ï¼‰Random Searchï¼šç»éªŒä¸Šï¼ŒRandom Searchæ¯”Gird Searchæ›´æœ‰æ•ˆã€‚å®é™…æ“ä½œçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯å…ˆç”¨Gird Searchçš„æ–¹æ³•ï¼Œå¾—åˆ°æ‰€æœ‰å€™é€‰å‚æ•°ï¼Œç„¶åæ¯æ¬¡ä»ä¸­éšæœºé€‰æ‹©è¿›è¡Œè®­ç»ƒã€‚å¦å¤–Random Searchå¾€å¾€ä¼šå’Œç”±ç²—åˆ°ç»†çš„è°ƒå‚ç­–ç•¥ç»“åˆä½¿ç”¨ï¼Œå³åœ¨æ•ˆæœæ¯”è¾ƒå¥½çš„å‚æ•°é™„è¿‘è¿›è¡Œæ›´åŠ ç²¾ç»†çš„æœç´¢ã€‚<br>ï¼ˆ3ï¼‰Bayesian Optimizationï¼šè´å¶æ–¯ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°äº†ä¸åŒå‚æ•°å¯¹åº”çš„ å®éªŒç»“æœå€¼ï¼Œå› æ­¤æ›´èŠ‚çœæ—¶é—´ï¼Œè´å¶æ–¯è°ƒå‚æ¯”Grid Searchè¿­ä»£æ¬¡æ•°å°‘ï¼Œ é€Ÿåº¦å¿«ï¼›è€Œä¸”å…¶é’ˆå¯¹éå‡¸é—®é¢˜ä¾ç„¶ç¨³å¥ã€‚</p><p><strong>11.Lossè®¾è®¡</strong><br>+ ä¸€èˆ¬æ¥è¯´åˆ†ç±»å°±æ˜¯Softmax, å›å½’å°±æ˜¯L2çš„loss. ä½†æ˜¯è¦æ³¨æ„lossçš„é”™è¯¯èŒƒå›´(ä¸»è¦æ˜¯å›å½’), ä½ é¢„æµ‹ä¸€ä¸ªlabelæ˜¯10000çš„å€¼, æ¨¡å‹è¾“å‡º0, ä½ ç®—ç®—è¿™losså¤šå¤§, è¿™è¿˜æ˜¯å•å˜é‡çš„æƒ…å†µä¸‹. ä¸€èˆ¬ç»“æœéƒ½æ˜¯nan. æ‰€ä»¥ä¸ä»…ä»…è¾“å…¥è¦åšnormalization, è¾“å‡ºä¹Ÿè¦.<br>+ å¤šä»»åŠ¡æƒ…å†µä¸‹, å„lossæƒ³æ³•é™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, æˆ–è€…æœ€ç»ˆé™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, åˆæœŸå¯ä»¥ç€é‡ä¸€ä¸ªä»»åŠ¡çš„lossã€‚</p><h3 id="ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE"><strong>ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE)</strong></h3><p>SEåœ¨åˆ†ç±»ä¸Šæ˜¯ä¸ªæ¶¨ç‚¹å¿…å¤‡çš„å·¥å…·ï¼Œæ¢è¨€ä¹‹ï¼Œå †æœ€é«˜ç²¾åº¦æ˜¯ä¸€å®šè¦ç»™æ¯ä¸ªblockéƒ½åŠ ä¸Šå®ƒçš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦è€ƒè™‘æ—¶é—´ï¼Œå‚æ•°é‡å’Œç²¾åº¦ç­‰çš„trade-offï¼Œæ— è„‘å †å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥è¦é€‰æ‹©åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨åˆé€‚çš„æ¨¡å—ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<strong>æ¨èåœ¨blockæ•°é‡å’Œæ·»åŠ SEä¸Šåšæƒè¡¡</strong>ï¼Œå³<strong>ç»™éƒ¨åˆ†blcokåŠ ä¸ŠSEï¼ŒåŒæ—¶ç æ‰ä¸€äº›blockæ¥åŠ é€Ÿ</strong>ï¼Œè¿™æ ·å¯ä»¥åœ¨ç²¾åº¦å·®ä¸å¤šçš„æƒ…å†µä¸‹å‡å°‘ä¸€äº›å‚æ•°é‡ã€‚å½“ç„¶inferenceæ—¶é—´è¿™ä¸ªäº‹éœ€è¦çœ‹å…·ä½“çš„åº”ç”¨å¹³å°å¯¹SEçš„å®ç°ï¼Œå°±æ˜¯GAPå’ŒFCçš„é€Ÿåº¦ï¼Œè¿™å°±å…·ä½“é—®é¢˜å…·ä½“åˆ†æäº†ã€‚<strong>æœ‰ä½™åŠ›æœ‰å¡çš„äººï¼Œå¯ä»¥è¿ç§»æŸç§NASæ–¹æ³•æ¥åšè¿™ä¸ªçš„æœç´¢ã€‚</strong><br>å‚è€ƒè‡ªï¼š<br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - è§ç‘Ÿçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/94816420">https://www.zhihu.com/question/41631631/answer/94816420</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - Towserçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/862075836">https://www.zhihu.com/question/41631631/answer/862075836</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - ç½—æµ©.ZJUçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/216788968">https://www.zhihu.com/question/41631631/answer/216788968</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - äº¬ä¸œç™½æ¡çš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/776852832">https://www.zhihu.com/question/4163</a></p><blockquote><p>æ‰€è°“SEï¼šSENetæ˜¯Squeeze-and-Excitation Networksçš„ç®€ç§°ï¼Œæ‹¿åˆ°äº†ImageNet2017åˆ†ç±»æ¯”èµ›å† å†›ï¼Œå…¶æ•ˆæœå¾—åˆ°äº†è®¤å¯ï¼Œå…¶æå‡ºçš„SEæ¨¡å—æ€æƒ³ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å¯ä»¥åŠ è½½åˆ°ç°æœ‰çš„ç½‘ç»œæ¨¡å‹æ¡†æ¶ä¸­ã€‚<em><u>SENetä¸»è¦æ˜¯å­¦ä¹ äº†channelä¹‹é—´çš„ç›¸å…³æ€§ï¼Œç­›é€‰å‡ºäº†é’ˆå¯¹é€šé“çš„æ³¨æ„åŠ›</u></em>ï¼Œç¨å¾®å¢åŠ äº†ä¸€ç‚¹è®¡ç®—é‡ï¼Œä½†æ˜¯æ•ˆæœæ¯”è¾ƒå¥½ã€‚</p></blockquote><p>å¯¹äºCNNç½‘ç»œæ¥è¯´ï¼Œå…¶æ ¸å¿ƒè®¡ç®—æ˜¯å·ç§¯ç®—å­ï¼Œå…¶é€šè¿‡å·ç§¯æ ¸ä»è¾“å…¥ç‰¹å¾å›¾å­¦ä¹ åˆ°æ–°ç‰¹å¾å›¾ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå·ç§¯æ˜¯å¯¹ä¸€ä¸ªå±€éƒ¨åŒºåŸŸè¿›è¡Œç‰¹å¾èåˆï¼Œè¿™åŒ…æ‹¬ç©ºé—´ä¸Šï¼ˆHå’ŒWç»´åº¦ï¼‰ä»¥åŠé€šé“é—´ï¼ˆCç»´åº¦ï¼‰çš„ç‰¹å¾èåˆã€‚</p><p><img src="https://picture.mulindya.com/fine-tuning-pic1.png" alt=""></p><p>å·ç§¯å®é™…ä¸Šæ˜¯å¯¹<u>å±€éƒ¨åŒºåŸŸ</u>è¿›è¡Œçš„ç‰¹å¾èåˆã€‚ è¿™ä¹Ÿå¯¼è‡´äº†æ™®é€šå·ç§¯ç¥ç»ç½‘ç»œçš„æ„Ÿå—é‡ä¸å¤§ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾è®¡å‡ºæ›´å¤šçš„é€šé“ç‰¹å¾æ¥å¢åŠ è¿™ä¸ªï¼Œä½†æ˜¯è¿™æ ·åšå¯¼è‡´äº†è®¡ç®—é‡å¤§å¤§çš„å¢åŠ ã€‚å› æ­¤ä¸ºäº†ç©ºé—´ä¸Šèåˆæ›´å¤šç‰¹å¾èåˆï¼Œæˆ–è€…æ˜¯æå–å¤šå°ºåº¦ç©ºé—´ä¿¡æ¯ã€‚ä¹Ÿæå‡ºäº†è®¸å¤šä¸åŒçš„æ–¹æ³•å¦‚Inceptionç½‘ç»œçš„å¤šåˆ†æ”¯ç»“æ„ã€‚å¯¹äºchannelç»´åº¦çš„ç‰¹å¾èåˆï¼Œå·ç§¯æ“ä½œåŸºæœ¬ä¸Šé»˜è®¤å¯¹è¾“å…¥ç‰¹å¾å›¾çš„æ‰€æœ‰channelè¿›è¡Œèåˆã€‚<u>è€ŒSENetç½‘ç»œçš„åˆ›æ–°ç‚¹åœ¨äºå…³æ³¨channelä¹‹é—´çš„å…³ç³»ï¼Œå¸Œæœ›æ¨¡å‹å¯ä»¥è‡ªåŠ¨å­¦ä¹ åˆ°ä¸åŒchannelç‰¹å¾çš„é‡è¦ç¨‹åº¦</u>ã€‚ä¸ºæ­¤ï¼ŒSENetæå‡ºäº†Squeeze-and-Excitation (SE)æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/fine-tuning-pic2.png" alt=""></p><h3 id="åé¢è®­è¯«">åé¢è®­è¯«</h3><p>1.1ã€ä¸€ä¸Šæ¥å°±è‡ªå·±åŠ¨æ‰‹å†™æ¨¡å‹ã€‚<br>å»ºè®®é¦–å…ˆç”¨<strong>æˆç†Ÿçš„å¼€æºé¡¹ç›®åŠå…¶é»˜è®¤é…ç½®</strong>ï¼ˆä¾‹å¦‚ Gluon å¯¹ç»å…¸æ¨¡å‹çš„å„ç§å¤ç°ã€å„ä¸ªè‘—åæ¨¡å‹ä½œè€…è‡ªå·±æ”¾å‡ºæ¥çš„ä»£ç ä»“åº“ï¼‰åœ¨è‡ªå·±çš„æ•°æ®é›†ä¸Šè·‘ä¸€éï¼Œåœ¨ç­‰ç¨‹åºè¿è¡Œç»“æŸçš„æ—¶é—´é‡Œä»”ç»†ç ”ç©¶ä¸€ä¸‹ä»£ç é‡Œçš„å„ç§ç»†èŠ‚ï¼Œæœ€åå†è‡ªå·±å†™æˆ–è€…æ”¹ä»£ç ã€‚</p><p>1.2ã€<strong>ä¸æ¨èåšäººè‚‰æ¨¡å‹è®¾è®¡</strong>ï¼Œæ¯”å¦‚æŠŠæŸå±‚å·ç§¯æ”¹å¤§ä¸€ç‚¹ï¼Œæˆ–è€…å¾®è°ƒä¸€ä¸‹é€šé“æ•°ã€‚é™¤éæœ‰ç‰¹åˆ« insightï¼Œä¸è¦è‡ªå·±ä¹±è®¾è®¡æ–°ç»„ä»¶ã€‚</p><p>2ã€è®­ RNN ä¸åŠ  gradient clippingï¼Œå¯¼è‡´è®­ç»ƒä¸€æ®µæ—¶é—´ä»¥å loss çªç„¶å˜æˆ Nanã€‚</p><p>3ã€tying input &amp; output embeddingï¼ˆå°±æ˜¯è¯å‘é‡å±‚å’Œè¾“å‡º softmax å‰çš„çŸ©é˜µå…±äº«å‚æ•°ï¼Œåœ¨è¯­è¨€æ¨¡å‹æˆ–æœºå™¨ç¿»è¯‘ä¸­å¸¸ç”¨ï¼‰æ—¶å­¦ä¹ ç‡éœ€è¦è®¾ç½®å¾—éå¸¸å°ï¼Œä¸ç„¶å®¹æ˜“ Nanã€‚</p><p>4.1ã€åœ¨æ•°æ®é›†å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸Šæ¥å°±è·‘å…¨é‡æ•°æ®ã€‚å»ºè®®å…ˆç”¨ 1/100ã€1/10 çš„æ•°æ®è·‘ä¸€è·‘ï¼Œå¯¹æ¨¡å‹æ€§èƒ½å’Œè®­ç»ƒæ—¶é—´æœ‰ä¸ªåº•ã€‚</p><p>4.2è®¤ä¸ºç½‘ç»œå±‚æ•°è¶Šå¤§è¶Šå¥½ã€‚å‚æ•°é‡ä»€ä¹ˆçš„éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œåœ¨æ€§èƒ½ä¸ä¸¢çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œå±‚æ•°å‡åˆ°æœ€å°.ï¼ˆCaptain Jackä»¤è¨€ï¼šä½ æœ‰95%æ¦‚ç‡ä¸ä¼šä½¿ç”¨è¶…è¿‡40å±‚çš„æ¨¡å‹. ï¼‰</p><p>5ã€åªå–œæ¬¢æ¼‚äº®çš„æ¨¡å‹ç»“æ„ï¼Œç§ä¸èµ·è°ƒå‚æ•°çš„è®ºæ–‡/å®éªŒæŠ¥å‘Šï¼Œ<strong>çœ‹è®ºæ–‡æ—¶ç»å¸¸ä¸çœ‹è¶…å‚æ•°è®¾ç½®ç­‰ç»†èŠ‚</strong>ã€‚æ®Šä¸çŸ¥åœ¨è‡ªå·±æ²¡æœ‰å¤ªå¤šèµ„æºå®éªŒçš„æƒ…å†µä¸‹ï¼Œå®éªŒæŠ¥å‘Šç±»æ–‡ç« ç®€ç›´æ˜¯ä¸šç•Œè‰¯å¿ƒï¼<br>NLP é¢†åŸŸä¸»è¦æ¨èä»¥ä¸‹å‡ ç¯‡ï¼š<br>Regularizing and Optimizing LSTM Language Modelsï¼ˆLSTM çš„è®­ç»ƒæŠ€å·§ï¼‰<br>Massive Exploration of Neural Machine Translation Architecturesï¼ˆNMT é‡Œå„ä¸ªè¶…å‚çš„å½±å“ï¼‰<br>Training Tips for the Transformer Modelï¼ˆè®­ç»ƒ Transformer æ—¶ä¼šå‘ç”Ÿçš„å„ç§ç°è±¡ï¼‰<br>RoBERTa: A Robustly Optimized BERT Pretraining Approachï¼ˆBERT é¢„è®­ç»ƒæŠ€å·§ï¼Œè™½ç„¶è·Ÿå¤§éƒ¨åˆ†äººæ²¡å•¥å…³ç³»ï¼‰<br>CV æˆ‘ä¸ç®—å¤ªç†Ÿï¼Œä¸è¿‡ä¹Ÿå¯ä»¥å‹‰å¼ºæ¨èå‡ ç¯‡ï¼š</p><p><a href="https://arxiv.org/pdf/1706.02677.pdf">Training ImageNet in 1 Hourï¼ˆå¤§æ‰¹é‡è®­ç»ƒæŠ€å·§ï¼‰</a><br><a href="https://openaccess.thecvf.com/content_CVPR_2019/papers/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf">Bag of Tricks for Image Classification with Convolutional Neural Networksï¼ˆå„ç§è®­ç»ƒæŠ€å·§é›†å¤§æˆï¼‰</a><br><a href="https://arxiv.org/pdf/1905.11946.pdf">EfficientNet: Rethinking Model Scaling for Convolutional Neural Networksï¼ˆå½“å‰å¯¹å‚æ•°åˆ©ç”¨æœ€æœ‰æ•ˆçš„ CNNï¼‰</a></p><p>6ã€å¯¹äºlossè¿™ç§å— batch sizeã€sequence length å„ç§å› ç´ å½±å“çš„æ•°å­—ï¼Œäººæ˜¯æ²¡æœ‰æ•°æ„Ÿçš„ï¼Œå»ºè®®é¦–å…ˆè®¡ç®—ä¸€ä¸‹ per token lossï¼ˆå¦‚æœæ˜¯å¤šä»»åŠ¡ï¼Œå¯ä»¥æ¯ä¸ªä»»åŠ¡å•ç‹¬ç®—ï¼›ç±»ä¼¼åœ°ï¼ŒæŸäº› CV ä»»åŠ¡å¯ä»¥è®¡ç®— per pixel lossï¼‰ï¼Œå¿ƒé‡Œæœ‰ç‚¹æ„Ÿè§‰ã€‚<strong>è„±ç¦»æŸå¤±å‡½æ•°çš„å½¢å¼è°ˆå­¦ä¹ ç‡æ²¡æœ‰æ„ä¹‰</strong>ï¼ˆä¾‹å¦‚å•æ˜¯å¯¹ batch size æ±‚å’Œæˆ–è€…å–å¹³å‡è¿™ä¸ªå·®å¼‚å°±ä¼šä½¿æ¢¯åº¦å·®æˆç™¾ä¸Šåƒå€ï¼‰ã€‚<br>åœ¨ç¡®å®šåˆå§‹å­¦ä¹ ç‡çš„æ—¶å€™ï¼Œä»ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼ˆä¾‹å¦‚ 1e-7ï¼‰å¼€å§‹ï¼Œç„¶å**æ¯ä¸€æ­¥æŒ‡æ•°å¢å¤§å­¦ä¹ ç‡ï¼ˆä¾‹å¦‚æ‰©å¤§1.05 å€ï¼‰è¿›è¡Œè®­ç»ƒã€‚**è®­ç»ƒå‡ ç™¾æ­¥åº”è¯¥èƒ½è§‚å¯Ÿåˆ°æŸå¤±å‡½æ•°éšè®­ç»ƒæ­¥æ•°å‘ˆå¯¹å‹¾å½¢ï¼Œé€‰æ‹©æŸå¤±ä¸‹é™æœ€å¿«é‚£ä¸€æ®µçš„å­¦ä¹ ç‡å³å¯ã€‚<br>(Captain Jackä»¤è¨€ï¼š<strong>è§‚å¯Ÿlossèƒœäºè§‚å¯Ÿå‡†ç¡®ç‡</strong><br>å‡†ç¡®ç‡è™½ç„¶æ˜¯è¯„æµ‹æŒ‡æ ‡, ä½†æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­è¿˜æ˜¯è¦æ³¨æ„lossçš„. ä½ ä¼šå‘ç°æœ‰äº›æƒ…å†µä¸‹, å‡†ç¡®ç‡æ˜¯çªå˜çš„, åŸæ¥ä¸€ç›´æ˜¯0, å¯èƒ½ä¿æŒä¸Šåƒè¿­ä»£, ç„¶åçªç„¶å˜1. è¦æ˜¯å› ä¸ºè¿™ä¸ªä½ æå‰ä¸­æ–­è®­ç»ƒäº†, åªæœ‰è€å¤©æ›¿ä½ æƒ‹æƒœäº†. è€Œlossæ˜¯ä¸ä¼šæœ‰è¿™ä¹ˆè¯¡å¼‚çš„æƒ…å†µå‘ç”Ÿçš„, æ¯•ç«Ÿä¼˜åŒ–ç›®æ ‡æ˜¯loss.<br>ç»™NNä¸€ç‚¹æ—¶é—´, è¦æ ¹æ®ä»»åŠ¡ç•™ç»™NNçš„å­¦ä¹ ä¸€å®šç©ºé—´. ä¸èƒ½è¯´å‰é¢ä¸€æ®µæ—¶é—´æ²¡èµ·è‰²å°±ä¸ç®¡äº†. æœ‰äº›æƒ…å†µä¸‹å°±æ˜¯å‰é¢ä¸€æ®µæ—¶é—´çœ‹ä¸å‡ºèµ·è‰², ç„¶åå¼€å§‹ç¨³å®šå­¦ä¹ .ï¼‰</p><p>7.1ã€ä¼˜åŒ–å™¨<strong>åªæ¨è</strong> Momentum å’Œ Adamã€‚åœ¨è¿™äº›æ–¹é¢åšå°è¯•æ„ä¹‰ä¸å¤§ï¼Œå¦‚æœæ€§èƒ½æå‡åå€’å¯èƒ½è¯´æ˜æ¨¡å‹ä¸æˆç†Ÿã€‚</p><p>7.2ã€<strong>Adam å¯ä»¥è§£å†³ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæœ‰æ—¶ loss é™ä¸ä¸‹å»ï¼Œæ¢ Adam ç¬é—´å°±å¥½äº†ï¼‰ï¼Œ<strong>ä¹Ÿå¯ä»¥å¸¦æ¥ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæ¯”å¦‚å•è¯è¯é¢‘å·®å¼‚å¾ˆå¤§ï¼Œå½“å‰ batch æ²¡æœ‰çš„å•è¯çš„è¯å‘é‡ä¹Ÿè¢«æ›´æ–°ï¼›å†æ¯”å¦‚Adamå’ŒL2æ­£åˆ™ç»“åˆäº§ç”Ÿçš„å¤æ‚æ•ˆæœï¼‰ã€‚ç”¨çš„æ—¶å€™è¦èƒ†å¤§å¿ƒç»†ï¼Œä¸‡ä¸€é‡åˆ°é—®é¢˜æ‰¾å„ç§é­”æ”¹ Adamï¼ˆæ¯”å¦‚ <a href="https://www.zhihu.com/question/265357659/answer/580469438">MaskedAdam</a>, AdamW å•¥çš„ï¼‰æŠ¢æ•‘ã€‚</p><p>8ã€subword æ€»æ˜¯ä¼šå¾ˆç¨³å®šåœ°æ¶¨ç‚¹ï¼Œåªç®¡ç”¨å°±å¯¹äº†ã€‚</p><p>9ã€<strong>GPU ä¸ŠæŠ¥é”™æ—¶å°½é‡æ”¾åœ¨ CPU ä¸Šé‡è·‘</strong>ï¼Œé”™è¯¯ä¿¡æ¯æ›´å‹å¥½ã€‚ä¾‹å¦‚ â€œERROR:tensorflow:Model diverged with loss = NaNâ€ å…¶å®å¾ˆæœ‰å¯èƒ½æ˜¯è¾“å…¥ ID è¶…å‡ºäº† softmax è¯è¡¨çš„èŒƒå›´ã€‚</p><p><strong>10ã€åˆ«æ²¡è€å¿ƒ</strong>ï¼<br>**æœ‰äº›æŒ‡æ ‡æ˜¯æœ‰æ»åæ€§çš„ï¼Œéœ€è¦ç­‰è®­ç»ƒä¸€æ®µæ—¶é—´æ‰å¼€å§‹åŠ¨ã€‚**å¾ˆå¤šäººè®­ç»ƒå‡ æ­¥çœ‹æ²¡ä»€ä¹ˆæ•ˆæœå°±æŠŠç¨‹åºåœæ‰å¼€å§‹ debug äº†ï¼Œä½†å…¶å®ä»£ç æ¯«æ— é—®é¢˜ã€‚å¦‚æ­¤åå¤å¥½å‡ å¤©ç”šè‡³ä¸€ä¸¤å‘¨éƒ½åœ¨åŸåœ°è¸æ­¥ï¼Œå…¶å®éœ€è¦åšçš„ä»…ä»…æ˜¯è®©ç¨‹åºè‡ªä¸ªå„¿å®‰å®‰é™é™åœ°è·‘ä¸Šå‡ ä¸ªå°æ—¶æˆ–è€…ä¸€å¤©â€¦â€¦</p><h3 id="ç›¸å…³trick">ç›¸å…³trick</h3><ul><li><p>fine-tuning: é€šå¸¸æ¥è¯´ï¼Œç›´æ¥æŠŠé¢„è®­ç»ƒæ¨¡å‹æ¥ç”¨æ•ˆæœä¸ä¸€å®šè¶³å¤Ÿå¥½ï¼Œå› æ­¤éœ€è¦è¿›è¡Œfine-tuningï¼ˆå¾®è°ƒï¼‰ã€‚fine-tuningéœ€è¦å†»ç»“ç½‘ç»œçš„å‰å‡ å±‚å‚æ•°ï¼Œåªæ›´æ–°ç½‘ç»œç»“æ„çš„åé¢å‡ å±‚å’Œæœ€åçš„å…¨è¿æ¥å±‚ï¼Œè¿™æ ·æ•ˆæœä¼šæ›´å¥½ã€‚</p></li><li><p>Learning rate:åœ¨è¿ç§»å­¦ä¹ çš„å¾®è°ƒè¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨è¿‡å¤§çš„å­¦ä¹ ç‡ï¼Œé€šå¸¸æ¥è¯´1e-5æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚</p></li></ul><h4 id="è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚">è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</h4><ul><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œåœ¨è¿›è¡Œfinetuneå­˜åœ¨overfitçš„é£é™©ï¼Œåˆç”±äºæ•°æ®é›†å’ŒåŸå§‹æ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œå› æ­¤äºŒè€…ä¸è®ºæ˜¯local featureè¿˜æ˜¯global featureéƒ½æ¯”è¾ƒç›¸   è¿‘ï¼Œæ‰€ä»¥æ­¤æ—¶æœ€ä½³çš„æ–¹æ³•æ˜¯æŠŠCNNç½‘ç»œå½“åšç‰¹å¾æå–å™¨ç„¶åè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨è¿›è¡Œåˆ†ç±»</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š</h5><p>å¾ˆæ˜æ˜¾ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒoverfitï¼Œå› æ­¤å¯¹å…¨éƒ¨ç½‘ç»œç»“æ„è¿›è¡Œfine-tuneæ˜¯è¾ƒå¥½çš„ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œä¸é€‚åˆè¿›è¡Œfine-tuneï¼Œç”±äºæ•°æ®é›†å·®å¼‚å¤§ï¼Œåº”è¯¥åœ¨å•ç‹¬è®­ç»ƒç½‘ç»œç»“æ„ä¸­è¾ƒé«˜çš„å±‚ï¼Œå‰é¢å‡ å±‚localçš„å°±ä¸ç”¨è®­ç»ƒäº†ï¼Œç›´æ¥å›ºå®šæƒå€¼ã€‚åœ¨å®é™…ä¸­ï¼Œè¿™ç§é—®é¢˜ä¸‹è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬æ˜¯ä»ç½‘ç»œçš„æŸå±‚å¼€å§‹å–å‡ºç‰¹å¾ï¼Œç„¶åè®­ç»ƒSVMåˆ†ç±»å™¨ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>æœ¬æ¥ç”±äºæ•°æ®é›†è¾ƒå¤§ï¼Œå¯ä»¥ä»å¤´å¼€å§‹è®­ç»ƒçš„ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­æ›´åå‘äºè®­ç»ƒæ•´ä¸ªpre-trained modelçš„ç½‘ç»œã€‚</p></li></ul><p>â€‹</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> å¾®è°ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢¯åº¦è£å‰ª</title>
      <link href="/2021/08/12/deep_learning/gradient-clip/"/>
      <url>/2021/08/12/deep_learning/gradient-clip/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é˜…è¯»ä»£ç  optimizer_config = dict(grad_clip=dict(max_norm=35, norm_type=2))ï¼Œå°±æ­¤æ¢ç©¶ä¸€ä¸‹grap_clipã€‚ä»–çš„ä½œç”¨æ˜¯æ¢¯åº¦è£å‰ªï¼Œä¸ºäº†é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ã€‚å…¶ä¸­max_normæ˜¯æœ€å¤§æ¢¯åº¦é˜ˆå€¼ï¼Œnorm_typeæ˜¯æŒ‡å®šçš„èŒƒæ•°ç±»å‹ã€‚</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸">æ¢¯åº¦çˆ†ç‚¸</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦è£å‰ª">æ¢¯åº¦è£å‰ª</h2><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>è®­ç»ƒæ¨¡å‹å‡ºç°Losså€¼å‡ºç°è·³åŠ¨ï¼Œä¸€ç›´ä¸æ”¶æ•›æ—¶ï¼Œé™¤äº†è®¾å°å­¦ä¹ ç‡ä¹‹å¤–ï¼Œæ¢¯åº¦è£å‰ªä¹Ÿæ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ã€‚</p><p>ç„¶è€Œæ•ˆæœä¸ä½³æ—¶ï¼Œé‚£è¿™å°±è·Ÿå­¦ä¹ ç‡å’Œæ¢¯åº¦çˆ†ç‚¸æ²¡å•¥å…³ç³»äº†ã€‚å› æ­¤ï¼Œ<strong>å­¦ä¹ ç‡</strong>çš„è®¾å®šå’Œ<strong>æ¢¯åº¦è£å‰ª</strong>çš„é˜ˆå€¼å¹¶ä¸èƒ½æé«˜æ¨¡å‹çš„å‡†ç¡®ç‡</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ ï¼Œæ¢¯åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer05 æ›¿æ¢ç©ºæ ¼</title>
      <link href="/2021/08/11/leetcode/leetcode-offer05/"/>
      <url>/2021/08/11/leetcode/leetcode-offer05/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ›¿æ¢ç©ºæ ¼</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² <code>s</code> ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ"%20"ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">è¾“å…¥ï¼šs = <span class="hljs-string">"We are happy."</span><br>è¾“å‡ºï¼š<span class="hljs-string">"We%20are%20happy."</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= s çš„é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç›´æ¥æ›¿æ¢å³å¯ã€‚ç›¸å½“äºä½¿ç”¨replaceæ–¹æ³•</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">replaceSpace</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>       <span class="hljs-comment">#ç›¸å½“äºç°æˆå‡½æ•° return s.replace(" ","%20")</span><br>        result = <span class="hljs-string">""</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x==<span class="hljs-string">' '</span>:<br>                x = <span class="hljs-string">"%20"</span><br>            result += x<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å­—ç¬¦ä¸² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer04 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</title>
      <link href="/2021/08/11/leetcode/leetcode-offer04/"/>
      <url>/2021/08/11/leetcode/leetcode-offer04/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  [<span class="hljs-number">1</span>,   <span class="hljs-number">4</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">15</span>],<br>  [<span class="hljs-number">2</span>,   <span class="hljs-number">5</span>,  <span class="hljs-number">8</span>, <span class="hljs-number">12</span>, <span class="hljs-number">19</span>],<br>  [<span class="hljs-number">3</span>,   <span class="hljs-number">6</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">22</span>],<br>  [<span class="hljs-number">10</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">17</span>, <span class="hljs-number">24</span>],<br>  [<span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">23</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>]<br>]<br></code></pre></td></tr></tbody></table></figure><p>ç»™å®š target = <code>5</code>ï¼Œè¿”å› <code>true</code>ã€‚</p><p>ç»™å®š target = <code>20</code>ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 1000</li><li>0 &lt;= m &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å½“å¼€å§‹æƒ³è¦é‡‡ç”¨äºŒåˆ†æ³•çš„æ€æƒ³è¿›è¡Œåˆ¤æ–­ã€‚ä½†æ˜¯å‘ç°äºŒåˆ†åªèƒ½è€ƒè™‘åˆ°å·¦ä¸Šå’Œå³ä¸‹å—çš„å†…å®¹ã€‚å³ä¸Šå’Œå·¦ä¸‹çš„å†…å®¹æ— æ³•åˆ¤æ–­å…¶å¤§å°åˆ’åˆ†ã€‚æ‰€ä»¥ä¼šæœ‰è§†è§‰ç›²åŒºæ— æ³•äºŒåˆ†ç¼©å°åŒºåŸŸã€‚</p><p><font color="purple">äºŒç»´æ•°ç»„æ— æ³•ç”¨äºŒåˆ†æ³•ï¼Œå› ä¸ºå…¶â€œäºŒåˆ†â€æ˜¯åˆ†ä¸º4ä»½ï¼Œæ— æ³•å……åˆ†æ¶µç›–è¿›è¡Œåˆ¤æ–­ï¼Œä¼šå‡ºç°é”™è¯¯ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        si,sj = <span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        ei,ej = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isExit</span>(<span class="hljs-params">matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], si, sj, ei, ej, target: <span class="hljs-built_in">int</span></span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (si&lt;=ei <span class="hljs-keyword">and</span> sj&lt;=ej): <span class="hljs-comment">#å…ˆåˆ¤æ–­èŒƒå›´</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target&lt;matrix[si][sj] <span class="hljs-keyword">or</span> target&gt;matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target==matrix[si][sj] <span class="hljs-keyword">or</span> target==matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            mi,mj = <span class="hljs-built_in">int</span>((si+ei)/<span class="hljs-number">2</span>),<span class="hljs-built_in">int</span>((sj+ej)/<span class="hljs-number">2</span>)<br>            <span class="hljs-keyword">if</span>(target==matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> (target&gt;matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> isExit(matrix,mi+<span class="hljs-number">1</span>,mj,ei,ej,target) <span class="hljs-keyword">or</span> isExit(matrix,mi,mj+<span class="hljs-number">1</span>,ei,ej,target)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> isExit(matrix,si,sj,mi-<span class="hljs-number">1</span>,mj,target) <span class="hljs-keyword">or</span> isExit(matrix,si,sj,mi,mj-<span class="hljs-number">1</span>,target)<br>        <span class="hljs-keyword">return</span> isExit(matrix,si,sj,ei,ej,target)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çº¿æ€§æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿å¾—å¤æ‚åº¦ä»æš´åŠ›çš„O(n*m)åˆ°O(n+m)<br>æ€æƒ³æ˜¯é€‰å–å·¦ä¸‹è§’æˆ–è€…å³ä¸Šè§’ï¼Œå‘¨å›´ä¸å‡è¡¡çš„ç‚¹å¼€å§‹è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·æ‰çŸ¥é“åº”è¯¥å‘å“ªä¸ªæ–¹å‘ç¼©å°åŒºåŸŸ.</p><p><font color="hotpink">ä¾‹å¦‚æ­¤å¤„æ˜¯é€‰å–å·¦ä¸‹è§’ä½œä¸ºåˆå§‹ï¼Œå‘ä¸Šæ­¤åˆ—é€æ¸å˜å°ï¼Œå‘å³æ­¤è¡Œé€æ¸å˜å¤§ã€‚å› æ­¤targetå¦‚æœæ¯”æ­¤ç‚¹å°ï¼Œå°±å‘ä¸Šç§»åŠ¨æŸ¥æ‰¾ï¼Œå¦‚æœæ¯”æ­¤ç‚¹å¤§ï¼Œå°±å‘å³æŸ¥æ‰¾ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        i,j = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j&lt;=<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span>(target==matrix[i][j]):<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span>(target&gt;matrix[i][j]):j += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:i -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ•°ç»„æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer03 æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</title>
      <link href="/2021/08/11/leetcode/leetcode-offer03/"/>
      <url>/2021/08/11/leetcode/leetcode-offer03/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚</p><p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<br><span class="hljs-string">[2, 3, 1, 0, 2, 5, 3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span> æˆ– <span class="hljs-number">3</span> <br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>2 &lt;= n &lt;= 100000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åˆ›å»ºä¸€ä¸ªflagæ•°ç»„è¿›è¡Œæ ‡è®°ï¼›</p><p>æŒ‡å®šå¤§å°çš„æ•°ç»„åˆ›å»º</p><p><strong>å¡«å‘ï¼š</strong> <font color="red"> ä¸è¦ä½¿ç”¨åè€…,å› ä¸ºåè€…æ˜¯æµ…æ‹·è´ï¼Œæ”¹å˜æŸä¸€å…ƒç´ ï¼Œè¯¥åˆ—å‡ä¼šæ”¹å˜</font></p><ul><li><p>ä¸€ç»´</p><p>a = [0 for _ in range(n)]  ã€Š=ã€‹  a = [0] * n</p></li><li><p>äºŒç»´</p><p>a = [[0 for col in range(m)] for row in range(n)]  <em># åˆ›å»ºä¸€ä¸ªn*mçš„äºŒç»´çŸ©é˜µaï¼Œæ¯ä¸ªåˆå€¼éƒ½æ˜¯0</em>   ã€Š=ã€‹  a = [[0] *m] *n</p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        flag = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))] <span class="hljs-comment">#åˆ›å»ºé•¿åº¦ä¸ºnumsçš„æ•°ç»„ ä¹Ÿå¯ä»¥ç”¨[0]*n</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            flag[x] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span>(flag[x]&gt;<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">return</span> x<br></code></pre></td></tr></tbody></table></figure><p><font color="purple" size="4">å®é™…ä¸Šæ— éœ€æ„å»ºæ–°çš„æ•°ç»„è¿›è¡Œæ ‡è®°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨setçš„é•¿åº¦è¿›è¡Œåˆ¤æ–­ã€‚æˆ–è€…ä½¿ç”¨sortï¼Œä½¿ç”¨listçš„sortæ–¹æ³•ã€‚åˆ¤æ–­ç›¸é‚»çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚</font></p><p>æ–¹æ³•1ï¼šåˆ©ç”¨python setçš„æ— åºä¸é‡å¤ç‰¹æ€§ï¼šåˆ©ç”¨Pythonä¸­çš„seté›†åˆä¸ºæ— åºä¸é‡å¤é›†åˆï¼Œé€šè¿‡åˆ¤æ–­temp_setçš„é•¿åº¦ç¡®å®šæ˜¯å¦æ˜¯é‡å¤æ•°å­—ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        temp_set = <span class="hljs-built_in">set</span>()<br>        repeat = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            temp_set.add(nums[i])<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(temp_set) &lt; i + <span class="hljs-number">1</span>:<br>                repeat = nums[i]<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> repeat<br></code></pre></td></tr></tbody></table></figure><p>æ–¹æ³•2ï¼šåˆ©ç”¨pythonçš„sortå‡½æ•°æ’åºï¼Œç„¶åè®¡ç®—ç›¸é‚»ä¸¤ä¸ªæ•°æ®æ˜¯å¦ç›¸ç­‰å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        nums.sort()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> nums[i]==nums[i+<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> nums[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dvcç›¸å…³è®¾ç½®</title>
      <link href="/2021/08/10/dvc/dvc-config/"/>
      <url>/2021/08/10/dvc/dvc-config/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><p>è¿è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™ï¼š</p><blockquote><p>(base) root@9b1a4b217508:/workspace/fanmeilin/project/task/ai_lab# sh <a href="http://setup.sh">setup.sh</a> detection<br><a href="http://setup.sh">setup.sh</a>: 12: <a href="http://setup.sh">setup.sh</a>: dvc: not found<br>cp: failed to get attributes of â€˜assets/examplesâ€™: No such file or directory<br>[*] copy DETECTION skeleton scripts to upper directory</p></blockquote><p>åŸå› æ˜¯æœªå®‰è£…dvcï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…dvc</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip</span> install dvc==<span class="hljs-number">2</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pip</span> install 'dvc[s<span class="hljs-number">3</span>]'<br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨Winå¹³å°ä¸‹å¯èƒ½ä¼šæŠ¥é”™ï¼š</p><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR: </span>Cannot uninstall 'ruamel-yaml'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶éœ€è¦è¿›å…¥python çš„lib/site-packages ä¸­åˆ é™¤ â€˜ruamel-yamlâ€™ ç›¸å…³çš„æ–‡ä»¶</p></blockquote><p><strong>æ³¨æ„ï¼š</strong> dvc 2.3.0 ç‰ˆæœ¬ä¸ä¹‹åçš„hashè®¡ç®—æ–¹æ³•ä¸åŒï¼Œä¸èƒ½æ··ç”¨</p><p>å†æ¬¡æ‰§è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™</p><blockquote><p>ERROR: unexpected error - Cannot connect to host ceph01:80 ssl:default [Name or service not known]: [Errno -2] Name or service not known</p></blockquote><p>åˆ™ä¿®æ”¹etc/hostsæ–‡ä»¶</p><ul><li>é…ç½®hostsæ–‡ä»¶ï¼Œåœ¨hostsæ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹<br><code>192.168.10.91 ceph01</code></li></ul><h5 id="è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥-å¸ˆå…„åšå®¢-DVC-ä½¿ç”¨æ‰‹å†Œ"><em>è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥</em> <a href="https://www.zywvvd.com/2020/12/17/dvc/dvc/">å¸ˆå…„åšå®¢ DVC ä½¿ç”¨æ‰‹å†Œ</a></h5>]]></content>
      
      
      <categories>
          
          <category> dvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerçš„sshç›¸å…³é…ç½®</title>
      <link href="/2021/08/10/docker/docker-ssh/"/>
      <url>/2021/08/10/docker/docker-ssh/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„åšå®¢ï¼š<a href="https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/">https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/</a></p></blockquote><blockquote><p>sshæ˜¯è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ï¼Œå¹¿æ³›ç”¨äºè¿œç¨‹ç™»å½•çš„åœºæ™¯ï¼Œä¹Ÿæ˜¯è¿œç¨‹è°ƒè¯•ä»£ç çš„ç¥å…µåˆ©å™¨ã€‚åœ¨å¼€å‘ä¸­ç»å¸¸ä¼šåœ¨æœåŠ¡å™¨å¯åŠ¨è‡ªå·±çš„ docker å®¹å™¨è¿›è¡Œå¼€å‘ï¼Œåˆéœ€è¦è°ƒè¯•ä»£ç ï¼Œvimçš„è°ƒè¯•ç¯å¢ƒé…ç½®èµ·æ¥é—¨æ§›åˆå¤ªé«˜ã€‚äºæ˜¯å°±æœ‰äº†ä½¿ç”¨Windowsç›´æ¥sshæ‰“é€šdockerè¿›è¡Œè°ƒè¯•çš„éœ€æ±‚ã€‚æœ¬æ–‡è®°å½•Windowsè¿œç¨‹ç™»å½•LinuxæœåŠ¡å™¨dockerå®¹å™¨çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜</h2><ul><li>ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ Win 10</li><li>è¢«ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ docker container in Linux</li><li>ä¸»æœºä¸è¢«ç™»å½•ä¸»æœºï¼ˆæ­¤å¤„æŒ‡æœåŠ¡å™¨ï¼Œä¸æ˜¯dockerï¼‰ç½‘ç»œè”é€šï¼ŒIPåœ¨åŒä¸€ç½‘æ®µ</li><li>æœåŠ¡å™¨ä¸dockerçš„IPåœ¨åŒä¸€ç½‘æ®µ</li></ul><h2 id="é…ç½®æ–¹æ³•">é…ç½®æ–¹æ³•</h2><h3 id="å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„">å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„</h3><blockquote><p>sshåè®®é“¾æ¥æ—¶é»˜è®¤ä½¿ç”¨22ç«¯å£ï¼ŒWindowsä¸dockerçš„ç«¯å£å¾€å¾€ä¸èƒ½ç›´æ¥è¿›è¡Œæ˜ å°„ï¼ˆå¾ˆå¯èƒ½ä¸åœ¨ä¸€ä¸ªç½‘æ®µï¼‰ï¼Œå› æ­¤éœ€è¦å°†dockerçš„22ç«¯å£æ˜ å°„åˆ°LinuxæœåŠ¡å™¨çš„æŸä¸ªç«¯å£ï¼Œæ­¤æ—¶éœ€è¦åœ¨å»ºç«‹dockerå®¹å™¨æ—¶è¿›è¡Œ<a href="https://www.zywvvd.com/2020/05/14/coding/environment/wingide-remote-docker/wingide-remote-docker/#docker%E9%85%8D%E7%BD%AE">é…ç½®</a>ï¼š</p></blockquote><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ docker run -it --name vvd -p <span class="hljs-number">3721</span>:<span class="hljs-number">22</span> -v <span class="hljs-regexp">/root/</span>tmp:<span class="hljs-regexp">/root/</span>tmp my_docker bash<br></code></pre></td></tr></tbody></table></figure><ul><li>å…¶ä¸­ <code>-p</code> çš„éƒ¨åˆ†è¡¨ç¤ºå°†æœ¬æœºï¼ˆæœåŠ¡å™¨ï¼‰çš„3721ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„22ç«¯å£ã€‚</li></ul><h3 id="å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡">å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡</h3><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•çš„å®¹å™¨å†…éƒ¨å»ºç«‹å¹¶å¯åŠ¨sshæœåŠ¡ã€‚</p></blockquote><ul><li>é¦–å…ˆéœ€è¦å®‰è£…ï¼š</li></ul><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-builtin-name">get</span> update<br>apt-<span class="hljs-builtin-name">get</span> install openssh-server<br>apt-<span class="hljs-builtin-name">get</span> install openssh-client<br></code></pre></td></tr></tbody></table></figure><ul><li>å®‰è£…å®Œæˆåéœ€è¦å®¹å™¨æ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æœåŠ¡ï¼Œå¯ä»¥åœ¨ <code>~/.bashrc</code>ä¸­åŠ å…¥ï¼š</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿™æ ·å°±ä¿è¯äº†dockerå®¹å™¨è‡ªåŠ¨å¯åŠ¨è¯¥æœåŠ¡ã€‚</p></blockquote><ul><li>æŸ¥çœ‹sshè¿è¡ŒçŠ¶æ€</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh status<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¦‚æœæ˜¯ <code>* sshd is running</code> è¯´æ˜sshæ­£å¸¸è¿è¡Œ</p></blockquote><h3 id="ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®">ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®</h3><blockquote><p>æœ‰çš„å®¹å™¨é»˜è®¤ä¸æ”¯æŒrootç”¨æˆ·è¿œç¨‹ä½¿ç”¨sshåè®®è¿›è¡Œå¯†ç ç™»å½•çš„ï¼Œæ­¤æ—¶éœ€è¦æ›´æ”¹è®¾ç½®ã€‚</p></blockquote><ul><li>æ‰“å¼€ <code>/etc/ssh/sshd_config</code>æ–‡ä»¶ï¼š</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å°† <code>PermitRootLogin</code> è®¾ç½®ä¸º yes</li></ul><h3 id="ä¿®æ”¹rootå¯†ç ">ä¿®æ”¹rootå¯†ç </h3><blockquote><p>è¿œç¨‹ç™»å½•æ—¶éœ€è¦ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·å¯†ç ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨rootç”¨æˆ·ç™»å½•å¥½äº†ï¼Œéœ€è¦è®¾ç½®æ–°å»ºå®¹å™¨çš„å¯†ç ï¼š</p></blockquote><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></tbody></table></figure><h3 id="è®¾ç½®SSH">è®¾ç½®SSH</h3><ul><li><a href="https://www.zywvvd.com/2020/02/23/git/link_github/Git-connect-remote-pos/#%E5%88%9B%E5%BB%BASSH%E5%AF%86%E9%92%A5">æœ¬åœ°ç”Ÿæˆssh key</a></li><li>å°†.pub å†…å®¹å¤åˆ¶ç²˜è´´åŠ å…¥åˆ°è¿œç¨‹ ~/.ssh/authorized_keys</li></ul><h3 id="SSHè¿æ¥æœåŠ¡å™¨">SSHè¿æ¥æœåŠ¡å™¨</h3><blockquote><p>éœ€è¦ç”¨æˆ·åï¼ˆè¢«ç™»å½•ç«¯ç”¨æˆ·ï¼‰ä¸è¢«ç™»å½•çš„ä¸»æœºipå’Œç«¯å£å·</p><p>ä¾‹å¦‚ï¼š ç”¨æˆ·å- root ipï¼š192.168.10.12 ç«¯å£æ˜ å°„ä¸º 3721</p></blockquote><ul><li>linux</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> root@<span class="hljs-number">192.168.10.12:3721</span><br></code></pre></td></tr></tbody></table></figure><ul><li>Windows</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ssh</span> -p <span class="hljs-number">3721</span> root@<span class="hljs-number">192.168.10.12</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200256.png" alt=""></p><ul><li>å¦‚æœä¸æ¸…æ¥šLinuxç³»ç»Ÿç«¯å£æ˜ å°„é…ç½®æƒ…å†µï¼š</li></ul><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">iptables -<span class="hljs-built_in">t</span> nat -L -<span class="hljs-built_in">n</span><br></code></pre></td></tr></tbody></table></figure><h3 id="X-shellé…ç½®">X-shellé…ç½®</h3><blockquote><p>å‘½ä»¤è¡Œsshç™»å½•æˆåŠŸåå°±å¯ä»¥åœ¨X-shellä¸­å»ºç«‹é…ç½®ä¿¡æ¯æ–¹ä¾¿åœ°è¿æ¥äº†ã€‚</p></blockquote><ul><li>æ–°å»ºä¼šè¯ï¼Œå¡«å†™åç§°ã€IPã€ç«¯å£å·ï¼ˆæˆ‘ä»¬åˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200522.png" alt=""></p><ul><li>ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œå¡«å…¥ç”¨æˆ·åå¯†ç ï¼ˆåˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200640.png" alt=""></p><ul><li>éšåå°±å¯ä»¥ä½¿ç”¨è¯¥ä¼šè¯ç›´æ¥ç™»å½•dockerå®¹å™¨äº†ï¼Œä¸ºè¿œç¨‹è°ƒè¯•æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200804.png" alt=""></p><h3 id="å¡«å‘">å¡«å‘</h3><ul><li><p>ssh: Could not resolve hostname 192.168.10.12:3721: Name or service not known</p><blockquote><p>è¿™æ˜¯åœ¨Windowsä¸­ä½¿ç”¨äº†Linuxæ ¼å¼çš„SSHç™»å½•å‘½ä»¤å¯¼è‡´çš„è§£æé”™è¯¯</p><p>å°†å‘½ä»¤è¯­æ³•æ›´æ¢ä¸ºWindowsçš„æ ¼å¼å³å¯</p></blockquote></li><li><p>root ç”¨æˆ·æ— è®ºå¦‚ä½•å¯†ç ä¸è¢«æ¥å—</p><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•ä¸»æœº /etc/ssh/sshd_config ä¸­è®¾ç½®ï¼š</p><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡ç‚¹ï¼š<strong>PermitRootLogin yes</strong></li></ul></blockquote></li><li><p>Connection to 192.168.10.12 closed.</p></li><li><p>æˆ–</p></li><li><p>Connection closed by foreign host.</p><blockquote><p>æ„æ€æ˜¯ æ–­å¼€ä¸»æœºé“¾æ¥äº†ï¼Œå‡ºç°è¿™ç§é—®é¢˜ï¼Œè·Ÿä½ çš„IPTABLESï¼Œé˜²ç«å¢™ä»€ä¹ˆçš„éƒ½æ²¡å…³ç³»ã€‚</p><p>é€ æˆè¿™ä¸ªåŸ å› æ˜¯å› ä¸ºåŸæ¥è¿æ¥åˆ°SSHDæœåŠ¡å™¨è¿›ç¨‹çš„22ç«¯å£ï¼Œå½“ä½ çš„å®¢æˆ·ç«¯çªç„¶æ–­å¼€æ—¶ï¼ŒæœåŠ¡å™¨ç«¯çš„TCPè¿æ¥å°±å¤„äºä¸€ä¸ªåŠæ‰“å¼€çŠ¶æ€ã€‚å½“ä¸‹ä¸€æ¬¡åŒä¸€å®¢æˆ·æœºå†æ¬¡å»ºç«‹ TCPè¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ£€æµ‹åˆ°è¿™ä¸ªåŠæ‰“å¼€çš„TCPè¿æ¥ï¼Œå¹¶å‘å®¢æˆ·æœºå›ä¼ ä¸€ä¸ªç½®ä½RSTçš„TCPæŠ¥æ–‡ï¼Œå®¢æˆ·æœºå°±ä¼šæ˜¾ç¤ºconnection closed by foreign hostã€‚<br>è¿™æ˜¯TCPåè®®æœ¬èº«çš„ä¸€ä¸ªä¿æŠ¤æªæ–½ï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œä½ åªè¦å†é‡æ–°è¿æ¥æœåŠ¡å™¨å°±èƒ½è¿ä¸Šã€‚</p><p>â€”â€”â€” <a href="http://www.pooy.net/connection-closed-foreign-host.html">http://www.pooy.net/connection-closed-foreign-host.html</a></p><p>æ€»ç»“ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š <strong>å…³æœºé‡å¯</strong></p></blockquote></li></ul><h3 id="å…³äºsshçš„ç›¸å…³é…ç½®">å…³äºsshçš„ç›¸å…³é…ç½®</h3><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>ssh<br>vi ssh_config <span class="hljs-comment">#å¯è®¾ç½®sshçš„é»˜è®¤ç«¯å£ï¼ˆ22ï¼‰</span><br>vi sshd_config<br></code></pre></td></tr></tbody></table></figure><p>ssh_configå’Œsshd_configéƒ½æ˜¯sshæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼ŒäºŒè€…åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½å…è®¸ä½ é€šè¿‡è®¾ç½®ä¸åŒçš„é€‰é¡¹æ¥æ”¹å˜å®¢æˆ·ç«¯ç¨‹åºçš„è¿è¡Œæ–¹å¼ã€‚</p><h4 id="é‡å¯sshæœåŠ¡">é‡å¯sshæœåŠ¡</h4><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">service sshd restart</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæŠ¥é”™ sshd: unrecognized service åˆ™éœ€è¦å¼€å¯sshæœåŠ¡ã€‚</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><h2 id="vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨">vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨</h2><ul><li><p>æ­£ç¡®çš„sshæœåŠ¡</p></li><li><p>å¯†ç è®¾ç½®å®Œæˆï¼ˆpasswd rootï¼‰</p></li></ul><h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3><ul><li><p>å®‰è£… Remote Development æ’ä»¶</p><blockquote><p>ä¼šè‡ªåŠ¨å®‰è£… Remote-WSL / Containers / SSH ç­‰æ’ä»¶ã€‚</p></blockquote></li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028143530.png" alt=""></p><h3 id="é…ç½®ä¸»æœºä¿¡æ¯">é…ç½®ä¸»æœºä¿¡æ¯</h3><blockquote><p>ctrl + shift + p</p></blockquote><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028174129.png" alt=""></p><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175152.png" alt=""></p><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host Enter<br>  HostName <span class="hljs-number">192.168</span>.<span class="hljs-number">10.15</span><br>  Port <span class="hljs-number">12345</span><br>  <span class="hljs-keyword">User</span> <span class="hljs-title">root</span><br>  IdentityFile ~\.ssh\id_rsa<br>  IdentitiesOnly yes<br></code></pre></td></tr></tbody></table></figure><h3 id="vs-code-è¿æ¥è¿œç¨‹ä¸»æœº">vs code è¿æ¥è¿œç¨‹ä¸»æœº</h3><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175324.png" alt=""></p><blockquote><p>ä¹‹åé€‰æ‹©ç›®æ ‡ä¸»æœºçš„æ“ä½œç³»ç»Ÿã€‚</p></blockquote><ul><li><p>æˆåŠŸè¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼š</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¤¹è¿è¡Œç¨‹åºæ—¶ï¼Œé€‰æ‹©ä½¿ç”¨çš„Pythonç¯å¢ƒï¼š</p></li></ul><h4 id="ç›¸å¯¹è·¯å¾„çš„è®¾ç½®">ç›¸å¯¹è·¯å¾„çš„è®¾ç½®</h4><p>åœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„å‡ºç°é”™è¯¯ã€‚</p><blockquote><p>python æ’ä»¶è®¾ç½®ä¸­æ²¡æœ‰è®¾ç½®<code>ç»ˆç«¯æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨æ–‡ä»¶çš„è·¯å¾„ä»£æ›¿ç°åœ¨æ‰“å¼€çš„ç›®å½•</code>ã€‚</p></blockquote><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><ul><li>æœç´¢é…ç½® <code>execute in file</code>ï¼š</li></ul><p><img src="https://photos.zywvvd.com/win11-mt/20210717114300.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> è¿œç¨‹é…ç½® </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerç›¸å…³å‘½ä»¤</title>
      <link href="/2021/08/10/docker/docker-intro/"/>
      <url>/2021/08/10/docker/docker-intro/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç®€è¦ä»‹ç»Dockerï¼Œè®°å½•Dockerå¸¸ç”¨å‘½ä»¤ä½¿ç”¨æ–¹æ³•ã€‚</p><p>æ¬è¿è‡ªå¸ˆå…„çš„åšå®¢ åˆè§è‹å²š ï¼š<a href="https://www.zywvvd.com/2020/05/06/docker/docker_usage/">https://www.zywvvd.com/2020/05/06/docker/docker_usage/</a></p></blockquote><h3 id="Docker-ç®€ä»‹">Docker ç®€ä»‹</h3><blockquote><p>**Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚**Docker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p></blockquote><h3 id="Docker-ä½¿ç”¨æµç¨‹">Docker ä½¿ç”¨æµç¨‹</h3><ul><li><a href="https://docs.docker.com/desktop/">å®‰è£…docker</a></li><li>åˆ›å»ºImage</li><li>ä»Imageåˆ›å»ºContainer</li><li>åœ¨Containerä¸­å·¥ä½œ</li><li>å°†åœ¨Containerä¸­åšçš„ä¿®æ”¹æäº¤ç»™Image</li><li>é”€æ¯Container</li></ul><h3 id="å‘½ä»¤ä»‹ç»">å‘½ä»¤ä»‹ç»</h3><ul><li>æ‹‰å– image</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> image pull<span class="hljs-meta"> [docker-url]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>è·å–docker images åˆ—è¡¨</li></ul><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">docker images<br>æˆ–<br>docker <span class="hljs-keyword">image</span> <span class="hljs-keyword">ls</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å»ºç«‹container ï¼ˆnvidia docker)</li></ul><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">NV_GPU=<span class="hljs-selector-attr">[gpu_num]</span> nvidia-docker run -it --name <span class="hljs-selector-attr">[container_name]</span> --shm-size=<span class="hljs-selector-attr">[shm_size]</span> --rm -v <span class="hljs-selector-attr">[current_dir]</span>:<span class="hljs-selector-attr">[container_dir]</span> -<span class="hljs-selector-tag">p</span> <span class="hljs-selector-attr">[current_port]</span>:<span class="hljs-selector-attr">[container_port]</span> <span class="hljs-selector-attr">[image_name]</span>:<span class="hljs-selector-attr">[image_tag]</span>  <span class="hljs-selector-attr">[command]</span> <br></code></pre></td></tr></tbody></table></figure><p>å®ä¾‹ï¼š</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nvidia</span>-docker run -it --name mlfan --shm-size=<span class="hljs-number">10</span>g -v /disk/fanmeilin:/workspace/fanmeilin -p <span class="hljs-number">12345</span>:<span class="hljs-number">22</span> -p <span class="hljs-number">12346</span>:<span class="hljs-number">8080</span> -p <span class="hljs-number">12347</span>:<span class="hljs-number">5678</span> tf-<span class="hljs-number">1</span>.<span class="hljs-number">14</span>-<span class="hljs-number">2</span>.<span class="hljs-number">0</span>-<span class="hljs-number">2</span>.<span class="hljs-number">1</span>:<span class="hljs-number">1</span>.<span class="hljs-number">0</span> bash<br></code></pre></td></tr></tbody></table></figure><p><font color="SlateBlue" size="4">æ³¨æ„ä¸è¦åŠ  --rm&nbsp; å¦åˆ™è½½åœ¨container stopä¹‹åä¼šè‡ªåŠ¨åˆ é™¤æ­¤å®¹å™¨</font></p><blockquote><p>NV_GPU: containerä¸­å¯è§çš„GPUï¼Œå¦‚æœä¸è®¾ç½®å¯è§æ‰€æœ‰GPU</p><p>-it: å°†å®¹å™¨çš„ Shell æ˜ å°„åˆ°å½“å‰çš„ Shellï¼Œç„¶åä½ åœ¨æœ¬æœºçª—å£è¾“å…¥çš„å‘½ä»¤ï¼Œå°±ä¼šä¼ å…¥å®¹å™¨</p><p>â€“name: å®¹å™¨åç§°ï¼Œå¦‚æœä¸è®¾ç½®ä¼šéšæœºåˆ†é…ä¸€ä¸ªåå­—</p><p>â€“shm-size: å®¹å™¨å…±äº«å†…å­˜å¤§å°è®¾ç½®ã€‚å¦‚æœä¸è®¾ç½®é»˜è®¤å¤§å°64Mï¼Œå¯¹äºéœ€è¦ä½¿ç”¨å…±äº«å†…å­˜çš„æƒ…å†µå¾€å¾€æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå¦‚æœè®¾ç½®ä¸º10gï¼Œè¿™æ ·é…ç½®ï¼š <code>--ssh-size="10g"</code></p><p>â€“rm: å®¹å™¨å…³é—­åè‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æœä¸è®¾ç½®å®¹å™¨ä¸ä¼šè‡ªåŠ¨åˆ é™¤</p><p>-v: é©±åŠ¨å™¨æ˜ å°„ï¼Œå°†æœ¬æœºçš„ç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„æŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼›éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ä¸»æœºæ–‡ä»¶å¤¹ä¸­çš„æŒ‚è½½ç›®å½•åœ¨å®¹å™¨ä¸­æ˜¯å¯è§çš„ï¼›éœ€è¦å†è¯´æ˜çš„æ˜¯å®¹å™¨å¯åŠ¨æ—¶ä¸»æœºæŒ‚è½½çš„ç›®å½•å®¹å™¨æ˜¯è§ä¸åˆ°çš„ï¼›æœ€åè¯´æ˜ï¼Œå®¹å™¨å…³é—­å†æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°ä¸»æœºæŒ‚è½½çš„æ‰€æœ‰æ–‡ä»¶å¤¹äº†ã€‚</p><p>-p: æš´æ¼å®¹å™¨çš„ç«¯å£åˆ°æœ¬æœºçš„ç«¯å£ä¸Šï¼Œä¾‹å¦‚ç”¨äºsshè¿æ¥å®¹å™¨æ—¶éœ€è¦å°†å®¹å™¨çš„22ç«¯å£æš´éœ²åˆ°ä¸»æœºçš„ç«¯å£ä¸Š(æ¯”å¦‚3721)ï¼Œåˆ™å¯ä»¥è®¾ç½® <code>-p 3721:22</code></p><p>image_name, image_tag: è¿™æ˜¯dockeré•œåƒçš„åç§°ä¸æ ‡è®°ï¼Œå¦‚æœä½¿ç”¨æœ¬æœºé•œåƒå¯ä»¥åœ¨docker imagesåˆ—è¡¨ä¸­æŸ¥è¯¢åˆ°</p><p>command: å¯åŠ¨å®¹å™¨åå†…éƒ¨æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ä¸º <code>/bin/bash</code></p></blockquote><ul><li>æŸ¥è¯¢containeråˆ—è¡¨</li></ul><figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker container <span class="hljs-keyword">ls</span> <span class="hljs-params">--all</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>â€“all: åŠ ä¸Šè¯¥å‚æ•°ä¼šæ˜¾ç¤ºæ²¡æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä¸åŠ çš„è¯ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨</p></blockquote><ul><li>åœæ­¢æŒ‡å®šçš„å®¹å™¨è¿è¡Œ</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> kill <span class="hljs-comment">[containerID]</span><br>docker stop <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p><code>docker container kill</code>å‘½ä»¤ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGKILL ä¿¡å·ã€‚<code>docker container stop</code>å‘½ä»¤ç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGTERM ä¿¡å·ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†å‘å‡º SIGKILL ä¿¡å·ã€‚</p></blockquote><ul><li>å¯åŠ¨åœæ­¢çš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> start<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡å¯è¿è¡Œçš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> restart<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>åˆ é™¤æŒ‡å®šçš„å®¹å™¨æ–‡ä»¶ï¼ˆä»…åœ¨åœæ­¢è¿è¡Œæ—¶å¯ç”¨ï¼‰</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> rm <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>æŸ¥çœ‹å®¹å™¨è¾“å‡º</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> logs <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å¯åŠ¨å®¹å™¨çš„ä¸€ä¸ªç»ˆç«¯</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it [containerID] <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ­¤ç§æ–¹æ³•å¯åŠ¨çš„ç»ˆç«¯ï¼Œå³ä½¿é€€å‡ºä¹Ÿä¸ä¼šå…³é—­å®¹å™¨</p><p>ç›¸å - å¦‚æœç›´æ¥é€šè¿‡ç«¯å£æ˜ å°„è¿æ¥ docker å»ºç«‹çš„sshé“¾æ¥ï¼Œçª—å£é€€å‡ºåè¯¥ç»ˆç«¯çš„å·¥ä½œä¹Ÿä¼šä¸€åŒåœæ­¢</p></blockquote><ul><li>è¿›å…¥å®¹å™¨çš„ä¸»ç»ˆç«¯</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> attach<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿æ¥åˆ°å®¹å™¨çš„ä¸»ç»ˆç«¯ï¼Œè¯¥ç»ˆç«¯é€€å‡ºåå®¹å™¨å…³é—­ã€‚</p><p>å¦‚æœä¸å¸Œæœ›é€€å‡ºåå…³é—­ï¼Œå¯ä»¥åŠ å…¥é€‰é¡¹ <code>--sig-proxy=false</code></p></blockquote><ul><li>é€€å‡ºç»ˆç«¯</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ctrl <span class="hljs-selector-tag">p</span> + ctrl <span class="hljs-selector-tag">q</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¯ä»¥åœ¨é€€å‡ºç»ˆç«¯çš„åŒæ—¶ä¿æŒç»ˆç«¯ç»§ç»­å·¥ä½œ</p></blockquote><ul><li>é€€å‡ºå®¹å™¨</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨å®¹å™¨ä¸­è¿è¡Œæ­¤å‘½ä»¤</p></blockquote><ul><li>æ‹·è´å®¹å™¨é‡Œçš„æ–‡ä»¶åˆ°æœ¬æœº</li></ul><figure class="highlight gradle"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker container cp [containerID]:[<span class="hljs-regexp">/path/</span>to/<span class="hljs-keyword">file</span>]<br></code></pre></td></tr></tbody></table></figure><ul><li>æäº¤å®¹å™¨ä¿®æ”¹åˆ°é•œåƒ</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker commit -<span class="hljs-selector-tag">a</span> <span class="hljs-selector-attr">[name]</span> -m <span class="hljs-selector-attr">[comments]</span> -<span class="hljs-selector-tag">p</span>  <span class="hljs-selector-attr">[containerID[:TAG]</span>]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>-a: æäº¤çš„é•œåƒä½œè€…</p><p>-m: æäº¤æ—¶çš„è¯´æ˜æ–‡å­—</p><p>-p: åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœ</p></blockquote><ul><li>åˆ é™¤é•œåƒ</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> rmi<span class="hljs-meta"> [image]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æˆ–</p></blockquote><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">docker image rm [image]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</p></blockquote><ul><li><code>-f, -force</code>: å¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä¾¿æœ‰å®¹å™¨å¼•ç”¨è¯¥é•œåƒï¼›</li><li><code>-no-prune</code>: ä¸è¦åˆ é™¤æœªå¸¦æ ‡ç­¾çš„çˆ¶é•œåƒï¼›</li></ul><h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></li><li><a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> è¿œç¨‹é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer10-2 é’è›™è·³å°é˜¶é—®é¢˜</title>
      <link href="/2021/08/10/leetcode/leetcode-offer10-2/"/>
      <url>/2021/08/10/leetcode/leetcode-offer10-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é’è›™è·³å°é˜¶é—®é¢˜</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ª n çº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">7</span><br>è¾“å‡ºï¼š<span class="hljs-number">21</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹3ï¼š">ç¤ºä¾‹3ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å®é™…ä¸Šæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å˜ç§ã€‚è·³ä¸Šnçº§å°é˜¶çš„æ–¹æ³•ä¸ªæ•° å¯ä»¥åˆ†è§£ä¸ºï¼š<em>è·³ä¸Šæ­¤å°é˜¶å‰çš„ä¸€æ­¥æ˜¯1æ­¥è¿˜æ˜¯2æ­¥</em>ã€‚ä¹Ÿå°±æ˜¯ $f(n) = f(n-1) + f(n-2)$ã€‚</p><p>ä¸åŒä¹‹å¤„åœ¨äºæ­¤æ—¶çš„f(0) = 1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numWays</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">1</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b<br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ–æ³¢é‚£å¥‘ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer10-1 æ–æ³¢é‚£å¥‘æ•°åˆ—</title>
      <link href="/2021/08/10/leetcode/leetcode-offer10-1/"/>
      <url>/2021/08/10/leetcode/leetcode-offer10-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ–æ³¢é‚£å¥‘æ•°åˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ n ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ n é¡¹ï¼ˆå³ F(N)ï¼‰ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>F(0) = 0,   F(1) = 1 \\<br>F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N &gt; 1.<br>$$<br>æ–æ³¢é‚£å¥‘æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œä¹‹åçš„æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ç”±ä¹‹å‰çš„ä¸¤æ•°ç›¸åŠ è€Œå¾—å‡ºã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ‰ä¸‰ç§æ–¹å‘ï¼š</p><ul><li><p>ä½¿ç”¨é€’å½’</p><p>å¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´è¶…æ—¶ã€‚</p></li><li><p>ä½¿ç”¨æ•°ç»„å­˜å‚¨</p><p>æ–°å»ºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œåœ¨é€’å½’åŸºç¡€ä¸Šï¼Œå­˜å‚¨è®¡ç®—çš„ç»“æœï¼Œåç›´æ¥å–ç”¨ã€‚ä½†æ˜¯å ç”¨äº†é¢å¤–çš„ç©ºé—´$O(n)$</p></li><li><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’</p><p><code>ä»¥å…¶å…¬å¼F(N) = F(N - 1) + F(N - 2)ä¸ºè½¬ç§»æ–¹ç¨‹ã€‚</code></p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">0</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b <span class="hljs-comment">#sum = a+b a = b b = sum aç›¸å½“äºf(i) bç›¸å½“äºf(i+1)</span><br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br>    <span class="hljs-comment"># def fib(self, n: int) -&gt; int:</span><br>    <span class="hljs-comment">#     if(n==0): return 0</span><br>    <span class="hljs-comment">#     if(n==1): return 1</span><br>    <span class="hljs-comment">#     return (self.fib(n-1)+self.fib(n-2))%1000000007 #è¶…æ—¶ é€’å½’æ—¶é—´å¤æ‚åº¦å¤§</span><br></code></pre></td></tr></tbody></table></figure><p>å¾ªç¯næ¬¡</p><p>æ³¨æ„<code>a,b = b,a+b</code> ç›¸å½“äºsum = a+b ï¼›a = bï¼› b = sum ï¼›</p><p>ç¬¬iè½®ä¸­ aç›¸å½“äºf(i)ï¼Œbç›¸å½“äºf(i+1) ã€‚å› æ­¤æœ€åè¿”å›a</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ–æ³¢é‚£å¥‘ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer09 ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
      <link href="/2021/08/10/leetcode/leetcode-offer09/"/>
      <url>/2021/08/10/leetcode/leetcode-offer09/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[<span class="hljs-number">3</span>],[],[]]<br>è¾“å‡ºï¼š[null,null,<span class="hljs-number">3</span>,<span class="hljs-number">-1</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[],[<span class="hljs-number">5</span>],[<span class="hljs-number">2</span>],[],[]]<br>è¾“å‡ºï¼š[null,<span class="hljs-number">-1</span>,null,null,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= values &lt;= 10000</li><li>æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œ<em>ä¸€ä¸ªä½œä¸ºæ’å…¥æ ˆï¼Œä¸€ä¸ªä½œä¸ºåˆ é™¤æ ˆ</em>ã€‚<code>ä½¿ç”¨listè¿›è¡Œç›¸å…³æ“ä½œï¼ˆappendï¼Œpopï¼‰</code>ï¼›åœ¨æ’å…¥æ—¶ç›´æ¥å¯¹stack1è¿›è¡Œappendæ“ä½œï¼Œåˆ é™¤æ—¶é¦–å…ˆéœ€è¦æ„å»ºåˆ é™¤æ ˆå†…å®¹ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œæœ€ååŒæ­¥åˆ°æ’å…¥æ ˆä¸­ï¼ˆæ­¤æ—¶åˆ é™¤æ ˆåˆä¸ºç©ºï¼‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CQueue</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># stack1æ˜¯insertæ ˆ stack2æ˜¯deleteæ ˆ</span><br>        self.stack1 = [] <span class="hljs-comment">#listä½œç”¨å’Œstackç±»ä¼¼</span><br>        self.stack2 = []<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">appendTail</span>(<span class="hljs-params">self, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        self.stack1.append(value) <span class="hljs-comment"># ç›´æ¥æ’å…¥æ ˆé¡¶</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteHead</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">while</span> self.stack1: <span class="hljs-comment">#é¦–å…ˆæ›´æ–°deleteæ ˆ</span><br>            self.stack2.append(self.stack1.pop())<br>        <span class="hljs-comment">#è¿›è¡ŒdeleteHeadæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.stack2: <br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        popitem = self.stack2.pop()<br>        <span class="hljs-comment"># å°†æ›´æ–°ç»“æœå†™å›stack1ä¸­ ä¿æŒä¸€è‡´</span><br>        <span class="hljs-keyword">while</span> self.stack2:<br>            self.stack1.append(self.stack2.pop())<br>        <span class="hljs-keyword">return</span> popitem<br><br><span class="hljs-comment"># Your CQueue object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = CQueue()</span><br><span class="hljs-comment"># obj.appendTail(value)</span><br><span class="hljs-comment"># param_2 = obj.deleteHead()</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mahalanobis_distance</title>
      <link href="/2021/08/09/math/Mahalanobis-distance/"/>
      <url>/2021/08/09/math/Mahalanobis-distance/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯åº¦é‡å­¦ä¹ ä¸­ä¸€ç§å¸¸ç”¨çš„è·ç¦»æŒ‡æ ‡ï¼ŒåŒæ¬§æ°è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»ã€æ±‰æ˜è·ç¦»ç­‰ä¸€æ ·è¢«ç”¨ä½œè¯„å®šæ•°æ®ä¹‹é—´çš„ç›¸ä¼¼åº¦æŒ‡æ ‡ã€‚ä½†å´å¯ä»¥åº”å¯¹é«˜ç»´çº¿æ€§åˆ†å¸ƒçš„æ•°æ®ä¸­å„ç»´åº¦é—´éç‹¬ç«‹åŒåˆ†å¸ƒçš„é—®é¢˜ã€‚</p></blockquote><p><em>ä½¿ç”¨é©¬æ°è·ç¦»ï¼Œå¯¹é«˜ç»´éç‹¬ç«‹åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œè·ç¦»åº¦é‡ã€‚</em></p><p><strong>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨é©¬æ°è·ç¦»å‘¢ï¼Ÿ</strong><br>é©¬æ°è·ç¦»æœ‰å¾ˆå¤š<strong>ä¼˜ç‚¹ï¼š</strong> <strong>é©¬æ°è·ç¦»ä¸å—é‡çº²çš„å½±å“</strong>ï¼Œä¸¤ç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ä¸åŸå§‹æ•°æ®çš„æµ‹é‡å•ä½æ— å…³ï¼›ç”±æ ‡å‡†åŒ–æ•°æ®å’Œä¸­å¿ƒåŒ–æ•°æ®(å³åŸå§‹æ•°æ®ä¸å‡å€¼ä¹‹å·®ï¼‰è®¡ç®—å‡ºçš„äºŒç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ç›¸åŒã€‚<strong>é©¬æ°è·ç¦»è¿˜å¯ä»¥æ’é™¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¹²æ‰°</strong>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»">ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»</h2><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯ä¸€ç§è·ç¦»çš„åº¦é‡ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æ¬§æ°è·ç¦»çš„ä¸€ç§ä¿®æ­£ï¼Œä¿®æ­£äº†æ¬§å¼è·ç¦»ä¸­å„ä¸ªç»´åº¦å°ºåº¦ä¸ä¸€è‡´ä¸”ç›¸å…³çš„é—®é¢˜ã€‚</p><p>å•ä¸ªæ•°æ®ç‚¹çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic1.png" alt=""></p><p>æ•°æ®ç‚¹x, yä¹‹é—´çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic2.png" alt=""></p><p><em>å…¶ä¸­Î£æ˜¯å¤šç»´éšæœºå˜é‡çš„åæ–¹å·®çŸ©é˜µï¼ŒÎ¼ä¸ºæ ·æœ¬å‡å€¼ï¼Œå¦‚æœåæ–¹å·®çŸ©é˜µæ˜¯å•ä½å‘é‡ï¼Œä¹Ÿå°±æ˜¯å„ç»´åº¦ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œé©¬æ°è·ç¦»å°±å˜æˆäº†æ¬§æ°è·ç¦»ã€‚</em></p><h2 id="é©¬æ°è·ç¦»å®é™…æ„ä¹‰">é©¬æ°è·ç¦»å®é™…æ„ä¹‰</h2><p>é‚£ä¹ˆé©¬æ°è·ç¦»å°±èƒ½èƒ½å¹²ä»€ä¹ˆï¼Ÿå®ƒæ¯”æ¬§æ°è·ç¦»å¥½åœ¨å“ªé‡Œï¼Ÿä¸¾å‡ ä¸ªæ —å­</p><p><strong>æ¬§å¼è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å…ˆä¸¾ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ä¾‹å­ï¼Œèº«é«˜å’Œä½“é‡ï¼Œè¿™ä¸¤ä¸ªå˜é‡æ‹¥æœ‰ä¸åŒçš„å•ä½æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸åŒçš„scaleã€‚æ¯”å¦‚èº«é«˜ç”¨æ¯«ç±³è®¡ç®—ï¼Œè€Œä½“é‡ç”¨åƒå…‹è®¡ç®—ï¼Œæ˜¾ç„¶å·®10mmçš„èº«é«˜ä¸å·®10kgçš„ä½“é‡æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä½†åœ¨æ™®é€šçš„æ¬§æ°è·ç¦»ä¸­ï¼Œè¿™å°†ä¼šç®—ä½œç›¸åŒçš„å·®è·ã€‚</p><p><strong>å½’ä¸€åŒ–åæ¬§æ°è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥å…ˆåšå½’ä¸€åŒ–æ¥æ¶ˆé™¤è¿™ç§ç»´åº¦é—´scaleä¸åŒçš„é—®é¢˜ï¼Œä½†æ˜¯æ ·æœ¬åˆ†å¸ƒä¹Ÿä¼šå½±å“åˆ†ç±»</p><p>ä¸¾ä¸ªä¸€ç»´çš„æ —å­ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªç±»åˆ«ï¼Œç»Ÿä¸€å•ä½ï¼Œç¬¬ä¸€ä¸ªç±»åˆ«å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º0.1ï¼Œç¬¬äºŒä¸ªç±»åˆ«å‡å€¼ä¸º5ï¼Œæ–¹å·®ä¸º5ã€‚é‚£ä¹ˆä¸€ä¸ªå€¼ä¸º2çš„ç‚¹å±äºç¬¬ä¸€ç±»çš„æ¦‚ç‡å¤§è¿˜æ˜¯ç¬¬äºŒç±»çš„æ¦‚ç‡å¤§ï¼Ÿè·ç¦»ä¸Šè¯´åº”è¯¥æ˜¯ç¬¬ä¸€ç±»ï¼Œä½†æ˜¯ç›´è§‰ä¸Šæ˜¾ç„¶æ˜¯ç¬¬äºŒç±»ï¼Œå› ä¸ºç¬¬ä¸€ç±»ä¸å¤ªå¯èƒ½åˆ°è¾¾2è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªæ–¹å·®è¾ƒå°çš„ç»´åº¦ä¸‹å¾ˆå°çš„å·®åˆ«å°±æœ‰å¯èƒ½æˆä¸ºç¦»ç¾¤ç‚¹ã€‚å°±åƒä¸‹å›¾ä¸€æ ·ï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯ç”±äºæ ·æœ¬æ€»ä½“æ²¿ç€æ¨ªè½´åˆ†å¸ƒï¼Œæ‰€ä»¥Bç‚¹æ›´æœ‰å¯èƒ½æ˜¯è¿™ä¸ªæ ·æœ¬ä¸­çš„ç‚¹ï¼Œè€ŒAåˆ™æ›´æœ‰å¯èƒ½æ˜¯ç¦»ç¾¤ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic3.png" alt=""></p><p><strong>ç®—ä¸Šç»´åº¦çš„æ–¹å·®å°±å¤Ÿäº†ï¼Ÿ</strong></p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœç»´åº¦é—´ä¸ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œæ ·æœ¬ç‚¹ä¸€å®šä¸æ¬§æ°è·ç¦»è¿‘çš„æ ·æœ¬ç‚¹åŒç±»çš„æ¦‚ç‡æ›´å¤§å—ï¼Ÿ</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic4.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æ ·æœ¬åŸºæœ¬æœä»f(x) = xçš„çº¿æ€§åˆ†å¸ƒï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»ä¾æ—§ç›¸ç­‰ï¼Œæ˜¾ç„¶Aæ›´åƒæ˜¯ä¸€ä¸ªç¦»ç¾¤ç‚¹</p><p>å³ä½¿æ•°æ®å·²ç»ç»è¿‡äº†æ ‡å‡†åŒ–ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ABä¸åŸç‚¹é—´è·ç¦»å¤§å°çš„ç›¸äº’å…³ç³»ã€‚æ‰€ä»¥è¦æœ¬è´¨ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦é’ˆå¯¹<a href="https://link.zhihu.com/?target=https%3A//www.ph0en1x.space/2018/03/06/PCA/">ä¸»æˆåˆ†åˆ†æ</a>ä¸­çš„<code>ä¸»æˆåˆ†</code>æ¥è¿›è¡Œæ ‡å‡†åŒ–ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰">é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰</h2><p>ä¸Šé¢ææ‡‚äº†ï¼Œé©¬æ°è·ç¦»å°±å¥½ç†è§£äº†ï¼Œ<u>åªéœ€è¦å°†å˜é‡<code>æŒ‰ç…§ä¸»æˆåˆ†è¿›è¡Œæ—‹è½¬</code>ï¼Œè®©ç»´åº¦é—´ç›¸äº’<strong>ç‹¬ç«‹</strong>ï¼Œç„¶åè¿›è¡Œ<code>æ ‡å‡†åŒ–</code></u>ï¼Œè®©ç»´åº¦<strong>åŒåˆ†å¸ƒ</strong>å°±å¯ä»¥äº†ã€‚</p><p>ç”±ä¸»æˆåˆ†åˆ†æå¯çŸ¥ï¼Œç”±äºä¸»æˆåˆ†å°±æ˜¯ç‰¹å¾å‘é‡æ–¹å‘ï¼Œæ¯ä¸ªæ–¹å‘çš„æ–¹å·®å°±æ˜¯å¯¹åº”çš„ç‰¹å¾å€¼ï¼Œæ‰€ä»¥åªéœ€è¦æŒ‰ç…§ç‰¹å¾å‘é‡çš„æ–¹å‘æ—‹è½¬ï¼Œç„¶åç¼©æ”¾ç‰¹å¾å€¼å€å°±å¯ä»¥äº†ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic5.png" alt=""></p><p>ç¦»ç¾¤ç‚¹å°±è¢«æˆåŠŸåˆ†ç¦»ï¼Œè¿™æ—¶å€™çš„æ¬§å¼è·ç¦»å°±æ˜¯é©¬æ°è·ç¦»ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„æ¨å¯¼">é©¬æ°è·ç¦»çš„æ¨å¯¼</h2><p>é¦–å…ˆè¦å¯¹æ•°æ®ç‚¹è¿›è¡Œ<em>æ—‹è½¬</em>ï¼Œæ—‹è½¬è‡³ä¸»æˆåˆ†ï¼Œç»´åº¦é—´çº¿æ€§æ— å…³ï¼Œå‡è®¾æ–°çš„åæ ‡ä¸º</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic6.png" alt=""></p><p>åˆå˜æ¢å<em>ç»´åº¦é—´çº¿æ€§æ— å…³ä¸”æ¯ä¸ªç»´åº¦è‡ªå·±çš„æ–¹å·®ä¸ºç‰¹å¾å€¼</em>ï¼Œæ‰€ä»¥æ»¡è¶³ï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic7.png" alt=""></p><p>é©¬æ°è·ç¦»æ˜¯æ—‹è½¬å˜æ¢ç¼©æ”¾ä¹‹åçš„æ¬§å¼è·ç¦»ï¼Œæ‰€ä»¥é©¬æ°è·ç¦»çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic8.png" alt=""></p><p>è¿™å°±æ˜¯ä¹‹å‰æåˆ°çš„é©¬æ°è·ç¦»çš„å…¬å¼</p><h2 id="é©¬æ°è·ç¦»çš„é—®é¢˜">é©¬æ°è·ç¦»çš„é—®é¢˜</h2><ul><li>åæ–¹å·®çŸ©é˜µå¿…é¡»æ»¡ç§©</li></ul><p>é‡Œé¢æœ‰æ±‚é€†çŸ©é˜µçš„è¿‡ç¨‹ï¼Œä¸æ»¡ç§©ä¸è¡Œï¼Œè¦æ±‚æ•°æ®è¦æœ‰åŸç»´åº¦ä¸ªç‰¹å¾å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥è€ƒè™‘å…ˆè¿›è¡ŒPCAï¼Œè¿™ç§æƒ…å†µä¸‹PCAä¸ä¼šæŸå¤±ä¿¡æ¯</p><ul><li>ä¸èƒ½å¤„ç†éçº¿æ€§æµå½¢(manifold)ä¸Šçš„é—®é¢˜</li></ul><p>åªå¯¹çº¿æ€§ç©ºé—´æœ‰æ•ˆï¼Œå¦‚æœè¦å¤„ç†æµå½¢ï¼Œåªèƒ½åœ¨å±€éƒ¨å®šä¹‰ï¼Œå¯ä»¥ç”¨æ¥å»ºç«‹KNNå›¾</p><blockquote><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/46626607">https://zhuanlan.zhihu.com/p/46626607</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> æ¦‚ç‡è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é©¬æ°è·ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eckark_youngå®šç†</title>
      <link href="/2021/08/09/math/Eckark-young/"/>
      <url>/2021/08/09/math/Eckark-young/</url>
      
        <content type="html"><![CDATA[<p>æœ€ä½³ä½ç§©é€¼è¿‘å’Œå¥‡å¼‚å€¼çš„å…³ç³»(<em>Eckart</em>-<em>Youngå®šç†</em>)</p><h3 id="å®šç†">å®šç†</h3><p>Suppose a matrix $A\in \mathbb{R}^{m\times n}$has an SVD-decomposition$A=U\Sigma V^T$. Let $k &lt; r= \mathsf{rank}(A)$and truncated matrix<br>$$<br>A_k = \sum_{i=1}^k \sigma_i \mathbf u_i \mathbf v_i^T,<br>$$<br>then, for any matrix B of rank k , the minimal error is achieved with $A_k$:</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_2 = || A - A_k||_2 = \sigma_{k+1}.$$<p>The same holds for Frobenius norm as well</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_F = || A - A_k||_F = \sqrt{\sigma_{k+1}^2 + \cdots + \sigma_p^2}.$$<h3 id="è¯æ˜-2-norm-case">è¯æ˜ (2-norm case)</h3><p>Since $U^\ A_k V = \mathrm{diag}(\sigma_1,\ldots, \sigma_k,0,\ldots,0)$ it means that $A_k$ is rank K. Moreover, $U^T (A-A_k) V =  \mathrm{diag}(0,\ldots, 0,\sigma_{k+1},\ldots, \sigma_p)$with the largest singular value is $\sigma_{k+1}$ and thus $||A-A_k||_2 = \sigma_{k+1}$.</p><h3 id="è¯æ˜-Frobenius-norm-case">è¯æ˜ (Frobenius norm case)</h3><blockquote><p>Lemma: If $A,B \in \mathbb{R}^{m\times n}$ , with B having rank K , then $\sigma_{k+i}(A) \le \sigma_i(A-B) \text{ for all }; i.$</p></blockquote><p>To prove the lemma, first consider the case i=1, we have proved that $\sigma_{k+1}(A) \le \sigma_1(A-B) = ||A-B||_2$in the 2-norm case. Then we do the general case:</p>$$\begin{aligned} \sigma_i(A-B) = &amp; \sigma_i(A-B) + \sigma_1(B-B_k)\qquad\text{since } B=B_k\\ =&amp; \sigma_1(A-B - (A-B)_{i-1}) + \sigma_1(B-B_k)\qquad\\ \ge &amp; \sigma_1(A-B - (A-B)_{i-1}+B-B_k)   \\ =&amp; \sigma_1(A  - (A-B)_{i-1} -B_k)\\ \ge &amp; \sigma_1(A - A_{k+i-1})\\ =&amp; \sigma_{k+i}(A)   \end{aligned} $$<blockquote><p><a href="https://zhuanlan.zhihu.com/p/361938622">https://zhuanlan.zhihu.com/p/361938622</a></p><p><a href="https://zhuanlan.zhihu.com/p/75283604">https://zhuanlan.zhihu.com/p/75283604</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> çº¿æ€§ä»£æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> çº¿æ€§ä»£æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ç§©é€¼è¿‘çš„æ€è€ƒ</title>
      <link href="/2021/08/06/math/low-rank-app/"/>
      <url>/2021/08/06/math/low-rank-app/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é˜…è¯»æ–‡ç« <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>æ—¶å‡ºç°ä¸€ä¸ªæ¦‚å¿µâ€“<strong>Low-rank approximation</strong> ï¼Œå°±æ­¤è¿›è¡Œç›¸å…³è®¨è®ºã€‚</p></blockquote><h3 id="ä½ç§©ï¼ˆLow-Rankï¼‰">ä½ç§©ï¼ˆLow-Rankï¼‰</h3><p>å¦‚æœXæ˜¯ä¸€ä¸ªmè¡Œnåˆ—çš„æ•°å€¼çŸ©é˜µï¼Œrank(X)æ˜¯Xçš„ç§©ï¼Œå‡å¦‚rank (X)è¿œå°äºmå’Œnï¼Œåˆ™æˆ‘ä»¬ç§°Xæ˜¯ä½ç§©çŸ©é˜µã€‚ä½ç§©çŸ©é˜µæ¯è¡Œæˆ–æ¯åˆ—éƒ½å¯ä»¥ç”¨å…¶ä»–çš„è¡Œæˆ–åˆ—çº¿æ€§è¡¨å‡ºï¼Œå¯è§å®ƒåŒ…å«å¤§é‡çš„å†—ä½™ä¿¡æ¯ã€‚åˆ©ç”¨è¿™ç§å†—ä½™ä¿¡æ¯ï¼Œå¯ä»¥å¯¹ç¼ºå¤±æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œç‰¹å¾æå–ã€‚</p><p>å›¾åƒå¤„ç†ä¸­ï¼Œ<em>rankå¯ä»¥ç†è§£ä¸ºå›¾åƒæ‰€åŒ…å«çš„ä¿¡æ¯çš„ä¸°å¯Œç¨‹åº¦</em>ï¼Œåœ¨æ˜¾ç¤ºç”Ÿæ´»ä¸­ï¼Œä¸€å¼ å›¾ç‰‡ä¸­å¤§éƒ¨åˆ†æˆåˆ†æ˜¯ç›¸ä¼¼çš„ã€‚æ¯”å¦‚ç»™ä¸€å¼ å¤§è‰åŸçš„å›¾ç‰‡</p><p><img src="https://picture.mulindya.com/low-rank-app-pic1.png" alt=""></p><p>è‰åŸæ˜¯ç”±å¾ˆå¤šè‰ç»„æˆçš„ï¼Œè€Œè‰æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥å¦‚æœå…¨æ˜¯è‰ï¼Œé‚£ä¹ˆè¿™å¼ å›¾æ‰€åŒ…å«çš„ä¿¡æ¯é‡æ˜¯å¾ˆå°‘çš„çš„ï¼Œå› ä¸ºå¯ä»¥ç†è§£ä¸ºè‰æ˜¯è‰çš„å¤åˆ¶å“ã€‚è€Œä¸Šå›¾çš„è’™å¤åŒ…ï¼Œäººï¼Œé©¬ä¹‹ç±»çš„åˆ™å¯ä»¥ç†è§£ä¸ºå›¾ç‰‡æ‰€åŒ…å«çš„ä¿¡æ¯ï¼Œå®é™…ä¸Šï¼Œç›¸å¯¹äºåªæœ‰è‰çš„è‰åŸå›¾ç‰‡å’Œæœ‰è‰å’Œè’™å¤åŒ…çš„è‰åŸå›¾ç‰‡ï¼Œåè€…çš„ç§©æ˜¯è¾ƒé«˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡ä¸­æ¯”è¾ƒçªå…€çš„æˆåˆ†ï¼Œæ¯”å¦‚è’™å¤åŒ…ï¼Œæ¯”å¦‚äººåƒç…§ç‰‡ä¸­çš„çº¢çœ¼äº®ç‚¹ï¼Œä¼šå¢åŠ å›¾åƒçŸ©é˜µçš„ç§©ã€‚è€Œç°å®ç”Ÿæ´»ä¸­ä¸€å¼ ä¸é”™çš„å›¾ç‰‡çš„ç§©å…¶å®æ˜¯æ¯”è¾ƒä½çš„ï¼Œå¦‚æœå›¾åƒçš„ç§©æ¯”è¾ƒé«˜ï¼Œå¾€å¾€æ˜¯å› ä¸ºå›¾åƒä¸­çš„å™ªå£°æ¯”è¾ƒä¸¥é‡ã€‚æ¯”å¦‚æ‹ç…§çš„æ—¶å€™ISOæ„Ÿå…‰åº¦è®¾ç½®è¿‡é«˜é€ æˆå™ªç‚¹å¤ªè¿‡æ³›æ»¥ä¹‹ç±»çš„ã€‚æ‰€ä»¥ï¼Œ<em>å›¾åƒå¤„ç†çš„ä½ç§©æ€§å…¶å®å¯ä»¥æ‹¿æ¥å»é™¤ç…§ç‰‡ä¸­çš„å™ªç‚¹</em>ã€‚</p><h3 id="ä½ç§©å’Œç¨€ç–">ä½ç§©å’Œç¨€ç–</h3><p>æˆ‘ä»¬è®¤ä¸ºå›¾åƒæœ‰ä¸€äº›å…¬å…±çš„æ¨¡å¼ï¼Œæ‰€æœ‰å›¾åƒéƒ½ç”±è¿™äº›åŸºæœ¬çš„æ¨¡å¼ç»„æˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœå›¾åƒæ˜¯ä¸€ä¸ªå‰ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ­£æ–œçº¿å’Œåæ–œçº¿çš„å åŠ ã€‚<strong>åªè¦æˆ‘ä»¬æ‰¾åˆ°äº†æ‰€æœ‰çš„åŸºåº•ï¼ˆç§°ä½œå­—å…¸</strong>ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„æ­£æ–œçº¿å’Œåæ–œçº¿ä¹‹ç±»çš„ä¸œè¥¿ï¼‰**ï¼Œå°±èƒ½é€šè¿‡åŸºåº•çš„çº¿æ€§ç»„åˆè¡¨ç¤ºå‡ºæ‰€æœ‰çš„å›¾åƒã€‚**è¿™å°±å¥½åƒå­¦ç”»ç”»ï¼Œå…ˆå­¦ä¼šåŸºæœ¬çš„ç”»æ­£æ–¹ä½“ã€çƒä½“ã€åœ†æŸ±ä½“ç­‰ç­‰ï¼Œå°±å¯ä»¥ç»„åˆå‡ºå„ç§å„æ ·çš„å¤æ‚å½¢çŠ¶ã€‚</p><p><strong>åœ¨å¾ˆå¤šæƒ…å½¢ä¸‹ï¼ŒåŸºåº•çš„æ•°é‡æ˜¯å¾ˆå°‘çš„</strong>ï¼Œæ¯”å¦‚ä¸€å¼ ç…§ç‰‡æ‹çš„æ˜¯ä¸€é¢ç –å¢™ï¼Œé‚£ä¹ˆå®ƒæ˜¾ç„¶å…·æœ‰å‘¨æœŸé‡å¤çš„ç‰¹ç‚¹ï¼Œæ¢å¥è¯è¯´ä½ç§©ã€‚å³ä½¿æ•´ä¸ªå›¾ä¸ä½ç§©ï¼Œå¾€å¾€ä¹Ÿèƒ½æ‰¾å‡ºä¸€äº›ç›¸ä¼¼çš„å—ï¼Œè¿™äº›å—æ˜¯ä½ç§©çš„ã€‚å†é€€ä¸€æ­¥ï¼Œå°±ç®—è¿™ä¹Ÿåšä¸åˆ°ï¼Œå¾€å¾€ä¹Ÿå¯ä»¥æŠŠå·²æœ‰çš„æ•°æ®çœ‹æˆä¸€ç»„ä½ç»´çš„ç»“æœåŠ ä¸Šå™ªå£°ï¼Œä¹Ÿå³åŸæ¥çš„æ•°æ®<strong>å¯ä»¥è¢«ä½ç§©çŸ©é˜µå¾ˆå¥½çš„é€¼è¿‘</strong>ã€‚<strong>ç¨€ç–æ€§</strong>çš„æ„æ€æ˜¯ï¼ˆä»¥ç¨€ç–è¡¨ç¤ºä¸ºä¾‹ï¼‰ï¼Œä»»ç»™ä¸€ä¸ªå›¾åƒï¼Œ<strong>å­—å…¸å¯èƒ½æ˜¯è¿‡å®Œå¤‡çš„</strong>ï¼Œä»è€Œç”¨å­—å…¸é‡Œçš„åŸºå‘é‡è¡¨å‡ºè¿™å¹…å›¾æœ‰å¾ˆå¤šç§ä¸åŒçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬å¸Œæœ›<strong>é€‰å–ä½¿ç”¨åŸºåº•æ•°é‡æœ€å°‘çš„é‚£ç§æ–¹æ¡ˆ</strong>ï¼Œ</p><p>åº”ç”¨ï¼š</p><p><em><strong>1ï¼‰çŸ©é˜µå¡«å……(Matrix Completion)</strong></em></p><p><em><strong>2ï¼‰é²æ£’PCA</strong></em></p><p><em><strong>3ï¼‰èƒŒæ™¯å»ºæ¨¡</strong></em></p><p><em><strong>4ï¼‰å˜æ¢ä¸å˜ä½ç§©çº¹ç†ï¼ˆTILTï¼‰</strong></em></p><blockquote><p>åœ¨è®ºæ–‡ <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>ä¸­æœ‰ä¸€æ®µå¯ä»¥å‚è€ƒã€‚</p></blockquote><p><strong>Low-rank approximation of precision matrix</strong></p><p>The feature data <strong>X</strong> is subject to low-rank approximation due to the narrower target domain for anomaly-free images than the ImageNet datasetâ€™s. The multi-scale features from different layers may also contribute to it due to the inter-dependency among the features from the layers. Inspired by the truncated SVD of a precision matrix, a low-rank embedding of input features with $W \in R^{F \times k}$,where <em>F &gt; k</em>, is considered as follows:<br>$$<br>d^2_{i,j} = X<sup>TW(W</sup>TC_{i,j}W)<sup>{âˆ’1}W</sup>TX<br>$$<br>where the below Theorem 1 shows the optimal <strong>W</strong>* is the eigenvectors related to the <em>k</em>-smallest eigenvalues of $C_{i,j}$ . Notice that 1) the computational complexity of the equation is cubically reduced to <em>O</em>($HWk^3$) set aside the cost of SVD, although which is the concern, 2) PCA embedding would fail to minimize approximation error since it uses the <em>k</em>-largest eigenvectors [14], and 3) near-zero eigenvalues may induce substantial anomaly scores.</p><p>é€‰å–åæ–¹å·®çŸ©é˜µçš„kä¸ªæœ€å°çš„ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œè¿›è¡Œä½ç§©é€¼è¿‘</p><blockquote><p>å‚è€ƒ</p><p><a href="https://www.zhihu.com/question/28630628">https://www.zhihu.com/question/28630628</a></p><p><a href="https://blog.csdn.net/zouxy09/article/details/24972869">https://blog.csdn.net/zouxy09/article/details/24972869</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> çº¿æ€§ä»£æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> çº¿æ€§ä»£æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­æ¨¡å—ä¸ºç©ºçš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2021/08/06/config/git-submodule/"/>
      <url>/2021/08/06/config/git-submodule/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é’ˆå¯¹å­æ¨¡å—æ–‡ä»¶å¤¹ä¸ºç©ºçš„æƒ…å†µï¼Œé‡‡å–ä¸‹åˆ—è§£å†³æ–¹æ¡ˆã€‚</p><p>å½“ä¸€ä¸ª git é¡¹ç›®åŒ…å«å­æ¨¡å—ï¼ˆsubmodule) æ—¶ï¼Œç›´æ¥å…‹éš†ä¸‹æ¥çš„å­æ¨¡å—ç›®å½•é‡Œé¢æ˜¯ç©ºçš„ã€‚</p></blockquote><p><strong>æœ‰ä¸¤ç§æ–¹æ³•è§£å†³</strong>ï¼š</p><h3 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h3><p>å¦‚æœé¡¹ç›®å·²ç»å…‹éš†åˆ°äº†æœ¬åœ°ï¼Œæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p><ol><li><p>åˆå§‹åŒ–æœ¬åœ°å­æ¨¡å—é…ç½®æ–‡ä»¶</p><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git submodule <span class="hljs-keyword">init</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>æ›´æ–°é¡¹ç›®ï¼ŒæŠ“å–å­æ¨¡å—å†…å®¹ã€‚</p><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git submodule update</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>è¿›å…¥å¯¹åº”å­æ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œ</p><figure class="highlight brainfuck"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">git</span> <span class="hljs-comment">submodule</span> <span class="hljs-comment">update</span> --<span class="hljs-comment">init</span> --<span class="hljs-comment">recursive</span><br></code></pre></td></tr></tbody></table></figure></li></ol><h3 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h3><p>å¦å¤–ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œ <code>git clone</code> æ—¶åŠ ä¸Š <code>--recursive</code> å‚æ•°ã€‚å®ƒä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°æ¯ä¸€ä¸ªå­æ¨¡å—ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone --recursive https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/example/</span>example.git<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoä¸­å…¬å¼æ˜¾ç¤º</title>
      <link href="/2021/08/05/config/hexo-math-config/"/>
      <url>/2021/08/05/config/hexo-math-config/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å…¬å¼çš„æ˜¾ç¤ºé—®é¢˜ã€‚Hexoä¸­Mathjaxæ˜¯ç”¨äºæ˜¾ç¤ºå…¬å¼çš„æ’ä»¶ï¼Œä½†æ˜¯å¤šè¡Œæ˜¾ç¤ºä¼šå‡ºç°é—®é¢˜ï¼Œæœ‰æ—¶è¿˜ä¼šå‡ºç°ä¹±ç çš„æƒ…å†µã€‚</p></blockquote><h3 id="é…ç½®">é…ç½®</h3><p>åœ¨æ ¹ç›®å½•ä¸‹çš„config_fluid.ymlâ€‹æ–‡ä»¶ä¸­æ‰“å¼€mathçš„ç›¸å…³é…ç½®ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># æ•°å­¦å…¬å¼ï¼Œå¼€å¯ä¹‹å‰éœ€è¦æ›´æ¢ Markdown æ¸²æŸ“å™¨ï¼Œå¦åˆ™å¤æ‚å…¬å¼ä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œå…·ä½“è¯·è§ï¼šhttps://hexo.fluid-dev.com/docs/guide/##latex-æ•°å­¦å…¬å¼</span><br><span class="hljs-comment"># Mathematical formula. If enable, you need to change the Markdown renderer, see: https://hexo.fluid-dev.com/docs/en/guide/#math</span><br><span class="hljs-attr">math:</span><br>  <span class="hljs-comment"># å¼€å¯åæ–‡ç« é»˜è®¤å¯ç”¨ï¼Œè‡ªå®šä¹‰é¡µé¢å¦‚éœ€ä½¿ç”¨ï¼Œéœ€åœ¨ Front-matter ä¸­æŒ‡å®š `math: true`</span><br>  <span class="hljs-comment"># If you want to use math on the custom page, you need to set `math: true` in Front-matter</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># å¼€å¯åï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter é‡ŒæŒ‡å®š `math: true` æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦</span><br>  <span class="hljs-comment"># If true, only set `math: true` in Front-matter will enable math, to load faster when the page does not contain math</span><br>  <span class="hljs-attr">specific:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># Options: mathjax | katex</span><br>  <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="å‡ºç°çš„é—®é¢˜">å‡ºç°çš„é—®é¢˜</h3><h4 id="é—®é¢˜1">é—®é¢˜1</h4><ul><li>ç”±äºhexoè§£ç æ—¶å…³æ³¨ï¼Œ%% ç­‰è¿ç»­å­—ç¬¦ï¼Œä¼šå°†è¿™éƒ¨åˆ†ä»£ç è§£è¯»ä¸ºå…¶ä»–å¸¦æœ‰ç‰¹æ®Šå«ä¹‰çš„å†…å®¹</li><li>å¦‚æœå…¬å¼ä¸­æ°å·§å‡ºç°äº†æ­¤ç±»å­—ç¬¦ï¼Œä¼šæŠ¥å‡ºä¸Šè¿°é”™è¯¯</li></ul><h4 id="é—®é¢˜2">é—®é¢˜2</h4><ul><li>ç”±äºhexoåœ¨å…¬å¼ä¸­çš„<code>\\</code>é”™ä¼šæˆäº†è½¬ä¹‰ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–åªçœ‹è§äº†ä¸€ä¸ªåæ–œæ ï¼Œä¸ä¼šæ‰§è¡Œæ¢è¡Œå‘½ä»¤ï¼Œå¯¼è‡´å…¬å¼å †æˆä¸€è¡Œ</li></ul><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><h4 id="ä¸´æ—¶æ–¹æ¡ˆ">ä¸´æ—¶æ–¹æ¡ˆ</h4><h5 id="é’ˆå¯¹é—®é¢˜1">é’ˆå¯¹é—®é¢˜1</h5><ul><li>å¯ä»¥åœ¨è¿ç»­çš„ <code>{</code> <code>}</code> <code>%</code>ä¸­é—´æ’å…¥ç©ºæ ¼ï¼Œåˆ†å¼€å°±æ²¡äº‹äº†</li></ul><h5 id="é’ˆå¯¹é—®é¢˜2">é’ˆå¯¹é—®é¢˜2</h5><ul><li>å¯ä»¥å°†<code>\\</code>æ¢æˆ<code>\\\\</code>ï¼Œå¯ä»¥å®ç°å…¬å¼çš„å¤šè¡Œæ­£ç¡®æ˜¾ç¤º</li></ul><h4 id="ç»ˆææ–¹æ¡ˆ">ç»ˆææ–¹æ¡ˆ</h4><ul><li><p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°äº†å¯ä»¥ä¸ºhexoæä¾›æ ‡è®°ï¼Œé˜»æ­¢å…¶æŒ‰ç…§è‡ªå·±çš„è§„åˆ™è§£é‡Šæˆ‘ä»¬çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºå…¶åŸæœ¬çš„å«ä¹‰</p></li><li><p>æ ‡è®°ä¸º</p><figure class="highlight django"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">{% <span class="hljs-name">raw</span> %}</span><span class="xml"></span><br><span class="xml">$$</span><br><span class="xml">...</span><br><span class="xml">$$</span><br><span class="xml"></span><span class="hljs-template-tag">{% <span class="hljs-name">endraw</span> %}</span><br></code></pre></td></tr></tbody></table></figure></li></ul><h3 id="å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½">å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½</h3><ul><li><p>é»˜è®¤æ˜¯æ˜¾ç¤ºä¸ºä¸€è¡Œè¦å®ç°å…¬å¼å¤šè¡Œå’Œå¯¹é½å¯ä»¥ä½¿ç”¨{aligned}æ¨¡å¼ï¼Œä½¿ç”¨"&amp;â€œæ¥æ ‡è®°å¯¹é½ä½ç½®ã€‚â€\\"è¡¨ç¤ºæ¢è¡Œ</p>  <figure class="highlight taggerscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">$$<br><span class="hljs-symbol">\b</span>egin{aligned}<br><span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}C<span class="hljs-symbol">\b</span>oldsymbol{x}&amp;=<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\r</span>ight]<span class="hljs-symbol">\b</span>oldsymbol{x} <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight] <span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\r</span>ight] <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft<span class="hljs-symbol">\V</span>ert <span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight<span class="hljs-symbol">\V</span>ert ^{2}<span class="hljs-symbol">\r</span>ight) <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\s</span>igma_{X}^{2}<br><span class="hljs-symbol">\e</span>nd{aligned}<br>$$<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ˜¾ç¤ºä¸º</p></li></ul>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> fluid </tag>
            
            <tag> é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›´è§‚ç†è§£åæ–¹å·®çŸ©é˜µ</title>
      <link href="/2021/08/05/math/covariance-matrix/"/>
      <url>/2021/08/05/math/covariance-matrix/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ–‡å‡ºè‡ª <a href="https://zhuanlan.zhihu.com/p/349802953">https://zhuanlan.zhihu.com/p/349802953</a></p></blockquote><h2 id="1-æ¦‚ç‡è®ºä¸­çš„å®šä¹‰">1 æ¦‚ç‡è®ºä¸­çš„å®šä¹‰</h2><h3 id="éšæœºå˜é‡ï¼š">éšæœºå˜é‡ï¼š</h3><p>éšæœºå˜é‡(Random Variable) X æ˜¯ä¸€ä¸ªæ˜ å°„ï¼ŒæŠŠéšæœºè¯•éªŒçš„ç»“æœä¸å®æ•°å»ºç«‹èµ·äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚è€ŒæœŸæœ›ä¸æ–¹å·®æ˜¯éšæœºå˜é‡çš„ä¸¤ä¸ªé‡è¦çš„æ•°å­—ç‰¹å¾ã€‚</p><h3 id="æ•°å­¦æœŸæœ›ï¼š">æ•°å­¦æœŸæœ›ï¼š</h3><p>åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)(æˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›(Expectation, or expected value))æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°ã€‚ æœŸæœ›å€¼æ˜¯è¯¥å˜é‡è¾“å‡ºå€¼çš„å¹³å‡æ•°ã€‚æœŸæœ›å€¼å¹¶ä¸ä¸€å®šåŒ…å«äºå˜é‡çš„è¾“å‡ºå€¼é›†åˆé‡Œã€‚</p><p>å¤§æ•°å®šå¾‹è§„å®šï¼Œéšç€é‡å¤æ¬¡æ•°æ¥è¿‘æ— ç©·å¤§ï¼Œæ•°å€¼çš„ç®—æœ¯å¹³å‡å€¼å‡ ä¹è‚¯å®šåœ°æ”¶æ•›äºæœŸæœ›å€¼ã€‚</p><h3 id="æ–¹å·®ï¼š">æ–¹å·®ï¼š</h3><p>æ–¹å·®(Variance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›(å³å‡å€¼)ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®(æ ·æœ¬æ–¹å·®)æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚</p><p>è®¾$X$ä¸ºéšæœºå˜é‡ï¼Œ å¦‚æœ$\mathrm{E}[X]$ï¼Œåˆ™éšæœºå˜é‡$X$çš„æ–¹å·®ä¸ºï¼š<br>$$<br>\mu=\mathrm{E}[X]<br>$$</p><p>æ–¹å·®ä¹Ÿè®°ä¸º $\sigma_{X}^{2}$ã€‚</p><p>æ ·æœ¬æ–¹å·®è®¡ç®—å…¬å¼ï¼š</p><p>$$<br>S<sup>{2}=\Sigma\left(X-\overline{X}\right)</sup>{2}/\left(n-1\right)<br>$$</p><p>å…¶ä¸­ï¼Œ$S^{2}$ä¸ºæ ·æœ¬æ–¹å·®ï¼Œ$X$ ä¸ºå˜é‡ï¼Œ$\overline{X}$ä¸ºæ ·æœ¬å‡å€¼ï¼Œ$n$ ä¸ºæ ·æœ¬ä¾‹æ•°ã€‚å¦‚æœè¦äº†è§£ä¸ºä»€ä¹ˆè¦é™¤ä»¥$n-1$ï¼Œè¯·çœ‹<a href="https://link.zhihu.com/?target=https%3A//www.visiondummy.com/2014/03/divide-variance-n-1/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="æ ‡å‡†å·®ï¼š">æ ‡å‡†å·®ï¼š</h3><p>æ ‡å‡†å·®(Standard Deviation)æ˜¯ç¦»å‡å·®å¹³æ–¹çš„ç®—æœ¯å¹³å‡æ•°(å³ï¼šæ–¹å·®)çš„ç®—æœ¯å¹³æ–¹æ ¹ï¼Œç”¨$\sigma$è¡¨ç¤ºã€‚æ ‡å‡†å·®ä¹Ÿè¢«ç§°ä¸ºæ ‡å‡†åå·®ï¼Œæˆ–è€…å®éªŒæ ‡å‡†å·®ï¼Œåœ¨æ¦‚ç‡ç»Ÿè®¡ä¸­æœ€å¸¸ä½¿ç”¨ä½œä¸ºç»Ÿè®¡åˆ†å¸ƒç¨‹åº¦ä¸Šçš„æµ‹é‡ä¾æ®ã€‚ è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/covariance-matrix-pic1.jpg" alt=""></p><p>æ ‡å‡†å·®æ˜¯æ–¹å·®çš„ç®—æœ¯å¹³æ–¹æ ¹ã€‚æ ‡å‡†å·®èƒ½åæ˜ ä¸€ä¸ªæ•°æ®é›†çš„ç¦»æ•£ç¨‹åº¦ã€‚å¹³å‡æ•°ç›¸åŒçš„ä¸¤ç»„æ•°æ®ï¼Œæ ‡å‡†å·®æœªå¿…ç›¸åŒã€‚</p><h3 id="åæ–¹å·®ï¼š">åæ–¹å·®ï¼š</h3><p><strong>åæ–¹å·®(Covariance)åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ç”¨äºè¡¡é‡ä¸¤ä¸ªå˜é‡çš„æ€»ä½“è¯¯å·®ã€‚è€Œæ–¹å·®æ˜¯åæ–¹å·®çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå³å½“ä¸¤ä¸ªå˜é‡æ˜¯ç›¸åŒçš„æƒ…å†µã€‚</strong></p><p>æœŸæœ›å€¼åˆ†åˆ«ä¸º$ E[X]$ä¸$[Y]$çš„ä¸¤ä¸ªå®éšæœºå˜é‡$X$ä¸$Y$ä¹‹é—´çš„åæ–¹å·® $\mathrm{Cov}(X,Y)$ å®šä¹‰ä¸ºï¼š</p>$$\begin{aligned}\mathrm{Cov}(X,Y)&amp;=\mathrm{E}\left[\left(X\mathrm{E}\left[X\right]\right)\left(Y-\mathrm{E}\left[Y\right]\right)\right]  \\&amp;=\mathrm{E}\left[XY\right]-2\mathrm{E}\left[Y\right]\mathrm{E}\left[X\right]+\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right] \\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\end{aligned}$$<p>åæ–¹å·®è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªå˜é‡æ€»ä½“è¯¯å·®çš„æœŸæœ›ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯æ­£å€¼ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ç›¸åï¼Œå³å…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªå´å°äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯è´Ÿå€¼ã€‚</p><p>å¦‚æœ$X$ä¸$Y$æ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆäºŒè€…ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯0ï¼Œå› ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„éšæœºå˜é‡æ»¡è¶³$\mathrm{E}[XY]=\mathrm{E}[X]\mathrm{E}[Y]$ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å¹¶ä¸æˆç«‹ã€‚å³å¦‚æœ$X$ä¸$Y$çš„åæ–¹å·®ä¸º0ï¼ŒäºŒè€…å¹¶ä¸ä¸€å®šæ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ã€‚</p><p><strong>åæ–¹å·®ä¸º0çš„ä¸¤ä¸ªéšæœºå˜é‡ç§°ä¸ºæ˜¯ä¸ç›¸å…³çš„ã€‚</strong></p><h3 id="åæ–¹å·®çŸ©é˜µï¼š">åæ–¹å·®çŸ©é˜µï¼š</h3><p>åœ¨ç»Ÿè®¡å­¦ä¸æ¦‚ç‡è®ºä¸­ï¼Œåæ–¹å·®çŸ©é˜µ(Covariance matrix)çš„æ¯ä¸ªå…ƒç´ æ˜¯å„ä¸ªå‘é‡å…ƒç´ ä¹‹é—´çš„åæ–¹å·®ï¼Œæ˜¯ä»æ ‡é‡éšæœºå˜é‡åˆ°é«˜ç»´åº¦éšæœºå‘é‡çš„è‡ªç„¶æ¨å¹¿ã€‚</p><p>è®¾$X=\left(X_{1},X_{2},\ldots,X_{n}\right)^{\mathrm{T}}$ä¸º$n$ ç»´éšæœºå˜é‡ï¼Œç§°çŸ©é˜µ</p>$$C=\left(\begin{array}{cccc} c_{11} &amp; c_{12} &amp; \cdots &amp; c_{1n}\\ c_{21} &amp; c_{22} &amp; \cdots &amp; c_{2n}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ c_{n1} &amp; c_{n2} &amp; \cdots &amp; c_{nn} \end{array}\right)$$<p>ä¸º n ç»´éšæœºå˜é‡xçš„åæ–¹å·®çŸ©é˜µï¼Œä¹Ÿè®°ä¸º $D\left(X\right)$ ï¼Œå…¶ä¸­<br>$$<br>c_{ij}=\mathrm{Cov}(X_{i},X_{j}),\quad i,j=1,2,\ldots,n<br>$$<br>ä¸ºXçš„åˆ†é‡$X_{i}$å’Œ$X_{j}$çš„åæ–¹å·®ã€‚<em>å¹¶ä¸”å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä¸ºå„ä¸ªéšæœºå˜é‡çš„æ–¹å·®ï¼š</em></p><p>$$<br>c_{ii}=\mathrm{Cov}(X_{i},X_{i}),\quad i=1,2,\ldots,n<br>$$</p><p>åæ–¹å·®çŸ©é˜µæ˜¯å¯¹ç§°åŠæ­£å®šçŸ©é˜µã€‚åæ–¹å·®çŸ©é˜µçš„å¯¹ç§°æ€§ï¼Œå¯ä»å®šä¹‰å¾—çŸ¥ã€‚å¯¹äºåŠæ­£å®šç‰¹æ€§ï¼Œè¯æ˜å¦‚ä¸‹ï¼š</p><p>ç°ç»™å®šä»»æ„ä¸€ä¸ªéé›¶å‘é‡$\boldsymbol{x}$ï¼Œåˆ™</p>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$<p>å…¶ä¸­ï¼Œ<br>$$<br>\sigma_{X}=\left(X-\mu \right)^{\mathrm{T}}\boldsymbol{x}<br>$$<br>ç”±äº $\sigma_{X}<sup>{2}\geq0$ï¼Œå› æ­¤$\boldsymbol{x}</sup>{\mathrm{T}}C\boldsymbol{x}\geq0$ï¼Œå› æ­¤åæ–¹å·®çŸ©é˜µ$C$ æ˜¯åŠæ­£å®šçŸ©é˜µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> æ¦‚ç‡è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> æ¦‚ç‡è®º </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
