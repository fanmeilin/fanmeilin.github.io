<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å‰‘æŒ‡offer57-2 å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—</title>
      <link href="/2021/12/30/leetcode/leetcode-offer57-2/"/>
      <url>/2021/12/30/leetcode/leetcode-offer57-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° target ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸º target çš„è¿ç»­æ­£æ•´æ•°åºåˆ—ï¼ˆè‡³å°‘å«æœ‰ä¸¤ä¸ªæ•°ï¼‰ã€‚</p><p>åºåˆ—å†…çš„æ•°å­—ç”±å°åˆ°å¤§æ’åˆ—ï¼Œä¸åŒåºåˆ—æŒ‰ç…§é¦–ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼štarget = <span class="hljs-number">9</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[2,3,4],[4,5]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼štarget = <span class="hljs-number">15</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,2,3,4,5],[4,5,6],[7,8]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= target &lt;= 10^5</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="éå†è§£æ³•">éå†è§£æ³•</h3><p>ä»1åˆ°<code>target//2</code>ä¸ºé¦–éå†æ˜¯å¦å­˜åœ¨è¿ç»­çš„åºåˆ—ä¸ºtargetã€‚ä½¿ç”¨ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯ç¡®å®šé¦–å…ƒç´ ï¼Œå†…å±‚å¾ªç¯ç¡®å®šå°¾å…ƒç´ ï¼Œå¦‚æœéå†åˆ°çš„å’Œå¤§äºtargetå°±ç»ˆæ­¢ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">self, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        limit = <span class="hljs-built_in">int</span>(target/<span class="hljs-number">2</span>)<br>        result = []<br>        <span class="hljs-keyword">for</span> head <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,limit+<span class="hljs-number">1</span>):<br>            temp,t,sumt = [head],head+<span class="hljs-number">1</span>,head<br>            <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>                sumt += t<br>                temp.append(t)  <br>                <span class="hljs-keyword">if</span> sumt==target:<br>                    result.append(temp)<br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> sumt&gt;target: <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> sumt&lt;target: t += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></tbody></table></figure><h3 id="æ»‘åŠ¨çª—å£">æ»‘åŠ¨çª—å£</h3><p>ä½¿ç”¨æ»‘åŠ¨çª—å£æ¥ç¡®å®šåºåˆ—é¦–å°¾ä½ç½®ï¼›<br>åœ¨è¿™é‡Œiï¼Œjåˆ†åˆ«è¡¨ç¤ºé¦–å°¾å…ƒç´ ï¼›</p><ul><li>åºåˆ—å…ƒç´ å’Œsumtå°äºtargetï¼Œå°±å³ç§»jï¼›</li><li>åºåˆ—å…ƒç´ å’Œå¤§äºtargetï¼Œå°±å³ç§»iï¼›</li></ul><p>è¿™é‡Œä¸å­˜åœ¨å·¦ç§»çš„æƒ…å†µï¼Œä¸å·¦ç§»iå¥½ç†è§£ï¼Œå› ä¸ºiæ˜¯ä»å¤´å¼€å§‹æŸ¥æ‰¾çš„å˜›ï¼Œå·¦ç§»ä¸æ˜¯é‡å¤äº†å˜›ï¼Œä½•å†µè¿˜è¦ä¿è¯é¦–å…ƒç´ çš„é¡ºåºï¼›é‚£ä¹ˆä¸å·¦ç§»jçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ã€‚ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œè¿™ä¸ªçª—å£åªæ˜¯è´Ÿè´£å°¾èŠ‚ç‚¹å³ç§»æ‰©å¤§å’Œé¦–èŠ‚ç‚¹å³ç§»ç¼©å°ï¼Œæ˜¯å¯ä»¥éå†æ‰€æœ‰çš„æƒ…å†µå“’ã€‚æ¯”å¦‚<code>1,2,3,4,5...</code>,targetä¸º5ï¼Œå¼€å§‹å°±ä¼šåˆ°<code>1,2,3</code>,ç„¶åå†åˆ°<code>2,3</code>;å³å°¾èŠ‚ç‚¹åªè´Ÿè´£å¢å¤§åºåˆ—å’Œï¼Œé¦–èŠ‚ç‚¹åªè´Ÿè´£ç¼©å°åºåˆ—å’Œã€‚ğŸ˜‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">self, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-comment">#æ»‘åŠ¨çª—å£</span><br>        i,j,sumt,result = <span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,[]<br>        <span class="hljs-keyword">while</span>(i&lt;=target//<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">if</span>(sumt&lt;target):<br>                j += <span class="hljs-number">1</span><br>                sumt += j<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span>(sumt==target):result.append(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(i,j+<span class="hljs-number">1</span>))) <span class="hljs-comment">#éœ€è¦listè½¬æ¢</span><br>            sumt -= i<br>            i += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ»‘åŠ¨çª—å£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ»‘åŠ¨çª—å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¶³è¿¹æ£€æµ‹é¡¹ç›®çš„æ€»ç»“</title>
      <link href="/2021/12/29/project_summary/footprint-summary/"/>
      <url>/2021/12/29/project_summary/footprint-summary/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“è¶³è¿¹æ£€æµ‹é¡¹ç›®</p></blockquote><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ ¹æ®åˆ»åº¦å°ºä¸Šçš„ç‰¹å¾å¯¹äº§ç”Ÿç•¸å˜çš„è„šå°çŸ«æ­£ã€‚å®ç°åŸå›¾æ‰“å°å’Œæ ‡æ³¨ï¼›</p><h2 id="æŠ€æœ¯ç‚¹">æŠ€æœ¯ç‚¹</h2><p>æ ¹æ®åˆ»åº¦å°ºä¸Šçš„ç‰¹å¾å¯¹äº§ç”Ÿç•¸å˜çš„è„šå°çŸ«æ­£ã€‚<br>ä½¿ç”¨éœå¤«å˜æ¢æ‹Ÿåˆ4ä¸ªåœ†å®šä½æ¥ä»¿å°„å˜æ¢çŸ«æ­£å›¾åƒ</p><ul><li>éœå¤«å˜æ¢-&gt;yolov5</li><li>ä»¿å°„å˜æ¢</li><li>pyqt5</li></ul><h2 id="éš¾ç‚¹">éš¾ç‚¹</h2><p>ä½¿ç”¨éœå¤«å˜æ¢å®¹æ˜“å®šä½åˆ°èƒŒæ™¯çš„åœ†ï¼Œå¹¶ä¸”å¯èƒ½å‡ºç°åœ†ä¸å…¨çš„æƒ…å†µ</p><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><p>ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ç›®æ ‡æ£€æµ‹<br>ä½¿ç”¨å¤šä¸ªç‰¹å¾èåˆé€‰æ‹©è¿›è¡Œä»¿å°„å˜æ¢</p><h2 id="æˆæœ">æˆæœ</h2><p>è¾¾åˆ°ä¸è¶…è¿‡15åº¦æ—¶ï¼Œè¯¯å·®åœ¨2mmä»¥å†…</p><h2 id="åˆ›æ–°ç‚¹">åˆ›æ–°ç‚¹</h2><p>ä½¿ç”¨å¤šä¸ªç‰¹å¾èåˆçŸ«æ­£</p><h2 id="å±•æœ›å’Œæ”¹è¿›">å±•æœ›å’Œæ”¹è¿›</h2><p>å°ºå­çŸ«æ­£åä¸å‡è¡¡</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python-embededæ‰“åŒ…æ–‡ä»¶ç”Ÿæˆexe</title>
      <link href="/2021/12/29/project_tool/usePyembeded/"/>
      <url>/2021/12/29/project_tool/usePyembeded/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨pyinstalleræ‰“åŒ…çš„æ–‡ä»¶å¤ªå¤§äº†ï¼ï¼æ‰€ä»¥ï¼æ‰€ä»¥ï¼å­¦åˆ°äº†å¦ä¸€æ‹›ï¼Œå°†æ‰€éœ€çš„ç¯å¢ƒé…ç½®åˆ°python-embededä¸­ï¼Œç„¶åä½¿ç”¨cæ¥è°ƒç”¨pyçš„å¯åŠ¨æ–‡ä»¶ï¼Œå†gccç”Ÿæˆexeæ–‡ä»¶ï¼Œé…±ç´«å·¥ç¨‹æ–‡ä»¶å°±ä¼šå°å¾ˆå¤šï¼›å®è·µè¯æ˜ï¼Œpyinstalleræ‰“åŒ…5.2Gï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼åé™ä½åˆ°1.5Gå“¦~ è¿™ç§æ–¹å¼ä¸»è¦å°±æ˜¯ä½¿ç”¨python-embededæ¥é…ç½®ç¯å¢ƒã€‚</p></blockquote><h2 id="ä¸‹è½½embededç‰ˆæœ¬">ä¸‹è½½embededç‰ˆæœ¬</h2><ul><li>python37çš„<a href="https://link.zhihu.com/?target=https%3A//www.python.org/downloads/release/python-373/">embeddedç‰ˆæœ¬</a></li><li>ä¸‹è½½zipæ–‡ä»¶è§£å‹åˆ°æŸå¤„ï¼Œæ¯”å¦‚<code>E:\python_embeded\</code></li></ul><p><img src="https://picture.mulindya.com/python-embeded1.png" alt=""></p><h2 id="å®‰è£…pip">å®‰è£…pip</h2><ul><li><p>å»<a href="https://link.zhihu.com/?target=https%3A//pip.pypa.io/en/stable/installing/%23id7">å®˜ç½‘</a><a href="http://xn--get-pip-nw3k7779b.py">ä¸‹è½½get-pip.py</a></p></li><li><p>ç‚¹å‡»installation,ä¸‹è½½<a href="https://bootstrap.pypa.io/get-pip.py.">get-pip.py</a>æ–‡ä»¶åˆ°<code>E:\python_embeded\</code></p></li><li><p>è¿è¡Œè¯¥æ–‡ä»¶ã€‚æ³¨æ„ä½¿ç”¨emdededç‰ˆæœ¬çš„pythonæ¥è¿è¡Œé…ç½®è¦<strong>å¸¦è·¯å¾„</strong>å“¦ï¼</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apl">#æ‰“å¼€cmd,cdåˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼ˆE:\python_embeded\ï¼‰ï¼Œè¿è¡Œä¸‹è½½çš„æ–‡ä»¶<br>E:\python_embeded\python.exe  get-pip.py<br></code></pre></td></tr></tbody></table></figure></li></ul><h2 id="é…ç½®ç›¸å…³ç¯å¢ƒ">é…ç½®ç›¸å…³ç¯å¢ƒ</h2><p>å¸¸è§„é…ç½®pytorchæ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#cpu ç‰ˆæœ¬</span><br>pip install torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span><br><br><span class="hljs-comment"># CUDA 10.2</span><br>conda install pytorch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> cudatoolkit=<span class="hljs-number">10.2</span> -c pytorch<br><br><span class="hljs-comment"># CUDA 10.2</span><br>pip install torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span>+cu102 torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span>+cu102 torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> -f https://download.pytorch.org/whl/torch_stable.html<br></code></pre></td></tr></tbody></table></figure><p>åœ¨python-embededä¸­ï¼Œè¦å¸¦ä¸Šè·¯å¾„å“¦ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#æ‰“å¼€cmd,cdåˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼ˆE:\python_embeded\ï¼‰ï¼Œè¿è¡Œä¸‹è½½çš„æ–‡ä»¶</span><br>è¿™é‡Œä½¿ç”¨cpuçš„torchç‰ˆæœ¬ï¼Œå¤Ÿç”¨äº†å¹¶ä¸”æ–‡ä»¶æ›´å°ã€‚<br>E:\python_embeded\Scripts\pip.exe  install ç›¸å…³é…ç½®(torch==<span class="hljs-number">1.8</span><span class="hljs-number">.1</span> torchvision==<span class="hljs-number">0.9</span><span class="hljs-number">.1</span> torchaudio==<span class="hljs-number">0.8</span><span class="hljs-number">.1</span> )<br>    <br>E:\python_embeded\Scripts\pip.exe  install -r requirements.txt <span class="hljs-comment">#ä¸€æ ·çš„æ“ä½œ</span><br></code></pre></td></tr></tbody></table></figure><h3 id="é…ç½®tkinter">é…ç½®tkinter</h3><p>å¦‚æœé¡¹ç›®ä½¿ç”¨tkinterçš„è¯ï¼Œå°±å•ç‹¬é…ç½®ã€‚ç”±äºpython embedableæ˜¯ä¸å¸¦tkinterçš„ï¼Œè€Œä¸”æ— æ³•é€šè¿‡pipæ¥å®‰è£…ï¼Œè§£å†³æ–¹æ³•ï¼šä¸‹è½½ä¸€ä¸ªä¸python embedableç‰ˆæœ¬ç›¸åŒçš„pythonå®‰è£…åŒ…ï¼Œå®‰è£…æ—¶ä¸è¦åŠ å…¥ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœä½ ç”µè„‘ä¸Šå·²ç»æœ‰anacondaçš„è¯ï¼‰ï¼Œç„¶åå°†å®‰è£…è·¯å¾„ä¸‹çš„ä¸€äº›æ–‡ä»¶å¤åˆ¶åˆ°python embedableçš„è·¯å¾„ä¸‹</p><blockquote><p>/tcl æ‹·è´åˆ° /</p><p>/Lib/tkinter æ‹·è´åˆ° /Lib/site-packages/</p><p>/DLLs/_tkinter.pyd æ‹·è´åˆ° /</p><p>/DLLs/tcl86t.dll æ‹·è´åˆ° /</p><p>/DLLs/tk86t.dll æ‹·è´åˆ° /</p></blockquote><h3 id="æ‰“åŒ…">æ‰“åŒ…</h3><p>ç„¶åï¼æŠŠè¿™ä¸ªé…ç½®å¥½çš„embededæ–‡ä»¶ç›´æ¥æ”¾è¿›é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚æŠŠå¯åŠ¨ç¨‹åºçš„pyæ–‡ä»¶å¤´ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œå®ƒçš„ä½œç”¨æ˜¯å†™å…¥ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·å¦‚æœæœ‰è‡ªå®šä¹‰çš„åŒ…è°ƒç”¨æ‰å¯ä»¥æ‰¾å¾—åˆ°å“Ÿã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>cwd=os.getcwd()<br><span class="hljs-keyword">import</span> sys<br>sys.path.append(cwd)<br></code></pre></td></tr></tbody></table></figure><h4 id="æ–°å»º-batæ–‡ä»¶">æ–°å»º.batæ–‡ä»¶</h4><p>ä¸Šé¢æ˜¯å–æ¶ˆé»‘æ¡†å‘½ä»¤è¡Œï¼Œä¸‹é¢æ˜¯è°ƒç”¨å¯åŠ¨ç¨‹åºï¼åŒå‡»å³å¯è¿è¡Œï¼</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apl">@echo off <br>if "%1" == "h" goto begin <br>mshta vbscript:createobject("wscript.shell").run("%~nx0 h",0)(window.close)&amp;&amp;exit <br>:begin <br><br>%CD%\python_embeded\python.exe footprint.py <br></code></pre></td></tr></tbody></table></figure><h4 id="æ–°å»º-cæ–‡ä»¶">æ–°å»º.cæ–‡ä»¶</h4><p>ä½¿ç”¨systemæ¥ç”¨cè°ƒç”¨batæ–‡ä»¶ï¼Œåç»­æŠŠcç¼–è¯‘ä¸ºexeæ–‡ä»¶å¤§åŠŸå‘Šæˆå•¦ï¼</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    system(<span class="hljs-string">"footprint.bat"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="æ–°å»º-rcæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰">æ–°å»º.rcæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</h4><p>è¿™ä¸ªæ–‡ä»¶æŒ‡å®šexeçš„iconå’Œexeæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs apl">2 ICON "icon.ico"<br>1 VERSIONINFO<br>FILEVERSION     2,3,3,3<br>PRODUCTVERSION  2,3,3,3<br>FILEOS 0x4L<br>BEGIN<br>BLOCK "StringFileInfo"<br>BEGIN<br>BLOCK "080404E4"<br>BEGIN<br>VALUE "CompanyName", "hust"<br>VALUE "FileDescription", "Project General Launcher"<br>VALUE "FileVersion", "1.0"<br>VALUE "InternalName", "Launcher on Windows"<br>VALUE "LegalCopyright", "GPLv2"<br>VALUE "OriginalFilename", "è¶³è¿¹çŸ«æ­£"<br>VALUE "ProductName", "è¶³è¿¹çŸ«æ­£ä¸æ ‡æ³¨"<br>VALUE "ProductVersion", "2.3.3 build 42"<br>VALUE "Comments", "è¶³è¿¹çŸ«æ­£"<br>END<br>END<br><br>BLOCK "VarFileInfo"<br>BEGIN<br>VALUE "Translation", 0x0804, 1252<br>END<br>END<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¼–è¯‘æˆexe">ç¼–è¯‘æˆexe</h3><p>ä¸Šé¢å‘½ä»¤ä¼šç”Ÿæˆdemo.oç›®æ ‡æ–‡ä»¶ï¼Œé“¾æ¥çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªç›®æ ‡æ–‡ä»¶ç¼–è¯‘å‡ºæ¥çš„exeæ–‡ä»¶å°±æœ‰å›¾æ ‡äº†å‘€ï¼okkï¼ç»“æŸå•¦~çœŸæ˜¯è‰°è¾›â€¦</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apl">windres -i "demo.rc" -o "demo.o"<br>gcc main.c demo.o -o demo.exe<br></code></pre></td></tr></tbody></table></figure><h4 id="å®‰è£…gcc">å®‰è£…gcc</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apl">gcc -v<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæ²¡æœ‰gccçš„è¯ï¼Œå‚è€ƒè¿™è¾¹åšå®¢https://zhuanlan.zhihu.com/p/47935258<br>ç®€å•æ¥è¯´å°±æ˜¯å®‰è£…Mingwï¼Œç„¶åæ·»åŠ minge32-gcc-g++,ç‚¹å‡»apply changeå°±å¯ä»¥ä¸‹è½½</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> python-embeded </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer45 æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</title>
      <link href="/2021/12/28/leetcode/leetcode-offer45/"/>
      <url>/2021/12/28/leetcode/leetcode-offer45/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [10,2]</span><br><span class="hljs-section">è¾“å‡º: "102"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: [<span class="hljs-number">3,30,34,5</span>,<span class="hljs-number">9</span>]<br>è¾“å‡º: "<span class="hljs-number">3033459</span>"<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt; nums.length &lt;= 100</li><li>è¾“å‡ºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•°</li><li>æ‹¼æ¥èµ·æ¥çš„æ•°å­—å¯èƒ½ä¼šæœ‰å‰å¯¼ 0ï¼Œæœ€åç»“æœä¸éœ€è¦å»æ‰å‰å¯¼ 0</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ–¹æ³•ä¸»è¦æ˜¯ç”¨åˆ°è‡ªå®šä¹‰æ’åºï¼›<br>åœ¨<code>python3</code>ä¸­çš„è‡ªå®šä¹‰æ’åºè¦é‡è½½<code>functools.cmp_to_key</code>å‡½æ•°ï¼Œä½†æ˜¯è¿™é‡Œçš„è§„åˆ™æ˜¯<strong>é»˜è®¤å°çš„åœ¨å‰é¢</strong>ï¼›æ‰€ä»¥åœ¨æ¯”è¾ƒçš„æ—¶å€™é‡è½½<code>mycmp</code>æ–¹æ³•ï¼Œa,bé¡ºåºæ»¡è¶³æ¡ä»¶æ—¶è¿”å›-1(num&lt;0)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cmp_to_key</span>(<span class="hljs-params">mycmp</span>):</span><br>    <span class="hljs-string">"""Convert a cmp= function into a key= function"""</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">K</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>        __slots__ = [<span class="hljs-string">'obj'</span>]<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, obj</span>):</span><br>            self.obj = obj<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__lt__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &lt; <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__gt__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &gt; <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__eq__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) == <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__le__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &lt;= <span class="hljs-number">0</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__ge__</span>(<span class="hljs-params">self, other</span>):</span><br>            <span class="hljs-keyword">return</span> mycmp(self.obj, other.obj) &gt;= <span class="hljs-number">0</span><br>        __hash__ = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">return</span> K<br></code></pre></td></tr></tbody></table></figure><p>å¦å¤–ï¼Œç›´æ¥å°†abæ‹¼æ¥è¿›è¡Œæ¯”è¾ƒå¤§å°ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå¤§å°æ›´å¿«å“¦~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">funccmp</span>(<span class="hljs-params">a,b</span>):</span><br>            x,y = a+b,b+a<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(x)&lt;<span class="hljs-built_in">int</span>(y): <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sort_rule</span>(<span class="hljs-params">x, y</span>):</span><br>            a, b = x + y, y + x <span class="hljs-comment">#å¯ä»¥ç›´æ¥å¯¹å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œæ›´å¿«</span><br>            <span class="hljs-keyword">if</span> a &gt; b: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> a &lt; b: <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>        s = [<span class="hljs-built_in">str</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums]<br>        t = <span class="hljs-built_in">sorted</span>(s,key = functools.cmp_to_key(sort_rule))    <br>        <span class="hljs-comment">#é‡è½½æ¯”è¾ƒå‡½æ•°ï¼Œåœ¨pythonçš„é‡è½½cmp_to_keyæ—¶é»˜è®¤æ˜¯å°çš„å…ƒç´ æ’åœ¨å‰é¢ï¼Œæ‰€ä»¥åœ¨æ»¡è¶³æ¡ä»¶æ—¶è¿”å›-1ï¼Œå…¶ä»–æƒ…å†µå¤§äº-1å³å¯</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(t)<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸¤ä¸ªå‡½æ•°éœ€è¦æŒæ¡</p><ul><li><code>''.join(t)</code>å¯ä»¥ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä¸²è¿æ¥æ•°ç»„</li><li>å¯¹åˆ—è¡¨å¾ªç¯æ“ä½œåˆ›å»ºå¯ä»¥ä½¿ç”¨<code>[func(x) for x in nums]</code></li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨mapå‡½æ•° <code>list(map(func,nums))</code>æˆ–è€…lambdaå‡½æ•°<code>list(map(lambda x:...,nums))</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡leetcode14 æœ€é•¿å…¬å…±å‰ç¼€</title>
      <link href="/2021/12/26/leetcode/leetcode14/"/>
      <url>/2021/12/26/leetcode/leetcode14/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€é•¿å…¬å…±å‰ç¼€</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚</p><p>å¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² <code>""</code>ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight armasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-keyword">strs</span> = [<span class="hljs-string">"flower"</span>,<span class="hljs-string">"flow"</span>,<span class="hljs-string">"flight"</span>]<br>è¾“å‡ºï¼š<span class="hljs-string">"fl"</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight armasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-keyword">strs</span> = [<span class="hljs-string">"dog"</span>,<span class="hljs-string">"racecar"</span>,<span class="hljs-string">"car"</span>]<br>è¾“å‡ºï¼š<span class="hljs-string">""</span><br>è§£é‡Šï¼šè¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= strs.length &lt;= 200</code></li><li><code>0 &lt;= strs[i].length &lt;= 200</code></li><li><code>strs[i]</code> ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¯¹æ¯ä¸€åˆ—è¿›è¡Œæ ¸å¯¹æ˜¯å¦æ˜¯ç›¸åŒï¼Œå¦‚æœä¸æ˜¯ç›¸åŒçš„ç›´æ¥returnå‰é¢çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">longestCommonPrefix</span>(<span class="hljs-params">self, strs: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs) == <span class="hljs-number">0</span>:<br>           <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><br><br>        rows, cols = <span class="hljs-built_in">len</span>(strs), <span class="hljs-built_in">len</span>(strs[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cols):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(rows):<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs[j]) == i <span class="hljs-keyword">or</span> strs[j][i] != strs[<span class="hljs-number">0</span>][i]:<br>                    <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>][:i]<br><br>        <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer åŠ›æ‰£-21</title>
      <link href="/2021/12/23/leetcode/leetcode-21/"/>
      <url>/2021/12/23/leetcode/leetcode-21/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[1,2,4]</span>, l2 = <span class="hljs-comment">[1,3,4]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,1,2,3,4,4]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[]</span>, l2 = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š-2">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[]</span>, l2 = <span class="hljs-comment">[0]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>ä¸¤ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ [0, 50]</li><li>-100 &lt;= Node.val &lt;= 100</li><li>l1 å’Œ l2 å‡æŒ‰ éé€’å‡é¡ºåº æ’åˆ—</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡p1ï¼Œp2åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨ï¼Œé€šè¿‡æ¯”è¾ƒå¤§å°ç¡®å®špçš„nextçš„æŒ‡å‘ã€‚æœ€åå°†å‰©ä½™çš„å…ƒç´ æ·»åŠ è‡³påã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, next=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.next = next</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, list1: <span class="hljs-type">Optional</span>[ListNode], list2: <span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:</span><br>        p1,p2 = list1,list2<br>        l = ListNode()<br>        p = l<br>        <span class="hljs-keyword">while</span>(p1 <span class="hljs-keyword">and</span> p2):<br>            <span class="hljs-keyword">if</span> p1.val&lt;p2.val:<br>                p.<span class="hljs-built_in">next</span> = p1<br>                p1 = p1.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p.<span class="hljs-built_in">next</span> = p2<br>                p2 = p2.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p.<span class="hljs-built_in">next</span> = p1 <span class="hljs-keyword">if</span> p1 <span class="hljs-keyword">else</span> p2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyqtæˆªå–çª—å£</title>
      <link href="/2021/12/16/python/pyqt/pyqt-grabwindow/"/>
      <url>/2021/12/16/python/pyqt/pyqt-grabwindow/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨painterç”»ç¬”è¿›è¡Œç»˜åˆ¶ä¹‹åï¼Œéœ€è¦ä¿å­˜ç”»å¸ƒå›¾åƒã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨Qpainter p(pixmap)ï¼Œåœ¨æŒ‡å®šçš„mapä¸Šç»˜åˆ¶åä¿å­˜ï¼Œå¯æ˜¯æ­¤æ–¹æ³•æˆ‘ä¿å­˜å›¾ç‰‡æ—¶è¿˜æ˜¯åªæœ‰åŸå§‹å›¾ç‰‡ã€‚ç»˜åˆ¶çš„å›¾å½¢æ— æ³•ä¿å­˜ï¼›å¦ä¸€ç§æ–¹æ³•æ—¶æˆªå–çª—å£ä¿å­˜å›¾ç‰‡ã€‚</p></blockquote><h2 id="ä»‹ç»QScreençš„æ–¹æ³•">ä»‹ç»QScreençš„æ–¹æ³•</h2><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pqscreen  = QGuiApplication.primaryScreen()<br>pixmap2 = pqscreen.grabWindow(self.winId(), self.x0, self.y0, <span class="hljs-built_in">abs</span>(self.x1-self.x0), <span class="hljs-built_in">abs</span>(self.y1-self.y0)) <span class="hljs-comment">#æœ¬æ§ä»¶çš„id</span><br>pixmap2.save(<span class="hljs-string">'555.png'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æˆªå±çš„åŸç†ä¸»è¦è¿˜æ˜¯è¿ç”¨QScreenç±»ä¸­çš„grabWindowæ–¹æ³•ã€‚</p><h2 id="grabWindow">grabWindow</h2><p><code>QScreen.grabWindow(WId window, int x = 0, int y = 0, int width = -1, int height = -1)</code><br>å¤§è‡´æ„æ€æ˜¯åˆ›å»ºå¹¶è¿”å›é€šè¿‡æŠ“å–ç”±QRectï¼ˆxï¼Œyï¼Œwidthï¼Œheightï¼‰é™åˆ¶çš„ç»™å®šçª—å£æ„é€ çš„åƒç´ å›¾ã€‚</p><h3 id="å‚æ•°">å‚æ•°</h3><p>å‚æ•°ï¼ˆxï¼Œyï¼‰æŒ‡å®šçª—å£ä¸­çš„åç§»é‡ï¼Œè€Œï¼ˆå®½åº¦ï¼Œé«˜åº¦ï¼‰æŒ‡å®šè¦å¤åˆ¶çš„åŒºåŸŸã€‚å¦‚æœå®½åº¦ä¸ºè´Ÿæ•°ï¼Œåˆ™è¯¥å‡½æ•°å°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°çª—å£çš„å³è¾¹ç•Œã€‚å¦‚æœé«˜åº¦ä¸ºè´Ÿæ•°ï¼Œåˆ™è¯¥å‡½æ•°å°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°çª—å£çš„åº•éƒ¨ã€‚</p><h3 id="Wid">Wid</h3><p>çª—å£ç³»ç»Ÿæ ‡è¯†ç¬¦ï¼ˆWIdï¼‰å¯ä»¥ä½¿ç”¨QWidget.winIdï¼ˆï¼‰å‡½æ•°è¿›è¡Œæ£€ç´¢ã€‚grabWindowï¼ˆï¼‰å‡½æ•°ä»å±å¹•æŠ“å–åƒç´ ï¼Œè€Œä¸æ˜¯ä»çª—å£æŠ“å–åƒç´ ï¼Œå³ï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªçª—å£éƒ¨åˆ†æˆ–å…¨éƒ¨è¦†ç›–æŠ“å–çš„åƒç´ ï¼Œåˆ™ä¹Ÿä¼šä»ä¸Šé¢çš„çª—å£è·å–åƒç´ ã€‚é¼ æ ‡å…‰æ ‡ä¸€èˆ¬ä¸ä¼šè¢«æŠ“å–ã€‚</p><p>å¦‚æœæ˜¯å±å¹•æˆªå›¾ï¼šidä¸º<code>QtWidgets.QApplication.desktop().winId()</code></p><h2 id="æºä»£ç å®ç°">æºä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python</span><br><span class="hljs-keyword">from</span> PyQt5 <span class="hljs-keyword">import</span> QtCore, QtWidgets,QtGui<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Screenshot</span>(<span class="hljs-params">QtWidgets.QWidget</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(Screenshot, self).__init__()<br>        self.screenshotLabel = QtWidgets.QLabel()<br>        self.screenshotLabel.setSizePolicy(QtWidgets.QSizePolicy.Expanding,<br>                QtWidgets.QSizePolicy.Expanding)<br>        self.screenshotLabel.setAlignment(QtCore.Qt.AlignCenter)<br>        self.screenshotLabel.setMinimumSize(<span class="hljs-number">240</span>, <span class="hljs-number">160</span>)<br>        self.createOptionsGroupBox()<br>        self.createButtonsLayout()<br>        mainLayout = QtWidgets.QVBoxLayout()<br>        mainLayout.addWidget(self.screenshotLabel)<br>        mainLayout.addWidget(self.optionsGroupBox)<br>        mainLayout.addLayout(self.buttonsLayout)<br>        self.setLayout(mainLayout)<br>        self.shootScreen()<br>        self.delaySpinBox.setValue(<span class="hljs-number">0</span>)<span class="hljs-comment">#å»¶è¿Ÿå¤šå°‘ç§’åæˆªå±</span><br>        self.setWindowTitle(<span class="hljs-string">"Screenshot"</span>)<br>        self.resize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resizeEvent</span>(<span class="hljs-params">self, event</span>):</span><br>        scaledSize = self.originalPixmap.size()<br>        scaledSize.scale(self.screenshotLabel.size(), QtCore.Qt.KeepAspectRatio)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.screenshotLabel.pixmap() <span class="hljs-keyword">or</span> scaledSize != self.screenshotLabel.pixmap().size():<br>            self.updateScreenshotLabel()<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newScreenshot</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.hideThisWindowCheckBox.isChecked():<br>            self.hide()<br>        self.newScreenshotButton.setDisabled(<span class="hljs-literal">True</span>)<br>        QtCore.QTimer.singleShot(self.delaySpinBox.value() * <span class="hljs-number">1000</span>,<br>                self.shootScreen)<br>                <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">saveScreenshot</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">format</span> = <span class="hljs-string">'png'</span><br>        initialPath = QtCore.QDir.currentPath() + <span class="hljs-string">"/untitled."</span> + <span class="hljs-built_in">format</span><br>        fileName,filetype = QtWidgets.QFileDialog.getSaveFileName(self, <span class="hljs-string">"Save As"</span>,<br>                initialPath,<br>                <span class="hljs-string">"%s Files (*.%s);;All Files (*)"</span> % (<span class="hljs-built_in">format</span>.upper(), <span class="hljs-built_in">format</span>))<br>        <span class="hljs-keyword">if</span> fileName:<br>            self.originalPixmap.save(fileName, <span class="hljs-built_in">format</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"file saved as  %s"</span> % fileName)<br>           <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shootScreen</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.delaySpinBox.value() != <span class="hljs-number">0</span>:<br>            QtWidgets.qApp.beep()<br>        <span class="hljs-comment"># Garbage collect any existing image first.</span><br>        self.originalPixmap = <span class="hljs-literal">None</span><br>        <span class="hljs-comment">#self.originalPixmap = QtGui.QPixmap.grabWindow(QtWidgets.QApplication.desktop().winId())#PyQt4</span><br>       <br>        screen= QtWidgets.QApplication.primaryScreen()<span class="hljs-comment">#PyQt5</span><br>        self.originalPixmap = screen.grabWindow(QtWidgets.QApplication.desktop().winId())<span class="hljs-comment">#PyQt5</span><br>       <br>        self.updateScreenshotLabel()<br>        self.newScreenshotButton.setDisabled(<span class="hljs-literal">False</span>)<br>        <span class="hljs-keyword">if</span> self.hideThisWindowCheckBox.isChecked():<br>            self.show()<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">updateCheckBox</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.delaySpinBox.value() == <span class="hljs-number">0</span>:<br>            self.hideThisWindowCheckBox.setDisabled(<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self.hideThisWindowCheckBox.setDisabled(<span class="hljs-literal">False</span>)<br>            <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createOptionsGroupBox</span>(<span class="hljs-params">self</span>):</span><br>        self.optionsGroupBox = QtWidgets.QGroupBox(<span class="hljs-string">"Options"</span>)<br>        self.delaySpinBox = QtWidgets.QSpinBox()<br>        self.delaySpinBox.setSuffix(<span class="hljs-string">" s"</span>)<br>        self.delaySpinBox.setMaximum(<span class="hljs-number">60</span>)<br>        self.delaySpinBox.valueChanged.connect(self.updateCheckBox)<br>        self.delaySpinBoxLabel = QtWidgets.QLabel(<span class="hljs-string">"Screenshot Delay:"</span>)<br>        self.hideThisWindowCheckBox = QtWidgets.QCheckBox(<span class="hljs-string">"Hide This Window"</span>)<br>        optionsGroupBoxLayout = QtWidgets.QGridLayout()<br>        optionsGroupBoxLayout.addWidget(self.delaySpinBoxLabel, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        optionsGroupBoxLayout.addWidget(self.delaySpinBox, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>        optionsGroupBoxLayout.addWidget(self.hideThisWindowCheckBox, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>        self.optionsGroupBox.setLayout(optionsGroupBoxLayout)<br>        <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createButtonsLayout</span>(<span class="hljs-params">self</span>):</span><br>        self.newScreenshotButton = self.createButton(<span class="hljs-string">"New Screenshot"</span>,<br>                self.newScreenshot)<br>        self.saveScreenshotButton = self.createButton(<span class="hljs-string">"Save Screenshot"</span>,<br>                self.saveScreenshot)<br>        self.quitScreenshotButton = self.createButton(<span class="hljs-string">"Quit"</span>, self.close)<br>        self.buttonsLayout = QtWidgets.QHBoxLayout()<br>        self.buttonsLayout.addStretch()<br>        self.buttonsLayout.addWidget(self.newScreenshotButton)<br>        self.buttonsLayout.addWidget(self.saveScreenshotButton)<br>        self.buttonsLayout.addWidget(self.quitScreenshotButton)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createButton</span>(<span class="hljs-params">self, text, member</span>):</span><br>        button = QtWidgets.QPushButton(text)<br>        button.clicked.connect(member)<br>        <span class="hljs-keyword">return</span> button<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">updateScreenshotLabel</span>(<span class="hljs-params">self</span>):</span><br>        self.screenshotLabel.setPixmap(self.originalPixmap.scaled(<br>                self.screenshotLabel.size(), QtCore.Qt.KeepAspectRatio,<br>                QtCore.Qt.SmoothTransformation))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<br>    <span class="hljs-keyword">import</span> sys<br>    app = QtWidgets.QApplication(sys.argv)<br>    screenshot = Screenshot()<br>    screenshot.show()<br>    sys.exit(app.exec_())<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> pyqt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pyqt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ‹¬å·</title>
      <link href="/2021/12/15/python/re/re-bracket/"/>
      <url>/2021/12/15/python/re/re-bracket/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å„ç§æ‹¬å·ï¼Œä¸»è¦æ˜¯å°æ‹¬å·ï¼Œæ–¹æ‹¬å·ï¼Œå¤§æ‹¬å·çš„åŒºåˆ«ã€‚</p></blockquote><h2 id="å°æ‹¬å·">å°æ‹¬å·</h2><p>å°æ‹¬å·ï¼ˆï¼‰ï¼šå¤šä¸ªåŒ¹é…ï¼Œ<strong>å°†æ‹¬å·ä¸­çš„å†…å®¹ä½œä¸ºä¸€ç»„æ¥å¤„ç†</strong>ï¼Œé™åˆ¶å¤šé€‰çš„èŒƒå›´ã€‚è­¬å¦‚<code>*.(png|jpg)</code>å¯æ ‡è¯†æœ«å°¾ä¸ºpngï¼Œjpgç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œåªèƒ½æ˜¯pngæˆ–è€…jpgï¼Œå°†æ‹¬å·ä¸­å†…å®¹ä½œä¸ºä¸€ç»„ã€‚</p><h2 id="æ–¹æ‹¬å·">æ–¹æ‹¬å·</h2><p>æ–¹æ‹¬å·ã€ã€‘ï¼šæ–¹æ‹¬å·æ˜¯<strong>å•ä¸ªåŒ¹é…</strong>ï¼Œæ¯”å¦‚[abc]çš„å«ä¹‰æ˜¯åŒ¹é…abcå…¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸æ˜¯ä½œä¸ºä¸€ç»„ï¼›<br>å¸¸è§çš„ç”¨æ³•ï¼š[a-zA-Z0-9]å¯ä»¥åŒ¹é…æ‰€æœ‰è‹±æ–‡å­—æ¯å’Œæ•°å­—ã€‚</p><h2 id="å¤§æ‹¬å·">å¤§æ‹¬å·</h2><p>å¤§æ‹¬å·{}ï¼šå¤§æ‹¬å·çš„ç”¨æ³•æ˜¯å¡«å…¥æ•°å­—ï¼Œ<strong>è¡¨ç¤ºåŒ¹é…æ¬¡æ•°</strong>ï¼Œä»–éœ€è¦å’Œå…¶ä»–æœ‰æ„ä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ã€‚<br>æ¯”å¦‚</p><ul><li>[a-c]{2} : å«ä¹‰æ˜¯åŒ¹é…aåˆ°cä¹‹é—´çš„ä¸€ä¸ªå­—æ¯å‡ºç°åŒæ—¶è‡³å‡ºç°ä¸¤æ¬¡ï¼›</li><li>(com){1}: å«ä¹‰æ˜¯åŒ¹é…å‡ºç°ä¸€æ¬¡çš„comï¼›</li><li>\W{1,3}: å«ä¹‰æ˜¯éå­—æ¯æ•°å­—çš„å­—ç¬¦æœ€å°‘å‡ºç°1æ¬¡ï¼Œæœ€å¤šå‡ºç°3æ¬¡ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¸²å‡ºç°æ­¤ç±»å­—ç¬¦çš„ä¸ªæ•°ä¹Ÿå°±æ˜¯1åˆ°3æ¬¡ï¼›</li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> re </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†å›¾åƒä¿å­˜è‡³Wordä¸­</title>
      <link href="/2021/12/10/python/img/imageTodocx/"/>
      <url>/2021/12/10/python/img/imageTodocx/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆ©ç”¨pythonï¼Œå‘Wordä¸­ä¿å­˜ä¿¡æ¯ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®°å½•å¯¹å›¾åƒçš„ä¿å­˜ï¼›</p></blockquote><h2 id="æŒ‰ç…§python-docx">æŒ‰ç…§python-docx</h2><p>python-docx is a Python library for creating and updating Microsoft Word (.docx) files.</p><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> python-docx<br></code></pre></td></tr></tbody></table></figure><h2 id="æ–‡æ¡£ç›¸å…³æ“ä½œ">æ–‡æ¡£ç›¸å…³æ“ä½œ</h2><h3 id="æ’å…¥å›¾ç‰‡">æ’å…¥å›¾ç‰‡</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥æ¨¡å—</span><br><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document<br><span class="hljs-comment"># æ­¤æ¨¡å—ä¸­åŒ…å« docx ä¸­å„ç±»å•ä½æ–¹æ³•</span><br><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> shared<br><br>doc = Document()<br>doc.add_heading(<span class="hljs-string">'python-docx åŸºç¡€è®²è§£ï¼ˆäºŒï¼‰'</span>)<br><br><span class="hljs-comment"># åœ¨æ–‡æ¡£ä¸­å¢åŠ å›¾ç‰‡,å¹¶å¯¹è®¾ç½®å›¾ç‰‡å¤§å°</span><br><span class="hljs-comment"># å½“åªè®¾ç½®ä¸€ä¸ªæ–¹å‘çš„é•¿åº¦ï¼ˆå®½æˆ–é«˜ï¼‰æ—¶ï¼Œå¦ä¸€æ–¹å‘ä¼šè‡ªåŠ¨ç¼©æ”¾</span><br>doc.add_picture(<span class="hljs-string">'1.png'</span>,width=shared.Inches(<span class="hljs-number">1</span>))  <span class="hljs-comment"># æŒ‰è‹±å¯¸è®¾ç½®</span><br>doc.add_picture(<span class="hljs-string">'1.png'</span>,height=shared.Cm(<span class="hljs-number">2</span>))  <span class="hljs-comment"># æŒ‰å˜ç±³è®¾ç½®</span><br><span class="hljs-comment">#ä¹Ÿå¯ä»¥æŒ‰ç…§æ¯«ç±³è®¾ç½®shared.Mm(2)</span><br><br><span class="hljs-comment"># ä¿å­˜æ–‡ä»¶</span><br>doc.save(<span class="hljs-string">'test2.docx'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="é¡µé¢å¤§å°è®¾ç½®">é¡µé¢å¤§å°è®¾ç½®</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document <span class="hljs-comment"># å¯¼å…¥docxåŒ…</span><br><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Cm, Inches, Pt <span class="hljs-comment"># å¯¼å…¥å•ä½æ¢ç®—å‡½æ•°</span><br>document = Document() <span class="hljs-comment"># æ–°å»ºwordæ–‡æ¡£</span><br>section = document.sections[<span class="hljs-number">0</span>] <span class="hljs-comment"># è·å–sectionå¯¹è±¡</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">'é»˜è®¤é¡µé¢çš„å®½åº¦å’Œé«˜åº¦ï¼š'</span>, section.page_width.cm,<br>section.page_height.cm) <span class="hljs-comment"># æ‰“å°é»˜è®¤é¡µé¢å®½åº¦å’Œé«˜åº¦</span><br>section.page_width = Cm(<span class="hljs-number">40</span>)<br>section.page_height = Cm(<span class="hljs-number">40</span>)<br><br><span class="hljs-comment">#A3çº¸çš„æ ¼å¼æ˜¯297*420mm</span><br></code></pre></td></tr></tbody></table></figure><h2 id="å…¶ä»–åŠŸèƒ½">å…¶ä»–åŠŸèƒ½</h2><h3 id="æ‰“å¼€æ–‡æ¡£">æ‰“å¼€æ–‡æ¡£</h3><p>ä½ éœ€è¦çš„ç¬¬ä¸€ä»¶äº‹æ˜¯å·¥ä½œçš„æ–‡æ¡£ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx <span class="hljs-keyword">import</span> Document<br>document = Document()<br></code></pre></td></tr></tbody></table></figure><p>è¿™å°†æ‰“å¼€ä¸€ä¸ªåŸºäºé»˜è®¤â€œæ¨¡æ¿â€çš„ç©ºç™½æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥æ‰“å¼€å¹¶ä½¿ç”¨ç°æœ‰çš„Wordæ–‡æ¡£çš„å·¥ä½œ<code>python-docx</code>ï¼Œæˆ‘ä»¬ä¼šè®©äº‹æƒ…å˜å¾—ç®€å•ã€‚</p><h3 id="å¢åŠ ä¸€æ®µ">å¢åŠ ä¸€æ®µ</h3><p>æ®µè½æ˜¯Wordçš„åŸºç¡€ã€‚å®ƒä»¬ç”¨äºæ­£æ–‡æ–‡æœ¬ï¼Œä½†ä¹Ÿç”¨äºæ ‡é¢˜å’Œåˆ—è¡¨é¡¹ç›®ï¼ˆå¦‚é¡¹ç›®ç¬¦å·ï¼‰ã€‚</p><p>è¿™é‡Œæ˜¯æ·»åŠ ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">paragraph = document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ–¹æ³•è¿”å›å¯¹æ®µè½çš„å¼•ç”¨ï¼Œæ–°æ·»åŠ çš„æ®µè½åœ¨æ–‡æ¡£çš„ç»“å°¾ã€‚æ–°çš„æ®µè½å¼•ç”¨è¢«åˆ†é…ç»™<code>paragraph</code> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å°†è¦ç¦»å¼€äº†è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œé™¤éæˆ‘æœ‰ä¸€ä¸ªéœ€è¦å®ƒã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œé€šå¸¸ä½ ä¸ä¼šå¯¹é¡¹ç›®åšä»»ä½•äº‹æƒ…ï¼Œåœ¨æ·»åŠ å®ƒï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œä¿æŒå¼•ç”¨å®ƒæŒ‚åœ¨å‘¨å›´ã€‚</p><p>è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ®µè½ä½œä¸ºâ€œå…‰æ ‡â€ï¼Œå¹¶åœ¨å…¶ä¸Šç›´æ¥æ’å…¥ä¸€ä¸ªæ–°æ®µè½ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">prior_paragraph = paragraph.insert_paragraph_before(<span class="hljs-string">'Lorem ipsum'</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¿™å…è®¸å°†ä¸€ä¸ªæ®µè½æ’å…¥åˆ°æ–‡æ¡£çš„ä¸­é—´ï¼Œè¿™åœ¨ä¿®æ”¹ç°æœ‰æ–‡æ¡£æ—¶é€šå¸¸å¾ˆé‡è¦ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ç”Ÿæˆã€‚</p><h3 id="æ·»åŠ æ ‡é¢˜">æ·»åŠ æ ‡é¢˜</h3><p>åœ¨é™¤äº†æœ€çŸ­æ–‡æ¡£ä¹‹å¤–çš„ä»»ä½•å†…å®¹ä¸­ï¼Œæ­£æ–‡æ–‡æœ¬è¢«åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ä¸€ä¸ªæ ‡é¢˜å¼€å§‹ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æ·»åŠ ä¸€ä¸ªï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_heading(<span class="hljs-string">'The REAL meaning of the universe'</span>)<br></code></pre></td></tr></tbody></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¼šæ·»åŠ é¡¶çº§æ ‡é¢˜ï¼ŒWordä¸­æ˜¾ç¤ºä¸ºâ€œæ ‡é¢˜1â€ã€‚å½“æ‚¨éœ€è¦å­èŠ‚çš„æ ‡é¢˜æ—¶ï¼Œåªéœ€æŒ‡å®šæ‰€éœ€çš„çº§åˆ«ä¸º1åˆ°9ä¹‹é—´çš„æ•´æ•°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_heading(<span class="hljs-string">'The role of dolphins'</span>, level=<span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæŒ‡å®šçº§åˆ«0ï¼Œå°†æ·»åŠ â€œæ ‡é¢˜â€æ®µè½ã€‚è¿™å¯ä»¥æ–¹ä¾¿åœ°å¯åŠ¨ä¸€ä¸ªç›¸å¯¹è¾ƒçŸ­çš„æ–‡æ¡£ï¼Œæ²¡æœ‰å•ç‹¬çš„æ ‡é¢˜é¡µã€‚</p><h3 id="æ·»åŠ åˆ†é¡µç¬¦">æ·»åŠ åˆ†é¡µç¬¦</h3><p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œä½ æƒ³è¦ä¸‹ä¸€ä¸ªæ–‡æœ¬åœ¨ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼Œå³ä½¿ä½ æ‰€åœ¨çš„ä¸€ä¸ªä¸æ˜¯æ»¡çš„ã€‚â€œhardâ€åˆ†é¡µç¬¦å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_page_break()<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœä½ å‘ç°è‡ªå·±ç»å¸¸ä½¿ç”¨å®ƒï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œä½ å¯ä»¥é€šè¿‡æ›´å¥½åœ°äº†è§£æ®µè½æ ·å¼å—ç›Šã€‚å¯è®¾ç½®çš„ä¸€ä¸ªæ®µè½æ ·å¼å±æ€§æ˜¯åœ¨åŒ…å«è¯¥æ ·å¼çš„æ¯ä¸ªæ®µè½ä¹‹å‰ç«‹å³æ–­å¼€é¡µé¢ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥å°†æ ‡é¢˜è®¾ç½®ä¸ºæŸä¸ªçº§åˆ«ï¼Œä»¥ä¾¿å§‹ç»ˆå¯åŠ¨æ–°é¡µé¢ã€‚æ›´å¤šé£æ ¼åã€‚å®ƒä»¬å¯¹äºçœŸæ­£å……åˆ†åˆ©ç”¨Wordè‡³å…³é‡è¦ã€‚</p><h3 id="æ·»åŠ è¡¨">æ·»åŠ è¡¨</h3><p>ä¸€ä¸ªç»å¸¸é‡åˆ°çš„å†…å®¹ï¼Œå®ƒè‡ªå·±çš„è¡¨æ ¼å‘ˆç°ï¼Œæ’åˆ—åœ¨æ•´é½çš„è¡Œå’Œåˆ—ã€‚Wordåœ¨è¿™æ–¹é¢åšå¾—ç›¸å½“ä¸é”™ã€‚ä»¥ä¸‹æ˜¯æ·»åŠ è¡¨æ ¼çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">table = document.add_table(rows=<span class="hljs-number">2</span>, cols=<span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¡¨å…·æœ‰å‡ ä¸ªå±æ€§å’Œæ–¹æ³•ï¼Œæ‚¨å°†éœ€è¦å®ƒä»¬æ¥å¡«å……å®ƒä»¬ã€‚è®¿é—®å•ä¸ªå•å…ƒæ ¼å¯èƒ½æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹çš„åœ°æ–¹ã€‚ä½œä¸ºåŸºçº¿ï¼Œæ‚¨å¯ä»¥å§‹ç»ˆæŒ‰å…¶è¡Œå’Œåˆ—æŒ‡ç¤ºè®¿é—®å•å…ƒæ ¼ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cell = table.cell(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">#æ ¹æ®è¡Œåˆ—æŒ‡å®š</span><br></code></pre></td></tr></tbody></table></figure><p>è¿™å°±ç»™å‡ºäº†æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„è¡¨æ ¼æœ€ä¸Šé¢ä¸€è¡Œçš„å³è¾¹å•å…ƒæ ¼ã€‚æ³¨æ„ï¼Œè¡Œå’Œåˆ—æŒ‡ç¤ºæ˜¯åŸºäºé›¶çš„ï¼Œå°±åƒåœ¨åˆ—è¡¨è®¿é—®ä¸­ä¸€æ ·ã€‚</p><p>ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥æŠŠä¸œè¥¿åœ¨å®ƒï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">cell.text = <span class="hljs-string">'parrot, possibly dead'</span><br></code></pre></td></tr></tbody></table></figure><p>é€šå¸¸ï¼Œä¸€æ¬¡è®¿é—®ä¸€è¡Œå•å…ƒæ ¼æ›´å®¹æ˜“ï¼Œä¾‹å¦‚ï¼Œå½“ä»æ•°æ®æºå¡«å……å¯å˜é•¿åº¦çš„è¡¨æ—¶ã€‚åœ¨<code>.rows</code> ä¸€ä¸ªè¡¨ä¸­çš„å±æ€§æä¾›ç»™å•ç‹¬çš„è¡Œï¼Œæ¯ä¸ªéƒ½å…·æœ‰ä¸€ä¸ª <code>.cells</code>å±æ€§ã€‚è¯¥<code>.cells</code>ä¸¤ä¸ªç‰©ä¸š<code>Row</code>å’Œ<code>Column</code> æ”¯æŒç´¢å¼•è®¿é—®ï¼Œå°±åƒä¸€ä¸ªåˆ—è¡¨ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">row = table.rows[<span class="hljs-number">1</span>]<br>row.cells[<span class="hljs-number">0</span>].text = <span class="hljs-string">'Foo bar to you.'</span><br>row.cells[<span class="hljs-number">1</span>].text = <span class="hljs-string">'And a hearty foo bar to you too sir!'</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨<code>.rows</code>å’Œ<code>.columns</code>æ¡Œå­ä¸Šçš„é›†åˆæ˜¯å¯è¿­ä»£çš„ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨ä½¿ç”¨å®ƒä»¬<code>for</code>å¾ªç¯ã€‚ç›¸åŒçš„<code>.cells</code>ä¸Šè¡Œæˆ–åˆ—åºåˆ—ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> table.rows:<br>    <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> row.cells:<br>        <span class="hljs-built_in">print</span>(cell.text)<br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœä½ æƒ³åœ¨è¡¨ä¸­çš„è¡Œæˆ–åˆ—çš„è®¡æ•°ï¼Œåªè¦ä½¿ç”¨<code>len()</code>çš„é¡ºåºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">row_count = <span class="hljs-built_in">len</span>(table.rows)<br>col_count = <span class="hljs-built_in">len</span>(table.columns)<br></code></pre></td></tr></tbody></table></figure><p>æ‚¨è¿˜å¯ä»¥ä»¥é€’å¢æ–¹å¼å‘è¡¨ä¸­æ·»åŠ è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">row = table.add_row()<br></code></pre></td></tr></tbody></table></figure><p>è¿™å¯¹äºæˆ‘ä»¬ä¸Šé¢æåˆ°çš„å¯å˜é•¿åº¦è¡¨åœºæ™¯éå¸¸æ–¹ä¾¿ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># get table data -------------</span><br>items = get_things_from_database_or_something()<br> <br><span class="hljs-comment"># add table ------------------</span><br>table = document.add_table(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br> <br><span class="hljs-comment"># populate header row --------</span><br>heading_cells = table.rows[<span class="hljs-number">0</span>].cells<br>heading_cells[<span class="hljs-number">0</span>].text = <span class="hljs-string">'Qty'</span><br>heading_cells[<span class="hljs-number">1</span>].text = <span class="hljs-string">'SKU'</span><br>heading_cells[<span class="hljs-number">2</span>].text = <span class="hljs-string">'Description'</span><br> <br><span class="hljs-comment"># add a data row for each item</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:<br>    cells = table.add_row().cells<br>    cells[<span class="hljs-number">0</span>].text = <span class="hljs-built_in">str</span>(item.qty)<br>    cells[<span class="hljs-number">1</span>].text = item.sku<br>    cells[<span class="hljs-number">2</span>].text = item.desc<br></code></pre></td></tr></tbody></table></figure><p>åŒæ ·çš„å·¥ä½œå¯¹åˆ—ï¼Œè™½ç„¶æˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°å®ƒçš„ä¸€ä¸ªç”¨ä¾‹ã€‚</p><p>Wordå…·æœ‰ä¸€ç»„é¢„æ ¼å¼åŒ–çš„è¡¨æ ¼æ ·å¼ï¼Œæ‚¨å¯ä»¥ä»å…¶è¡¨æ ¼æ ·å¼åº“ä¸­é€‰æ‹©ã€‚æ‚¨å¯ä»¥å°†å…¶ä¸­çš„ä¸€ä¸ªåº”ç”¨äºè¡¨æ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">table.style = <span class="hljs-string">'LightShading-Accent1'</span><br></code></pre></td></tr></tbody></table></figure><p>é€šè¿‡ä»è¡¨æ ·å¼åç§°ä¸­åˆ é™¤æ‰€æœ‰ç©ºæ ¼å½¢æˆæ ·å¼åç§°ã€‚é€šè¿‡å°†é¼ æ ‡æ‚¬åœåœ¨Wordçš„è¡¨æ ·å¼åº“ä¸­çš„ç¼©ç•¥å›¾ä¸Šï¼Œå¯ä»¥æ‰¾åˆ°è¡¨æ ·å¼åç§°ã€‚</p><h3 id="æ·»åŠ å›¾ç‰‡">æ·»åŠ å›¾ç‰‡</h3><p>Wordä¸­ï¼Œæ‚¨å¯ä»¥å°†å›¾åƒä½¿ç”¨çš„æ–‡æ¡£ä¸­çš„èœå•é¡¹ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼š<code>Insert &gt; Photo &gt; Picture fromfile...``python-docx</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_picture(<span class="hljs-string">'image-filename.png'</span>)<br></code></pre></td></tr></tbody></table></figure><p>æ­¤ç¤ºä¾‹ä½¿ç”¨è·¯å¾„ï¼Œä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½å›¾åƒæ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<em>ç±»æ–‡ä»¶å¯¹è±¡</em>ï¼Œæœ¬è´¨ä¸Šå°±åƒä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶çš„ä»»ä½•å¯¹è±¡ã€‚å¦‚æœæ‚¨ä»æ•°æ®åº“æˆ–ç½‘ç»œæ£€ç´¢å›¾åƒï¼Œå¹¶ä¸”ä¸æƒ³è·å–æ¶‰åŠçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™å¯èƒ½å¾ˆæ–¹ä¾¿ã€‚</p><h4 id="å›¾åƒå¤§å°">å›¾åƒå¤§å°</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ·»åŠ å›¾åƒå‡ºç°åœ¨<em>æœ¬åœ°</em>çš„å¤§å°ã€‚è¿™é€šå¸¸æ¯”ä½ æƒ³è¦çš„æ›´å¤§ã€‚æœ¬æœºå¤§å°çš„è®¡ç®—æ–¹æ³•ã€‚å› æ­¤ï¼Œå…·æœ‰300dpiåˆ†è¾¨ç‡çš„300Ã—300åƒç´ å›¾åƒå‡ºç°åœ¨ä¸€å¹³æ–¹è‹±å¯¸ã€‚é—®é¢˜æ˜¯å¤§å¤šæ•°å›¾åƒä¸åŒ…å«dpiå±æ€§ï¼Œå®ƒé»˜è®¤ä¸º72 dpiã€‚è¿™å°†ä½¿åŒä¸€å›¾åƒåœ¨ä¸€è¾¹ï¼Œåœ¨ä¸€åŠå·¦å³çš„æŸå¤„å‡ºç°4.167è‹±å¯¸ã€‚<code>pixels / dpi</code></p><p>è¦è·å¾—æ‰€éœ€çš„å›¾åƒå¤§å°ï¼Œæ‚¨å¯ä»¥ä»¥æ–¹ä¾¿çš„å•ä½æŒ‡å®šå…¶å®½åº¦æˆ–é«˜åº¦ï¼Œå¦‚è‹±å¯¸æˆ–å˜ç±³ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> docx.shared <span class="hljs-keyword">import</span> Inches<br>document.add_picture(<span class="hljs-string">'image-filename.png'</span>, width=Inches(<span class="hljs-number">1.0</span>))<br></code></pre></td></tr></tbody></table></figure><p>ä½ å¯ä»¥è‡ªç”±åœ°æŒ‡å®šå®½åº¦å’Œé«˜åº¦ï¼Œä½†é€šå¸¸ä½ ä¸æƒ³è¦ã€‚å¦‚æœä»…æŒ‡å®šä¸€ä¸ªï¼Œ<code>python-docx</code>ç”¨å®ƒæ¥è®¡ç®—å‡ºå…¶ä»–çš„é€‚å½“æ¢ç®—å€¼ã€‚è¿™æ ·çš„<em>é«˜å®½æ¯”</em>æ˜¯ä¿ç•™çš„ï¼Œä½ çš„å›¾åƒçœ‹èµ·æ¥ä¸æ‹‰ä¼¸ã€‚</p><p>åœ¨<code>Inches</code>å’Œ<code>Cm</code>æä¾›è¯¾ç¨‹ï¼Œè®©ä½ æŒ‡å®šæ´¾ä¸Šç”¨åœºå•ä½è¿›è¡Œæµ‹é‡ã€‚åœ¨å†…éƒ¨ï¼Œ<code>python-docx</code>ä½¿ç”¨è‹±è¯­å…¬åˆ¶å•ä½ï¼Œ914400ä¸ºè‹±å¯¸ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¿˜è®°äº†ï¼Œåªæ˜¯æŠŠå–œæ¬¢çš„ä¸œè¥¿<code>width=2</code>ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªéå¸¸å°çš„å›¾åƒ:)ã€‚ä½ éœ€è¦ä»å¯¼å…¥<code>docx.shared</code> å­åŒ…ã€‚ä½ å¯ä»¥åœ¨ç®—æœ¯ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå°±åƒå®ƒä»¬æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œäº‹å®ä¸Šå®ƒä»¬æ˜¯ã€‚å› æ­¤ï¼Œåƒä¸€ä¸ªè¡¨è¾¾å¼çš„ä½œå“å°±å¥½äº†ã€‚<code>width = Inches(3) /thing_count</code></p><h3 id="åº”ç”¨æ®µè½æ ·å¼">åº”ç”¨æ®µè½æ ·å¼</h3><p>å¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªWordæ®µè½é£æ ¼æ˜¯ä½ åº”è¯¥è‚¯å®šæ£€æŸ¥å‡ºæ¥ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒå…è®¸æ‚¨å°†ä¸€æ•´å¥—æ ¼å¼åŒ–é€‰é¡¹ç«‹å³åº”ç”¨åˆ°æ®µè½ã€‚è¿™å¾ˆåƒCSSæ ·å¼ï¼Œå¦‚æœä½ çŸ¥é“é‚£äº›æ˜¯ã€‚</p><p>æ‚¨å¯ä»¥åœ¨åˆ›å»ºæ®µè½æ—¶åº”ç”¨æ®µè½æ ·å¼ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>, style=<span class="hljs-string">'ListBullet'</span>)<br></code></pre></td></tr></tbody></table></figure><p>è¿™ç§ç‰¹æ®Šçš„é£æ ¼å¯¼è‡´æ®µè½æ˜¾ç¤ºä¸ºä¸€ä¸ªå­å¼¹ï¼Œä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„ä¸œè¥¿ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ä¹‹ååº”ç”¨æ ·å¼ã€‚è¿™ä¸¤è¡Œç›¸å½“äºä¸Šé¢çš„ä¸€è¡Œï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">paragraph = document.add_paragraph(<span class="hljs-string">'Lorem ipsum dolor sit amet.'</span>)<br>paragraph.style = <span class="hljs-string">'ListBullet'</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ ·å¼ä½¿ç”¨å…¶æ ·å¼IDâ€œListBulletâ€æŒ‡å®šã€‚é€šå¸¸ï¼Œé€šè¿‡å»é™¤æ ·å¼åç§°ä¸­å‡ºç°åœ¨Wordç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ä¸­çš„ç©ºæ ¼æ¥å½¢æˆæ ·å¼IDã€‚æ‰€ä»¥é£æ ¼â€™åˆ—è¡¨3å·â€™å°†è¢«æŒ‡å®šä¸º<code>'ListNumber3'</code>ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æœ¬åœ°åŒ–ç‰ˆæœ¬çš„Wordï¼Œåˆ™æ ·å¼IDå¯èƒ½æ¥è‡ªè‹±è¯­æ ·å¼åç§°ï¼Œå¹¶ä¸”å¯èƒ½ä¸ä¼šå®Œå…¨å¯¹åº”äºå…¶åœ¨Word UIä¸­çš„æ ·å¼åç§°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> å›¾åƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer2_085 ç”ŸæˆåŒ¹é…çš„æ‹¬å·</title>
      <link href="/2021/12/09/leetcode/leetcode-offer2-085/"/>
      <url>/2021/12/09/leetcode/leetcode-offer2-085/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”ŸæˆåŒ¹é…çš„æ‹¬å·</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ­£æ•´æ•° <code>n</code> ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” <strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"((()))"</span>,<span class="hljs-string">"(()())"</span>,<span class="hljs-string">"(())()"</span>,<span class="hljs-string">"()(())"</span>,<span class="hljs-string">"()()()"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"()"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= n &lt;= 8</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å·§å¦™çš„æ·±åº¦ä¼˜å…ˆç®—æ³•ï¼Œè®°å½•ç”Ÿæˆå½“å‰çš„å­—ç¬¦ä¸²ï¼Œå·¦æ‹¬å·ï¼Œå³æ‹¬å·çš„æ•°ç›®ï¼›<br>å¦‚æœå·¦æ‹¬å·ä¸ªæ•°ä¸è¶…ï¼Œå°±å¢åŠ å·¦æ‹¬å·ï¼Œå¦‚æœå¯ä»¥å¢åŠ å³æ‹¬å·ï¼ˆ<strong>ç°æœ‰çš„å³æ‹¬å·å°äºå·¦æ‹¬å·æ•°ç›®</strong>ï¼‰ï¼Œé‚£ä¹ˆå¢åŠ å³æ‹¬å·ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateParenthesis</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">s,left,right</span>):</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)==<span class="hljs-number">2</span>*n):<br>                result.append(s)<br>            <span class="hljs-keyword">if</span>(left&lt;n):dfs(s+<span class="hljs-string">"("</span>,left+<span class="hljs-number">1</span>,right) <span class="hljs-comment">#å¦‚æœleftæ•°ç»„å°‘äºnä¸ªå°±å¢åŠ å·¦æ‹¬å·</span><br>            <span class="hljs-keyword">if</span>(left&gt;right):dfs(s+<span class="hljs-string">")"</span>,left,right+<span class="hljs-number">1</span>) <span class="hljs-comment">#å¦‚æœå¯ä»¥åŒ¹é…å·¦æ‹¬å·ï¼Œå¯ä»¥å¢åŠ å³æ‹¬å·åŒºåŒ¹é…</span><br>        result = []<br>        dfs(<span class="hljs-string">""</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer56-2 æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°â…¡</title>
      <link href="/2021/12/08/leetcode/leetcode-offer56-2/"/>
      <url>/2021/12/08/leetcode/leetcode-offer56-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°â…¡</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨ä¸€ä¸ªæ•°ç»„ <code>nums</code> ä¸­é™¤ä¸€ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸‰æ¬¡ã€‚è¯·æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">3,4,3,3</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[9,1,7,9,7,9,7]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><p><code>1 &lt;= nums.length &lt;= 10000</code></p></li><li><p><code>1 &lt;= nums[i] &lt; 2^31</code></p></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¬¡æ•°ï¼Œç„¶åå†å¯»æ‰¾æ¬¡æ•°ä¸º1çš„æ•°å­—ã€‚æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        tmap = {}<br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            tmap[num] = tmap[num]+<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num <span class="hljs-keyword">in</span> tmap <span class="hljs-keyword">else</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> tmap:<br>            <span class="hljs-keyword">if</span> tmap[num] == <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> num<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è¾¾åˆ°æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1);</p><p>å…¶æ€æƒ³æ˜¯æ¯ä¸€ä½çš„äºŒè¿›åˆ¶ä½å¯¹äºå‡ºç°3æ¬¡çš„æ•°å­—ç›¸åŠ æ˜¯3çš„å€æ•°ã€‚è¿™æ ·å¯ä»¥æŠŠæ¯ä¸€ä½ç›¸åŠ å¯¹ 3 é™¤ä½™æ•°ï¼Œå¯ä»¥å¾—åˆ°å‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer56-2.png" alt=""></p><p>å®é™…ä¸Šä¿®æ”¹ä½™æ•°mï¼Œå¯ä»¥å¾—åˆ°é€šç”¨è§£æ³•ï¼š**é™¤äº†ä¸€ä¸ªæ•°å­—ä»¥å¤–ï¼Œå…¶ä½™æ•°å­—éƒ½å‡ºç° m æ¬¡ **</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        counts = [<span class="hljs-number">0</span>] * <span class="hljs-number">32</span> <span class="hljs-comment">#è®°å½•æ¯ä¸€ä½çš„å’Œ</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>):<br>                counts[j] += num &amp; <span class="hljs-number">1</span><br>                num &gt;&gt;= <span class="hljs-number">1</span> <span class="hljs-comment">#å³ç§»1ä½</span><br>        res, m = <span class="hljs-number">0</span>, <span class="hljs-number">3</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>):<br>            res &lt;&lt;= <span class="hljs-number">1</span><br>            res |= counts[<span class="hljs-number">31</span> - i] % m  <span class="hljs-comment"># ä½æˆ–è¿ç®— ä»é«˜ä½å¼€å§‹ç„¶åå·¦ç§»è¿ç®—</span><br>        <span class="hljs-keyword">return</span> res <span class="hljs-comment"># if counts[31] % m == 0 else ~(res ^ 0xffffffff) #æœ€é«˜ä½ä¸º0åˆ™ä¸ºæ­£æ•°ï¼Œå¦åˆ™ä¸ºè´Ÿæ•°</span><br></code></pre></td></tr></tbody></table></figure><p>è´Ÿæ•°æ­¤å¤„çš„æ“ä½œæ²¡æœ‰çœ‹æ‡‚ã€‚ç»æµ‹è¯•ï¼Œç›´æ¥return reså³å¯ã€‚</p><blockquote><p>ç”±äº Python çš„å­˜å‚¨è´Ÿæ•°çš„ç‰¹æ®Šæ€§ï¼Œéœ€è¦å…ˆå°† 0 - 32 ä½å–åï¼ˆå³ res ^ 0xffffffff ï¼‰ï¼Œå†å°†æ‰€æœ‰ä½å–åï¼ˆå³ ~ ï¼‰ã€‚<strong>^è¡¨ç¤ºäºŒè¿›åˆ¶å¼‚æˆ–è¿ç®—</strong><br>ä¸¤ä¸ªç»„åˆæ“ä½œå®è´¨ä¸Šæ˜¯å°†æ•°å­— 32 ä»¥ä¸Šä½å–åï¼Œ 0 - 32 ä½ä¸å˜ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer53-1 æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°</title>
      <link href="/2021/12/07/leetcode/leetcode-offer53-1/"/>
      <url>/2021/12/07/leetcode/leetcode-offer53-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€ä¸ªæ•´å‹æ•°ç»„ <code>nums</code> é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[4,1,4,6]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,6]</span> æˆ– <span class="hljs-comment">[6,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[1,2,10,4,1,4,3,3]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,10]</span> æˆ– <span class="hljs-comment">[10,2]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>2 &lt;= nums.length &lt;= 10000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åˆ©ç”¨mapæ¥è®°å½•æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå†éå†mapå¾—åˆ°æ¬¡æ•°ä¸º1çš„æ•°ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumbers</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        info = {}<br>        result = []<br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(num <span class="hljs-keyword">in</span> info):info[num]=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:info[num] += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> info:<br>            <span class="hljs-keyword">if</span>(info[key]==<span class="hljs-number">1</span>):result.append(key)<br>        <span class="hljs-keyword">return</span> result<br>        <span class="hljs-comment">#è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)</span><br></code></pre></td></tr></tbody></table></figure><p>å› ä¸ºè¦ä¿è¯ç©ºé—´å¤æ‚åº¦ä¸ºO(1),éœ€è¦å¦è¾Ÿè¹Šå¾„ï¼Œæ³¨æ„åˆ°ä¸€ä¸ªå®šç†ï¼ŒaâŠ•a = 0 0âŠ•a=aï¼Œå¹¶ä¸”æ»¡è¶³äº¤æ¢å¾‹ï¼Œå› æ­¤å¦‚æœåªæœ‰ä¸€ä¸ªæ•°å­—xåªå‡ºç°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°†æ‰€æœ‰çš„æ•°å­—è¿›è¡Œå¼‚æˆ–æ“ä½œå¾—åˆ°çš„ç»“æœå°±æ˜¯x</p><p>å•ä¸ªæ•°å­—ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>    x = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:  <span class="hljs-comment"># 1. éå† nums æ‰§è¡Œå¼‚æˆ–è¿ç®—</span><br>        x ^= num      <br>    <span class="hljs-keyword">return</span> x;         <span class="hljs-comment"># 2. è¿”å›å‡ºç°ä¸€æ¬¡çš„æ•°å­— x</span><br></code></pre></td></tr></tbody></table></figure><p>ç°åœ¨æ˜¯ä¸¤ä¸ªæ•°å­—ï¼Œå› æ­¤æ‰€æœ‰æ•°å­—çš„å¼‚æˆ–æ˜¯xâŠ•yï¼Œè¿™ä¸¤ä¸ªæ•°å­—æ€ä¹ˆåŒºåˆ†å‘¢ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªæ•°å­—ä¸åŒçš„ä¸€ä½ï¼ˆåˆ©ç”¨&amp;ï¼‰ã€‚ç„¶åå†è¿›è¡Œå¼‚æˆ–åˆ†ç±»ï¼Œæ‰¾åˆ°ä¸¤ä¸ªå€¼ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleNumbers</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-comment">#x1å¼‚æˆ–x2.... ç»“æœå¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ä¸¤ä¸ªä¸åŒçš„æ•°å¼‚æˆ– xå¼‚æˆ–y</span><br>        a,x,y = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            a = a^num<br>        m = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> m&amp;a==<span class="hljs-number">0</span>: m = m&lt;&lt;<span class="hljs-number">1</span> <span class="hljs-comment">#æ‰¾åˆ°ä¸åŒä½</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span>(m&amp;num):x^=num<br>            <span class="hljs-keyword">else</span>:y^=num<br>        <span class="hljs-keyword">return</span> [x,y]<br></code></pre></td></tr></tbody></table></figure><p>è¿˜ä¸æ¸…æ¥šçš„è¯ï¼Œå¯ä»¥å‚è€ƒè§£é‡Šä»£ç å“¦~</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span>[] singleNumbers(<span class="hljs-keyword">int</span>[] nums) {<br>        <span class="hljs-comment">//å› ä¸ºç›¸åŒçš„æ•°å­—å¼‚æˆ–ä¸º0ï¼Œä»»ä½•æ•°å­—ä¸0å¼‚æˆ–ç»“æœæ˜¯å…¶æœ¬èº«ã€‚</span><br>        <span class="hljs-comment">//æ‰€ä»¥éå†å¼‚æˆ–æ•´ä¸ªæ•°ç»„æœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—å¼‚æˆ–çš„ç»“æœï¼šå³ z = x ^ y</span><br>        <span class="hljs-keyword">int</span> z = <span class="hljs-number">0</span>;  <br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i : nums) z ^= i;<br>        <span class="hljs-comment">//æˆ‘ä»¬æ ¹æ®å¼‚æˆ–çš„æ€§è´¨å¯ä»¥çŸ¥é“ï¼šzä¸­è‡³å°‘æœ‰ä¸€ä½æ˜¯1ï¼Œå¦åˆ™xä¸yå°±æ˜¯ç›¸ç­‰çš„ã€‚</span><br>        <span class="hljs-comment">//æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè¾…åŠ©å˜é‡mæ¥ä¿å­˜zä¸­å“ªä¸€ä½ä¸º1.ï¼ˆå¯èƒ½æœ‰å¤šä¸ªä½éƒ½ä¸º1ï¼Œæˆ‘ä»¬æ‰¾åˆ°æœ€ä½ä½çš„1å³å¯ï¼‰ã€‚</span><br>        <span class="hljs-comment">//ä¸¾ä¸ªä¾‹å­ï¼šz = 10 ^ 2 = 1010 ^ 0010 = 1000,ç¬¬å››ä½ä¸º1.</span><br>        <span class="hljs-comment">//æˆ‘ä»¬å°†måˆå§‹åŒ–ä¸º1ï¼Œå¦‚æœï¼ˆz &amp; mï¼‰çš„ç»“æœç­‰äº0è¯´æ˜zçš„æœ€ä½ä¸ºæ˜¯0</span><br>        <span class="hljs-comment">//æˆ‘ä»¬æ¯æ¬¡å°†må·¦ç§»ä¸€ä½ç„¶åè·Ÿzåšä¸æ“ä½œï¼Œç›´åˆ°ç»“æœä¸ä¸º0.</span><br>        <span class="hljs-comment">//æ­¤æ—¶måº”è¯¥ç­‰äº1000ï¼ŒåŒzä¸€æ ·ï¼Œç¬¬å››ä½ä¸º1.</span><br>        <span class="hljs-keyword">int</span> m = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span>((z &amp; m) == <span class="hljs-number">0</span>) m &lt;&lt;= <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">//æˆ‘ä»¬éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°è·Ÿmè¿›è¡Œä¸æ“ä½œï¼Œç»“æœä¸º0çš„ä½œä¸ºä¸€ç»„ï¼Œç»“æœä¸ä¸º0çš„ä½œä¸ºä¸€ç»„</span><br>        <span class="hljs-comment">//ä¾‹å¦‚å¯¹äºæ•°ç»„ï¼š[1,2,10,4,1,4,3,3]ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªæ•°å­—è·Ÿ1000åšä¸æ“ä½œï¼Œå¯ä»¥åˆ†ä¸ºä¸‹é¢ä¸¤ç»„ï¼š</span><br>        <span class="hljs-comment">//nums1å­˜æ”¾ç»“æœä¸º0çš„: [1, 2, 4, 1, 4, 3, 3]</span><br>        <span class="hljs-comment">//nums2å­˜æ”¾ç»“æœä¸ä¸º0çš„: [10] (ç¢°å·§nums2ä¸­åªæœ‰ä¸€ä¸ª10ï¼Œå¦‚æœåŸæ•°ç»„ä¸­çš„æ•°å­—å†å¤§ä¸€äº›å°±ä¸ä¼šè¿™æ ·äº†)</span><br>        <span class="hljs-comment">//æ­¤æ—¶æˆ‘ä»¬å‘ç°é—®é¢˜å·²ç»é€€åŒ–ä¸ºæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—åªå‡ºç°äº†ä¸€æ¬¡</span><br>        <span class="hljs-comment">//åˆ†åˆ«å¯¹nums1å’Œnums2éå†å¼‚æˆ–å°±èƒ½å¾—åˆ°æˆ‘ä»¬é¢„æœŸçš„xå’Œy</span><br>        <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i : nums) {<br>            <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬æ˜¯é€šè¿‡if...elseå°†numsåˆ†ä¸ºäº†ä¸¤ç»„ï¼Œä¸€è¾¹éå†ä¸€éå¼‚æˆ–ã€‚</span><br>            <span class="hljs-comment">//è·Ÿæˆ‘ä»¬åˆ›å»ºä¿©æ•°ç»„nums1å’Œnums2åŸç†æ˜¯ä¸€æ ·çš„ã€‚</span><br>            <span class="hljs-keyword">if</span>((i &amp; m) == <span class="hljs-number">0</span>) x ^= i;<br>            <span class="hljs-keyword">else</span> y ^= i;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]{x, y};<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer34 äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</title>
      <link href="/2021/12/06/leetcode/leetcode-offer34/"/>
      <url>/2021/12/06/leetcode/leetcode-offer34/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚</p><p>å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode34-1.jpg" alt=""></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šroot = [<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">11</span>,null,<span class="hljs-number">13</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">2</span>,null,null,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>], targetSum = <span class="hljs-number">22</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[5,4,11,2],[5,8,4,5]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode34-2.jpg" alt=""></p><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šroot = <span class="hljs-comment">[1,2,3]</span>, targetSum = 5<br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹4ï¼š">ç¤ºä¾‹4ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šroot = <span class="hljs-comment">[1,2]</span>, targetSum = 0<br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°åœ¨èŒƒå›´ <code>[0, 5000]</code> å†…</li><li><code>-1000 &lt;= Node.val &lt;= 1000</code></li><li><code>-1000 &lt;= targetSum &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ³¨å­˜åœ¨èŠ‚ç‚¹çš„å€¼æ˜¯è´Ÿæ•°ï¼Œå› æ­¤<strong>ä¸èƒ½æŒ‰ç…§å½“å‰å¾—åˆ°çš„å’Œè¿›è¡Œå‰ªææ“ä½œ</strong>ï¼Œå¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯<strong>ä¸èƒ½å°†å¯¹è±¡append</strong>ï¼Œå¯¹è±¡çš„appendç›´æ¥å¼•ç”¨çš„ï¼Œå†åç»­ä¿®æ”¹ä¼šå½±å“åˆ°resultçš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶è¿›è¡Œcopyï¼Œæ·±æ‹·è´ï¼Œæˆ–è€…listå®ä¾‹åŒ–ä¸€ä¸‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pathSum</span>(<span class="hljs-params">self, root: TreeNode, target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span> []<br>        result,nowlist = [],[]<br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findPath</span>(<span class="hljs-params">root,nowsum</span>):</span><br>            <span class="hljs-comment"># if(not root or (root and root.val + nowsum&gt;target)): return #è¿˜å­˜åœ¨è´Ÿæ•°çš„æƒ…å†µå› æ­¤ä¸èƒ½å‰ªæ</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span><br>            tsum = root.val + nowsum<br>            nowlist.append(root.val)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root.left <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> root.right <span class="hljs-keyword">and</span> tsum==target):<br>                result.append(nowlist.copy()) <span class="hljs-comment">#ä¸èƒ½éšä¾¿å°†ä¸€ä¸ªå¯¹è±¡appendè¿›å»ï¼Œåç»­æ­¤å¯¹è±¡å‡ºç°å˜åŒ–ï¼Œä¼šå½±å“åˆ°result</span><br>            findPath(root.left,tsum)<br>            findPath(root.right,tsum)<br>            nowlist.pop()<br>               <br>        findPath(root,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer372 è¶…çº§æ¬¡æ–¹</title>
      <link href="/2021/12/05/leetcode/leetcode-offer372/"/>
      <url>/2021/12/05/leetcode/leetcode-offer372/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¶…çº§æ¬¡æ–¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®— ab å¯¹ 1337 å–æ¨¡ï¼Œa æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œb æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•´æ•°ä¸”ä¼šä»¥æ•°ç»„å½¢å¼ç»™å‡ºã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">8</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[1,0]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1024</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[4,3,3,8,5,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼š<span class="hljs-selector-tag">a</span> = <span class="hljs-number">2147483647</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-attr">[2,0,0]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1198</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= a &lt;= 231 - 1</li><li>1 &lt;= b.length &lt;= 2000</li><li>0 &lt;= b[i] &lt;= 9</li><li>b ä¸å«å‰å¯¼ 0</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨mathæ¨¡å—</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br>math.<span class="hljs-built_in">pow</span>( x, y )<br></code></pre></td></tr></tbody></table></figure><p>å†…ç½®çš„powæ–¹æ³•<br><code>pow(x, y[, z])</code></p><p>å‡½æ•°æ˜¯è®¡ç®— x çš„ y æ¬¡æ–¹ï¼Œå¦‚æœ z åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº pow(x,y) %zã€‚</p><p><strong>æ³¨æ„ï¼špow() é€šè¿‡å†…ç½®çš„æ–¹æ³•ç›´æ¥è°ƒç”¨ï¼Œå†…ç½®æ–¹æ³•ä¼šæŠŠå‚æ•°ä½œä¸ºæ•´å‹ï¼Œè€Œ math æ¨¡å—åˆ™ä¼šæŠŠå‚æ•°è½¬æ¢ä¸º floatã€‚</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">superPow</span>(<span class="hljs-params">self, a: <span class="hljs-built_in">int</span>, b: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        result = <span class="hljs-number">1</span><br>        mod = <span class="hljs-number">1337</span><br>        <span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(b):<br>            temp = <span class="hljs-built_in">pow</span>(a,x,mod)<br>            result = result*temp%mod <br>            <span class="hljs-keyword">if</span>(i&lt;<span class="hljs-built_in">len</span>(b)-<span class="hljs-number">1</span>):result = <span class="hljs-built_in">pow</span>(result,<span class="hljs-number">10</span>,mod)<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><p>å’ŒäºŒè¿›åˆ¶æ±‚åè¿›åˆ¶çš„æ€æƒ³ç±»ä¼¼ï¼Œå½“å‰ä½æ±‚å¾—ä¹‹åå†ä¹˜ä»¥10çš„åŸºåº•ï¼Œç»§ç»­é‡å¤,</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer33</title>
      <link href="/2021/12/04/leetcode/leetcode-offer33/"/>
      <url>/2021/12/04/leetcode/leetcode-offer33/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘çš„åç»­éå†åºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚</p><p>å‚è€ƒä»¥ä¸‹è¿™é¢—äºŒå‰æœç´¢æ ‘</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">    <span class="hljs-number">5</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">2</span>   <span class="hljs-number">6</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">1</span>   <span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1,6,3,2,5]</span><br><span class="hljs-section">è¾“å‡º: false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1,3,2,6,5]</span><br><span class="hljs-section">è¾“å‡º: true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>æ•°ç»„é•¿åº¦ &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é‡‡ç”¨é€’å½’çš„æ–¹å¼ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºrootï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”rootå¤§çš„å€¼ï¼Œä½œä¸ºå·¦å­æ ‘çš„åŒºåŸŸï¼Œæ¯”è¾ƒå·¦å­æ ‘åŒºåŸŸçš„å€¼æ ¸å¯¹æ˜¯å¦å¤§äºrootå³å¯ï¼Œç„¶åæ¯”è¾ƒå·¦å³å­æ ‘ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verifyPostorder</span>(<span class="hljs-params">self, postorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> postorder <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(postorder)==<span class="hljs-number">1</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        root = postorder[<span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span>]<br>        result,flag = <span class="hljs-literal">True</span>,<span class="hljs-literal">True</span><br>        index = <span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i,x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(postorder):<br>            result = x&gt;=root <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> flag <span class="hljs-keyword">and</span> result <span class="hljs-keyword">else</span> result<br>            <span class="hljs-comment"># if(not flag and x&lt;root):</span><br>            <span class="hljs-comment">#     result = False</span><br>            <span class="hljs-comment">#     break</span><br>            <span class="hljs-comment"># result = x&gt;root if not flag else True</span><br>            <span class="hljs-keyword">if</span>(flag <span class="hljs-keyword">and</span> x&gt;root):<br>                index = i<br>                flag = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> result <span class="hljs-keyword">and</span> self.verifyPostorder(postorder[:index-<span class="hljs-number">1</span>]) <span class="hljs-keyword">and</span> self.verifyPostorder(postorder[index:<span class="hljs-built_in">len</span>(postorder)-<span class="hljs-number">1</span>])<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dcmæ–‡ä»¶è½¬æ¢ä¸º3Dçš„niiæ–‡ä»¶</title>
      <link href="/2021/11/26/python/img/dcm2nii/"/>
      <url>/2021/11/26/python/img/dcm2nii/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®°å½•dcmæ–‡ä»¶è½¬æ¢ä¸ºniiæ–‡ä»¶çš„ä»£ç </p></blockquote><h1>å‰è¨€</h1><p>NIfTI ä¸­çš„å›¾åƒåŸå§‹æ•°æ®ä¸€èˆ¬è¢«å­˜å‚¨æˆäº†ä¸‰ç»´å›¾åƒï¼Œè€Œdicomå­˜å‚¨ä¸ºäºŒç»´å›¾å±‚ï¼Œæ‰€ä»¥ç›¸å¯¹äºDICOMæ–‡ä»¶ï¼ŒNIFTIæ–‡ä»¶æ›´åŠ æ˜“ç”¨äºæœºå™¨å­¦ä¹ ï¼Œå› ä¸ºNIfTI æ˜¯ä¸‰ç»´å›¾åƒï¼Œå¤„ç†ä¸€ä¸ªå•ç‹¬çš„NIfTI æ–‡ä»¶è¦æ¯”å¤„ç†æˆç™¾ä¸Šåƒä¸ªDICOMæ–‡ä»¶æ›´åŠ å®¹æ˜“ä¸€äº›ã€‚</p><h1>åŒ»å­¦å›¾åƒæ ¼å¼</h1><p>DICOM å’Œ NIFTI æ˜¯æœ€å¸¸ç”¨çš„æ ¼å¼ï¼Œä¸‹é¢å¯¹å…¶è¿›è¡Œç®€å•ä»‹ç»ã€‚</p><h2 id="DICOM">DICOM</h2><p>DICOM ä»£è¡¨çš„æ˜¯åŒ»ç–—æ•°å­—æˆåƒå’Œé€šä¿¡ã€‚DICOM æ˜¯ç”±ç¾å›½å›½å®¶ç”µæ°”åˆ¶é€ å•†åä¼šï¼ˆNEMAï¼‰åˆ¶å®šçš„æ ‡å‡†ã€‚å®ƒå®šä¹‰äº†åŒ»ç–—æˆåƒé¢†åŸŸä¸­å…³äºä¿¡æ¯å¤„ç†ã€å­˜å‚¨ã€æ‰“å°ä»¥åŠä¼ è¾“çš„æ ‡å‡†ï¼Œè¿™äº›éƒ½æ˜¯ä½ åœ¨æ‰«æä»ªæˆ–è€…æŸå®¶åŒ»é™¢çš„å›¾ç‰‡å½’æ¡£å’Œé€šä¿¡ç³»ç»Ÿï¼ˆPACSï¼‰èƒ½å¤Ÿç«‹å³å¾—åˆ°çš„æ–‡ä»¶æ ¼å¼ã€‚<br>å®ƒåŒ…æ‹¬äº†æ–‡ä»¶æ ¼å¼å’Œèƒ½å¤Ÿæ¥æ”¶å›¾åƒä»¥åŠ DICOM æ ¼å¼çš„ç—…äººæ•°æ®çš„å®ä½“ä¹‹é—´ä½¿ç”¨ TCP/IP è¿›è¡Œé€šä¿¡çš„åè®®ã€‚</p><p>ä¸€ä¸ª DICOM æ–‡ä»¶åŒ…å«æ–‡ä»¶å¤´éƒ¨å’ŒåŒæ–‡ä»¶åçš„*.dcm å›¾åƒæ•°æ®ã€‚æ–‡ä»¶å¤´éƒ¨çš„å¤§å°å–å†³äºå®ƒæ‰€æä¾›çš„ä¿¡æ¯çš„å¤šå°‘ã€‚æ–‡ä»¶å¤´åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šç—…äººçš„ IDï¼Œç—…äººçš„å§“åï¼Œå›¾åƒçš„æ¨¡æ€ä»¥åŠå…¶ä»–ä¿¡æ¯ã€‚å®ƒå®šä¹‰äº†å¸§çš„æ•°é‡ä»¥åŠå›¾åƒçš„ç²¾åº¦ã€‚è¿™äº›ä¿¡æ¯ä¼šè¢«å›¾åƒæµè§ˆå™¨åœ¨æ˜¾ç¤ºå›¾åƒæ—¶ç”¨åˆ°ã€‚å¯¹äºä¸€ä¸ªå›¾åƒé‡‡æ ·ï¼Œä¼šæœ‰å¾ˆå¤šä¸ª DICOM æ–‡ä»¶ã€‚</p><h2 id="NIFTI">NIFTI</h2><p>Nifti æ ¼å¼æœ€åˆæ˜¯ä¸ºç¥ç»å½±åƒå­¦å‘æ˜çš„ã€‚ç¥ç»å½±åƒä¿¡æ¯å­¦æŠ€æœ¯è®¡åˆ’ï¼ˆNIFTIï¼‰å°† NIfTI æ ¼å¼é¢„è®¾ä¸º ANALYZE7.5 æ ¼å¼çš„æ›¿ä»£å“ã€‚å®ƒæœ€åˆçš„åº”ç”¨é¢†åŸŸæ˜¯ç¥ç»å½±åƒï¼Œä½†æ˜¯ä¹Ÿè¢«ç”¨åœ¨å…¶ä»–é¢†åŸŸã€‚è¿™ç§æ ¼å¼çš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯å®ƒåŒ…å«ä¸¤ä¸ªèƒ½å¤Ÿå°†æ¯ä¸ªä½“ç´ çš„ç´¢å¼•ï¼ˆi,j,kï¼‰å’Œå®ƒçš„ç©ºé—´ä½ç½®ï¼ˆx,y,zï¼‰å…³è”èµ·æ¥çš„ä»¿å°„åæ ‡ã€‚</p><h4 id="ä»£ç ">ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><br><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br><span class="hljs-keyword">import</span> os,glob<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dcm2nii</span>(<span class="hljs-params">dcms_path, nii_path</span>):</span><br>    <span class="hljs-comment"># 1.æ„å»ºdicomåºåˆ—æ–‡ä»¶é˜…è¯»å™¨ï¼Œå¹¶æ‰§è¡Œï¼ˆå³å°†dicomåºåˆ—æ–‡ä»¶â€œæ‰“åŒ…æ•´åˆâ€ï¼‰</span><br>    reader = sitk.ImageSeriesReader()<br>    dicom_names = reader.GetGDCMSeriesFileNames(dcms_path)<br>    reader.SetFileNames(dicom_names)<br>    image2 = reader.Execute()<br>    <span class="hljs-comment"># 2.å°†æ•´åˆåçš„æ•°æ®è½¬ä¸ºarrayï¼Œå¹¶è·å–dicomæ–‡ä»¶åŸºæœ¬ä¿¡æ¯</span><br>    image_array = sitk.GetArrayFromImage(image2)  <span class="hljs-comment"># z, y, x</span><br>    origin = image2.GetOrigin()  <span class="hljs-comment"># x, y, z</span><br>    spacing = image2.GetSpacing()  <span class="hljs-comment"># x, y, z</span><br>    direction = image2.GetDirection()  <span class="hljs-comment"># x, y, z</span><br>    <span class="hljs-comment"># 3.å°†arrayè½¬ä¸ºimgï¼Œå¹¶ä¿å­˜ä¸º.nii.gz</span><br>    image3 = sitk.GetImageFromArray(image_array)<br>    image3.SetSpacing(spacing)<br>    image3.SetDirection(direction)<br>    image3.SetOrigin(origin)<br>    sitk.WriteImage(image3, nii_path)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<br>    filelist = glob.glob(<span class="hljs-string">"./data/AD_result/I*"</span>)<br>    save_path = <span class="hljs-string">"./data/AD_nii"</span><br>    os.makedirs(save_path,exist_ok=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">for</span> dcms_path <span class="hljs-keyword">in</span> filelist:<br>        dirname = dcms_path.split(os.path.sep)[-<span class="hljs-number">1</span>]<br>        nii_path = os.path.join(save_path,dirname+ <span class="hljs-string">".nii"</span>)<br>        <span class="hljs-built_in">print</span>(nii_path)<br>       <span class="hljs-comment"># r'.\test.nii.gz'  # æ‰€éœ€.nii.gzæ–‡ä»¶ä¿å­˜è·¯å¾„</span><br>        dcm2nii(dcms_path, nii_path)<br><br></code></pre></td></tr></tbody></table></figure><h1>å›¾åƒè‡ªåŠ¨å¤„ç†å·¥å…·SimpleITKçš„ä½¿ç”¨</h1><p>å‚è€ƒï¼š<a href="https://www.ebaina.com/articles/140000012739">https://www.ebaina.com/articles/140000012739</a></p><h4 id="å®‰è£…SimpleITKåº“">å®‰è£…SimpleITKåº“</h4><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œä»»æ„ä½ç½®è¾“å…¥ï¼š<br>  pip <span class="hljs-keyword">install</span> SimpleITK<br></code></pre></td></tr></tbody></table></figure><h3 id="SimpleITKå¤„ç†åŒ»å­¦å›¾åƒ">SimpleITKå¤„ç†åŒ»å­¦å›¾åƒ</h3><p>åšåŒ»å­¦å›¾åƒæ—¶ï¼ŒSimpleITKæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„åº“ã€‚å®é™…ä¸Šå¤§å®¶å¾€å¾€å–œæ¬¢æŠŠä¸åŒç±»å‹çš„æ•°æ®å‰²è£‚å¼€ï¼Œnrrdç”¨pynrrdå¤„ç†ï¼Œdicomç”¨dicomå¤„ç†ï¼Œniiç”¨nibabelå¤„ç†â€¦â€¦å®é™…ä¸Šæ ¹æœ¬æ²¡å¿…è¦ï¼ŒSimpleITKå®Œå…¨å¯ä»¥ç»Ÿä¸€å¤„ç†ï¼Œå„ç§ç±»å‹çš„è¯»å–å’Œä¿å­˜ä¸€æ­¥æå®šã€‚</p><h4 id="è¯»å–">è¯»å–</h4><h5 id="DICOM-2">DICOM</h5><p>é¦–å…ˆæ˜¯æœ€å¸¸è§çš„DICOMã€‚è¿™ä¸ªæ–‡ä»¶æ ¼å¼æ˜¯CTæœºå™¨ç›´æ¥è¾“å‡ºçš„ç»“æœï¼Œæ¯ä¸ªç—…äººä¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰è‹¥å¹²ä¸ªDICOMæ–‡ä»¶ï¼Œæ¯ä¸ªDICOMæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå¯ä»¥è¢«å•ç‹¬æŸ¥é˜…ï¼ˆé€šè¿‡SimpleITKçš„ReadImageï¼‰ã€‚ä½†æ˜¯ï¼Œå¤„ç†èµ·æ¥ä¸€èˆ¬æˆ‘ä»¬ä¼šå¸Œæœ›æŠŠè¿™äº›DICOMç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ª3Dçš„çŸ©é˜µï¼Œè¿™æ ·å°±å¯ä»¥ç”¨åˆ°SimpltITKé‡Œçš„<code>ImageSeriesReader()</code>æ¥å®ç°ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>reader = sitk.ImageSeriesReader() <br>img_names = reader.GetGDCMSeriesFileNames(img_path) <br>reader.SetFileNames(img_names) <br>image = reader.Execute() <br>image_array = sitk.GetArrayFromImage(image) <span class="hljs-comment"># z, y, x </span><br></code></pre></td></tr></tbody></table></figure><h5 id="MHD">MHD</h5><p>ç„¶åè¿˜æœ‰å°±æ˜¯ã€‚è¿™ç§æ ¼å¼çš„æ–‡ä»¶ç”±ä¸€ä¸ªMHDæ–‡ä»¶å’Œä¸€ä¸ªRAWæ–‡ä»¶ç»„æˆï¼Œå…¶ä¸­MHDé‡Œé¢æ˜¯ç—…äººå’ŒCTæ‰«æç»“æœçš„ç›¸å…³ä¿¡æ¯ï¼ŒRAWé‡Œé¢å­˜çš„æ˜¯çœŸæ­£çš„æ•°ç»„ï¼Œå¯¹äºè¿™ç§æ ¼å¼ï¼ŒSimpleITKå¯ä»¥è¿™æ ·è¯»å–ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(filename) <br>img_array = sitk.GetArrayFromImage(itk_img) <br></code></pre></td></tr></tbody></table></figure><h5 id="NII">NII</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(filename)<br>img_array = sitk.GetArrayFromImage(itk_img) <br></code></pre></td></tr></tbody></table></figure><p>ä¸è¿‡ï¼Œå¯¹äºNIIç±»å‹çš„æ–‡ä»¶ï¼ŒSimpleITKåœ¨ä¿å­˜ä¸Šä¼šæœ‰ä¸€äº›é—®é¢˜ï¼ˆè¯»å–æ²¡é—®é¢˜ä¿å­˜ä¸Šç«Ÿç„¶æœ‰é—®é¢˜æˆ‘çœŸæ˜¯æœäº†ï¼‰ï¼Œå¦‚æœsliceçš„æ•°é‡å¾ˆå¤§ï¼ˆä¹‹å‰æœ‰ç¢°åˆ°è¿‡300å¤šä¸ªsliceçš„ï¼‰ï¼Œä¿å­˜èµ·æ¥ä¼šç›´æ¥æŠ¥é”™ï¼Œæ‰€ä»¥å¦‚æœç¢°åˆ°è¿™ç§æƒ…å†µæˆ‘ä¼šé€‰æ‹©ä¿å­˜æˆnrrdï¼ˆç”¨pynrrdåº“ï¼‰</p><h4 id="ä¿å­˜">ä¿å­˜</h4><p>è¯´åˆ°ä¿å­˜ï¼Œæœ‰å‡ ä¸ªå¤©å‘ä¸€å®šè¦è¯´ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œä¿å­˜çš„é€šç”¨ä»£ç æ˜¯ï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">savedImg = sitk.<span class="hljs-constructor">GetImageFromArray(<span class="hljs-params">outputs3D</span>)</span> <br>savedImg.<span class="hljs-constructor">SetSpacing(<span class="hljs-params">spacing</span>)</span><br>savedImg.<span class="hljs-constructor">SetOrigin(<span class="hljs-params">origin</span>)</span> <br>sitk.<span class="hljs-constructor">WriteImage(<span class="hljs-params">savedImg</span>, <span class="hljs-params">input_nii</span>[:-4]+'<span class="hljs-params">_liverSegResult</span>.<span class="hljs-params">nii</span>')</span><br><br></code></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªé‡Œé¢ï¼ŒSetOriginå’ŒSetSpacingæˆ‘å¸¸å¸¸ä¼šå¿˜è®°ï¼Œæ‰€ä»¥å¯¼è‡´ä¿å­˜çš„CTç”¨ITKsnapçœ‹ä¼šå˜å½¢ã€‚è¿™é‡Œé¢çš„spacingå’Œoriginå‡å¯ä»¥ä»ä¹‹å‰ReadImage()è¿”å›çš„å¯¹è±¡ä¸Šé€šè¿‡GetOrigin()å’ŒGetSpacing()è·å–ï¼Œåƒä¸‡åˆ«å¿˜äº†ã€‚å½“ç„¶ï¼Œé™¤äº†è¿™ä¸¤ä¸ªä¹‹å¤–è¿˜æœ‰ä¸ªdirectionä¹Ÿæ˜¯å¯ä»¥getå’Œsetçš„ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹åªè¦ä½ ä»£ç æ²¡æœ‰æä¸€äº›çŸ©é˜µçš„ç¿»è½¬ç­‰æ“ä½œè¿™ä¸ªæ˜¯ä¸ç”¨ç®¡çš„ã€‚</p><h3 id="ä½¿ç”¨SimpleITKè¯»å–å’Œä¿å­˜Nii-gzæ–‡ä»¶">ä½¿ç”¨SimpleITKè¯»å–å’Œä¿å­˜Nii.gzæ–‡ä»¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## using simpleITK to load and save data.</span><br><span class="hljs-keyword">import</span> SimpleITK <span class="hljs-keyword">as</span> sitk<br>itk_img = sitk.ReadImage(<span class="hljs-string">'./nifti.nii.gz'</span>)<br>img = sitk.GetArrayFromImage(itk_img)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"img shape:"</span>,img.shape)<br><br><span class="hljs-comment">## save </span><br>out = sitk.GetImageFromArray(img)<br><span class="hljs-comment"># # out.SetSpacing(itk_img.GetSpacing())</span><br><span class="hljs-comment"># # out.SetOrigin(itk_img.GetOrigin())</span><br>sitk.WriteImage(out,<span class="hljs-string">'simpleitk_save.nii.gz'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="å¯è§†åŒ–ä¸€å±‚">å¯è§†åŒ–ä¸€å±‚</h3><p>ä¸‹é¢çš„ç¨‹åºæŒ‘å–ä¸€å±‚è¿›è¡Œå¯è§†åŒ–ï¼Œå¹¶æ ‡æ³¨ç»“èŠ‚ä½ç½®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">a = image_array.transpose(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>)[:,:,<span class="hljs-number">0</span>]  <span class="hljs-comment"># transposeæ˜¯å°†(z,x,y)çš„ä¸‰ç»´çŸ©é˜µè½¬ä¸º(x,y,z)çš„çŸ©é˜µ</span><br>plt.gca().add_patch( plt.Rectangle((<span class="hljs-number">147</span>,<span class="hljs-number">297</span>), <span class="hljs-number">24</span>,<span class="hljs-number">24</span>, fill=<span class="hljs-literal">False</span>,edgecolor=<span class="hljs-string">'r'</span>, linewidth=<span class="hljs-number">3</span>))<br>plt.imshow(a[:,:,<span class="hljs-number">1</span>]*<span class="hljs-number">255</span>)  <span class="hljs-comment"># åœ¨å›¾ä¸­ç”»æ¡†</span><br>plt.show()<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> å›¾åƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶å¤„ç†ï¼ˆå¤åˆ¶ï¼Œç§»åŠ¨ï¼‰</title>
      <link href="/2021/11/25/python/file/fileprocess/"/>
      <url>/2021/11/25/python/file/fileprocess/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†æ–‡ä»¶çš„å¤åˆ¶ï¼Œç§»åŠ¨ç­‰ç›¸å…³æ“ä½œã€‚ç›¸å…³çš„æ¨¡å—æ¶‰åŠshutiå’ŒosåŒ…ï¼Œé’ˆå¯¹è¿™ä¸¤ä¸ªåŒ…å¯¹æ–‡ä»¶æ“ä½œè¿›è¡Œæ•´ç†ã€‚</p></blockquote><h2 id="shutil">shutil</h2><p>shutilæ¨¡å—åŒ…å«äº†ä¸€äº›ç”¨äºå¤åˆ¶æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå’Œæ–‡ä»¶å‹ç¼©çš„å‡½æ•°.<br>osæ¨¡å—æ˜¯Pythonæ ‡å‡†åº“ä¸­ä¸€ä¸ªé‡è¦çš„æ¨¡å—ï¼Œé‡Œé¢æä¾›äº†å¯¹ç›®å½•å’Œæ–‡ä»¶çš„ä¸€èˆ¬å¸¸ç”¨æ“ä½œã€‚è€ŒPythonå¦å¤–ä¸€ä¸ªæ ‡å‡†åº“â€”â€”shutilåº“ï¼Œå®ƒä½œä¸ºosæ¨¡å—çš„è¡¥å……ï¼Œæä¾›äº†å¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ã€å‹ç¼©ã€è§£å‹ç­‰æ“ä½œï¼Œ</p><h3 id="æ‹·è´">æ‹·è´</h3><h4 id="å¸¸è§„å¤åˆ¶æ–¹æ³•">å¸¸è§„å¤åˆ¶æ–¹æ³•</h4><table><thead><tr><th style="text-align:center">å‡½æ•°</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">copyfile( src, dst)</td><td style="text-align:center">ä»æºsrcå¤åˆ¶åˆ°dstä¸­å»ã€‚å½“ç„¶å‰ææ˜¯ç›®æ ‡åœ°å€æ˜¯å…·å¤‡å¯å†™æƒé™ã€‚æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯ä¸ºIOException. å½“å‰çš„dstå·²å­˜åœ¨çš„è¯å°±ä¼šè¢«è¦†ç›–æ‰</td></tr><tr><td style="text-align:center">copy( src, dst)</td><td style="text-align:center">å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªç›®å½•</td></tr><tr><td style="text-align:center">copy2( src, dst)</td><td style="text-align:center">åœ¨copyä¸Šçš„åŸºç¡€ä¸Šå†å¤åˆ¶æ–‡ä»¶æœ€åè®¿é—®æ—¶é—´ä¸ä¿®æ”¹æ—¶é—´ä¹Ÿå¤åˆ¶è¿‡æ¥äº†ï¼Œä¹Ÿå°±æ˜¯åŒ…å«æ–‡ä»¶çš„å±æ€§ä¿¡æ¯ï¼Œç±»ä¼¼äºcpâ€“pçš„ä¸œè¥¿</td></tr></tbody></table><ul><li>dstï¼šå¤åˆ¶è‡³dstæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶</li></ul><p>ä¸€èˆ¬dstå¡«å†™ç›¸åº”çš„æ–‡ä»¶å¤¹ï¼Œå°±ä¼šå»ºç«‹åŒåæ–‡ä»¶ï¼Œå°±ä¼šå¤åˆ¶æ–‡ä»¶åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœè¦å¤åˆ¶æ–‡ä»¶å¤¹å°±ä¸èƒ½ç”¨ä»¥ä¸Šå‡½æ•°äº†ã€‚dstå¯ä»¥æ˜¯ä¸ªç›®å½•ï¼Œä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸srcåŒåçš„æ–‡ä»¶ï¼Œ<strong>è‹¥è¯¥ç›®å½•ä¸‹å­˜åœ¨åŒåæ–‡ä»¶ï¼Œå°†ä¼šæŠ¥é”™æç¤ºå·²ç»å­˜åœ¨åŒåæ–‡ä»¶</strong>ã€‚</p><h4 id="å¤åˆ¶æ–‡ä»¶å†…å®¹">å¤åˆ¶æ–‡ä»¶å†…å®¹</h4><p>å¦‚æœæ˜¯å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°æŸæ–‡ä»¶ä¸­ï¼Œåˆ™ä½¿ç”¨<code>copyfile</code>ï¼Œå¦‚æœå­˜åœ¨åŒåæ–‡ä»¶ï¼Œå¯ä»¥è¦†ç›–åŒåæ–‡ä»¶å¤¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">shutil.copyfile(src, dst)<br>åŠŸèƒ½ï¼šå°†srcæ–‡ä»¶å†…å®¹å¤åˆ¶è‡³dstæ–‡ä»¶<br><br>srcï¼š æºæ–‡ä»¶è·¯å¾„<br>dstï¼š å¤åˆ¶è‡³dstæ–‡ä»¶ï¼Œè‹¥dstæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªdstæ–‡ä»¶ï¼›è‹¥å­˜åœ¨å°†ä¼šè¢«è¦†ç›–<br>follow_symlinksï¼šè®¾ç½®ä¸º<span class="hljs-literal">True</span>æ—¶ï¼Œè‹¥srcä¸ºè½¯è¿æ¥ï¼Œåˆ™å½“æˆæ–‡ä»¶å¤åˆ¶ï¼›å¦‚æœè®¾ç½®ä¸º<span class="hljs-literal">False</span>ï¼Œå¤åˆ¶è½¯è¿æ¥ã€‚é»˜è®¤ä¸º<span class="hljs-literal">True</span>ã€‚Python3æ–°å¢å‚æ•°<br><br><span class="hljs-keyword">import</span> shutil<br>shutil.copyfile(<span class="hljs-string">"./èµ„æ–™/1.txt"</span>,<span class="hljs-string">"./èµ„æ–™/1_empty.txt"</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="å¤åˆ¶ç›®å½•">å¤åˆ¶ç›®å½•</h4><p><code>shutil.copytree(src, dst, symlinks=False, ignore=None)</code><br>åŠŸèƒ½ï¼šå¤åˆ¶æ•´ä¸ªæ–‡ä»¶ç›®å½•(æ— è®ºæ–‡ä»¶å¤¹æ˜¯å¦ä¸ºç©ºï¼Œå‡å¯ä»¥å¤åˆ¶ï¼Œè€Œä¸”ä¼šå¤åˆ¶æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å†…å®¹)</p><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada">srcï¼šæºæ–‡ä»¶å¤¹<br>dstï¼šå¤åˆ¶è‡³dstæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œéœ€ä¿è¯æ­¤æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå¦åˆ™å°†æŠ¥é”™<br>symlinksï¼šæ˜¯å¦å¤åˆ¶è½¯è¿æ¥ï¼Œ<span class="hljs-literal">True</span>å¤åˆ¶è½¯è¿æ¥ï¼Œ<span class="hljs-literal">False</span>ä¸å¤åˆ¶ï¼Œè½¯è¿æ¥ä¼šè¢«å½“æˆæ–‡ä»¶å¤åˆ¶è¿‡æ¥ï¼Œé»˜è®¤<span class="hljs-literal">False</span><br>ignoreï¼šå¿½ç•¥æ¨¡å¼ï¼Œå¯ä¼ å…¥ignore_patterns()<br>copy_functionï¼šæ‹·è´æ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯æ‰§è¡Œçš„å¤„ç†å‡½æ•°ï¼Œé»˜è®¤ä¸ºcopy2ï¼ŒPython3æ–°å¢å‚æ•°<br>ignore_dangling_symlinksï¼šsysmlinksè®¾ç½®ä¸º<span class="hljs-literal">False</span>æ—¶ï¼Œæ‹·è´æŒ‡å‘æ–‡ä»¶å·²åˆ é™¤çš„è½¯è¿æ¥æ—¶ï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¦‚æœæƒ³æ¶ˆé™¤è¿™ä¸ªå¼‚å¸¸ï¼Œå¯ä»¥è®¾ç½®æ­¤å€¼ä¸º<span class="hljs-literal">True</span>ã€‚é»˜è®¤ä¸º<span class="hljs-literal">False</span>,Python3æ–°å¢å‚æ•°<br></code></pre></td></tr></tbody></table></figure><h5 id="ç¤ºä¾‹">ç¤ºä¾‹</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil,os<br>shutil.copytree(<span class="hljs-string">"./èµ„æ–™/ceshi"</span>,<span class="hljs-string">"./èµ„æ–™/taiget/"</span>,ignore=shutil.ignore_patterns(<span class="hljs-string">"abc.txt"</span>,<span class="hljs-string">"bcd.txt"</span>))<span class="hljs-comment">#å¿½ç•¥å“ªäº›æ–‡ä»¶</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç§»åŠ¨">ç§»åŠ¨</h3><p><code>shutil.move(src, dst)</code><br>åŠŸèƒ½ï¼šæ–‡ä»¶ç§»åŠ¨,å¯é‡å‘½åï¼Œä¼šåˆ é™¤åŸæ–‡ä»¶ï¼Œæ–°è·¯å¾„éœ€<strong>æŒ‡å®šæ–‡ä»¶å</strong>ï¼Œæ³¨æ„éœ€è¦æŒ‡å®šæ–‡ä»¶åï¼Œè¦ä¹ˆå¯ä»¥å‰ªè£æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ï¼Œè¦ä¹ˆå¯ä»¥é‡å‘½åã€‚</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">src</span>ï¼š**æºæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶**<br><span class="hljs-attribute">dst</span>ï¼š**ç§»åŠ¨è‡³dstæ–‡ä»¶å¤¹ï¼Œæˆ–å°†æ–‡ä»¶æ”¹åä¸ºdstæ–‡ä»¶ã€‚**å¦‚æœsrcä¸ºæ–‡ä»¶å¤¹ï¼Œè€Œdstä¸ºæ–‡ä»¶å°†ä¼šæŠ¥é”™<br><span class="hljs-attribute">copy_function</span>ï¼šæ‹·è´æ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯æ‰§è¡Œçš„å¤„ç†å‡½æ•°ã€‚é»˜è®¤ä¸ºcopy<span class="hljs-number">2</span>ï¼ŒPython<span class="hljs-number">3</span>æ–°å¢å‚æ•°<br></code></pre></td></tr></tbody></table></figure><h5 id="ç¤ºä¾‹-2">`ç¤ºä¾‹</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#é‡å‘½åæ–‡ä»¶å¤¹</span><br>shutil.move(<span class="hljs-string">'./èµ„æ–™/ceshi'</span>, <span class="hljs-string">'./èµ„æ–™/ceshi1'</span>)<br><span class="hljs-comment">#ç§»åŠ¨æ–‡ä»¶è¿›å…¥æ–°ç§»åŠ¨çš„æ–‡ä»¶å¤¹</span><br>shutil.move(<span class="hljs-string">'./èµ„æ–™/1-2.txt'</span>, <span class="hljs-string">'./èµ„æ–™/ceshi1'</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶å¤¹">åˆ é™¤æ–‡ä»¶å¤¹</h3><p>å‡½æ•°ï¼šshutil.rmtree(src)<br>å«ä¹‰ï¼šåˆ é™¤æ–‡ä»¶å¤¹ï¼›<br>å‚æ•°ï¼šsrcè¡¨ç¤ºæºæ–‡ä»¶å¤¹ï¼›<br>æ³¨æ„ï¼šåŒºåˆ«è¿™é‡Œå’Œosæ¨¡å—ä¸­remove()ã€rmdir()çš„ç”¨æ³•ï¼Œremove()æ–¹æ³•<strong>åªèƒ½åˆ é™¤æŸä¸ªæ–‡ä»¶</strong>ï¼Œ<strong>rmdir()åªèƒ½åˆ é™¤æŸä¸ªç©ºæ–‡ä»¶å¤¹</strong>ã€‚ä½†æ˜¯shutilæ¨¡å—ä¸­çš„rmtree()å¯ä»¥é€’å½’å½»åº•<strong>åˆ é™¤éç©ºæ–‡ä»¶å¤¹ï¼›</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å°†cæ–‡ä»¶å¤¹å½»åº•åˆ é™¤</span><br>src = <span class="hljs-string">r".\publish\osæ¨¡å—\test_shutil_c"</span><br>shutil.rmtree(src)<br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶">åˆ é™¤æ–‡ä»¶</h3><p>å‡½æ•°ï¼šåˆ é™¤æ–‡ä»¶ä½¿ç”¨<code>os.remove()</code>å‡½æ•°è¿›è¡Œæ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os  <span class="hljs-comment"># å¯¼å…¥æ¨¡å—</span><br><br><span class="hljs-comment"># åˆ é™¤ç›®æ ‡æ–‡ä»¶çš„æ ¹ç›®å½•</span><br>movabs_path = <span class="hljs-string">"åˆ é™¤æ–‡ä»¶çš„ç›®å½•"</span> <br><br><span class="hljs-comment"># åˆ é™¤æ“ä½œ</span><br>os.remove(rawabs_path+<span class="hljs-string">"test.txt"</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£å‹å’Œå‹ç¼©æ–‡ä»¶">è§£å‹å’Œå‹ç¼©æ–‡ä»¶</h3><p>å‡½æ•°ï¼š<code>make_archive(base_name, format, root_dir, â€¦)</code><br>åŠŸèƒ½ï¼šç”Ÿæˆå‹ç¼©æ–‡ä»¶</p><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">base_nameï¼šå‹ç¼©æ–‡ä»¶çš„æ–‡ä»¶åï¼Œä¸å…è®¸æœ‰æ‰©å±•åï¼Œå› ä¸ºä¼šæ ¹æ®å‹ç¼©æ ¼å¼ç”Ÿæˆç›¸åº”çš„æ‰©å±•å<br>formatï¼šå‹ç¼©æ ¼å¼<br>root_dirï¼šå°†åˆ¶å®šæ–‡ä»¶å¤¹è¿›è¡Œå‹ç¼©<br><span class="hljs-function"><span class="hljs-title">get_archive_formats</span><span class="hljs-params">()</span></span>ï¼š è·å–æ”¯æŒçš„å‹ç¼©æ–‡ä»¶æ ¼å¼ã€‚ç›®å‰æ”¯æŒçš„æœ‰ï¼štarã€zipã€gztarã€bztarã€‚åœ¨Python3è¿˜å¤šæ”¯æŒä¸€ç§æ ¼å¼xztar<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-3">ç¤ºä¾‹</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#æŒ‡å®šè¦å‹ç¼©çš„æ–‡ä»¶</span><br>base_name = <span class="hljs-string">"./èµ„æ–™/2.txt"</span><br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©å½¢å¼</span><br><span class="hljs-built_in">format</span> = <span class="hljs-string">"zip"</span><br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©åæ”¾åœ¨å“ªé‡Œ</span><br>root_dir = <span class="hljs-string">"./èµ„æ–™/"</span><br><br>shutil.make_archive(base_name, <span class="hljs-built_in">format</span>, root_dir)<br></code></pre></td></tr></tbody></table></figure><p>å‡½æ•°ï¼š<code>unpack_archive(filename, extract_dir=None, format=None)</code><br>åŠŸèƒ½ï¼šè§£å‹æ“ä½œ</p><figure class="highlight fortran"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fortran">filenameï¼šæ–‡ä»¶è·¯å¾„<br>extract_dirï¼šè§£å‹è‡³çš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚æ–‡ä»¶å¤¹å¯ä»¥ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ<br><span class="hljs-keyword">format</span>ï¼šè§£å‹æ ¼å¼ï¼Œé»˜è®¤ä¸º<span class="hljs-keyword">None</span>ï¼Œä¼šæ ¹æ®æ‰©å±•åè‡ªåŠ¨é€‰æ‹©è§£å‹æ ¼å¼<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-4">ç¤ºä¾‹</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><span class="hljs-comment">#æŒ‡å®šå‹ç¼©æ–‡ä»¶çš„åœ°å€</span><br>zip_path = <span class="hljs-string">"./èµ„æ–™/2.txt.zip"</span><br><span class="hljs-comment">#æŒ‡å®šè§£å‹ç¼©åˆ°å“ªé‡Œ</span><br>extract_dir = <span class="hljs-string">"./èµ„æ–™/ceshi1/"</span><br>shutil.unpack_archive(zip_path, extract_dir)<br></code></pre></td></tr></tbody></table></figure><h2 id="os">os</h2><p>åœ¨è¿™é‡Œæ•´ç†osçš„ç›¸å…³æ“ä½œå“¦ï¼Œç²—ç•¥è®°å½•ä¸€ä¸‹</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/silentwolfyh/article/details/74931123">https://blog.csdn.net/silentwolfyh/article/details/74931123</a></p><h3 id="osç›®å½•æ“ä½œ">osç›®å½•æ“ä½œ</h3><p>1.å¾—åˆ°å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰Pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„: os.getcwd()</p><p>2.è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å:os.listdir()</p><p>3.å‡½æ•°ç”¨æ¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶:os.remove()</p><p>4.åˆ é™¤å¤šä¸ªç›®å½•ï¼šos.removedirs(râ€œcï¼š\pythonâ€)</p><p>5.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼šos.path.isfile()</p><p>6.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•ï¼šos.path.isdir()</p><p>7.åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ï¼šos.path.isabs()</p><p>8.æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦çœŸåœ°å­˜:os.path.exists()</p><p>9.è¿”å›ä¸€ä¸ªè·¯å¾„çš„ç›®å½•åå’Œæ–‡ä»¶å:os.path.split() eg os.path.split(â€˜/home/swaroop/byte/code/poem.txtâ€™) ç»“æœï¼š(â€˜/home/swaroop/byte/codeâ€™, â€˜poem.txtâ€™)</p><p>10.åˆ†ç¦»æ‰©å±•åï¼šos.path.splitext()</p><p>11.è·å–è·¯å¾„åï¼šos.path.dirname()</p><p>12.è·å–æ–‡ä»¶åï¼šos.path.basename()</p><p>13.è¿è¡Œshellå‘½ä»¤: os.system()</p><p>14.è¯»å–å’Œè®¾ç½®ç¯å¢ƒå˜é‡:os.getenv() ä¸os.putenv()</p><p>15.ç»™å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦:os.linesep Windowsä½¿ç”¨â€™\r\nâ€™ï¼ŒLinuxä½¿ç”¨â€™\nâ€™è€ŒMacä½¿ç”¨â€™\râ€™</p><p>16.æŒ‡ç¤ºä½ æ­£åœ¨ä½¿ç”¨çš„å¹³å°ï¼š<a href="http://os.name">os.name</a> å¯¹äºWindowsï¼Œå®ƒæ˜¯â€™ntâ€™ï¼Œè€Œå¯¹äºLinux/Unixç”¨æˆ·ï¼Œå®ƒæ˜¯â€™posixâ€™</p><p>17.é‡å‘½åï¼šos.rename(oldï¼Œ new)</p><p>18.åˆ›å»ºå¤šçº§ç›®å½•ï¼šos.makedirs(râ€œcï¼š\python\testâ€)</p><p>19.åˆ›å»ºå•ä¸ªç›®å½•ï¼šos.mkdir(â€œtestâ€)</p><p>20.è·å–æ–‡ä»¶å±æ€§ï¼šos.stat(file)</p><p>21.ä¿®æ”¹æ–‡ä»¶æƒé™ä¸æ—¶é—´æˆ³ï¼šos.chmod(file)</p><p>22.ç»ˆæ­¢å½“å‰è¿›ç¨‹ï¼šos.exit()</p><p>23.è·å–æ–‡ä»¶å¤§å°ï¼šos.path.getsize(filename)</p><h3 id="2ã€æ–‡ä»¶æ“ä½œæ–¹æ³•å¤§å…¨ï¼š">2ã€æ–‡ä»¶æ“ä½œæ–¹æ³•å¤§å…¨ï¼š</h3><p>1.os.mknod(â€œtest.txtâ€) #åˆ›å»ºç©ºæ–‡ä»¶</p><p>2.fp = open(â€œtest.txtâ€,w) #ç›´æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</p><p>3.å…³äºopen æ¨¡å¼ï¼š</p><p>wï¼šä»¥å†™æ–¹å¼æ‰“å¼€ï¼Œ</p><p>aï¼šä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€ (ä» EOF å¼€å§‹, å¿…è¦æ—¶åˆ›å»ºæ–°æ–‡ä»¶)</p><p>r+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€</p><p>w+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )</p><p>a+ï¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a )</p><p>rbï¼šä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€</p><p>wbï¼šä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w )</p><p>abï¼šä»¥äºŒè¿›åˆ¶è¿½åŠ æ¨¡å¼æ‰“å¼€ (å‚è§ a )</p><p>rb+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ )</p><p>wb+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ )</p><p>ab+ï¼šä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ )</p><p>fp.read([size]) #sizeä¸ºè¯»å–çš„é•¿åº¦ï¼Œä»¥byteä¸ºå•ä½</p><p>fp.readline([size]) #è¯»ä¸€è¡Œï¼Œå¦‚æœå®šä¹‰äº†sizeï¼Œæœ‰å¯èƒ½è¿”å›çš„åªæ˜¯ä¸€è¡Œçš„ä¸€éƒ¨åˆ†</p><p>fp.readlines([size]) #æŠŠæ–‡ä»¶æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªlistçš„ä¸€ä¸ªæˆå‘˜ï¼Œå¹¶è¿”å›è¿™ä¸ªlistã€‚å…¶å®å®ƒçš„å†…éƒ¨æ˜¯é€šè¿‡å¾ªç¯è°ƒç”¨readline()æ¥å®ç°çš„ã€‚å¦‚æœæä¾›sizeå‚æ•°ï¼Œsizeæ˜¯è¡¨ç¤ºè¯»å–å†…å®¹çš„æ€»é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åªè¯»åˆ°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</p><p>fp.write(str) #æŠŠstrå†™åˆ°æ–‡ä»¶ä¸­ï¼Œwrite()å¹¶ä¸ä¼šåœ¨strååŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦</p><p>fp.writelines(seq) #æŠŠseqçš„å†…å®¹å…¨éƒ¨å†™åˆ°æ–‡ä»¶ä¸­(å¤šè¡Œä¸€æ¬¡æ€§å†™å…¥)ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿåªæ˜¯å¿ å®åœ°å†™å…¥ï¼Œä¸ä¼šåœ¨æ¯è¡Œåé¢åŠ ä¸Šä»»ä½•ä¸œè¥¿ã€‚</p><p>fp.close() #å…³é—­æ–‡ä»¶ã€‚pythonä¼šåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸ç”¨åè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸€åŠŸèƒ½æ²¡æœ‰ä¿è¯ï¼Œæœ€å¥½è¿˜æ˜¯å…»æˆè‡ªå·±å…³é—­çš„ä¹ æƒ¯ã€‚ å¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨å…³é—­åè¿˜å¯¹å…¶è¿›è¡Œæ“ä½œä¼šäº§ç”ŸValueError</p><p>fp.flush() #æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥ç¡¬ç›˜</p><p>fp.fileno() #è¿”å›ä¸€ä¸ªé•¿æ•´å‹çš„â€æ–‡ä»¶æ ‡ç­¾â€œ</p><p>fp.isatty() #æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç»ˆç«¯è®¾å¤‡æ–‡ä»¶(unixç³»ç»Ÿä¸­çš„)</p><p>fp.tell() #è¿”å›æ–‡ä»¶æ“ä½œæ ‡è®°çš„å½“å‰ä½ç½®ï¼Œä»¥æ–‡ä»¶çš„å¼€å¤´ä¸ºåŸç‚¹</p><p>fp.next() #è¿”å›ä¸‹ä¸€è¡Œï¼Œå¹¶å°†æ–‡ä»¶æ“ä½œæ ‡è®°ä½ç§»åˆ°ä¸‹ä¸€è¡Œã€‚æŠŠä¸€ä¸ªfileç”¨äºfor â€¦ in fileè¿™æ ·çš„è¯­å¥æ—¶ï¼Œå°±æ˜¯è°ƒç”¨next()å‡½æ•°æ¥å®ç°éå†çš„ã€‚</p><p>fp.seek(offset[,whence]) #å°†æ–‡ä»¶æ‰“æ“ä½œæ ‡è®°ç§»åˆ°offsetçš„ä½ç½®ã€‚è¿™ä¸ªoffsetä¸€èˆ¬æ˜¯ç›¸å¯¹äºæ–‡ä»¶çš„å¼€å¤´æ¥è®¡ç®—çš„ï¼Œä¸€èˆ¬ä¸ºæ­£æ•°ã€‚ä½†å¦‚æœæä¾›äº†whenceå‚æ•°å°±ä¸ä¸€å®šäº†ï¼Œwhenceå¯ä»¥ä¸º0è¡¨ç¤ºä»å¤´å¼€å§‹è®¡ç®—ï¼Œ1è¡¨ç¤ºä»¥å½“å‰ä½ç½®ä¸ºåŸç‚¹è®¡ç®—ã€‚2è¡¨ç¤ºä»¥æ–‡ä»¶æœ«å°¾ä¸ºåŸç‚¹è¿›è¡Œè®¡ç®—ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ–‡ä»¶ä»¥aæˆ–a+çš„æ¨¡å¼æ‰“å¼€ï¼Œæ¯æ¬¡è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶æ“ä½œæ ‡è®°ä¼šè‡ªåŠ¨è¿”å›åˆ°æ–‡ä»¶æœ«å°¾ã€‚</p><h3 id="3ã€ç›®å½•æ“ä½œæ–¹æ³•å¤§å…¨">3ã€ç›®å½•æ“ä½œæ–¹æ³•å¤§å…¨</h3><p>1.åˆ›å»ºç›®å½•</p><p>os.mkdir(â€œfileâ€)</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> æ–‡ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> æ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer20 æœ‰æ•ˆçš„æ‹¬å·</title>
      <link href="/2021/11/24/leetcode/leetcode20/"/>
      <url>/2021/11/24/leetcode/leetcode20/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ‰æ•ˆçš„æ‹¬å·</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€™ï¼Œâ€˜)â€™ï¼Œâ€˜{â€™ï¼Œâ€˜}â€™ï¼Œâ€˜[â€™ï¼Œâ€˜]â€™&nbsp;çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"()"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"()[]{}"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"(]"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"([)]"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-5ï¼š">ç¤ºä¾‹ 5ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"{[]}"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length &lt;= 104</li><li>s ä»…ç”±æ‹¬å· â€˜()[]{}â€™ ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨<code>æ ˆå’Œå­—å…¸</code>è¾…åŠ©åˆ¤æ–­ï¼Œå¦‚æœå­—ç¬¦æ˜¯å¯¹åº”æ‹¬å·çš„å³æ‹¬å·ï¼Œå°±å¼¹å‡ºï¼Œå¦åˆ™å‹å…¥ï¼Œæœ€åæŸ¥çœ‹æ ˆä¸­æ˜¯å¦è¿˜å‰©å…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        stack = []<br>        mmap = {<span class="hljs-string">'('</span>:<span class="hljs-string">')'</span>,<span class="hljs-string">')'</span>:<span class="hljs-string">'a'</span>,<span class="hljs-string">'{'</span>:<span class="hljs-string">'}'</span>,<span class="hljs-string">'}'</span>:<span class="hljs-string">'b'</span>,<span class="hljs-string">'['</span>:<span class="hljs-string">']'</span>,<span class="hljs-string">']'</span>:<span class="hljs-string">'c'</span>}<br>        <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span>(stack):<br>                top = stack[<span class="hljs-built_in">len</span>(stack)-<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> stack <span class="hljs-keyword">or</span> mmap[top] != ch):<br>                stack.append(ch)<br>            <span class="hljs-keyword">elif</span>(stack <span class="hljs-keyword">and</span>  mmap[top] == ch):<br>                stack.pop()<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> stack<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer859 äº²å¯†å­—ç¬¦ä¸²</title>
      <link href="/2021/11/23/leetcode/leetcode-offer859/"/>
      <url>/2021/11/23/leetcode/leetcode-offer859/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äº²å¯†å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ goal ï¼Œåªè¦æˆ‘ä»¬å¯ä»¥é€šè¿‡äº¤æ¢ s ä¸­çš„ä¸¤ä¸ªå­—æ¯å¾—åˆ°ä¸ goal ç›¸ç­‰çš„ç»“æœï¼Œå°±è¿”å› true ï¼›å¦åˆ™è¿”å› false ã€‚</p><p>äº¤æ¢å­—æ¯çš„å®šä¹‰æ˜¯ï¼šå–ä¸¤ä¸ªä¸‹æ ‡ i å’Œ j ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸”æ»¡è¶³ i != j ï¼Œæ¥ç€äº¤æ¢ s[i] å’Œ s[j] å¤„çš„å­—ç¬¦ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œåœ¨ â€œabcdâ€ ä¸­äº¤æ¢ä¸‹æ ‡ 0 å’Œä¸‹æ ‡ 2 çš„å…ƒç´ å¯ä»¥ç”Ÿæˆ â€œcbadâ€ ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"ab"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"ba"</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä½ å¯ä»¥äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'b'</span> ç”Ÿæˆ <span class="hljs-string">"ba"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"ab"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"ab"</span><br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šä½ åªèƒ½äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'b'</span> ç”Ÿæˆ <span class="hljs-string">"ba"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ä¸ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼šs = <span class="hljs-string">"aa"</span>, <span class="hljs-keyword">goal</span> = <span class="hljs-string">"aa"</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä½ å¯ä»¥äº¤æ¢ s[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span> å’Œ s[<span class="hljs-number">1</span>] = <span class="hljs-string">'a'</span> ç”Ÿæˆ <span class="hljs-string">"aa"</span>ï¼Œæ­¤æ—¶ s å’Œ <span class="hljs-keyword">goal</span> ç›¸ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"aaaaaaabc"</span>, <span class="hljs-attr">goal</span> = <span class="hljs-string">"aaaaaaacb"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length, goal.length &lt;= 2 * 104</li><li>s å’Œ goal ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¦‚æœé•¿åº¦ä¸ä¸€è‡´å°±ç›´æ¥è¿”å›Falseï¼Œdiffç”¨æ¥å­˜å‚¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸åŒçš„å­—ç¬¦çš„ç›¸åº”ä¸‹æ ‡ï¼›ç„¶ååˆ¤æ–­diffçš„å…ƒç´ æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼š</p><p>1ï¼Œdiffæœ‰ä¸¤ä¸ªå…ƒç´ å¹¶ä¸”è¿™ä¸¤ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å¯¹åº”ç›¸ç­‰ï¼›</p><p>2ï¼Œdiffä¸­å…ƒç´ ä¸ºç©ºï¼ˆä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼‰ï¼ŒåŒæ—¶sä¸­æœ‰é‡å¤å­—ç¬¦ï¼ˆä½¿ç”¨setæ¥åˆ¤æ–­ï¼‰ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buddyStrings</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, goal: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)!=<span class="hljs-built_in">len</span>(goal)):<span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-comment"># if(s==goal and len(set(s))!=len(s)): return True #æ”¾åœ¨å‰é¢ä¼šå¢åŠ åˆ¤æ–­æ—¶é—´ ç›¸å½“äºO(2N)</span><br>        diff = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span>(s[i]!=goal[i]):diff.append(i)<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(diff)==<span class="hljs-number">2</span> <span class="hljs-keyword">and</span> s[diff[<span class="hljs-number">0</span>]]==goal[diff[<span class="hljs-number">1</span>]] <span class="hljs-keyword">and</span> s[diff[<span class="hljs-number">1</span>]]==goal[diff[<span class="hljs-number">0</span>]]): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(diff)==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">set</span>(s))!=<span class="hljs-built_in">len</span>(s)): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å­—ç¬¦ä¸² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer32-3 ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ â…¢</title>
      <link href="/2021/11/22/leetcode/leetcode-offer32-3/"/>
      <url>/2021/11/22/leetcode/leetcode-offer32-3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ â…¢</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰è¡Œå†æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: <code>[3,9,20,null,null,15,7]</code>,</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">  <span class="hljs-number">3</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>  /  <span class="hljs-string">\</span><br> <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><p>è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  [<span class="hljs-number">3</span>],<br>  [<span class="hljs-number">20</span>,<span class="hljs-number">9</span>],<br>  [<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>è®°å½•æœ¬å±‚çš„æ•°å­—ä¸ªæ•°ï¼Œå°†æœ¬å±‚çš„å…ƒç´ å…¨éƒ¨å¼¹å‡ºåˆ°åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶å°†ä¸‹å±‚å…ƒç´ å‹è¿›é˜Ÿåˆ—ä¸­ï¼›åªæ˜¯è¦æ ¹æ®flagï¼Œæ¥å°†åˆ—è¡¨å€’åº ã€‚</p><blockquote><p>åˆ—è¡¨å€’å™çš„æ–¹æ³•ï¼š</p><p>1ï¼Œtemp.reverse()  ç›´æ¥åŸåœ°ä¿®æ”¹å“¦~</p><p>2ï¼Œtemp = temp[::-1]</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> []<br>        queue ,result,flag = deque(),[],<span class="hljs-literal">False</span><br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            tmp = []<br>            num = <span class="hljs-built_in">len</span>(queue)<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>                top = queue.popleft()<br>                tmp.append(top.val)<br>                <span class="hljs-keyword">if</span>(top.left): queue.append(top.left)<br>                <span class="hljs-keyword">if</span>(top.right): queue.append(top.right)<br>            <span class="hljs-keyword">if</span> flag: tmp = tmp[::-<span class="hljs-number">1</span>] <span class="hljs-comment">#tmp.reverse() # tmp = tmp[::-1]</span><br>            flag = <span class="hljs-keyword">not</span> flag<br>            result.append(<span class="hljs-built_in">list</span>(tmp))<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>å»æ‰å€’å™çš„æ“ä½œï¼Œæ ¹æ®flagçš„å€¼æ›´æ”¹tmpçš„æ’å…¥æ–¹å‘ï¼Œå°†tmpå£°æ˜ä¸º<code>deque()</code>ï¼Œå³æ’ä¸º<code>append</code>,å·¦æ’ä¸º<code>appendleft</code>ï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> []<br>        queue ,result,flag = deque(),[],<span class="hljs-literal">False</span><br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            tmp = deque()<br>            num = <span class="hljs-built_in">len</span>(queue)<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>                top = queue.popleft()<br>                <span class="hljs-keyword">if</span> flag: tmp.appendleft(top.val)<br>                <span class="hljs-keyword">else</span>:tmp.append(top.val)<br>                <span class="hljs-keyword">if</span>(top.left): queue.append(top.left)<br>                <span class="hljs-keyword">if</span>(top.right): queue.append(top.right)<br>            flag = <span class="hljs-keyword">not</span> flag<br>            result.append(<span class="hljs-built_in">list</span>(tmp))<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer32-1 ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘</title>
      <link href="/2021/11/21/leetcode/leetcode-offer32-1/"/>
      <url>/2021/11/21/leetcode/leetcode-offer32-1/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>],<br>    <span class="hljs-number">3</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>    /  <span class="hljs-string">\</span><br>   <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br> è¿”å›ï¼š  <br>   [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¸¸è§„çš„å±‚åºéå†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span> []<br>        queue = deque()<br>        result = []<br>        queue.append(root)<br>        <span class="hljs-keyword">while</span>(queue):<br>            top = queue.popleft()<br>            result.append(top.val)<br>            <span class="hljs-keyword">if</span> top.left:queue.append(top.left)<br>            <span class="hljs-keyword">if</span> top.right:queue.append(top.right)<br>        <span class="hljs-keyword">return</span> result<br><br><span class="hljs-comment">#å¦‚æœæŒ‰ç…§å±‚æ•°æ¥æ‰“å°ï¼Œé‚£ä¹ˆè®°å½•æ¯æ¬¡çš„queueé•¿åº¦ï¼ˆæœ¬å±‚é•¿åº¦ï¼‰ï¼ŒæŒ‰ç…§ç°æœ‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ¥ï¼ˆæœ¬å±‚ï¼‰å‹å…¥åç»­å…ƒç´ ï¼ˆä¸‹ä¸€å±‚ï¼‰ã€‚å°±å¯ä»¥åˆ†å±‚æ¬¡æ‰“å°</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer38 å­—ç¬¦ä¸²çš„æ’åˆ—</title>
      <link href="/2021/11/20/leetcode/leetcode-offer38/"/>
      <url>/2021/11/20/leetcode/leetcode-offer38/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å­—ç¬¦ä¸²çš„æ’åˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚</p><p>ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"abc"</span><br>è¾“å‡ºï¼š[<span class="hljs-string">"abc"</span>,<span class="hljs-string">"acb"</span>,<span class="hljs-string">"bac"</span>,<span class="hljs-string">"bca"</span>,<span class="hljs-string">"cab"</span>,<span class="hljs-string">"cba"</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s çš„é•¿åº¦ &lt;= 8</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="æ€è·¯ä¸€">æ€è·¯ä¸€</h4><p>å›ºå®šsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ,å¾—åˆ°å»æ‰è¿™ä¸ªå…ƒç´ çš„åç»­å…ƒç´ çš„å…¨æ’åˆ—æƒ…å†µï¼ˆé€’å½’è°ƒç”¨ï¼‰;</p><p>ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç¡®å®šæ–¹æ³•ä½¿ç”¨å¾ªç¯éå†ï¼Œä½†æ˜¯è¿™é‡Œè¦sä¸­å¯èƒ½å­˜åœ¨é‡å¤å…ƒç´ ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨setå»æ‰é‡å¤å…ƒç´ ï¼Œä¹Ÿæœ‰å‰ªæçš„ä½œç”¨ï¼›</p><blockquote><p>å»æ‰å­—ç¬¦ä¸²çš„æŸå…ƒç´ ï¼ˆæˆ–è€…å­—ç¬¦ä¸²ï¼‰çš„æ–¹æ³•</p><p>ä½¿ç”¨replaceå‡½æ•°æ›¿æ¢å­—ç¬¦ä¸ºç©ºâ€“<strong><code>s.replace(x,'',1)</code></strong></p><ul><li><p>replaceæ–¹æ³•</p><p><code>str.replace(old,new,max=string.count(old)ï¼‰</code></p></li></ul><p>æœ€å¤šæ›¿æ¢maxä¸ªoldå­—ç¬¦ä¸ºnewå­—ç¬¦ï¼Œé»˜è®¤å…¨éƒ¨æ›¿æ¢ï¼Œè¿™é‡Œåªæ›¿æ¢1ä¸ªå“¦~</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">permutation</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> s): <span class="hljs-keyword">return</span> [] <br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(s)==<span class="hljs-number">1</span>): <span class="hljs-keyword">return</span> [s]<br>        result = []<br>        sset = <span class="hljs-built_in">set</span>(s)<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> sset:<br>           temp = [x + item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.permutation(s.replace(x,<span class="hljs-string">''</span>,<span class="hljs-number">1</span>))]<br>           result += temp<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><h4 id="æ€è·¯äºŒ">æ€è·¯äºŒ</h4><p>ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†çš„æ€æƒ³ï¼Œæ¨¡æ‹Ÿä¸ºæ ‘çš„éå†èŠ‚ç‚¹ï¼Œéå†xä½ç½®å¤„ä¸ºxåŠxä¹‹åç´¢å¼•å…ƒç´ çš„æƒ…å†µï¼Œdfs(x) æ˜¯å›ºå®šå‰é¢0åˆ°xï¼Œæ¥æ·±ä¼˜xæ­¤å…ƒç´ æƒ…å†µã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">permutation</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:</span><br>        c, res = <span class="hljs-built_in">list</span>(s), []<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">x</span>):</span><br>            <span class="hljs-keyword">if</span> x == <span class="hljs-built_in">len</span>(c) - <span class="hljs-number">1</span>:<br>                res.append(<span class="hljs-string">''</span>.join(c))   <span class="hljs-comment"># æ·»åŠ æ’åˆ—æ–¹æ¡ˆ</span><br>                <span class="hljs-keyword">return</span><br>            dic = <span class="hljs-built_in">set</span>()<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x, <span class="hljs-built_in">len</span>(c)):<br>                <span class="hljs-keyword">if</span> c[i] <span class="hljs-keyword">in</span> dic: <span class="hljs-keyword">continue</span> <span class="hljs-comment"># é‡å¤ï¼Œå› æ­¤å‰ªæ</span><br>                dic.add(c[i])<br>                c[i], c[x] = c[x], c[i]  <span class="hljs-comment"># äº¤æ¢ï¼Œå°† c[i] å›ºå®šåœ¨ç¬¬ x ä½</span><br>                dfs(x + <span class="hljs-number">1</span>)               <span class="hljs-comment"># å¼€å¯å›ºå®šç¬¬ x + 1 ä½å­—ç¬¦</span><br>                c[i], c[x] = c[x], c[i]  <span class="hljs-comment"># æ¢å¤äº¤æ¢</span><br>        dfs(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é€’å½’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer31 æ ˆçš„å‹å…¥ï¼Œå¼¹å‡ºåºåˆ—</title>
      <link href="/2021/11/19/leetcode/leetcode-offer31/"/>
      <url>/2021/11/19/leetcode/leetcode-offer31/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ ˆçš„å‹å…¥ï¼Œå¼¹å‡ºåºåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œåºåˆ— {1,2,3,4,5} æ˜¯æŸæ ˆçš„å‹æ ˆåºåˆ—ï¼Œåºåˆ— {4,5,3,2,1} æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½† {4,3,5,1,2} å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">è¾“å…¥ï¼špushed = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], popped = [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š<br>push<span class="hljs-function"><span class="hljs-params">(<span class="hljs-number">1</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span>, <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-number">4</span>)</span>, <span class="hljs-title">pop</span><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">4</span>,<br>push<span class="hljs-function"><span class="hljs-params">(<span class="hljs-number">5</span>)</span>, <span class="hljs-title">pop</span><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">5</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">3</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">2</span>, pop<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">pushed</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">popped</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br>è§£é‡Šï¼š<span class="hljs-number">1</span> ä¸èƒ½åœ¨ <span class="hljs-number">2</span> ä¹‹å‰å¼¹å‡ºã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= pushed.length == popped.length &lt;= 1000</li><li>0 &lt;= pushed[i], popped[i] &lt; 1000</li><li>pushed&nbsp;æ˜¯&nbsp;popped&nbsp;çš„æ’åˆ—ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æŒ‰ç…§å‹å…¥å’Œå¼¹å‡ºåºåˆ—å¯ä»¥åŒå‘å”¯ä¸€ç¡®å®šæ ˆçš„å‹å…¥å¼¹å‡ºçš„é¡ºåºï¼Œæ‰€ä»¥æŒ‰ç…§å¯¹åº”çš„æ­¤åºåˆ—ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‹å‡ºå’Œå¼¹å‡ºçš„åœºæ™¯ï¼Œæœ€ç»ˆå¦‚æœå¯ä»¥æˆç«‹ï¼Œé‚£ä¹ˆæ ˆä¸­çš„æ•°æ®åº”è¯¥å…¨éƒ¨å¼¹å‡ºäº†ã€‚<br>å…·ä½“çš„åšæ³•å°±æ˜¯æŒ‰ç…§å‹å…¥åºåˆ—çš„é¡ºåºï¼Œæ¯å‹å…¥ä¸€ä¸ªæ•°å€¼ï¼Œå°±æ¯”å¯¹å¼¹å‡ºåºåˆ—çš„å€¼ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯ä»¥å¼¹å‡ºï¼Œç­‰åˆ°å‹å…¥çš„æ•°å€¼éƒ½å¤„ç†å®Œæˆï¼ŒæŸ¥çœ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸æ˜¯ç©ºå°±è¯´æ˜å¼¹å‡ºåºåˆ—æ—¶ä¸èƒ½åŒ¹é…çš„ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validateStackSequences</span>(<span class="hljs-params">self, pushed: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], popped: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-comment">#æ¨¡æ‹Ÿåœºæ™¯</span><br>        stack = []<br>        i = <span class="hljs-number">0</span><br>        j = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(i&lt;<span class="hljs-built_in">len</span>(pushed)):<br>            stack.append(pushed[i])<br>            <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(stack) <span class="hljs-keyword">and</span> stack[<span class="hljs-built_in">len</span>(stack)-<span class="hljs-number">1</span>]==popped[j]):<br>                j += <span class="hljs-number">1</span><br>                stack.pop()<br>            i += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> stack<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offerleetcode-offer563 äºŒå‰æ ‘çš„å¡åº¦</title>
      <link href="/2021/11/18/leetcode/leetcode-offer563/"/>
      <url>/2021/11/18/leetcode/leetcode-offer563/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„å¡åº¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè®¡ç®— æ•´ä¸ªæ ‘ çš„å¡åº¦ ã€‚<br>ä¸€ä¸ªæ ‘çš„ èŠ‚ç‚¹çš„å¡åº¦ å®šä¹‰å³ä¸ºï¼Œè¯¥èŠ‚ç‚¹å·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œå’Œå³å­æ ‘èŠ‚ç‚¹ä¹‹å’Œçš„ å·®çš„ç»å¯¹å€¼ ã€‚å¦‚æœæ²¡æœ‰å·¦å­æ ‘çš„è¯ï¼Œå·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œä¸º 0 ï¼›æ²¡æœ‰å³å­æ ‘çš„è¯ä¹Ÿæ˜¯ä¸€æ ·ã€‚ç©ºç»“ç‚¹çš„å¡åº¦æ˜¯ 0 ã€‚</p><p>æ•´ä¸ªæ ‘ çš„å¡åº¦å°±æ˜¯å…¶æ‰€æœ‰èŠ‚ç‚¹çš„å¡åº¦ä¹‹å’Œã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt1.jpg" alt="img"></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [1,2,3]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š<br>èŠ‚ç‚¹<span class="hljs-number"> 2 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 3 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 1 </span>çš„å¡åº¦ï¼š|2-3| = 1ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 2 </span>ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 3 </span>ï¼‰<br>å¡åº¦æ€»å’Œï¼š0 +<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 1 </span>= 1<br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt1.jpg" alt="img"></p><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroot = [4,2,9,3,5,null,7]<br>è¾“å‡ºï¼š15<br>è§£é‡Šï¼š<br>èŠ‚ç‚¹<span class="hljs-number"> 3 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 5 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 7 </span>çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 2 </span>çš„å¡åº¦ï¼š|3-5| = 2ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 3 </span>ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 5 </span>ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 9 </span>çš„å¡åº¦ï¼š|0-7| = 7ï¼ˆæ²¡æœ‰å·¦å­æ ‘ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 0 </span>ï¼›å³å­æ ‘æ­£å¥½æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯<span class="hljs-number"> 7 </span>ï¼‰<br>èŠ‚ç‚¹<span class="hljs-number"> 4 </span>çš„å¡åº¦ï¼š|(3+5+2)-(9+7)| = |10-16| = 6ï¼ˆå·¦å­æ ‘å€¼ä¸º 3ã€5 å’Œ<span class="hljs-number"> 2 </span>ï¼Œå’Œæ˜¯<span class="hljs-number"> 10 </span>ï¼›å³å­æ ‘å€¼ä¸º<span class="hljs-number"> 9 </span>å’Œ<span class="hljs-number"> 7 </span>ï¼Œå’Œæ˜¯<span class="hljs-number"> 16 </span>ï¼‰<br>å¡åº¦æ€»å’Œï¼š0 +<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 7 </span>+<span class="hljs-number"> 6 </span>= 15<br><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><p><img src="https://assets.leetcode.com/uploads/2020/10/20/tilt3.jpg" alt="img"></p><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šroot = [<span class="hljs-number">21,7,14,1</span>,<span class="hljs-number">1,2,2,3</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">9</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®çš„èŒƒå›´åœ¨ <code>[0, 104]</code> å†…</li><li><code>-1000 &lt;= Node.val &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªè®¡ç®—æ ‘çš„å„ä¸ªèŠ‚ç‚¹çš„å­æ ‘ä¹‹å’Œï¼Œä¸€ä¸ªç”¨äºè®¡ç®—å¯¹åº”çš„å·®å€¼ä¹‹å’Œã€‚åœ¨è®¡ç®—å­æ ‘ä¹‹å’Œæ—¶å¯ä»¥ç›´æ¥ç”¨ååºéå†ï¼Œ<strong>æ›´æ–°èŠ‚ç‚¹çš„valå€¼ä¸ºå­æ ‘å’Œ</strong>ã€‚æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findTilt</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setaddTree</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#ååºéå†</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> <br>            setaddTree(root.left)<br>            setaddTree(root.right)<br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            root.val = root.val + Tleft + Tright<br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minasTree</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root): <span class="hljs-keyword">return</span> <br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            self.sumResult += <span class="hljs-built_in">abs</span>(Tleft - Tright)<br>            minasTree(root.left)<br>            minasTree(root.right)<br>        self.sumResult = <span class="hljs-number">0</span><br>        setaddTree(root)<br>        minasTree(root)<br>        <span class="hljs-keyword">return</span> self.sumResult<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šæ— éœ€ä¸¤ä¸ªå‡½æ•°ï¼Œ<strong>åœ¨ååºéå†æ±‚å’Œçš„æ—¶å€™å°±å¯ä»¥å¾—åˆ°å­æ ‘çš„å·®å€¼</strong>ï¼Œå°†å…¶ç´¯åŠ å³å¯ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findTilt</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setaddTree</span>(<span class="hljs-params">root</span>):</span> <span class="hljs-comment">#ååºéå†</span><br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<span class="hljs-keyword">return</span> <br>            setaddTree(root.left)<br>            setaddTree(root.right)<br>            Tleft = root.left.val <span class="hljs-keyword">if</span> root.left <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            Tright = root.right.val <span class="hljs-keyword">if</span> root.right <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            root.val = root.val + Tleft + Tright<br>            self.sumResult += <span class="hljs-built_in">abs</span>(Tleft - Tright)<br><br>        self.sumResult = <span class="hljs-number">0</span><br>        setaddTree(root)<br>        <span class="hljs-keyword">return</span> self.sumResult<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer57 å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—</title>
      <link href="/2021/11/17/leetcode/leetcode-offer57/"/>
      <url>/2021/11/17/leetcode/leetcode-offer57/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„å’Œä¸€ä¸ªæ•°å­—sï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œæ­£å¥½æ˜¯sã€‚å¦‚æœæœ‰å¤šå¯¹æ•°å­—çš„å’Œç­‰äºsï¼Œåˆ™è¾“å‡ºä»»æ„ä¸€å¯¹å³å¯ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[2,7,11,15]</span>, target = 9<br>è¾“å‡ºï¼š<span class="hljs-comment">[2,7]</span> æˆ–è€… <span class="hljs-comment">[7,2]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[10,26,30,31,47,60]</span>, target = 40<br>è¾“å‡ºï¼š<span class="hljs-comment">[10,30]</span> æˆ–è€… <span class="hljs-comment">[30,10]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= nums.length &lt;= 10^5</li><li>1 &lt;= nums[i] &lt;= 10^6</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å› ä¸ºæ—¶å•è°ƒé€’å¢çš„æ•°ç»„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä»ä¸¤ç«¯æ‰¾èµ·ï¼Œå‘ä¸­é—´æ”¶ç¼©ã€‚å¯ä»¥ç”¨é€’å½’çš„åŒæŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨whileå¾ªç¯éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><h4 id="é€’å½’">é€’å½’</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span>(<span class="hljs-params">left,right</span>):</span><br>            <span class="hljs-keyword">if</span>(left&gt;=right): <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]==target): <br>                self.result = [nums[left],nums[right]]<br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]&gt;target): find(left,right-<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span>: find(left+<span class="hljs-number">1</span>,right)<br>        self.result = []<br>        find(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> self.result<br></code></pre></td></tr></tbody></table></figure><h4 id="å¾ªç¯">å¾ªç¯</h4><p>ä½¿ç”¨whileå¾ªç¯æ¯”ä½¿ç”¨é€’å½’çš„æ–¹æ³•ï¼Œç©ºé—´å¤æ‚åº¦æ›´å°ï¼Œæ›´å¿«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        left,right = <span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span>(left&lt;right):<br>            <span class="hljs-keyword">if</span>(nums[left]+nums[right]==target): <span class="hljs-keyword">return</span> [nums[left],nums[right]]<br>            <span class="hljs-keyword">elif</span>(nums[left]+nums[right]&lt;target): left+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>: right -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> []<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŒæŒ‡é’ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer55-â…  äºŒå‰æ ‘çš„æ·±åº¦</title>
      <link href="/2021/11/16/leetcode/leetcode-offer55-1/"/>
      <url>/2021/11/16/leetcode/leetcode-offer55-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„æ·±åº¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ±‚è¯¥æ ‘çš„æ·±åº¦ã€‚ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹ä¾æ¬¡ç»è¿‡çš„èŠ‚ç‚¹ï¼ˆå«æ ¹ã€å¶èŠ‚ç‚¹ï¼‰å½¢æˆæ ‘çš„ä¸€æ¡è·¯å¾„ï¼Œæœ€é•¿è·¯å¾„çš„é•¿åº¦ä¸ºæ ‘çš„æ·±åº¦ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ä¾‹å¦‚ï¼š</p><p>ç»™å®šäºŒå‰æ ‘<code> [3,9,20,null,null,15,7]</code>,</p><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript"> <span class="hljs-number">3</span><br> / <span class="hljs-string">\</span><br><span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>  /  <span class="hljs-string">\</span><br> <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><p>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>ç›´æ¥æ·±åº¦ä¼˜å…ˆéå†å³å¯ï¼Œç›´æ¥åˆ©ç”¨<code>maxDepth</code>å‡½æ•°ï¼Œæ³¨æ„åœ¨å†…éƒ¨è°ƒç”¨<code>maxDepth</code>å‡½æ•°æ—¶è¦ä½¿ç”¨<code>self</code>æ¥è°ƒç”¨æœ¬å‡½æ•°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + <span class="hljs-built_in">max</span>(self.maxDepth(root.left),self.maxDepth(root.right))<br><br></code></pre></td></tr></tbody></table></figure><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>ç›´æ¥ä½¿ç”¨å±‚åºéå†å¾—åˆ°æ·±åº¦ã€‚ä½¿ç”¨ä¸¤ä¸ªåˆ—è¡¨<code>tmp</code>å’Œ<code>queue</code>ç»“åˆå®ç°â€œé˜Ÿåˆ—â€çš„ä½œç”¨ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        queue, res = [root], <span class="hljs-number">0</span>        <span class="hljs-comment">#ä½¿ç”¨åˆ—è¡¨å®ç°queue</span><br>        <span class="hljs-keyword">while</span> queue:<br>            tmp = []                  <span class="hljs-comment">#åˆå§‹åŒ– ä¿å­˜ä¸€å±‚çš„ä¿¡æ¯</span><br>            <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> queue:        <span class="hljs-comment">#å°†queueçš„ä¸‹ä¸€å±‚éƒ½æ·»åŠ åˆ°tmpä¸­</span><br>                <span class="hljs-keyword">if</span> node.left: tmp.append(node.left)<br>                <span class="hljs-keyword">if</span> node.right: tmp.append(node.right)<br>            queue = tmp               <span class="hljs-comment">#æ›´æ–°</span><br>            res += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer50 ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</title>
      <link href="/2021/11/15/leetcode/leetcode-offer50/"/>
      <url>/2021/11/15/leetcode/leetcode-offer50/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨å­—ç¬¦ä¸² s ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚ s åªåŒ…å«å°å†™å­—æ¯ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šs = <span class="hljs-string">"abaccdeff"</span><br>è¾“å‡ºï¼š'b'<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šs = <span class="hljs-string">""</span> <br>è¾“å‡ºï¼š' '<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= s çš„é•¿åº¦ &lt;= 50000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ–¹æ³•æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å­—ç¬¦çŠ¶æ€ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">firstUniqChar</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>        flag = {}<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-comment"># if(i in flag):</span><br>            <span class="hljs-comment">#     flag[i] += 1</span><br>            <span class="hljs-comment"># else:</span><br>            <span class="hljs-comment">#     flag[i] = 1</span><br>            flag[i] = <span class="hljs-keyword">not</span> i <span class="hljs-keyword">in</span> flag <span class="hljs-comment">#å¯ä»¥ç›´æ¥æ ‡è®° æ²¡å‡ºç°åˆ™ä¸ºçœŸ</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> flag:<br>            <span class="hljs-keyword">if</span>(flag[x]): <span class="hljs-keyword">return</span> x<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">' '</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨æŸ¥çœ‹å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨ké”®æ—¶ï¼Œpython2å¯ä»¥ä½¿ç”¨<code>dict.has_key(k)</code>,ä½†æ˜¯python3å·²ç»åˆ é™¤æ­¤å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨<code>k in dict</code>ï¼ŒåŒæ—¶å¦‚æœéå†dictï¼Œä¹Ÿæ˜¯è¿”å›çš„keyå“¦ã€‚<br>å¦å¤–ï¼Œè¿™é‡Œæ— éœ€è®°å½•æ¯ä¸ªå­—ç¬¦çš„ä¸ªæ•°ï¼Œåªéœ€è¦æ ‡è®°çœŸå‡å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å“ˆå¸Œè¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡leetcode-offer32-â…¡ ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘â…¡</title>
      <link href="/2021/11/12/leetcode/leetcode-offer32/"/>
      <url>/2021/11/12/leetcode/leetcode-offer32/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘â…¡</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ä¾‹å¦‚:<br>ç»™å®šäºŒå‰æ ‘: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>],<br>    <span class="hljs-number">3</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">9</span>  <span class="hljs-number">20</span><br>    /  <span class="hljs-string">\</span><br>   <span class="hljs-number">15</span>   <span class="hljs-number">7</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š<br><br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[3]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[9,20]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[15,7]</span></span><br><span class="hljs-comment">]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>èŠ‚ç‚¹æ€»æ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h4 id="è§£æ³•ä¸€">è§£æ³•ä¸€</h4><p>å…¶å®æ˜¯å±‚åºéå†ï¼Œæ³¨æ„æ˜¯æŒ‰ç…§æ·±åº¦æ ‡è¯†çš„å±‚åºéå†ã€‚åœ¨pythonä¸­æ˜¯ä½¿ç”¨dequeè¿™ä¸ªæ•°æ®ç»“æ„å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ã€‚<br>åœ¨å³ç«¯è¾“å‡ºè¾“å‡ºæ˜¯é‡‡ç”¨<code>append</code> å’Œ<code>pop</code>ï¼Œåœ¨å·¦ç«¯è¾“å…¥è¾“å‡ºé‡‡ç”¨çš„æ˜¯<code>appendleft</code>å’Œ<code>popleft</code>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> root):<br>            <span class="hljs-keyword">return</span> []<br>        x = deque()<br>        result = []<br>        temp = []<br>        depth = -<span class="hljs-number">1</span><br>        x.append((root,<span class="hljs-number">0</span>))<br>        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(x)):<br>            item = x.popleft()<br>            <span class="hljs-keyword">if</span>(depth!=-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> depth!=item[<span class="hljs-number">1</span>]):<br>                result.append(temp)<br>                temp = []<br>                <span class="hljs-comment"># temp.clear() # temp.clear()å¾ˆå±é™©ï¼Œappendå°±åº”è¯¥ä½¿ç”¨result.append(temp.copy()) å› ä¸ºappendè¿›å»çš„æ˜¯å¼•ç”¨æ ¼å¼çš„ æˆ–è€…é‡æ–°åˆå§‹åŒ–temp</span><br>            temp.append(item[<span class="hljs-number">0</span>].val)  <br>            depth = item[<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">if</span> item[<span class="hljs-number">0</span>].left: x.append((item[<span class="hljs-number">0</span>].left,item[<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>))<br>            <span class="hljs-keyword">if</span> item[<span class="hljs-number">0</span>].right: x.append((item[<span class="hljs-number">0</span>].right,item[<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">if</span>(temp):<br>            result.append(temp)<br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></tbody></table></figure><p>pythonè¦æ³¨æ„çš„å‘ç‚¹æ˜¯åœ¨å¦‚æœå°†tempåŠ åˆ°åˆ—è¡¨ä¹‹åï¼Œå°†tempæ¸…ç©ºï¼Œéšä¹‹listä¸­çš„åˆ—è¡¨å†…å®¹ä¹Ÿä¼šæ¸…ç©ºï¼Œç›¸å½“äºè¯´åœ¨ä¸¤ä¸ªtempæ˜¯æŒ‡å‘åŒä¸€ä¸ªåœ°å€å—ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°tempåˆå§‹åŒ–ï¼Œæˆ–è€…åœ¨appendæ—¶ä½¿ç”¨copyå‡½æ•°è¿›è¡Œæ·±æ‹·è´ã€‚</p><h4 id="è§£æ³•äºŒ">è§£æ³•äºŒ</h4><p>æ›´ç®€ä¾¿çš„æ–¹æ³•æ˜¯å¯ä»¥ç›´æ¥æŠŠæ¯ä¸€è½®çš„è¾“å‡ºåˆ°resultä¸­ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">levelOrder</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> []<br>        res, queue = [], collections.deque()<br>        queue.append(root)<br>        <span class="hljs-keyword">while</span> queue:<br>            tmp = []<br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(queue)):<br>                node = queue.popleft()<br>                tmp.append(node.val)<br>                <span class="hljs-keyword">if</span> node.left: queue.append(node.left)<br>                <span class="hljs-keyword">if</span> node.right: queue.append(node.right)<br>            res.append(tmp)<br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer39 æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—</title>
      <link href="/2021/11/04/leetcode/leetcode-offer39/"/>
      <url>/2021/11/04/leetcode/leetcode-offer39/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [1, 2, 3, 2, 2, 2, 5, 4, 2]</span><br><span class="hljs-section">è¾“å‡º: 2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= æ•°ç»„é•¿åº¦ &lt;= 50000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ¬é¢˜å¯ä»¥éå†æ•°ç»„å“ˆå¸Œè¡¨ç»Ÿè®¡æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ºO(N)ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        countlist = {}<br>        length = <span class="hljs-built_in">len</span>(nums)<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> countlist.get(x): <span class="hljs-comment">#å¯ä»¥ç”¨å†…ç½®çš„getæ–¹æ³•æˆ–è€…ç”¨has_key()</span><br>                countlist[x]+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                countlist[x] = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span>(countlist[x]&gt;length/<span class="hljs-number">2</span>):<br>                <span class="hljs-keyword">return</span> x<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><p>å­—å…¸çš„ç›¸å…³æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">dict</span> = {<span class="hljs-string">'Name'</span>: <span class="hljs-string">'Zara'</span>, <span class="hljs-string">'Age'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">'Class'</span>: <span class="hljs-string">'First'</span>}<br> <br><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>[<span class="hljs-string">'Name'</span>]  <span class="hljs-comment"># åˆ é™¤é”®æ˜¯'Name'çš„æ¡ç›®</span><br><span class="hljs-built_in">dict</span>.clear()      <span class="hljs-comment"># æ¸…ç©ºå­—å…¸æ‰€æœ‰æ¡ç›®</span><br><span class="hljs-keyword">del</span> <span class="hljs-built_in">dict</span>          <span class="hljs-comment"># åˆ é™¤å­—å…¸</span><br></code></pre></td></tr></tbody></table></figure><p>Pythonå­—å…¸åŒ…å«äº†ä»¥ä¸‹å†…ç½®æ–¹æ³•ï¼š</p><table><thead><tr><th style="text-align:left">åºå·</th><th style="text-align:left">å‡½æ•°åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-clear.html">dict.clear()</a> åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:left">2</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-copy.html">dict.copy()</a> è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">[dict.fromkeys(seq<a href="https://www.runoob.com/python/att-dictionary-fromkeys.html">, val])</a> åˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œä»¥åºåˆ— seq ä¸­å…ƒç´ åšå­—å…¸çš„é”®ï¼Œval ä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left"><strong><a href="https://www.runoob.com/python/att-dictionary-get.html">dict.get(key, default=None)</a> è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›defaultå€¼</strong></td></tr><tr><td style="text-align:left">5</td><td style="text-align:left"><strong><a href="https://www.runoob.com/python/att-dictionary-has_key.html">dict.has_key(key)</a> å¦‚æœé”®åœ¨å­—å…¸dicté‡Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false</strong></td></tr><tr><td style="text-align:left">6</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-items.html">dict.items()</a> ä»¥åˆ—è¡¨è¿”å›å¯éå†çš„(é”®, å€¼) å…ƒç»„æ•°ç»„</td></tr><tr><td style="text-align:left">7</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-keys.html">dict.keys()</a> ä»¥åˆ—è¡¨è¿”å›ä¸€ä¸ªå­—å…¸æ‰€æœ‰çš„é”®</td></tr><tr><td style="text-align:left">8</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-setdefault.html">dict.setdefault(key, default=None)</a> å’Œget()ç±»ä¼¼, ä½†å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºdefault</td></tr><tr><td style="text-align:left">9</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-update.html">dict.update(dict2)</a> æŠŠå­—å…¸dict2çš„é”®/å€¼å¯¹æ›´æ–°åˆ°dicté‡Œ</td></tr><tr><td style="text-align:left">10</td><td style="text-align:left"><a href="https://www.runoob.com/python/att-dictionary-values.html">dict.values()</a> ä»¥åˆ—è¡¨è¿”å›å­—å…¸ä¸­çš„æ‰€æœ‰å€¼</td></tr><tr><td style="text-align:left">11</td><td style="text-align:left">[pop(key<a href="https://www.runoob.com/python/python-att-dictionary-pop.html">,default])</a> åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚</td></tr><tr><td style="text-align:left">12</td><td style="text-align:left"><a href="https://www.runoob.com/python/python-att-dictionary-popitem.html">popitem()</a> è¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„æœ€åä¸€å¯¹é”®å’Œå€¼ã€‚</td></tr></tbody></table><h5 id="æ‘©å°”æŠ•ç¥¨æ³•ï¼šæ ¸å¿ƒç†å¿µä¸ºç¥¨æ•°æ­£è´ŸæŠµæ¶ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO-N-ç©ºé—´å¤æ‚åº¦ä¸ºO-1-ã€‚">æ‘©å°”æŠ•ç¥¨æ³•ï¼šæ ¸å¿ƒç†å¿µä¸ºç¥¨æ•°æ­£è´ŸæŠµæ¶ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</h5><ul><li>æ¨è®º1ï¼šå°†æŒ‡å®šçš„ä¼—æ•°å…ƒç´ æ ‡è®°ä¸º+1ï¼Œå…¶ä»–å…ƒç´ æ ‡è®°ä¸º-1ï¼Œåˆ™æ‰€æœ‰æ•°å­—çš„ç¥¨æ•°å’Œå¤§äº0.</li><li>æ¨è®º2:  è‹¥æ•°ç»„çš„å‰aä¸ªæ•°å­—çš„ç¥¨æ•°å’Œä¸º0ï¼Œåˆ™å‰©ä½™çš„n-aä¸ªæ•°å­—çš„ç¥¨æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œå³ï¼ˆn-aï¼‰ä¸ªæ•°å­—çš„ä¼—æ•°ä»ä¸ºxï¼Œå¯ä»¥ç›´æ¥ä¸è€ƒè™‘å‰é¢aä¸ªæ•°å­—äº†ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        votes = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> votes == <span class="hljs-number">0</span>: x = num<br>            votes += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num == x <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> x<br><br></code></pre></td></tr></tbody></table></figure><p><strong>æ‹“å±•</strong>ï¼š ç”±äºé¢˜ç›®è¯´æ˜ ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´  ï¼Œå› æ­¤æœ¬é¢˜ä¸ç”¨è€ƒè™‘ æ•°ç»„ä¸å­˜åœ¨ä¼—æ•° çš„æƒ…å†µã€‚è‹¥è€ƒè™‘ï¼Œéœ€è¦åŠ å…¥ä¸€ä¸ª â€œéªŒè¯ç¯èŠ‚â€ ï¼Œéå†æ•°ç»„ nums ç»Ÿè®¡ x çš„æ•°é‡ã€‚</p><p><strong>è‹¥ x çš„æ•°é‡è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠï¼Œåˆ™è¿”å› x ï¼›</strong><br>å¦åˆ™ï¼Œè¿”å›æœªæ‰¾åˆ°ä¼—æ•°ï¼›<br>æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ä¸å˜ï¼Œä»ä¸º O(N) å’Œ O(1) ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        votes, count = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> votes == <span class="hljs-number">0</span>: x = num<br>            votes += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> num == x <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        <span class="hljs-comment"># éªŒè¯ x æ˜¯å¦ä¸ºä¼—æ•°</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> num == x: count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> x <span class="hljs-keyword">if</span> count &gt; <span class="hljs-built_in">len</span>(nums) // <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span> <span class="hljs-comment"># å½“æ— ä¼—æ•°æ—¶è¿”å› 0</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å­—å…¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å­—å…¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡æ€»ç»“&lt;Anatomical-guided attention enhances unsupervised PET image denoising performance&gt;</title>
      <link href="/2021/11/03/paper/brain-pet-paper1/"/>
      <url>/2021/11/03/paper/brain-pet-paper1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2021å¹´2æœˆæŠ•ç¨¿çš„ä¸€ç¯‡è®ºæ–‡ã€ŠAnatomical-guided attention enhances unsupervised PET image<br>denoising performanceã€‹æå‡ºä½¿ç”¨Anatomical-guidedçš„æ³¨æ„åŠ›åŠ å¼ºéç›‘ç£çš„PETå›¾åƒé™å™ªæ€§èƒ½ã€‚</p></blockquote><h2 id="ABSTRACT">ABSTRACT</h2><blockquote><p>Although supervised convolutional neural networks (CNNs) often outperform conventional alternatives for denoising positron emission tomography (PET) images, they require many low- and high-quality reference PET image pairs. Herein, we propose an unsupervised 3D PET image denoising method based on an anatomical information-guided attention mechanism. The proposed magnetic resonance-guided deep decoder (MR-GDD) utilizes the spatial details and semantic features of MR-guidance image more effectively by introducing encoder-decoder and deep decoder subnetworks. Moreover, the specific shapes and patterns of the guidance image do not affect the denoised PET image, because the guidance image is input to the network through an attention gate. In a Monte Carlo simulation of [18F]fluoro-2-deoxy-D-glucose (FDG), the proposed method achieved the highest peak signal-to-noise ratio and structural similarity (27.92 Â± 0.44 dB/0.886 Â± 0.007), as compared with Gaussian filtering (26.68 Â± 0.10 dB/0.807 Â± 0.004), image guided filtering (27.40 Â± 0.11 dB/0.849 Â± 0.003), deep image prior (DIP) (24.22 Â± 0.43 dB/0.737 Â± 0.017), and MR-DIP (27.65 Â± 0.42 dB/0.879 Â± 0.007). Furthermore, we experimentally visualized the behavior of the optimization process, which is often unknown in unsupervised CNN-based restoration problems. For preclinical (using [18F]FDG and [11C]raclopride) and clinical (using [18F]florbetapir) studies, the proposed method demonstrates state-of-the-art denoising performance while retaining spatial resolution and quantitative accuracy, despite using a common network architecture for various noisy PET images with 1/10th of the full counts. These results suggest that the proposed MR-GDD can reduce PET scan times and PET tracer doses considerably without impacting patients.</p></blockquote><h5 id="æ€»ç»“">æ€»ç»“</h5><p>ä½¿ç”¨ç›‘ç£è®­ç»ƒCNNç½‘ç»œæ¯”ä¼ ç»Ÿçš„æ–¹æ³•åœ¨PETé™å™ªå¤„ç†ä¸Šæ•ˆæœè¡¨ç°çš„æ›´å¥½ï¼Œä½†æ˜¯éœ€è¦ low- and high-quality reference PET image pairsä½œä¸ºlabelã€‚å› æ­¤åŸºäºè§£å‰–å­¦ä¿¡æ¯æŒ‡å¼•çš„æ³¨æ„åŠ›æœºåˆ¶æå‡ºäº†æ— ç›‘ç£çš„3Dçš„PETå›¾åƒçš„é‡å»ºã€‚</p><ul><li>æ­¤ç½‘ç»œï¼ˆMR-GDDï¼‰å¼•å…¥äº†ä¸¤ä¸ªå­ç½‘ç»œï¼ˆencoder-decoder and deep decoder subnetworksï¼‰æ›´æ•ˆç‡åœ°åˆ©ç”¨MRï¼ˆæ ¸ç£å…±æŒ¯ï¼‰å›¾åƒçš„ç©ºé—´ä¿¡æ¯å’Œè¯­ä¹‰ç‰¹å¾ã€‚</li><li>åŒæ—¶ï¼Œç”±äºguidance imageé€šè¿‡attention gateåå†è¾“å…¥ç½‘ç»œï¼Œç‰¹å®šçš„guidance imageçš„shapeså’Œpatternsä¸ä¼šå½±å“é™å™ªçš„PETå›¾åƒã€‚</li><li>å¹¶ä¸”ï¼Œæˆ‘ä»¬é€šè¿‡å®éªŒå¯è§†åŒ–äº†ä¼˜åŒ–è¿‡ç¨‹çš„è¡Œä¸ºã€‚è¿™åœ¨æ— ç›‘ç£å·ç§¯å›¾åƒé‡å»ºé€šå¸¸æ˜¯æ— æ³•è¡¨ç¤ºçš„ã€‚</li></ul><h2 id="Introduction">Introduction</h2><blockquote><p>Positron emission tomography (PET) is a functional imaging modality that observes the molecular-level activity in tissues caused by radioactive tracers. It offers excellent diagnostic accuracy both for observing normal tissues and for detecting specific diseases such as cancer and neurodegenerative disorders (Phelps, 2012). In response to the increased demand for more accurate dementia diagnosis in recent years, brain-dedicated PET scanners with enhanced sensitivity that are capable of acquiring high-resolution brain images have been developed (Tashima et al., 2019; Watanabe et al., 2017). The acquisition of high-quality diagnostic PET images requires the administration of high dose or a long scan time. However, massive radiation exposure to PET tracers may induce genetic damage and cancerous growths, thereby raising health risk concerns (ICRP, 2017). Therefore, to mitigate the radiation exposure-related risk, it is desirable to administer low-dose PET tracers. Unfortunately, this increases the statistical noise, thus degrading the quality of PET images and potentially affecting the diagnostic accuracy. Thus, improved noise suppression methods for PET images are essential.</p></blockquote><h5 id="é€»è¾‘">é€»è¾‘</h5><p>ä¸ºäº†æ²»ç–—ç–¾ç—… â€”&gt;  éœ€è¦è·å–é«˜åƒç´ çš„è„‘PETå›¾åƒ â€”&gt;  éœ€è¦é«˜å‰‚é‡&amp;é•¿æ—¶é—´çš„æ‰«ææ—¶é—´ â€”&gt; å¼•å‘å¥åº·é£é™© â€”&gt; åªèƒ½ä½¿ç”¨ä½å‰‚é‡çš„PETç¤ºè¸ªå‰‚ â€”&gt; æ”¹è¿›ç”¨äº PET å›¾åƒçš„å™ªå£°æŠ‘åˆ¶æ–¹æ³•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><blockquote><p>Conventionally, Gaussian filtering (GF) is applied as a basic post-denoising method, despite compromising the spatial resolution and, thus, the quantitative accuracy of PET images. To avoid such compromises, various denoising algorithms, such as bilateral filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0018">Hoifheinz et al., 2011</a>), non-local means filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0001">Arabi and Zaidi, 2020</a>), image-guided filtering (IGF) (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0017">He et al., 2013</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0016">Hashimoto et al., 2018</a>), and block-matching filtering (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0027">Ote et al., 2020</a>) have been developed and applied to PET images. These post-denoising algorithms provide a better denoising performance than GF while retaining spatial resolution and quantitative accuracy.</p></blockquote><h5 id="ä¼ ç»Ÿé™å™ªæ–¹æ³•">ä¼ ç»Ÿé™å™ªæ–¹æ³•</h5><p>é«˜æ–¯æ»¤æ³¢ (GF) è¢«ç”¨ä½œåŸºæœ¬çš„åå»å™ªæ–¹æ³•ï¼Œå°½ç®¡ä¼šå½±å“ç©ºé—´åˆ†è¾¨ç‡ï¼Œä»è€Œå½±å“ PET å›¾åƒçš„å®šé‡ç²¾åº¦ã€‚åæ¥ä½¿ç”¨åŒè¾¹æ»¤æ³¢ã€éå±€éƒ¨å‡å€¼æ»¤æ³¢ã€å›¾åƒå¼•å¯¼è¿‡æ»¤ï¼ˆIGFï¼‰å’Œå—åŒ¹é…è¿‡æ»¤çš„å»å™ªæ–¹æ³•ã€‚è¿™äº›å»å™ªç®—æ³•æä¾›äº†æ¯” GF æ›´å¥½çš„å»å™ªæ€§èƒ½ï¼ŒåŒæ—¶ä¿ç•™äº†ç©ºé—´åˆ†è¾¨ç‡å’Œå®šé‡ç²¾åº¦ã€‚</p><blockquote><p>Aside from the above mentioned conventional <a href="https://www.sciencedirect.com/topics/engineering/filtering-algorithm">filtering algorithms</a>, methods based on deep learning (DL) have been applied in various medical fields (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0023">Litjens et al., 2017</a>), and the use of <a href="https://www.sciencedirect.com/topics/engineering/convolutional-neural-networks">convolutional neural networks</a> (CNNs) has been reported to improve the quality of PET images (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al., 2019</a>a; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0012">HÃ¤ggstrÃ¶m et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0024">Liu and Qi, 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0030">Sanaat et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0034">Sphuler et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0047">Zhou et al., 2020</a>). However, the general CNN-based denoising methods typically require a pair of large reference datasets comprising high-quality images. This is a major problem in clinical usage owing to the difficulty of preparing huge sets of low-noise PET data without unduly burdening patients. In addition, the huge volume of novel PET tracers being developed, makes it difficult to collect large amounts of training data for each domain. The interpretation of denoised PET images may suffer inherent biases if unknown cases are excluded from the <a href="https://www.sciencedirect.com/topics/computer-science/training-dataset">training dataset</a>. Despite these challenges, DL algorithms often outperform conventional denoising algorithms. Therefore, there is a need for technology that can be uniformly adapted to various domains without using high-quality PET data.</p></blockquote><h5 id="æ·±åº¦å­¦ä¹ æ–¹æ³•çš„éš¾é¢˜">æ·±åº¦å­¦ä¹ æ–¹æ³•çš„éš¾é¢˜</h5><p>é™¤äº†ä¸Šè¿°ä¼ ç»Ÿè¿‡æ»¤ç®—æ³•ä¹‹å¤–ï¼ŒåŸºäºæ·±åº¦å­¦ä¹  (DL) çš„æ–¹æ³•å·²åº”ç”¨äºå„ä¸ªåŒ»å­¦é¢†åŸŸï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œ (CNN) å¯ä»¥æé«˜PET å›¾åƒè´¨é‡ã€‚è€Œæ·±åº¦å­¦ä¹ çš„å»å™ªæ–¹æ³•éœ€è¦é«˜è´¨é‡å›¾åƒçš„å¤§å‹å‚è€ƒæ•°æ®é›†ã€‚ä½†æ˜¯åœ¨ä¸ç»™æ‚£è€…é€ æˆè¿‡åº¦è´Ÿæ‹…çš„æƒ…å†µä¸‹å‡†å¤‡å¤§é‡çš„ä½å™ªå£° PET æ•°æ®æ˜¯ä¸€ä¸ªéš¾é¢˜ï¼Œå› æ­¤ç›®æ ‡æ˜¯éœ€è¦èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨é«˜è´¨é‡ PET æ•°æ®çš„æƒ…å†µä¸‹ï¼Œç»Ÿä¸€é€‚åº”å„ç§æƒ…å†µçš„æ–¹æ³•ã€‚</p><blockquote><p>In recent years, unsupervised or self-supervised DL approaches such as Noise2Noise and deep image prior (DIP) have demonstrated the potential to overcome these challenges (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0021">Lehtinen et al., 2018</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>). In particular, the DIP algorithm is a powerful noise suppression method that does not require the preparation of a prior training dataset (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0015">Hashimoto et al., 2019</a>, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0022">Lin and Huang, 2020</a>). Furthermore, PET reconstruction and denoising methods in which <a href="https://www.sciencedirect.com/topics/engineering/computed-tomography">computed tomography</a> (CT) and magnetic resonance (MR) images serve as the prior images input to the DIP framework have been developed (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0011">Gong et al., 2019</a>b). Compared to PET alone, the denoising performance has been improved by using multi-modal data combined with anatomical information. However, while this method shows potential for adapting various PET image denoising approaches, the <a href="https://www.sciencedirect.com/topics/computer-science/network-architecture">network architecture</a> does not fully utilize the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> or image details of anatomical-guidance images. Furthermore, the process of converting the guidance image to the PET image can result in the shape and pattern of the guidance image remaining in the output PET image, with the extent to which the features of the guidance image affect PET image denoising is yet to be elucidated. Moreover, the process by which the DIP algorithm optimizes the denoising remains unclear. Therefore, these issues must be clarified for future development.</p></blockquote><h5 id="æ·±åº¦å­¦ä¹ æ”¹è¿›æ–¹æ³•ï¼šNoise2Noiseï¼›DIPï¼›">æ·±åº¦å­¦ä¹ æ”¹è¿›æ–¹æ³•ï¼šNoise2Noiseï¼›DIPï¼›</h5><h5 id="DIPçš„ä¼˜ç‚¹ï¼š">DIPçš„ä¼˜ç‚¹ï¼š</h5><ul><li>ä¸€ç§å¼ºå¤§çš„å™ªå£°æŠ‘åˆ¶æ–¹æ³•ï¼Œä¸éœ€è¦å‡†å¤‡å…ˆéªŒè®­ç»ƒæ•°æ®é›†ï¼›</li><li>å…¶ä¸­è®¡ç®—æœºæ–­å±‚æ‰«æ (CT) å’Œç£å…±æŒ¯ (MR) å›¾åƒä½œä¸ºè¾“å…¥åˆ° DIP æ¡†æ¶çš„å…ˆéªŒå›¾åƒï¼›</li><li>ä¸å•ç‹¬çš„ PET ç›¸æ¯”ï¼Œé€šè¿‡ä½¿ç”¨å¤šæ¨¡æ€æ•°æ®ç»“åˆè§£å‰–ä¿¡æ¯ï¼Œå»å™ªæ€§èƒ½å¾—åˆ°äº†æé«˜ã€‚</li></ul><h5 id="DIPçš„é—®é¢˜ï¼š">DIPçš„é—®é¢˜ï¼š</h5><ul><li>ç½‘ç»œæ¶æ„å¹¶æ²¡æœ‰å……åˆ†åˆ©ç”¨è§£å‰–æŒ‡å¯¼å›¾åƒçš„è¯­ä¹‰ç‰¹å¾æˆ–å›¾åƒç»†èŠ‚ï¼›</li><li>å¼•å¯¼å›¾åƒè½¬æ¢ä¸ºPETå›¾åƒçš„è¿‡ç¨‹ä¼šå¯¼è‡´è¾“å‡ºPETå›¾åƒä¸­ä¿ç•™å¼•å¯¼å›¾åƒçš„å½¢çŠ¶å’Œå›¾æ¡ˆï¼›</li><li>å¼•å¯¼å›¾åƒçš„ç‰¹å¾å¯¹PETå›¾åƒå»å™ªçš„å½±å“ç¨‹åº¦å°šå¾…ç¡®å®šä¸”é˜æ˜ï¼›</li><li>DIPç®—æ³•ä¼˜åŒ–å»å™ªçš„è¿‡ç¨‹ä»ä¸æ¸…æ¥šã€‚</li></ul><blockquote><p>In this study, we propose an unsupervised 3D PET image denoising method that incorporates anatomical information into the DIP architecture via an attention mechanism. The attention gates (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0009">Fukui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0032">Schlemper et al., 2019</a>) used in the proposed network help optimize a noisy PET image using multi-scale semantic features extracted from the guidance image. As such, this method can prevent the leakage of guidance image features. The guidance of multi-scale features can lead to an effective regularizer for PET image denoising. The main contributions of this study are as follows:</p><ul><li>We propose a new PET image denoising method guided by anatomical information using an unsupervised <a href="https://www.sciencedirect.com/topics/computer-science/deep-learning-method">DL method</a>.</li><li>We demonstrate that the proposed network has the flexibility to handle the different PET tracer domains used to show the distribution of various tissues in the brains of human and non-human primates.</li><li>The behavior of the optimization process is visualized experimentally, thereby providing useful insights that were unresolved in unsupervised CNN-based restoration problems.</li></ul></blockquote><h5 id="æœ¬æ–‡çš„æ–¹æ³•ï¼š">æœ¬æ–‡çš„æ–¹æ³•ï¼š</h5><p>ä½¿ç”¨äº†æ— ç›‘ç£çš„3Dçš„PETå›¾åƒé™å™ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡<strong>æ³¨æ„æœºåˆ¶å°†è§£å‰–ä¿¡æ¯æ•´åˆåˆ° DIP æ¶æ„ä¸­</strong>ï¼Œä½¿ç”¨ä»å¼•å¯¼å›¾åƒä¸­æå–çš„å¤šå°ºåº¦è¯­ä¹‰ç‰¹å¾æ¥ä¼˜åŒ–å˜ˆæ‚çš„ PET å›¾åƒã€‚å¤šå°ºåº¦ç‰¹å¾çš„å¼•å¯¼å¯ä»¥ä¸º PET å›¾åƒå»å™ªæä¾›æœ‰æ•ˆçš„æ­£åˆ™åŒ–å™¨ã€‚</p><h5 id="è´¡çŒ®ï¼š">è´¡çŒ®ï¼š</h5><ul><li><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„ PET å›¾åƒå»å™ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨æ— ç›‘ç£çš„ DL æ–¹æ³•<strong>ä»¥è§£å‰–ä¿¡æ¯ä¸ºæŒ‡å¯¼</strong>ï¼›</p></li><li><p>å…·æœ‰å¤„ç†ä¸åŒPET ç¤ºè¸ªåŸŸçš„<strong>çµæ´»æ€§</strong>ï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºäººç±»å’Œéäººç±»çµé•¿ç±»åŠ¨ç‰©å¤§è„‘ä¸­å„ç§ç»„ç»‡çš„åˆ†å¸ƒï¼›</p></li><li><p>ä¼˜åŒ–è¿‡ç¨‹çš„è¡Œä¸ºé€šè¿‡å®éªŒè¿›è¡Œ<strong>å¯è§†åŒ–</strong>ï¼Œä»è€Œæä¾›åœ¨åŸºäº CNN çš„æ— ç›‘ç£é‡å»ºé—®é¢˜ä¸­æœªè§£å†³é—®é¢˜çš„ç›¸å…³è§è§£ã€‚</p></li></ul><h2 id="2-Related-work">2. Related work</h2><blockquote><p>The <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image restoration process is further complicated by the limited availability of information that can be extracted from noisy PET data. Another approach adopted for PET image denoising is to use anatomical prior extracted from the <a href="https://www.sciencedirect.com/topics/engineering/computed-tomography">CT</a> or MR images of the patient for <a href="https://www.sciencedirect.com/topics/engineering/regularization">regularization</a>. Because multi-modal images have become easier to obtain owing to the increasing availability of PET/CT and PET/MR scanners, various <a href="https://www.sciencedirect.com/topics/engineering/hybrid-method">hybrid methods</a> using anatomical priors have been developed to facilitate PET image denoising.</p></blockquote><p>PET å›¾åƒå»å™ªé‡‡ç”¨çš„å¦ä¸€ç§æ–¹æ³•æ˜¯<strong>ä½¿ç”¨ä»æ‚£è€…çš„ CT æˆ– MR å›¾åƒä¸­æå–çš„è§£å‰–å…ˆéªŒ</strong>è¿›è¡Œæ­£åˆ™åŒ–ã€‚ç”±äº PET/CT å’Œ PET/MR æ‰«æä»ªçš„å¯ç”¨æ€§ä¸æ–­æé«˜ï¼Œå¤šæ¨¡æ€å›¾åƒå˜å¾—æ›´å®¹æ˜“è·å¾—ï¼Œå› æ­¤å¼€å‘äº†å„ç§ä½¿ç”¨è§£å‰–å­¦å…ˆéªŒçš„æ··åˆæ–¹æ³•æ¥ä¿ƒè¿› PET å›¾åƒå»å™ªã€‚</p><h3 id="2-1-Classical-approach">2.1. Classical approach</h3><blockquote><p>Conventionally, hybrid denoising methods using anatomical priors have been adopted for PET image reconstruction and post-filtering. For example, <a href="https://www.sciencedirect.com/topics/engineering/maximum-a-posteriori">maximum a posteriori</a> image reconstruction has been incorporated alongside anatomical priors (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0007">Comtat et al., 2002</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0041">Vunckx et al., 2012</a>). In addition, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0035">Sudarshan et al. (2020)</a> proposed joint PET and MR image reconstruction using a patch-based joint-dictionary prior. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0003">Bland et al. (2018)</a> introduced MR-derived kernels to the kernel expectation maximization reconstruction. Although advanced image reconstruction algorithms can provide better denoising performance, they require significant computational resources and it is often difficult to set optimal parameters. Therefore, anatomically-guided post-denoising is often performed separately from the image reconstruction process. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0004">Chan et al. (2014)</a> proposed incorporating CT information and applying median non-local mean filtering to achieve PET denoising. Alternatively, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0045">Yan et al. (2015)</a> proposed MR-guided PET filtering by adapting a local linear model. In addition, the authors performed partial volume correction without MR image <a href="https://www.sciencedirect.com/topics/engineering/parcellation">parcellation</a> by incorporating <a href="https://www.sciencedirect.com/topics/engineering/partial-volume-effect">partial volume effects</a> into the model.</p></blockquote><h5 id="ç»å…¸æ–¹æ³•ï¼š">ç»å…¸æ–¹æ³•ï¼š</h5><p>å°†è§£å‰–å…ˆéªŒçš„æ··åˆå»å™ªæ–¹æ³•åº”ç”¨äºPETå›¾åƒé‡å»ºå’Œåæ»¤æ³¢å¤„ç†ï¼Œå°†æœ€å¤§åéªŒå›¾åƒé‡å»ºä¸è§£å‰–å…ˆéªŒç»“åˆåœ¨ä¸€èµ·ã€‚åŸºäºa patch-based joint-dictionary priorè”åˆPETå’ŒMRå›¾åƒé‡å»º</p><h3 id="2-2-Supervised-DL-approach">2.2. Supervised DL approach</h3><p>The supervised DL approach has recently demonstrated state-of-the-art performance in PET image denoising. When large amounts of training and label PET data pairs are available, the general <a href="https://www.sciencedirect.com/topics/engineering/convolutional-neural-networks">CNN</a> can be trained according to the following operation:</p>$$Î¸^*=argmin_Î¸ \frac{1}{N_t}âˆ‘_{iâˆˆD_t}âˆ¥x_{ref}^iâˆ’f_Î¸(x_0^i)âˆ¥$$<p>where âˆ¥Â·âˆ¥ is the L2 norm, f represents the CNN, Î¸ denotes the trainable parameters contained in the weights and biases, Dt is a mini-batch sample of size Nt, x0i is the <em>i</em>th element in the training data (noisy PET images), and xrefi is the <em>i</em>th element in the label data (clean PET images). Regarding supervised PET image denoising using anatomical information, in separate studies, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0024">Liu and Qi et al. (2019)</a>, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0033">Schramm et al. (2021)</a>, and <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0005">Chen et al. (2019)</a> trained CNNs to map multi-modal images, including noisy PET and MR images, to obtain clean PET images. In accordance with these methods, the mapping function, fÎ¸(x0i), in <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0001">Eq. (1)</a> is represented by fÎ¸(x0i,gi) using anatomical-guidance images, g. The supervised DL approach requires a vast number of low-dose (or short-time scan), high-dose (or long-time scan), and guidance image pairs.</p><h3 id="2-3-Unsupervised-DL-approach">2.3. Unsupervised DL approach</h3><p>Unsupervised DL approaches such as DIP do not require label data for PET image denoising. The DIP training process is optimized as follows (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>):</p>$$Î¸^*=argmin_Î¸âˆ¥x_0âˆ’f_Î¸(z)âˆ¥,x^*=f_{Î¸^*}(z)$$<p>where x0 is a <a href="https://www.sciencedirect.com/topics/engineering/noisy-image">noisy image</a>, x* is the final <a href="https://www.sciencedirect.com/topics/engineering/denoised-image">denoised image</a> output, and the network input z is random noise. The DIP algorithm uses a CNN to map a <a href="https://www.sciencedirect.com/topics/engineering/degraded-image">degraded image</a>, x0, and obtains the optimal denoised image by regularization of the architecture via moderate iteration. This is based purely on the prior information included in the CNN structure. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0015">Hashimoto et al. (2019</a>), (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">2020</a>) proposed dynamic PET image denoising by directly inputting static PET images into 3D and 4D DIP as prior information. In contrast, <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al. (2019)</a> and <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al. (2019</a>a) both proposed PET denoising methods that rely on inputting anatomical-guidance images, g (e.g., CT and MR images), instead of the DIP input, z. In these methods, the mapping function, fÎ¸(z), in <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0002">Eq. (2)</a> is represented by fÎ¸(g).</p><p>The unsupervised DL approach can bridge the technical gap between the classical and supervised DL approaches for PET image denoising based on anatomical information. Nevertheless, previous methods often fail to clarify how the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> of the guidance image affect PET image denoising.</p><h2 id="3-Methodology">3. Methodology</h2><h3 id="3-1-MR-guided-deep-decoder">3.1. MR-guided deep decoder</h3><p>To explicitly utilize the <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> of anatomical-guidance image for <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising, we propose a method for unsupervised 3D PET image denoising based on anatomical information that uses an MR-guided deep decoder (MR-GDD), which is inspired by <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0039">Uezato et al. (2020)</a>. <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#fig0001">Fig. 1</a> shows the <a href="https://www.sciencedirect.com/topics/computer-science/network-structure">network structure</a> of the proposed MR-GDD, which comprises two <a href="https://www.sciencedirect.com/topics/engineering/subnetwork">subnetworks</a>: an encoder-decoder subnetwork with a skip connection and a deep decoder subnetwork. The two subnetworks are connected by an upsampling refinement unit (URU) and a feature refinement unit (FRU), which incorporate an attention gate to weight the multi-scale features extracted from the MR image to the deep decoder subnetwork. This combined network performs end-to-end learning from scratch.</p><p><img src="https://picture.mulindya.com/MR-guided-deep-decoder.jpg" alt=""></p><p>Fig. 1. Overview of the proposed MR-GDD used for unsupervised 3D <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising. This architecture consists of two <a href="https://www.sciencedirect.com/topics/engineering/subnetwork">subnetworks</a> connected by attention gates: an encoder-decoder subnetwork with a skip connection (top) and a deep decoder subnetwork (bottom). This combined architecture is optimized using end-to-end learning. The attention gates in the upsampling refinement unit (URU) and the feature refinement unit (FRU) guide the optimization of noisy PET image using the multi-scale <a href="https://www.sciencedirect.com/topics/computer-science/semantic-feature">semantic features</a> extracted from the MR image. This architecture can prevent the semantic features of the MR image from leaking.</p><h4 id="3-1-1-Encoder-decoder-subnetwork">3.1.1. Encoder-decoder subnetwork</h4><p>The encoder-decoder subnetwork is designed to extract low-scale to high-scale hierarchical semantic features from the MR image. It is based on the 3D U-Net architecture (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0006">Ã‡iÃ§ek et al., 2016</a>) and consists of encoding and decoding paths. In the encoding path, the combination of a 3 Ã— 3 Ã— 3 3D <a href="https://www.sciencedirect.com/topics/computer-science/convolution-layer">convolution layer</a> with <a href="https://www.sciencedirect.com/topics/computer-science/batch-normalization">batch normalization</a> (BN) and a leaky rectified linear unit (LReLU) is repeated twice, before being constructed by a 3 Ã— 3 Ã— 3 3D convolution layer with two strides for downsampling, followed by the BN and LReLU. At each downsampling step, the size of the feature maps is halved. In the decoding path, the outputs of the upsampling layer and the skip connection supplied from the encoding path are added, before the combination of the 3 Ã— 3 Ã— 3 3D convolution layer with the BN and LReLU is repeated twice. At each upsampling step, the size of the feature maps is doubled.</p><h4 id="3-1-2-Deep-decoder-subnetwork">3.1.2. Deep decoder subnetwork</h4><p>The deep decoder subnetwork reconstructs the denoised PET image from the network input filled with uniform noise. Each step in the deep decoder subnetwork is upsampled first by the URU, then by a 3 Ã— 3 Ã— 3 3D convolution layer, and finally by the BN, LReLU, and FRU. Owing to the presence the attention gates, the URU and FRU can generate conditional weights using the MR image features via a 1 Ã— 1 Ã— 1 3D convolution layer, LReLU, and <a href="https://www.sciencedirect.com/topics/engineering/sigmoid-function">sigmoid function</a>, and then weights the features obtained from the pre-layer in the deep decoder. The URU promotes the <a href="https://www.sciencedirect.com/topics/computer-science/spatial-locality">spatial locality</a> of MR image features, whereas the FRU promotes similar semantic alignment. Finally, a 1 Ã— 1 Ã— 1 3D convolution layer outputs a denoised PET image.</p><h3 id="3-2-Loss-function-and-optimization">3.2. Loss function and optimization</h3><p>To denoise the PET image, the training process of the proposed MR-GDD, which utilizes <a href="https://www.sciencedirect.com/topics/computer-science/unsupervised-learning">unsupervised learning</a> that does not require PET reference data, is optimized as follows:</p>$$Î¸^*=argmin_Î¸âˆ¥x_0âˆ’f_Î¸(z,g)âˆ¥,x^*=f_{Î¸^*}(z,g)$$<p>where âˆ¥Â·âˆ¥ is the L2 norm, f represents the proposed MR-GDD network, the training label x0 represents the noisy PET image, and the network inputs z and g are the random noise and the MR-guidance image, respectively. The input noise was generated by adding a fixed uniform random noise and <a href="https://www.sciencedirect.com/topics/engineering/gaussian-white-noise">Gaussian noise</a> with different seed for each epoch. The attention gates used in the proposed architecture help optimize the noisy PET image by using the multi-scale semantic features extracted from a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/image-guided-intervention">guidance image</a> g. If the <em>k</em>-th scale feature of the encoder path in the encoder-decoder subnetwork is defined as Î“k and the <em>k</em>-th scale features of the decoder path are defined as Îk, the influence on the mapping function, f, can be expressed as follows:</p>$$f=f_Î¸(z|Î“1,â‹¯Î“k,Î1,â‹¯Îk).$$<p>In this method, the limited memory BFGS (L-BFGS) algorithm (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0048">Zhu et al., 1997</a>), which is a quasi-Newtonian method, is introduced to solve the nonlinear <a href="https://www.sciencedirect.com/topics/engineering/least-square-problem">least squares problem</a> described by <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#eqn0003">Eq. (3)</a>. By considering the approximate <a href="https://www.sciencedirect.com/topics/engineering/hessian-matrix">Hessian matrix</a> based on the second-order gradient, the L2 norm converges more stably and quickly than first-order <a href="https://www.sciencedirect.com/topics/engineering/gradient-descent">gradient descent</a> algorithms, such as the stochastic gradient descent algorithm or Adam. In addition, because a small amount of data is generated as a result of using the unsupervised architecture, which does not require a prior <a href="https://www.sciencedirect.com/topics/computer-science/training-dataset">training dataset</a>, the MR-GDD can reduce the computational complexity and load required to performed denoising. We used the L-BFGS algorithm at a learning rate of 0.01 without line search to minimize the processing time. The proposed architecture was processed using PyTorch 1.6.0 on Ubuntu 16.04 with acceleration by a <a href="https://www.sciencedirect.com/topics/engineering/graphics-processing-unit">graphics processing unit</a> (NVIDIA Quadro RTX8000 with 48 GB memory).</p><h2 id="4-Experimental-setup">4. Experimental setup</h2><p>A simulation study using [18F]fluoro-2-deoxy-D-glucose (FDG), a preclinical study using [18F]FDG and [11C]raclopride, and a clinical study using [18F]florbetapir (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0043">Wong et al., 2010</a>) were performed to verify the effectiveness of the proposed <a href="https://www.sciencedirect.com/topics/engineering/positron-emission-tomography">PET</a> image denoising method. In addition, the denoising performance of the proposed MR-GDD was compared against four other unsupervised algorithms under the same conditions as the proposed MR-GDD;</p><ul><li><em>Gaussian filtering (GF).</em> GF is a basic post-denoising method for suppressing noise in PET images. We used a 3D <a href="https://www.sciencedirect.com/topics/engineering/gaussian-kernel">Gaussian kernel</a>.</li><li><em>Image guided filtering (IGF).</em> IGF performs PET image denoising by adapting a local linear model using a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/image-guided-intervention">guidance image</a> (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0016">Hashimoto et al., 2018</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0017">He et al., 2013</a>). We used the MR image as the guidance image.</li><li><em>Deep image prior (DIP).</em> The general DIP algorithm uses random noise as the network input (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>). We used the encoder-decoder network in the proposed MR-GDD as the DIP architecture.</li><li><em>MR-DIP.</em> MR-DIP uses an MR prior as a direct input in the DIP architecture (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0008">Cui et al., 2019</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0010">Gong et al., 2019</a>a). We used the same architecture as in the DIP algorithm.</li></ul><p>As a pre-processing step for all the data, voxel intensity normalization was performed on each of the MR and PET images. The MR image intensity was normalized in the [0, 1] range using a min-max normalization technique. Furthermore, the 99.95th <a href="https://www.sciencedirect.com/topics/engineering/percentile">percentile</a> was defined for PET image intensity, which was also normalized in the [0, 1] range using a min-max normalization technique.</p><h3 id="4-1-Simulation-study">4.1. Simulation study</h3><p>We performed a <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/monte-carlo-method">Monte Carlo simulation</a> using the 3D brain phantom from BrainWeb (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0002">Aubert-Broche et al., 2006</a>). The Monte Carlo simulation modeled the geometry of a brain-dedicated PET scanner (HITS-655000 (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0042">Watanabe et al., 2017</a>), <a href="https://www.sciencedirect.com/topics/computer-science/hamamatsu-photonics">Hamamatsu Photonics</a> K.K., Japan). The scanner consists of 32 detector blocks with <a href="https://www.sciencedirect.com/topics/engineering/cerium">cerium</a> doped <a href="https://www.sciencedirect.com/topics/engineering/lutetium">lutetium</a> <a href="https://www.sciencedirect.com/topics/engineering/yttrium">yttrium</a> <a href="https://www.sciencedirect.com/topics/engineering/orthosilicates">orthosilicate</a> crystals per ring, with 5 of these blocks aligned to the scanner axis. To ensure a mismatch between the MR and PET images, two hot spheres (with radii of 10 and 12 mm, respectively) were inserted exclusively into the PET image to present tumor regions. Then, we simulated a static [18F]FDG scan equivalent to 150 M counts, including attenuation and scattering effects. An attenuation map was created from the segmented MR image, and the attenuation effects of water and bone were considered. The gray matter:white matter:cerebrospinal fluid:left tumor:right tumor activity ratio was set to 1:0.25:0.05:2:2 based on the [18F]FDG contrast. We also simulated low-activity tumor data (left tumor:right tumor activity ratio was set to 1.5:1.2) for some low-grade tumors or pathology linked to <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/degenerative-disease">neurodegenerative disease</a>. To generate the reference PET image, the simulated list-mode data were reconstructed using a 3D list-mode dynamic row-action maximum-likelihood algorithm (DRAMA) (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0037">Tanaka and Kudo, 2010</a>) with two iterations and 40 subsets. The reconstructed image measured 128 Ã— 128 Ã— 83 voxels (2.6 Ã— 2.6 Ã— 2.4 mm/voxel). The reference image was reconstructed using all the list-mode data. The noisy PET image was obtained by periodically downsampling to 1/30th of the reference list-mode data (see Supplementary Material 0.1) and reconstructing the low-count image (5 M counts). The corresponding T1-weighted MR image was used as the guidance image.</p><h3 id="4-2-Preclinical-study">4.2. Preclinical study</h3><p>A preclinical study was conducted using monkeys and was approved by the Animal Ethics Committees of the Central <a href="https://www.sciencedirect.com/topics/engineering/research-laboratories">Research Laboratory</a>, Hamamatsu Photonics K.K. PET scans using [18F]FDG and [11C]raclopride imaged the brains of conscious <a href="https://www.sciencedirect.com/topics/engineering/rhesus-monkey">rhesus monkeys</a>, whose bodies and heads were fixed using an animal PET scanner (SHR-38000 (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0013">Hamamatsu 2021</a>), Hamamatsu Photonics K.K., Japan). After a 30 min transmission scan using a 68Ge-68Ga source, doses of [18F]FDG (113 MBq) and [11C]raclopride (282 MBq) were injected into each monkey, before dynamic PET scans were performed for 120 and 90 min, respectively. We performed image reconstruction using 3D DRAMA with two iterations and 60 subsets that incorporated attenuation correction via transmission scan data. The reconstructed images measured 256 Ã— 256 Ã— 103 voxels (0.65 Ã— 0.65 Ã— 1.0167 mm/voxel) and were cropped <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/pamicogrel">to 192</a> Ã— 192 Ã— 64 voxels to reduce the demand on the <a href="https://www.sciencedirect.com/topics/engineering/graphics-processing-unit">GPU</a> memory. The reference images were reconstructed using all the list-mode data for [18F]FDG and the list mode data for the 60 min period between 30 and 90 min of the scan such that the contrast created by the distribution of [11C]raclopride in the striatum to be observed clearly. Each noisy PET image was obtained by periodically downsampling to 1/10th of the reference list-mode data. The corresponding T1-weighted MR images were taken on another day and registered manually by two radiological <a href="https://www.sciencedirect.com/topics/engineering/technologist">technologists</a>.</p><h3 id="4-3-Clinical-study">4.3. Clinical study</h3><p>An amyloid scan using [18F]florbetapir was conducted on the human brain of a cognitive normal subject using a Biograph mMR scanner (Siemens Healthineers, Germany) as part of the â€œInsight 46â€³ sub-study of the MRC National Survey of Health and Development (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0020">Lane et al., 2017</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0025">Markiewicz et al., 2018</a>a). The PET data were acquired dynamically for 60 min using a [18F]florbetapir dose of 409 MBq. During PET image reconstruction, attenuation correction was performed via a pseudo-CT image, which was synthesized using T1- and T2-weighted MR images that were acquired simultaneously, and enabled an Î¼-map to be was calculated. Image reconstruction was performed using an ordered subset expectation maximization (OS-EM) algorithm involving four iterations and 14 subsets using the NiftyPET package (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0026">Markiewicz et al., 2018</a>b). The reconstructed images comprised 334 Ã— 334 Ã— 127 voxels (2 Ã— 2 Ã— 2 mm/voxel), which were cropped to 128 Ã— 128 Ã— 83 voxels to reduce the demand on the GPU memory. The reference image was reconstructed using the list-mode data for the period from 30 to 60 min to observe the contrast between gray and white matter clearly. The noisy PET image was obtained by periodically downsampling to 1/10th of the reference list-mode data.</p><h3 id="4-4-Evaluation-metrics">4.4. Evaluation metrics</h3><p>To quantitatively evaluate the performance of different denoising methods, for the simulation study, we calculated the peak signal-to-noise ratio (PSNR) and structural similarity (SSIM) of the target image, x, and the reference image, xref, which are defined as</p>$$PSNR=10log_{10}(\frac{max(x^{ref})^2}{\frac{1}{N_R}âˆ‘_{jâˆˆR}(x_jâˆ’x_j^{ref})^2})$$<p>and</p>$$SSIM=\frac{1}{N_R}âˆ‘_{jâˆˆR}\frac{(2Î¼_{jx}Î¼_{jx^{ref}}+c_1)(2Ïƒ_{jxx^{ref}}+c_2)}{(Î¼_{jx}^2+Î¼_{jx^{ref}}^2+c_1)(Ïƒ_{jx}^2+Ïƒ_{jx^{ref}}^2+c^2)}$$<p>respectively. Here, R and NR represent the brain region in the PET image and the number of voxels, respectively, Î¼ and Ïƒ are the mean and standard deviation of the square window corresponding to the <em>j</em>-th voxel, respectively, and Ïƒjxxref is the covariance between x and xref. Furthermore, c1=(0.01L)2 and c2=(0.03L)2 where L represents the dynamic range of the reference. The contrast-to-noise ratio (CNR) between gray matter and white matter was calculated as(7)CNR=|SgÂ¯âˆ’SwÂ¯|Ïƒg2+Ïƒw2,where SgÂ¯, SwÂ¯ and Ïƒg, Ïƒw are the mean activity and standard deviation corresponding to the regions of interest (ROIs) in the gray and white matter, respectively. The ROIs were constructed in the gray matter regions on the left and right brains of different slices, whereas the white matter regions were selected within the centrum semiovale (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0028">Paxinos et al., 2000</a>). In the [11C]raclopride calculation, the ROIs were set on the <a href="https://www.sciencedirect.com/topics/medicine-and-dentistry/putamen">putamen</a> instead of the gray matter. A Wilcoxon signed-rank test was performed on the PSNR, SSIM, and CNR to compare the performance of different denoising methods. As the noisy PET data were generated by downsampling the reference list-mode data, we generated multiple independent noisy samples (10 samples) to examine the uncertainty and test the statistical significance.</p><p>We also evaluated the tradeoffs between noise and quantitative information of the <a href="https://www.sciencedirect.com/topics/engineering/denoised-image">denoised images</a> when FWHM (GF), Îµ (IGF), and epochs (CNNs) are changed. For the simulation study, we calculated the tradeoff between the mean squared bias and the variance in the ROI:(8)Bias2=âˆ‘jâˆˆR(xjâˆ’xjref)2âˆ‘jâˆˆR(xjref)2,(7)Variance=âˆ‘jâˆˆR(xjâˆ’xÂ¯)2âˆ‘jâˆˆR(xjref)2,where R denotes the tumor regions, xÂ¯ is the average pixel value inside the ROI. For preclinical study, we calculated the tradeoff between the mean uptake (putamen and caudate and striatum) and the standard deviation (white matter). Each ROI used for the evaluation was set manually to include any partial volume voxels on the MR image and was calculated via superimposition on the co-registered PET image.</p><p>Thus far, the optimization process for the DIP algorithm has only been reported as a conceptual diagram (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0014">Hashimoto et al., 2020</a>; <a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0040">Ulyanov et al., 2018</a>), with several aspects such as the actual behavior remaining unclarified. To elucidate the DIP optimization process, we visualized it by performing nonlinear dimensionally reduction using the locally linear embedding (LLE) algorithm (<a href="https://www.sciencedirect.com/science/article/pii/S1361841521002711#bib0031">Saul and Roweis, 2003</a>), which implements manifold learning. We projected the PET data used for optimization under different training conditions onto a three-dimensional manifold, considering a neighborhood of 15 for each point.</p>]]></content>
      
      
      <categories>
          
          <category> æ–‡çŒ® </category>
          
          <category> pet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒåˆæˆè§†é¢‘</title>
      <link href="/2021/10/30/python/img/pic2video/"/>
      <url>/2021/10/30/python/img/pic2video/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å¾®ç”Ÿç‰©é¡¹ç›®ä¸­ï¼Œéœ€è¦å°†è§†é¢‘ä¸­çš„å¾®ç”Ÿç‰©æ£€æµ‹è¯†åˆ«å‡ºæ¥ï¼Œå¹¶ä¸”ç”Ÿæˆè§†é¢‘çš„æ ¼å¼ä¿å­˜ï¼Œå…¶ä¸­éœ€è¦å°†æ£€æµ‹çš„annotationå›¾ç‰‡åˆæˆä¸ºè§†é¢‘æ ¼å¼ã€‚<strong>å¤§è‡´æµç¨‹ï¼šä½¿ç”¨cvåº“ï¼Œé¦–å…ˆè¯»å–å›¾ç‰‡ï¼Œresizeåˆ°æŒ‡å®šå¤§å°ï¼Œå­˜å‚¨åˆ°Videoå®ä¾‹ä¸­ï¼›</strong></p></blockquote><blockquote><p>OpenCV åº•å±‚æ˜¯ç”¨ FFMEPG è¿›è¡Œå¤šåª’ä½“å¼€å‘çš„ï¼Œæ‰€ä»¥ OpenCV å®ƒçš„é•¿é¡¹ä¸åœ¨äºæ­¤ï¼Œå®ƒåªæ˜¯æä¾›äº†è¿™ç§èƒ½åŠ›è€Œå·²ï¼Œå¦‚æœè¦é’ˆå¯¹å¤šåª’ä½“æ–‡ä»¶åšå¤æ‚çš„å¤„ç†ï¼Œæ¨èçš„è¿˜æ˜¯ FFMEPG ä¸“ä¸šåº“ã€‚OpenCV ç”¨æ¥åˆ›å»ºè§†é¢‘æ–‡ä»¶çš„ç±»æ˜¯ VideoWriterã€‚é¦–å…ˆæ™®åŠä¸€äº›è§†é¢‘ç±»ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚</p></blockquote><h2 id="è§†é¢‘æœ‰å…³çŸ¥è¯†">è§†é¢‘æœ‰å…³çŸ¥è¯†</h2><h3 id="1-æ–‡ä»¶åç¼€å">1. æ–‡ä»¶åç¼€å</h3><p>æˆ‘ä»¬ä¸€èˆ¬éƒ½çŸ¥é“è§†é¢‘æ–‡ä»¶æ˜¯ .mp4ã€.3gpã€.rmvb ç­‰ç­‰æ ¼å¼çš„ï¼Œä½†ä¸€ä¸ªæ–‡ä»¶å–è¿™æ ·çš„åç¼€åæ˜¯ä¸ºäº†å‘Šè¯‰ç”¨æˆ·æˆ–è€…æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å†…å®¹æ˜¯ä»€ä¹ˆæ ¼å¼çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† rmvb æ ¼å¼çš„æ–‡ä»¶å–åä¸º ***.aviã€‚åç¼€çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨ä¸“ä¸šçš„å·¥å…·æˆ–è€…è½¯ä»¶æ“ä½œå®ƒä»¬ã€‚</p><h3 id="2-æ–‡ä»¶æ ¼å¼">2. æ–‡ä»¶æ ¼å¼</h3><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªè§†é¢‘æ–‡ä»¶çœ‹åšä¸€ä¸ªå®¹å™¨ã€‚</p><p>ç®€å•åœ°è¯´å°±æ˜¯å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç›’å­ã€‚</p><p><strong>è¿™ä¸ªç›’å­é‡Œé¢æœ‰è§†é¢‘ç”»é¢æ•°æ®ã€éŸ³é¢‘æ•°æ®ã€å­—å¹•æ•°æ®ç­‰ç­‰ã€‚</strong></p><p>ä¸åŒçš„æ–‡ä»¶æ ¼å¼å¦‚ mp4ã€aviã€mkv ç­‰ç­‰ï¼Œå®ƒä»¬å­˜æ”¾ æ‰“åŒ…æ•°æ®çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæ–‡ä»¶å†…éƒ¨æ–‡ä»¶ç¼–ç æ–¹å¼ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚</p><h3 id="3-ç¼–ç æ ¼å¼">3. ç¼–ç æ ¼å¼</h3><p>è§†é¢‘å®¹å™¨ä¸­ï¼Œä¸€èˆ¬æœ‰è§†é¢‘å’ŒéŸ³é¢‘æ•°æ®ï¼Œå®ƒä»¬é‡‡å–çš„ç¼–ç æ–¹å¼ä¸ä¸€æ ·ã€‚</p><p>è§†é¢‘å¸¸è§çš„ç¼–ç æ–¹å¼é€šå¸¸æœ‰ï¼š x264ã€h264ã€mpeg-4</p><p>éŸ³é¢‘å¸¸è§çš„ç¼–ç æ–¹å¼é€šå¸¸æœ‰ï¼š mp3ã€AACã€flac</p><p>ç¼–ç çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œä¼ è¾“ï¼Œå¦‚æœä½ ä¸é‡‡ç”¨ç¼–ç å‹ç¼©çš„è¯ï¼Œé‚£ä¹ˆè§†é¢‘å¯ä»¥çœ‹åšæ˜¯ä¸€ç³»åˆ—çš„å›¾ç‰‡åºåˆ—ï¼Œä½“ç§¯ä¼šéå¸¸å¤§ã€‚</p><h3 id="4-ç¼–ç å™¨å’Œè§£ç å™¨">4. ç¼–ç å™¨å’Œè§£ç å™¨</h3><p>æŠŠè§†é¢‘æˆ–è€…éŸ³é¢‘æŒ‰ç…§ç¼–ç æ ¼å¼ï¼Œç¼–ç æˆç‰¹å®šæ–‡ä»¶æ ¼å¼éœ€è¦ç¼–ç å™¨çš„å‚ä¸ï¼Œä¸ç„¶æ¯æ¬¡å¼€å‘é‡æ–°å†™ä»£ç ä»£ä»·å¾ˆé«˜ã€‚</p><p>æŠŠç‰¹å®šæ–‡ä»¶æ ¼å¼è§£ç æˆç‰¹å®šçš„ç¼–ç æ ¼å¼æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£ç ï¼Œéœ€è¦è§£ç å™¨çš„å­˜åœ¨ã€‚</p><p>è§£ç å™¨å’Œç¼–ç å™¨éƒ½æœ‰å¼€æºçš„æˆ–è€…æ”¶è´¹çš„å·¥å…·åº“ï¼Œæå¤§æ–¹ä¾¿äº†å¼€å‘è€…ã€‚</p><h3 id="5-FPS-å¸§ç‡">5. FPS å¸§ç‡</h3><p>æˆ‘ä»¬è¯»åˆä¸­ç‰©ç†æ—¶ï¼Œå¤§æ¦‚äº†è§£è¿‡ç”µå½±ç”»é¢ä¸€ç§’é’Ÿ 24 å¸§ï¼Œå…¶å®å¯¹åº”çš„å°±æ˜¯ 24 fpsï¼Œframe per secondï¼Œæœ‰äº›æ‰‹æœºæœ‰é«˜é€Ÿæ‘„åƒçš„åŠŸèƒ½ï¼ŒåŸç†å°±æ˜¯èƒ½å¤Ÿ 1 ç§’é’Ÿæ‹æ‘„ 960 å¼ å›¾ç‰‡ï¼Œç„¶åç”¨æ­£å¸¸çš„é€Ÿåº¦æ”¾æ˜ å‡ºæ¥ï¼Œæ‰€ä»¥ç»†èŠ‚æ¯”è¾ƒå¤šã€‚</p><p>fps è¶Šé«˜ï¼Œç»†èŠ‚è¶Šå¥½ï¼Œä½“éªŒä¹Ÿè¶Šå¥½ï¼Œä½†æ˜¯æ–‡ä»¶å®¹é‡ä¹Ÿè¶Šé«˜ã€‚</p><h2 id="å‡½æ•°åŸå‹-cv2-VideoWriter">å‡½æ•°åŸå‹ cv2.VideoWriter()</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">VideoWriter(filename, fourcc, fps, frameSize[, isColor]) -&gt; &lt;VideoWriter <span class="hljs-built_in">object</span>&gt;<br></code></pre></td></tr></tbody></table></figure><ul><li>filename:è¦ä¿å­˜çš„æ–‡ä»¶çš„è·¯å¾„</li><li>fourcc: æŒ‡å®šç¼–ç å™¨</li><li>fps: è¦ä¿å­˜çš„è§†é¢‘çš„å¸§ç‡</li><li>frameSize: è¦ä¿å­˜çš„æ–‡ä»¶çš„ç”»é¢å°ºå¯¸</li><li>isColor: æŒ‡ç¤ºæ˜¯é»‘ç™½ç”»é¢è¿˜æ˜¯å½©è‰²çš„ç”»é¢</li></ul><h3 id="fourccçš„è®¾ç½®">fourccçš„è®¾ç½®</h3><blockquote><p>fourccæ„ä¸ºå››å­—ç¬¦ä»£ç ï¼ˆFour-Character Codesï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œè¯¥ç¼–ç ç”±å››ä¸ªå­—ç¬¦ç»„æˆ,ä¸‹é¢æ˜¯VideoWriter_fourccå¯¹è±¡ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼Œæ³¨æ„ï¼šå­—ç¬¦é¡ºåºä¸èƒ½å¼„æ··ã€‚</p></blockquote><ul><li><p>cv2.VideoWriter_fourcc(â€˜Dâ€™, â€˜Iâ€™, â€˜Vâ€™, â€˜Xâ€™) å¯¹åº”æ ¼å¼ mp4</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Iâ€™,â€˜4â€™,â€˜2â€™,â€˜0â€™)â€”æœªå‹ç¼©çš„YUVé¢œè‰²ç¼–ç ï¼Œ4:2:0è‰²åº¦å­é‡‡æ ·ã€‚å…¼å®¹æ€§å¥½ï¼Œä½†æ–‡ä»¶è¾ƒå¤§ï¼Œæ³¨æ„æ˜¯å¾ˆå¤§ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_focurcc(â€˜Pâ€™,â€˜Iâ€™,â€˜Mâ€™,â€˜1â€™)â€”MPEG-1ç¼–ç ç±»å‹ã€‚éšæœºè®¿é—®ï¼Œçµæ´»çš„å¸§ç‡ã€å¯å˜çš„å›¾åƒå°ºå¯¸ã€å®šä¹‰äº†Iå¸§ã€På¸§å’ŒBå¸§ã€è¿åŠ¨è¡¥å¿å¯è·¨è¶Šå¤šä¸ªå¸§ã€åŠåƒç´ ç²¾åº¦çš„è¿åŠ¨å‘é‡ã€é‡åŒ–çŸ©é˜µã€GOFç»“æ„ã€sliceç»“æ„ã€æŠ€æœ¯ç»†èŠ‚ã€è¾“å…¥è§†é¢‘æ ¼å¼ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Xâ€™,â€˜Vâ€™,â€˜Iâ€™,â€˜Dâ€™)â€”MPEG-4ç¼–ç ç±»å‹ï¼Œè§†é¢‘å¤§å°ä¸ºå¹³å‡å€¼ï¼ŒMPEG4æ‰€éœ€è¦çš„ç©ºé—´æ˜¯MPEG1æˆ–M-JPEGçš„1/10ï¼Œå®ƒå¯¹è¿åŠ¨ç‰©ä½“å¯ä»¥ä¿è¯è‰¯å¥½çš„æ¸…æ™°åº¦ï¼Œé—´/æ—¶é—´/ç”»è´¨å…·æœ‰å¯è°ƒæ€§ã€‚æ–‡ä»¶æ‰©å±•å.aviã€‚</p></li><li><p>cv2.VideoWriter_fourcc(â€˜Tâ€™,â€˜Hâ€™,â€˜Eâ€™,â€˜Oâ€™)â€”OGGVorbisï¼ŒéŸ³é¢‘å‹ç¼©æ ¼å¼ï¼Œæœ‰æŸå‹ç¼©ï¼Œç±»ä¼¼äºMP3ç­‰çš„éŸ³ä¹æ ¼å¼ã€‚å…¼å®¹æ€§å·®ï¼Œæ–‡ä»¶æ‰©å±•åä¸º.ogvã€‚</p></li><li><p>**cv2.VideoWriter_focurcc(â€˜Fâ€™,â€˜Lâ€™,â€˜Vâ€™,â€˜1â€™)â€”FLVæ˜¯FLASH VIDEOçš„ç®€ç§°ï¼ŒFLVæµåª’ä½“æ ¼å¼æ˜¯ä¸€ç§æ–°çš„è§†é¢‘æ ¼å¼ã€‚**ç”±äºå®ƒå½¢æˆçš„æ–‡ä»¶æå°ã€åŠ è½½é€Ÿåº¦æå¿«ï¼Œä½¿å¾—ç½‘ç»œè§‚çœ‹è§†é¢‘æ–‡ä»¶æˆä¸ºå¯èƒ½ï¼Œå®ƒçš„å‡ºç°æœ‰æ•ˆçš„è§£å†³äº†è§†é¢‘æ–‡ä»¶å¯¼å…¥Flashåï¼Œä½¿å¯¼å‡ºçš„SWFæ–‡ä»¶ä½“ç§¯åºå¤§ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šå¾ˆå¥½çš„ä½¿ç”¨ç­‰ç¼ºç‚¹ã€‚æ–‡ä»¶æ‰©å±•åä¸º.flv</p></li></ul><p>è§†é¢‘ç¼–ç æ–¹å¼è¿˜æœ‰å¾ˆå¤šï¼Œå…·ä½“å¯å‚è€ƒhttp://www.fourcc.org/codecs.phpã€‚</p><h2 id="å®ç°ä»£ç ">å®ç°ä»£ç </h2><p><code>flv2jpg.py</code>:åˆ‡åˆ†è§†é¢‘ï¼ŒæŒ‰ç…§æŒ‡å®šå¸§é¢‘ç‡ä¿å­˜å›¾ç‰‡ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">flv2jpg</span>(<span class="hljs-params">videopath, mytimeF=<span class="hljs-number">1</span>, save_flag = <span class="hljs-literal">False</span></span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    å°†flvæ ¼å¼è§†é¢‘æ¯éš”mytimeFä¸ªå¸§ä¿å­˜ä¸€å¼ å›¾ç‰‡</span><br><span class="hljs-string">    :param videopath: å­˜å‚¨flvè§†é¢‘çš„æ–‡ä»¶å¤¹</span><br><span class="hljs-string">    :param mytimeF: é—´éš”å¸§æ•°</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    """</span><br>    save_dir = os.path.join(os.path.dirname(videopath), <span class="hljs-string">"images"</span>)<br>    os.makedirs(save_dir, exist_ok=<span class="hljs-literal">True</span>)<br>    num = <span class="hljs-number">1</span>  <span class="hljs-comment"># ä¿å­˜å›¾ç‰‡è®¡æ•°</span><br>    <span class="hljs-built_in">print</span>(videopath)<br>    vc = cv2.VideoCapture(videopath)<br>    <span class="hljs-keyword">if</span> vc.isOpened():<br>        rval, frame = vc.read()<br>    <span class="hljs-keyword">else</span>:<br>        rval = <span class="hljs-literal">False</span><br>    timeF = mytimeF  <span class="hljs-comment"># æ¯éš”mytimeFå¸§</span><br>    count = <span class="hljs-number">1</span>  <span class="hljs-comment"># å¸§è®¡æ•°</span><br>    <span class="hljs-keyword">while</span> rval:<br>        rval, frame = vc.read()<br>        <span class="hljs-keyword">if</span> count % timeF == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> frame <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"current frame count:"</span>, count)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"num:"</span>, num)<br><br>            <span class="hljs-keyword">if</span> save_flag:<br>                save_path = os.path.join(save_dir, <span class="hljs-built_in">str</span>(num) + <span class="hljs-string">"_"</span> + videopath.split(<span class="hljs-string">"/"</span>)[-<span class="hljs-number">1</span>] + <span class="hljs-string">".jpg"</span>)<br>                cv2.imwrite(save_path, frame)<br>                <span class="hljs-built_in">print</span>(save_path)<br>                num += <span class="hljs-number">1</span><br>        count += <span class="hljs-number">1</span><br>    vc.release()<br>    <span class="hljs-keyword">return</span> save_dir<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<br>    test_video = <span class="hljs-string">"./data/lunchong3.flv"</span><br>    flv2jpg(test_video,save_flag=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></tbody></table></figure><p><code>main.py</code> ï¼šä¿å­˜å¤„ç†åçš„è§†é¢‘</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flv2jpg <span class="hljs-keyword">import</span> flv2jpg<br><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os,glob<br><span class="hljs-keyword">from</span> detectInfo <span class="hljs-keyword">import</span> Detect_img<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">makeVideo</span>(<span class="hljs-params">Video_img_list,fps,size,save_dir</span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    func:ç”±åˆ‡åˆ†å¥½çš„è§†é¢‘å¸§å›¾åƒå¾—åˆ°æ£€æµ‹åçš„è§†é¢‘</span><br><span class="hljs-string">    input: å¾…åˆæˆçš„å›¾ç‰‡listï¼Œè§†é¢‘çš„fpsï¼Œsizeè®¾ç½® è§†é¢‘ä¿å­˜è·¯å¾„</span><br><span class="hljs-string">    return: æ— è¿”å›</span><br><span class="hljs-string">    """</span><br>    <span class="hljs-comment"># video = cv2.VideoWriter(save_dir, cv2.VideoWriter_fourcc('I', '4', '2', '0'), fps, size)</span><br>    video = cv2.VideoWriter(save_dir, cv2.VideoWriter_fourcc(*<span class="hljs-string">'mp4v'</span>), fps, size)<br><br>    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> Video_img_list:<br>        img = cv2.resize(img, size)  <span class="hljs-comment"># å°†å›¾ç‰‡è½¬æ¢ä¸º1280*720</span><br>        video.write(img)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detectVideo</span>(<span class="hljs-params">test_video_path,detect_img,fps=<span class="hljs-number">24</span>,size=(<span class="hljs-params"><span class="hljs-number">640</span>,<span class="hljs-number">480</span></span>),sift_thres = <span class="hljs-number">0.5</span></span>):</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    å°†è¾“å…¥çš„è§†é¢‘ï¼Œåˆ‡åˆ†å›¾åƒï¼Œä½¿ç”¨æ¨¡å‹æ£€æµ‹ï¼Œè¿”å›åˆæˆçš„è§†é¢‘ç»“æœ</span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        test_video_path: è§†é¢‘è·¯å¾„ </span><br><span class="hljs-string">        detect_img: æ¨¡å‹å®ä¾‹</span><br><span class="hljs-string">        fps: è§†é¢‘å¸§</span><br><span class="hljs-string">        size: è§†é¢‘å›¾åƒå¤§å°</span><br><span class="hljs-string">        sift_thres: ç­›é€‰æ˜¾ç¤ºçš„æ£€æµ‹é˜ˆå€¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Returns: None</span><br><span class="hljs-string"></span><br><span class="hljs-string">    """</span><br>    img_root = flv2jpg(test_video_path,save_flag=<span class="hljs-literal">True</span>) <span class="hljs-comment">#è¯»å–è·¯å¾„</span><br>    save_dir_anno = os.path.join(os.path.dirname(test_video_path),<span class="hljs-string">"annotation/"</span>)<br>    <span class="hljs-comment">#è·å–æ‰¹é‡æ•°æ®çš„æ£€æµ‹ä¿¡æ¯</span><br>    Video_img_list = detect_img.get_info(source=img_root, save_img=<span class="hljs-literal">True</span>, save_dir=save_dir_anno,sift_thres=sift_thres)<br>    save_dir = os.path.join(os.path.dirname(test_video_path),<span class="hljs-string">"VideoDetect.mp4"</span>)<br>    makeVideo(Video_img_list, fps, size, save_dir)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<br>    detect_img = Detect_img(weights=<span class="hljs-string">"./weights/best.pt"</span>)<br>    test_video_path = <span class="hljs-string">"./data/lunchong3.flv"</span><br>    detectVideo(test_video_path, detect_img, fps=<span class="hljs-number">120</span>, size=(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>), sift_thres=<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><h2 id="YoLov5ä¸­çš„å®ç°">YoLov5ä¸­çš„å®ç°</h2><p>å®é™…ä¸Šåœ¨yolov5çš„detectè„šæœ¬ä¸­ï¼ŒåŒ…å«äº†å¤„ç†è¾“å…¥ä¸ºè§†é¢‘æ ¼å¼æ–‡ä»¶çš„æ£€æµ‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><h3 id="ç›¸å…³ä»£ç ">ç›¸å…³ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python">datasets.py<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoadImages</span>:</span>  <span class="hljs-comment"># for inference</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, path, img_size=<span class="hljs-number">640</span>, stride=<span class="hljs-number">32</span></span>):</span><br>        p = <span class="hljs-built_in">str</span>(Path(path).absolute())  <span class="hljs-comment"># os-agnostic absolute path</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">'*'</span> <span class="hljs-keyword">in</span> p:<br>            files = <span class="hljs-built_in">sorted</span>(glob.glob(p, recursive=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># glob</span><br>        <span class="hljs-keyword">elif</span> os.path.isdir(p):<br>            files = <span class="hljs-built_in">sorted</span>(glob.glob(os.path.join(p, <span class="hljs-string">'*.*'</span>)))  <span class="hljs-comment"># dir</span><br>        <span class="hljs-keyword">elif</span> os.path.isfile(p):<br>            files = [p]  <span class="hljs-comment"># files</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">f'ERROR: <span class="hljs-subst">{p}</span> does not exist'</span>)<br><br>        images = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> files <span class="hljs-keyword">if</span> x.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower() <span class="hljs-keyword">in</span> img_formats]<br>        videos = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> files <span class="hljs-keyword">if</span> x.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower() <span class="hljs-keyword">in</span> vid_formats]<br>        ni, nv = <span class="hljs-built_in">len</span>(images), <span class="hljs-built_in">len</span>(videos)<br><br>        self.img_size = img_size<br>        self.stride = stride<br>        self.files = images + videos<br>        self.nf = ni + nv  <span class="hljs-comment"># number of files</span><br>        self.video_flag = [<span class="hljs-literal">False</span>] * ni + [<span class="hljs-literal">True</span>] * nv<br>        self.mode = <span class="hljs-string">'image'</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(videos):<br>            self.new_video(videos[<span class="hljs-number">0</span>])  <span class="hljs-comment"># å¦‚æœä¸ºè·¯å¾„åˆ™è¯»å–æ‰“å¼€è§†é¢‘</span><br>        <span class="hljs-keyword">else</span>:<br>            self.cap = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">assert</span> self.nf &gt; <span class="hljs-number">0</span>, <span class="hljs-string">f'No images or videos found in <span class="hljs-subst">{p}</span>. '</span> \<br>                            <span class="hljs-string">f'Supported formats are:\nimages: <span class="hljs-subst">{img_formats}</span>\nvideos: <span class="hljs-subst">{vid_formats}</span>'</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__iter__</span>(<span class="hljs-params">self</span>):</span><br>        self.count = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> self<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__next__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.count == self.nf:<br>            <span class="hljs-keyword">raise</span> StopIteration<br>        path = self.files[self.count]<br><br>        <span class="hljs-keyword">if</span> self.video_flag[self.count]:<br>            <span class="hljs-comment"># Read video</span><br>            self.mode = <span class="hljs-string">'video'</span><br>            ret_val, img0 = self.cap.read() <span class="hljs-comment">#æŒ‰å¸§è¯»å–è§†é¢‘ï¼Œret,frameæ˜¯è·cap.read()æ–¹æ³•çš„ä¸¤ä¸ªè¿”å›å€¼ã€‚å…¶ä¸­retæ˜¯å¸ƒå°”å€¼ï¼Œå¦‚æœè¯»å–å¸§æ˜¯æ­£ç¡®çš„åˆ™è¿”å›Trueï¼Œå¦‚æœæ–‡ä»¶è¯»å–åˆ°ç»“å°¾ï¼Œå®ƒçš„è¿”å›å€¼å°±ä¸ºFalseã€‚frameå°±æ˜¯æ¯ä¸€å¸§çš„å›¾åƒï¼Œæ˜¯ä¸ªä¸‰ç»´çŸ©é˜µã€‚</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret_val:<br>                self.count += <span class="hljs-number">1</span><br>                self.cap.release()<br>                <span class="hljs-keyword">if</span> self.count == self.nf:  <span class="hljs-comment"># last video</span><br>                    <span class="hljs-keyword">raise</span> StopIteration<br>                <span class="hljs-keyword">else</span>:<br>                    path = self.files[self.count]<br>                    self.new_video(path) <br>                    ret_val, img0 = self.cap.read()<br><br>            self.frame += <span class="hljs-number">1</span><br>            <span class="hljs-comment"># print(f'video {self.count + 1}/{self.nf} ({self.frame}/{self.frames}) {path}: ', end='')</span><br><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># Read image</span><br>            self.count += <span class="hljs-number">1</span><br>            img_path_code = np.fromfile(path, dtype=np.uint8)  <span class="hljs-comment"># å«æœ‰ä¸­æ–‡è·¯å¾„æ—¶</span><br>            img0 = cv2.imdecode(img_path_code,<span class="hljs-number">1</span>)  <span class="hljs-comment"># pathï¼Œï¼Œï¼Œï¼ŒBGR</span><br>            <span class="hljs-keyword">assert</span> img0 <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>, <span class="hljs-string">'Image Not Found '</span> + path<br>            <span class="hljs-comment"># print(f'image {self.count}/{self.nf} {path}: ', end='')</span><br><br>        <span class="hljs-comment"># Padded resize</span><br>        img = letterbox(img0, self.img_size, stride=self.stride)[<span class="hljs-number">0</span>]<br><br>        <span class="hljs-comment"># Convert</span><br>        img = img[:, :, ::-<span class="hljs-number">1</span>].transpose(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># BGR to RGB and HWC to CHW</span><br>        img = np.ascontiguousarray(img)<br><br>        <span class="hljs-keyword">return</span> path, img, img0, self.cap<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new_video</span>(<span class="hljs-params">self, path</span>):</span><br>        self.frame = <span class="hljs-number">0</span><br>        self.cap = cv2.VideoCapture(path) <span class="hljs-comment">#VideoCapture()ä¸­å‚æ•°æ˜¯0ï¼Œè¡¨ç¤ºæ‰“å¼€ç¬”è®°æœ¬çš„å†…ç½®æ‘„åƒå¤´ï¼Œå‚æ•°æ˜¯è§†é¢‘æ–‡ä»¶è·¯å¾„åˆ™æ‰“å¼€è§†é¢‘</span><br>        self.frames = <span class="hljs-built_in">int</span>(self.cap.get(cv2.CAP_PROP_FRAME_COUNT))<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__len__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.nf  <span class="hljs-comment"># number of files</span><br></code></pre></td></tr></tbody></table></figure><p>detect.pyä¸­æ¶‰åŠè§†é¢‘çš„å¤„ç†ä»£ç ï¼šåœ¨ä¸Šè¿°çš„loaddataä¸­çš„cap.read()ä¼šé»˜è®¤å¾—åˆ°çš„å¸§å›¾åƒä¸º640*480ï¼Œå¯ä»¥ä½¿ç”¨cap.get()å‡½æ•°å¾—åˆ°è§†é¢‘ç›¸å…³å±æ€§ï¼Œä½¿ç”¨cap.set()å‡½æ•°è®¾ç½®3ï¼Œ4idçš„å‚æ•°å€¼ï¼ˆ3ï¼Œ4å¯¹åº”çš„æ˜¯å®½é«˜å±æ€§ï¼‰</p><blockquote><p>cv2.VideoCapture().set(propId, value)<br>åŠŸèƒ½ï¼šè®¾ç½®æ‘„åƒå¤´<br>å‚æ•°ï¼špropIdï¼šè®¾ç½®çš„è§†é¢‘å‚æ•°ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç±»å‹ï¼šæ•´æ•°ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€å¯ä»¥å‚è€ƒ ï¼šcv2.VideoCapture().get()ä¸­çš„å‚æ•°<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€valueï¼š è®¾ç½®çš„å‚æ•°<br>è¿”å›å€¼ï¼šboolå€¼ï¼š<br>ã€€ã€€ã€€ã€€true:ä¸èƒ½ç¡®ä¿æ‘„åƒå¤´å·²æ¥å—å±æ€§å€¼<br>ã€€ã€€ã€€ã€€flase:æ‘„åƒå¤´æœªæ¥å—å±æ€§å€¼</p><p>ä¸¾ä¾‹ï¼š<br>cap.set(3, 480)<br>å‚æ•°ï¼š3ï¼šåœ¨è§†é¢‘æµçš„å¸§çš„å®½åº¦<br>ã€€ã€€ã€€480ï¼šé«˜åº¦çš„æ•°å€¼<br>åŠŸèƒ½ï¼šæŠŠè§†é¢‘æµçš„å¸§(å›¾ç‰‡)çš„å®½åº¦è°ƒæˆ480</p><p>cap.set(4, 480)<br>å‚æ•°ï¼š4ï¼šåœ¨è§†é¢‘æµçš„å¸§çš„é«˜åº¦<br>ã€€ã€€ã€€480ï¼šå®½åº¦çš„æ•°å€¼<br>åŠŸèƒ½ï¼šæŠŠè§†é¢‘æµçš„å¸§(å›¾ç‰‡)çš„é«˜åº¦è°ƒæˆ480</p></blockquote><table><thead><tr><th>param</th><th>define</th></tr></thead><tbody><tr><td>cv2.VideoCapture.get(0)</td><td>CV_CAP_PROP_POS_MSEC è§†é¢‘æ–‡ä»¶çš„å½“å‰ä½ç½®ï¼ˆæ’­æ”¾ï¼‰ä»¥æ¯«ç§’ä¸ºå•ä½</td></tr><tr><td>cv2.VideoCapture.get(1)</td><td>CV_CAP_PROP_POS_FRAMES åŸºäºä»¥0å¼€å§‹çš„è¢«æ•è·æˆ–è§£ç çš„å¸§ç´¢å¼•</td></tr><tr><td>cv2.VideoCapture.get(2)</td><td>CV_CAP_PROP_POS_AVI_RATIO è§†é¢‘æ–‡ä»¶çš„ç›¸å¯¹ä½ç½®ï¼ˆæ’­æ”¾ï¼‰ï¼š0=ç”µå½±å¼€å§‹ï¼Œ1=å½±ç‰‡çš„ç»“å°¾ã€‚</td></tr><tr><td>cv2.VideoCapture.get(3)</td><td>CV_CAP_PROP_FRAME_WIDTH åœ¨è§†é¢‘æµçš„å¸§çš„å®½åº¦</td></tr><tr><td>cv2.VideoCapture.get(4)</td><td>CV_CAP_PROP_FRAME_HEIGHT åœ¨è§†é¢‘æµçš„å¸§çš„é«˜åº¦</td></tr><tr><td>cv2.VideoCapture.get(5)</td><td>CV_CAP_PROP_FPS å¸§é€Ÿç‡</td></tr><tr><td>cv2.VideoCapture.get(6)</td><td>CV_CAP_PROP_FOURCC ç¼–è§£ç çš„4å­—-å­—ç¬¦ä»£ç </td></tr><tr><td>cv2.VideoCapture.get(7)</td><td>CV_CAP_PROP_FRAME_COUNT è§†é¢‘æ–‡ä»¶ä¸­çš„å¸§æ•°</td></tr><tr><td>cv2.VideoCapture.get(8)</td><td>CV_CAP_PROP_FORMAT è¿”å›å¯¹è±¡çš„æ ¼å¼</td></tr><tr><td>cv2.VideoCapture.get(9)</td><td>CV_CAP_PROP_MODE è¿”å›åç«¯ç‰¹å®šçš„å€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºå½“å‰æ•è·æ¨¡å¼</td></tr><tr><td>cv2.VideoCapture.get(10)</td><td>CV_CAP_PROP_BRIGHTNESS å›¾åƒçš„äº®åº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(11)</td><td>CV_CAP_PROP_CONTRAST å›¾åƒçš„å¯¹æ¯”åº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(12)</td><td>CV_CAP_PROP_SATURATION å›¾åƒçš„é¥±å’Œåº¦(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(13)</td><td>CV_CAP_PROP_HUE è‰²è°ƒå›¾åƒ(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(14)</td><td>CV_CAP_PROP_GAIN å›¾åƒå¢ç›Š(ä»…é€‚ç”¨äºç…§ç›¸æœº)ï¼ˆGainåœ¨æ‘„å½±ä¸­è¡¨ç¤ºç™½å¹³è¡¡æå‡ï¼‰</td></tr><tr><td>cv2.VideoCapture.get(15)</td><td>CV_CAP_PROP_EXPOSURE æ›å…‰(ä»…é€‚ç”¨äºç…§ç›¸æœº)</td></tr><tr><td>cv2.VideoCapture.get(16)</td><td>CV_CAP_PROP_CONVERT_RGB æŒ‡ç¤ºæ˜¯å¦åº”å°†å›¾åƒè½¬æ¢ä¸ºRGBå¸ƒå°”æ ‡å¿—</td></tr><tr><td>cv2.VideoCapture.get(17)</td><td>CV_CAP_PROP_WHITE_BALANCE Ã— æš‚æ—¶ä¸æ”¯æŒ</td></tr><tr><td>cv2.VideoCapture.get(18)</td><td>CV_CAP_PROP_RECTIFICATION ç«‹ä½“æ‘„åƒæœºçš„çŸ«æ­£æ ‡æ³¨ï¼ˆç›®å‰åªæœ‰DC1394 v.2.xåç«¯æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼‰</td></tr></tbody></table><table><thead><tr><th>capture.set</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>capture.set(CV_CAP_PROP_FRAME_WIDTH, 1080);</td><td>å®½åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_FRAME_HEIGHT, 960);</td><td>é«˜åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_FPS, 30);</td><td>å¸§ç‡ å¸§/ç§’</td></tr><tr><td>capture.set(CV_CAP_PROP_BRIGHTNESS, 1);</td><td>äº®åº¦</td></tr><tr><td>capture.set(CV_CAP_PROP_CONTRAST,40)</td><td>å¯¹æ¯”åº¦ 40</td></tr><tr><td>capture.set(CV_CAP_PROP_SATURATION, 50);</td><td>é¥±å’Œåº¦ 50</td></tr><tr><td>capture.set(CV_CAP_PROP_HUE, 50);</td><td>è‰²è°ƒ 50</td></tr><tr><td>capture.set(CV_CAP_PROP_EXPOSURE, 50);</td><td>æ›å…‰ 50 è·å–æ‘„åƒå¤´å‚æ•°</td></tr></tbody></table><h3 id="å…·ä½“ä»£ç ">å…·ä½“ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Set Dataloader</span><br>vid_path, vid_writer = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><span class="hljs-keyword">if</span> webcam:<br>    view_img = check_imshow()<br>    cudnn.benchmark = <span class="hljs-literal">True</span>  <span class="hljs-comment"># set True to speed up constant image size inference</span><br>    dataset = LoadStreams(source, img_size=imgsz, stride=stride)<br><span class="hljs-keyword">else</span>:<br>    dataset = LoadImages(source, img_size=imgsz, stride=stride)<br><br><span class="hljs-keyword">for</span> path, img, im0s, vid_cap <span class="hljs-keyword">in</span> tqdm(dataset): <span class="hljs-comment">#ä¸€ä¸ªbatchçš„ä¿¡æ¯</span><br>    img_path_list.append(path)<br>    img = torch.from_numpy(img).to(device)<br>    img = img.half() <span class="hljs-keyword">if</span> half <span class="hljs-keyword">else</span> img.<span class="hljs-built_in">float</span>()  <span class="hljs-comment"># uint8 to fp16/32</span><br>    img /= <span class="hljs-number">255.0</span>  <span class="hljs-comment"># 0 - 255 to 0.0 - 1.0</span><br>    <span class="hljs-keyword">if</span> img.ndimension() == <span class="hljs-number">3</span>:<br>        img = img.unsqueeze(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># Inference</span><br>    t1 = time_synchronized()<br>    pred = model(img, augment=augment)[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-comment"># Apply NMS</span><br>    pred = non_max_suppression(pred, conf_thres, iou_thres, classes, agnostic_nms, max_det=max_det)<br>    t2 = time_synchronized()<br><br>    <span class="hljs-comment"># Process detections</span><br>    <span class="hljs-comment"># imgbox_list = [] #ä¸€å¼ å›¾çš„boxä¿¡æ¯</span><br>    Vorticella_list = []<br>    Rotifera_list = []<br><br><br>    <span class="hljs-keyword">for</span> i, det <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(pred):  <span class="hljs-comment"># detections per image ä¸€å¼ å›¾ä¿¡æ¯</span><br>        <span class="hljs-keyword">if</span> webcam:  <span class="hljs-comment"># batch_size &gt;= 1</span><br>            p, s, im0, frame = path[i], <span class="hljs-string">f'<span class="hljs-subst">{i}</span>: '</span>, im0s[i].copy(), dataset.count<br>        <span class="hljs-keyword">else</span>:<br>            p, s, im0, frame = path, <span class="hljs-string">''</span>, im0s.copy(), <span class="hljs-built_in">getattr</span>(dataset, <span class="hljs-string">'frame'</span>, <span class="hljs-number">0</span>) <br>        s += <span class="hljs-string">'%gx%g '</span> % img.shape[<span class="hljs-number">2</span>:]  <span class="hljs-comment"># print string</span><br>        p = Path(p)  <span class="hljs-comment"># to Path</span><br>        save_path = save_dir+p.name <span class="hljs-comment"># img.jpg</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(det):<br>            <span class="hljs-comment"># Rescale boxes from img_size to im0 size</span><br>            <span class="hljs-comment"># è°ƒæ•´é¢„æµ‹æ¡†çš„åæ ‡ï¼šåŸºäºresize+padçš„å›¾ç‰‡çš„åæ ‡--&gt;åŸºäºåŸsizeå›¾ç‰‡çš„åæ ‡</span><br>            <span class="hljs-comment"># æ­¤æ—¶åæ ‡æ ¼å¼ä¸ºxyxy</span><br>            det[:, :<span class="hljs-number">4</span>] = scale_coords(img.shape[<span class="hljs-number">2</span>:], det[:, :<span class="hljs-number">4</span>], im0.shape).<span class="hljs-built_in">round</span>()<br><br>            <span class="hljs-comment"># Print results</span><br>            <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> det[:, -<span class="hljs-number">1</span>].unique():<br>                n = (det[:, -<span class="hljs-number">1</span>] == c).<span class="hljs-built_in">sum</span>()  <span class="hljs-comment"># detections per class</span><br>                s += <span class="hljs-string">f"<span class="hljs-subst">{n}</span> <span class="hljs-subst">{names[<span class="hljs-built_in">int</span>(c)]}</span><span class="hljs-subst">{<span class="hljs-string">'s'</span> * (n &gt; <span class="hljs-number">1</span>)}</span>, "</span>  <span class="hljs-comment"># add to string</span><br>            <span class="hljs-comment"># ["Vorticella", "Rotifera"]</span><br>            <span class="hljs-comment"># Write results</span><br>            <span class="hljs-comment"># for *xyxy, conf, cls in reversed(det):</span><br>            <span class="hljs-keyword">for</span> *xyxy, conf, cls <span class="hljs-keyword">in</span> det: <span class="hljs-comment">#ç½®ä¿¡åº¦ä»å¤§åˆ°å° #å›¾ä¸­çš„æ‰€æœ‰æ¡†ä¿¡æ¯</span><br>                xywh_no_norm = xyxy2xywh(torch.tensor(xyxy).view(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)).view(-<span class="hljs-number">1</span>).tolist()<br>                box = (cls, xywh_no_norm, conf) <span class="hljs-comment">#å­˜å‚¨ç±»åˆ« xywh ç½®ä¿¡åº¦</span><br>                <span class="hljs-keyword">if</span>(conf&lt;sift_thres):<span class="hljs-keyword">continue</span> <span class="hljs-comment">#è¿‡æ»¤ç½®ä¿¡åº¦å°äº0.7çš„æ¡†</span><br>                <span class="hljs-keyword">if</span>(cls==<span class="hljs-number">0</span>):<br>                    Vorticella_list.append(box)<br>                <span class="hljs-keyword">elif</span>(cls==<span class="hljs-number">1</span>):<br>                    Rotifera_list.append(box)<br>                <span class="hljs-comment"># imgbox_list.append(box)</span><br>                c = <span class="hljs-built_in">int</span>(cls)  <span class="hljs-comment"># integer class</span><br>                label = <span class="hljs-string">f'<span class="hljs-subst">{names[c]}</span> <span class="hljs-subst">{conf:<span class="hljs-number">.2</span>f}</span>'</span><br>                plot_one_box(xyxy, im0, label=label, color=colors(c, <span class="hljs-literal">True</span>), line_thickness=<span class="hljs-number">3</span>)<br><br>        <span class="hljs-comment"># Save results (image with detections)</span><br>        <span class="hljs-keyword">if</span> save_img:<br>            <span class="hljs-keyword">if</span> dataset.mode == <span class="hljs-string">'image'</span>:<br>                cv2.imwrite(save_path, im0)<br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 'video' or 'stream'</span><br>                <span class="hljs-keyword">if</span> vid_path != save_path:  <span class="hljs-comment"># new video</span><br>                    vid_path = save_path<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(vid_writer, cv2.VideoWriter):<br>                        vid_writer.release()  <span class="hljs-comment"># release previous video writer</span><br>                    <span class="hljs-keyword">if</span> vid_cap:  <span class="hljs-comment"># video</span><br>                        fps = vid_cap.get(cv2.CAP_PROP_FPS) <span class="hljs-comment">#è·å–åŸå§‹è§†é¢‘çš„å¸§ç‡</span><br>                        <span class="hljs-comment"># w = int(vid_cap.get(cv2.CAP_PROP_FRAME_WIDTH)) #è·å–åŸå§‹è§†é¢‘å¸§å®½</span><br>                        <span class="hljs-comment"># h = int(vid_cap.get(cv2.CAP_PROP_FRAME_HEIGHT)) #è·å–åŸå§‹è§†é¢‘çš„é«˜</span><br>                        w, h =  im0.shape[<span class="hljs-number">1</span>], im0.shape[<span class="hljs-number">0</span>] <span class="hljs-comment">#æ›´æ–°ä¸ºåŸå§‹å›¾åƒçš„å®½é«˜</span><br>                    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># stream</span><br>                        fps, w, h = <span class="hljs-number">30</span>, im0.shape[<span class="hljs-number">1</span>], im0.shape[<span class="hljs-number">0</span>]<br>                        <span class="hljs-comment"># save_path += '.mp4'</span><br>                        save_path += <span class="hljs-string">'.flv'</span><br>                    <span class="hljs-comment"># vid_writer = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(*'mp4v'), fps, (w, h))</span><br><br>                    vid_writer = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(<span class="hljs-string">'F'</span>, <span class="hljs-string">'L'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'1'</span>), fps, (w, h))<br>                vid_writer.write(im0)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> å›¾åƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>np.squeezeçš„ç”¨æ³•</title>
      <link href="/2021/10/29/python/func/squeeze/"/>
      <url>/2021/10/29/python/func/squeeze/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®°å½•squeeze() çš„ç›¸å…³ç”¨æ³•ï¼Œä»¥åŠpytorchå­¦ä¹  ä¸­ torch.squeeze() å’Œtorch.unsqueeze()çš„ç”¨æ³•ã€‚</p></blockquote><h3 id="numpyçš„squeezeå‡½æ•°">numpyçš„squeezeå‡½æ•°</h3><h4 id="å‡½æ•°è¯´æ˜">å‡½æ•°è¯´æ˜</h4><p>é€‚ç”¨äºä¸€å¤„æ•°ç»„ä¸­çš„å•ä¸€ç»´åº¦ï¼Œä¹Ÿå°±æ˜¯å»æ‰æ•°ç»„è½´ä¸­ç»´åº¦ä¸º1çš„ç»´åº¦ï¼Œå‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python">np.squeeze()<br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">3</span>-c5986a7939bf&gt; <span class="hljs-keyword">in</span> &lt;module&gt;<br>----&gt; <span class="hljs-number">1</span> np.squeeze()<br><br>&lt;__array_function__ internals&gt; <span class="hljs-keyword">in</span> squeeze(*args, **kwargs)<br><br>TypeError: _squeeze_dispatcher() missing <span class="hljs-number">1</span> required positional argument: <span class="hljs-string">'a'</span><br><br>â€‹<br>Signature: np.squeeze(a, axis=<span class="hljs-literal">None</span>)<br>Docstring:<br>Remove single-dimensional entries <span class="hljs-keyword">from</span> the shape of an array.<br><br>Parameters<br>----------<br>a : array_like<br>    Input data.<br>axis : <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">tuple</span> of ints, optional<br>    .. versionadded:: <span class="hljs-number">1.7</span><span class="hljs-number">.0</span><br><br>    Selects a subset of the single-dimensional entries <span class="hljs-keyword">in</span> the<br>    shape. If an axis <span class="hljs-keyword">is</span> selected <span class="hljs-keyword">with</span> shape entry greater than<br>    one, an error <span class="hljs-keyword">is</span> raised.<br><br>Returns<br>-------<br>squeezed : ndarray<br>    The <span class="hljs-built_in">input</span> array, but <span class="hljs-keyword">with</span> <span class="hljs-built_in">all</span> <span class="hljs-keyword">or</span> a subset of the<br>    dimensions of length <span class="hljs-number">1</span> removed. This <span class="hljs-keyword">is</span> always `a` itself<br>    <span class="hljs-keyword">or</span> a view into `a`.<br><br>Raises<br>------<br>ValueError<br>    If `axis` <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>, <span class="hljs-keyword">and</span> an axis being squeezed <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> of length <span class="hljs-number">1</span><br><br>See Also<br>--------<br>expand_dims : The inverse operation, adding singleton dimensions<br>reshape : Insert, remove, <span class="hljs-keyword">and</span> combine dimensions, <span class="hljs-keyword">and</span> resize existing ones<br><br>Examples<br>--------<br><span class="hljs-meta">&gt;&gt;&gt; </span>x = np.array([[[<span class="hljs-number">0</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>]]])<br><span class="hljs-meta">&gt;&gt;&gt; </span>x.shape<br>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x).shape<br>(<span class="hljs-number">3</span>,)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">0</span>).shape<br>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">1</span>).shape<br>Traceback (most recent call last):<br>...<br>ValueError: cannot select an axis to squeeze out which has size <span class="hljs-keyword">not</span> equal to one<br><span class="hljs-meta">&gt;&gt;&gt; </span>np.squeeze(x, axis=<span class="hljs-number">2</span>).shape<br>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h4><p>æŒ‡å®šè½´è¿›è¡Œå‹ç¼©å•ä¸€çš„ç»´åº¦ï¼Œå¦‚æœæŒ‡å®šè½´ç»´åº¦ä¸ä¸º1ï¼Œå°±ä¼šè¿”å›ValueErrorã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">b = a.reshape(<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>) <span class="hljs-comment">#axis åˆ†åˆ«ä¸º0ï¼Œ1ï¼Œ2ï¼Œ3</span><br>b<br>array([[[[ <span class="hljs-number">1</span>],<br>         [ <span class="hljs-number">2</span>]]],<br><br><br>       [[[ <span class="hljs-number">3</span>],<br>         [ <span class="hljs-number">4</span>]]],<br><br><br>       [[[ <span class="hljs-number">5</span>],<br>         [ <span class="hljs-number">6</span>]]],<br><br><br>       [[[ <span class="hljs-number">7</span>],<br>         [ <span class="hljs-number">8</span>]]],<br><br><br>       [[[ <span class="hljs-number">9</span>],<br>         [<span class="hljs-number">10</span>]]]])<br>np.squeeze(b,axis=<span class="hljs-number">3</span>) <span class="hljs-comment">#æŒ‡å®šç»´åº¦ä¸º1çš„axisè¿›è¡Œsqueeze</span><br>array([[[ <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>]],<br><br>       [[ <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>]],<br><br>       [[ <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>]],<br><br>       [[ <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>]],<br><br>       [[ <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]]])<br><br>np.squeeze(b,axis=<span class="hljs-number">1</span>)<br>array([[[ <span class="hljs-number">1</span>],<br>        [ <span class="hljs-number">2</span>]],<br><br>       [[ <span class="hljs-number">3</span>],<br>        [ <span class="hljs-number">4</span>]],<br><br>       [[ <span class="hljs-number">5</span>],<br>        [ <span class="hljs-number">6</span>]],<br><br>       [[ <span class="hljs-number">7</span>],<br>        [ <span class="hljs-number">8</span>]],<br><br>       [[ <span class="hljs-number">9</span>],<br>        [<span class="hljs-number">10</span>]]])<br>        <br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">å¦‚æœæŒ‡å®šè½´ä¸º<span class="hljs-number">1</span>ï¼Œå°±ä¼šæŠ¥é”™ValueError<br>ValueError                                Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">27</span>-5187bab4a1cf&gt; <span class="hljs-keyword">in</span> &lt;module&gt;<br>----&gt; <span class="hljs-number">1</span> np.squeeze(b,axis=<span class="hljs-number">0</span>)<br><br>&lt;__array_function__ internals&gt; <span class="hljs-keyword">in</span> squeeze(*args, **kwargs)<br><br>D:\Anaconda3\lib\site-packages\numpy\core\fromnumeric.py <span class="hljs-keyword">in</span> squeeze(a, axis)<br>   <span class="hljs-number">1481</span>         <span class="hljs-keyword">return</span> squeeze()<br>   <span class="hljs-number">1482</span>     <span class="hljs-keyword">else</span>:<br>-&gt; <span class="hljs-number">1483</span>         <span class="hljs-keyword">return</span> squeeze(axis=axis)<br>   <span class="hljs-number">1484</span> <br>   <span class="hljs-number">1485</span> <br><br>ValueError: cannot select an axis to squeeze out which has size <span class="hljs-keyword">not</span> equal to one<br></code></pre></td></tr></tbody></table></figure><h3 id="pytorchä¸­çš„squeezeå’Œunsqueezeå‡½æ•°">pytorchä¸­çš„squeezeå’Œunsqueezeå‡½æ•°</h3><p>åœ¨pytorchä¸­ä¹Ÿæœ‰ç›¸å…³çš„å‡½æ•°ï¼Œä¸numpyä¸­çš„å‡½æ•°ç±»ä¼¼ã€‚</p><p>squeezeçš„ç”¨æ³•ä¸»è¦å°±æ˜¯å¯¹æ•°æ®çš„ç»´åº¦è¿›è¡Œå‹ç¼©æˆ–è€…è§£å‹ã€‚</p><p>å…ˆçœ‹<code>torch.squeeze()</code> è¿™ä¸ªå‡½æ•°ä¸»è¦å¯¹æ•°æ®çš„ç»´åº¦è¿›è¡Œå‹ç¼©ï¼Œ<strong>å»æ‰ç»´æ•°ä¸º1çš„çš„ç»´åº¦</strong>ï¼Œæ¯”å¦‚æ˜¯ä¸€è¡Œæˆ–è€…ä¸€åˆ—è¿™ç§ï¼Œä¸€ä¸ªä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰çš„æ•°å»æ‰ç¬¬ä¸€ä¸ªç»´æ•°ä¸ºä¸€çš„ç»´åº¦ä¹‹åå°±å˜æˆï¼ˆ3ï¼‰è¡Œã€‚squeeze(a)å°±æ˜¯å°†aä¸­æ‰€æœ‰ä¸º1çš„ç»´åº¦åˆ æ‰ã€‚ä¸ä¸º1çš„ç»´åº¦æ²¡æœ‰å½±å“ã€‚a.squeeze(N) å°±æ˜¯å»æ‰aä¸­æŒ‡å®šçš„ç»´æ•°ä¸ºä¸€çš„ç»´åº¦ã€‚è¿˜æœ‰ä¸€ç§å½¢å¼å°±æ˜¯b=torch.squeeze(aï¼ŒN) aä¸­å»æ‰æŒ‡å®šçš„å®šçš„ç»´æ•°ä¸ºä¸€çš„ç»´åº¦ã€‚</p><p>å†çœ‹<code>torch.unsqueeze()</code>è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯å¯¹æ•°æ®ç»´åº¦è¿›è¡Œæ‰©å……ã€‚<strong>ç»™æŒ‡å®šä½ç½®åŠ ä¸Šç»´æ•°ä¸ºä¸€çš„ç»´åº¦</strong>ï¼Œæ¯”å¦‚åŸæœ¬æœ‰ä¸ªä¸‰è¡Œçš„æ•°æ®ï¼ˆ3ï¼‰ï¼Œåœ¨0çš„ä½ç½®åŠ äº†ä¸€ç»´å°±å˜æˆä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰ã€‚a.squeeze(N) å°±æ˜¯åœ¨aä¸­æŒ‡å®šä½ç½®NåŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º1çš„ç»´åº¦ã€‚è¿˜æœ‰ä¸€ç§å½¢å¼å°±æ˜¯b=torch.squeeze(aï¼ŒN) aå°±æ˜¯åœ¨aä¸­æŒ‡å®šä½ç½®NåŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º1çš„ç»´åº¦</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å¾—ç”µè„‘çš„ppi</title>
      <link href="/2021/10/26/python/getppi/"/>
      <url>/2021/10/26/python/getppi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·å–ç”µè„‘çš„åˆ†è¾¨ç‡ï¼Œç‰©ç†å°ºå¯¸ï¼ŒPPI<br>é¦–å…ˆä»‹ç»ä¸€ä¸‹PPIå’ŒDPIï¼š<br>PPIï¼ˆPixels Per Inchï¼‰æ¯ä¸€è‹±å¯¸é•¿åº¦ä¸Šæœ‰å¤šå°‘åƒç´ ç‚¹ï¼›è®¡ç®—æ–¹å¼å¯ä»¥ä½¿ç”¨åƒç´ ç‚¹é™¤ä»¥å±å¹•å°ºå¯¸ã€‚<br>åˆ†è¾¨ç‡DPIï¼ˆDots Per Inchï¼‰æ¯ä¸€è‹±å¯¸æœ‰å¤šå°‘ç‚¹ï¼Œè¿™é‡Œçš„ç‚¹æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå¯ä»¥æ˜¯ 1Dot = 1Pixelï¼Œä¹Ÿå¯ä»¥æ˜¯ 1Dot = N Pixelã€‚åœ¨ç”µè„‘é‡Œï¼Œåˆ†è¾©ç‡æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œè¿™é‡Œç”¨çš„å°±æ˜¯Dot ï¼Œå¯†åº¦ç”¨DPIæè¿°ï¼›åªæœ‰å½“ä½¿ç”¨å±å¹•æœ€å¤§åˆ†è¾©ç‡çš„æ—¶å€™ï¼ˆå³ 1Dot = 1Pixelï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ DPI = PPIã€‚</p></blockquote><p>æœé›†äº†å¾ˆå¤šä»£ç å’Œæ–¹æ³•ï¼Œæœ€åæ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒç²¾å‡†çš„æ–¹æ³•æ˜¯ä½¿ç”¨Tkinterã€‚</p><ul><li>å¯ä»¥å¾—åˆ°æ˜¾ç¤ºå±çš„å°ºå¯¸ï¼Œè·å–ä»¥æ¯«ç±³ä¸ºå•ä½å®½é«˜ï¼ˆwinfo_screenmmheight()ï¼Œwinfo_screenmmwidth()ï¼‰ï¼Œè·å–æ˜¾ç¤ºå±çš„pixelsæ•°ç›®ï¼ˆwinfo_screenheight()ï¼Œwinfo_screenwidth()ï¼‰ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tkè·å–å±å¹•çš„åˆ†è¾¨ç‡å’Œå°ºå¯¸</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> Tk<br><span class="hljs-comment"># creating tkinter window</span><br>base = Tk()<br><span class="hljs-comment">#screen's length and width in pixels and mm</span><br>length_1= base.winfo_screenheight()<br>width_1= base.winfo_screenwidth()<br>length_2 = base.winfo_screenmmheight()<br>width_2 = base.winfo_screenmmwidth()<br><span class="hljs-comment">#screen Depth</span><br>screendepth = base.winfo_screendepth()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"width x length (in pixels) ="</span>,(width_1,length_1))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">"width x length (in mm) ="</span>, (width_2, length_2))<br>width_ppn = width_1/width_2<br>length_ppn = length_1/length_2<br>ppn = <span class="hljs-built_in">round</span>((width_ppn+length_ppn)/<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(width_1/width_2,length_1/length_2,ppn)<br><br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨win32åº“ä¸­çš„åˆ†è¾¨ç‡æ–¹æ³•win32print.GetDeviceCaps()ï¼Œç¼©æ”¾åçš„åˆ†è¾¨ç‡GetSystemMetricsã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## è·å–åˆ†è¾¨ç‡</span><br><span class="hljs-keyword">from</span> win32 <span class="hljs-keyword">import</span> win32api, win32gui, win32print<br><span class="hljs-keyword">from</span> win32.lib <span class="hljs-keyword">import</span> win32con<br><br><span class="hljs-keyword">from</span> win32.win32api <span class="hljs-keyword">import</span> GetSystemMetrics<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_real_resolution</span>():</span><br>    <span class="hljs-string">"""è·å–çœŸå®çš„åˆ†è¾¨ç‡"""</span><br>    hDC = win32gui.GetDC(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment"># æ¨ªå‘åˆ†è¾¨ç‡</span><br>    w = win32print.GetDeviceCaps(hDC, win32con.DESKTOPHORZRES)<br>    <span class="hljs-comment"># çºµå‘åˆ†è¾¨ç‡</span><br>    h = win32print.GetDeviceCaps(hDC, win32con.DESKTOPVERTRES)<br>    <span class="hljs-keyword">return</span> w, h<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_screen_size</span>():</span><br>    <span class="hljs-string">"""è·å–ç¼©æ”¾åçš„åˆ†è¾¨ç‡"""</span><br>    w = GetSystemMetrics (<span class="hljs-number">0</span>)<br>    h = GetSystemMetrics (<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> w, h<br><br>real_resolution = get_real_resolution()<br>screen_size = get_screen_size()<br><span class="hljs-built_in">print</span>(real_resolution)<br><span class="hljs-built_in">print</span>(screen_size)<br><br>screen_scale_rate = <span class="hljs-built_in">round</span>(real_resolution[<span class="hljs-number">0</span>] / screen_size[<span class="hljs-number">0</span>], <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(screen_scale_rate)<br></code></pre></td></tr></tbody></table></figure><ul><li>å¤šå±çš„åˆ†è¾¨ç‡è·å–çš„æ–¹æ³•ã€‚</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å±å¹•çš„å°ºå¯¸</span><br><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-string">"""</span><br><span class="hljs-string">åŠŸèƒ½ï¼šè¯†åˆ«ä¸¤å—æ˜¾ç¤ºå™¨å„è‡ªçš„åˆ†è¾¨ç‡</span><br><span class="hljs-string">"""</span><br><span class="hljs-string">"""æ¨¡å—å¯¼å…¥"""</span><br><span class="hljs-keyword">from</span> win32api <span class="hljs-keyword">import</span> GetSystemMetrics<br><span class="hljs-keyword">from</span> win32con <span class="hljs-keyword">import</span> SM_CMONITORS, SM_CXVIRTUALSCREEN, SM_CYVIRTUALSCREEN<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">Display_Detection</span>():</span><br>    <span class="hljs-comment"># æ˜¾ç¤ºå™¨æ•°é‡æ£€æµ‹</span><br>    MonitorNumber = GetSystemMetrics(SM_CMONITORS)<br>    <span class="hljs-comment"># ä¸»å±å¹•å°ºå¯¸æ£€æµ‹</span><br>    MajorScreenWidth = GetSystemMetrics(<span class="hljs-number">0</span>)  <span class="hljs-comment"># ä¸»å±å¹•å®½</span><br>    MajorScreenHeight = GetSystemMetrics(<span class="hljs-number">1</span>)  <span class="hljs-comment"># ä¸»å±å¹•é«˜</span><br>    <span class="hljs-comment"># print("ä¸»å±å¹•å°ºå¯¸ï¼š", GetSystemMetrics(0), "*", GetSystemMetrics(1))</span><br>    <span class="hljs-comment"># å±å¹•æœ€å¤§å°ºå¯¸</span><br>    aScreenWidth = GetSystemMetrics(SM_CXVIRTUALSCREEN)  <span class="hljs-comment"># å±å¹•æœ€å¤§å®½åº¦</span><br>    aScreenHeight = GetSystemMetrics(SM_CYVIRTUALSCREEN)  <span class="hljs-comment"># å±å¹•æœ€å¤§é«˜åº¦</span><br>    AllScreen=(aScreenWidth, aScreenHeight)<br>    <span class="hljs-comment"># print("å±å¹•æ€»å°ºå¯¸:", aScreenWidth, "*", aScreenHeight)</span><br>    <span class="hljs-comment"># å½“å‰ä¸»æµçš„åˆ†è¾¨ç‡åŸºæ•°æ˜¯å®½ï¼Œå¶æ•°æ˜¯é«˜</span><br>    ResolvingPower = [<span class="hljs-number">1280</span>, <span class="hljs-number">720</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>, <span class="hljs-number">2560</span>, <span class="hljs-number">1440</span>, <span class="hljs-number">3840</span>, <span class="hljs-number">2160</span>, <span class="hljs-number">4096</span>, <span class="hljs-number">2160</span>, <span class="hljs-number">7680</span>, <span class="hljs-number">4320</span>]<br><br>    <span class="hljs-keyword">if</span> MonitorNumber &gt; <span class="hljs-number">1</span>:  <span class="hljs-comment"># å±å¹•æ•°é‡åˆ¤æ–­print(MonitorNumber)å°±å¯ä»¥çŸ¥é“æœ‰å¤šå°‘å—å±å¹•</span><br>        SecondaryScreenWidth = aScreenWidth - MajorScreenWidth  <span class="hljs-comment"># å‰¯å±å®½=æ€»å±å¹•å®½-å½“å‰å±å¹•å®½</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±å®½"</span>,SecondaryScreenWidth)<br><br>        <span class="hljs-comment"># ä¸»å±æ¨ªç«–å±æ£€æµ‹</span><br>        <span class="hljs-keyword">if</span> GetSystemMetrics(<span class="hljs-number">0</span>) &gt; GetSystemMetrics(<span class="hljs-number">1</span>):<br>            MianScreen = (GetSystemMetrics(<span class="hljs-number">0</span>), GetSystemMetrics(<span class="hljs-number">1</span>))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»å±(æ¨ªå±)å°ºå¯¸ï¼š"</span>, GetSystemMetrics(<span class="hljs-number">0</span>), <span class="hljs-string">"*"</span>, GetSystemMetrics(<span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">else</span>:<br>            MianScreen = (GetSystemMetrics(<span class="hljs-number">0</span>), GetSystemMetrics(<span class="hljs-number">1</span>))<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»å±(ç«–å±)å°ºå¯¸ï¼š"</span>, GetSystemMetrics(<span class="hljs-number">0</span>), <span class="hljs-string">"*"</span>, GetSystemMetrics(<span class="hljs-number">1</span>))<br><br>        <span class="hljs-comment"># æ¨ªå±çŠ¶æ€</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(ResolvingPower) - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>            <span class="hljs-comment"># print("i",ResolvingPower[i])</span><br>            <span class="hljs-keyword">if</span> SecondaryScreenWidth == ResolvingPower[i]:<br>                SecondaryScreen = (ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±(æ¨ªå±)å°ºå¯¸ï¼š"</span>, ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-comment"># return "å‰¯å±(ç«–å±)å°ºå¯¸ï¼š",SecondaryScreen</span><br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-comment"># ç«–å±çŠ¶æ€</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(ResolvingPower) - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>            <span class="hljs-comment"># print("i",ResolvingPower[i])</span><br>            <span class="hljs-keyword">if</span> SecondaryScreenWidth == ResolvingPower[i]:<br>                SecondaryScreen = (ResolvingPower[i], ResolvingPower[i + <span class="hljs-number">1</span>])<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">"å‰¯å±(ç«–å±)å°ºå¯¸ï¼š"</span>, ResolvingPower[i], ResolvingPower[i - <span class="hljs-number">1</span>])<br>                <span class="hljs-comment"># return "å‰¯å±(ç«–å±)å°ºå¯¸",SecondaryScreen</span><br>                <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> MonitorNumber,AllScreen,MianScreen,SecondaryScreen<br><br><span class="hljs-comment">#è°ƒç”¨</span><br>a=Display_Detection()<br><span class="hljs-built_in">print</span>(a)<span class="hljs-comment">#aå¯ä»¥ä»»æ„éå†å…¶ä¸­çš„å†…å®¹a[0]ä»£è¡¨å±å¹•æ•°é‡ç­‰ç­‰...</span><br><br>ä¸»å±(æ¨ªå±)å°ºå¯¸ï¼š <span class="hljs-number">1920</span> * <span class="hljs-number">1080</span><br>å‰¯å±(ç«–å±)å°ºå¯¸ï¼š <span class="hljs-number">1440</span> <span class="hljs-number">2560</span><br>(<span class="hljs-number">2</span>, (<span class="hljs-number">3360</span>, <span class="hljs-number">1080</span>), (<span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>), (<span class="hljs-number">1440</span>, <span class="hljs-number">3840</span>))<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sartoriusç«èµ›æ•°æ®è¯´æ˜</title>
      <link href="/2021/10/21/kaggle/kaggle-data-intro/"/>
      <url>/2021/10/21/kaggle/kaggle-data-intro/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°æ®è¯´æ˜</p></blockquote><p>Data Description</p><p>In this competition we are segmenting neuronal cells in images. The training annotations are provided as run length encoded masks, and the images are in PNG format. The number of images is small, but the number of annotated objects is quite high. The hidden test set is roughly 240 images.</p><p><strong>Note: while predictions are not allowed to overlap, the training labels are provided in full (with overlapping portions included). This is to ensure that models are provided the full data for each object. Removing overlap in predictions is a task for the competitor.</strong></p><h2 id="Files">Files</h2><p><strong>train.csv</strong> - IDs and masks for all training objects. None of this metadata is provided for the test set.</p><ul><li><code>id</code> - unique identifier for object</li><li><code>annotation</code> - run length encoded pixels for the identified neuronal cell</li><li><code>width</code> - source image width</li><li><code>height</code> - source image height</li><li><code>cell_type</code> - the cell line</li><li><code>plate_time</code> - time plate was created</li><li><code>sample_date</code> - date sample was created</li><li><code>sample_id</code> - sample identifier</li><li><code>elapsed_timedelta</code> - time since first image taken of sample</li></ul><p><strong>sample_submission.csv</strong> - a sample submission file in the correct format</p><p><strong>train</strong> - train images in PNG format</p><p><strong>test</strong> - test images in PNG format. Only a few test set images are available for download; the remainder can only be accessed by your notebooks when you submit.</p><p><strong>train_semi_supervised</strong> - unlabeled images offered in case you want to use additional data for a semi-supervised approach.</p><p><strong>LIVECell_dataset_2021</strong> - A mirror of the data from <a href="https://github.com/sartorius-research/LIVECell">the LIVECell dataset</a>. LIVECell is the predecessor dataset to this competition. You will find extra data for the <code>SH-SHY5Y</code> cell line, plus several other cell lines not covered in the competition dataset that may be of interest for transfer learning.</p>]]></content>
      
      
      <categories>
          
          <category> kaggle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kaggle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kaggleæ¯”èµ›ä»‹ç»--Sartorius - Cell Instance Segmentation</title>
      <link href="/2021/10/21/kaggle/kaggle-intro/"/>
      <url>/2021/10/21/kaggle/kaggle-intro/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å‚èµ›Sartorius - Cell Instance Segmentationï¼Œå¯¹ç«èµ›é¢˜ç›®å’Œç›¸å…³æ³¨æ„ç‚¹è¿›è¡Œæ¢³ç†è®°å½•ï¼Œä»¥ä¾¿åç»­å›é¡¾ã€‚</p></blockquote><h2 id="ç«èµ›è¯´æ˜">ç«èµ›è¯´æ˜</h2><p>Sartorius - Cell Instance Segmentationï¼Œæ˜¯ä¸€ä¸ªæœ‰å…³åŒ»å­¦å›¾åƒ<strong>å®ä¾‹åˆ†å‰²</strong>çš„ç«èµ›</p><p>åœ°å€ï¼š <a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/overview">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/overview</a></p><h3 id="Description">Description</h3><p>Neurological disorders, including neurodegenerative diseases such as Alzheimerâ€™s and brain tumors, are a leading cause of death and disability across the globe. However, it is hard to quantify how well these deadly disorders respond to treatment. <strong>One accepted method is to review neuronal cells via light microscopy,</strong> which is both accessible and non-invasive. Unfortunately, <strong>segmenting individual neuronal cells</strong> in microscopic images can be challenging and time-intensive. Accurate instance segmentation of these cellsâ€”with the help of computer visionâ€”could lead to new and effective drug discoveries to treat the millions of people with these disorders.</p><p><img src="https://storage.googleapis.com/kaggle-media/competitions/Sartorius/Sartorius_Competition%20Description%20Image%20350x379.png" alt="img"></p><p>Current solutions have limited accuracy for neuronal cells in particular. In internal studies to develop cell instance segmentation models, the neuroblastoma cell line SH-SY5Y consistently exhibits the lowest precision scores out of eight different cancer cell types tested. This could be because neuronal cells have a very <strong>unique, irregular and concave morphology</strong> associated with them, making them challenging to segment with commonly used mask heads.</p><p>Sartorius is a partner of the life science research and the biopharmaceutical industry. They empower scientists and engineers to simplify and accelerate progress in life science and bioprocessing, enabling the development of new and better therapies and more affordable medicine. Theyâ€™re a magnet and dynamic platform for pioneers and leading experts in the field. They bring creative minds together for a common goal: technological breakthroughs that lead to better health for more people.</p><p><font color="purple"> <strong>In this competition, youâ€™ll detect and delineate distinct objects of interest in biological images depicting neuronal cell types commonly used in the study of neurological disorders.</strong> More specifically, youâ€™ll use phase contrast microscopy images to train and test your model for instance segmentation of neuronal cells. Successful models will do this with a high level of accuracy.</font></p><p>If successful, youâ€™ll help further research in neurobiology thanks to the collection of robust quantitative data. Researchers may be able to use this to more easily measure the effects of disease and treatment conditions on neuronal cells. As a result, new drugs could be discovered to treat the millions of people with these leading causes of death and disability.</p><h4 id="ä¸ªäººç†è§£">ä¸ªäººç†è§£</h4><p>ä¹Ÿå°±æ˜¯è¯´ä¸ºäº†é‡åŒ–ç¥ç»ç³»ç»Ÿç±»çš„è‡´å‘½ç–¾ç—…å¯¹æ²»ç–—çš„ååº”ã€‚ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å…‰å­¦æ˜¾å¾®é•œæ£€æŸ¥ç¥ç»å…ƒç»†èƒï¼Œå› ä¸ºè¿™ç§æ–¹æ³•æ—¢æ–¹ä¾¿åˆéä¾µå…¥æ€§ã€‚ä½†æ˜¯ï¼Œåœ¨æ˜¾å¾®å›¾åƒä¸­åˆ†å‰²å•ä¸ªç¥ç»å…ƒç»†èƒå¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ä¸”è€—æ—¶ã€‚æ‰€ä»¥éœ€è¦é‡‡å–è®¡ç®—æœºè§†è§‰çš„æ–¹æ³•æé«˜ç²¾åº¦å’Œæ•ˆç‡ã€‚ç”±äºç¥ç»æ¯ç»†èƒç˜¤ç»†èƒç³»ï¼ˆSH-SY5Yï¼‰ç‹¬ç‰¹ï¼Œä¸è§„åˆ™ï¼Œå‡¹å½¢çš„å½¢æ€ï¼ˆunique, irregular and concave morphologyï¼‰ï¼Œä½¿ç”¨å¸¸è§„çš„åˆ†å‰²æ¨¡å‹è¿›è¡Œåˆ†å‰²æ•ˆæœä¸å¥½ã€‚</p><h3 id="Evaluation">Evaluation</h3><p>This competition is evaluated on the mean average precision at different intersection over union IUO thresholds. The IoU of a proposed set of object pixels and a set of true object pixels is calculated as:</p><p>$$<br>IoU(A,B) = \frac{A \cap B}{A \cup B}<br>$$</p><p>The metric sweeps over a range of IoU thresholds, at each point calculating an average precision value. The threshold values range from 0.5 to 0.95 with a step size of 0.05: <code>(0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95)</code>. In other words, at a threshold of 0.5, a predicted object is considered a â€œhitâ€ if its intersection over union with a ground truth object is greater than 0.5.</p><p>At each threshold value <strong>t</strong>, a precision value is calculated based on the number of true positives <strong>TP</strong>, false negatives <strong>FN</strong>, and false positives <strong>FP</strong> resulting from comparing the predicted object to all ground truth objects:</p><p>$$<br>\frac{TP(t)}{TP(t)+FP(t)+FN(t)}<br>$$</p><p>A true positive is counted when a single predicted object matches a ground truth object with an IoU above the threshold. A false positive indicates a predicted object had no associated ground truth object. A false negative indicates a ground truth object had no associated predicted object. The average precision of a single image is then calculated as the mean of the above precision values at each IoU threshold:<br>$$<br>\frac{1}{\vert thresholds \vert} \sum_t \frac{TP(t)}{TP{t}+FP(t)+FN(t)}<br>$$<br>Lastly, the score returned by the competition metric is the mean taken over the individual average precisions of each image in the test dataset.</p><h4 id="ä¸ªäººç†è§£-2">ä¸ªäººç†è§£</h4><p>æ­¤å¤„ä»‹ç»äº†è¯„ä¼°æŒ‡æ ‡ï¼Œä»¥åŠæœ€åæ’åscoreçš„åº¦é‡æ–¹å¼ã€‚äººä¸ºè®¾ç½®predictionå’Œground truthçš„IoUçš„thresholdsï¼Œè¿™æ ·å¯ä»¥åº¦é‡TPï¼ŒFNï¼ŒFPï¼ˆæ­£ç¡®å®ä¾‹åˆ†å‰²objectä¸ªæ•°ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°çš„objectä¸ªæ•°ï¼Œè¯¯æ£€å‡ºçš„objectä¸ªæ•°ï¼‰ï¼Œè¿›è€Œå¾—åˆ°scoreã€‚</p><h5 id="ç–‘é—®">ç–‘é—®</h5><ul><li>è¿™é‡Œè¯„ä¼°æŒ‡æ ‡ä¸­æ²¡æœ‰æåˆ°åˆ†ç±»ï¼Œå®ä¾‹åˆ†å‰²é™¤äº†åˆ†å‰²å‰æ™¯å’ŒèƒŒæ™¯ï¼Œä¸åº”è¯¥è¿˜éœ€è¦è¯„ä¼°ç±»åˆ«å—ï¼Ÿè¿˜æ˜¯è¯´åœ¨åº¦é‡IOUçš„æ—¶å€™å·²ç»åŒ…å«äº†å¯¹ç±»åˆ«çš„åˆ¤æ–­ã€‚</li><li>æœ€åçš„scoreä¸­ä¸ºä»€ä¹ˆè¦é™¤ä»¥thresholdsï¼Œæ„ä¹‰ä½•åœ¨ï¼Ÿ</li></ul><h2 id="Submission-File">Submission File</h2><p>In order to reduce the submission file size, our metric uses run-length encoding on the pixel values. Instead of submitting an exhaustive list of indices for your segmentation, you will submit pairs of values that contain a start position and a run length. E.g. â€˜1 3â€™ implies starting at pixel 1 and running a total of 3 pixels 1,2,3.</p><p>The competition format requires a space delimited list of pairs. <strong>For example, â€˜1 3 10 5â€™ implies pixels 1,2,3,10,11,12,13,14 are to be included in the mask. The pixels are one-indexed</strong><br><strong>and numbered from top to bottom, then left to right: 1 is pixel 1,1, 2 is pixel 2,1, etc.</strong></p><p>The metric checks that the pairs are sorted, positive, and the decoded pixel values are not duplicated. <font color="purple"><strong>It also checks that no two predicted masks for the same image are overlapping.</strong></font></p><p>The file should contain a header and have the following format. Each row in your submission represents a single predicted nucleus segmentation for the given <code>ImageId</code>.</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">id</span>,predicted  <br><span class="hljs-attribute">0114f484a16c152baa2d82fdd43740880a762c93f436c8988ac461c5c9dbe7d5</span>,<span class="hljs-number">1</span> <span class="hljs-number">1</span>  <br><span class="hljs-attribute">0999dab07b11bc85fb8464fc36c947fbd8b5d6ec49817361cb780659ca805eac</span>,<span class="hljs-number">1</span> <span class="hljs-number">1</span>  <br><span class="hljs-attribute">0999dab07b11bc85fb8464fc36c947fbd8b5d6ec49817361cb780659ca805eac</span>,<span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>  <br><span class="hljs-attribute">etc</span>...<br></code></pre></td></tr></tbody></table></figure><p>Submission files may take several minutes to process due to the size.</p><h4 id="ä¸ªäººç†è§£-3">ä¸ªäººç†è§£</h4><p>è¿™é‡Œè¯´æ˜äº†æäº¤çš„æ–‡ä»¶æ ¼å¼ã€‚</p><ul><li><p>ä¸åŒä¸ä¸€èˆ¬çš„å›¾åƒæ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦å°†å›¾ç‰‡çš„åƒç´ ç‚¹ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³æ ‡å·ä¸º1ï¼Œ2ï¼Œ3â€¦,ç„¶åå°†å›¾ç‰‡çš„åˆ†å‰²å¾—åˆ°çš„åƒç´ ç‚¹æ ‡è¯†ä¸º<code>'èµ·å§‹ç‚¹1 ä¸ªæ•°1 èµ·å§‹ç‚¹2 ä¸ªæ•°2 .....'</code>ï¼Œ</p></li><li><p>æ³¨æ„ç‚¹æ˜¯æäº¤çš„é¢„æµ‹åœ¨åŒä¸€å¼ å›¾ä¸­é¢„æµ‹çš„maskä¸å…è®¸æœ‰é‡åˆåƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´è¯¥ç«èµ›æ¶‰åŠå¯¹äºä¸åŒçš„ç»†èƒç³»å®ä¾‹åˆ†å‰²ï¼Œå¹¶ä¸”åœ¨ä¸€å¼ å›¾ä¸Šåˆ†å‰²çš„ç»†èƒç³»maskï¼Œä¸èƒ½æœ‰äº¤ç‚¹ã€‚<strong>è®­ç»ƒæ•°æ®ä¸­labelæ˜¯ä¼šå‡ºç°é‡å éƒ¨åˆ†çš„ï¼Œåœ¨é¢„æµ‹çš„ç»“æœä¸­éœ€è¦æ¶ˆé™¤é¢„æµ‹é‡å éƒ¨åˆ†ã€‚</strong></p><blockquote><p>Note: while predictions are not allowed to overlap, the training labels are provided in full (with overlapping portions included). This is to ensure that models are provided the full data for each object. Removing overlap in predictions is a task for the competitor.</p></blockquote></li></ul><h5 id="attentionï¼ˆå¾…å°è¯•ï¼‰">attentionï¼ˆå¾…å°è¯•ï¼‰</h5><p>åœ¨è®¨è®ºåŒºä¸­æœ‰äººè¯´maskå®é™…ä¸Šè¦ (left -&gt; right, top -&gt; bottom) æ ‡å·ï¼Œä¸çŸ¥é“åç»­ä¸»åŠæ–¹æœ‰æ²¡æœ‰æ›´æ¢å†…éƒ¨æµ‹è¯•ä»£ç ã€‚</p><h5 id="Mask-encoding">Mask encoding</h5><p>In submission, we have to encoding mask. Evaluation page show the pixels are numbered from top to bottom, then left to right. But, this is not correct. As you know, the training annotations provided are numbered from left to right, then top to bottom, and this is also the case with submission.<br>An LB score with encoded mask (top -&gt; bottom, left -&gt; right) was 0.0000, but a score with (left -&gt; right, top -&gt; bottom) was over 0.22.<br>Unfortunately, the evaluation page is just a copy from Data Science Bowl 2018. I hope that the competition hosts will update the evaluation page for this competition.<br><a href="https://www.kaggle.com/christoffersartorius">@christoffersartorius</a> <a href="https://www.kaggle.com/addisonhoward">@addisonhoward</a></p><h4 id="tips">tips</h4><p><strong>åç»­å¯å‚è€ƒ</strong></p><p><strong>RLE</strong>ç›¸å…³ä»£ç è¯´æ˜ï¼ˆ<a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278663%EF%BC%89">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278663ï¼‰</a></p><p>In this great <a href="https://www.kaggle.com/ihelon/cell-segmentation-run-length-decoding">EDA notebook</a> created by <a href="https://www.kaggle.com/ihelon">@ihelon</a>, I found Inversionâ€™s classical <a href="https://www.kaggle.com/ihelon/cell-segmentation-run-length-decoding">RLE encoding function</a>. The function has definitely stood the test of time and works great here, but I had a bit of difficulty understanding it, so I refactored it to be a bit easier for beginners. Hereâ€™s the code (with some personal notes):</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># modified from: https://www.kaggle.com/inversion/run-length-decoding-quick-start</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rle_decode_refactored</span>(<span class="hljs-params">mask_rle, shape, color=<span class="hljs-number">1</span></span>):</span><br>    <span class="hljs-string">'''</span><br><span class="hljs-string">    mask_rle: run-length as string formated (start length)</span><br><span class="hljs-string">    shape: (height,width) of array to return </span><br><span class="hljs-string">    Returns numpy array, 1 - mask, 0 - background</span><br><span class="hljs-string">    '''</span><br>    <span class="hljs-comment"># Split the string by space, then convert it into a integer array</span><br>    s = np.array(mask_rle.split(), dtype=<span class="hljs-built_in">int</span>)<br><br>    <span class="hljs-comment"># Every even value is the start, every odd value is the "run" length</span><br>    starts = s[<span class="hljs-number">0</span>::<span class="hljs-number">2</span>] - <span class="hljs-number">1</span><br>    lengths = s[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>]<br>    ends = starts + lengths<br><br>    <span class="hljs-comment"># The image image is actually flattened since RLE is a 1D "run"</span><br>    h, w, d = shape<br>    img = np.zeros((h * w, d), dtype=np.float32)<br><br>    <span class="hljs-comment"># The color here is actually just any integer you want!</span><br>    <span class="hljs-keyword">for</span> lo, hi <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(starts, ends):<br>        img[lo : hi] = color<br>    <span class="hljs-comment"># Don't forget to change the image back to the original shape</span><br>    <span class="hljs-keyword">return</span> img.reshape(shape)<br></code></pre></td></tr></tbody></table></figure><h3 id="Timeline">Timeline</h3><p>12æœˆ30å·æ˜¯æœ€ç»ˆçš„æˆªæ­¢æ—¥æœŸï¼Œå†²å†²å†²ï¼</p><ul><li><strong>October 14, 2021</strong> - Start Date.</li><li><strong>December 23, 2021</strong> - Entry Deadline. You must accept the competition rules before this date in order to compete.</li><li><strong>December 23, 2021</strong> - Team Merger Deadline. This is the last day participants may join or merge teams.</li><li><strong>December 30, 2021</strong> - Final Submission Deadline.</li></ul><p>All deadlines are at 11:59 PM UTC on the corresponding day unless otherwise noted. The competition organizers reserve the right to update the contest timeline if they deem it necessary.</p><h2 id="ç›¸å…³paper">ç›¸å…³paper</h2><p>å‚è€ƒ <a href="https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278716">https://www.kaggle.com/c/sartorius-cell-instance-segmentation/discussion/278716</a></p><p><strong>Papers:</strong></p><ul><li><a href="https://www.researchgate.net/publication/329933921_Instance_Segmentation_of_Neural_Cells">Instance Segmentation of Neural Cells</a> - Instance segmentation of neural cells plays an important role in brain study. However, this task is challenging due to the special shapes and behaviors of neural cells. Existing methods are not precise enough to capture their tiny structures, e.g., filopodia and lamellipodia, which are critical to the understanding of cell interaction and behavior. To this end, we propose a novel deep multi-task learning model to jointly detect and segment neural cells instance-wise. Our method is built upon SSD, with ResNet101 as the backbone to achieve both high detection accuracy and fast speed. Furthermore, unlike existing works which tend to produce wavy and inaccurate boundaries, we embed a deconvolution module into SSD to better capture details. Experiments on a dataset of neural cell microscopic images show that our method is able to achieve better performance in terms of accuracy and efficiency, comparing favorably with current state-of-the-art methods.</li><li><a href="https://www.researchgate.net/publication/340998089_Rank_6_Mask-RCNN_for_Cell_Instance_Segmentation">Mask-RCNN for Cell Instance Segmentation</a> - We proposed an automatic nucleus segmentation algorithm of H&amp;E stained tissue microscopy images. Mask-RCNN is a recently proposed state-of-the-art algorithm for object detection and object instance segmentation of natural images. In this paper, we demonstrate that Mask-RCNN can be used to perform highly effective and efficient automatic segmentation of H&amp;E microscopy images for cell nuclei. We propose a novel MASK Non-maximum suppression (NMS) module which can automatically ensemble classifiers results and increase the robustness of model.</li><li><a href="https://arxiv.org/abs/1908.06623">IRNet: Instance Relation Network for Overlapping Cervical Cell Segmentation</a> - Cell instance segmentation in Pap smear image remains challenging due to the wide existence of occlusion among translucent cytoplasm in cell clumps. Conventional methods heavily rely on accurate nuclei detection results and are easily disturbed by miscellaneous objects. In this paper, we propose a novel Instance Relation Network (IRNet) for robust overlapping cell segmentation by exploring instance relation interaction. Specifically, we propose the Instance Relation Module to construct the cell association matrix for transferring information among individual cell-instance features. With the collaboration of different instances, the augmented features gain benefits from contextual information and improve semantic consistency. Meanwhile, we proposed a sparsity constrained Duplicate Removal Module to eliminate the misalignment between classification and localization accuracy for candidates selection. The largest cervical Pap smear (CPS) dataset with more than 8000 cell annotations in Pap smear image was constructed for comprehensive evaluation. Our method outperforms other methods by a large margin, demonstrating the effectiveness of exploring instance relation.</li><li><a href="https://www.researchgate.net/publication/336392797_Weakly_Supervised_Cell_Instance_Segmentation_by_Propagating_from_Detection_Response">Weakly Supervised Cell Instance Segmentation by Propagating from Detection Response</a> - Cell shape analysis is important in biomedical research. Deep learning methods may perform to segment individual cells if they use sufficient training data that the boundary of each cell is annotated. However, it is very time-consuming for preparing such detailed annotation for many cell culture conditions. In this paper, we propose a weakly supervised method that can segment individual cell regions who touch each other with unclear boundaries in dense conditions without the training data for cell regions. We demonstrated the efficacy of our method using several data-set including multiple cell types captured by several types of microscopy. Our method achieved the highest accuracy compared with several conventional methods. In addition, we demonstrated that our method can perform without any annotation by using fluorescence images that cell nuclear were stained as training data.</li><li><a href="https://arxiv.org/abs/2007.10787">Deep Semi-supervised Knowledge Distillation for Overlapping Cervical Cell Instance Segmentation</a> - Deep learning methods show promising results for overlapping cervical cell instance segmentation. However, in order to train a model with good generalization ability, voluminous pixel-level annotations are demanded which is quite expensive and time-consuming for acquisition. In this paper, we propose to leverage both labeled and unlabeled data for instance segmentation with improved accuracy by knowledge distillation. We propose a novel Mask-guided Mean Teacher framework with Perturbation-sensitive Sample Mining (MMT-PSM), which consists of a teacher and a student network during training. Two networks are encouraged to be consistent both in feature and semantic level under small perturbations. The teacherâ€™s self-ensemble predictions from K-time augmented samples are used to construct the reliable pseudolabels for optimizing the student. We design a novel strategy to estimate the sensitivity to perturbations for each proposal and select informative samples from massive cases to facilitate fast and effective semantic distillation. In addition, to eliminate the unavoidable noise from the background region, we propose to use the predicted segmentation mask as guidance to enforce the feature distillation in the foreground region. Experiments show that the proposed method improves the performance significantly compared with the supervised method learned from labeled data only, and outperforms state-of-the-art semi-supervised methods.</li><li><a href="https://www.sciencedirect.com/science/article/pii/S1361841518308442">Attentive neural cell instance segmentation</a> - Neural cell instance segmentation, which aims at joint detection and segmentation of every neural cell in a microscopic image, is essential to many neuroscience applications. The challenge of this task in- volves cell adhesion, cell distortion, unclear cell contours, low-contrast cell protrusion structures, and background impurities. Consequently, current instance segmentation methods generally fall short of pre- cision. In this paper, we propose an attentive instance segmentation method that accurately predicts the bounding box of each cell as well as its segmentation mask simultaneously. In particular, our method builds on a joint network that combines a single shot multi-box detector (SSD) and a U-net. Furthermore, we employ the attention mechanism in both detection and segmentation modules to focus the model on the useful features. The proposed method is validated on a dataset of neural cell microscopic images. Experimental results demonstrate that our approach can accurately detect and segment neural cell in- stances at a fast speed, comparing favorably with the state-of-the-art methods.</li></ul><p>ğŸ“Œ <a href="https://github.com/milesial/Pytorch-UNet">U-net with Pytorch</a><br>ğŸ“Œ <a href="https://github.com/Fpiotro/MOLECULAR-TRANSLATION">Using U-net for a Kaggle competition (AutoEncoder)</a></p><h4 id="attention">attention</h4><p><strong>ä¸»åŠæ–¹æœ‰å…³LIVECellçš„è®ºæ–‡</strong></p><p>Edlund, C., Jackson, T.R., Khalid, N. et al.<br>LIVECell-A large-scale dataset for label-free live cell segmentation.<br>Nat Methods 18, 1038 -1045 (2021).<br>Available at: <a href="https://doi.org/10.1038/s41592-021-01249-6">https://doi.org/10.1038/s41592-021-01249-6</a></p><p>Their paper is not just a dataset paper, <strong>it evaluates the performance of both recent anchor-free and anchor-based models for each cell type under four task conditions</strong>, which I think is very informative.<br>Within their paper, it is shown that <font color="purple"><strong>the results are better when other cell types not included in the test data are also included in the training</strong></font>. This may be because using even unrelated cell types in the training data allows the model to learn morphology and other factors.</p><p>Therefore, in addition to the dataset provided in Kaggle, transfer learning using other cell types in LIVECell, the predecessor of the data, will be important for this competition.</p><p>If you want to use the model trained by LIVECell for transfer learning, this page on GitHub may be useful.<br>ğŸ‘‰ <a href="https://github.com/sartorius-research/LIVECell/tree/main/model">https://github.com/sartorius-research/LIVECell/tree/main/model</a></p><p>The models are based on PyTorch, but are from FIARâ€™s Dectron 2 library.<br>Dectron2: <a href="https://github.com/facebookresearch/detectron2">https://github.com/facebookresearch/detectron2</a></p>]]></content>
      
      
      <categories>
          
          <category> kaggle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kaggle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PyQt5ä¸­æ”¾ç½®å›¾ç‰‡</title>
      <link href="/2021/10/21/python/pyqt/pyqtimg/"/>
      <url>/2021/10/21/python/pyqt/pyqtimg/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨pyqtä¸­ä½¿ç”¨labelæ˜¾ç¤ºå›¾ç‰‡ï¼Œæˆ–è€…ä½¿ç”¨ç»§æ‰¿äº†QLabelçš„ç±»æ˜¾ç¤ºå›¾ç‰‡ï¼Œå®ç°åœ¨å›¾ç‰‡ä¸Šè¿›è¡Œé•¿åº¦ï¼Œè§’åº¦æµ‹é‡ï¼Œæ ‡æ³¨ï¼Œç”»æ¿ç­‰åŠŸèƒ½ã€‚</p></blockquote><h2 id="QLabel">QLabel</h2><p>Qlabeléƒ¨ä»¶æ—¶ç”¨äºæä¾›æ–‡æœ¬æˆ–è€…å›¾åƒæ˜¾ç¤ºã€‚Qlabelå¯ä»¥åŒ…å«çº¯æ–‡æœ¬ï¼ˆå°†å­—ç¬¦ä¸²ä¼ é€’ç»™setTextï¼‰ï¼Œå¯Œæ–‡æœ¬ï¼ˆå°†å¯Œæ–‡æœ¬ä¼ é€’ç»™setTextï¼‰ï¼Œå›¾åƒï¼ˆå°†QPixmapå¯¹è±¡ä¼ é€’setPixmapï¼‰ï¼ŒåŠ¨ç”»ï¼ˆå°†QMovieå¯¹è±¡ä¼ é€’ç»™setMovieï¼‰ï¼Œæ•°å­—ï¼ˆå°†intæˆ–åœ¨doubleæ•°å­—ä¼ é€’ç»™setNumï¼‰ï¼Œç©ºï¼ˆé»˜è®¤ï¼Œç”±clearè®¾ç½®ï¼‰ã€‚</p><ul><li>å½“Qlabelä½¿ç”¨setTextè®¾ç½®æ–‡æœ¬å†…å®¹ï¼Œå› ä¸ºQlabelä¼šåˆ¤æ–­å…¶ä¸ºçº¯æ–‡æœ¬è¿˜æ˜¯ä½œä¸ºHTMLæ ‡è®°çš„å¯Œæ–‡æœ¬ï¼Œæƒ³æ˜ç¡®æ˜¾ç¤ºæ–‡æœ¬æ ¼å¼ï¼Œåˆ™è°ƒç”¨setTextFormatã€‚</li></ul><h2 id="å›¾ç‰‡æ’å…¥">å›¾ç‰‡æ’å…¥</h2><p>é¦–å…ˆä½¿ç”¨QPixmap()åˆ›å»ºä¸€ä¸ªQPixmapå¯¹è±¡ï¼Œä½¿ç”¨setPixmapå‡½æ•°æ’å…¥å›¾ç‰‡ï¼Œè‹¥ä½¿ç”¨setScaledContentsï¼ˆTrueï¼‰å¯ä»¥è®¾ç½®å°†å›¾ç‰‡å¡«å……è¯¥labelçš„æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼Œæ­¤å‚æ•°é»˜è®¤æ˜¯Falseã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><span class="hljs-comment">#lb1æ˜¯ç›´æ¥æ’å…¥ï¼›lb2æ˜¯ç¼©æ”¾å›¾ç‰‡å¡«å……labelåŒºåŸŸï¼›</span><br>        pix = QPixmap(<span class="hljs-string">'sexy.jpg'</span>)<br><br>        lb1 = QLabel(self)<br>        lb1.setGeometry(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">300</span>,<span class="hljs-number">200</span>)<br>        lb1.setStyleSheet(<span class="hljs-string">"border: 2px solid red"</span>)<br>        lb1.setPixmap(pix)<br><br>        lb2 = QLabel(self)<br>        lb2.setGeometry(<span class="hljs-number">0</span>,<span class="hljs-number">250</span>,<span class="hljs-number">300</span>,<span class="hljs-number">200</span>)<br>        lb2.setPixmap(pix)<br>        lb2.setStyleSheet(<span class="hljs-string">"border: 2px solid red"</span>)<br>        lb2.setScaledContents(<span class="hljs-literal">True</span>)<br></code></pre></td></tr></tbody></table></figure><h2 id="é¡¹ç›®å®ä¾‹">é¡¹ç›®å®ä¾‹</h2><p>åœ¨é¡¹ç›®ä»£ç ä¸­æœ‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">self.lab = MyLabel(self.widget)<br><span class="hljs-comment"># self.lab.setStyleSheet("QLabel{background:black;}")</span><br>img_width = <span class="hljs-number">1102</span><br>img_height = <span class="hljs-number">629</span><br>self.image_list = [<span class="hljs-string">"./temp.jpg"</span>]<br>self.image = QPixmap(self.image_list[<span class="hljs-number">0</span>])<br>self.image = self.image.scaled(img_width, img_height)<br>self.lab.setPixmap(self.image)<br>self.lab.setMinimumSize(img_width, img_height)<br></code></pre></td></tr></tbody></table></figure><ul><li><p>é¦–å…ˆåˆ›å»ºQpixmap(path)</p></li><li><p>å¯¹Qpixmapå¯¹è±¡scaledè°ƒæ•´å›¾ç‰‡å¤§å°</p></li><li><p>æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨Qtè‡ªå¸¦çš„scaled()å‡½æ•°ï¼›QImageã€QPixmapç­‰ç»˜å›¾è®¾å¤‡ç±»éƒ½æä¾›scaled()å‡½æ•°ã€‚</p><p>scaled()æ˜¯ä¸€ä¸ªé‡è½½å‡½æ•°ï¼ŒæŒ‰ç…§æŒ‡å®šçš„å®½å’Œé«˜ï¼Œæ ¹æ®ç»™çš„sizeå’ŒaspectRatioModeä»åŸæœ‰å›¾åƒè¿”å›ä¸€ä¸ªç»è¿‡æ¯”ä¾‹è½¬æ¢çš„å›¾åƒï¼Œå¦‚æœå®½é«˜ä¸º0ï¼Œè¿”å›ä¸€ä¸ªç©ºå›¾åƒ<br>æ‰€ä»¥ï¼Œè·å–æ§ä»¶çš„æ”¹å˜åçš„å®½é«˜ï¼Œå°±èƒ½è®¾å®šå›¾åƒè½¬æ¢çš„å®½é«˜è½¬æ¢æ¯”ä¾‹ï¼Œç”¨scaled()çš„è¿”å›é‡æ–°è¿›è¡Œç»˜å›¾å³å¯è‡ªé€‚åº”çª—å£ã€‚</p><p>é¡¹ç›®ä¸­è¿™é‡Œä½¿ç”¨ <code>Qt.IgnoreAspectRatio</code></p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">QPixmap::scaled(const QSize &amp; size, Qt::AspectRatioMode aspectRatioMode = Qt::IgnoreAspectRatio, Qt::TransformationMode transformMode = Qt::FastTransformation) const<br>å…¶ä¸­aspectRatioMode<br>IgnoreAspectRatio  <span class="hljs-comment">#çŸ©å½¢æ¡†æœ‰å¤šå¤§ï¼Œå›¾ç‰‡å°±ç¼©æ”¾æˆå¤šå¤§ï¼Œä¸é™åˆ¶åŸå›¾ç‰‡çš„é•¿å®½æ¯”</span><br>KeepAspectRatio    <span class="hljs-comment">#ä¿æŒåŸå›¾ç‰‡çš„é•¿å®½æ¯”ï¼Œä¸”ä¸è¶…è¿‡çŸ©å½¢æ¡†çš„å¤§å°</span><br>KeepAspectRatioByExpanding   <span class="hljs-comment">#æ ¹æ®çŸ©å½¢æ¡†çš„å¤§å°æœ€å¤§ç¼©æ”¾å›¾ç‰‡</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scaled</span>(<span class="hljs-params">self, *__args</span>):</span> <span class="hljs-comment"># real signature unknown; restored from __doc__ with multiple overloads</span><br>    <span class="hljs-string">"""</span><br><span class="hljs-string">        scaled(self, int, int, aspectRatioMode: Qt.AspectRatioMode = Qt.IgnoreAspectRatio, transformMode: Qt.TransformationMode = Qt.FastTransformation) -&gt; QPixmap</span><br><span class="hljs-string">        scaled(self, QSize, aspectRatioMode: Qt.AspectRatioMode = Qt.IgnoreAspectRatio, transformMode: Qt.TransformationMode = Qt.FastTransformation) -&gt; QPixmap</span><br><span class="hljs-string">        """</span><br>    <span class="hljs-keyword">return</span> QPixmap<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cvè¯»å–å¸¦æœ‰ä¸­æ–‡è·¯å¾„çš„å›¾ç‰‡</title>
      <link href="/2021/10/20/python/img/cvread/"/>
      <url>/2021/10/20/python/img/cvread/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¸¸è§„åœ¨è¯»å–å›¾ç‰‡æ—¶ä½¿ç”¨çš„ä»£ç æ˜¯<code>cv.imread(path)</code>ï¼Œä½†æ˜¯è·¯å¾„ä¸­å‡ºç°ä¸­æ–‡æ—¶å°±ä¼šå‡ºç°ï¼Œè¯»å–ä¸ºç©ºçš„æƒ…å†µï¼Œä»¥ä¸‹ç»™å‡ºè§£å†³æ–¹æ³•ã€‚</p></blockquote><h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹<code>cv2.imread()å‡½æ•°</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">cv2.imread(filepath,flags)<br>filepath:æ˜¯è¦è¯»å…¥çš„å›¾ç‰‡è·¯å¾„<br>flags: è¯»å…¥å›¾ç‰‡çš„æ ¼å¼<br>cv2.IMRAED_COLOR:é»˜è®¤é€‰æ‹©æ­¤å‚æ•°ï¼Œè¯»å…¥å½©è‰²å›¾ç‰‡ï¼ŒBGRçš„æ ¼å¼ï¼Œå¿½ç•¥äº†alphaé€šé“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—<span class="hljs-number">1</span>ä»£æ›¿ã€‚<br>cv2.IMREAD_GRAYSCALE:è¯»å…¥ç°åº¦å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥å†™<span class="hljs-number">0</span><br>cv2.IMREAD_UNCHANGED:é¡¾åæ€ä¹‰ï¼Œè¯»å…¥å®Œæ•´å›¾ç‰‡ï¼ŒåŒ…æ‹¬alphaé€šé“ï¼Œå¯ä»¥ç›´æ¥å†™-<span class="hljs-number">1</span>ï¼ˆBGRAï¼‰<br><br>cv2.COLOR_BGR2GRAY:å¯ä»¥è½¬æ¢é¢œè‰²ç©ºé—´ï¼Œç”±BGRè½¬æ¢ä¸ºRGB<br>cv2.COLOR_RGB2GRAY:æœ‰RGBè½¬æ¢ä¸ºç°åº¦å›¾æ ¼å¼<br></code></pre></td></tr></tbody></table></figure><blockquote><p>alphaé€šé“ï¼Œåˆç§°Aé€šé“ï¼Œæ˜¯ä¸€ä¸ª8ä½çš„ç°åº¦é€šé“ï¼Œè¯¥é€šé“ç”¨256çº§ç°åº¦æ¥è®°å½•å›¾åƒä¸­çš„é€æ˜åº¦å¤ä¿¡æ¯ï¼Œå®šä¹‰é€æ˜ã€ä¸é€æ˜å’ŒåŠé€æ˜åŒºåŸŸï¼Œå…¶ä¸­é»‘è¡¨ç¤ºå…¨é€æ˜ï¼Œç™½è¡¨ç¤ºä¸é€æ˜ï¼Œç°è¡¨ç¤ºåŠé€æ˜ã€‚å¦‚æœè¯»å–çš„å›¾ç‰‡æ²¡æœ‰alphaé€šé“åˆ™è¿˜æ˜¯æŒ‰ç…§ä¸‰é€šé“è¯»å–ã€‚</p></blockquote><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><p><strong>åŸå› ï¼š</strong>  åœ¨è¯»å–å«æœ‰ä¸­æ–‡å­—ç¬¦çš„è·¯å¾„å›¾ç‰‡æ—¶ä¼šè¿”å›Noneï¼Œè¿™æ˜¯ç”±äºopencvä¸æ¥å—non-asciiçš„è·¯å¾„ã€‚</p><p><strong>æ–¹æ³•ï¼š</strong> å…ˆä½¿ç”¨numpyçš„fromfileå°†å›¾ç‰‡è¯»å–ä¸ºnp.uint8çš„æ ¼å¼ï¼Œå†ä½¿ç”¨cvçš„imdecodeå‡½æ•°è§£ç ã€‚</p><p><strong>å…·ä½“ä»£ç </strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>im_path = <span class="hljs-string">'./æµ‹è¯•æ•°æ®/temp_long.jpg'</span><br>im = cv2.imdecode(np.fromfile(im_path, dtype=np.uint8))<br>cv2.imshow(<span class="hljs-string">"æ˜¾ç¤ºå›¾ç‰‡"</span>,im)<br><span class="hljs-built_in">print</span>(im.shape)<br>cv2.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><p><strong>ä»£ç å…·ä½“åˆ†æï¼š</strong><br>å…ˆä¸ç›´æ¥è¯»å–å›¾ç‰‡ï¼Œè€Œæ˜¯é‡‡ç”¨<code>numpy</code>ä¸­çš„<code>fromfile</code>è¯»å–æ–‡ä»¶ï¼Œå°†å›¾ç‰‡æŒ‰ç…§intç±»å‹è¯»å…¥æ•°æ®ï¼Œè¯»å…¥çš„æ˜¯ä¸€ç»´æ•°ç»„ï¼Œç„¶åé€šè¿‡cvä¸­<code>imdecode</code>æ¥å¯¹æ•°ç»„è§£ç å¾—åˆ°å›¾ç‰‡ï¼Œ<code>imdecode</code>å‡½æ•°çš„ä½œç”¨æ˜¯<code>ä»å†…å­˜ç¼“å†²åŒºä¸­è¯»å–å›¾åƒ</code>ï¼Œå¦‚æœç¼“å†²åŒºå¤ªçŸ­æˆ–åŒ…å«æ— æ•ˆæ•°æ®æ—¶ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªç©ºçŸ©é˜µ(Mat::data==NULL)ã€‚å¦‚æœæ˜¯å½©è‰²å›¾åƒï¼Œè§£ç åçš„å›¾åƒå°†æŒ‰ç…§B G Ré¡ºåºå­˜å‚¨é€šé“ã€‚è¿™å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°<code>imdecode(buf,flags)</code>ï¼Œbufæ˜¯è¾“å…¥æ•°ç»„æˆ–å­—èŠ‚å‘é‡ï¼Œflags ä¸cv::imreadç›¸åŒçš„flagã€‚</p><blockquote><p>cv2.IMREAD_COLORï¼šåŠ è½½å½©è‰²å›¾ç‰‡ï¼Œè¿™ä¸ªæ˜¯é»˜è®¤å‚æ•°ï¼Œå¯ä»¥ç›´æ¥å†™1 ï¼ˆBGRå½¢å¼ï¼‰<br>cv2.IMREAD_GRAYSCALEï¼šä»¥ç°åº¦æ¨¡å¼åŠ è½½å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥å†™0<br>cv2.IMREAD_UNCHANGEDï¼šåŒ…æ‹¬alphaï¼Œå¯ä»¥ç›´æ¥å†™-1</p></blockquote><p><strong>ä¿å­˜</strong></p><p>'.jpgâ€™è¡¨ç¤ºæŠŠå½“å‰å›¾ç‰‡imgæŒ‰ç…§jpgæ ¼å¼ç¼–ç ï¼ŒæŒ‰ç…§ä¸åŒæ ¼å¼ç¼–ç çš„ç»“æœä¸ä¸€æ ·</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>im_path = <span class="hljs-string">'./æµ‹è¯•æ•°æ®/temp_long.jpg'</span><br>im = cv2.imdecode(np.fromfile(im_path, dtype=np.uint8))<br>cv2.imshow(<span class="hljs-string">"æ˜¾ç¤ºå›¾ç‰‡"</span>,im)<br>cv2.imencode(<span class="hljs-string">'.jpg'</span>, im)[<span class="hljs-number">1</span>].tofile(<span class="hljs-string">'E:\æµ‹è¯•è·¯å¾„/frameTest.jpg'</span>)<span class="hljs-comment">#è‹±æ–‡æˆ–ä¸­æ–‡è·¯å¾„å‡é€‚ç”¨</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> å›¾åƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer36 äºŒå‰æœç´¢æ ‘å’ŒåŒå‘é“¾è¡¨</title>
      <link href="/2021/10/08/leetcode/leetcode-offer36/"/>
      <url>/2021/10/08/leetcode/leetcode-offer36/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æœç´¢æ ‘å’ŒåŒå‘é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œå°†è¯¥äºŒå‰æœç´¢æ ‘è½¬æ¢æˆä¸€ä¸ªæ’åºçš„å¾ªç¯åŒå‘é“¾è¡¨ã€‚è¦æ±‚ä¸èƒ½åˆ›å»ºä»»ä½•æ–°çš„èŠ‚ç‚¹ï¼Œåªèƒ½è°ƒæ•´æ ‘ä¸­èŠ‚ç‚¹æŒ‡é’ˆçš„æŒ‡å‘<br>ä¸ºäº†è®©æ‚¨æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œä»¥ä¸‹é¢çš„äºŒå‰æœç´¢æ ‘ä¸ºä¾‹ï¼š</p><p><img src="https://picture.mulindya.com/leetcode-offer36-1.png" alt=""></p><p>æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªäºŒå‰æœç´¢æ ‘è½¬åŒ–ä¸ºåŒå‘å¾ªç¯é“¾è¡¨ã€‚é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå‰é©±å’Œåç»§æŒ‡é’ˆã€‚å¯¹äºåŒå‘å¾ªç¯é“¾è¡¨ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„åç»§æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸Šé¢çš„äºŒå‰æœç´¢æ ‘è½¬åŒ–æˆçš„é“¾è¡¨ã€‚â€œheadâ€ è¡¨ç¤ºæŒ‡å‘é“¾è¡¨ä¸­æœ‰æœ€å°å…ƒç´ çš„èŠ‚ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer36-2.png" alt=""></p><p>ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°±åœ°å®Œæˆè½¬æ¢æ“ä½œã€‚å½“è½¬åŒ–å®Œæˆä»¥åï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆéœ€è¦æŒ‡å‘å‰é©±ï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å³æŒ‡é’ˆéœ€è¦æŒ‡å‘åç»§ã€‚è¿˜éœ€è¦è¿”å›é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><p>æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 426 é¢˜ç›¸åŒï¼š<a href="https://leetcode-cn.com/problems/convert-binary-search-tree-to-sorted-doubly-linked-list/">https://leetcode-cn.com/problems/convert-binary-search-tree-to-sorted-doubly-linked-list/</a></p></li><li><p>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨ã€‚</p></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ¬é¢˜çš„ç®—æ³•æ€æƒ³æ˜¯åœ¨ä¸­åºéå†çš„åŸºç¡€ä¸Šï¼Œæ¶‰åŠå¯¹é“¾è¡¨çš„å¤„ç†ï¼Œä½†æ˜¯è¿˜æ˜¯æŒ‰ç…§ä¸­åºé€’å½’éå†çš„é€»è¾‘ï¼Œä½¿ç”¨selfå¯ä»¥å…¨å±€è®¾ç½®preå’Œheadï¼Œpreæ˜¯ç”¨æ¥æ›´æ–°èŠ‚ç‚¹çš„å·¦å³æŒ‡å‘ï¼Œheadæ˜¯ç”¨äºåç»­çš„å¤´å°¾èŠ‚ç‚¹çš„å¤„ç†ï¼Œå‡½æ•°ç»“æŸæ—¶çš„preå³ä¸ºå°¾èŠ‚ç‚¹ã€‚</p><p>ä¸­åºéå†ä»£ç ç»“æ„ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">root</span>):</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br><span class="hljs-keyword">return</span><br>dfs(root.left)<br><span class="hljs-built_in">print</span>(root)<br>dfs(root.right)<br></code></pre></td></tr></tbody></table></figure><p>æ³¨æ„è¾¹ç•Œæ¡ä»¶çš„å¤„ç†ï¼Œä»¥åŠself.preå’Œself.headçš„æ›´æ–°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">"""</span><br><span class="hljs-string"># Definition for a Node.</span><br><span class="hljs-string">class Node:</span><br><span class="hljs-string">    def __init__(self, val, left=None, right=None):</span><br><span class="hljs-string">        self.val = val</span><br><span class="hljs-string">        self.left = left</span><br><span class="hljs-string">        self.right = right</span><br><span class="hljs-string">"""</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">treeToDoublyList</span>(<span class="hljs-params">self, root: <span class="hljs-string">'Node'</span></span>) -&gt; 'Node':</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mediumfunc</span>(<span class="hljs-params">root</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<span class="hljs-keyword">return</span><br>            mediumfunc(root.left)<br>            <span class="hljs-keyword">if</span>(self.pre):<br>                self.pre.right = root<br>                root.left = self.pre<br>            <span class="hljs-keyword">else</span>:<br>                self.head = root<br>            self.pre = root <span class="hljs-comment">#æ³¨æ„åœ¨åˆ¤æ–­ä¹‹åå¿…é¡»è¦æ›´æ–°pre</span><br>            mediumfunc(root.right)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(root):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        self.head = root<br>        self.pre = <span class="hljs-literal">None</span><br>        mediumfunc(root)<br>        self.head.left = self.pre<br>        self.pre.right = self.head<br>        <span class="hljs-keyword">return</span> self.head<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pipenvçš„å®‰è£…å’Œä½¿ç”¨</title>
      <link href="/2021/10/08/project_tool/pipenv/"/>
      <url>/2021/10/08/project_tool/pipenv/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pipenv æ˜¯Kenneth Reitzå¤§ç¥çš„ä½œå“ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç®¡ç†Pythonå¤šä¸ªç¯å¢ƒï¼Œå„ç§åŒ…ã€‚è¿‡å»æˆ‘ä»¬ä¸€èˆ¬ç”¨virtualenvæ­å»ºè™šæ‹Ÿç¯å¢ƒï¼Œç®¡ç†pythonç‰ˆæœ¬ï¼Œä½†æ˜¯è·¨å¹³å°çš„ä½¿ç”¨ä¸å¤ªä¸€è‡´ï¼Œä¸”æœ‰æ—¶å€™å¤„ç†åŒ…ä¹‹é—´çš„ä¾èµ–æ€»å­˜åœ¨é—®é¢˜ï¼›è¿‡å»ä¹Ÿå¸¸å¸¸ç”¨ pipè¿›è¡ŒåŒ…çš„ç®¡ç†ï¼Œpipå·²ç»è¶³å¤Ÿå¥½ï¼Œä½†æ˜¯ä»ç„¶æ¨èpipenvï¼Œç›¸å½“äºvirtualenvå’Œpipçš„åˆä½“ï¼Œä¸”æ›´åŠ å¼ºå¤§ã€‚pipenvå¼€æºä¹‹åï¼Œåœ¨GitHubä¸Šæœ‰å¾ˆé«˜äººæ°”ï¼ˆæˆªæ­¢äºç°åœ¨æœ‰9600å¤šæ˜Ÿï¼‰ã€‚</p></blockquote><blockquote><p>åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œé¡¹ç›®æ–‡ä»¶104Mæ‰“åŒ…ä¹‹åæ–‡ä»¶5.8Gï¼Œæœ‰äººè¯´ï¼ŒAnacondaé‡Œå†…ç½®äº†å¾ˆå¤šåº“ï¼Œæ‰“åŒ…çš„æ—¶å€™æ‰“åŒ…äº†å¾ˆå¤šä¸å¿…è¦çš„æ¨¡å—è¿›å»ï¼Œè¦ç”¨çº¯å‡€çš„Pythonæ¥æ‰“åŒ…ã€‚äºæ˜¯å°è¯•ä½¿ç”¨pipenvè™šæ‹Ÿç¯å¢ƒæ¥æ‰“åŒ…ï¼Œemmmæœ€åå®Œæˆæ˜¯5.2Gï¼Œæ„Ÿè§‰ï¼Œä¹Ÿï¼Œæ²¡æœ‰ï¼Œå¤šå¤§æ”¹å˜å–ï¼Œå°¤å…¶æ˜¯torchåŒ…ç›´æ¥å åˆ°äº†2.8G(è¿™è¿˜æ˜¯æ”¹äº†from importä¹‹åå‘¢)ã€‚ å“ ğŸ˜£</p></blockquote><p><strong>pipenvä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</strong></p><p>ï¼ˆ1ï¼‰pipenvé›†æˆäº†pipï¼Œvirtualenvä¸¤è€…çš„åŠŸèƒ½ï¼Œä¸”å®Œå–„äº†ä¸¤è€…çš„ä¸€äº›ç¼ºé™·ã€‚</p><p>ï¼ˆ2ï¼‰è¿‡å»ç”¨virtualenvç®¡ç†requirements.txtæ–‡ä»¶å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼ŒPipenvä½¿ç”¨Pipfileå’ŒPipfile.lockï¼Œåè€…å­˜æ”¾å°†åŒ…çš„ä¾èµ–å…³ç³»ï¼ŒæŸ¥çœ‹ä¾èµ–å…³ç³»æ˜¯ååˆ†æ–¹ä¾¿ã€‚</p><p>ï¼ˆ3ï¼‰å„ä¸ªåœ°æ–¹ä½¿ç”¨äº†å“ˆå¸Œæ ¡éªŒï¼Œæ— è®ºå®‰è£…è¿˜æ˜¯å¸è½½åŒ…éƒ½ååˆ†å®‰å…¨ï¼Œä¸”ä¼šè‡ªåŠ¨å…¬å¼€å®‰å…¨æ¼æ´ã€‚ã€‚</p><p>ï¼ˆ4ï¼‰é€šè¿‡åŠ è½½.envæ–‡ä»¶ç®€åŒ–å¼€å‘å·¥ä½œæµç¨‹ã€‚</p><p>ï¼ˆ5ï¼‰æ”¯æŒPython2 å’Œ Python3ï¼Œåœ¨å„ä¸ªå¹³å°çš„å‘½ä»¤éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢å¿«é€Ÿä»‹ç»pipenvçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ–‡ç« æœ«å°¾æœ‰å…¶githubé“¾æ¥ã€‚æœ¬æ–‡çš„æµ‹è¯•ç¯å¢ƒæ˜¯windowsä¸‹çš„Python3.6ï¼Œå¯¹äºå…¶ä»–å¹³å°åŒæ ·é€‚ç”¨ã€‚</p><h2 id="1-å®‰è£…pipenv">1 å®‰è£…pipenv</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv<br></code></pre></td></tr></tbody></table></figure><h2 id="2-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><p>æ–°å»ºæ–‡ä»¶å¤¹åœ¨æ–‡ä»¶å¤¹ä¸­å»ºç«‹è™šæ‹Ÿç¯å¢ƒã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">mkdir envfile<br>cd envfile<br>pipenv install<br></code></pre></td></tr></tbody></table></figure><p>åˆå§‹åŒ–å¥½è™šæ‹Ÿç¯å¢ƒåï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆ2ä¸ªæ–‡ä»¶<code>Pipfile</code>å’Œ<code>Pipfile.lock</code>ã€‚ä¸ºpipenvåŒ…çš„é…ç½®æ–‡ä»¶ï¼Œä»£æ›¿åŸæ¥çš„ requirement.txtã€‚</p><p>é¡¹ç›®æäº¤æ—¶ï¼Œå¯å°†<code>Pipfile</code> æ–‡ä»¶å’Œ<code>Pipfile.lock</code>æ–‡ä»¶ä¸€å¹¶æäº¤ï¼Œå¾…å…¶ä»–å¼€å‘å…‹éš†ä¸‹è½½ï¼Œæ ¹æ®æ­¤Pipfile è¿è¡Œå‘½ä»¤<code>pipenv install --dev</code>ç”Ÿæˆè‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒã€‚</p><p><code>Pipfile.lock</code> æ–‡ä»¶æ˜¯é€šè¿‡hashç®—æ³•å°†åŒ…çš„åç§°å’Œç‰ˆæœ¬ï¼ŒåŠä¾èµ–å…³ç³»ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œå¯ä»¥ä¿è¯åŒ…çš„å®Œæ•´æ€§ã€‚</p><h2 id="3-å®‰è£…åŒ…">3 å®‰è£…åŒ…</h2><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…åŒ…</p><p>å¯ä»¥ä½¿ç”¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install package<br></code></pre></td></tr></tbody></table></figure><p>æˆ–è€…å…ˆè¿›å…¥è™šæ‹Ÿç¯å¢ƒä¸­å†å®‰è£…åŒ…ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell  <span class="hljs-comment">#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br>pip install package<br></code></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä½¿ç”¨txtæ–‡ä»¶æ¥å®‰è£…åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv install -r requirements.txt <span class="hljs-comment">#é€šè¿‡requirementsæ–‡ä»¶å®‰è£…åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>requirements.txtæ–‡ä»¶å½¢å¦‚</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># pip install -r requirements.txt</span><br><br><span class="hljs-comment"># base ----------------------------------------</span><br><span class="hljs-attribute">matplotlib</span>&gt;=<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">numpy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">opencv</span>-python&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">Pillow</span><br><span class="hljs-attribute">PyYAML</span>&gt;=<span class="hljs-number">5</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">scipy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">torch</span>==<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">torchvision</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">tqdm</span>&gt;=<span class="hljs-number">4</span>.<span class="hljs-number">41</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">PyQt5</span><br><span class="hljs-attribute">fpdf</span><br><span class="hljs-comment"># logging -------------------------------------</span><br><span class="hljs-comment">#tensorboard&gt;=2.4.1</span><br><span class="hljs-comment"># wandb</span><br><br><span class="hljs-comment"># plotting ------------------------------------</span><br><span class="hljs-attribute">seaborn</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pandas</span><br><span class="hljs-attribute">requests</span><br></code></pre></td></tr></tbody></table></figure><h2 id="4-ç›¸å…³çš„å‘½ä»¤">4 ç›¸å…³çš„å‘½ä»¤</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv --py    <span class="hljs-comment">#æ˜¾ç¤ºpythonè§£é‡Šå™¨ä¿¡æ¯</span><br>pipenv --where <span class="hljs-comment">#æ˜¾ç¤ºæœ¬åœ°å·¥ç¨‹è·¯å¾„</span><br>pipenv --venv  <span class="hljs-comment">#æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒä¿¡æ¯</span><br>pipenv graph   <span class="hljs-comment">#æ˜¾ç¤ºç›®å‰å®‰è£…çš„åº“ä»¥åŠä¾èµ–å…³ç³»</span><br>pipenv uninstrall package <span class="hljs-comment">#å¸è½½ä¾èµ–åŒ…</span><br>pipenv uninstall --<span class="hljs-built_in">all</span>    <span class="hljs-comment">#å¸è½½å…¨éƒ¨ä¾èµ–åŒ…</span><br>exit                      <span class="hljs-comment">#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span><br>pipenv --rm               <span class="hljs-comment">#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></td></tr></tbody></table></figure><h4 id="è¿è¡Œä»£ç ">è¿è¡Œä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv run python XXX.py<br>æˆ–è€…<br>pipenv shell<br>python XXX.py<br></code></pre></td></tr></tbody></table></figure><h2 id="5-pyinstalleræ‰“åŒ…å‹ç¼©">5 pyinstalleræ‰“åŒ…å‹ç¼©</h2><h3 id="ç¬¬ä¸€æ¬¡æ‰“åŒ…">ç¬¬ä¸€æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pipenv        <span class="hljs-comment">#å®‰è£…pipenvåº“</span><br>pipenv install            <span class="hljs-comment">#æ–°å»ºç¯å¢ƒï¼Œcdè¿›å…¥ï¼Œå»ºç«‹è™šæ‹Ÿç¯å¢ƒ</span><br>pipenv shell              <span class="hljs-comment">#è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [...]         <span class="hljs-comment">#å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ¨¡å—</span><br>pip install pyinstaller   <span class="hljs-comment">#å®‰è£…æ‰“åŒ…çš„æ¨¡å—</span><br>pyinstaller å‚æ•° [..]      <span class="hljs-comment">#æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure><p>ç”Ÿæˆdistæ–‡ä»¶å¤¹å’Œç»“æœã€‚</p><h3 id="å†æ¬¡æ‰“åŒ…">å†æ¬¡æ‰“åŒ…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pipenv shell               <span class="hljs-comment">#cdè¿›å…¥ä¹‹å‰åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ï¼Œè¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br>pip install [new package]  <span class="hljs-comment">#å®‰è£…æ–°æ¨¡å—</span><br>pyinstaller å‚æ•° [...]      <span class="hljs-comment">#å†æ¬¡æ‰“åŒ…</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å‰²æ–‡ä»¶åç›¸å…³æ“ä½œ</title>
      <link href="/2021/10/07/python/file/split-filename/"/>
      <url>/2021/10/07/python/file/split-filename/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹æ–‡ä»¶åçš„ç›¸å…³æ“ä½œæ€»ç»“</p></blockquote><h3 id="å‡½æ•°ä»‹ç»">å‡½æ•°ä»‹ç»</h3><p><code>os.path</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">os.path.split() <span class="hljs-comment">#åˆ†å‰²æ–‡ä»¶å</span><br>os.path.splitdrive() <span class="hljs-comment">#åˆ†å‰²ç›˜ç¬¦</span><br>os.path.splitext() <span class="hljs-comment">#åˆ†å‰²æ‰©å±•å</span><br>os.path.basename() <span class="hljs-comment">#è·å–æ–‡ä»¶åï¼Œsplitçš„åä¸€å…ƒç´ </span><br>os.path.dirname()  <span class="hljs-comment">#è·å–è·¯å¾„åï¼Œsplitçš„å‰ä¸€å…ƒç´ </span><br>os.path.join()     <span class="hljs-comment">#è¿æ¥pathå­—ç¬¦ä¸²</span><br></code></pre></td></tr></tbody></table></figure><p><code>os</code>ç›¸å…³å‡½æ•°</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.walk()     <span class="hljs-comment">#éå†è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯å’Œå­æ–‡ä»¶ä¿¡æ¯ï¼ˆrootï¼Œdirï¼Œfileçš„å½¢å¼ï¼‰</span><br>os.listdir()  <span class="hljs-comment">#è¿”å›è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“ä»‹ç»">å…·ä½“ä»‹ç»</h3><h4 id="os-path-split">os.path.split()</h4><p><code>os.path.split()</code>å‡½æ•°è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆçˆ¶è·¯å¾„ï¼Œæ–‡ä»¶åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.split(p)<br>Docstring:<br>Split a pathname.<br><br>Return <span class="hljs-built_in">tuple</span> (head, tail) where tail <span class="hljs-keyword">is</span> everything after the final slash.<br>Either part may be empty.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>spath = <span class="hljs-string">"./a/b/c/name.txt"</span><br>path,filename = os.path.split(spath)<br>path,filenameä¸º(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">'name.txt'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitdrive">os.path.splitdrive()</h4><p><code>os.path.splitdrive()</code>å‡½æ•°è¿”å›å…ƒç»„ä¿¡æ¯ï¼ˆç›˜ç¬¦ï¼Œè·¯å¾„ï¼ˆé™¤å»ç›˜ç¬¦ï¼‰ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitdrive(p)<br>Docstring:<br>Split a pathname into drive/UNC sharepoint <span class="hljs-keyword">and</span> relative path specifiers.<br>Returns a <span class="hljs-number">2</span>-<span class="hljs-built_in">tuple</span> (drive_or_unc, path); either part may be empty.<br><br>If you assign<br>    result = splitdrive(p)<br>It <span class="hljs-keyword">is</span> always true that:<br>    result[<span class="hljs-number">0</span>] + result[<span class="hljs-number">1</span>] == p<br><br>If the path contained a drive letter, drive_or_unc will contain everything<br>up to <span class="hljs-keyword">and</span> including the colon.  e.g. splitdrive(<span class="hljs-string">"c:/dir"</span>) returns (<span class="hljs-string">"c:"</span>, <span class="hljs-string">"/dir"</span>)<br><br>If the path contained a UNC path, the drive_or_unc will contain the host name<br><span class="hljs-keyword">and</span> share up to but <span class="hljs-keyword">not</span> including the fourth directory separator character.<br>e.g. splitdrive(<span class="hljs-string">"//host/computer/dir"</span>) returns (<span class="hljs-string">"//host/computer"</span>, <span class="hljs-string">"/dir"</span>)<br><br>Paths cannot contain both a drive letter <span class="hljs-keyword">and</span> a UNC path.<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š  <br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.splitdrive(cpath)<br>(<span class="hljs-string">'C:'</span>, <span class="hljs-string">'/a/b/a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-splitext">os.path.splitext()</h4><p><code>os.path.splitext()</code>è¿”å›è·¯å¾„çš„å…ƒç»„ä¿¡æ¯ï¼ˆè·¯å¾„åŠæ–‡ä»¶åï¼Œæ‰©å±•åï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.splitext(p)<br>Docstring:<br>Split the extension <span class="hljs-keyword">from</span> a pathname.<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-dirname-ä¸os-path-basename">os.path.dirname()ä¸os.path.basename()</h4><p><code>os.path.dirname()</code>å’Œ<code>os.path.basename()</code>åˆ†åˆ«è¿”å›<code>split</code>å‡½æ•°çš„å‰åå…ƒç´ ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.basename(p)<br>Docstring: Returns the final component of a pathname<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>cpath = <span class="hljs-string">"C:/a/b/a.csv"</span><br>os.path.dirname(cpath) <span class="hljs-comment">#dirpath</span><br><span class="hljs-string">'C:/a/b'</span><br>os.path.basename(cpath) <span class="hljs-comment">#filename</span><br><span class="hljs-string">'a.csv'</span><br>ç›¸å½“äºsplitçš„åˆ†è§£ï¼š<br>os.path.split(cpath)<br>(<span class="hljs-string">'C:/a/b'</span>, <span class="hljs-string">'a.csv'</span>)<br></code></pre></td></tr></tbody></table></figure><h4 id="os-path-join">os.path.join()</h4><p><code>os.path.join()</code>ä½¿ç”¨ç‰¹å®šçš„åˆ†éš”ç¬¦è¿æ¥è·¯å¾„ã€‚Windowsä¸‹é»˜è®¤ä½¿ç”¨<code>\\</code>ã€‚Linuxä¸‹é»˜è®¤ä½¿ç”¨<code>/</code>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.path.join(path, *paths)<br>Docstring: &lt;no docstring&gt;<br>File:      d:\anaconda3\lib\ntpath.py<br><span class="hljs-type">Type</span>:      function<br>    <br>ä¾‹å¦‚ï¼š<br>os.path.join(<span class="hljs-string">'./a/b/c'</span>, <span class="hljs-string">"a123"</span>, <span class="hljs-string">'name.txt'</span>) <br><span class="hljs-string">'./a/b/c\\a123\\name.txt'</span><br></code></pre></td></tr></tbody></table></figure><h4 id="os-walk">os.walk()</h4><p><code>os.walk()</code>éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼Œç„¶åé€’å½’éå†ä¸‹åˆ—å­æ–‡ä»¶å¤¹ã€‚<code>for root,dirs,files in os.walk(temp)</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.walk(top, topdown=<span class="hljs-literal">True</span>, onerror=<span class="hljs-literal">None</span>, followlinks=<span class="hljs-literal">False</span>)<br>Docstring:<br>Directory tree generator.<br><br>For each directory <span class="hljs-keyword">in</span> the directory tree rooted at top (including top<br>itself, but excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>), yields a <span class="hljs-number">3</span>-<span class="hljs-built_in">tuple</span><br>    dirpath, dirnames, filenames<br>dirpath <span class="hljs-keyword">is</span> a string, the path to the directory.  dirnames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of<br>the names of the subdirectories <span class="hljs-keyword">in</span> dirpath (excluding <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span>).<br>filenames <span class="hljs-keyword">is</span> a <span class="hljs-built_in">list</span> of the names of the non-directory files <span class="hljs-keyword">in</span> dirpath.<br>Note that the names <span class="hljs-keyword">in</span> the lists are just names, <span class="hljs-keyword">with</span> no path components.<br>To get a full path (which begins <span class="hljs-keyword">with</span> top) to a file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">in</span><br>dirpath, do os.path.join(dirpath, name).<br><br>If optional arg <span class="hljs-string">'topdown'</span> <span class="hljs-keyword">is</span> true <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> specified, the triple <span class="hljs-keyword">for</span> a<br>directory <span class="hljs-keyword">is</span> generated before the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">any</span> of its subdirectories<br>(directories are generated top down).  If topdown <span class="hljs-keyword">is</span> false, the triple<br><span class="hljs-keyword">for</span> a directory <span class="hljs-keyword">is</span> generated after the triples <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> of its<br>subdirectories (directories are generated bottom up).<br><br>Caution:  <span class="hljs-keyword">if</span> you <span class="hljs-keyword">pass</span> a relative pathname <span class="hljs-keyword">for</span> top, don<span class="hljs-string">'t change the</span><br><span class="hljs-string">current working directory between resumptions of walk.  walk never</span><br><span class="hljs-string">changes the current directory, and assumes that the client doesn'</span>t<br>either.<br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br><span class="hljs-keyword">for</span> root,dirs,files <span class="hljs-keyword">in</span> os.walk(temp,topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-comment">#éå†æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½• root,dirs,files,topdownä¸ºfalseæ—¶è¡¨ç¤ºä»åº•å‘ä¸Šï¼Œä¸ºtrueæ˜¯ä»é¡¶å‘ä¸‹</span><br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        <span class="hljs-built_in">print</span>(os.path.join(root,name))<br>        <br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span>.exe<br>E:\è¿…é›·ä¸‹è½½\cuda_10<span class="hljs-number">.2</span><span class="hljs-number">.89_441</span><span class="hljs-number">.22</span>_win10.exe<br>E:\è¿…é›·ä¸‹è½½\Git-<span class="hljs-number">2.33</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>-<span class="hljs-number">64</span>-bit.exe<br>E:\è¿…é›·ä¸‹è½½\ide-<span class="hljs-built_in">eval</span>-resetter-<span class="hljs-number">2.1</span><span class="hljs-number">.13</span>.<span class="hljs-built_in">zip</span><br>E:\è¿…é›·ä¸‹è½½\npp<span class="hljs-number">.8</span><span class="hljs-number">.1</span><span class="hljs-number">.4</span>.Installer.exe<br>E:\è¿…é›·ä¸‹è½½\sogou_explorer_11<span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-number">.33862_7793</span>.exe<br>E:\è¿…é›·ä¸‹è½½\windows_v6<span class="hljs-number">.61</span>.rar<br>E:\è¿…é›·ä¸‹è½½\Suplicant_for_Campus_Network_For_Windows_V6<span class="hljs-number">.61</span> <br></code></pre></td></tr></tbody></table></figure><h4 id="os-listdir">os.listdir()</h4><p><code>os.listdir()</code>è¿”å›æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¸€çº§æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">Signature: os.listdir(path=<span class="hljs-literal">None</span>)<br>Docstring:<br>Return a <span class="hljs-built_in">list</span> containing the names of the files <span class="hljs-keyword">in</span> the directory.<br><br>path can be specified <span class="hljs-keyword">as</span> either <span class="hljs-built_in">str</span>, <span class="hljs-built_in">bytes</span>, <span class="hljs-keyword">or</span> a path-like <span class="hljs-built_in">object</span>.  If path <span class="hljs-keyword">is</span> <span class="hljs-built_in">bytes</span>,<br>  the filenames returned will also be <span class="hljs-built_in">bytes</span>; <span class="hljs-keyword">in</span> <span class="hljs-built_in">all</span> other circumstances<br>  the filenames returned will be <span class="hljs-built_in">str</span>.<br>If path <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>, uses the path=<span class="hljs-string">'.'</span>.<br>On some platforms, path may also be specified <span class="hljs-keyword">as</span> an <span class="hljs-built_in">open</span> file descriptor;\<br>  the file descriptor must refer to a directory.<br>  If this functionality <span class="hljs-keyword">is</span> unavailable, using it raises NotImplementedError.<br><br>The <span class="hljs-built_in">list</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> arbitrary order.  It does <span class="hljs-keyword">not</span> include the special<br>entries <span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'..'</span> even <span class="hljs-keyword">if</span> they are present <span class="hljs-keyword">in</span> the directory.<br><span class="hljs-type">Type</span>:      builtin_function_or_method<br>    <br>ä¾‹å¦‚ï¼š<br>temp = <span class="hljs-string">"E:\è¿…é›·ä¸‹è½½"</span><br>os.listdir(temp) <span class="hljs-comment">#åˆ—å‡ºdirnameä¸‹çš„ç›®å½•å’Œæ–‡ä»¶</span><br>[<span class="hljs-string">'cuda_10.2.89_441.22_win10.exe'</span>,<br> <span class="hljs-string">'Git-2.33.0.2-64-bit.exe'</span>,<br> <span class="hljs-string">'ide-eval-resetter-2.1.13.zip'</span>,<br> <span class="hljs-string">'npp.8.1.4.Installer.exe'</span>,<br> <span class="hljs-string">'sogou_explorer_11.0.0.33862_7793.exe'</span>,<br> <span class="hljs-string">'Suplicant_for_Campus_Network_For_Windows_V6.61'</span>,<br> <span class="hljs-string">'windows_v6.61.rar'</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> æ–‡ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> æ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨pythonåˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</title>
      <link href="/2021/10/06/python/file/delete-file/"/>
      <url>/2021/10/06/python/file/delete-file/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œå’Œå‡½æ•°ã€‚</p></blockquote><h3 id="åˆ é™¤å•ä¸ªæ–‡ä»¶">åˆ é™¤å•ä¸ªæ–‡ä»¶</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">os.remove(path)<br><span class="hljs-comment"># å¦‚æœpathæ˜¯ä¸€ä¸ªç›®å½•ï¼ŒæŠ›å‡ºOSErroré”™è¯¯ï¼Œå¦‚æœæ–‡ä»¶ä¸åœ¨æˆ–è€…è·¯å¾„é”™è¯¯ï¼Œä¼šæŠ›å‡ºé”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤æ–‡ä»¶å¤¹">åˆ é™¤æ–‡ä»¶å¤¹</h3><p>ç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">os.rmdir(dirName)<br>os.removedirs(dirName)<br><span class="hljs-comment"># åˆ é™¤ç›®å½• dirNameï¼Œè¦æ±‚dirNameå¿…é¡»æ˜¯ä¸ªç©ºç›®å½•ï¼Œå¦åˆ™æŠ›å‡ºOSErroré”™è¯¯</span><br></code></pre></td></tr></tbody></table></figure><h3 id="é€’å½’åˆ é™¤æ–‡ä»¶å¤¹">é€’å½’åˆ é™¤æ–‡ä»¶å¤¹</h3><p>éç©ºæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br>shutil.rmtree()<br></code></pre></td></tr></tbody></table></figure><p>éå†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…ˆåˆ é™¤å­æ–‡ä»¶ï¼Œå†åˆ é™¤æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">"filename"</span>, topdown=<span class="hljs-literal">False</span>):<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> files:<br>        os.remove(os.path.join(root, name))<br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> dirs:<br>        os.rmdir(os.path.join(root, name))<br> <br><span class="hljs-comment"># os.walkçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦éå†å¹¶åˆ é™¤å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ç›®å½•</span><br><span class="hljs-comment"># ä¸Šé¢çš„ä»£ç è¿è¡Œåï¼Œæ–‡ä»¶å¤¹"filename"é‡Œçš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å…¨è¢«åˆ é™¤ï¼Œä½†æ˜¯æ–‡ä»¶å¤¹"filename"è¿˜å­˜åœ¨</span><br><span class="hljs-comment"># å…·ä½“å¯ä»¥æŸ¥ä¸‹os.walk()çš„ç”¨æ³•ï¼Œä»¥åŠå…¶å‚æ•°topdownçš„åŠŸèƒ½</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> æ–‡ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> æ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer42 è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</title>
      <link href="/2021/10/06/leetcode/leetcode-offer42/"/>
      <url>/2021/10/06/leetcode/leetcode-offer42/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿ç»­å­æ•°ç»„æœ€å¤§å’Œ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚</p><p>è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">è¾“å…¥: nums = [<span class="hljs-string">-2</span>,1,<span class="hljs-string">-3</span>,4,<span class="hljs-string">-1</span>,2,1,<span class="hljs-string">-5</span>,4]<br>è¾“å‡º: 6<br>è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,<span class="hljs-string">-1</span>,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= arr.length &lt;= 10^5</li><li>-100 &lt;= arr[i] &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨æ•°ç»„dp[i]ç”¨æ¥è¡¨ç¤ºä»0åˆ°iä¸‹æ ‡å…ƒç´ çš„å­æ•°ç»„ä¸­ï¼ŒåŒ…å«iå…ƒç´ çš„æœ€å¤§å’Œï¼Œä¾‹å¦‚ï¼šåŸå§‹æ•°åˆ—num=[-2,1,-3,4,-1,2,1,-5,4]ï¼Œdpä¸º[-2, 1, -2, 4, 3, 5, 6, 1, 5]ã€‚æ³¨æ„ä»ä¸‹æ ‡1å¼€å§‹ï¼Œdp[i] = num[i] + max(0, dp[i-1])ï¼Œå¦‚æœå‰é¡¹çš„æœ€å¤§å’Œ(ç›¸é‚»çš„å­æ•°ç»„)å¯¹æ­¤é¡¹<strong>æœ‰å¢ç›Š</strong>å°±æ·»åŠ è¿›å»ï¼Œå¦åˆ™å°±ç›´æ¥num[i]ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>            nums[i] += <span class="hljs-built_in">max</span>(nums[i - <span class="hljs-number">1</span>], <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(nums)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå°†å›¾ç‰‡å­˜è¿›PDFä¸­</title>
      <link href="/2021/10/06/python/img/FPDF/"/>
      <url>/2021/10/06/python/img/FPDF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å…¬å®‰éƒ¨è¶³è¿¹é¡¹ç›®ä¸­ï¼Œéœ€è¦å°†çŸ«æ­£çš„è¶³è¿¹å›¾ç‰‡æ‰“å°å‡ºæ¥ï¼Œæ‰€æœ‰é¦–å…ˆè½¬æˆpdfæ–‡ä»¶ä¸­å†è¿›è¡Œæ‰“å°ã€‚å°±æ¶‰åŠåˆ°å°†å›¾ç‰‡å­˜å…¥pdfä¸­ï¼Œè¿™é‡Œä½¿ç”¨çš„å·¥å…·æ˜¯FPDFã€‚FPDFæ˜¯ä¸€ä¸ªpdfæ–‡ä»¶çš„å¤„ç†åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ªæ€§åŒ–åˆ›å»ºå’Œè§„èŒƒè®¾å®špdfæ–‡ä»¶ã€‚</p></blockquote><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install fpdf<br></code></pre></td></tr></tbody></table></figure><h3 id="å…·ä½“å†…å®¹">å…·ä½“å†…å®¹</h3><h4 id="å®ç°ä»£ç ">å®ç°ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fpdf <span class="hljs-keyword">import</span> FPDF<br><span class="hljs-keyword">import</span> glob<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">imagesTopdf</span>(<span class="hljs-params">imagesPath,pdfName</span>):</span><br>    pdf = FPDF()<br>    <span class="hljs-keyword">for</span> imagePath <span class="hljs-keyword">in</span> imagesPath:<br>        pdf.add_page()<br>        pdf.image(imagePath,x=<span class="hljs-number">0</span>,y=<span class="hljs-number">0</span>,w=<span class="hljs-number">170</span>,h=<span class="hljs-number">297</span>)<br>    pdf.output(pdfName,<span class="hljs-string">"F"</span>)<br><br>images = glob.glob(<span class="hljs-string">"current_revise/"</span>+<span class="hljs-string">"*.jpg"</span>)<br><span class="hljs-comment"># jpg_path = "test.jpg"</span><br>pdf_path = <span class="hljs-string">"test_file3.pdf"</span><br>imagesTopdf(images,pdf_path)<br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‚æ•°">ç›¸å…³å‚æ•°</h4><p>1ï¼Œå…¶ä¸­<code>pdf = FPDF()</code>æ˜¯åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤æ˜¯ï¼š</p><p>2ï¼Œ<code>orientation</code>ä¸ºç«–å‘ï¼ˆPï¼šç«–å‘ï¼ŒLæ¨ªå‘ï¼‰ï¼›</p><p>3ï¼Œ<code>unit</code>ä¸ºmmæ¯«ç±³ã€‚ç”¨äºè¡¨ç¤ºæ–‡æ¡£ä¸­ä½ç½®çš„è®¡é‡å•å…ƒã€‚å¯ç”¨çš„å€¼æœ‰ä»¥ä¸‹å››ç§:</p><ul><li>pt: ç‚¹</li><li>mm: æ¯«ç±³</li><li>cm: å˜ç±³</li><li>in: è‹±å¯¸</li></ul><p>4ï¼Œ<code>format</code>ç”¨äºè¡¨ç¤ºåˆ›å»ºçš„PDFæ–‡æ¡£çš„çº¸å¼ ç±»å‹ã€‚å¯ç”¨å€¼å¯ä»¥æ˜¯ç”¨äºè¡¨ç¤ºçº¸çš„å­—ç¬¦ä¸²ï¼Œå¦‚"A4"ã€â€œA5â€ã€"Letter"ç­‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FPDF</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-string">"PDF Generation class"</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, orientation=<span class="hljs-string">'P'</span>,unit=<span class="hljs-string">'mm'</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">'A4'</span></span>)</span><br></code></pre></td></tr></tbody></table></figure><h4 id="ç›¸å…³å‡½æ•°">ç›¸å…³å‡½æ•°</h4><p><code>pdf.add_page()</code>ç”¨äºåˆ›å»ºæ–°é¡µã€‚</p><p><code> pdf.image(imagePath,x=0,y=0,w=170,h=297)</code>æ˜¯ç”¨äºæ·»åŠ å›¾åƒï¼Œå…¶ä¸­<code>x</code>å’Œ<code>y</code>è¡¨ç¤ºå›¾ç‰‡æ‰€åœ¨çš„åæ ‡ï¼Œ<code>width</code>å’Œ<code>height</code>è¡¨ç¤ºå›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ã€‚å¦‚æœéœ€è¦å›¾ç‰‡ä¿æŒåŸæ¥çš„å¤§å°ï¼Œåªéœ€è¦å°†<code>width</code>å’Œ<code>height</code>è®¾ç½®æˆ<code>0</code>å³å¯ã€‚çŸ«æ­£åçš„å›¾ç‰‡æ˜¯1700ï¼Œ2981ï¼›A4çº¸çš„å°ºå¯¸æ˜¯210*297ï¼Œæ‰€ä»¥åªèƒ½è®¾ç½®ä¸º297ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œè¯¯å·®è‡³å°‘æœ‰1.1mm</p><p>imageæºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">image</span>(<span class="hljs-params">self, name, x=<span class="hljs-literal">None</span>, y=<span class="hljs-literal">None</span>, w=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>,<span class="hljs-built_in">type</span>=<span class="hljs-string">''</span>,link=<span class="hljs-string">''</span></span>):</span><br>    <span class="hljs-string">"Put an image on the page"</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name <span class="hljs-keyword">in</span> self.images:<br>        <span class="hljs-comment">#First use of image, get info</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">''</span>):<br>            pos=name.rfind(<span class="hljs-string">'.'</span>)<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> pos):<br>                self.error(<span class="hljs-string">'image file has no extension and no type was specified: '</span>+name)<br>            <span class="hljs-built_in">type</span>=substr(name,pos+<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">type</span>=<span class="hljs-built_in">type</span>.lower()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'jpg'</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">type</span>==<span class="hljs-string">'jpeg'</span>):<br>            info=self._parsejpg(name)<br>        <span class="hljs-keyword">elif</span>(<span class="hljs-built_in">type</span>==<span class="hljs-string">'png'</span>):<br>            info=self._parsepng(name)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment">#Allow for additional formats</span><br>            <span class="hljs-comment">#maybe the image is not showing the correct extension,</span><br>            <span class="hljs-comment">#but the header is OK,</span><br>            succeed_parsing = <span class="hljs-literal">False</span><br>            <span class="hljs-comment">#try all the parsing functions</span><br>            parsing_functions = [self._parsejpg,self._parsepng,self._parsegif]<br>            <span class="hljs-keyword">for</span> pf <span class="hljs-keyword">in</span> parsing_functions:<br>                <span class="hljs-keyword">try</span>:<br>                    info = pf(name)<br>                    succeed_parsing = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">except</span>:<br>                    <span class="hljs-keyword">pass</span><br>            <span class="hljs-comment">#last resource</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> succeed_parsing:<br>                mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                    self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>                info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>            mtd=<span class="hljs-string">'_parse'</span>+<span class="hljs-built_in">type</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self,mtd):<br>                self.error(<span class="hljs-string">'Unsupported image type: '</span>+<span class="hljs-built_in">type</span>)<br>            info=<span class="hljs-built_in">getattr</span>(self, mtd)(name)<br>        info[<span class="hljs-string">'i'</span>]=<span class="hljs-built_in">len</span>(self.images)+<span class="hljs-number">1</span><br>        self.images[name]=info<br>    <span class="hljs-keyword">else</span>:<br>        info=self.images[name]<br>    <span class="hljs-comment">#Automatic width and height calculation if needed</span><br>    <span class="hljs-keyword">if</span>(w==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> h==<span class="hljs-number">0</span>):<br>        <span class="hljs-comment">#Put image at 72 dpi</span><br>        w=info[<span class="hljs-string">'w'</span>]/self.k<br>        h=info[<span class="hljs-string">'h'</span>]/self.k<br>    <span class="hljs-keyword">elif</span>(w==<span class="hljs-number">0</span>):<br>        w=h*info[<span class="hljs-string">'w'</span>]/info[<span class="hljs-string">'h'</span>]<br>    <span class="hljs-keyword">elif</span>(h==<span class="hljs-number">0</span>):<br>        h=w*info[<span class="hljs-string">'h'</span>]/info[<span class="hljs-string">'w'</span>]<br>    <span class="hljs-comment"># Flowing mode</span><br>    <span class="hljs-keyword">if</span> y <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> (self.y + h &gt; self.page_break_trigger <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> self.in_footer <span class="hljs-keyword">and</span> self.accept_page_break()):<br>            <span class="hljs-comment">#Automatic page break</span><br>            x = self.x<br>            self.add_page(self.cur_orientation)<br>            self.x = x<br>        y = self.y<br>        self.y += h<br>    <span class="hljs-keyword">if</span> x <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        x = self.x<br>    self._out(sprintf(<span class="hljs-string">'q %.2f 0 0 %.2f %.2f %.2f cm /I%d Do Q'</span>,w*self.k,h*self.k,x*self.k,(self.h-(y+h))*self.k,info[<span class="hljs-string">'i'</span>]))<br>    <span class="hljs-keyword">if</span>(link):<br>        self.link(x,y,w,h,link)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> å›¾åƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyinstalleræ‰“åŒ…é—®é¢˜</title>
      <link href="/2021/09/29/project_tool/pyinstaller-spec-problem/"/>
      <url>/2021/09/29/project_tool/pyinstaller-spec-problem/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„è¿‡ç¨‹ä¸­çš„å‘ç‚¹ï¼Œè®°å½•ä¸€ä¸‹<br>å‚è€ƒå¤§ä½¬ï¼š<a href="https://blog.csdn.net/u012219045/article/details/115397646">https://blog.csdn.net/u012219045/article/details/115397646</a></p></blockquote><figure class="highlight vhdl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">åœ¨ä½¿ç”¨pyinstalleræ‰“åŒ…çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸å°‘é—®é¢˜ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹ã€‚åé¢é‡åˆ°ä¼šç»§ç»­æ›´æ–°ï¼<br><br><span class="hljs-number">1</span>. åœ¨<span class="hljs-number">64</span>ä¸‹å¯è¿è¡Œï¼Œä¸èƒ½åœ¨<span class="hljs-number">32</span>ä½ä¸‹è¿è¡Œ<br>   è§£å†³ï¼šåœ¨<span class="hljs-number">32</span>ä½ç³»ç»Ÿä¸‹æ‰“åŒ…ï¼Œå¯ä»¥å‚è€ƒ https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">115320619</span><br><br><span class="hljs-number">2</span>. RecursionError:maximum recursion depth<br>   è§£å†³ï¼šåœ¨xxx.specæ–‡ä»¶å¼€å§‹å¢åŠ ä¸¤è¡Œï¼š<br><br>    import sys<br>    sys.setrecursionlimit(<span class="hljs-number">5000</span>)<br>å†æ‰§è¡Œæ‰“åŒ…ï¼špyinstaller xxx.spec <br><br><span class="hljs-number">3</span>. UnicodeDecodeError:<span class="hljs-symbol">'utf</span>-<span class="hljs-number">8</span>' codec can<span class="hljs-symbol">'t</span> decode byte <span class="hljs-number">0</span>xce <span class="hljs-keyword">in</span> position <span class="hljs-number">122</span>:invalid continuation byte<br>   è§£å†³ï¼šåœ¨ä½ æ‰“åŒ…çš„å‘½ä»¤è¡Œä¸­å…ˆè¾“å…¥chcp <span class="hljs-number">65001</span> ç„¶åå†è¾“å…¥æ‰“åŒ…å‘½ä»¤ã€‚<br><br><span class="hljs-number">4</span>. ä½¿ç”¨äº†å¤šè¿›ç¨‹ multiprocessing æ¨¡å—<br>   è§£å†³ï¼šå¿…é¡»è°ƒç”¨ multiprocessing.freeze_support()ï¼Œç›´æ¥åœ¨â€œ<span class="hljs-keyword">if</span> __name__ == '__main__'â€ä¹‹åè°ƒç”¨<br><br><span class="hljs-number">5</span>. æ‰“åŒ…PyQt5é—ªé€€<br>   åŸå› ï¼šå¯èƒ½æœªæ‰¾åˆ°æŸä¸ªæ–‡ä»¶<br>   è§£å†³åŠæ³•ï¼š<br>        <span class="hljs-number">1</span>. æŠŠéœ€è¦è¯»å–çš„æ–‡ä»¶åŠå…¶å…¶ä»–èµ„æº éƒ½æ”¾åˆ°distä¸­ã€‚<br>        <span class="hljs-number">2</span>. æ‰“åŒ…æˆexeçš„è¯ï¼Œéœ€ä½¿ç”¨ <span class="hljs-comment">--add-data é™„åŠ ã€‚å¯å‚è€ƒï¼šhttps://blog.csdn.net/u012219045/article/details/114841287</span><br><br><span class="hljs-number">6</span>. <span class="hljs-literal">WARNING</span>:<span class="hljs-keyword">file</span> already exists but should <span class="hljs-keyword">not</span>ï¼š_C.cp37-win_amd64<br>   è§£å†³ï¼šæŠ¥é”™å†…å®¹å¯èƒ½ä¸åŒï¼Œä½†éƒ½æ˜¯xxxå·²å­˜åœ¨ï¼Œé—®é¢˜çš„åŸå› æ˜¯pyinstalleræ‰“åŒ…æ—¶å¤šæ‰“äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¼šæŠ¥å·²ç»å­˜åœ¨äº†ã€‚<br>   è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå¤šä½™çš„å»æ‰ã€‚åœ¨è‡ªåŠ¨ç”Ÿæˆçš„xxx.specä¸­ï¼Œåœ¨ a å’Œ PYZ ä¸­é—´æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå»æ‰å¤šä½™ä¾èµ–é¡¹<br><br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>        <span class="hljs-keyword">if</span> '_C.cp37-win_amd64' <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>            a.datas.remove(d)<br>            break<br><span class="hljs-number">7</span>. Hidden import <span class="hljs-string">"xxx"</span>  <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.markers"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"pkg_resources.py2_warn"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"MySQLdb"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"sqlalchemy.sql.functions.func"</span> <span class="hljs-keyword">not</span> found!<br>    Hidden import <span class="hljs-string">"mx.DateTime"</span> <span class="hljs-keyword">not</span> found!<br>    è§£å†³ï¼š hiddenimports=[<span class="hljs-symbol">'pkg_resources</span>.markers', <span class="hljs-symbol">'pkg_resources</span>.py2_warn', '...']<br><br><span class="hljs-number">8</span>.  æ‰“åŒ…çš„æ—¶å€™å‡ºç°äº†å¾ˆå¤š<span class="hljs-literal">warning</span>ï¼šlib <span class="hljs-keyword">not</span> found...dll, åŸå› æ˜¯pyinstaller æ²¡æœ‰åŠæ³•è¯†åˆ«åˆ°è¿™äº›dll<br>    è§£å†³åŠæ³•ï¼šcopy <span class="hljs-literal">warning</span>ä¸­ä¸€äº›dllæ–‡ä»¶çš„åå­—ï¼Œå†ç”µè„‘ä¸­æœç´¢åˆ°ä»–ä»¬çš„è·¯å¾„ï¼æ·»åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œé¢<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:msmpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_msmpi_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:impi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_intelmpi_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_lp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:mpich2mpi.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_blacs_mpich2_ilp64.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgf90rtl.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:pgc14.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\<span class="hljs-keyword">Library</span>\bin\mkl_pgi_thread.dll<br>    <span class="hljs-literal">WARNING</span>:lib <span class="hljs-keyword">not</span> found:torch_python.dll dependency <span class="hljs-keyword">of</span> d:\programdata\anaconda3\lib\site-packages\torch\_C.cp37-win_amd64.pyd<br><br><span class="hljs-number">9</span>. åˆ‡æ¢äº†è™šæ‹Ÿç¯å¢ƒæ‰“åŒ…ï¼ŒæŠ¥DLLæ— æ³•å¯¼å…¥ï¼Œå®é™…æ˜¯æ‰“åŒ…æ—¶è¿˜åœ¨ä½¿ç”¨æ—§çš„è™šæ‹Ÿç¯å¢ƒ<br>    è§£å†³ï¼š æ‰“åŒ…æ—¶æŒ‡å®šè™šæ‹Ÿç¯å¢ƒï¼š-pã€‚å¯å‚è€ƒï¼š https://blog.csdn.net/u012219045/article/details/<span class="hljs-number">113612475</span><br><br><span class="hljs-number">10</span>. DecodeEncodeError<br>    è§£å†³ï¼š æ£€æŸ¥æ‰§è¡Œè·¯å¾„ä¸­æ˜¯å¦æœ‰ä¸­æ–‡ï¼ŒéAcsiiç ï¼Œæ¢æˆè‹±æ–‡è·¯å¾„ã€‚Pythonæ–‡ä»¶å¼€å¤´åŠ  #-*-coding:utf-<span class="hljs-number">8</span>-*-<br><br><span class="hljs-number">11</span>. Pyqt5 æ‰“åŒ…åä¼šå‡ºç°é”™è¯¯:<span class="hljs-string">"QThread:Destroyed while thread is still running"</span><br>    è§£å†³åŠæ³•<span class="hljs-number">1</span>ï¼šå¯åŠ¨QThreadä½¿ç”¨äº†start(), æ”¹ä¸ºrun() å¯è§£å†³ï¼Œä½†è¿™æ ·ä¼šå¡ä¸»UIçº¿ç¨‹<br>    è§£å†³åŠæ³•<span class="hljs-number">2</span>ï¼šä¾ç„¶ä½¿ç”¨start()ï¼Œå†è¿½åŠ ä¸€å¥ exec()ã€‚æ¨èè¿™æ ·ï¼<br><br><span class="hljs-number">12</span>. No module named <span class="hljs-symbol">'sklearn</span>.xx'<br>    <span class="hljs-number">43852</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_validation"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43854</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.sparsetools._graph_tools"</span> <span class="hljs-keyword">not</span> found!<br>    <span class="hljs-number">43866</span> <span class="hljs-literal">WARNING</span>: Hidden import <span class="hljs-string">"sklearn.utils.lgamma"</span> <span class="hljs-keyword">not</span> found!<br>    No module named <span class="hljs-symbol">'sklearn</span>.utils._cython_blas'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs'<br>    No module named <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree'<br>    No module named <span class="hljs-symbol">'sklearn</span>.tree._utils'<br>    è§£å†³ï¼šhiddenimports=[<span class="hljs-symbol">'sklearn</span>', <span class="hljs-symbol">'sklearn</span>.tree', <span class="hljs-symbol">'sklearn</span>.tree._utils', <span class="hljs-symbol">'sklearn</span>.neighbors._quad_tree',<br>                       <span class="hljs-symbol">'sklearn</span>.neighbors._typedefs', <span class="hljs-symbol">'sklearn</span>.utils._cython_blas',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_validation',<br>                       <span class="hljs-symbol">'sklearn</span>.utils.sparsetools._graph_tools', <span class="hljs-symbol">'sklearn</span>.utils.lgamma']<br><span class="hljs-number">13</span>. No module named <span class="hljs-symbol">'scipy</span>.special.cython_special'<br>   è§£å†³: ä½¿ç”¨scipy==<span class="hljs-number">1.4</span>.<span class="hljs-number">1</span> æˆ–è€… <span class="hljs-comment">--hidden-import scipy.special.cython_special</span><br><br><span class="hljs-number">14</span>. No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory: <span class="hljs-symbol">'xxx\\</span>librosa\\util\\example_data\\registry.txt'<br>   è§£å†³: ä½¿ç”¨<span class="hljs-comment">--add-dataæˆ–è€…ç›´æ¥æ‹·è´librosaä¸‹çš„å¯¹åº”æ–‡ä»¶åˆ°distã€‚</span><br>   <br><span class="hljs-number">15</span>. fatal <span class="hljs-literal">error</span>:zmq.h:No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory<br>    è§£å†³: sudo apt install libzmq3-dev<br><br><span class="hljs-number">16</span>. <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_detectron_ops_gpu.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorch==<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span> torchvision==<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> cudatoolkit=<span class="hljs-number">10.1</span>ï¼Œåæ¥æ›´æ¢é«˜ç‰ˆæœ¬torch1.<span class="hljs-number">7.0</span>è§£å†³ï¼<br>    # pip install torch===<span class="hljs-number">1.7</span>.<span class="hljs-number">0</span>+cu110 torchvision===<span class="hljs-number">0.8</span>.<span class="hljs-number">1</span>+cu110 torchaudio===<span class="hljs-number">0.7</span>.<span class="hljs-number">0</span> -f https://download.pytorch.org/whl/torch_stable.html<br><br><span class="hljs-number">17</span>. unhandled exception <br>    <span class="hljs-literal">Error</span> loading <span class="hljs-string">"xxx\torch\lib\caffe2_nvrtc.dll"</span> <span class="hljs-keyword">or</span> one <span class="hljs-keyword">of</span> its dependencies<br>    å¼€å§‹ä½¿ç”¨pytorché™ç‰ˆæœ¬åˆ°<span class="hljs-number">1.8</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨specæ–‡ä»¶æ‰“åŒ…</title>
      <link href="/2021/09/28/project_tool/spec/"/>
      <url>/2021/09/28/project_tool/spec/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pyinstalleræ‰“åŒ…æ–¹å¼ä¸€èˆ¬å¯ä»¥åˆ†ä¸º<strong>ç›´æ¥è¾“å…¥æŒ‡ä»¤</strong>å’Œ<strong>åˆ©ç”¨specæ–‡ä»¶</strong>è¿›è¡Œæ‰“åŒ…ä¸¤ç§æ–¹å¼ï¼Œç›´æ¥è¾“å…¥æŒ‡ä»¤å°±æ˜¯æ ¹æ®æŒ‡ä»¤ç”Ÿæˆspecæ–‡ä»¶ï¼Œå†æ ¹æ®specæ–‡ä»¶çš„å†…å®¹è¿›è¡Œæ‰“åŒ…æ“ä½œï¼Œå› æ­¤specæ–‡ä»¶å°±æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨æ­¤å¯¹å…¶å†…å®¹çš„ç›¸å…³é…ç½®è¿›è¡Œå½’çº³ã€‚</p></blockquote><h3 id="specæ–‡ä»¶å‚æ•°">specæ–‡ä»¶å‚æ•°</h3><p>specæ–‡ä»¶å‚æ•°ï¼šaï¼Œpyzï¼Œexeï¼Œcollï¼Œblock_cipher;</p><table><thead><tr><th style="text-align:center">å˜é‡</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:left">Analysisç±»çš„å®ä¾‹,è¦æ±‚ä¼ å…¥å„ç§è„šæœ¬ç”¨äºåˆ†æç¨‹åºçš„å¯¼å…¥å’Œä¾èµ–ï¼Œaä¸­çš„å†…å®¹ä¸»è¦åŒ…æ‹¬å››éƒ¨åˆ†ï¼šscriptsï¼šå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„pythonè„šæœ¬ï¼›pureï¼Œç¨‹åºä»£ç æ–‡ä»¶ä¸­çš„çº¯pythonæ¨¡å—ï¼›binariesï¼šç¨‹åºä»£ç æ–‡ä»¶ä¸­éœ€è¦çš„épythonæ¨¡å—ï¼ŒåŒ…æ‹¬add-binaryå‚æ•°æŒ‡å®šçš„å†…å®¹ï¼›datasï¼šéäºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…æ‹¬add-dataå‚æ•°æŒ‡å®šçš„å†…å®¹</td></tr><tr><td style="text-align:center">pyz</td><td style="text-align:left">pyzçš„å®ä¾‹ï¼Œæ˜¯ä¸€ä¸ª.pyzæ–‡ä»¶ï¼ŒåŒ…å«äº†æ‰€æœ‰pureçš„æ‰€æœ‰pythonæ¨¡å—</td></tr><tr><td style="text-align:center">exe</td><td style="text-align:left">exeç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥å¤„ç†Analysiså’ŒPYZçš„ç»“æœã€‚ä¹Ÿæ˜¯ç”¨æ¥ç”Ÿæˆæœ€åçš„exeå¯æ‰§è¡Œç¨‹åº</td></tr><tr><td style="text-align:center">coll</td><td style="text-align:left">collectç±»çš„å®ä¾‹ï¼Œç”¨äºåˆ›å»ºè¾“å‡ºç›®å½•ï¼Œåœ¨-Fæ¨¡å¼ï¼ˆå•ä¸€exeç¨‹åºï¼‰ä¸‹ï¼Œæ˜¯æ²¡æœ‰collectå®ä¾‹çš„ï¼Œå¹¶ä¸”æ‰€æœ‰è„šæœ¬ï¼Œæ¨¡å—å’ŒäºŒè¿›åˆ¶æ–‡ä»¶éƒ½åŒ…å«åœ¨æœ€ç»ˆç”Ÿæˆçš„exeæ–‡ä»¶ä¸­</td></tr><tr><td style="text-align:center">block_cipher</td><td style="text-align:left">åŠ å¯†å¯†é’¥</td></tr></tbody></table><p>ä»¥ä¸Šå†…å®¹ä¸­ä¿®æ”¹æ¯”è¾ƒå¤šçš„æ˜¯a,exeçš„å†…å®¹ï¼Œcollå’ŒpyzåŸºæœ¬ä¸Šæ²¡æœ‰é‡åˆ°éœ€è¦ä¿®æ”¹çš„æƒ…å†µã€‚</p><h3 id="å‚æ•°aï¼Œexeçš„è¯´æ˜">å‚æ•°aï¼Œexeçš„è¯´æ˜</h3><p>ä¸‹é¢å¯¹aå’Œexeå‚æ•°å†…å®¹è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼š</p><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">å­å‚æ•°</th><th style="text-align:left">å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">scripts</td><td style="text-align:left">ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»–æ˜¯ä¸€ä¸ªè„šæœ¬åˆ—è¡¨ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªpyè„šæœ¬ï¼Œæ•ˆæœä¸å‘½ä»¤è¡Œä¸­æŒ‡å®šå¤šä¸ªpyæ–‡ä»¶ç›¸åŒï¼Œæ¯”å¦‚è¯´â€œpyinstaller <a href="http://XXX1.py">XXX1.py</a> <a href="http://XXX2.py">XXX2.py</a>â€ï¼Œpyinstallerä¼šä¾æ¬¡åˆ†ææ‰§è¡Œï¼Œå¹¶ä¸”æŠŠç¬¬ä¸€ä¸ªpyæ–‡ä»¶çš„åç§°ä½œä¸ºspecå’Œdistä¸‹çš„æ–‡ä»¶å¤¹åŠç¨‹åºåç§°</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">pathex</td><td style="text-align:left">é»˜è®¤æœ‰ä¸€ä¸ªspecç›®å½•ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€äº›æ¨¡å—ä¸åœ¨è¯¥é¡¹ç›®è·¯å¾„ä¸‹çš„æ—¶å€™ï¼Œå¯ä»¥å°†ä½¿ç”¨åˆ°çš„æ¨¡å—è·¯å¾„æ·»åŠ åˆ°pathexå˜é‡ä¸­ï¼Œç›¸å½“äºâ€œ-p DIR/-paths DIRâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">datas</td><td style="text-align:left">ä½œç”¨æ˜¯å°†æœ¬åœ°æ–‡ä»¶æ‰“åŒ…æ—¶æ‹·è´åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚datasæ˜¯ä¸€ä¸ªå…ƒç´ ä¸ºå…ƒç»„çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œéƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•°æ®æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œå…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºè¿è¡Œæ—¶è¿™äº›æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼šdatas = [(â€˜./src/a.txtâ€™,â€˜./dstâ€™)]è¡¨ç¤ºæ‰“åŒ…æ—¶å°†â€™./src/a.txtâ€™æ–‡ä»¶æ·»åŠ åˆ°ç›¸å¯¹exeç›®å½•å…ˆçš„distç›®å½•ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦datas = [(â€˜./myfile/*.mp3â€™,â€˜sfxâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„æ‰€æœ‰mp3æ–‡ä»¶éƒ½copyåˆ°sfxæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼šdatas = [(â€˜./myfile/dataâ€™,â€˜dataâ€™)]ï¼Œè¡¨ç¤ºå°†myfileä¸‹çš„dataæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½copyåˆ°dataæ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒå‘½ä»¤â€œ-add-dataâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">binaries</td><td style="text-align:left">æ·»åŠ äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®šä¹‰æ–¹å¼ä¸dataså‚æ•°ä¸€æ ·ï¼ŒåŒå‘½ä»¤â€œ-add-binaryâ€</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hiddenimports</td><td style="text-align:left">æŒ‡å®šè„šæœ¬ä¸­éœ€è¦éšå¼å¯¼å…¥çš„æ¨¡å—ï¼Œæ¯”å¦‚åœ¨importã€imp.find_module()ã€execã€evalç­‰è¯­å¥ä¸­å¯¼å…¥æ¨¡å—ï¼Œè¿™äº›æ¨¡å—PyInstalleræ˜¯æ‰¾ä¸åˆ°çš„ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“hidden-import MODULENAME/â€“hiddenimport MODULENAMEâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">hookspath</td><td style="text-align:left">æŒ‡å®šé¢å¤–çš„hookæ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯pyæ–‡ä»¶ï¼‰çš„æŸ¥æ‰¾è·¯å¾„ï¼Œè¿™äº›æ–‡ä»¶çš„ä½œç”¨æ˜¯åœ¨pyinstallerè¿è¡Œæ—¶æ”¹å˜ä¸€äº›pythonæˆ–è€…å…¶ä»–åº“åŸæœ‰çš„å‡½æ•°æˆ–è€…å˜é‡çš„æ‰§è¡Œé€»è¾‘ï¼ˆå¹¶ä¸ä¼šæ”¹å˜è¿™äº›åº“æœ¬èº«çš„ä»£ç ï¼‰ï¼Œä»¥ä¾¿èƒ½é¡ºåˆ©çš„æ‰“åŒ…å®Œæˆï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“additional-hooks-dir HOOKSPATHâ€ã€‚</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">runtime_hooks</td><td style="text-align:left">æŒ‡å®šè‡ªå®šä¹‰çš„è¿è¡Œhookæ–‡ä»¶è·¯å¾„ï¼ˆå¯ä»¥æ—¶pyæ–‡ä»¶ï¼‰ï¼Œåœ¨æ‰“åŒ…å¥½çš„exeç¨‹åºä¸­ï¼Œè¿è¡Œè¿™ä¸ªexeç¨‹åºæ—¶ï¼ŒæŒ‡å®šçš„hookæ–‡ä»¶ä¼šåœ¨æ‰€æœ‰ä»£ç å’Œæ¨¡å—ä¹‹å‰è¿è¡Œï¼ŒåŒ…æ‹¬mainæ–‡ä»¶ï¼Œä»¥æ»¡è¶³ä¸€äº›è¿è¡Œç¯å¢ƒçš„ç‰¹æ®Šè¦æ±‚ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼ŒåŒå‘½ä»¤â€œ-runtime-hook RUNTIME_HOOKSâ€.</td></tr><tr><td style="text-align:center">Analysiså‚æ•°</td><td style="text-align:center">excludes</td><td style="text-align:left">æŒ‡å®šå¯ä»¥è¢«å¿½ç•¥çš„å¯é€‰çš„æ¨¡å—æˆ–åŒ…ï¼Œå› ä¸ºæŸäº›æ¨¡å—åªæ˜¯PyInstalleræ ¹æ®è‡ªèº«çš„é€»è¾‘å»æŸ¥æ‰¾çš„ï¼Œè¿™äº›æ¨¡å—å¯¹äºexeç¨‹åºæœ¬èº«å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯åœ¨æ—¥å¿—ä¸­è¿˜æ˜¯ä¼šæç¤ºâ€œmodule not foundâ€ï¼Œè¿™ç§æ—¥å¿—å¯ä»¥ä¸ç”¨ç®¡ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªå‚æ•°é€‰é¡¹æ¥æŒ‡å®šä¸ç”¨å¯¼å…¥ï¼Œè¿™ä¸ªé€‰é¡¹å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚åŒå‘½ä»¤â€œâ€“exclude-module EXCLUDESâ€ã€‚</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">console</td><td style="text-align:left">è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ŒåŒå‘½ä»¤ â€œ-W/-câ€</td></tr><tr><td style="text-align:center">exeå‚æ•°</td><td style="text-align:center">icon</td><td style="text-align:left">è®¾ç½®ç¨‹åºå›¾æ ‡ï¼Œé»˜è®¤specæ˜¯æ²¡æœ‰å›¾æ ‡çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œå‚æ•°å€¼å°±æ˜¯å›¾ç‰‡è·¯å¾„çš„å­—ç¬¦ä¸²ï¼ŒåŒå‘½ä»¤â€œ-i/-iconâ€</td></tr></tbody></table><h3 id="æˆ‘çš„è®°å½•">æˆ‘çš„è®°å½•</h3><p>åœ¨æ­¤è®°å½•ä¸€ä¸‹detectuiçš„specæ–‡ä»¶å‘¢~~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- mode: python ; coding: utf-8 -*-</span><br><br><br>block_cipher = <span class="hljs-literal">None</span><br><br><br>a = Analysis([<span class="hljs-string">'detectui.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\torch_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\autoanchor.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\datasets.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\general.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\google_utils.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\metrics.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\plots.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\__init__.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\common.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\experimental.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\yolo.py'</span>,<br>              <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\detectInfo.py'</span>,<br>              ],<br>             pathex=[<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models'</span>,<br>             <span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\scipy\\.libs'</span>,<br>             <span class="hljs-string">'D:\\anaconda3\\envs\\torch\\Lib\\site-packages\\torch\\lib'</span>,<br>              ],<br>             binaries=[],<br>             datas=[<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\weights\\best.pt'</span>,<span class="hljs-string">'.\\weights'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\*.yaml'</span>,<span class="hljs-string">'.\\models'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\models\\hub\\*.yaml'</span>,<span class="hljs-string">'.\\models\\hub'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\icon.jpg'</span>,<span class="hljs-string">'.'</span>),<br>             (<span class="hljs-string">'E:\\masterProjects\\foot\\footRevise\\utils\\__pycache__\\torch_utils.pyc'</span>,<span class="hljs-string">'.\\utils'</span>),<br>             ],<br>             hiddenimports=[<span class="hljs-string">'pkg_resources.py2_warn'</span>,<span class="hljs-string">'pkg_resources.markers'</span>],<br>             hookspath=[],<br>             hooksconfig={},<br>             runtime_hooks=[],<br>             excludes=[],<br>             win_no_prefer_redirects=<span class="hljs-literal">False</span>,<br>             win_private_assemblies=<span class="hljs-literal">False</span>,<br>             cipher=block_cipher,<br>             noarchive=<span class="hljs-literal">False</span>)<br><span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> a.datas:<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">'_C.cp38-win_amd64.pyd'</span> <span class="hljs-keyword">in</span> d[<span class="hljs-number">0</span>]:<br>    a.datas.remove(d)<br>    <span class="hljs-keyword">break</span><br>pyz = PYZ(a.pure, a.zipped_data,<br>             cipher=block_cipher)<br><br>exe = EXE(pyz,<br>          a.scripts,<br>          [],<br>          exclude_binaries=<span class="hljs-literal">True</span>,<br>          name=<span class="hljs-string">'detectui'</span>,<br>          debug=<span class="hljs-literal">False</span>,<br>          bootloader_ignore_signals=<span class="hljs-literal">False</span>,<br>          strip=<span class="hljs-literal">False</span>,<br>          upx=<span class="hljs-literal">True</span>,<br>          console=<span class="hljs-literal">False</span>,<br>          icon=<span class="hljs-string">'icon.ico'</span>)<br>coll = COLLECT(exe,<br>               a.binaries,<br>               a.zipfiles,<br>               a.datas,<br>               strip=<span class="hljs-literal">False</span>,<br>               upx=<span class="hljs-literal">True</span>,<br>               name=<span class="hljs-string">'detectui'</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyinstalleræ‰“åŒ…exe</title>
      <link href="/2021/09/26/project_tool/pyinstaller/"/>
      <url>/2021/09/26/project_tool/pyinstaller/</url>
      
        <content type="html"><![CDATA[<blockquote><p>pyinstallerçš„ä½œç”¨æ˜¯å¯ä»¥å°†pythonåº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›¸å¯¹ä¸åŒç±»å·¥å…·è€Œè¨€ï¼Œå…¶ä¼˜åŠ¿åœ¨äºå¯ä»¥å’Œpythoné…åˆä½¿ç”¨ï¼Œæ„å»ºè¾ƒå°çš„å¯æ‰§è¡Œæ–‡ä»¶å¹¶ä¸”å®Œå…¨å¤šå¹³å°ï¼Œå®Œå…¨å…¼å®¹æ€§ã€‚</p></blockquote><blockquote><p>pyinstallerçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å…¼å®¹ï¼Œå› æ­¤åœ¨ä½¿ç”¨pyinstallerä¼šå°†æ‰€æœ‰çš„å¤–éƒ¨åŒ…ç»§æ‰¿åœ¨pyinstalleræœ¬èº«ä¸­ã€‚</p></blockquote><h2 id="å®‰è£…">å®‰è£…</h2><p>ç›´æ¥ä»pypiå®‰è£…pyinstallerï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pyinstaller<br></code></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨è‡ªå·±çš„ç¨‹åºç›®å½•ä¸­è¿è¡Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller yourprogram.py<br></code></pre></td></tr></tbody></table></figure><p>å°±ä¼šç”Ÿæˆdistæ–‡ä»¶å¤¹ï¼Œåœ¨distæ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„exeæ–‡ä»¶ã€‚</p><h2 id="å‘½ä»¤é€‰é¡¹è¯´æ˜">å‘½ä»¤é€‰é¡¹è¯´æ˜</h2><p>PyInstaller æ”¯æŒå¦‚è¡¨æ‰€ç¤ºçš„å¸¸ç”¨é€‰é¡¹ã€‚</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">-hï¼Œâ€“help</td><td style="text-align:center">æŸ¥çœ‹è¯¥æ¨¡å—çš„å¸®åŠ©ä¿¡æ¯</td></tr><tr><td style="text-align:center">-Fï¼Œ-onefile</td><td style="text-align:center">äº§ç”Ÿå•ä¸ªçš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-Dï¼Œâ€“onedir</td><td style="text-align:center">äº§ç”Ÿä¸€ä¸ªç›®å½•ï¼ˆåŒ…å«å¤šä¸ªæ–‡ä»¶ï¼‰ä½œä¸ºå¯æ‰§è¡Œç¨‹åºï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td style="text-align:center">-aï¼Œâ€“ascii</td><td style="text-align:center">ä¸åŒ…å« Unicode å­—ç¬¦é›†æ”¯æŒ</td></tr><tr><td style="text-align:center">-dï¼Œâ€“debug</td><td style="text-align:center">äº§ç”Ÿ debug ç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td style="text-align:center">-wï¼Œâ€“windowedï¼Œâ€“noconsolc</td><td style="text-align:center">æŒ‡å®šç¨‹åºè¿è¡Œæ—¶ä¸æ˜¾ç¤ºå‘½ä»¤è¡Œçª—å£ï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-cï¼Œâ€“nowindowedï¼Œâ€“console</td><td style="text-align:center">æŒ‡å®šä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿è¡Œç¨‹åºï¼ˆä»…å¯¹ Windows æœ‰æ•ˆï¼‰</td></tr><tr><td style="text-align:center">-o DIRï¼Œâ€“out=DIR</td><td style="text-align:center">æŒ‡å®š spec æ–‡ä»¶çš„ç”Ÿæˆç›®å½•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•æ¥ç”Ÿæˆ spec æ–‡ä»¶</td></tr><tr><td style="text-align:center">-p DIRï¼Œâ€“path=DIR</td><td style="text-align:center">è®¾ç½® Python å¯¼å…¥æ¨¡å—çš„è·¯å¾„ï¼ˆå’Œè®¾ç½® PYTHONPATH ç¯å¢ƒå˜é‡çš„ä½œç”¨ç›¸ä¼¼ï¼‰ã€‚ä¹Ÿå¯ä½¿ç”¨è·¯å¾„åˆ†éš”ç¬¦ï¼ˆWindows ä½¿ç”¨åˆ†å·ï¼ŒLinux ä½¿ç”¨å†’å·ï¼‰æ¥åˆ†éš”å¤šä¸ªè·¯å¾„</td></tr><tr><td style="text-align:center">-n NAMEï¼Œâ€“name=NAME</td><td style="text-align:center">æŒ‡å®šé¡¹ç›®ï¼ˆäº§ç”Ÿçš„ specï¼‰åå­—ã€‚å¦‚æœçœç•¥è¯¥é€‰é¡¹ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªè„šæœ¬çš„ä¸»æ–‡ä»¶åå°†ä½œä¸º spec çš„åå­—</td></tr></tbody></table><p>åœ¨æ­¤è¡¨åˆ—å‡ºçš„åªæ˜¯ PyInstaller æ¨¡å—æ‰€æ”¯æŒçš„å¸¸ç”¨é€‰é¡¹ï¼Œå¦‚æœéœ€è¦äº†è§£ PyInstaller é€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™å¯é€šè¿‡ pyinstaller -h æˆ–è€…â€“helpæŸ¥çœ‹å¸®åŠ©</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller --<span class="hljs-built_in">help</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨pyinstaller">ä½¿ç”¨pyinstaller</h2><ul><li><p>æ‰“åŒ…æˆä¸€ä¸ªå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller -F &lt;options&gt; test.py<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶å¤¹</p><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">pyinstaller --onefile/-D <span class="hljs-symbol">&lt;options&gt;</span> test.<span class="hljs-keyword">py</span> ï¼ˆé»˜è®¤ï¼‰<br></code></pre></td></tr></tbody></table></figure></li></ul><p>é»˜è®¤æƒ…å†µä¸‹æ‰“åŒ…ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆdistå’Œbuildæ–‡ä»¶å¤¹ä»¥åŠ.specæ–‡ä»¶ï¼Œdistä¸­å³æ‰“åŒ…å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼Œbuildæ–‡ä»¶å¤¹ä¸‹ä¸ºæ„å»ºè¿‡ç¨‹ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œ.specä¸ºæ‰“åŒ…çš„é…ç½®æ–‡ä»¶ã€‚</p><h3 id="å„è‡ªçš„ä¼˜ç¼ºç‚¹">å„è‡ªçš„ä¼˜ç¼ºç‚¹</h3><ul><li><p>å¯åŠ¨æ—¶é—´</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶æ¯”æ–‡ä»¶å¤¹çš„å¯åŠ¨æ—¶é—´è¦é•¿å¾ˆå¤šï¼Œå› ä¸ºå½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦è§£å‹ç¨‹åºçš„ç¬¬ä¸‰æ–¹ä¾èµ–æ–‡ä»¶åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œä¼šè€—è´¹ä¸€å®šçš„ä¸å¿…è¦æ—¶é—´ã€‚</p></li><li><p>æ–‡ä»¶ç»“æ„</p><p>å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å’Œå·¥ç¨‹ç›®å½•æ˜¯ä¸€æ ·çš„ï¼Œå…¶è·¯å¾„ä¸å·¥ç¨‹ç›®å½•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”Ÿæˆæ–‡ä»¶å¤¹å°±ä¸ä¸€æ ·äº†ï¼Œè‹¥ç¨‹åºä¸­åŒ…å«ç›¸å¯¹è·¯å¾„ï¼Œè¿™ä¸ªç›¸å¯¹è·¯å¾„æ˜¯åŸºäºè¯¥æ–‡ä»¶å¤¹ç›®å½•çš„ã€‚</p></li></ul><h2 id="specæ–‡ä»¶">specæ–‡ä»¶</h2><p>.specæ–‡ä»¶ç±»ä¼¼äºcmakeçš„.makefileæ–‡ä»¶ï¼Œéƒ½æ˜¯ç”¨äº<code>æ§åˆ¶ç¼–è¯‘æ„å»ºè¿‡ç¨‹</code>çš„é…ç½®æ–‡ä»¶ã€‚æ­£å¸¸ä½¿ç”¨å®é™…ä¸Šä¸éœ€è¦ç®¡specæ–‡ä»¶çš„ï¼Œä½†æ˜¯ä¸‹é¢å‡ ç§æƒ…å†µéœ€è¦ä¿®æ”¹specæ–‡ä»¶ï¼š</p><ul><li><p>éœ€è¦æ‰“åŒ…èµ„æºæ–‡ä»¶</p></li><li><p>éœ€è¦includeä¸€äº›pyinstallerä¸çŸ¥é“çš„run-timeåº“</p></li><li><p>ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ run-timeé€‰é¡¹</p></li><li><p>å¤šç¨‹åºæ‰“åŒ…</p></li></ul><p>åé¢å¯ä»¥ç›´æ¥é€šè¿‡.specæ–‡ä»¶æ¥æ‰“åŒ…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pyinstaller &lt;options&gt; test.spec<br></code></pre></td></tr></tbody></table></figure><p>å½“é€šè¿‡specæ–‡ä»¶æ¥ç”Ÿæˆappæ–‡ä»¶æ—¶åªæœ‰ä¸‹é¢å‚æ•°æ˜¯æœ‰ç”¨çš„ï¼š</p><ul><li><code>-upx-dir</code>  Path to UPX utility (default: search the execution path)</li><li><code>-distpath</code>   Where to put the bundled app (default: .\dist)</li><li><code>-y â€“noconfirm</code>  Replace output directory (default: SPECPATH\dist\SPECNAME) without asking for confirmation</li><li><code>-a â€“ascii</code> Do not include unicode encoding support (default: included if available)</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> pyinstaller </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ‰“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer30 åŒ…å«minå‡½æ•°çš„æ ˆ</title>
      <link href="/2021/09/17/leetcode/leetcode-offer30/"/>
      <url>/2021/09/17/leetcode/leetcode-offer30/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŒ…å«minå‡½æ•°çš„æ ˆ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight pf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pf">M<span class="hljs-keyword">in</span>Stack <span class="hljs-keyword">min</span>Stack = new M<span class="hljs-keyword">in</span>Stack();<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">2</span>);<br><span class="hljs-keyword">min</span>Stack.push(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">min</span>Stack.push(-<span class="hljs-number">3</span>);<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">3</span>.<br><span class="hljs-keyword">min</span>Stack.pop();<br><span class="hljs-keyword">min</span>Stack.top();      --&gt; è¿”å› <span class="hljs-number">0</span>.<br><span class="hljs-keyword">min</span>Stack.<span class="hljs-keyword">min</span>();   --&gt; è¿”å› -<span class="hljs-number">2</span>.<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>å„å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ 20000 æ¬¡</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>emmè¿™æ ·å­ä½¿ç”¨minå‡½æ•°ï¼Œä¸å¤ªç§‘å­¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.stack = []<br>        self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        <span class="hljs-keyword">if</span>(self.minnum&gt;x): self.minnum = x<br>        self.stack.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        item = self.top()<br>        self.stack.pop()<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">len</span>(self.stack) == <span class="hljs-number">0</span>): <br>            self.minnum = sys.maxsize <span class="hljs-comment">#float("inf")</span><br>        <span class="hljs-keyword">elif</span>(item==self.minnum):<br>            self.minnum = <span class="hljs-built_in">min</span>(self.stack)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.stack[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.minnum<br><br><span class="hljs-comment"># Your MinStack object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = MinStack()</span><br><span class="hljs-comment"># obj.push(x)</span><br><span class="hljs-comment"># obj.pop()</span><br><span class="hljs-comment"># param_3 = obj.top()</span><br><span class="hljs-comment"># param_4 = obj.min()</span><br></code></pre></td></tr></tbody></table></figure><p>-å®é™…ä¸Šåº”è¯¥åˆ›å»ºä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªä½œä¸ºæ™®é€šçš„æ ˆAè®°å½•æ•°æ®ï¼Œå¦ä¸€ä¸ªBç”¨äºè¾…åŠ©æ ˆminçš„å®ç°ï¼›ä½¿å¾—Aä¸­çš„æœ€å°å…ƒç´ å§‹ç»ˆå¯¹åº”äºBçš„æ ˆé¡¶å…ƒç´ ã€‚<strong>æ ˆBçš„ä¸»è¦ç›®çš„æ˜¯è®°å½•æœ€å°å€¼ï¼Œæ‰€ä»¥ä¸ä¸€å®šæ˜¯éœ€è¦æ‰€æœ‰å®Œæ•´çš„æ•°æ®ã€‚</strong></p><ul><li>åœ¨è°ƒç”¨pushå‡½æ•°æ—¶ï¼Œæ³¨æ„è¦ç»´æŠ¤å¥½æ ˆBï¼Œä¹Ÿå°±æ˜¯è¯´åˆ¤æ–­xæ—¶å°äºç­‰äºæ ˆé¡¶å…ƒç´ ï¼Œæ‰å‹å…¥æ ˆBï¼›</li><li>åœ¨è°ƒç”¨popå‡½æ•°æ—¶ï¼Œè¦ä¿æŒAï¼ŒBå…ƒç´ çš„ä¸€è‡´æ€§ï¼Œåœ¨Aä¸­popçš„å…ƒç´ æ˜¯Bçš„æ ˆé¡¶å…ƒç´ å°±è¦åŒæ­¥åˆ é™¤æ‰æ ˆBçš„æ ˆé¡¶å…ƒç´ ï¼›</li></ul><p>è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯åœ¨åˆ é™¤æ‰Aå’ŒBçš„æ ˆé¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰ä¹‹åï¼ŒBçš„æ ˆé¡¶å…ƒç´ ä¾ç„¶è¿˜æ˜¯Açš„æœ€å°å€¼ã€‚</p><p>å—¯å‰å®³~ o(<em>ï¿£â–½ï¿£</em>)o</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        initialize your data structure here.</span><br><span class="hljs-string">        """</span><br>        self.A,self.B = [],[]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>self.A.append(x)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.B <span class="hljs-keyword">or</span> self.B[-<span class="hljs-number">1</span>]&gt;=x: <span class="hljs-comment">#æ³¨æ„æ˜¯å¤§äºç­‰äºï¼Œå› ä¸ºéœ€è¦è®°å½•é¿å…åç»­å¼¹å‡ºå¯¼è‡´å…ƒç´ ä¸åŒæ­¥</span><br>            self.B.append(x)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:</span><br><span class="hljs-keyword">if</span>(self.A.pop() == self.B[-<span class="hljs-number">1</span>]): <span class="hljs-comment">#å¦‚æœæ˜¯ç›¸åŒå…ƒç´ å°±æ³¨æ„åŒæ­¥åˆ é™¤</span><br>            self.B.pop()<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.A[-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">min</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">return</span> self.B[-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer35 å¤æ‚é“¾è¡¨çš„å¤åˆ¶</title>
      <link href="/2021/09/16/leetcode/leetcode-offer35/"/>
      <url>/2021/09/16/leetcode/leetcode-offer35/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤æ‚é“¾è¡¨çš„å¤åˆ¶</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç° copyRandomList å‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª random æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[7,null]</span>,<span class="hljs-comment">[13,0]</span>,<span class="hljs-comment">[11,4]</span>,<span class="hljs-comment">[10,2]</span>,<span class="hljs-comment">[1,0]</span>]</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[1,1],[2,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[1,1],[2,1]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šhead = <span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[3,null],[3,0],[3,null]]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[]</span><br>è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-10000 &lt;= Node.val &lt;= 10000</li><li>Node.random ä¸ºç©ºï¼ˆnullï¼‰æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚</li><li>èŠ‚ç‚¹æ•°ç›®ä¸è¶…è¿‡ 1000 ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>é€šå¸¸æ™®é€šçš„é“¾è¡¨å¤åˆ¶åªéœ€è¦éå†é“¾è¡¨ï¼Œæ¯è½®æ–°å»ºç«‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æ·»åŠ å‰é©±èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘å³å¯ï¼Œä½†æ˜¯æœ¬é¢˜çš„èŠ‚ç‚¹æ–°å¢äº†randomæŒ‡é’ˆï¼Œå› æ­¤éœ€è¦å¤„ç†randomæŒ‡é’ˆã€‚</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>å“ˆå¸Œè¡¨</code></li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>æ‹¼æ¥+æ‹†åˆ†</code></li></ul><h4 id="å“ˆå¸Œè¡¨">å“ˆå¸Œè¡¨</h4><p>å…ˆæ„å»ºåŸé“¾è¡¨èŠ‚ç‚¹å’Œæ–°é“¾è¡¨èŠ‚ç‚¹çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨èŠ‚ç‚¹çš„nextå’Œrandomçš„å¼•ç”¨æŒ‡å‘ã€‚</p><p>è¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­—å…¸ï¼Œé”®å€¼å¯¹å°±æ˜¯ï¼ˆåŸèŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹ï¼‰ï¼Œç„¶åç›´æ¥åœ¨å­—å…¸ä¸­æ„å»ºï¼›</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>        dic = {}<br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur] = Node(cur.val)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        cur = head<br>        <span class="hljs-keyword">while</span> cur:<br>            dic[cur].<span class="hljs-built_in">next</span> = dic.get(cur.<span class="hljs-built_in">next</span>)<br>            dic[cur].random = dic.get(cur.random)<br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> dic[head]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>dict.get(key,default=None) keyæ˜¯å­—å…¸ä¸­è¦æŸ¥æ‰¾çš„é”®ï¼Œdefaultæ˜¯æŒ‡å®šé”®å€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›é»˜è®¤å€¼ï¼›</p></blockquote><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><h4 id="æ‹¼æ¥-æ‹†åˆ†">æ‹¼æ¥+æ‹†åˆ†</h4><p>æ„å»ºæ‹¼æ¥é“¾è¡¨<code>åŸèŠ‚ç‚¹1-&gt;æ–°èŠ‚ç‚¹1-&gt;åŸèŠ‚ç‚¹2-&gt;æ–°èŠ‚ç‚¹2-&gt;......</code>,è¿™æ—¶ï¼Œåœ¨è®¿é—®åŸèŠ‚ç‚¹çš„randomæ—¶å¯ä»¥æ‰¾åˆ°æ–°å¯¹åº”æ–°èŠ‚ç‚¹çš„randomçš„æŒ‡å‘èŠ‚ç‚¹ã€‚<br>å½“è®¿é—®<code>cur.random</code>æ—¶ï¼Œå¯¹åº”çš„æ–°èŠ‚ç‚¹<code>cur.next</code>çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ä¸º<code>cur.random.next</code>ï¼Œå°±å¯ä»¥è§£å†³randomçš„é—®é¢˜ï¼Œå†è¿›è¡Œæ‹†åˆ†é“¾è¡¨ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">copyRandomList</span>(<span class="hljs-params">self,head:<span class="hljs-string">'Node'</span></span>)-&gt;'Node':</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:<span class="hljs-keyword">return</span><br>cur = head<br><span class="hljs-comment">#å¤åˆ¶å„ä¸ªèŠ‚ç‚¹ï¼Œå¹¶æ„å»ºæ‹¼æ¥é“¾è¡¨</span><br><span class="hljs-keyword">while</span> cur:<br>tmp = Node(cur.val)<br>tmp.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span><br>cur.<span class="hljs-built_in">next</span> = tmp<br>cur = tmp.<span class="hljs-built_in">next</span><br><span class="hljs-comment">#æ„å»ºrandomæŒ‡å‘</span><br>cur = head<br><span class="hljs-keyword">while</span> cur:<br><span class="hljs-keyword">if</span> cur.random:<br>cur.<span class="hljs-built_in">next</span>.random = cur.random.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>        <span class="hljs-comment">#æ‹†åˆ†é“¾è¡¨</span><br>        cur = res = head.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span> cur.<span class="hljs-built_in">next</span>:<br>            cur.<span class="hljs-built_in">next</span> = cur.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>            cur = cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éšæœºæ•°çš„æ€»ç»“</title>
      <link href="/2021/09/09/package_usage/random-summarize/"/>
      <url>/2021/09/09/package_usage/random-summarize/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç»å¸¸ä¼šç”¨åˆ°éšæœºæ•°ï¼Œåœ¨æ­¤ï¼Œå¯¹numpyåŒ…ä¸­çš„éšæœºæ•°ç›¸å…³å‡½æ•°è¿›è¡Œæ€»ç»“ã€‚</p></blockquote><ul><li><p>numpy.random.rand(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°å¯ä»¥æŒ‡å®šshapeï¼Œè¿”å›æœä»0~1å‡åŒ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.randint(low, high=None, size=None, dtype=â€˜lâ€™)<br>è¯¥å‡½æ•°è¿”å›éšæœºçš„æ•´æ•°ï¼Œå¯ä»¥æŒ‡å®šéšæœºæ•°ç»„èŒƒå›´å’Œå¤§å°ï¼›åœ¨è¿™é‡Œlowæ˜¯åŒ…å«ï¼Œhighä¸åŒ…å«;é»˜è®¤æ•°æ®ç±»å‹æ˜¯longã€‚</p></li><li><p>numpy.random.randn(d0, d1, â€¦, dn)<br>è¯¥å‡½æ•°ä¸randç±»ä¼¼ï¼Œä½†æ˜¯åˆ†å¸ƒä¸åŒï¼Œè¿™é‡Œæ˜¯è¿”å›æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºæ ·æœ¬å€¼ã€‚</p></li><li><p>numpy.random.uniform(low=0.0, high=1.0, size=None)<br>è¯¥å‡½æ•°ä¸randintç±»ä¼¼ï¼Œå¯ä»¥æŒ‡å®šèŒƒå›´å’Œå¤§å°ï¼Œä½†æ˜¯è¿™é‡Œè¿”å›çš„éšæœºæ•°æœä»åŒºé—´çš„å‡åŒ€åˆ†å¸ƒã€‚</p></li><li><p>numpy.random.choice(a, size=None, replace=True, p=None)<br>è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ç»™å®šçš„æ•°æ®ç‚¹ä¸­ï¼ˆä¸€ç»´æ•°ç»„ï¼‰éšæœºä¸é‡å¤çš„æŠ½å–å¤§å°ä¸ºsizeçš„æ ·æœ¬æ•°æ®ã€‚</p></li><li><p>numpy.random.random_sample(size=None)<br>è¯¥å‡½æ•°æ˜¯åœ¨[0,1)çš„èŒƒå›´éšæœºè¿”å›æŒ‡å®šå¤§å°çš„æµ®ç‚¹æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸numpy.random.rand()ç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯éœ€è¦è¾“å…¥sizeï¼Œè€Œrandç›´æ¥è¾“å…¥ç»´åº¦å³å¯ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŒ…çš„ä½¿ç”¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å–ä¸¤ä¸ªå‘é‡è§’åº¦</title>
      <link href="/2021/09/08/img_process/getAngle/"/>
      <url>/2021/09/08/img_process/getAngle/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·å–ä¸¤ä¸ªå‘é‡çš„å¤¹è§’</p></blockquote><p><img src="https://picture.mulindya.com/getAngle.jpg" alt=""></p><p>æ¯”å¦‚ABå‘é‡è¡¨ç¤ºä¸º[1,-3,5,-1],å‰ä¸¤ä½æ˜¯Açš„åæ ‡ï¼Œåä¸¤ä½æ˜¯Bçš„åæ ‡ã€‚</p><p>ç›´æ¥è®¡ç®—å‡ºæ¯ä¸ªå‘é‡ä¸xæ­£è½´çš„å¤¹è§’ï¼Œç„¶åç›¸å‡å³å¯ï¼›æ ¸å¿ƒçš„éƒ¨åˆ†ä½¿ç”¨atan2å‡½æ•°ï¼ˆatanå’Œatan2ä¼˜å…ˆä½¿ç”¨atan2ï¼‰ã€‚</p><blockquote><p>atanä¸atan2çš„åŒºåˆ«ï¼š<br>atan å’Œ atan2 éƒ½æ˜¯æ±‚åæ­£åˆ‡å‡½æ•°ï¼Œå¦‚ï¼šæœ‰ä¸¤ä¸ªç‚¹ point(x1,y1), å’Œ point(x2,y2);<br>é‚£ä¹ˆè¿™ä¸¤ä¸ªç‚¹å½¢æˆçš„æ–œç‡çš„è§’åº¦è®¡ç®—æ–¹æ³•åˆ†åˆ«æ˜¯ï¼š<br>float angle = atan( (y2-y1)/(x2-x1) ); æˆ– float angle = atan2( y2-y1, x2-x1 );<br>atan2 çš„ä¼˜ç‚¹åœ¨äºå¦‚æœ x2-x1ç­‰äº0 ä¾ç„¶å¯ä»¥è®¡ç®—ï¼Œä½†æ˜¯atanå‡½æ•°å°±ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ï¼›</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_angle</span>(<span class="hljs-params">vec1,vec2</span>):</span><br>    dx1 = vec1[<span class="hljs-number">2</span>] - vec1[<span class="hljs-number">0</span>]<br>    dy1 = vec1[<span class="hljs-number">3</span>] - vec1[<span class="hljs-number">1</span>]<br>    dx2 = vec2[<span class="hljs-number">2</span>] - vec2[<span class="hljs-number">0</span>]<br>    dy2 = vec2[<span class="hljs-number">3</span>] - vec2[<span class="hljs-number">1</span>]<br>    angle1 = math.atan2(dy1,dx1)*<span class="hljs-number">180</span>/math.pi <span class="hljs-comment">#atan2ç»“æœä¸ºå¼§åº¦åˆ¶(å¯ä»¥å¤„ç†90åº¦çš„æƒ…å†µ)</span><br>    angle2 = math.atan2(dy2,dx2)*<span class="hljs-number">180</span>/math.pi<br>    angle = <span class="hljs-built_in">abs</span>(angle1-angle2)<br>    <span class="hljs-keyword">if</span>(angle&gt;<span class="hljs-number">180</span>):angle = <span class="hljs-number">360</span>-angle<br>    <span class="hljs-keyword">return</span> angle<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç†ï¼Œè§’åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YOLOv2</title>
      <link href="/2021/08/27/deep_learning/yolov2/"/>
      <url>/2021/08/27/deep_learning/yolov2/</url>
      
        <content type="html"><![CDATA[<h2 id="YOLOv2">YOLOv2</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡åœ°å€</strong>ï¼š<a href="https://arxiv.org/abs/1612.08242">https://arxiv.org/abs/1612.08242</a></p><p>Yolov2ä¸Yolov1åœ¨ä¿æŒé€Ÿåº¦çš„åŸºç¡€ä¸Šï¼Œå¯¹é¢„æµ‹æ•ˆæœçš„å‡†ç¡®åº¦ï¼Œè€—è´¹æ—¶é—´ï¼Œé²æ£’æ€§ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†æ”¹è¿›ï¼Œæ£€æµ‹èƒ½åŠ›æé«˜åˆ°9000ç§ä¸åŒå¯¹è±¡ã€‚æ–‡ç« æå‡ºäº†ä¸€ç§æ–°çš„<strong>è®­ç»ƒæ–¹æ³•â€“è”åˆè®­ç»ƒ</strong>æ–¹æ³•ã€‚è¿™ç§ç®—æ³•å¯ä»¥å°†ä¸¤ç§æ•°æ®é›†æ··åˆåˆ°ä¸€èµ·ï¼Œä½¿ç”¨ä¸€ç§åˆ†å±‚çš„è§‚ç‚¹è¿›è¡Œåˆ†ç±»ï¼Œç”¨å¤§å‹çš„åˆ†ç±»æ•°æ®é›†æ‰©å……æ£€æµ‹çš„æ•°æ®é›†ã€‚ä¹Ÿæˆä¸ºYOLO9000.</p><p>è”åˆè®­ç»ƒçš„æ€è·¯ï¼š<strong>åœ¨æ£€æµ‹æ•°æ®é›†å’Œåˆ†ç±»æ•°æ®é›†ä¸Šè®­ç»ƒç‰©ä½“æ£€æµ‹å™¨ï¼ˆObject Detectorsï¼‰ï¼Œç”¨æ£€æµ‹æ•°æ®é›†å­¦ä¹ ç‰©ä½“çš„å‡†ç¡®ä½ç½®ï¼Œç”¨åˆ†ç±»æ•°æ®é›†æ¥å¢åŠ åˆ†ç±»çš„ç±»åˆ«ä¸¤ã€‚æå‡å¥å£®æ€§ã€‚</strong></p><p>Yolo9000å°±æ˜¯ä½¿ç”¨è”åˆè®­ç»ƒçš„ç®—æ³•ï¼Œæ‹¥æœ‰æ¥è‡ªäºImagenetçš„9000ç§åˆ†ç±»ä¿¡æ¯ï¼Œç‰©ä½“æ£€æµ‹çš„éƒ¨åˆ†æ¥è‡ªäºCoCoçš„æ£€æµ‹æ•°æ®é›†ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov2 è®ºæ–‡ï¼šYOLO9000: Better, Faster, Stronger</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/YOLOv2.pdf" width="100%" height="650"></iframe></details><h3 id="æ”¹è¿›ç‚¹">æ”¹è¿›ç‚¹</h3><h4 id="BN-batch-normalization-æ‰¹é‡å½’ä¸€åŒ–">BN(batch normalization) æ‰¹é‡å½’ä¸€åŒ–</h4><p>BNå±‚æœ‰åŠ©äºè§£å†³åå‘ä¼ æ’­è¿‡ç¨‹çš„<strong>æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸</strong>çš„é—®é¢˜ï¼Œ<strong>é™ä½</strong>å¯¹è¶…å‚æ•°çš„<strong>æ•æ„Ÿæ€§</strong>ï¼ŒåŒæ—¶å¯¹batchå½’ä¸€åŒ–æ—¶ï¼Œèµ·åˆ°äº†ä¸€å®šçš„<strong>æ­£åˆ™åŒ–</strong>çš„æ•ˆæœï¼ˆå»æ‰çš„dropoutå±‚ï¼‰ã€‚é€šå¸¸ï¼Œåœ¨ç½‘ç»œçš„çº¿æ€§å˜æ¢ä¸æ¿€æ´»å‡½æ•°ä¹‹å‰å¢åŠ ä¸€ä¸ªBNå±‚ï¼ŒBNå±‚å¯ä»¥å°†å…¶ç‰¹å¾é‡å½’ä¸€åŒ–ä½¿å¾—å˜æ¢åçš„ç‰¹å¾å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œä»è€Œæ¯ä¸€æ‰¹è®­ç»ƒæ ·æœ¬éƒ½æœ‰ç±»ä¼¼çš„åˆ†å¸ƒã€‚åŒæ—¶è¿˜æœ‰ä¿®æ­£çš„å‚æ•°$\gamma,\beta$å¯ä»¥æ¢å¤åŸæœ‰ä¿¡æ¯ã€‚å®éªŒç»“æœmAPæå‡2.4%</p><p>ä¸€èˆ¬çš„å½’ä¸€åŒ–å…¬å¼ï¼š</p>$$\widehat x^{(k)} = \frac{x^{(k)}-E[x^{(k)}]}{\sqrt {Var[x^{(k)}]}} \\$$<p><img src="https://picture.mulindya.com/yolov2-pic1.png" alt=""></p><h4 id="High-resolution-classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰">High resolution classifierï¼ˆé«˜åˆ†è¾¨ç‡å›¾åƒåˆ†ç±»å™¨ï¼‰</h4><p>ç”±äºå¯¹è±¡æ£€æµ‹çš„æ ·æœ¬ç›¸å¯¹å›¾åƒåˆ†ç±»çš„è®­ç»ƒæ ·æœ¬è¦å°‘å¾—å¤šï¼Œåœ¨å¯¹è±¡æ£€æµ‹æ—¶æ¨¡å‹é€šå¸¸æ—¶å…ˆç”¨å›¾åƒåˆ†ç±»çš„æ ·æœ¬è®­ç»ƒå·ç§¯å±‚æå–å›¾åƒç‰¹å¾ï¼ˆè®­ç»ƒbackboneï¼‰ã€‚ä½†æ˜¯å›¾åƒåˆ†ç±»æ ·æœ¬çš„åˆ†è¾¨ç‡ä¸é«˜ï¼Œæ¯”å¦‚åœ¨yolov1ä¸­ï¼Œè®­ç»ƒé›†æ˜¯224*224çš„å›¾ç‰‡æ¥è®­ç»ƒå·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨è®­ç»ƒå¯¹è±¡æ£€æµ‹çš„æ¨¡å‹ä½¿ç”¨çš„æ˜¯448*448çš„å›¾ç‰‡ï¼Œè¿™æ ·çš„åˆ‡æ¢å¯¹æ¨¡å‹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚æ‰€ä»¥Yolo2åœ¨é‡‡ç”¨<strong>224*224å›¾åƒåˆ†ç±»æ¨¡å‹é¢„è®­ç»ƒä¹‹åå†é‡‡ç”¨448*448çš„é«˜åˆ†è¾¨ç‡æ ·æœ¬å¯¹åˆ†ç±»æ¨¡å‹è¿›è¡Œå¾®è°ƒ</strong>(10ä¸ªepoch)ï¼Œè¿™æ ·å†è®­ç»ƒå¯¹è±¡æ£€æµ‹æ¨¡å‹ä¹‹å‰ï¼Œç½‘ç»œç‰¹å¾å°±é€æ¸é€‚åº”448*448çš„åˆ†è¾¨ç‡ï¼Œç„¶åå†ä½¿ç”¨448*448çš„æ£€æµ‹æ ·æœ¬è¿›è¡Œå¯¹è±¡æ£€æµ‹æ¨¡å‹çš„è®­ç»ƒï¼Œä»¥ç¼“è§£äº†åˆ†è¾¨ç‡çªç„¶åˆ‡æ¢é€ æˆçš„å½±å“ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒmAPæå‡äº†3.7%ã€‚</p><h4 id="Convolution-with-anchor-boxes-ä½¿ç”¨å…ˆéªŒæ¡†">Convolution with anchor boxes(ä½¿ç”¨å…ˆéªŒæ¡†)</h4><p>Yolov1æ˜¯ä½¿ç”¨å…¨è¿æ¥å±‚ç›´æ¥é¢„æµ‹BBoxçš„åæ ‡å€¼ï¼ˆæ¯ä¸ªgridé¢„æµ‹kä¸ªBboxï¼‰ï¼ŒFaster R-CNNçš„æ–¹æ³•æ˜¯åªç”¨å·ç§¯å±‚å’Œregion proposal networkæ¥é¢„æµ‹é”šæ¡†çš„åç§»åº¦å’Œç½®ä¿¡åº¦ã€‚ä½†æ˜¯ä½œè€…å‘ç°é‡‡ç”¨Faster R-CNNçš„æ–¹æ³•æ¯”Yolov1çš„æ–¹æ³•æ›´åŠ ç®€ä¾¿ï¼Œè®©ç¥ç»ç½‘ç»œå­¦ä¹ èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚</p><p>å› æ­¤ï¼ŒYolov2ä¹Ÿå°è¯•äº†å…ˆéªŒæ¡†ï¼ˆanchorï¼‰ï¼Œåœ¨æ¯ä¸ªgridé¢„å…ˆè®¾å®šä¸€ç»„ä¸åŒå¤§å°ä¸åŒå®½é«˜æ¯”çš„è¾¹æ¡†ï¼Œæ¥è¦†ç›–æ•´ä¸ªå›¾åƒçš„ä¸åŒä½ç½®å’Œå¤šç§å°ºåº¦ï¼Œè¿™äº›å…ˆéªŒæ¡†ä½œä¸ºé¢„å®šä¹‰çš„å€™é€‰åŒºæ£€æµ‹æ¡†å†…æ˜¯å¦æœ‰ç›®æ ‡ï¼Œä»¥åŠå¾®è°ƒè¾¹æ¡†çš„ä½ç½®ã€‚ä¹‹å‰yolov1å¹¶æ²¡æœ‰é‡‡ç”¨å…ˆéªŒæ¡†ï¼Œå¹¶ä¸”æ¯ä¸ªgridåªé¢„æµ‹ä¸¤ä¸ªbounding boxï¼Œæ•´ä¸ªå›¾åƒæœ‰98ä¸ªï¼Œyolov2å…¥è½¨æ¯ä¸ªgridé‡‡ç”¨9ä¸ªå…ˆéªŒæ¡†ï¼Œæ”¶ç¼©ç½‘ç»œè¿è¡Œåœ¨416*416çš„å›¾ç‰‡ï¼Œä¸€ä¸ªgridæœ‰32åƒç´ ï¼Œé‚£ä¹ˆæ€»å…±æœ‰13*13*9=1521ä¸ªå…ˆéªŒæ¡†ï¼Œæœ€ç»ˆå»æ‰äº†å…¨è¿æ¥å±‚ï¼Œé‡‡ç”¨anchor boxesæ¥é¢„æµ‹bounding boxesã€‚ç”±äºå›¾ç‰‡ä¸­çš„ç‰©ä½“éƒ½å€¾å‘äºå‡ºç°åœ¨å›¾ç‰‡çš„ä¸­å¿ƒä½ç½®ï¼Œç‰¹åˆ«æ˜¯é‚£ç§æ¯”è¾ƒå¤§çš„ç‰©ä½“ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå•ç‹¬ä½äºç‰©ä½“ä¸­å¿ƒçš„ä½ç½®ç”¨äºé¢„æµ‹è¿™äº›ç‰©ä½“ã€‚YOLOçš„å·ç§¯å±‚é‡‡ç”¨32è¿™ä¸ªå€¼æ¥ä¸‹é‡‡æ ·å›¾ç‰‡ï¼Œæ‰€ä»¥é€šè¿‡é€‰æ‹©416*416ç”¨ä½œè¾“å…¥å°ºå¯¸æœ€ç»ˆèƒ½è¾“å‡ºä¸€ä¸ª13*13çš„Feature Mapã€‚ä½¿ç”¨Anchor Boxä¼šè®©ç²¾ç¡®åº¦ç¨å¾®ä¸‹é™ï¼Œä½†ç”¨äº†å®ƒèƒ½è®©YOLOèƒ½é¢„æµ‹å‡ºå¤§äºä¸€åƒä¸ªæ¡†ï¼ŒåŒæ—¶recallè¾¾åˆ°88%ï¼ŒmAPè¾¾åˆ°69.2%ã€‚</p><h4 id="Dimension-clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰">Dimension clustersï¼ˆèšç±»æå–å…ˆéªŒæ¡†çš„å°ºåº¦ä¿¡æ¯ï¼‰</h4><p>ä¹‹å‰Anchor Boxçš„å°ºå¯¸æ˜¯æ‰‹åŠ¨é€‰æ‹©çš„ï¼Œæ‰€ä»¥å°ºå¯¸è¿˜æœ‰ä¼˜åŒ–çš„ä½™åœ°ã€‚YOLO2å°è¯•ç»Ÿè®¡å‡ºæ›´ç¬¦åˆæ ·æœ¬ä¸­å¯¹è±¡å°ºå¯¸çš„å…ˆéªŒæ¡†ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç½‘ç»œå¾®è°ƒå…ˆéªŒæ¡†åˆ°å®é™…ä½ç½®çš„éš¾åº¦ã€‚YOLO2çš„åšæ³•æ˜¯å¯¹è®­ç»ƒé›†ä¸­æ ‡æ³¨çš„è¾¹æ¡†è¿›è¡ŒK-meanèšç±»åˆ†æï¼Œä»¥å¯»æ‰¾å°½å¯èƒ½åŒ¹é…æ ·æœ¬çš„è¾¹æ¡†å°ºå¯¸ã€‚</p><p>åœ¨ä½¿ç”¨Kmeansèšç±»åˆ†ææ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥é‡‡ç”¨çš„æ¬§æ°è·ç¦»åº¦é‡ï¼Œå› ä¸ºè¿™æ ·å¤§è¾¹æ¡†çš„è·ç¦»ä¼šç›¸å¯¹å°è¾¹æ¡†å¤§ï¼Œè¿™æ ·è¯¯å·®å°±å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨IOUçš„å½¢å¼ã€‚<br>$$<br>d(box,centroid) = 1-IOU(box,centroid)<br>$$<br>centroidæ˜¯èšç±»æ—¶è¢«é€‰ä½œä¸­å¿ƒçš„è¾¹æ¡†ï¼Œboxå°±æ˜¯å…¶å®ƒè¾¹æ¡†ï¼Œdå°±æ˜¯ä¸¤è€…é—´çš„â€œè·ç¦»â€ã€‚IOUè¶Šå¤§ï¼Œâ€œè·ç¦»â€è¶Šè¿‘ã€‚YOLO2ç»™å‡ºçš„èšç±»åˆ†æç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic2.png" alt=""></p><p>é€šè¿‡åˆ†æå®éªŒç»“æœï¼Œåœ¨modelå¤æ‚æ€§ä¸high recallä¹‹é—´æƒè¡¡ä¹‹åï¼Œé€‰æ‹©èšç±»åˆ†ç±»æ•°K=5ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic3.png" alt=""></p><p>è¯´æ˜ç”¨K-meansé€‰æ‹©Anchor Boxesæ—¶ï¼Œé€‰æ‹©å€¼ä¸º5æ—¶ï¼ŒAVG IOUçš„å€¼æ˜¯61ï¼Œè¿™ä¸ªå€¼è¦æ¯”ä¸ç”¨èšç±»çš„æ–¹æ³•çš„60.9è¦é«˜ã€‚é€‰æ‹©å€¼ä¸º9çš„æ—¶å€™ï¼ŒAVG IOUæ›´æœ‰æ˜¾è‘—æé«˜ã€‚æ€»ä¹‹å°±æ˜¯è¯´æ˜ç”¨èšç±»çš„æ–¹æ³•æ˜¯æœ‰æ•ˆæœçš„ã€‚</p><h4 id="Direct-location-predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰">Direct location predictionï¼ˆçº¦æŸé¢„æµ‹è¾¹æ¡†çš„ä½ç½®ï¼‰</h4><p>å€Ÿé‰´äºFaster RCNNçš„å…ˆéªŒæ¡†æ–¹æ³•ï¼Œåœ¨è®­ç»ƒçš„æ—©æœŸé˜¶æ®µï¼Œå…¶ä½ç½®é¢„æµ‹å®¹æ˜“ä¸ç¨³å®šã€‚å…¶ä½ç½®é¢„æµ‹å…¬å¼ä¸ºï¼š</p>$$x = (t_x*w_a)+x_a \\y = (t_y*h_a)+y_a$$<p>å…¶ä¸­ï¼Œ æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒï¼Œ $x_a,y_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„ä¸­å¿ƒç‚¹åæ ‡ï¼Œ $w_a,h_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„å®½å’Œé«˜ï¼Œ$t_x,t_y$ æ˜¯è¦å­¦ä¹ çš„å‚æ•°ã€‚æ³¨æ„ï¼ŒYOLOè®ºæ–‡ä¸­å†™çš„æ˜¯$x = (t_x*w_a)-x_a$ ï¼Œæ ¹æ®Faster RCNNï¼Œåº”è¯¥æ˜¯"+"ã€‚</p><p>ä½†æ˜¯$t_x,t_y$ ä¸åŠ çº¦æŸçš„è¿™ç§æ–¹å¼ï¼Œä¼šå¯¼è‡´é¢„æµ‹è¾¹æ¡†ä¸­å¿ƒä¼šå‡ºç°åœ¨ä»»æ„ä½ç½®ï¼Œå› æ­¤åœ¨æ—©æœŸè®­ç»ƒé˜¶æ®µä¸ç¨³å®šï¼Œæ–‡ç« å°†è¾¹æ¡†çš„ä¸­å¿ƒçº¦æŸåœ¨gridç½‘æ ¼å½“ä¸­ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic4.png" alt=""></p><p>å…¶ä¸­ï¼Œ $b_x,b_y,b_w,b_h$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ã€‚ $Pr(object)*IOU(b,object)$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ç½®ä¿¡åº¦ï¼Œåœ¨YOLO1æ˜¯ç›´æ¥é¢„æµ‹ç½®ä¿¡åº¦çš„å€¼ï¼Œè¿™é‡Œå¯¹é¢„æµ‹å‚æ•°$t_o$è¿›è¡ŒÏƒå˜æ¢åä½œä¸ºç½®ä¿¡åº¦çš„å€¼ã€‚ $c_x,c_y$æ˜¯å½“å‰ç½‘æ ¼å·¦ä¸Šè§’åˆ°å›¾åƒå·¦ä¸Šè§’çš„è·ç¦»ï¼Œè¦å…ˆå°†ç½‘æ ¼å¤§å°å½’ä¸€åŒ–ï¼Œå³ä»¤ä¸€ä¸ªç½‘æ ¼çš„å®½=1ï¼Œé«˜=1ã€‚ $p_w,p_h$æ˜¯å…ˆéªŒæ¡†çš„å®½å’Œé«˜($t_w,t_h$ä¼šå¯¹åˆå§‹çš„è®¾ç½®è¿›è¡Œè°ƒæ•´)ã€‚Ïƒæ˜¯sigmoidå‡½æ•°ã€‚ $t_x,t_y,t_w,t_h,t_o$æ˜¯è¦å­¦ä¹ çš„å‚æ•°($t_o$ä¹Ÿå¯ä»¥å­¦ä¹ çš„å˜›ï¼Œå­¦åˆ°æŸç§è§„å¾‹ç”¨ä»¥è¡¨ç¤ºç½®ä¿¡åº¦â“)ï¼Œåˆ†åˆ«ç”¨äºé¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ï¼Œä»¥åŠç½®ä¿¡åº¦ã€‚</p><p><img src="https://picture.mulindya.com/yolov2-pic5.png" alt=""></p><p>è¿™ç§æ–¹å¼å¯ä»¥è®©æ•°å€¼æ›´å¹…åº¦ç¨³å®šï¼Œä¹Ÿè®©ç½‘ç»œæ›´å®¹æ˜“å­¦ä¹ ã€‚</p><h4 id="Fine-Grained-Features-passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾">Fine-Grained Features(passthroughå±‚æ£€æµ‹ç»†ç²’åº¦ç‰¹å¾)</h4><p>å¯¹è±¡æ£€æµ‹é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼šå³ç›®æ ‡æ£€æµ‹çš„å¯¹è±¡æœ‰å¤§æœ‰å°ï¼Œè¾“å…¥å›¾åƒç»è¿‡å¤šå±‚ç½‘ç»œæå–ç‰¹å¾ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾ä¸­ï¼ˆæ¯”å¦‚YOLO2ä¸­è¾“å…¥416<em>416ç»è¿‡å·ç§¯ç½‘ç»œä¸‹é‡‡æ ·æœ€åè¾“å‡ºæ˜¯13</em>13ï¼‰ï¼Œè¾ƒå°çš„å¯¹è±¡å¯èƒ½ç‰¹å¾å·²ç»ä¸æ˜æ˜¾ç”šè‡³è¢«å¿½ç•¥æ‰äº†ã€‚ä¸ºäº†æ›´å¥½çš„æ£€æµ‹å‡ºä¸€äº›æ¯”è¾ƒå°çš„å¯¹è±¡ï¼Œæœ€åè¾“å‡ºçš„ç‰¹å¾å›¾éœ€è¦ä¿ç•™ä¸€äº›æ›´ç»†èŠ‚çš„ä¿¡æ¯ã€‚</p><p>YOLO2å¼•å…¥ä¸€ç§ç§°ä¸ºpassthroughå±‚çš„æ–¹æ³•åœ¨ç‰¹å¾å›¾ä¸­ä¿ç•™ä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨æœ€åä¸€ä¸ªpoolingä¹‹å‰ï¼Œç‰¹å¾å›¾çš„å¤§å°æ˜¯26*26*512ï¼Œå°†å…¶1æ‹†4ï¼Œç›´æ¥ä¼ é€’ï¼ˆpassthroughï¼‰åˆ°poolingåï¼ˆå¹¶ä¸”åˆç»è¿‡ä¸€ç»„å·ç§¯ï¼‰çš„ç‰¹å¾å›¾ï¼Œä¸¤è€…å åŠ åˆ°ä¸€èµ·ä½œä¸ºè¾“å‡ºçš„ç‰¹å¾å›¾ã€‚<br><img src="https://picture.mulindya.com/yolov2-pic11.png" alt=""></p><p>å…·ä½“æ€æ ·1æ‹†4ï¼Œä¸‹é¢å€Ÿç”¨ä¸€å‰¯å›¾çœ‹çš„å¾ˆæ¸…æ¥šã€‚å›¾ä¸­ç¤ºä¾‹çš„æ˜¯1ä¸ª4*4æ‹†æˆ4ä¸ª2*2ã€‚å¦å¤–ï¼Œæ ¹æ®YOLO2çš„ä»£ç ï¼Œç‰¹å¾å›¾å…ˆç”¨1*1å·ç§¯ä» 26*26*512 é™ç»´åˆ° 26*26*64ï¼Œå†åš1æ‹†4å¹¶passthroughã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">ut = tf.extract_image_patches(<span class="hljs-keyword">in</span>, [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, stride, stride, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], padding=<span class="hljs-string">"VALID"</span>)<br><span class="hljs-comment"># or use tf.space_to_depth</span><br><span class="hljs-comment"># out = tf.space_to_depth(in, 2)</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">tf.extract_image_patches(<br>    images,<br>    ksizes,<br>    strides,<br>    rates,<br>    padding,<br>    name=<span class="hljs-literal">None</span><br>)<br><span class="hljs-comment">#imagesï¼šå¿…é¡»æ˜¯shapeä¸º[batch, in_rows, in_cols, depth]çš„tensorï¼›</span><br><span class="hljs-comment">#ksizeï¼šé•¿åº¦å¤§äºç­‰äº4çš„listï¼Œæ»‘åŠ¨çª—çš„å¤§å°</span><br><span class="hljs-comment">#strides:æ¯å—patchåŒºåŸŸä¹‹é—´ä¸­å¿ƒç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå¿…é¡»æ˜¯: [1, stride_rows, stride_cols, 1].</span><br>    <span class="hljs-comment">#å…·ä½“ç‚¹è¯´å°±æ˜¯ç”¨æ¥è®¡ç®—æ¯æ¬¡é€‰å–patchçš„åˆå§‹ç‚¹ä½ç½®</span><br><span class="hljs-comment">#rates: åœ¨æ¯æ¬¡æå–çš„patchä¸­ï¼Œå¯¹åº”dimåƒç´ ç‚¹ä½ç½®ä¹‹é—´çš„å·®è·ï¼Œå¿…é¡»æ˜¯[1, rate_rows, rate_cols, 1]ï¼›ã€Œæˆ–è€…ç†è§£ä¸º æå–å‡ºæ¥çš„æ¯ä¸ªæ¡†é‡Œé¢çš„åƒç´ ä¸æ˜¯éƒ½é€‰æ‹©çš„ æ ¹æ®rateçš„ä¸åŒ éš”å‡ ä¸ªé€‰ä¸€ä¸ª é»˜è®¤æ˜¯1ä¹Ÿå°±æ˜¯çš„éƒ½é€‰æ‹© è‹¥ä¸º2 é‚£ä¹ˆå°±æ˜¯éš”ä¸€ä¸ªæ¥é€‰æ‹©ã€</span><br><span class="hljs-comment">#padding:æœ‰ä¸¤ä¸ªå–å€¼ï¼Œâ€œVALIDâ€æˆ–è€…â€œSAMEâ€ï¼Œâ€œVALIDâ€è¡¨ç¤ºæ‰€å–çš„patchåŒºåŸŸå¿…é¡»å®Œå…¨åŒ…å«åœ¨åŸå§‹å›¾åƒä¸­."SAME"è¡¨ç¤ºå¯ä»¥å–è¶…å‡ºåŸå§‹å›¾åƒçš„éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†è¿›è¡Œ0å¡«å……ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h4 id="Multi-scale-Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰">Multi-scale Trainingï¼ˆå¤šå°ºåº¦å›¾åƒè®­ç»ƒï¼‰</h4><p>ä½œè€…å¸Œæœ›YOLOv2èƒ½å¥å£®çš„è¿è¡Œäºä¸åŒå°ºå¯¸çš„å›¾ç‰‡ä¹‹ä¸Šï¼Œæ‰€ä»¥æŠŠè¿™ä¸€æƒ³æ³•ç”¨äºè®­ç»ƒmodelä¸­ã€‚</p><p>åŒºåˆ«äºä¹‹å‰çš„è¡¥å…¨å›¾ç‰‡çš„å°ºå¯¸çš„æ–¹æ³•ï¼ŒYOLOv2æ¯è¿­ä»£å‡ æ¬¡éƒ½ä¼šæ”¹å˜ç½‘ç»œå‚æ•°ã€‚æ¯10ä¸ªBatchï¼Œç½‘ç»œä¼š<strong>éšæœºåœ°é€‰æ‹©ä¸€ä¸ªæ–°çš„å›¾ç‰‡å°ºå¯¸</strong>ï¼Œç”±äºä½¿ç”¨äº†ä¸‹é‡‡æ ·å‚æ•°æ˜¯32ï¼Œæ‰€ä»¥ä¸åŒçš„å°ºå¯¸å¤§å°ä¹Ÿé€‰æ‹©ä¸º32çš„å€æ•°{320ï¼Œ352â€¦â€¦608}ï¼Œæœ€å°320*320ï¼Œæœ€å¤§608*608ï¼Œç½‘ç»œä¼šè‡ªåŠ¨æ”¹å˜å°ºå¯¸ï¼Œå¹¶ç»§ç»­è®­ç»ƒçš„è¿‡ç¨‹ã€‚</p><p>è¿™ä¸€æ–¹æ³•è®©ç½‘ç»œåœ¨ä¸åŒçš„è¾“å…¥å°ºå¯¸ä¸Šéƒ½èƒ½è¾¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„é¢„æµ‹æ•ˆæœï¼ŒåŒä¸€ç½‘ç»œèƒ½åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸Šè¿›è¡Œæ£€æµ‹ã€‚å½“è¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå°çš„ç²¾åº¦é«˜ï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå¤§çš„æ—¶å€™ç²¾åº¦ç›¸å¯¹ä½ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨YOLOv2çš„é€Ÿåº¦å’Œç²¾åº¦ä¸Šè¿›è¡Œæƒè¡¡ã€‚</p><center class="half"><img src="https://picture.mulindya.com/yolov2-pic6.png"><img src="https://picture.mulindya.com/yolov2-pic7.png"></center><h4 id="hi-res-detect-é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹">hi-res-detect(é«˜åˆ†è¾¨ç‡å›¾åƒçš„å¯¹è±¡æ£€æµ‹)</h4><p>ä¸Šé¢å·¦å›¾è¡¨æ ¼ä¸­æœ€åä¸€è¡Œæ˜¯ä½¿ç”¨é«˜åˆ†è¾¨lç‡çš„å›¾åƒhi-res detectorï¼Œå› ä¸ºYOLO2è°ƒæ•´ç½‘ç»œç»“æ„åèƒ½å¤Ÿæ”¯æŒå¤šç§å°ºå¯¸çš„è¾“å…¥å›¾åƒã€‚é€šå¸¸æ˜¯ä½¿ç”¨416*416çš„è¾“å…¥å›¾åƒï¼Œå¦‚æœç”¨è¾ƒé«˜åˆ†è¾¨ç‡çš„è¾“å…¥å›¾åƒï¼Œæ¯”å¦‚544*544ï¼Œåˆ™mAPå¯ä»¥è¾¾åˆ°78.6ï¼Œæœ‰1.8çš„æå‡ã€‚</p><h4 id="Hierarchical-classification-åˆ†å±‚åˆ†ç±»">Hierarchical classification(åˆ†å±‚åˆ†ç±»)</h4><p>ä½œè€…æå‡ºäº†ä¸€ç§åœ¨åˆ†ç±»æ•°æ®é›†å’Œæ£€æµ‹æ•°æ®é›†ä¸Šè”åˆè®­ç»ƒçš„æœºåˆ¶ã€‚ä½¿ç”¨æ£€æµ‹æ•°æ®é›†çš„å›¾ç‰‡å»å­¦ä¹ æ£€æµ‹ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚bounding box åæ ‡é¢„æµ‹ï¼Œæ˜¯å¦åŒ…å«ç‰©ä½“ä»¥åŠå±äºå„ä¸ªç‰©ä½“çš„æ¦‚ç‡ã€‚ä½¿ç”¨ä»…æœ‰ç±»åˆ«æ ‡ç­¾çš„åˆ†ç±»æ•°æ®é›†å›¾ç‰‡å»æ‰©å±•å¯ä»¥æ£€æµ‹çš„ç§ç±»ã€‚ä½œè€…é€šè¿‡ImageNetè®­ç»ƒåˆ†ç±»ã€COCOå’ŒVOCæ•°æ®é›†æ¥è®­ç»ƒæ£€æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„æ€è·¯ï¼Œå¯ä»¥è®©æˆ‘ä»¬è¾¾åˆ°æ¯”è¾ƒä¼˜çš„æ•ˆæœã€‚é€šè¿‡å°†ä¸¤ä¸ªæ•°æ®é›†æ··åˆè®­ç»ƒï¼Œ<strong>å¦‚æœé‡åˆ°æ¥è‡ªåˆ†ç±»é›†çš„å›¾ç‰‡åˆ™åªè®¡ç®—åˆ†ç±»çš„Lossï¼Œé‡åˆ°æ¥è‡ªæ£€æµ‹é›†çš„å›¾ç‰‡åˆ™è®¡ç®—å®Œæ•´çš„Loss</strong>ã€‚</p><p>ä½†æ˜¯ImageNetå¯¹åº”åˆ†ç±»æœ‰9000ç§ï¼Œè€ŒCOCOåˆ™åªæä¾›80ç§ç›®æ ‡æ£€æµ‹ï¼Œä½œè€…ä½¿ç”¨multi-labelæ¨¡å‹ï¼Œå³å‡å®šä¸€å¼ å›¾ç‰‡å¯ä»¥æœ‰å¤šä¸ªlabelï¼Œå¹¶ä¸”ä¸è¦æ±‚labelé—´ç‹¬ç«‹ã€‚å› ä¸ºä½œè€…é€‰æ‹©åœ¨COCOå’ŒImageNetæ•°æ®é›†ä¸Šè¿›è¡Œè”åˆè®­ç»ƒï¼Œé‡åˆ°çš„ç¬¬ä¸€é—®é¢˜æ˜¯ä¸¤è€…çš„ç±»åˆ«å¹¶ä¸æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œæ¯”å¦‚"Norfolk terrier"æ˜æ˜¾å±äº"dog"ï¼Œæ‰€ä»¥ä½œè€…æå‡ºäº†ä¸€ç§å±‚çº§åˆ†ç±»æ–¹æ³•ï¼ˆHierarchical classificationï¼‰ï¼Œä¸»è¦æ€è·¯æ˜¯æ ¹æ®å„ä¸ªç±»åˆ«ä¹‹é—´çš„ä»å±å…³ç³»ï¼ˆæ ¹æ®WordNetï¼‰å»ºç«‹ä¸€ç§æ ‘ç»“æ„WordTreeï¼Œç»“åˆCOCOå’ŒImageNetå»ºç«‹çš„WordTreeå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic8.png" alt=""></p><ol><li>éå†Imagenetçš„labelï¼Œç„¶ååœ¨WordNetä¸­å¯»æ‰¾è¯¥labelåˆ°æ ¹èŠ‚ç‚¹(æŒ‡å‘ä¸€ä¸ªç‰©ç†å¯¹è±¡)çš„è·¯å¾„ï¼›</li><li>å¦‚æœè·¯å¾„åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆå°±å°†è¯¥è·¯å¾„ç›´æ¥åŠ å…¥åˆ°åˆ†å±‚æ ‘ç»“æ„ä¸­ï¼›</li><li>å¦åˆ™ï¼Œä»å‰©ä½™çš„è·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼ŒåŠ å…¥åˆ°åˆ†å±‚æ ‘ã€‚</li></ol><p>è¿™ä¸ªåˆ†å±‚æ ‘æˆ‘ä»¬ç§°ä¹‹ä¸º WordTreeï¼Œä½œç”¨å°±åœ¨äºå°†ä¸¤ç§æ•°æ®é›†æŒ‰ç…§å±‚çº§è¿›è¡Œç»“åˆã€‚(æ„Ÿè§‰å°±æ˜¯ä¸ºäº†æ‰©å……æ•°æ®é›†åŒæ—¶ç®€ä¾¿è®¡ç®—)</p><p>åˆ†ç±»æ—¶çš„æ¦‚ç‡è®¡ç®—å€Ÿç”¨äº†<strong>å†³ç­–æ ‘æ€æƒ³</strong>ï¼Œ<strong>æŸä¸ªèŠ‚ç‚¹çš„æ¦‚ç‡å€¼ç­‰äºè¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ‰€æœ‰æ¡ä»¶æ¦‚ç‡ä¹‹ç§¯</strong>ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€é¢— WordTree ï¼ˆè§†è§‰åè¯ç»„æˆçš„å±‚æ¬¡ç»“æ„æ¨¡å‹ï¼‰ã€‚ç”¨WordTreeæ‰§è¡Œåˆ†ç±»æ—¶ï¼Œé¢„æµ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶æ¦‚ç‡ã€‚å¦‚æœæƒ³æ±‚å¾—ç‰¹å®šèŠ‚ç‚¹çš„ç»å¯¹æ¦‚ç‡ï¼Œåªéœ€è¦æ²¿ç€è·¯å¾„åšè¿ç»­ä¹˜ç§¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³çŸ¥é“ä¸€å¼ å›¾ç‰‡æ˜¯ä¸æ˜¯â€œNorfolk terrier â€éœ€è¦è®¡ç®—ï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic10.png" alt=""></p><p>å¦å¤–ï¼Œä¸ºäº†éªŒè¯è¿™ç§æ–¹æ³•ä½œè€…åœ¨WordTreeï¼ˆç”¨1000ç±»åˆ«çš„ImageNetåˆ›å»ºï¼‰ä¸Šè®­ç»ƒäº†Darknet-19æ¨¡å‹ã€‚ä¸ºäº†åˆ›å»ºWordTree1kï¼Œä½œè€…æ·»åŠ äº†å¾ˆå¤šä¸­é—´èŠ‚ç‚¹ï¼ŒæŠŠlabelç”±1000æ‰©å±•åˆ°1369ã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ground truthæ ‡ç­¾è¦é¡ºç€å‘æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¼ æ’­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å¼ å›¾ç‰‡è¢«æ ‡è®°ä¸ºâ€œNorfolk terrierâ€ï¼Œå®ƒä¹Ÿè¢«æ ‡è®°ä¸ºâ€œdogâ€ å’Œâ€œmammalâ€ç­‰ã€‚ä¸ºäº†è®¡ç®—æ¡ä»¶æ¦‚ç‡ï¼Œæ¨¡å‹é¢„æµ‹äº†ä¸€ä¸ªåŒ…å«1369ä¸ªå…ƒç´ çš„å‘é‡ï¼Œè€Œä¸”åŸºäºæ‰€æœ‰â€œåŒä¹‰è¯é›†â€è®¡ç®—softmaxã€‚</p><p>softmaxæ“ä½œä¹ŸåŒæ—¶åº”è¯¥é‡‡ç”¨åˆ†ç»„æ“ä½œï¼Œä¸‹å›¾ä¸ŠåŠéƒ¨åˆ†ä¸ºImageNetå¯¹åº”çš„åŸç”ŸSoftmaxï¼Œä¸‹åŠéƒ¨åˆ†å¯¹åº”åŸºäºWordTreeçš„Softmaxï¼š</p><p><img src="https://picture.mulindya.com/yolov2-pic9.png" alt=""></p><p>é€šè¿‡ä¸Šè¿°æ–¹æ¡ˆæ„é€ WordTreeï¼Œå¾—åˆ°å¯¹åº”9418ä¸ªåˆ†ç±»ï¼Œé€šè¿‡é‡é‡‡æ ·ä¿è¯Imagenetå’ŒCOCOçš„æ ·æœ¬æ•°æ®æ¯”ä¾‹ä¸º4:1ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>é€šè¿‡è”åˆè®­ç»ƒç­–ç•¥ï¼ŒYOLO9000å¯ä»¥å¿«é€Ÿæ£€æµ‹å‡ºè¶…è¿‡9000ä¸ªç±»åˆ«çš„ç‰©ä½“ï¼Œæ€»ä½“mAPå€¼ä¸º19,7%ã€‚æˆ‘è§‰å¾—è¿™æ˜¯ä½œè€…åœ¨è¿™ç¯‡è®ºæ–‡ä½œå‡ºçš„æœ€å¤§çš„è´¡çŒ®ï¼Œå› ä¸ºYOLOv2çš„æ”¹è¿›ç­–ç•¥äº®ç‚¹å¹¶ä¸æ˜¯å¾ˆçªå‡ºï¼Œä½†æ˜¯YOLO9000ç®—æ˜¯å¼€åˆ›ä¹‹ä¸¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç›®æ ‡æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
            <tag> yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨åšå®¢ä¸­æ˜¾ç¤ºpdf&amp;æŠ˜å </title>
      <link href="/2021/08/25/config/pdf-config/"/>
      <url>/2021/08/25/config/pdf-config/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„çš„æ–¹æ³•é…ç½®<br><a href="https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/">https://www.zywvvd.com/2021/08/15/hexo-theme/fluid/fluid-pdf/fluid-pdf/</a></p></blockquote><h2 id="é…ç½®">é…ç½®</h2><p>pdf.js æ˜¯ç”¨äºè§£æå’Œå‘ˆç° PDF çš„åŸºäº Web æ ‡å‡†å¹³å°çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://mozilla.github.io/pdf.js/">https://mozilla.github.io/pdf.js/</a></p><p>ç”±äºæˆ‘çš„æµè§ˆå™¨çš„ç‰ˆæœ¬å¯èƒ½ä¸é«˜ï¼Œè€ƒè™‘åˆ°å…¼å®¹æ€§ä¸‹è½½æ—§ç‰ˆçš„æ–‡ä»¶ã€‚ç„¶åæŒ‰å¸ˆå…„çš„æ­¥éª¤é…ç½®å³å¯ã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><figure class="highlight llvm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">&lt;iframe src<span class="hljs-operator">=</span>'/js/pdfjs_old/web/viewer.html?file<span class="hljs-operator">=</span>https://paper.mulindya.com/An<span class="hljs-variable">%20</span>Isotropic<span class="hljs-variable">%203</span><span class="hljs-keyword">x</span><span class="hljs-number">3</span><span class="hljs-variable">%20</span>Image<span class="hljs-variable">%20</span>Gradient<span class="hljs-variable">%20</span>Operator.pdf' width<span class="hljs-operator">=</span><span class="hljs-number">100</span>% height<span class="hljs-operator">=</span><span class="hljs-number">450</span>&gt;&lt;/iframe&gt;<br></code></pre></td></tr></tbody></table></figure><p>fileè®¾ç½®ä¸ºæ–‡ä»¶çš„åœ°å€ï¼Œå®½é«˜å¯ä»¥è‡ªå·±è®¾ç½®ã€‚</p><h2 id="æ•ˆæœ">æ•ˆæœ</h2><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe><h2 id="æŠ˜å ">æŠ˜å </h2><p>é€šè¿‡htmlçš„detailså…ƒç´ å¯ä»¥æŠ˜å éšè—çš„å†…å®¹ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä½¿ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span> æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—çš„å†…å®¹<br>åœ¨å…¶ä¸­ä½¿ç”¨<span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>æ ‡ç­¾åŒ…è£¹éœ€è¦éšè—å†…å®¹çš„æ ‡é¢˜<br></code></pre></td></tr></tbody></table></figure><p>è¿™æ ·å¦‚æœéœ€è¦é˜…è¯»pdfå°±å¯ä»¥å±•å¼€ï¼Œä¸éœ€è¦å°±éšè—ï¼ŒçœŸæ˜¯ç‚’é¸¡ä¾¿åˆ©ï¼ğŸ˜‰</p><details><summary>å±•å¼€pdf</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="650"></iframe></details>]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é…ç½® </tag>
            
            <tag> pdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swinç½‘ç»œ</title>
      <link href="/2021/08/25/deep_learning/swin/"/>
      <url>/2021/08/25/deep_learning/swin/</url>
      
        <content type="html"><![CDATA[<blockquote><p>swin_transformerçš„ç»“æ„å’Œä»£ç å®ç°éƒ¨åˆ†ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ freezeçš„ç›¸å…³æ“ä½œï¼Œè®°å½•å¦‚ä¸‹ã€‚</p></blockquote><h2 id="è®ºæ–‡ä¸­çš„æ¶æ„">è®ºæ–‡ä¸­çš„æ¶æ„</h2><p><img src="https://picture.mulindya.com/swin-pic1.png" alt=""></p><h2 id="è®ºæ–‡ç¬”è®°">è®ºæ–‡ç¬”è®°</h2><details><summary>Swin Transformer:Hierarchical Vision Transformer using Shifted Windows</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf" width="100%" height="650"></iframe></details><h2 id="modelæ¶æ„">modelæ¶æ„</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br></pre></td><td class="code"><pre><code class="hljs python">ImageClassifier(<br>  (backbone): SwinTransformer(<br>    (patch_embed): PatchEmbed(<br>      (projection): Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">96</span>, kernel_size=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>), stride=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))<br>      (norm): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>    )<br>    (drop_after_pos): Dropout(p=<span class="hljs-number">0.0</span>, inplace=<span class="hljs-literal">False</span>)<br>    (stages): ModuleList(<br>      (<span class="hljs-number">0</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">288</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">96</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">96</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">96</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">1</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">576</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">192</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">192</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">192</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">2</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">2</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">3</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">4</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">5</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">6</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">7</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">8</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">9</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">10</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">11</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">12</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">13</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">14</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">15</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">16</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">17</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1152</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">384</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">384</span>, out_features=<span class="hljs-number">1536</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">384</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>        (downsample): PatchMerging(<br>          (sampler): Unfold(kernel_size=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), dilation=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), stride=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>          (norm): LayerNorm((<span class="hljs-number">1536</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>          (reduction): Linear(in_features=<span class="hljs-number">1536</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">False</span>)<br>        )<br>      )<br>      (<span class="hljs-number">3</span>): SwinBlockSequence(<br>        (blocks): ModuleList(<br>          (<span class="hljs-number">0</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>          (<span class="hljs-number">1</span>): SwinBlock(<br>            (norm1): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (attn): ShiftWindowMSA(<br>              (w_msa): WindowMSA(<br>                (qkv): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">2304</span>, bias=<span class="hljs-literal">True</span>)<br>                (attn_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (proj): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (proj_drop): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                (softmax): Softmax(dim=-<span class="hljs-number">1</span>)<br>              )<br>              (drop): DropPath()<br>            )<br>            (norm2): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>            (ffn): FFN(<br>              (activate): GELU()<br>              (layers): Sequential(<br>                (<span class="hljs-number">0</span>): Sequential(<br>                  (<span class="hljs-number">0</span>): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">3072</span>, bias=<span class="hljs-literal">True</span>)<br>                  (<span class="hljs-number">1</span>): GELU()<br>                  (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>                )<br>                (<span class="hljs-number">1</span>): Linear(in_features=<span class="hljs-number">3072</span>, out_features=<span class="hljs-number">768</span>, bias=<span class="hljs-literal">True</span>)<br>                (<span class="hljs-number">2</span>): Dropout(p=<span class="hljs-number">0</span>, inplace=<span class="hljs-literal">False</span>)<br>              )<br>              (dropout_layer): DropPath()<br>            )<br>          )<br>        )<br>      )<br>    )<br>    (norm): LayerNorm((<span class="hljs-number">768</span>,), eps=<span class="hljs-number">1e-05</span>, elementwise_affine=<span class="hljs-literal">True</span>)<br>  )<br>  (neck): GlobalAveragePooling(<br>    (gap): AdaptiveAvgPool1d(output_size=<span class="hljs-number">1</span>)<br>  )<br>  (head): MultiLabelLinearClsHead(<br>    (compute_loss): CrossEntropyLoss()<br>    (fc): Linear(in_features=<span class="hljs-number">768</span>, out_features=<span class="hljs-number">11</span>, bias=<span class="hljs-literal">True</span>)<br>  )<br>)<br></code></pre></td></tr></tbody></table></figure><h2 id="ä»£ç ">ä»£ç </h2><p>æ·»åŠ fronzen_stages:</p><blockquote><p>è¯¥å‚æ•°è¡¨ç¤ºä½ æƒ³å†»ç»“å‰å‡ ä¸ª stages çš„æƒé‡ï¼Œswin ç»“æ„åŒ…æ‹¬ 4 stageå†…éƒ¨ç»“æ„(2,2,18,2)</p><p>frozen_stages=-1ï¼Œè¡¨ç¤ºå…¨éƒ¨å¯å­¦ä¹ </p><p>frozen_stage=0ï¼Œè¡¨ç¤ºstemæƒé‡å›ºå®š</p><p>frozen_stages=1ï¼Œè¡¨ç¤º stem å’Œç¬¬ä¸€ä¸ª stage æƒé‡å›ºå®š</p><p>frozen_stages=2ï¼Œè¡¨ç¤º stem å’Œå‰ä¸¤ä¸ª stage æƒé‡å›ºå®š</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">stage = SwinBlockSequence(**_stage_cfg)<br><span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br><span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>stage.<span class="hljs-built_in">eval</span>()<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>param.requires_grad = <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure><p>å…¨éƒ¨ä»£ç </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> deepcopy<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Sequence</span><br><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> mmcv.cnn <span class="hljs-keyword">import</span> build_norm_layer<br><span class="hljs-keyword">from</span> mmcv.cnn.bricks.transformer <span class="hljs-keyword">import</span> FFN<br><span class="hljs-keyword">from</span> mmcv.cnn.utils.weight_init <span class="hljs-keyword">import</span> trunc_normal_<br><span class="hljs-keyword">from</span> mmcv.runner.base_module <span class="hljs-keyword">import</span> BaseModule, ModuleList<br><br><span class="hljs-keyword">from</span> ..builder <span class="hljs-keyword">import</span> BACKBONES<br><span class="hljs-keyword">from</span> ..utils <span class="hljs-keyword">import</span> PatchEmbed, PatchMerging, ShiftWindowMSA<br><span class="hljs-keyword">from</span> .base_backbone <span class="hljs-keyword">import</span> BaseBackbone<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlock</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Swin Transformer block.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        window_size (int, optional): The height and width of the window.</span><br><span class="hljs-string">            Defaults to 7.</span><br><span class="hljs-string">        shift (bool, optional): Shift the attention window or not.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        ffn_ratio (float, optional): The expansion ratio of feedforward network</span><br><span class="hljs-string">            hidden layer channels. Defaults to 4.</span><br><span class="hljs-string">        drop_path (float, optional): The drop path rate after attention and</span><br><span class="hljs-string">            ffn. Defaults to 0.</span><br><span class="hljs-string">        attn_cfgs (dict, optional): The extra config of Shift Window-MSA.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        ffn_cfgs (dict, optional): The extra config of FFN.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        norm_cfg (dict, optional): The config of norm layers.</span><br><span class="hljs-string">            Defaults to dict(type='LN').</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 window_size=<span class="hljs-number">7</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 shift=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_ratio=<span class="hljs-number">4.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 attn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 ffn_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br><br>        <span class="hljs-built_in">super</span>(SwinBlock, self).__init__(init_cfg)<br><br>        _attn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>            <span class="hljs-string">'num_heads'</span>: num_heads,<br>            <span class="hljs-string">'shift_size'</span>: window_size // <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> shift <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'window_size'</span>: window_size,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>            **attn_cfgs<br>        }<br>        self.norm1 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.attn = ShiftWindowMSA(**_attn_cfgs)<br><br>        _ffn_cfgs = {<br>            <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>            <span class="hljs-string">'feedforward_channels'</span>: <span class="hljs-built_in">int</span>(embed_dims * ffn_ratio),<br>            <span class="hljs-string">'num_fcs'</span>: <span class="hljs-number">2</span>,<br>            <span class="hljs-string">'ffn_drop'</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">'dropout_layer'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'DropPath'</span>, drop_prob=drop_path),<br>            <span class="hljs-string">'act_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'GELU'</span>),<br>            **ffn_cfgs<br>        }<br>        self.norm2 = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        self.ffn = FFN(**_ffn_cfgs)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        identity = x<br>        x = self.norm1(x)<br>        x = self.attn(x)<br>        x = x + identity<br><br>        identity = x<br>        x = self.norm2(x)<br>        x = self.ffn(x, identity=identity)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinBlockSequence</span>(<span class="hljs-params">BaseModule</span>):</span><br>    <span class="hljs-string">"""Module with successive Swin Transformer blocks and downsample layer.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        embed_dims (int): Number of input channels.</span><br><span class="hljs-string">        input_resolution (Tuple[int, int]): The resolution of the input feature</span><br><span class="hljs-string">            map.</span><br><span class="hljs-string">        depth (int): Number of successive swin transformer blocks.</span><br><span class="hljs-string">        num_heads (int): Number of attention heads.</span><br><span class="hljs-string">        downsample (bool, optional): Downsample the output of blocks by patch</span><br><span class="hljs-string">            merging. Defaults to False.</span><br><span class="hljs-string">        downsample_cfg (dict, optional): The extra config of the patch merging</span><br><span class="hljs-string">            layer. Defaults to empty dict.</span><br><span class="hljs-string">        drop_paths (Sequence[float] | float, optional): The drop path rate in</span><br><span class="hljs-string">            each block. Defaults to 0.</span><br><span class="hljs-string">        block_cfgs (Sequence[dict] | dict, optional): The extra config of each</span><br><span class="hljs-string">            block. Defaults to empty dicts.</span><br><span class="hljs-string">        auto_pad (bool, optional): Auto pad the feature map to be divisible by</span><br><span class="hljs-string">            window_size, Defaults to False.</span><br><span class="hljs-string">        init_cfg (dict, optional): The extra config for initialization.</span><br><span class="hljs-string">            Default: None.</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 embed_dims,</span></span><br><span class="hljs-params"><span class="hljs-function">                 input_resolution,</span></span><br><span class="hljs-params"><span class="hljs-function">                 depth,</span></span><br><span class="hljs-params"><span class="hljs-function">                 num_heads,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 downsample_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_paths=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 block_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>().__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(drop_paths, <span class="hljs-type">Sequence</span>):<br>            drop_paths = [drop_paths] * depth<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(block_cfgs, <span class="hljs-type">Sequence</span>):<br>            block_cfg = [deepcopy(block_cfgs) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth)]<br><br>        self.blocks = ModuleList()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(depth):<br>            _block_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'shift'</span>: <span class="hljs-literal">False</span> <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">True</span>,<br>                <span class="hljs-string">'drop_path'</span>: drop_paths[i],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **block_cfg[i]<br>            }<br>            block = SwinBlock(**_block_cfg)<br>            self.blocks.append(block)<br><br>        <span class="hljs-keyword">if</span> downsample:<br>            _downsample_cfg = {<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'in_channels'</span>: embed_dims,<br>                <span class="hljs-string">'expansion_ratio'</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-string">'norm_cfg'</span>: <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>                **downsample_cfg<br>            }<br>            self.downsample = PatchMerging(**_downsample_cfg)<br>        <span class="hljs-keyword">else</span>:<br>            self.downsample = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> self.blocks:<br>            x = block(x)<br><br>        <span class="hljs-keyword">if</span> self.downsample:<br>            x = self.downsample(x)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-meta">@BACKBONES.register_module()</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwinTransformer</span>(<span class="hljs-params">BaseBackbone</span>):</span><br>    <span class="hljs-string">""" Swin Transformer</span><br><span class="hljs-string">    A PyTorch implement of : `Swin Transformer:</span><br><span class="hljs-string">    Hierarchical Vision Transformer using Shifted Windows`  -</span><br><span class="hljs-string">        https://arxiv.org/abs/2103.14030</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Inspiration from</span><br><span class="hljs-string">    https://github.com/microsoft/Swin-Transformer</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        arch (str | dict): Swin Transformer architecture</span><br><span class="hljs-string">            Defaults to 'T'.</span><br><span class="hljs-string">        img_size (int | tuple): The size of input image.</span><br><span class="hljs-string">            Defaults to 224.</span><br><span class="hljs-string">        in_channels (int): The num of input channels.</span><br><span class="hljs-string">            Defaults to 3.</span><br><span class="hljs-string">        drop_rate (float): Dropout rate after embedding.</span><br><span class="hljs-string">            Defaults to 0.</span><br><span class="hljs-string">        drop_path_rate (float): Stochastic depth rate.</span><br><span class="hljs-string">            Defaults to 0.1.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        # add attr</span><br><span class="hljs-string">        frozen_stages: defaults-1 dont freeze,0: all freeze,other: frozen_stages stages to freeze</span><br><span class="hljs-string"></span><br><span class="hljs-string">        use_abs_pos_embed (bool): If True, add absolute position embedding to</span><br><span class="hljs-string">            the patch embedding. Defaults to False.</span><br><span class="hljs-string">        auto_pad (bool): If True, auto pad feature map to fit window_size.</span><br><span class="hljs-string">            Defaults to False.</span><br><span class="hljs-string">        norm_cfg (dict, optional): Config dict for normalization layer at end</span><br><span class="hljs-string">            of backone. Defaults to dict(type='LN')</span><br><span class="hljs-string">        stage_cfgs (Sequence | dict, optional): Extra config dict for each</span><br><span class="hljs-string">            stage. Defaults to empty dict.</span><br><span class="hljs-string">        patch_cfg (dict, optional): Extra config dict for patch embedding.</span><br><span class="hljs-string">            Defaults to empty dict.</span><br><span class="hljs-string">        init_cfg (dict, optional): The Config for initialization.</span><br><span class="hljs-string">            Defaults to None.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Examples:</span><br><span class="hljs-string">        &gt;&gt;&gt; from mmcls.models import SwinTransformer</span><br><span class="hljs-string">        &gt;&gt;&gt; import torch</span><br><span class="hljs-string">        &gt;&gt;&gt; extra_config = dict(</span><br><span class="hljs-string">        &gt;&gt;&gt;     arch='tiny',</span><br><span class="hljs-string">        &gt;&gt;&gt;     stage_cfgs=dict(downsample_cfg={'kernel_size': 3,</span><br><span class="hljs-string">        &gt;&gt;&gt;                                     'expansion_ratio': 3}),</span><br><span class="hljs-string">        &gt;&gt;&gt;     auto_pad=True)</span><br><span class="hljs-string">        &gt;&gt;&gt; self = SwinTransformer(**extra_config)</span><br><span class="hljs-string">        &gt;&gt;&gt; inputs = torch.rand(1, 3, 224, 224)</span><br><span class="hljs-string">        &gt;&gt;&gt; output = self.forward(inputs)</span><br><span class="hljs-string">        &gt;&gt;&gt; print(output.shape)</span><br><span class="hljs-string">        (1, 2592, 4)</span><br><span class="hljs-string">    """</span><br>    arch_zoo = {<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'t'</span>, <span class="hljs-string">'tiny'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'s'</span>, <span class="hljs-string">'small'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">96</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'b'</span>, <span class="hljs-string">'base'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">128</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>]}),<br>        **<span class="hljs-built_in">dict</span>.fromkeys([<span class="hljs-string">'l'</span>, <span class="hljs-string">'large'</span>],<br>                        {<span class="hljs-string">'embed_dims'</span>: <span class="hljs-number">192</span>,<br>                         <span class="hljs-string">'depths'</span>:     [<span class="hljs-number">2</span>,  <span class="hljs-number">2</span>, <span class="hljs-number">18</span>,  <span class="hljs-number">2</span>],<br>                         <span class="hljs-string">'num_heads'</span>:  [<span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>, <span class="hljs-number">48</span>]}),<br>    }  <span class="hljs-comment"># yapf: disable</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self,</span></span><br><span class="hljs-params"><span class="hljs-function">                 arch=<span class="hljs-string">'T'</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 img_size=<span class="hljs-number">224</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 in_channels=<span class="hljs-number">3</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_rate=<span class="hljs-number">0.</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 drop_path_rate=<span class="hljs-number">0.1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 frozen_stages=-<span class="hljs-number">1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 use_abs_pos_embed=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 auto_pad=<span class="hljs-literal">False</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">                 norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"><span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 stage_cfgs=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 patch_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-params"></span>),</span></span><br><span class="hljs-params"><span class="hljs-function">                 init_cfg=<span class="hljs-literal">None</span></span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).__init__(init_cfg)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">str</span>):<br>            arch = arch.lower()<br>            <span class="hljs-keyword">assert</span> arch <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span>(self.arch_zoo), \<br>                <span class="hljs-string">f'Arch <span class="hljs-subst">{arch}</span> is not in default archs <span class="hljs-subst">{<span class="hljs-built_in">set</span>(self.arch_zoo)}</span>'</span><br>            self.arch_settings = self.arch_zoo[arch]<br>        <span class="hljs-keyword">else</span>:<br>            essential_keys = {<span class="hljs-string">'embed_dims'</span>, <span class="hljs-string">'depths'</span>, <span class="hljs-string">'num_head'</span>}<br>            <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(arch, <span class="hljs-built_in">dict</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">set</span>(arch) == essential_keys, \<br>                <span class="hljs-string">f'Custom arch needs a dict with keys <span class="hljs-subst">{essential_keys}</span>'</span><br>            self.arch_settings = arch<br><br>        self.embed_dims = self.arch_settings[<span class="hljs-string">'embed_dims'</span>]<br>        self.depths = self.arch_settings[<span class="hljs-string">'depths'</span>]<br>        self.num_heads = self.arch_settings[<span class="hljs-string">'num_heads'</span>]<br>        self.num_layers = <span class="hljs-built_in">len</span>(self.depths)<br>        self.use_abs_pos_embed = use_abs_pos_embed<br>        self.auto_pad = auto_pad<br><br>        _patch_cfg = <span class="hljs-built_in">dict</span>(<br>            img_size=img_size,<br>            in_channels=in_channels,<br>            embed_dims=self.embed_dims,<br>            conv_cfg=<span class="hljs-built_in">dict</span>(<br>                <span class="hljs-built_in">type</span>=<span class="hljs-string">'Conv2d'</span>, kernel_size=<span class="hljs-number">4</span>, stride=<span class="hljs-number">4</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>),<br>            norm_cfg=<span class="hljs-built_in">dict</span>(<span class="hljs-built_in">type</span>=<span class="hljs-string">'LN'</span>),<br>            **patch_cfg)<br>        self.patch_embed = PatchEmbed(**_patch_cfg)<br>        num_patches = self.patch_embed.num_patches<br>        patches_resolution = self.patch_embed.patches_resolution<br>        self.patches_resolution = patches_resolution<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            self.absolute_pos_embed = nn.Parameter(<br>                torch.zeros(<span class="hljs-number">1</span>, num_patches, self.embed_dims))<br><br>        self.drop_after_pos = nn.Dropout(p=drop_rate)<br><br>        <span class="hljs-comment"># stochastic depth</span><br>        total_depth = <span class="hljs-built_in">sum</span>(self.depths)<br>        dpr = [<br>            x.item() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> torch.linspace(<span class="hljs-number">0</span>, drop_path_rate, total_depth)<br>        ]  <span class="hljs-comment"># stochastic depth decay rule</span><br><br>        self.stages = ModuleList()<br>        embed_dims = self.embed_dims<br>        input_resolution = patches_resolution<br>        <span class="hljs-keyword">for</span> i, (depth,<br>                num_heads) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(self.depths, self.num_heads)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(stage_cfgs, <span class="hljs-type">Sequence</span>):<br>                stage_cfg = stage_cfgs[i]<br>            <span class="hljs-keyword">else</span>:<br>                stage_cfg = deepcopy(stage_cfgs)<br>            downsample = <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> i &lt; self.num_layers - <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span><br>            _stage_cfg = {<br>                <span class="hljs-string">'embed_dims'</span>: embed_dims,<br>                <span class="hljs-string">'depth'</span>: depth,<br>                <span class="hljs-string">'num_heads'</span>: num_heads,<br>                <span class="hljs-string">'downsample'</span>: downsample,<br>                <span class="hljs-string">'input_resolution'</span>: input_resolution,<br>                <span class="hljs-string">'drop_paths'</span>: dpr[:depth],<br>                <span class="hljs-string">'auto_pad'</span>: auto_pad,<br>                **stage_cfg<br>            }<br><br>            stage = SwinBlockSequence(**_stage_cfg)<br>            <span class="hljs-comment"># å†»ç»“æŸå‡ å±‚frozen_stages</span><br>            <span class="hljs-keyword">if</span>(frozen_stages==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,frozen_stages))):<br>                stage.<span class="hljs-built_in">eval</span>()<br>                <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> stage.parameters():<br>                    param.requires_grad = <span class="hljs-literal">False</span><br>            <br>            self.stages.append(stage)<br><br>            dpr = dpr[depth:]<br>            <span class="hljs-keyword">if</span> downsample:<br>                embed_dims = stage.downsample.out_channels<br>                input_resolution = stage.downsample.output_resolution<br>            <br><br>        <span class="hljs-keyword">if</span> norm_cfg <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            self.norm = build_norm_layer(norm_cfg, embed_dims)[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            self.norm = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init_weights</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(SwinTransformer, self).init_weights()<br><br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            trunc_normal_(self.absolute_pos_embed, std=<span class="hljs-number">0.02</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><br>        x = self.patch_embed(x)<br>        <span class="hljs-keyword">if</span> self.use_abs_pos_embed:<br>            x = x + self.absolute_pos_embed<br>        x = self.drop_after_pos(x)<br><br>        <span class="hljs-keyword">for</span> stage <span class="hljs-keyword">in</span> self.stages:<br>            x = stage(x)<br><br>        x = self.norm(x) <span class="hljs-keyword">if</span> self.norm <span class="hljs-keyword">else</span> x<br><br>        <span class="hljs-keyword">return</span> x.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç½‘ç»œæ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> swin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer40 æœ€å°çš„kä¸ªæ•°</title>
      <link href="/2021/08/24/leetcode/leetcode-offer40/"/>
      <url>/2021/08/24/leetcode/leetcode-offer40/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€å°çš„kä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•´æ•°æ•°ç»„ arr ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„ k ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥4ã€5ã€1ã€6ã€2ã€7ã€3ã€8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1ã€2ã€3ã€4ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[3,2,1]</span>, k = 2<br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2]</span> æˆ–è€… <span class="hljs-comment">[2,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[0,1,2,1]</span>, k = 1<br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= k &lt;= arr.length &lt;= 10000</li><li>0 &lt;= arr[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨å°è£…çš„sortedå‡½æ•°ï¼Œè¿™ç§æ–¹æ³•éœ€è¦æ’åºO(NlogN)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(arr)[<span class="hljs-number">0</span>:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯é‡‡å–å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œå¯ä»¥å°†å¤æ‚åº¦é™åˆ°O(N)<br>é¦–å…ˆå¤ä¹ ä¸€ä¸‹å¿«é€Ÿæ’åºçš„ä»£ç ã€‚Kç¥çš„æ–¹æ³•æ˜¯i&lt;jçš„æƒ…å†µä¸‹å°±è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ç§æ–¹å¼è¦æ³¨æ„jçš„æ”¶ç¼©è¦åœ¨içš„æ‰©å¼ ä¹‹å‰ï¼›è¿™æ ·å¯ä»¥ä¿è¯æœ€ååœæ­¢çš„æ—¶å€™iï¼ŒjæŒ‡å‘éƒ½æ˜¯æ¯”è¾ƒå°çš„é‚£ä¸ªæ•°å€¼ã€‚(æœ€åäº¤æ¢æ—¶i,jéƒ½å¯ä»¥ï¼Œå› ä¸ºç»“æŸæ—¶ä¸€å®šæœ‰iå’Œjç›¸ç­‰)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (i&lt;j):<br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>        <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>æœ€åäº¤æ¢çš„æ—¶å€™åªèƒ½æ˜¯jå¹¶ä¸”ä¸€å®šè¦ä¿è¯iå’Œjä¸å¯è¶Šç•Œï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨iå’Œjåˆ°ä¸´ç•Œå€¼çš„æ—¶å€™å°±ä¸ç”¨ç§»åŠ¨äº†</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>    <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>    pivot = arr[l]<br>    i,j = l,r<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">True</span>):<br>        <span class="hljs-keyword">while</span> j&gt;l <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <br>        <span class="hljs-keyword">while</span> i&lt;r <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>   <br>        <span class="hljs-keyword">if</span>(i&gt;=j):<span class="hljs-keyword">break</span><br>        arr[i],arr[j] = arr[j],arr[i]<br>    arr[l], arr[j] = arr[j], arr[l]<br>    quicksort(l,j-<span class="hljs-number">1</span>)<br>    quicksort(j+<span class="hljs-number">1</span>,r)<br></code></pre></td></tr></tbody></table></figure><p>é‚£ä¹ˆè¿™ä¸ªé¢˜ç›®å€Ÿç”¨è¿™ç§æ€æƒ³åªè¦æ‰¾åˆ°è¿™ä¸ªpivotä»–åŸæœ¬æ‰€åœ¨çš„ä½ç½®ä¸‹æ ‡ä¸ºkï¼Œé‚£ä¹ˆä»–çš„å·¦è¾¹çš„éƒ¨åˆ†å°±æ˜¯è¦æ‰¾çš„éƒ¨åˆ†å“¦~~ğŸ˜‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLeastNumbers</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">l,r</span>):</span><br>            <span class="hljs-keyword">if</span> l&gt;=r: <span class="hljs-keyword">return</span><br>            pivot = arr[l]<br>            i,j = l,r<br>            <span class="hljs-keyword">while</span> (i&lt;j):<br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[j]&gt;=pivot:j -= <span class="hljs-number">1</span> <span class="hljs-comment">#åœ¨i&lt;jçš„çº¦æŸä¸‹ jåœ¨içš„ç§»åŠ¨å‰é¢</span><br>                <span class="hljs-keyword">while</span> i&lt;j <span class="hljs-keyword">and</span> arr[i]&lt;=pivot:i += <span class="hljs-number">1</span>         <br>                arr[i],arr[j] = arr[j],arr[i]<br>            arr[l], arr[j] = arr[j], arr[l]<br>            <span class="hljs-keyword">if</span>(k&gt;j):quicksort(j+<span class="hljs-number">1</span>,r)<br>            <span class="hljs-keyword">if</span>(k&lt;j):quicksort(l,j-<span class="hljs-number">1</span>)            <br>        quicksort(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> arr[:k]<br></code></pre></td></tr></tbody></table></figure><p>è¿™ç§æ–¹æ³•çš„å¤æ‚åº¦æ˜¯N+N/2+N/4+N/8+â€¦ = N(1/2+1/4+1/8+â€¦) ~ 2N</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¿«é€Ÿæ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å¿«é€Ÿæ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢ä¸­çš„emoji</title>
      <link href="/2021/08/24/config/hexo-emoji/"/>
      <url>/2021/08/24/config/hexo-emoji/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨åšå®¢ä¸­ä½¿ç”¨emojiï¼Œå¯å¯çˆ±çˆ±å°è¡¨æƒ…ğŸ˜</p></blockquote><blockquote><p>ç›¸å…³é…ç½®å‚è§è¿™ä¸ªåšå®¢å“Ÿ <a href="https://www.zywvvd.com/2021/08/23/hexo/19%20hexo-emoji/hexo-emoji/">Hexo -19- æ·»åŠ emojiè¡¨æƒ…</a><br>å¯ä»¥åœ¨è¿™ä¸¤ä¸ªç½‘ç«™çœ‹çœ‹æœ‰å“ªäº›å°è¡¨æƒ…<br><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">https://www.webfx.com/tools/emoji-cheat-sheet/</a><br><a href="https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/">https://www.zywvvd.com/2021/08/13/git/git-emoji/git-emoji/</a></p></blockquote><h2 id="å®‰è£…æ¸²æŸ“å™¨">å®‰è£…æ¸²æŸ“å™¨</h2><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">npm un hexo-renderer-marked <span class="hljs-comment">--save</span><br>npm i hexo-renderer-markdown-<span class="hljs-keyword">it</span> <span class="hljs-comment">--save</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>åœ¨_config.ymlæ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹æ®µä»£ç </p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Markdown-it config</span><br><span class="hljs-comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">render:</span><br>    <span class="hljs-attr">html:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">xhtmlOut:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">linkify:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">typographer:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">quotes:</span> <span class="hljs-string">'â€œâ€â€˜â€™'</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-abbr</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-footnote</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-ins</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sup</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-emoji</span>  <span class="hljs-comment"># add emoji</span><br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çš„æ—¶å€™å°±ç›´æ¥åœ¨mdæ–‡ä»¶ä¸­ç”¨ä¸¤ä¸ªå¼•å·ä¸­é—´å¡«å†™emojiçš„åç§°å³å¯å•¦ :happy:</p>]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YOLOv1</title>
      <link href="/2021/08/21/deep_learning/yolov1/"/>
      <url>/2021/08/21/deep_learning/yolov1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>YOLOç³»åˆ—æ˜¯åŸºäºæ·±åº¦å­¦ä¹ çš„å›å½’æ–¹æ³•ã€‚YOLOï¼šyou only look onceçš„ä¼˜ç‚¹æ˜¯å®æ—¶å¿«é€Ÿç›®æ ‡æ£€æµ‹ã€‚ä¸€ç›´éƒ½å¾ˆæƒ³æŠŠYOLOç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹ã€‚åœ¨æ­¤ï¼Œè®°å½•ä¸‹ç›¸å…³çš„çŸ¥è¯†å’Œä¸ªäººç†è§£ã€‚åšç¬”è®°ä¹Ÿç®—æ˜¯ç£ä¿ƒæˆ‘å¥½å¥½çš„æ•´ç†ç›¸å…³å†…å®¹å­ï¼okå¼€å§‹ï¼ğŸ˜‰</p></blockquote><blockquote><p>å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/136382095">https://zhuanlan.zhihu.com/p/136382095</a><br><a href="https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw">https://mp.weixin.qq.com/s/df1JaGtnoEY4FQford4UIw</a></p></blockquote><h2 id="YOLO-å’Œ-Faster-R-CNN">YOLO å’Œ Faster R-CNN</h2><p>ä¸¤ä¸ªç½‘ç»œçš„å·®å¼‚æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li><p>Yoloæ²¡æœ‰æ˜¾ç¤ºæ±‚å–region proposalçš„è¿‡ç¨‹ï¼Œè™½ç„¶Faster R-CNNä¸­çš„RPNäºFast R-CNNå…±äº«å·ç§¯å±‚ï¼Œä½†æ˜¯åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯éœ€è¦åå¤çš„è®­ç»ƒRPNäºFast R-CNNï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§æ–¹å¼è¿˜æ˜¯éœ€è¦â€look twiceâ€œ ï¼šç¡®å®šå€™é€‰æ¡†å’Œåˆ†ç±»ï¼›è€ŒYoloç³»åˆ—åªéœ€è¦â€look onceâ€œ</p><blockquote><p>å…³äºFaster R-CNNçš„çŸ¥è¯†åç»­å†å¡«å‘â€¦</p></blockquote></li><li><p>Yoloå°†æ£€æµ‹ç»Ÿä¸€ä¸ºä¸€ä¸ªå›å½’é—®é¢˜ã€‚è€ŒR-CNNå°†æ£€æµ‹ç»“æœåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œæ±‚è§£ï¼šåˆ†ç±»<code>ç‰©ä½“çš„ç±»åˆ«</code> ï¼Œ å›å½’<code>ç‰©ä½“çš„bounding  box</code></p></li></ol><h2 id="YOLOv1">YOLOv1</h2><h3 id="ç»¼è¿°">ç»¼è¿°</h3><p><strong>è®ºæ–‡ä¸‹è½½ï¼š</strong> <a href="http://arxiv.org/abs/1506.02640">http://arxiv.org/abs/1506.02640</a></p><p><strong>ä»£ç ä¸‹è½½ï¼š</strong> <a href="https://github.com/pjreddie/darknet">https://github.com/pjreddie/darknet</a></p><p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†æ•´å¼ å›¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼ˆä¸Faster-RCNNç±»ä¼¼ï¼‰ï¼Œç›´æ¥åœ¨è¾“å‡ºå±‚å¯¹BBoxçš„ä½ç½®å’Œç±»åˆ«è¿›è¡Œå›å½’ã€‚</p><h3 id="è®ºæ–‡">è®ºæ–‡</h3><details><summary> yolov1 è®ºæ–‡ï¼šYou Only Look Once:Unified, Real-Time Object Detection</summary><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/yolov1.pdf" width="100%" height="650"></iframe></details><p>å®ç°æ–¹æ³•ï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic1.png" alt=""></p><ul><li><p>é¦–å…ˆå°†ä¸€å¹…å›¾åƒåˆ†æˆS*Sä¸ªç½‘æ ¼ï¼ˆgrid cellï¼‰,å¦‚æœæŸä¸ªç‰©ä½“çš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç‰©ä½“ã€‚</p></li><li><p>æ¯ä¸ªç½‘æ ¼éœ€è¦é¢„æµ‹Bä¸ªè¾¹ç•Œæ¡†(BBox)çš„ä½ç½®ä¿¡æ¯å’Œå¯¹åº”çš„ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰;ä¸€ä¸ªBBoxå¯¹åº”å››ä¸ªä½ç½®ä¿¡æ¯å’Œä¸€ä¸ªconfidenceä¿¡æ¯ï¼Œconfidenceè¡¨ç¤ºæ‰€é¢„æµ‹çš„Boxä¸­å«æœ‰objextçš„ç½®ä¿¡åº¦å’Œboxçš„é¢„æµ‹æƒ…å†µã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯$conf = Pr(object)\times IOU^{truth}_{pred}$ å¦‚æœæœ‰objectè½åœ¨å…¶ä¸­çš„grid cellé‡Œï¼Œé‚£ä¹ˆç¬¬ä¸€é¡¹ä¸º1å¦åˆ™å–0.</p></blockquote></li></ul><p>æ¯ä¸ªbounding boxè¦é¢„æµ‹(x, y, w, h)å’Œconfidenceå…±5ä¸ªå€¼ï¼Œæ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹ä¸€ä¸ªç±»åˆ«ä¿¡æ¯ï¼Œè®°ä¸ºCç±»ã€‚åˆ™SxSä¸ªç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹Bä¸ªbounding boxè¿˜è¦é¢„æµ‹Cä¸ªcategoriesã€‚åˆ¤æ–­è¿™ä¸ªè½åœ¨æ­¤ç½‘æ ¼çš„ç‰©ä½“æ˜¯cä¸ªç‰©ä½“ä¸­çš„å“ªä¸€ä¸ªç‰©ä½“ã€‚è¾“å‡ºå°±æ˜¯S x S x (5*B+C)çš„ä¸€ä¸ªtensorã€‚ï¼ˆ<strong>æ³¨æ„ï¼šclassä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªç½‘æ ¼çš„ï¼Œconfidenceä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªbounding boxçš„ã€‚</strong>ï¼‰</p><p>ä¸¾ä¾‹è¯´æ˜: åœ¨PASCAL VOCä¸­ï¼Œå›¾åƒè¾“å…¥ä¸º448x448ï¼Œå–S=7ï¼ŒB=2ï¼Œä¸€å…±æœ‰20ä¸ªç±»åˆ«(C=20)ã€‚åˆ™è¾“å‡ºå°±æ˜¯7x7x30çš„ä¸€ä¸ªtensorã€‚*å…¶ä¸­30ä¹Ÿå°±æ˜¯2*5+20ï¼Œæ•´ä¸ªç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/yolov1-pic2.png" alt=""></p><p>åœ¨testçš„æ—¶å€™ï¼Œæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„classä¿¡æ¯ä¸BBoxå¾—åˆ°çš„confidenciä¿¡æ¯ç›¸ä¹˜ï¼Œå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªBBoxçš„class-specific confidence scoreï¼š</p>$$Pr(Class_i \vert Object) \times Pr(Object) \times IOU^{truth}_{pred} = Pr(Class_i) \times IOU^{truth}_{pred}$$<p>å¾—åˆ°æ¯ä¸ªboxçš„class-specific confidence scoreä¹‹åï¼Œè®¾ç½®é˜ˆå€¼ï¼Œè¿‡æ»¤æ‰å¾—åˆ†ä½çš„boxesï¼Œå¯¹ä¿ç•™çš„boxesè¿›è¡ŒNMSå¤„ç†ï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æœã€‚</p><blockquote><p>NMSï¼šnon-maximum suppression éæå¤§æŠ‘åˆ¶ï¼Œå…¶æ“ä½œå³æ˜¯ä»é›†åˆä¸­æ‰¾åˆ°å¾—åˆ†scoreæœ€é«˜çš„å€™é€‰æ¡†ï¼Œä¸å…¶ä»–å€™é€‰æ¡†è®¡ç®—IOUï¼Œåˆ é™¤é‡åˆç‡é«˜çš„å€™é€‰æ¡†ï¼Œå› ä¸ºè¿™äº›å€™é€‰æ¡†å’Œæœ€é«˜scoreçš„æ¡†â€œç«äº‰â€åŒä¸€ä¸ªç‰©ä½“ï¼Œä½†æ˜¯scoreåˆä¸å¤Ÿé«˜ï¼Œæ‰€ä»¥æ˜¯åº”è¯¥è¢«æ·˜æ±°çš„ã€‚ç¡®å®šäº†è¿™ä¸ªæœ€é«˜scoreçš„BBOXä¹‹åå°±å¯ä»¥ä¸è€ƒè™‘ä»–äº†ï¼Œå†ç»§ç»­æ‰¾å¯»æœ€é«˜scoreçš„å€™é€‰æ¡†ï¼ŒæŠŠä¸ä»–ç«äº‰çš„å€™é€‰æ¡†ç»™passæ‰å³å¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p></blockquote><h4 id="æµç¨‹">æµç¨‹</h4><ol><li>è¾“å…¥ä¸€å¼ å›¾åƒå°†å…¶åˆ†ä¸º7*7çš„ç½‘æ ¼</li><li>å¯¹äºæ¯ä¸€ä¸ªç½‘æ ¼,é¢„æµ‹ä¸¤ä¸ªè¾¹æ¡†ï¼›ï¼ˆåŒ…æ‹¬è¾¹æ¡†çš„ç½®ä¿¡åº¦å’Œå…¶å¯¹åº”çš„ç±»åˆ«æ¦‚ç‡ï¼‰</li><li>æ ¹æ®é¢„æµ‹çš„7*7*2çš„ç›®æ ‡çª—å£ï¼Œé¦–å…ˆé€šè¿‡é˜ˆå€¼å»é™¤å¯èƒ½æ€§åœ°çš„çª—å£ï¼Œå†é‡‡ç”¨NMSå»é™¤å†—ä½™çš„çª—å£ã€‚</li></ol><h3 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°</h3><p>æœ€é‡è¦çš„æ˜¯è®¾è®¡æŸå¤±å‡½æ•°ï¼Œä½œè€…ä½¿ç”¨äº†sum-squared error lossï¼ˆ<a href="https://blog.csdn.net/shengyan5515/article/details/84036734">https://blog.csdn.net/shengyan5515/article/details/84036734</a> ï¼‰</p><blockquote><p>å…³äºYOLOçš„æŸå¤±å‡½æ•°ï¼Œé‡‡ç”¨sum-squared erroræ•´åˆlocalization errorï¼ˆbboxesçš„åæ ‡è¯¯å·®ï¼‰å’Œclassification errorï¼Œå…¶ä¸­classification erroråŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ²¡æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯æœ‰åŒ…å«objectçš„boxçš„confidence lossæƒå€¼</p></blockquote><p><img src="https://picture.mulindya.com/yolov1-pic3.png" alt=""></p><h4 id="é—®é¢˜ï¼š">é—®é¢˜ï¼š</h4><ul><li>8ç»´çš„localization error(4*2),å’Œ20ç»´çš„classification erroråŒç­‰é‡è¦æ˜¯ä¸åˆç†çš„</li><li>å¦‚æœä¸€ä¸ªç½‘æ ¼ä¸­æ²¡æœ‰object(å¤§éƒ¨åˆ†),å°†è¿™äº›ç½‘æ ¼çš„boxå¯¹åº”confidenceè®¾ç½®ä¸º0ï¼Œæ˜¯æ¯”è¾ƒâ€œæš´åŠ›â€çš„ï¼Œä¼šè®©lossç‰¹åˆ«å¤§ï¼Œç½‘ç»œä¸ç¨³å®šå¹¶ä¸”ä¸å®¹æ˜“æ”¶æ•›ã€‚</li></ul><h4 id="è§£å†³æ–¹æ¡ˆï¼š">è§£å†³æ–¹æ¡ˆï¼š</h4><ul><li><p>å¯¹äºåæ ‡é¢„æµ‹èµ‹äºˆæ›´å¤§çš„æƒé‡ï¼ˆé‡è§†æ¡†çš„ä½ç½®ï¼‰</p></li><li><p>å¯¹æ²¡æœ‰objectçš„confidence lossï¼Œèµ‹äºˆå°çš„æƒé‡(æ³¨æ„åŠ›è½¬ç§»åˆ°å…¶ä»–åœ°æ–¹)</p></li><li><p>å¯¹å­˜åœ¨objectçš„boxçš„confidence losså’Œç±»åˆ«çš„é¢„æµ‹æƒé‡æ­£å¸¸å–1</p></li></ul><blockquote><p>ä¸ºä»€ä¹ˆç¬¬äºŒé¡¹å‡ºç°äº†æ ¹å·å‘¢ï¼Ÿ</p><p>æ˜¯å› ä¸ºæˆ‘ä»¬çš„è¯¯å·®åº¦é‡ï¥¾ååº”å‡ºå¤§boxçš„å°åå·®è¦å°äºå°boxã€‚ä¸ºäº†é€æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¢„æµ‹ï¦ºè¾¹ç•Œæ¡†çš„å®½åº¦å’Œé«˜åº¦çš„å¹³â½…æ ¹ï¼Œè€Œï¥§æ˜¯ç›´æ¥é¢„æµ‹å®½åº¦å’Œâ¾¼åº¦ã€‚å› ä¸ºæ ¹å·ä¹‹åæ›²çº¿è¶Šå¤§è¶Šå¹³ç¼“ã€‚è¿™æ ·å¯¹å°çš„boxçš„åå·®ç›¸å¯¹æ›´åŠ æ•æ„Ÿã€‚</p></blockquote><p>è§‚å¯ŸæŸå¤±å‡½æ•°å¯ä»¥çœ‹å‡ºï¼š</p><ul><li><p>åªæœ‰åœ¨ç½‘æ ¼ä¸­å­˜åœ¨objectçš„æ—¶å€™æ‰ä¼šå¯¹classification errorè¿›è¡Œè®¡ç®—</p></li><li><p>åªæœ‰å½“æŸä¸ªç½‘æ ¼çš„boxçš„å’Œå¯¹äºçš„ground truth boxæ˜¯è´Ÿè´£å›å½’çš„ï¼Œæ‰ä¼šå¯¹è¿™ä¸ªbox çš„ä½ç½®xywhæŸå¤±è¿›è¡Œè®¡ç®—ï¼Œç¡®å®šå¯¹åº”ground truth boxå°±éœ€è¦å°†è¿™ä¸ªboxä¸è¿™ä¸ªç½‘æ ¼ä¸­çš„æ‰€æœ‰bboxè®¡ç®—IOUï¼Œæœ€å¤§çš„é‚£ä¸ªground truthæ˜¯ç”±è¿™ä¸ªç½‘ç»œè´Ÿè´£é¢„æµ‹çš„ã€‚</p><p>æ¿€æ´»å‡½æ•°ä½¿ç”¨çš„æ˜¯leak reluï¼Œæ¨¡å‹æ˜¯ä½¿ç”¨é¢„è®­ç»ƒçš„Imagenetã€‚</p></li></ul><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ul><li><p>å¿«é€Ÿï¼Œpiplineç®€å•</p></li><li><p>èƒŒæ™¯è¯¯æ£€ç‡ä½</p></li><li><p>é€šç”¨æ€§å¼ºï¼Œå¯¹è‰ºæœ¯å“ä¸­çš„ç‰©ä½“ä¹Ÿå¯ä»¥æ£€æµ‹ï¼Œå¯¹éè‡ªç„¶çš„å›¾åƒç‰©ä½“çš„æ£€æµ‹ç‡æ¯”ä¸€èˆ¬çš„DOMï¼ŒR-CNNéƒ½è¦å¥½å¾ˆå¤š</p></li></ul><h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3><ul><li>ç”±äºè¾“å‡ºå±‚æ˜¯å…¨è¿æ¥å±‚ï¼Œå› æ­¤åœ¨æ£€æµ‹æ—¶ï¼ŒYOLOè®­ç»ƒæ¨¡å‹åªèƒ½æ”¯æŒä¸è®­ç»ƒå›¾åƒåˆ†è¾¨ç‡ç›¸åŒçš„å›¾åƒ</li><li>æ¯ä¸ªæ ¼å­å¯ä»¥é¢„æµ‹Bä¸ªBboxï¼Œä½†æ˜¯æœ€ç»ˆåªèƒ½é€‰æ‹©IOUæœ€é«˜çš„BBoxä½œä¸ºç‰©ä½“æ£€æµ‹ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå„è‡ªåªèƒ½æœ€å¤šé¢„æµ‹å‡ºä¸€ä¸ªç‰©ä½“ï¼›å½“ç‰©ä½“æ¯”è¾ƒå°æˆ–è€…åˆ†å¸ƒå¯†é›†çš„æ—¶å€™ä¹Ÿåªèƒ½æ£€æµ‹å‡ºä¸€ä¸ªã€‚</li><li>åœ¨lossçš„æ±‚è§£æ–¹ç¨‹ä¸­ï¼Œå¤§ç›®æ ‡å’Œå°ç›®æ ‡çš„IOUè¯¯å·®åœ¨lossè®¡ç®—ä¸Šæ˜¯æ¥è¿‘çš„ï¼ˆå³ä½¿ç”¨äº†å¹³æ–¹æ ¹ç¼“è§£ï¼‰ï¼Œå› æ­¤å¯¹äºå°ç‰©ä½“çš„æ£€æµ‹å‡†ç¡®æ€§ä¸é«˜ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
          <category> ç›®æ ‡æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
            <tag> yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer19</title>
      <link href="/2021/08/21/leetcode/leetcode-offer19/"/>
      <url>/2021/08/21/leetcode/leetcode-offer19/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…å«â€™. â€˜å’Œâ€™<em>â€˜çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦â€™.â€˜è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œâ€™</em>'è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆå«0æ¬¡ï¼‰ã€‚åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"aaa"ä¸æ¨¡å¼"a.a"å’Œ"ab<em>ac</em>a"åŒ¹é…ï¼Œä½†ä¸"aa.a"å’Œ"ab*a"å‡ä¸åŒ¹é…ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"aa"</span><br>p = <span class="hljs-string">"a"</span><br><span class="hljs-section">è¾“å‡º: false</span><br><span class="hljs-section">è§£é‡Š: "a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aa"</span><br>p = <span class="hljs-comment">"a*"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ <span class="hljs-string">'a'</span>ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² <span class="hljs-comment">"aa"</span> å¯è¢«è§†ä¸º <span class="hljs-string">'a'</span> é‡å¤äº†ä¸€æ¬¡ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"ab"</span><br>p = <span class="hljs-string">".*"</span><br><span class="hljs-section">è¾“å‡º: true</span><br><span class="hljs-section">è§£é‡Š: ".*" è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ'*'ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ'.'ï¼‰ã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight smalltalk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">è¾“å…¥:<br>s = <span class="hljs-comment">"aab"</span><br>p = <span class="hljs-comment">"c*a*b"</span><br>è¾“å‡º: <span class="hljs-keyword">true</span><br>è§£é‡Š:&nbsp;å› ä¸º <span class="hljs-string">'*'</span> è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ <span class="hljs-string">'c'</span> ä¸º <span class="hljs-number">0</span> ä¸ª, <span class="hljs-string">'a'</span> è¢«é‡å¤ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² <span class="hljs-comment">"aab"</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-5ï¼š">ç¤ºä¾‹ 5ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥:</span><br>s = <span class="hljs-string">"mississippi"</span><br>p = <span class="hljs-string">"mis*is*p*."</span><br><span class="hljs-section">è¾“å‡º: false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>s</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ã€‚</li><li><code>p</code> å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» <code>a-z</code> çš„å°å†™å­—æ¯ä»¥åŠå­—ç¬¦ <code>.</code> å’Œ <code>*</code>ï¼Œæ— è¿ç»­çš„ <code>'*'</code>ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯å»ºç«‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚dp[i][j]è¡¨ç¤ºå‰jä¸ªæ¨¡å¼ä¸²åŒ¹é…sçš„å‰iä¸ªå­—æ¯çš„åŒ¹é…æƒ…å†µã€‚</p><p>é‚£ä¹ˆå°±è¦åˆ†æƒ…å†µè®¨è®ºäº†ï¼Œä¸€ç§æ˜¯p[j]æ˜¯<code>å­—æ¯</code>ï¼Œç¬¬äºŒæ˜¯<code> .</code> ,ç¬¬ä¸‰æ˜¯ <code>*</code>.</p><ol><li><p><code>å­—æ¯</code>:ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœ$p[j]==s[i]$å°±å¯ä»¥è½¬ç§» $dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code> .</code> : å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ç›´æ¥è½¬ç§»$dp[i][j] = dp[i-1][j-1]$</p></li><li><p><code>*</code>ï¼šå¦‚æœå‰ä¸€ä¸ªå­—ç¬¦$p[j-1]==s[i]$ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>*</code>å¯ä»¥é€‰æ‹©æ˜¯åŒ¹é…sçš„<strong>ä¸€ä¸ªå…ƒç´ è¿˜æ˜¯å¤šä¸ªå…ƒç´ </strong></p><p>$dp[i][j] = dp[i][j-2] \quad or \quad dp[i-1][j]$</p></li></ol><p>å¦‚æœå…ƒç´ ä¸ç›¸ç­‰ï¼Œå°±ç›´æ¥å‘å‰åŒ¹é…ï¼ˆ0æ¬¡åŒ¹é…ï¼‰$dp[i][j-2]$</p><blockquote><p>$dp[i][j-2]$æ˜¯åŒ¹é…0ä¸ªï¼›$dp[i-1][j]$æ˜¯åŒ¹é…å¤šä¸ªï¼Œå¿½ç•¥iå…ƒç´ ç»§ç»­å‘å‰æŸ¥æ‰¾ï¼›$dp[i-1][j-2]$æ˜¯åŒ¹é…1ä¸ªæ˜¯åŒ…å«äºå¤šä¸ª$dp[i-1][j]$ä¸­</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isMatch</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, p: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        s = <span class="hljs-string">" "</span>+s<br>        p = <span class="hljs-string">" "</span>+p<br>        dp = [[<span class="hljs-literal">False</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(p))] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s))]<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(p)):<br>                <span class="hljs-keyword">if</span>(p[j]!=<span class="hljs-string">'*'</span>):<br>                    <span class="hljs-keyword">if</span>((p[j]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>) <span class="hljs-keyword">or</span> p[j]==s[i]):<br>                        dp[i][j] = dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">if</span>(p[j-<span class="hljs-number">1</span>]==s[i] <span class="hljs-keyword">or</span> (p[j-<span class="hljs-number">1</span>]==<span class="hljs-string">'.'</span> <span class="hljs-keyword">and</span> s[i]!=<span class="hljs-string">" "</span>)): dp[i][j] = dp[i][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">2</span>] <span class="hljs-keyword">or</span> dp[i-<span class="hljs-number">1</span>][j] <br>                    <span class="hljs-comment">#dp[i][j] = dp[i][j-2] or dp[i-1][j] #ç›´æ¥0æ¬¡æˆ–è€…å¤šæ¬¡</span><br>                    <span class="hljs-keyword">else</span>:dp[i][j] = dp[i][j-<span class="hljs-number">2</span>]<br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>][<span class="hljs-built_in">len</span>(p)-<span class="hljs-number">1</span>]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer18 åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</title>
      <link href="/2021/08/21/leetcode/leetcode-offer18/"/>
      <url>/2021/08/21/leetcode/leetcode-offer18/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚è¿”å›åˆ é™¤åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚<br>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 5</span><br><span class="hljs-section">è¾“å‡º: [4,1,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;5&nbsp;çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 1 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: head = [4,5,1,9], val = 1</span><br><span class="hljs-section">è¾“å‡º: [4,5,9]</span><br><span class="hljs-section">è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º&nbsp;1&nbsp;çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 5 -&gt; 9.</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>é¢˜ç›®ä¿è¯é“¾è¡¨ä¸­èŠ‚ç‚¹çš„å€¼äº’ä¸ç›¸åŒ</li><li>è‹¥ä½¿ç”¨ C æˆ– C++ è¯­è¨€ï¼Œä½ ä¸éœ€è¦ free æˆ– delete è¢«åˆ é™¤çš„èŠ‚ç‚¹</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¸¸è§„æ“ä½œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteNode</span>(<span class="hljs-params">self, head: ListNode, val: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        p = head<br>        <span class="hljs-keyword">if</span>(head.val==val):<span class="hljs-keyword">return</span> p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span>(p.<span class="hljs-built_in">next</span>):<br>            <span class="hljs-keyword">if</span>(p.<span class="hljs-built_in">next</span>.val == val):<br>                p.<span class="hljs-built_in">next</span> = p.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>                <span class="hljs-keyword">return</span> head<br>            p = p.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer24 åè½¬é“¾è¡¨</title>
      <link href="/2021/08/21/leetcode/leetcode-offer24/"/>
      <url>/2021/08/21/leetcode/leetcode-offer24/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åè½¬é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL<br>è¾“å‡º: <span class="hljs-number">5</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">1</span>-&gt;NULL<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æ¯”è¾ƒå¸¸è§„ï¼Œéå†é“¾è¡¨æŠŠå…ƒç´ ç§»åŠ¨åˆ°å¤´èŠ‚ç‚¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(head):<span class="hljs-keyword">return</span> head<br>        p = head.<span class="hljs-built_in">next</span><br>        head.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span>(p):<br>            t = p.<span class="hljs-built_in">next</span><br>            p.<span class="hljs-built_in">next</span> = head<br>            head = p<br>            p = t<br>        <span class="hljs-keyword">return</span> head<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer16  æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</title>
      <link href="/2021/08/21/leetcode/leetcode-offer16/"/>
      <url>/2021/08/21/leetcode/leetcode-offer16/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œxnï¼‰ã€‚ä¸å¾—ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.00000</span>, n = <span class="hljs-number">10</span><br>è¾“å‡ºï¼š<span class="hljs-number">1024.00000</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šx = <span class="hljs-number">2.10000</span>, n = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">9.26100</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>-100.0 &lt; x &lt; 100.0</li><li>$-2^{31}$ &lt;= n &lt;= $2^{31}-1$</li><li>$-10^4$ &lt;= $x^n$ &lt;= $10^4$</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å°†xä¹˜ä»¥næ¬¡ï¼Œä½†æ˜¯è¿™ç§æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚åˆ¤é¢˜æ—¶æ—¶é—´è¶…å‡ºé™åˆ¶ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n):<br>            result *= x<br>            n -=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šå¯ä»¥åˆ©ç”¨x *= x å’Œå¯¹nå³ç§»æ“ä½œå¯ä»¥å¾—åˆ°$x,x<sup>2,x</sup>4,x<sup>8,x</sup>{16}â€¦$ï¼Œè€Œ$x<sup>{11}$å¯ä»¥äºŒè¿›åˆ¶æŒ‡æ•°è¡¨ç¤ºä¸º$x</sup>{1011}$ä¹Ÿå°±æ˜¯$x \times x^2 \times x^8$ã€‚è¿™æ ·åŸæœ¬éœ€è¦å¾ªç¯11æ¬¡å°±åªéœ€è¦å¾ªç¯4æ¬¡</p><p>æ ¹æ®æç¤ºæ¡ä»¶ï¼Œå¾ªç¯æœ€å¤šä¸ä¼šè¶…è¿‡32æ¬¡ã€‚å°±å¾ˆæ£’ï¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:</span><br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>):<span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        result=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span>):<br>            n = -n<br>            x = <span class="hljs-number">1</span>/x<br>        <span class="hljs-keyword">while</span>(n): <span class="hljs-comment">#æ—¶é—´å¤æ‚åº¦å¤§å¤§é™ä½ ä¸è¶…è¿‡32æ¬¡ O(logn)</span><br>            <span class="hljs-keyword">if</span>(n &amp; <span class="hljs-number">1</span>):result *= x <span class="hljs-comment">#çœ‹æœ€åä¸€ä½æ˜¯å¦ä¸º1</span><br>            x *= x<br>            n = n&gt;&gt;<span class="hljs-number">1</span> <span class="hljs-comment">#nå³ç§» 1011-ã€‹101</span><br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¿«é€Ÿå¹‚ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> å¿«é€Ÿå¹‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer17 æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</title>
      <link href="/2021/08/20/leetcode/leetcode-offer17/"/>
      <url>/2021/08/20/leetcode/leetcode-offer17/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æ•°å­— nï¼ŒæŒ‰é¡ºåºæ‰“å°å‡ºä» 1 åˆ°æœ€å¤§çš„ n ä½åè¿›åˆ¶æ•°ã€‚æ¯”å¦‚è¾“å…¥ 3ï¼Œåˆ™æ‰“å°å‡º 1ã€2ã€3 ä¸€ç›´åˆ°æœ€å¤§çš„ 3 ä½æ•° 999ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: n = <span class="hljs-number">1</span><br>è¾“å‡º: [<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">5,6,7,8</span>,<span class="hljs-number">9</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>ç”¨è¿”å›ä¸€ä¸ªæ•´æ•°åˆ—è¡¨æ¥ä»£æ›¿æ‰“å°</li><li>n ä¸ºæ­£æ•´æ•°</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å€Ÿç”¨pythonçš„ç±»å‹è½¬æ¢çš„åŒ…å®¹æ€§ï¼Œç›´æ¥å¯ä»¥è¿”å›åˆ—è¡¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">pow</span>(<span class="hljs-number">10</span>,n))] <span class="hljs-comment">#æˆ–è€…10**n</span><br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œè€ƒç‚¹æ˜¯å¤§æ•°è¶Šç•Œæƒ…å†µä¸‹çš„æ‰“å°ã€‚<br>è§£å†³æ€è·¯ï¼Œç”¨å­—ç¬¦ä¸²çš„å…¨æ’åˆ—æ¥è§£å†³æ•°å­—çš„è¶Šç•Œæƒ…å†µã€‚åŸºäºåˆ†æ²»ç®—æ³•çš„æ€æƒ³ï¼Œå…ˆå›ºå®šé«˜ä½ï¼Œå‘ä½ä½é€’å½’ï¼Œå½“ä¸ªä½å·²è¢«å›ºå®šæ—¶ï¼Œæ·»åŠ æ•°å­—çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚å½“ n = 2æ—¶ï¼ˆæ•°å­—èŒƒå›´ 1 - 99 ï¼‰ï¼Œå›ºå®šåä½ä¸º 0- 9 ï¼ŒæŒ‰é¡ºåºä¾æ¬¡å¼€å¯é€’å½’ï¼Œå›ºå®šä¸ªä½ 0 - 9 ï¼Œç»ˆæ­¢é€’å½’å¹¶æ·»åŠ æ•°å­—å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; [<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">x</span>):</span><br>            <span class="hljs-keyword">if</span> x == n:<br>                s = <span class="hljs-string">''</span>.join(num[self.start:])<br>                <span class="hljs-keyword">if</span> s != <span class="hljs-string">'0'</span>: res.append(<span class="hljs-built_in">int</span>(s))<br>                <span class="hljs-keyword">if</span> n - self.start == self.nine: self.start -= <span class="hljs-number">1</span><br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>                <span class="hljs-keyword">if</span> i == <span class="hljs-number">9</span>: self.nine += <span class="hljs-number">1</span><br>                num[x] = <span class="hljs-built_in">str</span>(i)<br>                dfs(x + <span class="hljs-number">1</span>)<br>            self.nine -= <span class="hljs-number">1</span><br>        <br>        num, res = [<span class="hljs-string">'0'</span>] * n, []<br>        self.nine = <span class="hljs-number">0</span><br>        self.start = n - <span class="hljs-number">1</span><br>        dfs(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><ul><li>å­—ç¬¦ä¸²å·¦è¾¹ç•Œå®šä¹‰ï¼š å£°æ˜å˜é‡ start è§„å®šå­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œï¼Œä»¥ä¿è¯æ·»åŠ çš„æ•°å­—å­—ç¬¦ä¸² num[start:] ä¸­æ— é«˜ä½å¤šä½™çš„ 0 ã€‚ä¾‹å¦‚å½“ n = 2 æ—¶, 1 - 9æ—¶ start = 1ï¼Œ 10 - 99 æ—¶ start = 0ã€‚</li><li>å·¦è¾¹ç•Œ start å˜åŒ–è§„å¾‹ï¼š è§‚å¯Ÿå¯çŸ¥ï¼Œå½“è¾“å‡ºæ•°å­—çš„æ‰€æœ‰ä½éƒ½æ˜¯ 9 æ—¶ï¼Œåˆ™ä¸‹ä¸ªæ•°å­—éœ€è¦å‘æ›´é«˜ä½è¿› 11 ï¼Œæ­¤æ—¶å·¦è¾¹ç•Œ start éœ€è¦å‡11 ï¼ˆå³é«˜ä½å¤šä½™çš„ 0 å‡å°‘ä¸€ä¸ªï¼‰ã€‚ä¾‹å¦‚å½“ n = 3ï¼ˆæ•°å­—èŒƒå›´ 1 - 999 ï¼‰æ—¶ï¼Œå·¦è¾¹ç•Œ start éœ€è¦å‡ 1 çš„æƒ…å†µæœ‰ï¼š â€œ009â€ è¿›ä½è‡³ â€œ010â€ ï¼Œ â€œ099â€ è¿›ä½è‡³ â€œ100â€ ã€‚è®¾æ•°å­—å„ä½ä¸­ 9 çš„æ•°é‡ä¸º nine ï¼Œæ‰€æœ‰ä½éƒ½ä¸º 9 çš„åˆ¤æ–­æ¡ä»¶å¯ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼šn - start = nineç»Ÿè®¡ nine çš„æ–¹æ³•ï¼š å›ºå®šç¬¬ x ä½æ—¶ï¼Œå½“ i = 9åˆ™æ‰§è¡Œ nine = nine + 1 ï¼Œå¹¶åœ¨å›æº¯å‰æ¢å¤ nine = nine - 1</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å¤§æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å¤§æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‹‰æ™®æ‹‰æ–¯ç®—å­</title>
      <link href="/2021/08/20/img_process/laplace/"/>
      <url>/2021/08/20/img_process/laplace/</url>
      
        <content type="html"><![CDATA[<blockquote><p>â€‹å›¾åƒé”åŒ–å¤„ç†çš„ä½œç”¨æ˜¯ä½¿ç°åº¦åå·®å¢å¼ºï¼Œä»è€Œä½¿æ¨¡ç³Šå›¾åƒå˜å¾—æ›´åŠ æ¸…æ™°ã€‚å›¾åƒæ¨¡ç³Šçš„å®è´¨å°±æ˜¯å›¾åƒå—åˆ°å¹³å‡è¿ç®—æˆ–ç§¯åˆ†è¿ç®—ï¼Œå› æ­¤å¯ä»¥å¯¹å›¾åƒè¿›è¡Œé€†è¿ç®—ï¼Œå¦‚å¾®åˆ†è¿ç®—èƒ½å¤Ÿçªå‡ºå›¾åƒç»†èŠ‚ï¼Œä½¿å›¾åƒå˜å¾—æ›´ä¸ºæ¸…æ™°ã€‚<br>â€‹ç§¯åˆ†è¿ç®—çš„æ¨¡æ¿å¯ä»¥å¹³æ»‘å›¾åƒï¼Œåè¿‡æ¥å¯¹åº”å¾®åˆ†è¿ç®—çš„æ¨¡æ¿å·ç§¯å¯ä»¥é”åŒ–å›¾åƒã€‚é”åŒ–æ¨¡æ¿ç³»æ•°çš„å–å€¼å†ä¸­å¿ƒä¸ºæ­£æ•°è€Œå‘¨å›´ä¸ºè´Ÿæ•°ã€‚æˆ–è€…ä¸­å¿ƒä¸ºè´Ÿæ•°å‘¨å›´ä¸ºæ­£æ•°ã€‚è€Œæ‹‰æ™®æ‹‰æ–¯ç®—å­å°±æ˜¯ä¸€ç§å¸¸ç”¨çš„çº¿æ€§é”åŒ–æ»¤æ³¢çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯">æ‹‰æ™®æ‹‰æ–¯çš„èƒŒæ™¯</h2><p>åœ¨å›¾åƒä¸­çš„è¾¹ç¼˜åŒºåŸŸï¼Œåƒç´ å€¼ä¼šå‘ç”Ÿâ€œè·³è·ƒâ€ï¼Œå¯¹è¿™äº›åƒç´ æ±‚å¯¼ï¼Œåœ¨å…¶ä¸€é˜¶å¯¼æ•°åœ¨è¾¹ç¼˜ä½ç½®ä¸ºæå€¼ï¼ˆSobelç®—å­ï¼‰ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic1.png" alt="img"></p><p>å¦‚æœå¯¹åƒç´ å€¼æ±‚äºŒé˜¶å¯¼æ•°ï¼Œä¼šå‘ç°è¾¹ç¼˜å¤„çš„å¯¼æ•°å€¼ä¸º0ï¼›<strong>ä½†æ˜¯å¹¶ä¸æ˜¯è¯´äºŒé˜¶å¯¼æ•°ä¸º0å°±æ„å‘³ç€æ˜¯è¾¹ç¼˜</strong>ã€‚</p><p><img src="https://picture.mulindya.com/laplace-pic2.png" alt=""></p><h2 id="è®¡ç®—æ–¹æ³•">è®¡ç®—æ–¹æ³•</h2><h3 id="åƒç´ äºŒé˜¶å¯¼æ•°">åƒç´ äºŒé˜¶å¯¼æ•°</h3><p>äºŒé˜¶å¯¼æ•°çš„è®¡ç®—æ–¹æ³•ï¼š<br>$$<br>\nabla^2f = \frac{\partial^2 f}{\partial x<sup>2}+\frac{\partial</sup>2 f}{\partial y^2}<br>$$<br>åˆ†åˆ«æ²¿ç€Xå’ŒYæ–¹å‘æœ‰äºŒé˜¶åå¯¼æ•°å‡å¯å€Ÿç”¨å·®åˆ†è®¡ç®—ï¼š<br>$$<br>\frac{\partial^2 f}{\partial x^2} = f(x+1,y)+f(x-1,y)-2f(x,y)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial y^2} = f(x,y+1)+f(x,y-1)-2f(x,y)<br>$$</p><p>é‚£ä¹ˆå¯ä»¥å¾—åˆ°<br>$$<br>\nabla^2f = f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)<br>$$</p><h3 id="æ¨¡æ¿å·ç§¯">æ¨¡æ¿å·ç§¯</h3><p>å¯¹åº”çš„æ¨¡æ¿å·ç§¯å³ä¸º</p>$$\begin{bmatrix} 0 &amp; 1 &amp; 0\\ 1 &amp; -4 &amp; 1 \\ 0 &amp; 1 &amp; 0 \end{bmatrix} æˆ–è€…\begin{bmatrix} 0 &amp; -1 &amp; 0 \\ -1 &amp; 4 &amp; -1 \\ 0 &amp; -1 &amp; 0 \end{bmatrix}$$<p>å‰è€…æ˜¯maskä¸­å¿ƒä¸ºè´Ÿæ•°ï¼Œåè€…æ˜¯maskä¸­å¿ƒä¸ºæ­£æ•°ï¼›ä»–ä»¬çš„ç›®çš„å’Œæ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯è¡¨ç°å½¢å¼ç¨æœ‰ä¸åŒï¼Œå‰è€…åœ¨å·ç§¯åï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚åè€…ç›¸åã€‚</p><p>maskä¸ºè´Ÿæ•°æ—¶ï¼Œåœ¨è¾¹ç¼˜çš„äº®å¤„ä¸ºè´Ÿæ•°ï¼Œåœ¨è¾¹ç¼˜æš—å¤„ä¸ºæ­£æ•°ã€‚å¯ä»¥å‚è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/laplace-pic3.png" alt=""></p><p>ä¸Šè¿°æ˜¯è€ƒè™‘ä¸­å¿ƒåƒç´ 4é‚»åŸŸï¼Œç±»ä¼¼è¿˜æœ‰è€ƒè™‘8é‚»åŸŸï¼Œæ­¤æ—¶ä¸­å¿ƒç‚¹åŒº8æˆ–-8ï¼Œå‘¨å›´ä¸º-1æˆ–1ã€‚</p>$$\begin{bmatrix} 1 &amp; 1 &amp; 1 \\ 1 &amp; -8 &amp; 1 \\ 1 &amp; 1 &amp; 1 \end{bmatrix} æˆ–è€…\begin{bmatrix} -1 &amp; -1 &amp; -1 \\ -1 &amp; 8 &amp; -1 \\ -1 &amp; -1 &amp; -1 \end{bmatrix}$$<h2 id="å›¾åƒé”åŒ–">å›¾åƒé”åŒ–</h2><p>é”åŒ–å¤„ç†å¯é€‰æ‹©æ‹‰æ™®æ‹‰æ–¯ç®—å­å¯¹åŸå›¾åƒè¿›è¡Œå¤„ç†ï¼Œäº§ç”Ÿæè¿°ç°åº¦çªå˜çš„å›¾åƒï¼Œå†å°†æ‹‰æ™®æ‹‰æ–¯å›¾åƒä¸åŸå§‹å›¾åƒå åŠ è€Œäº§ç”Ÿé”åŒ–å›¾åƒã€‚æ‹‰æ™®æ‹‰æ–¯é”åŒ–çš„åŸºæœ¬æ–¹æ³•å¯ä»¥ç”±ä¸‹å¼è¡¨ç¤ºï¼š<br>$$<br>g(x,y) = \begin{cases} f(x,y) - \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºè´Ÿæ•°}\f(x,y) + \nabla^2f(x,y) &amp; \text{maskä¸­å¿ƒä¸ºæ­£æ•°} \end{cases}<br>$$</p><p>è¿™ç§ç®€å•çš„é”åŒ–æ–¹æ³•æ—¢å¯ä»¥äº§ç”Ÿæ‹‰æ™®æ‹‰æ–¯é”åŒ–å¤„ç†çš„æ•ˆæœï¼ŒåŒæ—¶åˆèƒ½ä¿ç•™èƒŒæ™¯ä¿¡æ¯ï¼Œå°†åŸå§‹å›¾åƒå åŠ åˆ°æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„å¤„ç†ç»“æœä¸­å»ï¼Œå¯ä»¥ä½¿å›¾åƒä¸­çš„å„ç°åº¦å€¼å¾—åˆ°ä¿ç•™ï¼Œä½¿ç°åº¦çªå˜å¤„çš„å¯¹æ¯”åº¦å¾—åˆ°å¢å¼ºï¼Œ<strong>æœ€ç»ˆç»“æœæ˜¯åœ¨ä¿ç•™å›¾åƒèƒŒæ™¯çš„å‰æä¸‹ï¼Œçªç°å‡ºå›¾åƒä¸­å°çš„ç»†èŠ‚ä¿¡æ¯</strong>ã€‚</p><p>ç¼ºç‚¹æ˜¯æ²¡æœ‰äº†è¾¹ç¼˜çš„æ–¹å‘ä¿¡æ¯ï¼›åŒå€åŠ å¼ºäº†å™ªå£°çš„å½±å“ã€‚</p><blockquote><p>é”åŒ–å¤„ç†çš„å…¬å¼ä»æ¨¡æ¿å½¢å¼å®¹æ˜“çœ‹å‡ºï¼Œå¦‚æœåœ¨å›¾åƒä¸­ä¸€ä¸ªè¾ƒæš—çš„åŒºåŸŸä¸­å‡ºç°äº†ä¸€ä¸ªäº®ç‚¹ï¼Œé‚£ä¹ˆç”¨æ‹‰æ™®æ‹‰æ–¯è¿ç®—å°±ä¼šä½¿è¿™ä¸ªäº®ç‚¹å˜å¾—æ›´äº®ã€‚å› ä¸ºå›¾åƒä¸­çš„è¾¹ç¼˜å°±æ˜¯é‚£äº›ç°åº¦å‘ç”Ÿè·³å˜çš„åŒºåŸŸï¼Œæ‰€ä»¥æ‹‰æ™®æ‹‰æ–¯é”åŒ–æ¨¡æ¿åœ¨è¾¹ç¼˜æ£€æµ‹ä¸­å¾ˆæœ‰ç”¨ã€‚ä¸€èˆ¬å¢å¼ºæŠ€æœ¯å¯¹äºé™¡å³­çš„è¾¹ç¼˜å’Œç¼“æ…¢å˜åŒ–çš„è¾¹ç¼˜å¾ˆéš¾ç¡®å®šå…¶è¾¹ç¼˜çº¿çš„ä½ç½®ã€‚ä½†æ­¤ç®—å­å´å¯ç”¨äºŒæ¬¡å¾®åˆ†æ­£å³°å’Œè´Ÿå³°ä¹‹é—´çš„è¿‡é›¶ç‚¹æ¥ç¡®å®šï¼Œå¯¹å­¤ç«‹ç‚¹æˆ–ç«¯ç‚¹æ›´ä¸ºæ•æ„Ÿï¼Œå› æ­¤ç‰¹åˆ«é€‚ç”¨äºä»¥<strong>çªå‡ºå›¾åƒä¸­çš„å­¤ç«‹ç‚¹ã€å­¤ç«‹çº¿æˆ–çº¿ç«¯ç‚¹ä¸ºç›®çš„çš„åœºåˆ</strong>ã€‚åŒæ¢¯åº¦ç®—å­ä¸€æ ·ï¼Œæ‹‰æ™®æ‹‰æ–¯ç®—å­ä¹Ÿä¼šå¢å¼ºå›¾åƒä¸­çš„å™ªå£°ï¼Œæœ‰æ—¶ç”¨æ‹‰æ™®æ‹‰æ–¯ç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹æ—¶ï¼Œå¯å°†å›¾åƒå…ˆè¿›è¡Œ<strong>å¹³æ»‘å¤„ç†</strong>ã€‚</p></blockquote><h2 id="ä»£ç ">ä»£ç </h2><p>åœ¨OpenCVå†…ä½¿ç”¨å‡½æ•°cv2.Laplacian()å®ç°Laplacianç®—å­çš„è®¡ç®—ï¼Œè¯¥å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">dst = cv2.<span class="hljs-constructor">Laplacian( <span class="hljs-params">src</span>, <span class="hljs-params">ddepth</span>[, <span class="hljs-params">ksize</span>[, <span class="hljs-params">scale</span>[, <span class="hljs-params">delta</span>[, <span class="hljs-params">borderType</span>]]]] )</span><br></code></pre></td></tr></tbody></table></figure><p>å¼ä¸­ï¼š<br>â— dstä»£è¡¨ç›®æ ‡å›¾åƒã€‚<br>â— srcä»£è¡¨åŸå§‹å›¾åƒã€‚<br>â— ddepthä»£è¡¨ç›®æ ‡å›¾åƒçš„æ·±åº¦ã€‚<br>â— ksizeä»£è¡¨ç”¨äºè®¡ç®—äºŒé˜¶å¯¼æ•°çš„æ ¸å°ºå¯¸å¤§å°ã€‚è¯¥å€¼å¿…é¡»æ˜¯æ­£çš„å¥‡æ•°ã€‚<br>â— scaleä»£è¡¨è®¡ç®—Laplacianå€¼çš„ç¼©æ”¾æ¯”ä¾‹å› å­ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å€¼ä¸º1ï¼Œè¡¨ç¤ºä¸è¿›è¡Œç¼©æ”¾ã€‚<br>â— deltaä»£è¡¨åŠ åˆ°ç›®æ ‡å›¾åƒä¸Šçš„å¯é€‰å€¼ï¼Œé»˜è®¤ä¸º0ã€‚<br>â— borderType : ç”¨äºæ¨æ–­å›¾åƒå¤–éƒ¨åƒç´ çš„è¾¹ç•Œæ¨¡å¼ï¼Œä¸€èˆ¬æ˜¯DORDER_DEFAULT,ä¸æ”¯æŒBORDER_WRAP.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br>img = cv2.imread(<span class="hljs-string">"img.png"</span>,<span class="hljs-number">0</span>)<br>laplacian = cv2.Laplacian(img,cv2.CV_64F)<br>laplacian = cv2.convertScaleABs(laplacian)<br>cv2.imshow(img)<br>cv2.imshow(laplacian)<br></code></pre></td></tr></tbody></table></figure><p>åŸå›¾<br><img src="https://picture.mulindya.com/laplace-pic4.png" alt=""><br>å¤„ç†ä¹‹å<br><img src="https://picture.mulindya.com/laplace-pic5.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer22 é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</title>
      <link href="/2021/08/20/leetcode/leetcode-offer22/"/>
      <url>/2021/08/20/leetcode/leetcode-offer22/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬1ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ 6 ä¸ªèŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯ 1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ 3 ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º 4 çš„èŠ‚ç‚¹ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">ç»™å®šä¸€ä¸ªé“¾è¡¨: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>, å’Œ k = <span class="hljs-number">2.</span><br>è¿”å›é“¾è¡¨ <span class="hljs-number">4</span>-&gt;<span class="hljs-number">5.</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ–¹æ³•æ˜¯å…ˆç¡®å®šé“¾è¡¨çš„é•¿åº¦ï¼Œç„¶åå†ç§»åŠ¨å¯¹åº”çš„ç»“ç‚¹ä¸ªæ•°ã€‚é‚£ä¹ˆå°±éœ€è¦O(2n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(x):<br>            cnt += <span class="hljs-number">1</span><br>            x = x.<span class="hljs-built_in">next</span><br>        t = cnt - k<br>        <span class="hljs-keyword">while</span>(t):<br>            y = y.<span class="hljs-built_in">next</span><br>            t -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œä½¿å¾—xä¸yç›¸è·kå…ƒç´ ï¼Œç„¶åxéå†åˆ°æœ€åï¼Œyå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„ç»“æœã€‚æ­¤æ—¶åªéœ€è¦O(n)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">self, head: ListNode, k: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span><br>        y = x = head<br>        <span class="hljs-keyword">while</span>(x):<br>            <span class="hljs-keyword">if</span>(k&lt;=<span class="hljs-number">0</span>):y = y.<span class="hljs-built_in">next</span><br>            x = x.<span class="hljs-built_in">next</span><br>            k -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> y<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Self-awareness</title>
      <link href="/2021/08/19/english/self-aware/"/>
      <url>/2021/08/19/english/self-aware/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><p><a href="https://paper.mulindya.com/Self-awareness.pdf">https://paper.mulindya.com/Self-awareness.pdf</a></p><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/Self-awareness.pdf" width="100%" height="600"></iframe>]]></content>
      
      
      <categories>
          
          <category> è‹±è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‹±è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer29 é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</title>
      <link href="/2021/08/19/leetcode/leetcode-offer29/"/>
      <url>/2021/08/19/leetcode/leetcode-offer29/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,2,3]</span>,<span class="hljs-comment">[4,5,6]</span>,<span class="hljs-comment">[7,8,9]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2,3,6,9,8,7,4,5]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šmatrix = [[<span class="hljs-number">1,2,3,4</span>],[<span class="hljs-number">5,6,7,8</span>],[<span class="hljs-number">9,10,11,12</span>]]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,2,3,4</span>,<span class="hljs-number">8,12,11,10</span>,<span class="hljs-number">9,5,6,7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>0 &lt;= matrix.length &lt;= 100</code></li><li><code>0 &lt;= matrix[i].length &lt;= 100</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä¸€ç§æ˜¯å¯¹æ•°ç»„è¿›è¡Œå¸¸è§„æ“ä½œï¼Œå®‰è£…é¢˜ç›®è¦æ±‚è¿›è¡Œéå†åˆ¤æ–­ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> matrix: <span class="hljs-keyword">return</span> []<br>        l, r, t, b, res = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>]) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(matrix) - <span class="hljs-number">1</span>, []<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(l, r + <span class="hljs-number">1</span>): res.append(matrix[t][i]) <span class="hljs-comment"># left to right</span><br>            t += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t, b + <span class="hljs-number">1</span>): res.append(matrix[i][r]) <span class="hljs-comment"># top to bottom</span><br>            r -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r, l - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[b][i]) <span class="hljs-comment"># right to left</span><br>            b -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> t &gt; b: <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b, t - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>): res.append(matrix[i][l]) <span class="hljs-comment"># bottom to top</span><br>            l += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> l &gt; r: <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> res<br><br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ˜¯é‡‡ç”¨ç›¸å…³çš„æ–¹æ³•ï¼Œ<code>pop(0)</code>å¯ä»¥å¼¹å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨$zip(<em>)$ç›¸å½“äºå¯¹çŸ©é˜µè½¬ç½®ã€‚<code>list(zip(*matrix))[::-1]</code>å°±æ˜¯å¯¹çŸ©é˜µé€†æ—‹è½¬90åº¦ã€‚zipå’Œzip(</em>)ä¹Ÿæ˜¯ä¸€å¯¹é€†æ“ä½œï¼›å‰è€…è¡¨ç¤ºå‹ç¼©ï¼Œåè€…è¡¨ç¤ºè§£å‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spiralOrder</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        res = []<br>        <span class="hljs-keyword">while</span> matrix:<br>            res += matrix.pop(<span class="hljs-number">0</span>)<br>            matrix = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(*matrix))[::-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure><blockquote><p>pop &amp; zipçŸ¥è¯†å‚è€ƒ</p><p><a href="https://blog.csdn.net/zhanshen112/article/details/90341177">https://blog.csdn.net/zhanshen112/article/details/90341177</a></p><p><a href="https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html">https://www.cnblogs.com/Aurora-Twinkle/p/8660778.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer15 äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</title>
      <link href="/2021/08/19/leetcode/leetcode-offer15/"/>
      <url>/2021/08/19/leetcode/leetcode-offer15/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º â€˜1â€™ çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸º æ±‰æ˜é‡é‡).ï¼‰ã€‚<br>æç¤ºï¼š</p><ul><li>è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚</li><li>åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ äºŒè¿›åˆ¶è¡¥ç  è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„&nbsp;ç¤ºä¾‹ 3&nbsp;ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">11</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000000001011</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000000001011</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šn = <span class="hljs-number">128</span> (æ§åˆ¶å°è¾“å…¥ <span class="hljs-number">00000000000000000000000010000000</span>)<br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² <span class="hljs-number">00000000000000000000000010000000</span>&nbsp;ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn =<span class="hljs-number"> 4294967293 </span>(æ§åˆ¶å°è¾“å…¥ 11111111111111111111111111111101ï¼Œéƒ¨åˆ†è¯­è¨€ä¸­ n = -3ï¼‰<br>è¾“å‡ºï¼š31<br>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸²<span class="hljs-number"> 11111111111111111111111111111101 </span>ä¸­ï¼Œå…±æœ‰<span class="hljs-number"> 31 </span>ä½ä¸º '1'ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯é‡‡ç”¨å†…ç½®çš„binå‡½æ•°ï¼Œå°†nè½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ã€‚ç„¶åç»Ÿè®¡å…¶å­—ç¬¦ä¸²çš„1çš„ä¸ªæ•°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        s = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">bin</span>(n))<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span>(x==<span class="hljs-string">'1'</span>):<br>                cnt+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯é‡‡ç”¨ç§»ä½æ“ä½œ<code>&lt;&lt;</code>å’ŒæŒ‰ä½ä¸<code>&amp;</code>å¯¹è¾“å…¥çš„æ•°å­—è¿›è¡Œç»Ÿè®¡ã€‚å¦‚ï¼š11 &amp; 8 = 8ï¼ˆ1011 &amp; 100 = 100ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>       cnt = <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">if</span>(n &amp; (<span class="hljs-number">1</span> &lt;&lt; i)))<br>       <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></tbody></table></figure><p><font color="hotpink">ä¸‹é¢è¿™ä¸ªå°±å¾ˆå¦™äº†</font></p><p>ç¬¬ä¸‰ç§æ–¹æ³• åˆ©ç”¨ <code>n &amp;ï¼ˆn-1ï¼‰</code></p><p>(nâˆ’1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1 å˜æˆ 0 ï¼Œæ­¤ 1 å³è¾¹çš„ 0 éƒ½å˜æˆ 1ã€‚<br>n &amp; (n - 1) è§£æï¼š äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1å˜æˆ 0ï¼Œå…¶ä½™ä¸å˜ã€‚<br>åˆ©ç”¨æ­¤ç‰¹æ€§æ¯æ¬¡å¾ªç¯å¯ä»¥æ¶ˆå»ä¸€ä¸ª1</p><p><img src="https://picture.mulindya.com/leetcode-offer15pic1.png" alt=""></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hammingWeight</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> n:<br>            res += <span class="hljs-number">1</span><br>            n &amp;= n - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å˜é‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å˜é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer20 è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</title>
      <link href="/2021/08/19/leetcode/leetcode-offer20/"/>
      <url>/2021/08/19/leetcode/leetcode-offer20/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚</p><p><strong>æ•°å€¼</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>è‹¥å¹²ç©ºæ ¼</li><li>ä¸€ä¸ª&nbsp;å°æ•°&nbsp;æˆ–è€…&nbsp;æ•´æ•°</li><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ª&nbsp;â€˜eâ€™&nbsp;æˆ–&nbsp;â€˜Eâ€™&nbsp;ï¼Œåé¢è·Ÿç€ä¸€ä¸ª&nbsp;æ•´æ•°</li><li>è‹¥å¹²ç©ºæ ¼</li></ol><p><strong>å°æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</p></li><li><p>ä¸‹è¿°æ ¼å¼ä¹‹ä¸€ï¼š</p><ol><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™</li><li>è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢å†è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li><li>ä¸€ä¸ªç‚¹ â€˜.â€™ ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—</li></ol></li></ol><p><strong>æ•´æ•°</strong>ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆâ€˜+â€™ æˆ– â€˜-â€™ï¼‰</li><li>è‡³å°‘ä¸€ä½æ•°å­—</li></ol><p>éƒ¨åˆ†<strong>æ•°å€¼</strong>åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ+100â€, â€œ5e2â€, â€œ-123â€, â€œ3.1416â€, â€œ-1E-16â€, â€œ0123â€]</li></ul><p>éƒ¨åˆ†éæ•°å€¼åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li>[â€œ12eâ€, â€œ1a3.14â€, â€œ1.2.3â€, â€œÂ±5â€, â€œ12e+5.4â€]</li></ul><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"0"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"e"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-3ï¼š">ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"."</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-4ï¼š">ç¤ºä¾‹ 4ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">"    .1  "</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= s.length &lt;= 20</li><li>s ä»…å«è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ï¼Œæ•°å­—ï¼ˆ0-9ï¼‰ï¼ŒåŠ å· â€˜+â€™ ï¼Œå‡å· â€˜-â€™ ï¼Œç©ºæ ¼ â€™ â€™ æˆ–è€…ç‚¹ â€˜.â€™ ã€‚</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h3><p>æœ¬é¢˜è§£å†³æ–¹æ¡ˆæ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºã€‚æ ¹æ®å­—ç¬¦ç±»å‹å’Œåˆæ³•æ•°å€¼çš„ç‰¹ç‚¹ï¼Œå®šä¹‰çŠ¶æ€ï¼Œå†ç”»å‡ºçŠ¶æ€è½¬ç§»å›¾ã€‚</p><h4 id="å­—ç¬¦ç±»å‹">å­—ç¬¦ç±»å‹</h4><p>ç©ºæ ¼:â€™ â€˜ï¼Œæ•°å­—:dï¼Œæ­£è´Ÿå·:sï¼Œå°æ•°ç‚¹:â€™.'ï¼Œå¹‚ç¬¦å·ï¼še</p><h4 id="çŠ¶æ€å®šä¹‰">çŠ¶æ€å®šä¹‰</h4><p>ä»å·¦åˆ°å³å¯ä»¥å®šä¹‰ä¸º</p><p>0.å·¦è¾¹çš„<code>ç©ºæ ¼</code></p><ol><li>Eä¹‹å‰çš„<code>æ­£è´Ÿå·</code></li><li>å°æ•°ç‚¹å‰çš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹ï¼Œå°æ•°ç‚¹ä¹‹åçš„<code>æ•°å­—</code></li><li>å°æ•°ç‚¹å‰ä¸ºç©ºæ ¼ï¼Œ<code>å°æ•°ç‚¹</code>ï¼Œå°æ•°ç‚¹åä¸ºæ•°å­—</li><li><code>å¹‚ç¬¦å·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ­£è´Ÿå·</code></li><li>å¹‚ç¬¦å·ä¹‹åçš„<code>æ•°å­—</code></li><li>ç»“å°¾çš„<code>ç©ºæ ¼</code></li></ol><p><img src="https://picture.mulindya.com/leetcode-offer20-pic1.png" alt=""></p><h4 id="ç»“æŸçŠ¶æ€">ç»“æŸçŠ¶æ€</h4><p>æ­£å¸¸çš„ç»“æŸçŠ¶æ€æœ‰2ï¼Œ3ï¼Œ7ï¼Œ8</p><h3 id="ç®—æ³•æµç¨‹">ç®—æ³•æµç¨‹</h3><h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4><h5 id="1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status">1ï¼ŒçŠ¶æ€è½¬ç§»è¡¨status</h5><p>$states[i]$è¡¨ç¤ºæ‰€å¤„çš„çŠ¶æ€ï¼Œ$i$ä¸ºæ‰€å¤„çš„çŠ¶æ€è¡¨ç¤ºï¼Œ$states[i]$ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ä»içŠ¶æ€åˆ°å¯è½¬ç§»çš„çŠ¶æ€ï¼›ä½¿ç”¨é”®å€¼å¯¹æ¥è¡¨ç¤º$(key,value)$ï¼šè‹¥è¾“å…¥$key$ï¼Œå¯ä»çŠ¶æ€$i$è½¬ç§»è‡³çŠ¶æ€$value$.</p><p>å½“å‰çŠ¶æ€pï¼šåˆå§‹çŠ¶æ€ä¸º0</p><h5 id="2ï¼Œè½¬ç§»å¾ªç¯">2ï¼Œè½¬ç§»å¾ªç¯</h5><p>è¿˜éœ€è¦<strong>è®°å½•å­—ç¬¦ç±»å‹</strong>tï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦c</p><ul><li>å½“ c ä¸ºæ­£è´Ÿå·æ—¶ï¼Œæ‰§è¡Œ t = â€˜sâ€™ ;</li><li>å½“ c ä¸ºæ•°å­—æ—¶ï¼Œæ‰§è¡Œ t = â€˜dâ€™ ;</li><li>å½“ c ä¸º e , E æ—¶ï¼Œæ‰§è¡Œ t = â€˜eâ€™ ;</li><li>å½“ c ä¸º . , ç©ºæ ¼ æ—¶ï¼Œæ‰§è¡Œ t = c ï¼ˆå³ç”¨å­—ç¬¦æœ¬èº«è¡¨ç¤ºå­—ç¬¦ç±»å‹ï¼‰;</li><li>å¦åˆ™ï¼Œæ‰§è¡Œ t = â€˜?â€™ ï¼Œä»£è¡¨ä¸ºä¸å±äºåˆ¤æ–­èŒƒå›´çš„éæ³•å­—ç¬¦ï¼Œåç»­ç›´æ¥è¿”å› falseã€‚</li></ul><p><strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼š è‹¥å­—ç¬¦ç±»å‹ tä¸åœ¨å“ˆå¸Œè¡¨  $states[p]$ ä¸­ï¼Œè¯´æ˜æ— æ³•è½¬ç§»è‡³ä¸‹ä¸€çŠ¶æ€ï¼Œå› æ­¤ç›´æ¥è¿”å› False ã€‚<br><strong>çŠ¶æ€è½¬ç§»</strong>ï¼š çŠ¶æ€ p è½¬ç§»è‡³ $states[p][t]$ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        states = [<br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'s'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> }, <span class="hljs-comment"># 0. start with 'blank'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">4</span> } ,                <span class="hljs-comment"># 1. 'sign' before 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'.'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }, <span class="hljs-comment"># 2. 'digit' before 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },         <span class="hljs-comment"># 3. 'digit' after 'dot'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">3</span> },                         <span class="hljs-comment"># 4. 'digit' after 'dot' (â€˜blankâ€™ before 'dot')</span><br>            { <span class="hljs-string">'s'</span>: <span class="hljs-number">6</span>, <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                 <span class="hljs-comment"># 5. 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span> },                         <span class="hljs-comment"># 6. 'sign' after 'e'</span><br>            { <span class="hljs-string">'d'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> },                 <span class="hljs-comment"># 7. 'digit' after 'e'</span><br>            { <span class="hljs-string">' '</span>: <span class="hljs-number">8</span> }                          <span class="hljs-comment"># 8. end with 'blank'</span><br>        ]<br>        p = <span class="hljs-number">0</span>                           <span class="hljs-comment"># start with state 0</span><br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> <span class="hljs-string">'0'</span> &lt;= c &lt;= <span class="hljs-string">'9'</span>: t = <span class="hljs-string">'d'</span> <span class="hljs-comment"># digit</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"+-"</span>: t = <span class="hljs-string">'s'</span>     <span class="hljs-comment"># sign</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">"eE"</span>: t = <span class="hljs-string">'e'</span>     <span class="hljs-comment"># e or E</span><br>            <span class="hljs-keyword">elif</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">". "</span>: t = c       <span class="hljs-comment"># dot, blank</span><br>            <span class="hljs-keyword">else</span>: t = <span class="hljs-string">'?'</span>               <span class="hljs-comment"># unknown</span><br>            <span class="hljs-keyword">if</span> t <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> states[p]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            p = states[p][t]<br>        <span class="hljs-keyword">return</span> p <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>)<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æœ‰é™çŠ¶æ€æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æœ‰é™çŠ¶æ€æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer21 è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</title>
      <link href="/2021/08/18/leetcode/leetcode-offer21/"/>
      <url>/2021/08/18/leetcode/leetcode-offer21/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">1,2,3,4</span>]<br>è¾“å‡ºï¼š[<span class="hljs-number">1,3,2,4</span>] <br>æ³¨ï¼š[<span class="hljs-number">3,1,2,4</span>] ä¹Ÿæ˜¯æ­£ç¡®çš„ç­”æ¡ˆä¹‹ä¸€ã€‚<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= nums.length &lt;= 50000</li><li>1 &lt;= nums[i] &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonçš„listçš„å¸¸è§„æ“ä½œã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:</span><br>        odd = []<br>        even = []<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span>(x%<span class="hljs-number">2</span>):<br>                odd.append(x)<br>            <span class="hljs-keyword">else</span>:<br>                even.append(x)<br>        <span class="hljs-keyword">return</span> odd+even<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer28 å¯¹ç§°çš„äºŒå‰æ ‘</title>
      <link href="/2021/08/18/leetcode/leetcode-offer28/"/>
      <url>/2021/08/18/leetcode/leetcode-offer28/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹ç§°çš„äºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯ä¸æ˜¯å¯¹ç§°çš„ã€‚å¦‚æœä¸€æ£µäºŒå‰æ ‘å’Œå®ƒçš„é•œåƒä¸€æ ·ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¯¹ç§°çš„ã€‚</p><p>ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘&nbsp;[1,2,2,3,4,4,3] æ˜¯å¯¹ç§°çš„ã€‚</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp;/ \ / <br>3 &nbsp;4 4 &nbsp;3<br>ä½†æ˜¯ä¸‹é¢è¿™ä¸ª&nbsp;[1,2,2,null,3,null,3] åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„:</p><p>1<br>&nbsp; &nbsp;/ <br>&nbsp; 2 &nbsp; 2<br>&nbsp; &nbsp;\ &nbsp; <br>&nbsp; &nbsp;3 &nbsp; &nbsp;3</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœrootä¸ºç©ºå°±ç›´æ¥è¿”å›Trueï¼Œç„¶ååˆ¤æ–­å…¶å·¦å³å­æ ‘æ˜¯å¦ä¸ºé•œåƒç»“æ„ã€‚å¦‚æœä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ºç©ºåˆ™ä¸ºçœŸï¼Œå¦‚æœä¸€ç©ºåˆ™ä¸ºå‡ï¼Œç„¶ååˆ†åˆ«åˆ¤æ–­å…¶å¯¹ç§°ç»“æ„ã€‚ <code>judge(A.left,B.right) and judge(A.right,B.left)</code> æ³¨æ„æ˜¯é•œåƒå› æ­¤å·¦å³æ—¶ç›¸åçš„å‘¢</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSymmetric</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judge</span>(<span class="hljs-params">A,B</span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">or</span> B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judge(A.left,B.right) <span class="hljs-keyword">and</span> judge(A.right,B.left) <br>        <span class="hljs-keyword">return</span> judge(root.left,root.right)<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer26 æ ‘çš„å­ç»“æ„</title>
      <link href="/2021/08/18/leetcode/leetcode-offer26/"/>
      <url>/2021/08/18/leetcode/leetcode-offer26/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ ‘çš„å­ç»“æ„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aå’ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚(çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„)<br>Bæ˜¯Açš„å­ç»“æ„ï¼Œ å³ Aä¸­æœ‰å‡ºç°å’ŒBç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><p>ä¾‹å¦‚:<br>ç»™å®šçš„æ ‘ A:</p><p>3<br>&nbsp; &nbsp; / <br>&nbsp; &nbsp;4 &nbsp; 5<br>&nbsp; / <br>&nbsp;1 &nbsp; 2<br>ç»™å®šçš„æ ‘ Bï¼š</p><p>4&nbsp;<br>&nbsp; /<br>&nbsp;1<br>è¿”å› trueï¼Œå› ä¸º B ä¸ A çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">A</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-attr">B</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>pythonä»£ç çœŸçš„ï¼å¥½ï¼ç®€æ´ï¼</p><p><code>isSubStructure</code>çš„ä½œç”¨æ˜¯å…ˆåºæŸ¥æ‰¾Aï¼ŒBçš„åŒ¹é…æƒ…å†µã€‚è€Œåœ¨å†…éƒ¨ä¼šå¯¹åŒ¹é…çš„<code>judgechildren(A,B)</code>è¿›è¡Œåˆ¤æ–­ï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸ºå…¶å­ç»“æ„ã€‚</p><p>å¦‚æœBä¸ºç©ºäº†åˆ™è¡¨ç¤ºåŒ¹é…æˆåŠŸã€‚å¦‚æœæ ¹èŠ‚ç‚¹ä¸åŒ¹é…æˆ–è€…Aä¸ºç©ºäº†å°±ç›´æ¥è¿”å›å¤±è´¥ã€‚å¦‚æœå¯ä»¥ç»§ç»­åˆ¤æ–­ï¼Œå°±ç»§ç»­åˆ¤æ–­å¯¹åº”çš„å·¦å³å­æ ‘ã€‚</p><p><code>(judgechildren(A,B) or self.isSubStructure(A.left,B) or self.isSubStructure(A.right,B))</code> åˆ¤æ–­ABä¸¤å­æ ‘ï¼›å…ˆåºåˆ¤æ–­å·¦å³å­æ ‘ï¼Œ<code>æ³¨æ„è¿™é‡Œæ˜¯self.isSubStructure</code>è¿›è¡Œé€’å½’å“¦~~</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSubStructure</span>(<span class="hljs-params">self, A: TreeNode, B: TreeNode</span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judgechildren</span>(<span class="hljs-params">A,B</span>):</span> <span class="hljs-comment">#åˆ¤æ–­ä»¥ABä¸ºæ ¹èŠ‚ç‚¹çš„æ¡ä»¶ä¸‹ï¼ŒBæ˜¯å¦ä¸ºAçš„å­ç»“æ„</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(B): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> A) <span class="hljs-keyword">or</span> (A.val!=B.val): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> judgechildren(A.right,B.right) <span class="hljs-keyword">and</span> judgechildren(A.left,B.left)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bool</span>(A <span class="hljs-keyword">and</span> B) <span class="hljs-keyword">and</span> (judgechildren(A,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.left,B) <span class="hljs-keyword">or</span> self.isSubStructure(A.right,B))<br></code></pre></td></tr></tbody></table></figure><blockquote><p>bool(A and B)æ³¨æ„è¦è½¬æ¢ä¸ºboolå˜é‡</p></blockquote><ul><li><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(MN)</p></li><li><p>ç©ºé—´å¤æ‚åº¦ O(M)ï¼š å½“æ ‘ Aå’Œæ ‘ B éƒ½é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’è°ƒç”¨æ·±åº¦æœ€å¤§ã€‚å½“ Mâ‰¤N æ—¶ï¼Œéå†æ ‘ A ä¸é€’å½’åˆ¤æ–­çš„æ€»é€’å½’æ·±åº¦ä¸º M ï¼›å½“ M&gt;N æ—¶ï¼Œæœ€å·®æƒ…å†µä¸ºéå†è‡³æ ‘ Aå¶å­èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ€»é€’å½’æ·±åº¦ä¸º Mã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer14.2 å‰ªç»³å­2</title>
      <link href="/2021/08/18/leetcode/leetcode-offer14-2/"/>
      <url>/2021/08/18/leetcode/leetcode-offer14-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­2</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m - 1] .è¯·é—® k[0]<em>k[1]</em>â€¦*k[m - 1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>2 &lt;= n &lt;= 1000</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’å…·ä½“å‚ç…§å‰ªç»³å­1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i):<br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j]))<br>        <span class="hljs-keyword">return</span> dp[n]%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure><p>ä½†æ˜¯è¿™ç§æ–¹å¼æ—¶é—´å¤æ‚åº¦è¾ƒå¤§ã€‚</p><p>æ­¥éª¤å¦‚ä¸‹ï¼š(æ•°å­¦å¯ä»¥è¯æ˜å°½é‡åˆ†æˆå¤šçš„3)<a href="https://leetcode-cn.com/problems/jian-sheng-zi-lcof/solution/mian-shi-ti-14-i-jian-sheng-zi-tan-xin-si-xiang-by/">å‚è§é¢˜è§£</a></p><ul><li>å¦‚æœ n == 2ï¼Œè¿”å›1ï¼Œå¦‚æœ n == 3ï¼Œè¿”å›2ï¼Œä¸¤ä¸ªå¯ä»¥åˆå¹¶æˆnå°äº4çš„æ—¶å€™è¿”å›n - 1</li><li>å¦‚æœ n == 4ï¼Œè¿”å›4</li><li>å¦‚æœ n &gt; 4ï¼Œåˆ†æˆå°½å¯èƒ½å¤šçš„é•¿åº¦ä¸º3çš„å°æ®µï¼Œæ¯æ¬¡å¾ªç¯é•¿åº¦nå‡å»3ï¼Œä¹˜ç§¯resä¹˜ä»¥3ï¼›æœ€åè¿”å›æ—¶ä¹˜ä»¥å°äºç­‰äº4çš„æœ€åä¸€å°æ®µï¼›æ¯æ¬¡ä¹˜æ³•æ“ä½œåè®°å¾—å–ä½™å°±è¡Œ<br>ä»¥ä¸Š2å’Œ3å¯ä»¥åˆå¹¶</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">4</span>:<br>            <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span><br>        res = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">4</span>: <span class="hljs-comment"># æ‰¾å¯»å°½é‡å¤šçš„3</span><br>            res = res * <span class="hljs-number">3</span> % <span class="hljs-number">1000000007</span><br>            n -= <span class="hljs-number">3</span><br>        <span class="hljs-keyword">return</span> res * n % <span class="hljs-number">1000000007</span> <span class="hljs-comment">#ä¹˜ä»¥å‰©ä½™çš„</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer14.1 å‰ªç»³å­1</title>
      <link href="/2021/08/17/leetcode/leetcode-offer14-1/"/>
      <url>/2021/08/17/leetcode/leetcode-offer14-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰ªç»³å­</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]â€¦k[m-1] ã€‚è¯·é—® k[0]<em>k[1]</em>â€¦*k[m-1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚</p><h4 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 2<br>è¾“å‡º: 1<br>è§£é‡Š:<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 1 </span>+ 1,<span class="hljs-number"> 1 </span>Ã—<span class="hljs-number"> 1 </span>= 1<br></code></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h4><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: 10<br>è¾“å‡º: 36<br>è§£é‡Š:<span class="hljs-number"> 10 </span>=<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 3 </span>+ 4,<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 3 </span>Ã—<span class="hljs-number"> 4 </span>= 36<br></code></pre></td></tr></tbody></table></figure><h5 id="æç¤ºï¼š">æç¤ºï¼š</h5><ul><li><code>2 &lt;= n &lt;= 58</code></li></ul><h4 id="é¢˜è§£">é¢˜è§£</h4><p>è¯¥é¢˜é‡‡ç”¨åŠ¨æ€è§„åˆ’æ¯”è¾ƒå¥½ç†è§£ï¼Œdp[i]è¡¨ç¤ºé•¿åº¦ä¸ºiçš„ç»³å­åˆ†æˆmçš„æœ€å¤§ä¹˜ç§¯ã€‚jè¡¨ç¤ºç¬¬ä¸€æ®µçš„é•¿åº¦ï¼Œéå†jçš„å–å€¼ï¼ˆå¯ä»¥ç›´æ¥ä»2å¼€å§‹ï¼‰ï¼Œåœ¨å‰©ä½™çš„i-jï¼ˆ<strong>ç¼©å°èŒƒå›´</strong>ï¼‰çš„é•¿åº¦é€‰æ‹©ä¸åˆ‡åˆ†æˆ–è€…æœ€å¤§ä¹˜ç§¯ï¼Œå³dp[i][j] = max(j*(i-j),j*dp[i-j])ã€‚<strong>ä½†æ˜¯å®é™…ä¸Šâ€œã€jã€‘â€å¹¶ä¸å…³å¿ƒ</strong>ï¼Œå› æ­¤å¯ä»¥ä¸dp[i]æ¯”è¾ƒ,é€‰æ‹©æœ€å¤§çš„æ›´æ–°dp[i]å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cuttingRope</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        dp = [<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]  <span class="hljs-comment"># è¡¨ç¤ºé•¿åº¦ä¸ºnçš„ç»³å­å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯</span><br>        dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>,n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,i): <span class="hljs-comment"># ç¬¬ä¸€æ®µ</span><br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],<span class="hljs-built_in">max</span>(j*(i-j),j*dp[i-j])) <br>                <span class="hljs-comment">#å‘å‰è·å–ä¿¡æ¯ï¼Œåœ¨é€‰å®šjä¹‹åï¼Œæ³¨æ„è¿˜è¦æ¯”è¾ƒdp[i]æœ¬èº«ï¼Œä»¥åŠåœ¨ç¬¬ä¸€æ®µjçš„åŸºç¡€ä¸Šå‰©ä¸‹çš„æ˜¯å¦åˆ‡</span><br>        <span class="hljs-keyword">return</span> dp[n]<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer07 é‡å»ºäºŒå‰æ ‘</title>
      <link href="/2021/08/17/leetcode/leetcode-offer07/"/>
      <url>/2021/08/17/leetcode/leetcode-offer07/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡å»ºäºŒå‰æ ‘</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·æ„å»ºè¯¥äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><p>å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p><img src="https://picture.mulindya.com/leetcode-offer07-tree.jpg" alt="img"></p><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">Input: <span class="hljs-attr">preorder</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>], <span class="hljs-attr">inorder</span> = [<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">20</span>,<span class="hljs-number">7</span>]<br>Output: [<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">15</span>,<span class="hljs-number">7</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Input: preorder = <span class="hljs-comment">[-1]</span>, inorder = <span class="hljs-comment">[-1]</span><br>Output: <span class="hljs-comment">[-1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 5000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨é—­åŒ…å‡½æ•°ï¼Œæ„å»ºå¯¹åº”åŒºåŸŸçš„æ ‘ï¼Œè¿”å›æ ¹èŠ‚ç‚¹ã€‚å…³é”®æ­¥éª¤æ˜¯æŸ¥æ‰¾åˆ°rootindexåœ¨ä¸­åºéå†ä¸­çš„ä½ç½®ï¼Œç„¶ååˆ†åˆ«æ„å»ºå¯¹åº”çš„å­æ ‘ã€‚åœ¨æŸ¥æ‰¾æ—¶å¯ä»¥å…ˆå»ºç«‹å“ˆå¸Œè¡¨ï¼Œä½¿ç”¨å­—å…¸å’Œæšä¸¾ç»“åˆæ„å»ºflag <code>flag = {ele:i for i,ele in enumerate(inorder)}</code>ã€‚å¯ä»¥å‡å°‘æ‰§è¡Œæ—¶é—´çš„å¼€é”€ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildTree</span>(<span class="hljs-params">self, preorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], inorder: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; TreeNode:</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">rootindex,ins,ine</span>):</span><br>            <span class="hljs-keyword">if</span>(ins&gt;ine): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>            root = TreeNode(preorder[rootindex])<br>            <span class="hljs-comment"># t = ins</span><br>            <span class="hljs-comment"># while(inorder[t]!=preorder[rootindex]):t+=1</span><br>            t = flag[preorder[rootindex]]<br>            root.left = func(rootindex+<span class="hljs-number">1</span>,ins,t-<span class="hljs-number">1</span>)<br>            root.right = func(rootindex+t-ins+<span class="hljs-number">1</span>,t+<span class="hljs-number">1</span>,ine)<br>            <span class="hljs-keyword">return</span> root<br>        <span class="hljs-comment"># æ„å»ºå“ˆå¸Œè¡¨ åœ¨æŸ¥æ‰¾æ—¶æ›´æ–¹ä¾¿</span><br>        flag = {ele:i <span class="hljs-keyword">for</span> i,ele <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(inorder)} <span class="hljs-comment">#ä½¿ç”¨å­—å…¸æ„å»º</span><br>        root = func(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(inorder)-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢¯åº¦æ¶ˆå¤±&amp;æ¢¯åº¦çˆ†ç‚¸</title>
      <link href="/2021/08/17/deep_learning/gradient-exp/"/>
      <url>/2021/08/17/deep_learning/gradient-exp/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ¢è®¨æ·±åº¦å­¦ä¹ ä¸­ç»å¸¸æåˆ°çš„æ¦‚å¿µâ€“æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ ã€‚ä»–ä»¬æ˜¯å½±å“æ¨¡å‹æ”¶æ•›ï¼Œå­¦ä¹ å¥½åçš„é‡è¦å› ç´ ã€‚å¯¹æ­¤ç°è±¡ä¹Ÿæå‡ºäº†å¾ˆå¤šå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æ¥å¤§è‡´åšä¸€ä¸ªæ€»ç»“ï¼Œå¯¹å…¶æ¦‚å¿µï¼ŒåŸå› å’Œç›¸å…³çš„è§£å†³æ–¹æ¡ˆè¿›è¡Œæ¢è®¨å­~~</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸-æ¢¯åº¦æ¶ˆå¤±">æ¢¯åº¦çˆ†ç‚¸&amp;æ¢¯åº¦æ¶ˆå¤±</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>æ¢¯åº¦æ¶ˆå¤±å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå°ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆåŠ¨ä¸äº†ï¼‰ã€‚<br>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› ">æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸åŸå› </h2><ul><li><p>è®­ç»ƒæ–¹å¼ï¼šç½‘ç»œè®­ç»ƒæ—¶é‡‡ç”¨åå‘ä¼ æ’­çš„æ–¹å¼ï¼Œä¼šä½¿ç”¨é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼Œå› æ­¤å¯¹æ¿€æ´»å‡½æ•°æ±‚å¯¼æ—¶ï¼Œå¦‚æœæƒé‡ä¹˜ä»¥æ¿€æ´»å‡½æ•°å¯¼æ•°æ­¤éƒ¨åˆ†å¤§äº1ï¼Œé‚£ä¹ˆå½“å±‚æ•°å¾ˆå¤šæ—¶ï¼Œæ±‚å‡ºçš„æ¢¯åº¦æ›´æ–°å°†ä»¥æŒ‡æ•°çš„å½¢å¼å¢åŠ ï¼Œåˆ™ä¼šæ¢¯åº¦çˆ†ç‚¸ã€‚å¦‚æœæ­¤éƒ¨åˆ†å°äº1ï¼Œåˆ™éšç€å±‚æ•°å¢å¤šï¼Œæ±‚å‡ºçš„æ¢¯åº¦ä¼šæŒ‡æ•°è¡°å‡ï¼Œåˆ™ä¼šæ¢¯åº¦æ¶ˆå¤±ã€‚</p></li><li><p>æ¿€æ´»å‡½æ•°ï¼šå¦‚æœé€‰ç”¨sigmoidï¼Œ$S(x) = \frac{1}{1+e^{-x}}$ ï¼Œè€Œå…¶å¯¼æ•° $Sâ€™(x) = \frac{e<sup>{-x}}{(1+e</sup>{-x})^2}=S(x)(1-S(x))$ ï¼Œå…¶æ¢¯åº¦ä¸ä¼šè¶…è¿‡0.25ã€‚</p></li><li><p>æƒé‡åˆå§‹å€¼ï¼šå› æ­¤ä¸€ä¸ªå‡å€¼ä¸º0æ ‡å‡†å·®ä¸º1çš„é«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–å‚æ•°å¾ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±ï¼Œå› ä¸ºæƒé‡é›†ä¸­åœ¨-1åˆ°1ä¹‹é—´ã€‚å¦‚æœåˆå§‹åŒ–æ¯”è¾ƒå¤§çš„å€¼</p></li><li><p>æ ¹æ®é“¾å¼æ±‚å¯¼å’Œåå‘ä¼ æ’­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—å‡ºï¼Œå…¶ä¸­Cæ˜¯ä»£ä»·å‡½æ•°</p><p><img src="https://picture.mulindya.com/gradient-exp-pic2.png" alt=""></p><p><img src="https://picture.mulindya.com/gradient-exp-pic3.png" alt=""></p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><h3 id="1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚Heæ–¹æ³•">1ï¼Œé‡‡ç”¨å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚æ¯”å¦‚<a href="https://blog.csdn.net/u010505915/article/details/106608922/?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.base&amp;spm=1001.2101.3001.4242">Heæ–¹æ³•</a></h3><ol><li>å‰å‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€å±‚çš„å·ç§¯è®¡ç®—ç»“æœçš„æ–¹å·®ä¸º1.</li><li>åå‘ä¼ æ’­çš„æ—¶å€™, æ¯ä¸€ å±‚çš„ç»§ç»­å¾€å‰ä¼ çš„æ¢¯åº¦æ–¹å·®ä¸º1(å› ä¸ºæ¯å±‚ä¼šæœ‰ä¸¤ä¸ªæ¢¯åº¦çš„è®¡ç®—, ä¸€ä¸ªç”¨æ¥æ›´æ–°å½“å‰å±‚çš„æƒé‡, ä¸€ä¸ªç»§ç»­ä¼ æ’­, ç”¨äºå‰é¢å±‚çš„æ¢¯åº¦çš„è®¡ç®—.)</li></ol><h3 id="2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸">2ï¼Œæ¢¯åº¦å‰ªåˆ‡â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h3 id="3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸">3ï¼Œæ­£åˆ™åŒ–â€“æ¢¯åº¦çˆ†ç‚¸</h3><p>â€‹é‡‡ç”¨æƒé‡æ­£åˆ™åŒ–ï¼Œä¸»è¦æ˜¯é€šè¿‡å¯¹ç½‘ç»œæƒé‡åšæ­£åˆ™æ¥é™åˆ¶è¿‡æ‹Ÿåˆï¼ŒåŒæ—¶ï¼Œå¦‚æœå‘ç”Ÿæ¢¯åº¦çˆ†ç‚¸ï¼Œé‚£ä¹ˆæƒå€¼çš„èŒƒæ•°å°±ä¼šå˜çš„éå¸¸å¤§ï¼Œåè¿‡æ¥ï¼Œé€šè¿‡é™åˆ¶æ­£åˆ™åŒ–é¡¹çš„å¤§å°ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶æ¢¯åº¦çˆ†ç‚¸çš„å‘ç”Ÿã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯l1æ­£åˆ™ï¼Œå’Œl2æ­£åˆ™ï¼Œåœ¨å„ä¸ªæ·±åº¦æ¡†æ¶ä¸­éƒ½æœ‰ç›¸åº”çš„APIå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œæ¯”å¦‚åœ¨pytorchä¸­ï¼Œè‹¥æ­å»ºç½‘ç»œçš„æ—¶å€™å·²ç»è®¾ç½®äº†æ­£åˆ™åŒ–å‚æ•°ï¼Œåˆ™è°ƒç”¨ä»¥ä¸‹ä»£ç å¯ä»¥ç›´æ¥è®¡ç®—å‡ºæ­£åˆ™æŸå¤±ã€‚<br>â€‹torch.optimé›†æˆäº†å¾ˆå¤šä¼˜åŒ–å™¨ï¼Œå¦‚SGDï¼ŒAdadeltaï¼ŒAdamï¼ŒAdagradï¼ŒRMSpropç­‰ï¼Œè¿™äº›ä¼˜åŒ–å™¨è‡ªå¸¦çš„ä¸€ä¸ªå‚æ•°weight_decayï¼Œç”¨äºæŒ‡å®šæƒå€¼è¡°å‡ç‡ï¼Œç›¸å½“äºL2æ­£åˆ™åŒ–ä¸­çš„Î»å‚æ•°ï¼Œæ³¨æ„torch.optimé›†æˆçš„ä¼˜åŒ–å™¨åªæœ‰L2æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ³¨é‡Šï¼Œå‚æ•°weight_decay çš„è§£ææ˜¯ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">weight_decay (<span class="hljs-built_in">float</span>, optional): weight decay (L2 penalty) (default: <span class="hljs-number">0</span>)<br>optimizer = optim.Adam(model.parameters(),lr=learning_rate,weight_decay=<span class="hljs-number">0.01</span>)<br></code></pre></td></tr></tbody></table></figure><p>lossè®¡ç®—å…¬å¼<br>$$<br>Loss = (y-W<sup>Tx)</sup>2+\alpha {\Vert W \Vert}^2<br>$$</p><h3 id="4ï¼Œæ¿€æ´»å‡½æ•°">4ï¼Œæ¿€æ´»å‡½æ•°</h3><h4 id="1-ReLUå‡½æ•°ï¼š">1.ReLUå‡½æ•°ï¼š</h4><p>å¦‚æœæ¿€æ´»å‡½æ•°çš„å¯¼æ•°ä¸º1ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸çš„é—®é¢˜äº†ï¼Œæ¯å±‚çš„ç½‘ç»œéƒ½å¯ä»¥å¾—åˆ°ç›¸åŒçš„æ›´æ–°é€Ÿåº¦ï¼ŒReLUå°±è¿™æ ·åº”è¿è€Œç”Ÿã€‚</p><p>ReLUçš„ä¸»è¦è´¡çŒ®åœ¨äºï¼š</p><p><img src="https://picture.mulindya.com/gradient-exp-pic4.png" alt=""></p><h5 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h5><p>è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±ã€çˆ†ç‚¸çš„é—®é¢˜ã€‚<br>è®¡ç®—æ–¹ä¾¿ï¼Œè®¡ç®—é€Ÿåº¦å¿«ã€‚<br>åŠ é€Ÿäº†ç½‘ç»œçš„è®­ç»ƒã€‚</p><h5 id="ç¼ºç‚¹ï¼š">ç¼ºç‚¹ï¼š</h5><p>ç”±äºè´Ÿæ•°éƒ¨åˆ†æ’ä¸º0ï¼Œä¼šå¯¼è‡´ä¸€äº›ç¥ç»å…ƒæ— æ³•æ¿€æ´»ï¼ˆå¯é€šè¿‡è®¾ç½®å°å­¦ä¹ ç‡éƒ¨åˆ†è§£å†³ï¼‰ã€‚<br>è¾“å‡ºä¸æ˜¯ä»¥0ä¸ºä¸­å¿ƒçš„ã€‚</p><h4 id="2-LeakyReLUå‡½æ•°ï¼š">2.LeakyReLUå‡½æ•°ï¼š</h4><p>LeakyReLUå°±æ˜¯ä¸ºäº†è§£å†³ReLUçš„0åŒºé—´å¸¦æ¥çš„å½±å“ï¼Œè¯¥å‡½æ•°è¾“å‡ºå¯¹è´Ÿå€¼è¾“å…¥æœ‰å¾ˆå°çš„å¡åº¦ï¼Œç”±äºå¯¼æ•°æ€»æ˜¯ä¸ä¸ºé›¶ï¼Œè¿™èƒ½å‡å°‘é™é»˜ç¥ç»å…ƒçš„å‡ºç°ï¼Œå…è®¸åŸºäºæ¢¯åº¦çš„å­¦ä¹ ï¼ˆè™½ç„¶ä¼šå¾ˆæ…¢ï¼‰ï¼Œè§£å†³äº†ReLUå‡½æ•°è¿›å…¥è´ŸåŒºé—´åï¼Œå¯¼è‡´ç¥ç»å…ƒä¸å­¦ä¹ çš„é—®é¢˜ã€‚</p><p><img src="https://picture.mulindya.com/gradient-exp-pic5.png" alt=""></p><h4 id="3-ELUå‡½æ•°ï¼š">3.ELUå‡½æ•°ï¼š</h4><p><img src="https://picture.mulindya.com/gradient-exp-pic6.png" alt=""></p><ul><li><p>èåˆäº†sigmoidå’ŒReLUï¼Œ<strong>å·¦ä¾§å…·æœ‰è½¯é¥±å’Œæ€§ï¼Œå³ä¾§æ— é¥±å’Œæ€§</strong>ã€‚</p></li><li><p>å³ä¾§çº¿æ€§éƒ¨åˆ†ä½¿å¾—ELUèƒ½å¤Ÿç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼Œè€Œå·¦ä¾§è½¯é¥±èƒ½å¤Ÿè®©ELUå¯¹è¾“å…¥å˜åŒ–æˆ–å™ªå£°æ›´é²æ£’ã€‚</p></li><li><p>ELUçš„è¾“å‡ºå‡å€¼æ¥è¿‘äºé›¶ï¼Œæ‰€ä»¥æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼Œä½†ç›¸å¯¹äºLeakyReLUæ¥è¯´ï¼Œè®¡ç®—è¦æ›´è€—æ—¶é—´ä¸€äº›ã€‚</p></li></ul><p><font size="3" color="BlueViolet">å°çŸ¥è¯†ï¼š</font></p><blockquote><p>æ¢¯åº¦é¥±å’Œå¸¸å¸¸æ˜¯å’Œæ¿€æ´»å‡½æ•°ç›¸å…³çš„ï¼Œæ¯”å¦‚sigmodå’Œtanhå°±å±äºå…¸å‹å®¹æ˜“è¿›å…¥æ¢¯åº¦é¥±å’ŒåŒºçš„å‡½æ•°ï¼Œå³è‡ªå˜é‡è¿›å…¥æŸä¸ªåŒºé—´åï¼Œæ¢¯åº¦å˜åŒ–ä¼šéå¸¸å°ï¼Œè¡¨ç°åœ¨å›¾ä¸Šå°±æ˜¯å‡½æ•°æ›²çº¿è¿›å…¥æŸäº›åŒºåŸŸåï¼Œè¶Šæ¥è¶Šè¶‹è¿‘ä¸€æ¡ç›´çº¿ï¼Œæ¢¯åº¦å˜åŒ–å¾ˆå°ï¼Œæ¢¯åº¦é¥±å’Œä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦å˜åŒ–ç¼“æ…¢ï¼Œä»è€Œé€ æˆæ¨¡å‹è®­ç»ƒç¼“æ…¢</p></blockquote><h3 id="4ï¼ŒBatch-Normalization">4ï¼ŒBatch Normalization</h3><p>BNæ˜¯æ·±åº¦å­¦ä¹ å‘å±•ä»¥æ¥æå‡ºçš„æœ€é‡è¦çš„æˆæœä¹‹ä¸€äº†ï¼Œç›®å‰å·²ç»è¢«å¹¿æ³›çš„åº”ç”¨åˆ°äº†å„å¤§ç½‘ç»œä¸­ï¼Œå…·æœ‰åŠ é€Ÿç½‘ç»œæ”¶æ•›é€Ÿåº¦ï¼Œæå‡è®­ç»ƒç¨³å®šæ€§çš„æ•ˆæœï¼Œ**BNæœ¬è´¨ä¸Šæ˜¯è§£å†³åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦é—®é¢˜ã€‚**BNå…¨åæ˜¯Batch Normalizationï¼Œç®€ç§°BNï¼Œå³æ‰¹è§„èŒƒåŒ–ï¼Œ<strong>é€šè¿‡è§„èŒƒåŒ–æ“ä½œå°†è¾“å‡ºä¿¡å·xè§„èŒƒåŒ–ä¿è¯ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</strong><br>åå‘ä¼ æ’­å¼å­ä¸­æœ‰wçš„å­˜åœ¨ï¼Œæ‰€ä»¥wçš„å¤§å°å½±å“äº†æ¢¯åº¦çš„æ¶ˆå¤±å’Œçˆ†ç‚¸ï¼Œ<strong>BNå°±æ˜¯é€šè¿‡å¯¹æ¯ä¸€å±‚çš„è¾“å‡ºè§„èŒƒä¸ºå‡å€¼å’Œæ–¹å·®ä¸€è‡´çš„æ–¹æ³•</strong>ï¼Œæ¶ˆé™¤äº†wå¸¦æ¥çš„æ”¾å¤§ç¼©å°çš„å½±å“ï¼Œè¿›è€Œè§£å†³æ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸çš„é—®é¢˜ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºBNå°†è¾“å‡ºä»é¥±å’ŒåŒºæ‹‰å€’äº†éé¥±å’ŒåŒºã€‚<br>æœ‰å…³Batch Normalizationè¯¦ç»†çš„å†…å®¹å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼š <a href="http://blog.csdn.net/qq_25737169/article/details/79048516">Batch Normalization</a></p><h3 id="5-æ®‹å·®ç»“æ„">5,æ®‹å·®ç»“æ„</h3><p>äº‹å®ä¸Šï¼Œå°±æ˜¯æ®‹å·®ç½‘ç»œçš„å‡ºç°å¯¼è‡´äº†image netæ¯”èµ›çš„ç»ˆç»“ï¼Œè‡ªä»æ®‹å·®æå‡ºåï¼Œå‡ ä¹æ‰€æœ‰çš„æ·±åº¦ç½‘ç»œéƒ½ç¦»ä¸å¼€æ®‹å·®çš„èº«å½±ï¼Œç›¸æ¯”è¾ƒä¹‹å‰çš„å‡ å±‚ï¼Œå‡ åå±‚çš„æ·±åº¦ç½‘ç»œï¼Œåœ¨æ®‹å·®ç½‘ç»œé¢å‰éƒ½ä¸å€¼ä¸€æï¼Œæ®‹å·®å¯ä»¥å¾ˆè½»æ¾çš„æ„å»ºå‡ ç™¾å±‚ï¼Œä¸€åƒå¤šå±‚çš„ç½‘ç»œè€Œä¸ç”¨æ‹…å¿ƒæ¢¯åº¦æ¶ˆå¤±è¿‡å¿«çš„é—®é¢˜ï¼ŒåŸå› å°±åœ¨äºæ®‹å·®çš„æ·å¾„ï¼ˆshortcutï¼‰éƒ¨åˆ†ã€‚åŸç†å¯å‚è§ï¼š<a href="https://zhuanlan.zhihu.com/p/42706477">æ®‹å·®ç»“æ„</a></p><h3 id="6ï¼ŒLSTMç½‘ç»œ">6ï¼ŒLSTMç½‘ç»œ</h3><p>LSTMæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œRNNçš„å˜ä½“ï¼Œå…¨ç§°æ˜¯é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆlong-short term memory networksï¼‰ï¼Œå®ƒæ˜¯ä¸é‚£ä¹ˆå®¹æ˜“å‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±çš„ï¼Œä¸»è¦åŸå› åœ¨äºLSTMå†…éƒ¨å¤æ‚çš„â€œé—¨â€ç»“æ„ï¼Œ<strong>LSTMé€šè¿‡å®ƒå†…éƒ¨çš„â€œé—¨â€å¯ä»¥æ¥ä¸‹æ¥æ›´æ–°çš„æ—¶å€™â€œè®°ä½â€å‰å‡ æ¬¡è®­ç»ƒçš„â€œæ®‹ç•™è®°å¿†â€</strong>ï¼Œå› æ­¤ï¼Œç»å¸¸ç”¨äºç”Ÿæˆæ–‡æœ¬ä¸­ã€‚å…³äºLSTMçš„åŸç†è¯¦è§£åç»­å†åˆ†æã€‚<a href="https://zhuanlan.zhihu.com/p/32085405">LSTM</a></p><p><img src="https://picture.mulindya.com/gradient-exp-pic7.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer27 äºŒå‰æ ‘çš„é•œåƒ</title>
      <link href="/2021/08/16/leetcode/leetcode-offer27/"/>
      <url>/2021/08/16/leetcode/leetcode-offer27/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒå‰æ ‘çš„é•œåƒ</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯¥å‡½æ•°è¾“å‡ºå®ƒçš„é•œåƒã€‚</p><p>ä¾‹å¦‚è¾“å…¥ï¼š</p><p>â€‹     4<br>2     7<br>1   3  6   9<br>é•œåƒè¾“å‡ºï¼š</p><p>â€‹     4<br>7     2<br>9   6 3   1</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šroot = <span class="hljs-string">[4,2,7,1,3,6,9]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[4,7,2,9,6,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= èŠ‚ç‚¹ä¸ªæ•° &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœä¸ºç©ºæ ‘å°±è¿”å›ç©ºã€‚ç„¶åä¿å­˜å·¦å­æ ‘ï¼Œç¿»è½¬å³å­æ ‘åèµ‹å€¼ä¸ºå·¦èŠ‚ç‚¹ï¼Œç¿»è½¬å·¦å­æ ‘èµ‹å€¼ä¸ºå³èŠ‚ç‚¹ã€‚</p><p><strong>if not(root.left or root.right): return root #ä¸ºå•ä¸€èŠ‚ç‚¹å°±ç›´æ¥è¿”å› å¯ä»¥çœç•¥ï¼Œå› ä¸ºå·²ç»åŒ…å«åœ¨å†…</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mirrorTree</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; TreeNode:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(root): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        x = root.left<br>        root.left = self.mirrorTree(root.right)<br>        root.right = self.mirrorTree(x)<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer06 åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</title>
      <link href="/2021/08/16/leetcode/leetcode-offer25/"/>
      <url>/2021/08/16/leetcode/leetcode-offer25/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»ç„¶æ˜¯é€’å¢æ’åºçš„ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥ï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">4</span>, <span class="hljs-number">1</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">4</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¦‚æœç›´æ¥ç”¨p = l.next  é‚£ä¹ˆä¸èƒ½è¾¾åˆ°â€œæŒ‡é’ˆâ€çš„æ•ˆæœã€‚è¿™æ ·çš„æ“ä½œå¯¹læ²¡æœ‰å½±å“ï¼Œæ— æ³•æ›´æ–°ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        l = ListNode(<span class="hljs-number">0</span>) <br>        p = l.<span class="hljs-built_in">next</span>     <br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure><p>æ­£ç¡®æ–¹å¼ï¼Œä¸èƒ½ä½¿ç”¨ p = p.nextï¼Œ å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼ï¼Œæ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´lï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mergeTwoLists</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span><br>        p = l = ListNode(<span class="hljs-number">0</span>) <span class="hljs-comment">#å…ˆæŒ‡å‘åŒä¸€å—ç©ºé—´</span><br>        <span class="hljs-comment">#p = p.next      </span><br>        <span class="hljs-comment"># ä¸èƒ½ä½¿ç”¨p = p.next  å› ä¸ºnextæ˜¯ä¸€ä¸ªNoneå€¼æ”¹å˜på€¼å¹¶ä¸ä¼šä¿®æ”¹lå¯¹åº”çš„nextã€‚</span><br>        <span class="hljs-comment"># æ‰€ä»¥é¦–å…ˆæµ…æ‹·è´ï¼Œç„¶åå†ç›´æ¥æ”¹å˜å†…éƒ¨çš„nextï¼Œæ‰èƒ½å¯¹åº”çš„æ”¹å˜lçš„å†…å®¹</span><br>        <span class="hljs-keyword">while</span>(l1 <span class="hljs-keyword">and</span> l2):<br>            <span class="hljs-keyword">if</span>(l1.val&gt;l2.val):<br>                p.<span class="hljs-built_in">next</span> = l2<br>                l2 = l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                p.<span class="hljs-built_in">next</span> = l1<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            p = p.<span class="hljs-built_in">next</span><br>        p.<span class="hljs-built_in">next</span> = l1 <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">return</span> l.<span class="hljs-built_in">next</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer13 æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</title>
      <link href="/2021/08/14/leetcode/leetcode-offer13/"/>
      <url>/2021/08/14/leetcode/leetcode-offer13/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœºå™¨äººçš„è¿åŠ¨èŒƒå›´</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ°ä¸Šæœ‰ä¸€ä¸ªmè¡Œnåˆ—çš„æ–¹æ ¼ï¼Œä»åæ ‡ [0,0] åˆ°åæ ‡ [m-1,n-1] ã€‚ä¸€ä¸ªæœºå™¨äººä»åæ ‡ [0, 0] çš„æ ¼å­å¼€å§‹ç§»åŠ¨ï¼Œå®ƒæ¯æ¬¡å¯ä»¥å‘å·¦ã€å³ã€ä¸Šã€ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼ˆä¸èƒ½ç§»åŠ¨åˆ°æ–¹æ ¼å¤–ï¼‰ï¼Œä¹Ÿä¸èƒ½è¿›å…¥è¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œå¤§äºkçš„æ ¼å­ã€‚ä¾‹å¦‚ï¼Œå½“kä¸º18æ—¶ï¼Œæœºå™¨äººèƒ½å¤Ÿè¿›å…¥æ–¹æ ¼ [35, 37] ï¼Œå› ä¸º3+5+3+7=18ã€‚ä½†å®ƒä¸èƒ½è¿›å…¥æ–¹æ ¼ [35, 38]ï¼Œå› ä¸º3+5+3+8=19ã€‚è¯·é—®è¯¥æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾å¤šå°‘ä¸ªæ ¼å­ï¼Ÿ</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">m</span> = <span class="hljs-number">3</span>, <span class="hljs-attr">n</span> = <span class="hljs-number">1</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= n,m &lt;= 100</code></li><li><code>0 &lt;= k &lt;= 20</code></li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><h3 id="è§£æ³•ä¸€-DFS">è§£æ³•ä¸€ DFS</h3><ul><li>æ·±æœ+å‰ªæ</li><li>ä¼˜åŒ–æŠ€å·§å°±æ˜¯åªåˆ¤æ–­å³è¾¹å’Œä¸‹è¾¹å°±è¡Œäº†ï¼Œå› ä¸ºå·¦å’Œä¸Šæ˜¯ä¸€å®šä¼šåœ¨æœç´¢çš„è¿‡ç¨‹ä¸­è¢«åŒ…æ‹¬çš„</li></ul><p>â€‹        <font color="purple">æ³¨æ„[[1]*n]*m æ˜¯æµ…æ‹·è´å¤åˆ¶ï¼ˆâ€œ=â€å¤åˆ¶ï¼‰å› æ­¤å¦‚æœä¸€ä¸ªå…ƒç´ æ”¹å˜äº†ï¼Œæ­¤åˆ—éƒ½ä¼šæ”¹å˜</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m, n, k</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type m: int</span><br><span class="hljs-string">        :type n: int</span><br><span class="hljs-string">        :type k: int</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        """</span><br>        <br>        fflag = [[<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m)]  <br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numsum</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span><br>            <span class="hljs-keyword">while</span>(i):<br>                <span class="hljs-built_in">sum</span>+=(i%<span class="hljs-number">10</span>)<br>                i = i//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">while</span>(j):<br>                <span class="hljs-built_in">sum</span>+=(j%<span class="hljs-number">10</span>)<br>                j = j//<span class="hljs-number">10</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> m&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> n&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (fflag[i][j]==<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (numsum(i,j)&gt;k): <br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            fflag[i][j] = <span class="hljs-number">0</span><br>            <span class="hljs-comment"># return 1+dfs(i+1,j)+dfs(i-1,j)+dfs(i,j+1)+dfs(i,j-1)</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>+dfs(i+<span class="hljs-number">1</span>,j)+dfs(i,j+<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">return</span> dfs(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•äºŒ-é€’æ¨">è§£æ³•äºŒ é€’æ¨</h3><h4 id="æ€è·¯">æ€è·¯</h4><p>è€ƒè™‘åˆ°æ–¹æ³•ä¸€æåˆ°æœç´¢çš„æ–¹å‘åªéœ€è¦æœä¸‹æˆ–æœå³ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ç§é€’æ¨çš„æ±‚è§£æ–¹æ³•ã€‚</p><h4 id="ç®—æ³•">ç®—æ³•</h4><p>å®šä¹‰ <code>vis[i][j]</code> ä¸º <code>(i, j)</code> åæ ‡æ˜¯å¦å¯è¾¾ï¼Œå¦‚æœå¯è¾¾è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚</p><p>é¦–å…ˆ (i, j) æœ¬èº«éœ€è¦å¯ä»¥è¿›å…¥ï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­ i å’Œ j çš„æ•°ä½ä¹‹å’Œæ˜¯å¦å¤§äº k ï¼Œå¦‚æœå¤§äºçš„è¯ç›´æ¥è®¾ç½® <code>vis[i][j]</code> ä¸ºä¸å¯è¾¾å³å¯ã€‚</p><p>å¦åˆ™ï¼Œå‰é¢æåˆ°æœç´¢æ–¹å‘åªéœ€æœä¸‹æˆ–æœå³ï¼Œå› æ­¤ (i, j) çš„æ ¼å­åªä¼šä» (i - 1, j) æˆ–è€… (i, j - 1) ä¸¤ä¸ªæ ¼å­èµ°è¿‡æ¥ï¼ˆä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼‰ï¼Œé‚£ä¹ˆ <code>vis[i][j]</code> æ˜¯å¦å¯è¾¾çš„çŠ¶æ€åˆ™å¯ç”±å¦‚ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°ï¼š</p><p>å³åªè¦æœ‰ä¸€ä¸ªæ ¼å­å¯è¾¾ï¼Œé‚£ä¹ˆ (i, j) è¿™ä¸ªæ ¼å­å°±æ˜¯å¯è¾¾çš„ï¼Œå› æ­¤æˆ‘ä»¬åªè¦éå†æ‰€æœ‰æ ¼å­ï¼Œé€’æ¨è®¡ç®—å‡ºå®ƒä»¬æ˜¯å¦å¯è¾¾ç„¶åç”¨å˜é‡ ans è®°å½•å¯è¾¾çš„æ ¼å­æ•°é‡å³å¯ã€‚</p><p>åˆå§‹æ¡ä»¶ <code>vis[i][j] = 1</code> ï¼Œé€’æ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­æ³¨æ„è¾¹ç•Œçš„å¤„ç†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        vis = <span class="hljs-built_in">set</span>([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-keyword">if</span> ((i - <span class="hljs-number">1</span>, j) <span class="hljs-keyword">in</span> vis <span class="hljs-keyword">or</span> (i, j - <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> vis) <span class="hljs-keyword">and</span> digitsum(i) + digitsum(j) &lt;= k:<br>                    vis.add((i, j))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(vis)<br></code></pre></td></tr></tbody></table></figure><h3 id="è§£æ³•ä¸‰">è§£æ³•ä¸‰</h3><h4 id="æ€è·¯å’Œç®—æ³•">æ€è·¯å’Œç®—æ³•</h4><p>æˆ‘ä»¬å°†è¡Œåæ ‡å’Œåˆ—åæ ‡æ•°ä½ä¹‹å’Œå¤§äº k çš„æ ¼å­çœ‹ä½œéšœç¢ç‰©ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±æ˜¯ä¸€é“å¾ˆä¼ ç»Ÿçš„æœç´¢é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–è€…æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è§£å†³å®ƒï¼Œæœ¬æ–‡é€‰æ‹©ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹æ³•æ¥è®²è§£ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¡ç®—ä¸€ä¸ªæ•°çš„æ•°ä½ä¹‹å’Œå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å¯¹æ•° x æ¯æ¬¡å¯¹ 10 å–ä½™ï¼Œå°±èƒ½çŸ¥é“æ•° x çš„ä¸ªä½æ•°æ˜¯å¤šå°‘ï¼Œç„¶åå†å°† x é™¤ 10ï¼Œè¿™ä¸ªæ“ä½œç­‰ä»·äºå°† x çš„åè¿›åˆ¶æ•°å‘å³ç§»ä¸€ä½ï¼Œåˆ é™¤ä¸ªä½æ•°ï¼ˆç±»ä¼¼äºäºŒè¿›åˆ¶ä¸­çš„ &gt;&gt; å³ç§»è¿ç®—ç¬¦ï¼‰ï¼Œä¸æ–­é‡å¤ç›´åˆ° x ä¸º 0 æ—¶ç»“æŸã€‚</p><p>åŒæ—¶è¿™é“é¢˜è¿˜æœ‰ä¸€ä¸ªéšè—çš„ä¼˜åŒ–ï¼šæˆ‘ä»¬åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­æœç´¢æ–¹å‘å¯ä»¥ç¼©å‡ä¸ºå‘å³å’Œå‘ä¸‹ï¼Œè€Œä¸å¿…å†å‘ä¸Šå’Œå‘å·¦è¿›è¡Œæœç´¢ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å±•ç¤ºäº† 16 * 16 çš„åœ°å›¾éšç€é™åˆ¶æ¡ä»¶ k çš„æ”¾å¤§ï¼Œå¯è¡Œæ–¹æ ¼çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ¯ä¸ªæ ¼å­é‡Œçš„å€¼ä¸ºè¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œï¼Œè“è‰²æ–¹æ ¼ä»£è¡¨ééšœç¢æ–¹æ ¼ï¼Œå³å…¶å€¼å°äºç­‰äºå½“å‰çš„é™åˆ¶æ¡ä»¶ kã€‚æˆ‘ä»¬å¯ä»¥å‘ç°éšç€é™åˆ¶æ¡ä»¶ k çš„å¢å¤§ï¼Œ(0, 0) æ‰€åœ¨çš„è“è‰²æ–¹æ ¼åŒºåŸŸå†…æ–°åŠ å…¥çš„ééšœç¢æ–¹æ ¼éƒ½å¯ä»¥ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ã€‚è€Œå…¶ä»–ä¸è¿é€šçš„è“è‰²æ–¹æ ¼åŒºåŸŸä¼šéšç€ k çš„å¢å¤§è€Œè¿é€šï¼Œä¸”è¿é€šçš„æ—¶å€™ä¹Ÿæ˜¯ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æœç´¢æ–¹å‘ç¼©å‡ä¸ºå‘å³æˆ–å‘ä¸‹ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">digitsum</span>(<span class="hljs-params">n</span>):</span><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> n:<br>        ans += n % <span class="hljs-number">10</span><br>        n //= <span class="hljs-number">10</span><br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">movingCount</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br>        q = Queue()<br>        q.put((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<br>        s = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> q.empty():<br>            x, y = q.get()<br>            <span class="hljs-keyword">if</span> (x, y) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= x &lt; m <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; n <span class="hljs-keyword">and</span> digitsum(x) + digitsum(y) &lt;= k:<br>                s.add((x, y))<br>                <span class="hljs-keyword">for</span> nx, ny <span class="hljs-keyword">in</span> [(x + <span class="hljs-number">1</span>, y), (x, y + <span class="hljs-number">1</span>)]:<br>                    q.put((nx, ny))<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s)<br></code></pre></td></tr></tbody></table></figure><h4 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h4><h5 id="æ—¶é—´å¤æ‚åº¦ï¼šO-mn">æ—¶é—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚è€ƒè™‘æ‰€æœ‰æ ¼å­éƒ½èƒ½è¿›å…¥ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™ä¸€ä¸ªæ ¼å­æœ€å¤šä¼šè¢«è®¿é—®çš„æ¬¡æ•°ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(2mn)=O(mn)ã€‚</p><h5 id="ç©ºé—´å¤æ‚åº¦ï¼šO-mn">ç©ºé—´å¤æ‚åº¦ï¼šO(mn)</h5><p>å…¶ä¸­ m ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œn ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚æœç´¢çš„æ—¶å€™éœ€è¦ä¸€ä¸ªå¤§å°ä¸º O(mn)çš„æ ‡è®°ç»“æ„ç”¨æ¥æ ‡è®°æ¯ä¸ªæ ¼å­æ˜¯å¦è¢«èµ°è¿‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sobelç®—å­</title>
      <link href="/2021/08/14/img_process/sobel/"/>
      <url>/2021/08/14/img_process/sobel/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»Sobelç®—å­ï¼Œä¸»è¦ç”¨äºè¾¹ç¼˜æ£€æµ‹ï¼›ç”±äºè¯¥ç®—å­å¼•å…¥äº†å±€éƒ¨å¹³å‡ï¼Œå¯¹å™ªå£°æœ‰å¹³æ»‘ä½œç”¨ï¼Œå› æ­¤è¿˜å¯ä»¥æ¶ˆé™¤å™ªå£°ã€‚</p></blockquote><h2 id="å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦">å›¾åƒè¾¹ç¼˜ä¸æ¢¯åº¦</h2><p>åœ¨å›¾åƒè¾¹ç¼˜ï¼Œç°åº¦å€¼çš„å˜åŒ–è¾ƒå¤§ï¼Œå› æ­¤å›¾åƒåœ¨æ­¤å¤„çš„æ¢¯åº¦å€¼ä¹Ÿè¾ƒå¤§ã€‚ä¸€èˆ¬æƒ…å†µï¼Œå›¾åƒæ¢¯åº¦æ—¶è®¡ç®—å›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯ã€‚å›¾åƒæ¢¯åº¦ä¸¥æ ¼æ¥è¯´æ—¶éœ€è¦æ±‚å¯¼æ•°ï¼Œä½†æ˜¯åœ¨å›¾åƒè®¡ç®—ä¸Šæ—¶ä½¿ç”¨åƒç´ å€¼çš„å·®å¾—åˆ°æ¢¯åº¦çš„è¿‘ä¼¼å€¼ã€‚<br>å›¾åƒå¼ºåº¦çš„æ˜¾è‘—å˜åŒ–å¯åˆ†ä¸ºï¼š</p><ul><li>é˜¶è·ƒå˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦åœ¨ä¸è¿ç»­å¤„çš„ä¸¤è¾¹çš„åƒç´ ç°åº¦å€¼æœ‰ç€æ˜¾è‘—çš„å·®å¼‚ï¼›</li><li>çº¿æ¡ï¼ˆå±‹é¡¶ï¼‰å˜åŒ–å‡½æ•°ï¼Œå³å›¾åƒå¼ºåº¦çªç„¶ä»ä¸€ä¸ªå€¼å˜åŒ–åˆ°å¦ä¸€ä¸ªå€¼ï¼Œä¿æŒä¸€è¾ƒå°è¡Œç¨‹ååˆå›åˆ°åŸæ¥çš„å€¼ã€‚</li></ul><p><img src="https://picture.mulindya.com/sobel-pic1.png" alt=""></p><p>ï¼ˆaï¼‰ï¼ˆbï¼‰åˆ†åˆ«æ˜¯é˜¶è·ƒå‡½æ•°å’Œå±‹é¡¶å‡½æ•°çš„äºŒç»´å›¾åƒï¼›ï¼ˆcï¼‰ï¼ˆdï¼‰æ˜¯é˜¶è·ƒå’Œå±‹é¡¶å‡½æ•°çš„å‡½æ•°å›¾è±¡ï¼›ï¼ˆeï¼‰ï¼ˆfï¼‰å¯¹åº”ä¸€é˜¶å€’æ•°ï¼›ï¼ˆgï¼‰ï¼ˆhï¼‰æ˜¯äºŒé˜¶å€’æ•°ã€‚</p><h2 id="Sobelç®—å­">Sobelç®—å­</h2><p>å¸¸ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ¨¡æ¿è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå°†Gxï¼ŒGyä¸å›¾åƒå·ç§¯ï¼Œå³å¯å¾—åˆ°æ¨ªå‘å’Œçºµå‘çš„äº®åº¦å·®åˆ†è¿‘ä¼¼å€¼ã€‚</p>$$G_x = \begin{bmatrix} -1 &amp; 0 &amp; 1 \\ -2 &amp; 0 &amp; 2\\-1 &amp; 0 &amp; 1\end{bmatrix} \qquad G_y = \begin{bmatrix} 1 &amp; 2 &amp; 1 \\ 0 &amp; 0 &amp; 0\\-1 &amp; -2 &amp; -1\end{bmatrix}$$<p>å›¾åƒæ¯ä¸€ä¸ªåƒç´ çš„æ¢¯åº¦å¯ä»¥ä½¿ç”¨$G = \sqrt{G<sup>2_x+G</sup>2_y}$æ¥è¡¨ç¤ºï¼Œæ¢¯åº¦çš„æ–¹å‘ä½¿ç”¨$\Theta = arctan(\frac{G_y}{G_x})$ã€‚</p><p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¯”<code>Sobel</code>å‡½æ•°çš„è¿‘ä¼¼æ•ˆæœæ›´å¥½çš„ <code>Scharr</code>å‡½æ•°ï¼Œå…¶å†…æ ¸çŸ©é˜µå¦‚ä¸‹:</p>$$G_x = \begin{bmatrix} -3 &amp; 0 &amp; 3 \\ -10 &amp; 0 &amp; 10 \\ -3 &amp; 0 &amp; 3\end{bmatrix} \qquad G_y = \begin{bmatrix} -3 &amp; -10 &amp; -3 \\ 0 &amp; 0 &amp; 0 \\ 3 &amp; 10 &amp; 3\end{bmatrix}$$<h2 id="ä»£ç ä½¿ç”¨">ä»£ç ä½¿ç”¨</h2><h3 id="cv2-Sobel">cv2.Sobel()</h3><p>Sobelç®—å­ä¾ç„¶æ˜¯ä¸€ç§è¿‡æ»¤å™¨ï¼Œåªæ˜¯å…¶æ˜¯å¸¦æœ‰æ–¹å‘çš„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dst = cv2.Sobel(src, ddepth, dx, dy[,ksize[, scale[, delta[, borderType]]]])<br></code></pre></td></tr></tbody></table></figure><ul><li>dstä»£è¡¨ç›®æ ‡å‡½æ•°</li><li>srcä»£è¡¨åŸå§‹å›¾åƒ</li><li>ddpethä»£è¡¨è¾“å‡ºå›¾åƒçš„æ·±åº¦ ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯ä¸åŸå›¾åƒç›¸åŒçš„æ·±åº¦ã€‚ç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼›</li><li>dxä»£è¡¨xæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•° ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>dyä»£è¡¨yæ–¹å‘ä¸Šçš„æ±‚å¯¼é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚</li><li>ksizeä»£è¡¨Sobelæ ¸çš„å¤§å°ï¼Œè¯¥å€¼ä¸º-1æ—¶ï¼Œåˆ™ä¼šä½¿ç”¨Scharrç®—å­è¿›è¡Œè¿ç®—,ä¸€èˆ¬é€‰æ‹©ä¸º1ã€3ã€5ã€7</li><li>scaleä»£è¡¨è®¡ç®—å¯¼æ•°æ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>deltaä»£è¡¨åŠ åœ¨ç›®æ ‡å›¾åƒdstä¸Šçš„å€¼ï¼Œè¯¥å€¼æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º0</li><li>borderTypeä»£è¡¨è¾¹ç•Œæ ·å¼ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</li></ul><blockquote><p>å…¶ä¸­ddepthè®¾è®¡å›¾åƒæ·±åº¦çš„æ¦‚å¿µï¼š<br>å›¾åƒæ·±åº¦æ˜¯æŒ‡å­˜å‚¨æ¯ä¸ªåƒç´ å€¼æ‰€ç”¨çš„ä½æ•°ï¼Œä¾‹å¦‚cv2.CV_8Uï¼ŒæŒ‡çš„æ˜¯8ä½æ— ç¬¦å·æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0~255ï¼Œè¶…å‡ºèŒƒå›´åˆ™ä¼šè¢«æˆªæ–­ï¼ˆæˆªæ–­æŒ‡çš„æ˜¯ï¼Œå½“æ•°å€¼å¤§äº255ä¿ç•™ä¸º255ï¼Œå½“æ•°å€¼å°äº0ä¿ç•™ä¸º0ï¼Œå…¶ä½™ä¸å˜ï¼‰ã€‚</p><p>å…·ä½“è¿˜æœ‰ï¼šCV_16Sï¼ˆ16ä½æ— ç¬¦å·æ•°ï¼‰ï¼ŒCV_16Uï¼ˆ16ä½æœ‰ç¬¦å·æ•°ï¼‰ï¼ŒCV_32Fï¼ˆ32ä½æµ®ç‚¹æ•°ï¼‰ï¼ŒCV_64Fï¼ˆ64ä½æµ®ç‚¹æ•°ï¼‰ç­‰.</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-comment">#è½½å…¥åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#æ±‚Xæ–¹å‘æ¢¯åº¦ï¼Œå¹¶ä¸”è¾“å‡ºå›¾åƒä¸€ä¸ªä¸ºCV_8U,ä¸€ä¸ªä¸ºCV_64F</span><br>img_gradient_X_8U=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>img_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å°†å›¾åƒæ·±åº¦æ”¹ä¸ºCV_8U</span><br>img_gradient_X_64Fto8U=cv2.convertScaleAbs(img_gradient_X_64F)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'X_gradient_8U'</span>,img_gradient_X)<br>cv2.imshow(<span class="hljs-string">'X_gradient_64Fto8U'</span>,img_gradient_X_64Fto8U)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic2.png" alt=""></p><p><code>cv2.imshow()</code>çš„é»˜è®¤æ˜¾ç¤ºä¸º8ä½æ— ç¬¦å·æ•°ï¼Œå³[0,255]ï¼Œå› æ­¤åœ¨æ˜¾ç¤º<code>CV_64F</code>çš„å›¾åƒå‰ä½¿ç”¨äº†å‡½æ•°<code>cv2.convertScaleAbs()</code>å°†å›¾åƒæ·±åº¦ä¸º<code>CV_64F</code>çš„æ¢¯åº¦å›¾åƒé‡æ–°è½¬åŒ–ä¸º<code>CV_8U</code>ã€‚</p><h3 id="cv2-convertScaleAbs">cv2.convertScaleAbs()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.convert<span class="hljs-constructor">ScaleAbs(<span class="hljs-params">src</span>[,<span class="hljs-params">alpha</span>[,<span class="hljs-params">beta</span>]])</span><br></code></pre></td></tr></tbody></table></figure><p>å…ˆè®¡ç®—æ•°ç»„ç»å¯¹å€¼ï¼Œåè½¬åŒ–ä¸º8ä½æ— ç¬¦å·æ•°</p><ul><li>src:è¾“å…¥å›¾åƒï¼ˆå¤šç»´æ•°ç»„ï¼‰</li><li>alpha:æ¯”ä¾‹å› å­</li><li>beta:ä¿å­˜æ–°å›¾åƒï¼ˆæ•°ç»„ï¼‰å‰å¯ä»¥å¢åŠ çš„å€¼</li></ul><h3 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h3><p>é˜²æ­¢æ¢¯åº¦å¤§å°è¢«æˆªæ–­æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å…ˆå°†è¾“å…¥å›¾åƒå½’ä¸€åŒ–ï¼ˆå®é™…å½’ä¸€åŒ–çš„è¿‡ç¨‹å°±å·²ç»å®ç°äº†å›¾åƒæ·±åº¦çš„è½¬å˜ï¼‰ã€‚åœ¨ä½¿ç”¨æ·±åº¦å¤§äº8Uçš„æ ¼å¼ä¹‹å‰å°†ç°åº¦å…ˆå½’ä¸€åŒ–ï¼Œå°±ä¸ç”¨<code>convertScaleAbs</code>è½¬æ¢äº†ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå›¾åƒæ·±åº¦ä¸ºCV_8U</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#åŸå›¾å½’ä¸€åŒ–,å®é™…å›¾åƒæ·±åº¦å·²ç»å˜ä¸ºCV_64F</span><br>img_standard=img_original/<span class="hljs-number">255</span><br><span class="hljs-comment">#é‡‡ç”¨ç°åº¦åŸå›¾æ±‚Xæ–¹å‘æ¢¯åº¦</span><br>original_gradient_X_64F=cv2.Sobel(img_original,cv2.CV_64F,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>original_gradient_X_64Fto8U=cv2.convertScaleAbs(original_gradient_X_64F)<br><span class="hljs-comment">#é‡‡ç”¨å½’ä¸€åŒ–çš„å›¾åƒæ±‚Xæ–¹å‘æ¢¯åº¦</span><br>standard_gradient_X=cv2.Sobel(img_standard,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">#å›¾åƒæ˜¾ç¤º</span><br>cv2.imshow(<span class="hljs-string">'original'</span>,img_original)<br>cv2.imshow(<span class="hljs-string">'original_X'</span>,original_gradient_X_64Fto8U)<br>cv2.imshow(<span class="hljs-string">'standard_X'</span>,standard_gradient_X)<br>cv2.waitKey()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></tbody></table></figure><p><img src="https://picture.mulindya.com/sobel-pic3.png" alt=""></p><h3 id="cv2-addWeighted">cv2.addWeighted()</h3><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">cv2.add<span class="hljs-constructor">Weighted(<span class="hljs-params">src1</span>, <span class="hljs-params">alpha</span>, <span class="hljs-params">src2</span>, <span class="hljs-params">beta</span>, <span class="hljs-params">gamma</span>[, <span class="hljs-params">dst</span>[, <span class="hljs-params">dtype</span>]])</span> â†’ dst<br></code></pre></td></tr></tbody></table></figure><ul><li>src1 è¾“å…¥çš„ç¬¬ä¸€ä¸ªæ•°ç»„</li><li>alpha ç¬¬ä¸€ä¸ªæ•°ç»„çš„æƒé‡</li><li>src2 è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°ç»„ï¼ˆä¸ç¬¬ä¸€ä¸ªæ•°ç»„æœ‰ç›¸åŒçš„shapeï¼‰</li><li>beta ç¬¬äºŒä¸ªæ•°ç»„çš„æƒé‡</li><li>dst è¾“å‡ºçš„æ•°ç»„åç§°</li><li>gamma è®¡ç®—å’Œæ—¶æ‰€é‡‡ç”¨çš„ç¼©æ”¾å› å­ï¼Œé»˜è®¤ä¸º1ï¼Œæ— ç¼©æ”¾</li><li>dtype è¾“å‡ºå›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºå’Œinputç›¸åŒ</li><li></li></ul><blockquote><p>dst = src1 * alpha + src2 * beta + gamma;</p></blockquote><p>æ³¨æ„ï¼šç”±å‚æ•°è¯´æ˜å¯ä»¥çœ‹å‡ºï¼Œè¢«å åŠ çš„ä¸¤å¹…å›¾åƒå¿…é¡»æ˜¯å°ºå¯¸ç›¸åŒã€ç±»å‹ç›¸åŒçš„ï¼›å¹¶ä¸”ï¼Œå½“è¾“å‡ºå›¾åƒarrayçš„æ·±åº¦ä¸ºCV_32Sæ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸é€‚ç”¨äº†ï¼Œè¿™æ—¶å€™å°±ä¼šå†…å­˜æº¢å‡ºæˆ–è€…ç®—å‡ºçš„ç»“æœå‹æ ¹ä¸å¯¹ã€‚</p><h3 id="è¾¹ç¼˜æ£€æµ‹">è¾¹ç¼˜æ£€æµ‹</h3><p>é€šè¿‡cv2.Sobel()æˆ‘ä»¬å¯ä»¥è½»æ¾è®¡ç®—å‡ºX,Yæ–¹å‘çš„æ¢¯åº¦å¤§å°ï¼Œæ ¹æ®å…¬å¼</p><p>$$<br>G = \sqrt{G<sup>2_x+G</sup>2_y}<br>$$<br>å¯ä»¥æ±‚å‡ºæ¢¯åº¦å›¾åƒï¼Œå®é™…æ“ä½œæ—¶ï¼Œä¸ºäº†ç®€åŒ–è¿ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¬å¼</p><p>$$<br>G = \vert{G_x}\vert+\vert{G_y}\vert<br>$$</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-comment">#è½½å…¥ç°åº¦åŸå›¾ï¼Œå¹¶ä¸”å½’ä¸€åŒ–</span><br>img_original=cv2.imread(<span class="hljs-string">'E:\ShannonT\\notebook workspace\\images\\4.28.9.jpg'</span>,<span class="hljs-number">0</span>)/<span class="hljs-number">255</span><br><span class="hljs-comment">#åˆ†åˆ«æ±‚X,Yæ–¹å‘çš„æ¢¯åº¦</span><br>grad_X=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)<br>grad_Y=cv2.Sobel(img_original,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)<br><span class="hljs-comment">#æ±‚æ¢¯åº¦å›¾åƒ</span><br>grad=cv2.addWeighted(grad_X,<span class="hljs-number">0.5</span>,grad_Y,<span class="hljs-number">0.5</span>,<span class="hljs-number">0</span>)<br>cv2.imshow(<span class="hljs-string">'gradient'</span>,grad)<br></code></pre></td></tr></tbody></table></figure><h2 id="å®˜æ–¹è¯´æ˜">å®˜æ–¹è¯´æ˜</h2><p>å½“å¹´ä½œè€…å¹¶æ²¡æœ‰å…¬å¼€å‘è¡¨è¿‡è®ºæ–‡ï¼Œä»…ä»…æ˜¯åœ¨ä¸€æ¬¡åšå£«ç”Ÿè¯¾é¢˜è®¨è®ºä¼š(1968)ä¸Šæå‡º(â€œA 3x3 Isotropic Gradient Operator for Image Processingâ€)ï¼Œååœ¨1973å¹´å‡ºç‰ˆçš„ä¸€æœ¬ä¸“è‘—ï¼ˆâ€œPattern Classification and Scene Analysisâ€ï¼‰çš„è„šæ³¨é‡Œä½œä¸ºæ³¨é‡Šå‡ºç°å’Œå…¬å¼€çš„ã€‚</p><p>è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä»¥ä¸‹å†…å®¹ã€‚</p><iframe src="/js/pdfjs_old/web/viewer.html?file=https://paper.mulindya.com/An%20Isotropic%203x3%20Image%20Gradient%20Operator.pdf" width="100%" height="450"></iframe>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer06 ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</title>
      <link href="/2021/08/14/leetcode/leetcode-offer06/"/>
      <url>/2021/08/14/leetcode/leetcode-offer06/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[1,3,2]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[2,3,1]</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= é“¾è¡¨é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>éå†é“¾è¡¨ï¼Œç›´æ¥æ’å…¥åˆ°å¤´ä½ç½®ã€‚å°±å¯ä»¥ç›´æ¥è¾“å‡ºäº†ã€‚æˆ–è€…é‡‡ç”¨é€’å½’ï¼Œè¶…çº§ç®€æ´ï¼Œå€¼å¾—å€Ÿé‰´ã€‚æ³¨æ„ifçš„æ¡ä»¶å’Œå¯¹åº”ç»“æœã€‚ï¼ˆé€’å½’å°±ä»ä¸­é—´æ™®é€‚çš„èŠ‚ç‚¹å¼€å§‹è€ƒè™‘ ç„¶åè¡¥å……è¾¹ç•Œç»†èŠ‚ï¼‰</p><p><font color="orange">return self.reversePrint( head.next ) + [ head.val ] if head else []</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode(object):</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.next = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reversePrint</span>(<span class="hljs-params">self, head</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type head: ListNode</span><br><span class="hljs-string">        :rtype: List[int]</span><br><span class="hljs-string">        """</span><br>        p=head<br>        result = []<br>        <span class="hljs-keyword">while</span>(p):<br>            result = [p.val]+result <span class="hljs-comment">#ç›´æ¥æ·»åŠ åˆ°å‰é¢</span><br>            p = p.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> result<br>        <span class="hljs-comment">#ä½¿ç”¨é€’å½’ä¸€æ¡è¯­å¥è¶…çº§ç®€æ´ é€’å½’åä¸€ä¸ªå…ƒç´ +å½“å‰å…ƒç´  å¦‚æœå½“å‰ä¸ºç©ºåˆ™+ã€ã€‘ ä¹Ÿæ˜¯ç»ˆæ­¢æœªçŸ¥</span><br>        <span class="hljs-comment">#return self.reversePrint(head.next) + [head.val] if head else []</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer12 çŸ©é˜µä¸­çš„è·¯å¾„</title>
      <link href="/2021/08/14/leetcode/leetcode-offer12/"/>
      <url>/2021/08/14/leetcode/leetcode-offer12/</url>
      
        <content type="html"><![CDATA[<blockquote><p>çŸ©é˜µä¸­çš„è·¯å¾„</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ 3Ã—4 çš„çŸ©é˜µä¸­åŒ…å«å•è¯ â€œABCCEDâ€ï¼ˆå•è¯ä¸­çš„å­—æ¯å·²æ ‡å‡ºï¼‰ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer12-pic1.jpg" alt=""></p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šboard = [[<span class="hljs-string">"A"</span>,<span class="hljs-string">"B"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"E"</span>],[<span class="hljs-string">"S"</span>,<span class="hljs-string">"F"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"S"</span>],[<span class="hljs-string">"A"</span>,<span class="hljs-string">"D"</span>,<span class="hljs-string">"E"</span>,<span class="hljs-string">"E"</span>]], word = <span class="hljs-string">"ABCCED"</span><br>è¾“å‡ºï¼štrue<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">board</span> = [[<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>],[<span class="hljs-string">"c"</span>,<span class="hljs-string">"d"</span>]], <span class="hljs-attr">word</span> = <span class="hljs-string">"abcd"</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li><code>1 &lt;= board.length &lt;= 200</code></li><li><code>1 &lt;= board[i].length &lt;= 200</code></li><li><code>board</code> å’Œ <code>word</code> ä»…ç”±å¤§å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å¾ªç¯éå†äºŒç»´æ•°ç»„ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿ç»­çš„å­—ç¬¦ä¸²ã€‚åœ¨dfsä¸­é¦–å…ˆè¿›è¡Œè¾¹ç•ŒèŒƒå›´åˆ¤æ–­ï¼Œä»¥åŠæ­¤ç‚¹æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœä¸æ»¡è¶³è¦æ±‚ç›´æ¥è¿”å›å‡ï¼Œä¸ºçœŸåˆ™ç»§ç»­wordåˆ¤æ–­ä¹‹åçš„å­—ç¬¦ã€‚å¦‚æœä»¥åŠæ˜¯æœ€åçš„å­—ç¬¦å°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚<font color="purple">æ³¨æ„åœ¨åˆ¤æ–­k+1ä¹‹å‰éœ€è¦å…ˆmaskæ‰è‡ªèº«çš„å€¼ï¼Œé˜²æ­¢åç»­â€œè·¯çº¿è¿”å›â€</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exist</span>(<span class="hljs-params">self, board, word</span>):</span><br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        :type board: List[List[str]]</span><br><span class="hljs-string">        :type word: str</span><br><span class="hljs-string">        :rtype: bool</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">i,j,k</span>):</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board)&gt;i&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])&gt;j&gt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> board[i][j]!=word[k]: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> <br>            <span class="hljs-comment">#ä¸åŒ¹é…çš„æƒ…å†µ</span><br>            <span class="hljs-keyword">if</span> k == <span class="hljs-built_in">len</span>(word)-<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#ä¸ç”¨ç»§ç»­åˆ¤æ–­</span><br>            board[i][j] = <span class="hljs-string">' '</span><br>            <span class="hljs-comment"># #æ³¨æ„ä¸èƒ½ç›´æ¥è¿”å› å› ä¸ºåœ¨å¤„ç†é‚»è¿‘çš„å†…å®¹ä¼šåˆ¤æ–­åˆ°è‡ªèº«ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ï¼Œæ‰€ä»¥å…ˆmask</span><br>            <span class="hljs-comment"># return dfs(i+1,j,k+1) or dfs(i-1,j,k+1) or dfs(i,j+1,k+1) or dfs(i,j-1,k+1) </span><br>            res = dfs(i+<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i-<span class="hljs-number">1</span>,j,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j+<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> dfs(i,j-<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>) <br>            board[i][j] = word[k]<br>            <span class="hljs-keyword">return</span> res<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])):<br>                <span class="hljs-keyword">if</span> dfs(i,j,<span class="hljs-number">0</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment">#å¦‚æœä»ijå¼€å§‹æ‰¾0ä¹‹åçš„å­—ç¬¦ä¸²æ‰¾åˆ°åˆ™ä¸ºçœŸ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer11 æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</title>
      <link href="/2021/08/13/leetcode/leetcode-offer11/"/>
      <url>/2021/08/13/leetcode/leetcode-offer11/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [3,4,5,1,2] ä¸º [1,2,3,4,5] çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[3,4,5,1,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<span class="hljs-string">[2,2,2,0,1]</span><br>è¾“å‡ºï¼š<span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å°†æ•°ç»„éå†ä¸€éï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªéå¢åºçš„å…ƒç´ å³ä¸ºæœ€å°å€¼ã€‚å¤æ‚åº¦ä¸ºçº¿æ€§çº§åˆ«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(numbers):<span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        minitem = numbers[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(numbers)):<br>            <span class="hljs-keyword">if</span> numbers[i]&lt;numbers[i-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(minitem,numbers[i])<br>        <span class="hljs-keyword">return</span> minitem<br></code></pre></td></tr></tbody></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•ï¼Œå°†çº¿æ€§çº§åˆ«çš„å¤æ‚åº¦é™ä½åˆ°å¯¹æ•°çº§åˆ«ã€‚</p><p><img src="https://picture.mulindya.com/leetcode-offer11-pic1.png" alt=""></p><p>æœ€ä½ç‚¹æœ‰ç‰¹æ€§ï¼šå·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½è¦æ¯”å³è¾¹æ‰€æœ‰å…ƒç´ å¤§ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥é€æ¸ç¼©å°èŒƒå›´ã€‚</p><p>ä¸­é—´å…ƒç´ å’ŒæŸä¸ªè¾¹ç•Œå…ƒç´ æ¯”è¾ƒå¤§å°ï¼Œæ¥ç¡®å®šèŒƒå›´ï¼Œ<u>ä½†æ˜¯è¦æ³¨æ„ä¸¤è€…ç›¸ç­‰æ—¶å°±æ²¡æœ‰ç¡®åˆ‡çš„åˆ¤æ–­äº†</u>ã€‚å¯ä»¥ç›´æ¥ç”¨çº¿æ€§æ¯”è¾ƒæ¥æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: j -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure><p>å®é™…ä¸Šï¼Œå½“å‡ºç° nums[m] = nums[j] æ—¶ï¼Œä¸€å®šæœ‰åŒºé—´[i,m]å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ æˆ– åŒºé—´ [m,j] å†…æ‰€æœ‰å…ƒç´ ç›¸ç­‰ï¼ˆæˆ–ä¸¤è€…çš†æ»¡è¶³ï¼‰ã€‚å¯¹äºå¯»æ‰¾æ­¤ç±»æ•°ç»„çš„æœ€å°å€¼é—®é¢˜ï¼Œå¯ç›´æ¥æ”¾å¼ƒäºŒåˆ†æŸ¥æ‰¾ï¼Œè€Œä½¿ç”¨çº¿æ€§æŸ¥æ‰¾æ›¿ä»£ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minArray</span>(<span class="hljs-params">self, numbers: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(numbers) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            m = (i + j) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> numbers[m] &gt; numbers[j]: i = m + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> numbers[m] &lt; numbers[j]: j = m<br>            <span class="hljs-keyword">else</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(numbers[i:j])<br>        <span class="hljs-keyword">return</span> numbers[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡çŒ®æ•´ç†ç¬”è®°</title>
      <link href="/2021/08/13/paper/paper-site/"/>
      <url>/2021/08/13/paper/paper-site/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æŸ¥æ‰¾æ–‡çŒ®çš„ç½‘ç«™<br><a href="https://www.thecvf.com/">https://www.thecvf.com/</a><br><a href="https://arxiv.org/list/cs/recent">https://arxiv.org/list/cs/recent</a><br><a href="https://www.researchgate.net/">https://www.researchgate.net/</a></p></blockquote><blockquote><p>è¶…å®è—åšä¸»ï¼š <a href="https://www.zhihu.com/people/wang-jia-hao-53-3">ç§‘æŠ€çŒ›å…½</a><br>å®è—å…¬ä¼—å·ï¼š æå¸‚å¹³å°<br>ç³»åˆ—å­¦ä¹ ï¼š <a href="https://zhuanlan.zhihu.com/p/348593638">VITå­¦ä¹ </a></p></blockquote><h3 id="å¾®è°ƒæŠ€å·§">å¾®è°ƒæŠ€å·§</h3><p><a href="https://paper.mulindya.com/Accurate%2C%20Large%20Minibatch%20SGD%20Training%20ImageNet%20in%201%20Hour.pdf"><strong>Accurate, Large Minibatch SGD Training ImageNet in 1 Hour.pdf</strong></a></p><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Co-Tuning%20for%20Transfer%20Learning.pdf"><strong>Co-Tuning for Transfer Learning.pdf</strong></a></p><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><p><a href="https://paper.mulindya.com/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf"><strong>He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Simple%20Copy-Paste%20is%20a%20Strong%20Data%20Augmentation%20Method.pdf"><strong>Simple Copy-Paste is a Strong Data Augmentation Method.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Discriminative%20Feature%20Alignment%20Improving%20Transferability%20of.pdf"><strong>Discriminative Feature Alignment Improving Transferability of.pdf</strong></a></p><p><a href="https://paper.mulindya.com/Movement%20Pruning%20adaptive%20sparsity%20by%20fine-tuning.pdf"><strong>Movement Pruning adaptive sparsity by fine-tuning.pdf</strong></a></p><h3 id="FPN">FPN</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Feature Pyramid Networks for Object Detection</strong></a>ï¼ˆFPNç›®æ ‡æ£€æµ‹ è§£è¯»https://zhuanlan.zhihu.com/p/36461718ï¼‰</p><h3 id="Transformer">Transformer</h3><p><a href="https://paper.mulindya.com/Feature%20Pyramid%20Networks%20for%20Object%20Detection.pdf"><strong>Attention Is All You Need</strong></a> (è®²è§£Attentionæœºåˆ¶)</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey of Transformers</strong></a>ï¼ˆTransformerçš„æ€»ç»“ï¼‰</p><h3 id="VIT">VIT</h3><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>AN IMAGE IS WORTH 16X16 WORDS: TRANSFORMERS FOR IMAGE RECOGNITION AT</strong></a>ï¼ˆå°†transformeråº”ç”¨äºå›¾åƒåˆ†ç±»ï¼‰</p><p><a href="https://paper.mulindya.com/How%20to%20train%20your%20ViT.pdf"><strong>How to train your ViT? Data, Augmentation,and Regularization in Vision Transformers</strong></a>ï¼ˆè®­ç»ƒæŠ€å·§ï¼‰</p><p><a href="https://paper.mulindya.com/Scaling%20Vision%20Transformers.pdf"><strong>Scaling Vision Transformers</strong></a>ï¼ˆç²¾ç‚¼VITï¼‰</p><p><a href="https://paper.mulindya.com/levit.pdf"><strong>LeViT: a Vision Transformer in ConvNetâ€™s Clothing for Faster Inference</strong></a> ï¼ˆæ··åˆç½‘ç»œï¼‰</p><p><a href="https://paper.mulindya.com/End-to-End%20Semi-Supervised%20Object%20Detection%20with%20Soft%20Teacher.pdf"><strong>End-to-End Video Instance Segmentation with Transformers</strong></a>ï¼ˆä½¿ç”¨transformerè¿›è¡Œå®ä¾‹åˆ†å‰²ï¼‰</p><p><a href="https://paper.mulindya.com/A%20Survey%20on%20Visual%20Transformer.pdf"><strong>A Survey on Visual Transformer</strong></a> ï¼ˆæ€»ç»“ï¼‰</p><h3 id="EfficientNet">EfficientNet</h3><p><a href="https://paper.mulindya.com/EfficientNet%20Rethinking%20Model%20Scaling%20for%20Convolutional%20Neural%20Networks.pdf"><strong>EfficientNet Rethinking Model Scaling for Convolutional Neural Networks.pdf</strong></a></p><h3 id="BIT">BIT</h3><p><a href="https://paper.mulindya.com/BITGeneral%20Visual%20Representation%20Learning.pdf"><strong>BIT : General Visual Representation Learning.pdf</strong></a></p><h3 id="YOLOv4">YOLOv4</h3><p><a href="https://paper.mulindya.com/yolo4.pdf"><strong>YOLOv4: Optimal Speed and Accuracy of Object Detection</strong></a></p><h3 id="PaDim">PaDim</h3><p><a href="https://paper.mulindya.com/PaDiM_a%20Patch%20Distribution%20Modeling%20Framework.pdf"><strong>PaDiM: a Patch Distribution Modeling Framework for Anomaly Detection and Localization</strong></a> (ä½¿ç”¨é©¬æ°è·ç¦»)</p><p><a href="https://paper.mulindya.com/Semi-orthogonal%20Embedding%20for%20Efficient%20Unsupervised%20Anomaly%20Segmentation.pdf"><strong>Semi-orthogonal Embedding for Efficient Unsupervised Anomaly Segmentation</strong></a> ï¼ˆå¾ˆå¤šæ•°å­¦çŸ¥è¯†ï¼‰</p><h3 id="Swin">Swin</h3><p><a href="https://paper.mulindya.com/Swin%20Transformer%20Hierarchical%20Vision%20Transformer%20using%20Shifted%20Windows.pdf"><strong>Swin Transformer: Hierarchical Vision Transformer using Shifted Windows</strong></a></p><h3 id="å…¶ä»–">å…¶ä»–</h3><p>è°·æ­Œæå‡ºçš„ä½¿ç”¨MPLä»£æ›¿Transformerï¼ŒCNNï¼ˆ<a href="https://zhuanlan.zhihu.com/p/370780575">ä¹Ÿå¼•å‘äº†ä¸€äº›äº‰è®®</a>ï¼‰</p><p><a href="https://paper.mulindya.com/MLP-Mixer_An%20all-MLP%20Architecture%20for%20Vision.pdf"><strong>MLP-Mixer: An all-MLP Architecture for Vision</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> æ–‡çŒ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡çŒ® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>fine-tuningçš„æ–¹æ³•</title>
      <link href="/2021/08/13/deep_learning/fine-tuning/"/>
      <url>/2021/08/13/deep_learning/fine-tuning/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ”¶é›†å…³äºæ·±åº¦å­¦ä¹ çš„è°ƒå‚çš„ç›¸å…³ç¬”è®°ï¼Œä¸»è¦ç”¨äºç½‘ç»œè®­ç»ƒçš„å¾®è°ƒã€‚</p></blockquote><h3 id="è®­ç»ƒæŠ€å·§"><strong>è®­ç»ƒæŠ€å·§</strong></h3><p>1.è¦åš<strong>æ¢¯åº¦å½’ä¸€åŒ–</strong>,å³ç®—å‡ºæ¥çš„æ¢¯åº¦é™¤ä»¥minibatch size</p><p>2.clip c(æ¢¯åº¦è£å‰ª): é™åˆ¶æœ€å¤§æ¢¯åº¦,å…¶å®æ˜¯value = sqrt(w1^2 +w2^2â€¦.),å¦‚æœvalueè¶…è¿‡äº†é˜ˆå€¼,å°±ç®—ä¸€ä¸ªè¡°å‡ç³»æ•°,è®©valueçš„å€¼ç­‰äºé˜ˆå€¼: 5,10,15</p><p><strong>3.é˜²æ­¢è¿‡æ‹Ÿåˆ</strong></p><p>â€‹ä¸€èˆ¬å¸¸ç”¨çš„é˜²æ­¢è¿‡æ‹Ÿåˆæ–¹æ³•æœ‰ä½¿ç”¨<strong>L1æ­£åˆ™é¡¹ã€L2æ­£åˆ™é¡¹ã€dropoutã€æå‰ç»ˆæ­¢ã€æ•°æ®é›†æ‰©å……ç­‰</strong>ã€‚å¦‚æœæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°æ¯”è¾ƒå¥½ä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°æ¬ ä½³å¯ä»¥é€‰æ‹©å¢å¤§L1æˆ–L2æ­£åˆ™çš„æƒ©ç½šåŠ›åº¦ï¼ˆ<strong>L2æ­£åˆ™ç»éªŒä¸Šé¦–é€‰1.0</strong>ï¼Œè¶…è¿‡10å¾ˆå°‘è§ï¼‰ï¼Œæˆ–<strong>å¢å¤§dropoutçš„éšæœºå¤±æ´»æ¦‚ç‡</strong>ï¼ˆç»éªŒé¦–é€‰0.5ï¼‰ï¼›æˆ–è€…å½“éšç€è®­ç»ƒçš„æŒç»­åœ¨æµ‹è¯•é›†ä¸Šä¸å¢åé™æ—¶ï¼Œä½¿ç”¨æå‰ç»ˆæ­¢è®­ç»ƒçš„æ–¹æ³•ã€‚å½“ç„¶<strong>æœ€æœ‰æ•ˆçš„è¿˜æ˜¯å¢å¤§è®­ç»ƒé›†çš„è§„æ¨¡</strong>ï¼Œå®åœ¨éš¾ä»¥è·å¾—æ–°æ•°æ®ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®é›†å¢å¼ºçš„æ–¹æ³•ï¼Œæ¯”å¦‚CVä»»åŠ¡å¯ä»¥å¯¹æ•°æ®é›†è¿›è¡Œè£å‰ªã€ç¿»è½¬ã€å¹³ç§»ç­‰æ–¹æ³•è¿›è¡Œæ•°æ®é›†å¢å¼ºï¼Œè¿™ç§æ–¹æ³•å¾€å¾€éƒ½ä¼šæé«˜æœ€åæ¨¡å‹çš„æµ‹è¯•ç²¾åº¦ã€‚<br>dropoutå¯¹å°æ•°æ®é˜²æ­¢è¿‡æ‹Ÿåˆæœ‰å¾ˆå¥½çš„æ•ˆæœ,å€¼ä¸€èˆ¬è®¾ä¸º0.5,å°æ•°æ®ä¸Šdropout+sgdã€‚åœ¨å¤§éƒ¨åˆ†å®éªŒä¸­ï¼Œæ•ˆæœæå‡éƒ½éå¸¸æ˜æ˜¾.<strong>å»ºè®®å°è¯•</strong>ã€‚ dropoutçš„ä½ç½®æ¯”è¾ƒæœ‰è®²ç©¶, å¯¹äºRNN,å»ºè®®æ”¾åˆ°è¾“å…¥-&gt;RNNä¸RNN-&gt;è¾“å‡ºçš„ä½ç½®.å…³äºRNNå¦‚ä½•ç”¨dropout,å¯ä»¥å‚è€ƒ:<a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1409.2329">http://arxiv.org/abs/1409.2329</a>(Captain Jackä»¤è¨€:(ä¸ä»…ä»…å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ, å…¶å®è¿™ç›¸å½“äºåšäººåŠ›æˆæœ¬æœ€ä½çš„Ensemble, å½“ç„¶, è®­ç»ƒèµ·æ¥ä¼šæ¯”æ²¡æœ‰Dropoutçš„è¦æ…¢ä¸€ç‚¹, åŒæ—¶ç½‘ç»œå‚æ•°ä½ æœ€å¥½ç›¸åº”åŠ ä¸€ç‚¹, å¯¹, è¿™ä¼šå†æ…¢ä¸€ç‚¹).)</p><p><strong>4.è¶…å‚</strong></p><p>â€‹learning rate æœ€é‡è¦**ï¼Œæ¨èäº†è§£ cosine learning rate å’Œ cyclic learning rateï¼Œå…¶æ¬¡æ˜¯ <strong>batchsize å’Œ weight decay</strong>ã€‚å½“ä½ çš„æ¨¡å‹è¿˜ä¸é”™çš„æ—¶å€™ï¼Œå¯ä»¥è¯•ç€åšæ•°æ®å¢å¹¿å’Œæ”¹æŸå¤±å‡½æ•°é”¦ä¸Šæ·»èŠ±äº†ã€‚(ç½—æµ©ZJUä»¤è¨€ï¼šéšç€ç½‘ç»œè®­ç»ƒçš„è¿›è¡Œï¼Œå­¦ä¹ ç‡è¦é€æ¸é™ä¸‹æ¥ï¼›ç½‘ç»œæ€§èƒ½è¶Šå¥½ï¼Œå­¦ä¹ ç‡è¦è¶Šå°ï¼ˆå³è¶Šéœ€è¦å¾®è°ƒè€Œéç²—è°ƒ)ï¼›batchsizeé€šå¸¸å½±å“æ²¡é‚£ä¹ˆå¤§ï¼Œå¡æ»¡å¡å°±è¡Œï¼Œé™¤äº†ç‰¹æ®Šçš„ç®—æ³•éœ€è¦batchå¤§ä¸€ç‚¹)<br>â€‹adam,adadeltaç­‰,åœ¨å°æ•°æ®ä¸Š,æˆ‘è¿™é‡Œå®éªŒçš„æ•ˆæœä¸å¦‚sgd, sgdæ”¶æ•›é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æœ€ç»ˆæ”¶æ•›åçš„ç»“æœï¼Œä¸€èˆ¬éƒ½æ¯”è¾ƒå¥½ã€‚<strong>å¦‚æœä½¿ç”¨sgdçš„è¯,å¯ä»¥é€‰æ‹©ä»1.0æˆ–è€…0.1çš„å­¦ä¹ ç‡å¼€å§‹,éš”ä¸€æ®µæ—¶é—´,åœ¨éªŒè¯é›†ä¸Šæ£€æŸ¥ä¸€ä¸‹,å¦‚æœcostæ²¡æœ‰ä¸‹é™,å°±å¯¹</strong>å­¦ä¹ ç‡å‡åŠ**. æˆ‘çœ‹è¿‡å¾ˆå¤šè®ºæ–‡éƒ½è¿™ä¹ˆæ,æˆ‘è‡ªå·±å®éªŒçš„ç»“æœä¹Ÿå¾ˆå¥½. å½“ç„¶,ä¹Ÿå¯ä»¥å…ˆç”¨adaç³»åˆ—å…ˆè·‘,æœ€åå¿«æ”¶æ•›çš„æ—¶å€™,æ›´æ¢æˆsgdç»§ç»­è®­ç»ƒ.åŒæ ·ä¹Ÿä¼šæœ‰æå‡.æ®è¯´adadeltaä¸€èˆ¬åœ¨åˆ†ç±»é—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ï¼Œadamåœ¨ç”Ÿæˆé—®é¢˜ä¸Šæ•ˆæœæ¯”è¾ƒå¥½ã€‚(Captain Jackä»¤è¨€ï¼šsgd adam è¿™äº›é€‰æ‹©ä¸Š, çœ‹ä½ ä¸ªäººé€‰æ‹©. ä¸€èˆ¬å¯¹ç½‘ç»œä¸æ˜¯å†³å®šæ€§çš„. åæ­£æˆ‘æ— è„‘ç”¨sgd + momentum. ï¼‰</p><p>5.<strong>æ¿€æ´»å‡½æ•°</strong><br>é™¤äº†gateä¹‹ç±»çš„åœ°æ–¹,éœ€è¦æŠŠè¾“å‡ºé™åˆ¶æˆ0-1ä¹‹å¤–,<strong>å°½é‡ä¸è¦ç”¨sigmoid</strong>,å¯ä»¥ç”¨tanhæˆ–è€…reluä¹‹ç±»çš„æ¿€æ´»å‡½æ•°.1. sigmoidå‡½æ•°åœ¨-4åˆ°4ä¹‹å¤–çš„åŒºé—´æ¢¯åº¦æ¥è¿‘0ï¼Œå¾ˆå®¹æ˜“é€ æˆæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚2. è¾“å…¥0å‡å€¼ï¼Œsigmoidå‡½æ•°çš„è¾“å‡ºä¸æ˜¯0å‡å€¼çš„ã€‚ï¼ˆhzwerä»¤è¨€:è™½ç„¶æœ‰è‡³å°‘åç§æ¿€æ´»å‡½æ•°ï¼Œä½†åœ¨ Relu å¤–åªæ¨èè¯•ä¸€ä¸‹ Swishã€‚)</p><p>6.BNå±‚å…·æœ‰åŠ é€Ÿè®­ç»ƒé€Ÿåº¦ï¼Œæœ‰æ•ˆé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸ï¼Œå…·æœ‰é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ•ˆæœï¼Œæ‰€ä»¥æ„å»ºç½‘ç»œæ—¶æœ€å¥½è¦åŠ ä¸Šè¿™ä¸ªç»„ä»¶ã€‚(Captain Jackä»¤è¨€ï¼šbatch normalizationæˆ‘ä¸€ç›´æ²¡ç”¨, è™½ç„¶æˆ‘çŸ¥é“è¿™ä¸ªå¾ˆå¥½, æˆ‘ä¸ç”¨ä»…ä»…æ˜¯å› ä¸ºæˆ‘æ‡’. æ‰€ä»¥è¦é¼“åŠ±ä½¿ç”¨batch normalization.ï¼‰</p><p>7.å¦‚æœä½ çš„æ¨¡å‹åŒ…å«å…¨è¿æ¥å±‚ï¼ˆMLPï¼‰ï¼Œå¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºå¤§å°ä¸€æ ·ï¼Œå¯ä»¥è€ƒè™‘å°†MLPæ›¿æ¢æˆ<strong>Highway Network</strong>,æˆ‘å°è¯•å¯¹ç»“æœæœ‰ä¸€ç‚¹æå‡ï¼Œå»ºè®®ä½œä¸ºæœ€åæå‡æ¨¡å‹çš„æ‰‹æ®µï¼ŒåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç»™<strong>è¾“å‡ºåŠ äº†ä¸€ä¸ªgateæ¥æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨</strong>ï¼Œè¯¦ç»†ä»‹ç»è¯·å‚è€ƒè®ºæ–‡: <a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1505.00387">http://arxiv.org/abs/1505.00387</a></p><p>8.æ¥è‡ª@å¼ é¦¨å®‡çš„æŠ€å·§ï¼š<strong>ä¸€è½®åŠ æ­£åˆ™ï¼Œä¸€è½®ä¸åŠ æ­£åˆ™ï¼Œåå¤è¿›è¡Œã€‚</strong></p><p><strong>9.Ensemble</strong><br>Ensembleæ˜¯è®ºæ–‡åˆ·ç»“æœçš„ç»ˆææ ¸æ­¦å™¨,æ·±åº¦å­¦ä¹ ä¸­ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼<br>åŒæ ·çš„å‚æ•°,ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼<br>ä¸åŒçš„å‚æ•°,é€šè¿‡cross-validation,é€‰å–æœ€å¥½çš„å‡ ç»„<br>åŒæ ·çš„å‚æ•°,æ¨¡å‹è®­ç»ƒçš„ä¸åŒé˜¶æ®µï¼Œå³ä¸åŒè¿­ä»£æ¬¡æ•°çš„æ¨¡å‹ã€‚<br>ä¸åŒçš„æ¨¡å‹,è¿›è¡Œçº¿æ€§èåˆ. ä¾‹å¦‚RNNå’Œä¼ ç»Ÿæ¨¡å‹.</p><p><strong>10.è‡ªåŠ¨è°ƒå‚æ–¹æ³•</strong><br>ï¼ˆ1ï¼‰Grid Searchï¼šå…¶åŸç†å°±åƒæ˜¯åœ¨æ•°ç»„é‡Œæ‰¾æœ€å¤§å€¼ã€‚ç¼ºç‚¹æ˜¯å¤ªè´¹æ—¶é—´äº†ï¼Œç‰¹åˆ«åƒç¥ç»ç½‘ç»œï¼Œä¸€èˆ¬å°è¯•ä¸äº†å¤ªå¤šçš„å‚æ•°ç»„åˆã€‚<br>ï¼ˆ2ï¼‰Random Searchï¼šç»éªŒä¸Šï¼ŒRandom Searchæ¯”Gird Searchæ›´æœ‰æ•ˆã€‚å®é™…æ“ä½œçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯å…ˆç”¨Gird Searchçš„æ–¹æ³•ï¼Œå¾—åˆ°æ‰€æœ‰å€™é€‰å‚æ•°ï¼Œç„¶åæ¯æ¬¡ä»ä¸­éšæœºé€‰æ‹©è¿›è¡Œè®­ç»ƒã€‚å¦å¤–Random Searchå¾€å¾€ä¼šå’Œç”±ç²—åˆ°ç»†çš„è°ƒå‚ç­–ç•¥ç»“åˆä½¿ç”¨ï¼Œå³åœ¨æ•ˆæœæ¯”è¾ƒå¥½çš„å‚æ•°é™„è¿‘è¿›è¡Œæ›´åŠ ç²¾ç»†çš„æœç´¢ã€‚<br>ï¼ˆ3ï¼‰Bayesian Optimizationï¼šè´å¶æ–¯ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°äº†ä¸åŒå‚æ•°å¯¹åº”çš„ å®éªŒç»“æœå€¼ï¼Œå› æ­¤æ›´èŠ‚çœæ—¶é—´ï¼Œè´å¶æ–¯è°ƒå‚æ¯”Grid Searchè¿­ä»£æ¬¡æ•°å°‘ï¼Œ é€Ÿåº¦å¿«ï¼›è€Œä¸”å…¶é’ˆå¯¹éå‡¸é—®é¢˜ä¾ç„¶ç¨³å¥ã€‚</p><p><strong>11.Lossè®¾è®¡</strong><br>+ ä¸€èˆ¬æ¥è¯´åˆ†ç±»å°±æ˜¯Softmax, å›å½’å°±æ˜¯L2çš„loss. ä½†æ˜¯è¦æ³¨æ„lossçš„é”™è¯¯èŒƒå›´(ä¸»è¦æ˜¯å›å½’), ä½ é¢„æµ‹ä¸€ä¸ªlabelæ˜¯10000çš„å€¼, æ¨¡å‹è¾“å‡º0, ä½ ç®—ç®—è¿™losså¤šå¤§, è¿™è¿˜æ˜¯å•å˜é‡çš„æƒ…å†µä¸‹. ä¸€èˆ¬ç»“æœéƒ½æ˜¯nan. æ‰€ä»¥ä¸ä»…ä»…è¾“å…¥è¦åšnormalization, è¾“å‡ºä¹Ÿè¦.<br>+ å¤šä»»åŠ¡æƒ…å†µä¸‹, å„lossæƒ³æ³•é™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, æˆ–è€…æœ€ç»ˆé™åˆ¶åœ¨ä¸€ä¸ªé‡çº§ä¸Š, åˆæœŸå¯ä»¥ç€é‡ä¸€ä¸ªä»»åŠ¡çš„lossã€‚</p><h3 id="ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE"><strong>ç½‘ç»œç»“æ„è®¾è®¡ï¼ˆå…³äºSE)</strong></h3><p>SEåœ¨åˆ†ç±»ä¸Šæ˜¯ä¸ªæ¶¨ç‚¹å¿…å¤‡çš„å·¥å…·ï¼Œæ¢è¨€ä¹‹ï¼Œå †æœ€é«˜ç²¾åº¦æ˜¯ä¸€å®šè¦ç»™æ¯ä¸ªblockéƒ½åŠ ä¸Šå®ƒçš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦è€ƒè™‘æ—¶é—´ï¼Œå‚æ•°é‡å’Œç²¾åº¦ç­‰çš„trade-offï¼Œæ— è„‘å †å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥è¦é€‰æ‹©åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨åˆé€‚çš„æ¨¡å—ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<strong>æ¨èåœ¨blockæ•°é‡å’Œæ·»åŠ SEä¸Šåšæƒè¡¡</strong>ï¼Œå³<strong>ç»™éƒ¨åˆ†blcokåŠ ä¸ŠSEï¼ŒåŒæ—¶ç æ‰ä¸€äº›blockæ¥åŠ é€Ÿ</strong>ï¼Œè¿™æ ·å¯ä»¥åœ¨ç²¾åº¦å·®ä¸å¤šçš„æƒ…å†µä¸‹å‡å°‘ä¸€äº›å‚æ•°é‡ã€‚å½“ç„¶inferenceæ—¶é—´è¿™ä¸ªäº‹éœ€è¦çœ‹å…·ä½“çš„åº”ç”¨å¹³å°å¯¹SEçš„å®ç°ï¼Œå°±æ˜¯GAPå’ŒFCçš„é€Ÿåº¦ï¼Œè¿™å°±å…·ä½“é—®é¢˜å…·ä½“åˆ†æäº†ã€‚<strong>æœ‰ä½™åŠ›æœ‰å¡çš„äººï¼Œå¯ä»¥è¿ç§»æŸç§NASæ–¹æ³•æ¥åšè¿™ä¸ªçš„æœç´¢ã€‚</strong><br>å‚è€ƒè‡ªï¼š<br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - è§ç‘Ÿçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/94816420">https://www.zhihu.com/question/41631631/answer/94816420</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - Towserçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/862075836">https://www.zhihu.com/question/41631631/answer/862075836</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - ç½—æµ©.ZJUçš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/216788968">https://www.zhihu.com/question/41631631/answer/216788968</a><br>ä½ æœ‰å“ªäº›deep learningï¼ˆrnnã€cnnï¼‰è°ƒå‚çš„ç»éªŒï¼Ÿ - äº¬ä¸œç™½æ¡çš„å›ç­” - çŸ¥ä¹ <a href="https://www.zhihu.com/question/41631631/answer/776852832">https://www.zhihu.com/question/4163</a></p><blockquote><p>æ‰€è°“SEï¼šSENetæ˜¯Squeeze-and-Excitation Networksçš„ç®€ç§°ï¼Œæ‹¿åˆ°äº†ImageNet2017åˆ†ç±»æ¯”èµ›å† å†›ï¼Œå…¶æ•ˆæœå¾—åˆ°äº†è®¤å¯ï¼Œå…¶æå‡ºçš„SEæ¨¡å—æ€æƒ³ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å¯ä»¥åŠ è½½åˆ°ç°æœ‰çš„ç½‘ç»œæ¨¡å‹æ¡†æ¶ä¸­ã€‚<em><u>SENetä¸»è¦æ˜¯å­¦ä¹ äº†channelä¹‹é—´çš„ç›¸å…³æ€§ï¼Œç­›é€‰å‡ºäº†é’ˆå¯¹é€šé“çš„æ³¨æ„åŠ›</u></em>ï¼Œç¨å¾®å¢åŠ äº†ä¸€ç‚¹è®¡ç®—é‡ï¼Œä½†æ˜¯æ•ˆæœæ¯”è¾ƒå¥½ã€‚</p></blockquote><p>å¯¹äºCNNç½‘ç»œæ¥è¯´ï¼Œå…¶æ ¸å¿ƒè®¡ç®—æ˜¯å·ç§¯ç®—å­ï¼Œå…¶é€šè¿‡å·ç§¯æ ¸ä»è¾“å…¥ç‰¹å¾å›¾å­¦ä¹ åˆ°æ–°ç‰¹å¾å›¾ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå·ç§¯æ˜¯å¯¹ä¸€ä¸ªå±€éƒ¨åŒºåŸŸè¿›è¡Œç‰¹å¾èåˆï¼Œè¿™åŒ…æ‹¬ç©ºé—´ä¸Šï¼ˆHå’ŒWç»´åº¦ï¼‰ä»¥åŠé€šé“é—´ï¼ˆCç»´åº¦ï¼‰çš„ç‰¹å¾èåˆã€‚</p><p><img src="https://picture.mulindya.com/fine-tuning-pic1.png" alt=""></p><p>å·ç§¯å®é™…ä¸Šæ˜¯å¯¹<u>å±€éƒ¨åŒºåŸŸ</u>è¿›è¡Œçš„ç‰¹å¾èåˆã€‚ è¿™ä¹Ÿå¯¼è‡´äº†æ™®é€šå·ç§¯ç¥ç»ç½‘ç»œçš„æ„Ÿå—é‡ä¸å¤§ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾è®¡å‡ºæ›´å¤šçš„é€šé“ç‰¹å¾æ¥å¢åŠ è¿™ä¸ªï¼Œä½†æ˜¯è¿™æ ·åšå¯¼è‡´äº†è®¡ç®—é‡å¤§å¤§çš„å¢åŠ ã€‚å› æ­¤ä¸ºäº†ç©ºé—´ä¸Šèåˆæ›´å¤šç‰¹å¾èåˆï¼Œæˆ–è€…æ˜¯æå–å¤šå°ºåº¦ç©ºé—´ä¿¡æ¯ã€‚ä¹Ÿæå‡ºäº†è®¸å¤šä¸åŒçš„æ–¹æ³•å¦‚Inceptionç½‘ç»œçš„å¤šåˆ†æ”¯ç»“æ„ã€‚å¯¹äºchannelç»´åº¦çš„ç‰¹å¾èåˆï¼Œå·ç§¯æ“ä½œåŸºæœ¬ä¸Šé»˜è®¤å¯¹è¾“å…¥ç‰¹å¾å›¾çš„æ‰€æœ‰channelè¿›è¡Œèåˆã€‚<u>è€ŒSENetç½‘ç»œçš„åˆ›æ–°ç‚¹åœ¨äºå…³æ³¨channelä¹‹é—´çš„å…³ç³»ï¼Œå¸Œæœ›æ¨¡å‹å¯ä»¥è‡ªåŠ¨å­¦ä¹ åˆ°ä¸åŒchannelç‰¹å¾çš„é‡è¦ç¨‹åº¦</u>ã€‚ä¸ºæ­¤ï¼ŒSENetæå‡ºäº†Squeeze-and-Excitation (SE)æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picture.mulindya.com/fine-tuning-pic2.png" alt=""></p><h3 id="åé¢è®­è¯«">åé¢è®­è¯«</h3><p>1.1ã€ä¸€ä¸Šæ¥å°±è‡ªå·±åŠ¨æ‰‹å†™æ¨¡å‹ã€‚<br>å»ºè®®é¦–å…ˆç”¨<strong>æˆç†Ÿçš„å¼€æºé¡¹ç›®åŠå…¶é»˜è®¤é…ç½®</strong>ï¼ˆä¾‹å¦‚ Gluon å¯¹ç»å…¸æ¨¡å‹çš„å„ç§å¤ç°ã€å„ä¸ªè‘—åæ¨¡å‹ä½œè€…è‡ªå·±æ”¾å‡ºæ¥çš„ä»£ç ä»“åº“ï¼‰åœ¨è‡ªå·±çš„æ•°æ®é›†ä¸Šè·‘ä¸€éï¼Œåœ¨ç­‰ç¨‹åºè¿è¡Œç»“æŸçš„æ—¶é—´é‡Œä»”ç»†ç ”ç©¶ä¸€ä¸‹ä»£ç é‡Œçš„å„ç§ç»†èŠ‚ï¼Œæœ€åå†è‡ªå·±å†™æˆ–è€…æ”¹ä»£ç ã€‚</p><p>1.2ã€<strong>ä¸æ¨èåšäººè‚‰æ¨¡å‹è®¾è®¡</strong>ï¼Œæ¯”å¦‚æŠŠæŸå±‚å·ç§¯æ”¹å¤§ä¸€ç‚¹ï¼Œæˆ–è€…å¾®è°ƒä¸€ä¸‹é€šé“æ•°ã€‚é™¤éæœ‰ç‰¹åˆ« insightï¼Œä¸è¦è‡ªå·±ä¹±è®¾è®¡æ–°ç»„ä»¶ã€‚</p><p>2ã€è®­ RNN ä¸åŠ  gradient clippingï¼Œå¯¼è‡´è®­ç»ƒä¸€æ®µæ—¶é—´ä»¥å loss çªç„¶å˜æˆ Nanã€‚</p><p>3ã€tying input &amp; output embeddingï¼ˆå°±æ˜¯è¯å‘é‡å±‚å’Œè¾“å‡º softmax å‰çš„çŸ©é˜µå…±äº«å‚æ•°ï¼Œåœ¨è¯­è¨€æ¨¡å‹æˆ–æœºå™¨ç¿»è¯‘ä¸­å¸¸ç”¨ï¼‰æ—¶å­¦ä¹ ç‡éœ€è¦è®¾ç½®å¾—éå¸¸å°ï¼Œä¸ç„¶å®¹æ˜“ Nanã€‚</p><p>4.1ã€åœ¨æ•°æ®é›†å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸Šæ¥å°±è·‘å…¨é‡æ•°æ®ã€‚å»ºè®®å…ˆç”¨ 1/100ã€1/10 çš„æ•°æ®è·‘ä¸€è·‘ï¼Œå¯¹æ¨¡å‹æ€§èƒ½å’Œè®­ç»ƒæ—¶é—´æœ‰ä¸ªåº•ã€‚</p><p>4.2è®¤ä¸ºç½‘ç»œå±‚æ•°è¶Šå¤§è¶Šå¥½ã€‚å‚æ•°é‡ä»€ä¹ˆçš„éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œåœ¨æ€§èƒ½ä¸ä¸¢çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œå±‚æ•°å‡åˆ°æœ€å°.ï¼ˆCaptain Jackä»¤è¨€ï¼šä½ æœ‰95%æ¦‚ç‡ä¸ä¼šä½¿ç”¨è¶…è¿‡40å±‚çš„æ¨¡å‹. ï¼‰</p><p>5ã€åªå–œæ¬¢æ¼‚äº®çš„æ¨¡å‹ç»“æ„ï¼Œç§ä¸èµ·è°ƒå‚æ•°çš„è®ºæ–‡/å®éªŒæŠ¥å‘Šï¼Œ<strong>çœ‹è®ºæ–‡æ—¶ç»å¸¸ä¸çœ‹è¶…å‚æ•°è®¾ç½®ç­‰ç»†èŠ‚</strong>ã€‚æ®Šä¸çŸ¥åœ¨è‡ªå·±æ²¡æœ‰å¤ªå¤šèµ„æºå®éªŒçš„æƒ…å†µä¸‹ï¼Œå®éªŒæŠ¥å‘Šç±»æ–‡ç« ç®€ç›´æ˜¯ä¸šç•Œè‰¯å¿ƒï¼<br>NLP é¢†åŸŸä¸»è¦æ¨èä»¥ä¸‹å‡ ç¯‡ï¼š<br>Regularizing and Optimizing LSTM Language Modelsï¼ˆLSTM çš„è®­ç»ƒæŠ€å·§ï¼‰<br>Massive Exploration of Neural Machine Translation Architecturesï¼ˆNMT é‡Œå„ä¸ªè¶…å‚çš„å½±å“ï¼‰<br>Training Tips for the Transformer Modelï¼ˆè®­ç»ƒ Transformer æ—¶ä¼šå‘ç”Ÿçš„å„ç§ç°è±¡ï¼‰<br>RoBERTa: A Robustly Optimized BERT Pretraining Approachï¼ˆBERT é¢„è®­ç»ƒæŠ€å·§ï¼Œè™½ç„¶è·Ÿå¤§éƒ¨åˆ†äººæ²¡å•¥å…³ç³»ï¼‰<br>CV æˆ‘ä¸ç®—å¤ªç†Ÿï¼Œä¸è¿‡ä¹Ÿå¯ä»¥å‹‰å¼ºæ¨èå‡ ç¯‡ï¼š</p><p><a href="https://arxiv.org/pdf/1706.02677.pdf">Training ImageNet in 1 Hourï¼ˆå¤§æ‰¹é‡è®­ç»ƒæŠ€å·§ï¼‰</a><br><a href="https://openaccess.thecvf.com/content_CVPR_2019/papers/He_Bag_of_Tricks_for_Image_Classification_with_Convolutional_Neural_Networks_CVPR_2019_paper.pdf">Bag of Tricks for Image Classification with Convolutional Neural Networksï¼ˆå„ç§è®­ç»ƒæŠ€å·§é›†å¤§æˆï¼‰</a><br><a href="https://arxiv.org/pdf/1905.11946.pdf">EfficientNet: Rethinking Model Scaling for Convolutional Neural Networksï¼ˆå½“å‰å¯¹å‚æ•°åˆ©ç”¨æœ€æœ‰æ•ˆçš„ CNNï¼‰</a></p><p>6ã€å¯¹äºlossè¿™ç§å— batch sizeã€sequence length å„ç§å› ç´ å½±å“çš„æ•°å­—ï¼Œäººæ˜¯æ²¡æœ‰æ•°æ„Ÿçš„ï¼Œå»ºè®®é¦–å…ˆè®¡ç®—ä¸€ä¸‹ per token lossï¼ˆå¦‚æœæ˜¯å¤šä»»åŠ¡ï¼Œå¯ä»¥æ¯ä¸ªä»»åŠ¡å•ç‹¬ç®—ï¼›ç±»ä¼¼åœ°ï¼ŒæŸäº› CV ä»»åŠ¡å¯ä»¥è®¡ç®— per pixel lossï¼‰ï¼Œå¿ƒé‡Œæœ‰ç‚¹æ„Ÿè§‰ã€‚<strong>è„±ç¦»æŸå¤±å‡½æ•°çš„å½¢å¼è°ˆå­¦ä¹ ç‡æ²¡æœ‰æ„ä¹‰</strong>ï¼ˆä¾‹å¦‚å•æ˜¯å¯¹ batch size æ±‚å’Œæˆ–è€…å–å¹³å‡è¿™ä¸ªå·®å¼‚å°±ä¼šä½¿æ¢¯åº¦å·®æˆç™¾ä¸Šåƒå€ï¼‰ã€‚<br>åœ¨ç¡®å®šåˆå§‹å­¦ä¹ ç‡çš„æ—¶å€™ï¼Œä»ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼ˆä¾‹å¦‚ 1e-7ï¼‰å¼€å§‹ï¼Œç„¶å**æ¯ä¸€æ­¥æŒ‡æ•°å¢å¤§å­¦ä¹ ç‡ï¼ˆä¾‹å¦‚æ‰©å¤§1.05 å€ï¼‰è¿›è¡Œè®­ç»ƒã€‚**è®­ç»ƒå‡ ç™¾æ­¥åº”è¯¥èƒ½è§‚å¯Ÿåˆ°æŸå¤±å‡½æ•°éšè®­ç»ƒæ­¥æ•°å‘ˆå¯¹å‹¾å½¢ï¼Œé€‰æ‹©æŸå¤±ä¸‹é™æœ€å¿«é‚£ä¸€æ®µçš„å­¦ä¹ ç‡å³å¯ã€‚<br>(Captain Jackä»¤è¨€ï¼š<strong>è§‚å¯Ÿlossèƒœäºè§‚å¯Ÿå‡†ç¡®ç‡</strong><br>å‡†ç¡®ç‡è™½ç„¶æ˜¯è¯„æµ‹æŒ‡æ ‡, ä½†æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­è¿˜æ˜¯è¦æ³¨æ„lossçš„. ä½ ä¼šå‘ç°æœ‰äº›æƒ…å†µä¸‹, å‡†ç¡®ç‡æ˜¯çªå˜çš„, åŸæ¥ä¸€ç›´æ˜¯0, å¯èƒ½ä¿æŒä¸Šåƒè¿­ä»£, ç„¶åçªç„¶å˜1. è¦æ˜¯å› ä¸ºè¿™ä¸ªä½ æå‰ä¸­æ–­è®­ç»ƒäº†, åªæœ‰è€å¤©æ›¿ä½ æƒ‹æƒœäº†. è€Œlossæ˜¯ä¸ä¼šæœ‰è¿™ä¹ˆè¯¡å¼‚çš„æƒ…å†µå‘ç”Ÿçš„, æ¯•ç«Ÿä¼˜åŒ–ç›®æ ‡æ˜¯loss.<br>ç»™NNä¸€ç‚¹æ—¶é—´, è¦æ ¹æ®ä»»åŠ¡ç•™ç»™NNçš„å­¦ä¹ ä¸€å®šç©ºé—´. ä¸èƒ½è¯´å‰é¢ä¸€æ®µæ—¶é—´æ²¡èµ·è‰²å°±ä¸ç®¡äº†. æœ‰äº›æƒ…å†µä¸‹å°±æ˜¯å‰é¢ä¸€æ®µæ—¶é—´çœ‹ä¸å‡ºèµ·è‰², ç„¶åå¼€å§‹ç¨³å®šå­¦ä¹ .ï¼‰</p><p>7.1ã€ä¼˜åŒ–å™¨<strong>åªæ¨è</strong> Momentum å’Œ Adamã€‚åœ¨è¿™äº›æ–¹é¢åšå°è¯•æ„ä¹‰ä¸å¤§ï¼Œå¦‚æœæ€§èƒ½æå‡åå€’å¯èƒ½è¯´æ˜æ¨¡å‹ä¸æˆç†Ÿã€‚</p><p>7.2ã€<strong>Adam å¯ä»¥è§£å†³ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæœ‰æ—¶ loss é™ä¸ä¸‹å»ï¼Œæ¢ Adam ç¬é—´å°±å¥½äº†ï¼‰ï¼Œ<strong>ä¹Ÿå¯ä»¥å¸¦æ¥ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜</strong>ï¼ˆæ¯”å¦‚å•è¯è¯é¢‘å·®å¼‚å¾ˆå¤§ï¼Œå½“å‰ batch æ²¡æœ‰çš„å•è¯çš„è¯å‘é‡ä¹Ÿè¢«æ›´æ–°ï¼›å†æ¯”å¦‚Adamå’ŒL2æ­£åˆ™ç»“åˆäº§ç”Ÿçš„å¤æ‚æ•ˆæœï¼‰ã€‚ç”¨çš„æ—¶å€™è¦èƒ†å¤§å¿ƒç»†ï¼Œä¸‡ä¸€é‡åˆ°é—®é¢˜æ‰¾å„ç§é­”æ”¹ Adamï¼ˆæ¯”å¦‚ <a href="https://www.zhihu.com/question/265357659/answer/580469438">MaskedAdam</a>, AdamW å•¥çš„ï¼‰æŠ¢æ•‘ã€‚</p><p>8ã€subword æ€»æ˜¯ä¼šå¾ˆç¨³å®šåœ°æ¶¨ç‚¹ï¼Œåªç®¡ç”¨å°±å¯¹äº†ã€‚</p><p>9ã€<strong>GPU ä¸ŠæŠ¥é”™æ—¶å°½é‡æ”¾åœ¨ CPU ä¸Šé‡è·‘</strong>ï¼Œé”™è¯¯ä¿¡æ¯æ›´å‹å¥½ã€‚ä¾‹å¦‚ â€œERROR:tensorflow:Model diverged with loss = NaNâ€ å…¶å®å¾ˆæœ‰å¯èƒ½æ˜¯è¾“å…¥ ID è¶…å‡ºäº† softmax è¯è¡¨çš„èŒƒå›´ã€‚</p><p><strong>10ã€åˆ«æ²¡è€å¿ƒ</strong>ï¼<br>**æœ‰äº›æŒ‡æ ‡æ˜¯æœ‰æ»åæ€§çš„ï¼Œéœ€è¦ç­‰è®­ç»ƒä¸€æ®µæ—¶é—´æ‰å¼€å§‹åŠ¨ã€‚**å¾ˆå¤šäººè®­ç»ƒå‡ æ­¥çœ‹æ²¡ä»€ä¹ˆæ•ˆæœå°±æŠŠç¨‹åºåœæ‰å¼€å§‹ debug äº†ï¼Œä½†å…¶å®ä»£ç æ¯«æ— é—®é¢˜ã€‚å¦‚æ­¤åå¤å¥½å‡ å¤©ç”šè‡³ä¸€ä¸¤å‘¨éƒ½åœ¨åŸåœ°è¸æ­¥ï¼Œå…¶å®éœ€è¦åšçš„ä»…ä»…æ˜¯è®©ç¨‹åºè‡ªä¸ªå„¿å®‰å®‰é™é™åœ°è·‘ä¸Šå‡ ä¸ªå°æ—¶æˆ–è€…ä¸€å¤©â€¦â€¦</p><h3 id="ç›¸å…³trick">ç›¸å…³trick</h3><ul><li><p>fine-tuning: é€šå¸¸æ¥è¯´ï¼Œç›´æ¥æŠŠé¢„è®­ç»ƒæ¨¡å‹æ¥ç”¨æ•ˆæœä¸ä¸€å®šè¶³å¤Ÿå¥½ï¼Œå› æ­¤éœ€è¦è¿›è¡Œfine-tuningï¼ˆå¾®è°ƒï¼‰ã€‚fine-tuningéœ€è¦å†»ç»“ç½‘ç»œçš„å‰å‡ å±‚å‚æ•°ï¼Œåªæ›´æ–°ç½‘ç»œç»“æ„çš„åé¢å‡ å±‚å’Œæœ€åçš„å…¨è¿æ¥å±‚ï¼Œè¿™æ ·æ•ˆæœä¼šæ›´å¥½ã€‚</p></li><li><p>Learning rate:åœ¨è¿ç§»å­¦ä¹ çš„å¾®è°ƒè¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨è¿‡å¤§çš„å­¦ä¹ ç‡ï¼Œé€šå¸¸æ¥è¯´1e-5æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚</p></li></ul><h4 id="è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚">è¿ç§»å­¦ä¹ å¾€å¾€è¿˜å’Œä½ çš„ä»»åŠ¡ä¸­çš„æ•°æ®å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</h4><ul><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œåœ¨è¿›è¡Œfinetuneå­˜åœ¨overfitçš„é£é™©ï¼Œåˆç”±äºæ•°æ®é›†å’ŒåŸå§‹æ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œå› æ­¤äºŒè€…ä¸è®ºæ˜¯local featureè¿˜æ˜¯global featureéƒ½æ¯”è¾ƒç›¸   è¿‘ï¼Œæ‰€ä»¥æ­¤æ—¶æœ€ä½³çš„æ–¹æ³•æ˜¯æŠŠCNNç½‘ç»œå½“åšç‰¹å¾æå–å™¨ç„¶åè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨è¿›è¡Œåˆ†ç±»</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†ç›¸ä¼¼åº¦è¾ƒé«˜ï¼š</h5><p>å¾ˆæ˜æ˜¾ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒoverfitï¼Œå› æ­¤å¯¹å…¨éƒ¨ç½‘ç»œç»“æ„è¿›è¡Œfine-tuneæ˜¯è¾ƒå¥½çš„ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå°ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>ç”±äºæ•°æ®é›†è¾ƒå°ï¼Œä¸é€‚åˆè¿›è¡Œfine-tuneï¼Œç”±äºæ•°æ®é›†å·®å¼‚å¤§ï¼Œåº”è¯¥åœ¨å•ç‹¬è®­ç»ƒç½‘ç»œç»“æ„ä¸­è¾ƒé«˜çš„å±‚ï¼Œå‰é¢å‡ å±‚localçš„å°±ä¸ç”¨è®­ç»ƒäº†ï¼Œç›´æ¥å›ºå®šæƒå€¼ã€‚åœ¨å®é™…ä¸­ï¼Œè¿™ç§é—®é¢˜ä¸‹è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬æ˜¯ä»ç½‘ç»œçš„æŸå±‚å¼€å§‹å–å‡ºç‰¹å¾ï¼Œç„¶åè®­ç»ƒSVMåˆ†ç±»å™¨ã€‚</p></li><li><h5 id="æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained-modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š">æ–°çš„æ•°æ®é›†è¾ƒå¤§ï¼Œå¹¶ä¸”å’Œpre-trained modelæ‰€ä½¿ç”¨çš„è®­ç»ƒæ•°æ®é›†å·®å¼‚å¾ˆå¤§ï¼š</h5><p>æœ¬æ¥ç”±äºæ•°æ®é›†è¾ƒå¤§ï¼Œå¯ä»¥ä»å¤´å¼€å§‹è®­ç»ƒçš„ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­æ›´åå‘äºè®­ç»ƒæ•´ä¸ªpre-trained modelçš„ç½‘ç»œã€‚</p></li></ul><p>â€‹</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> å¾®è°ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢¯åº¦è£å‰ª</title>
      <link href="/2021/08/12/deep_learning/gradient-clip/"/>
      <url>/2021/08/12/deep_learning/gradient-clip/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é˜…è¯»ä»£ç  optimizer_config = dict(grad_clip=dict(max_norm=35, norm_type=2))ï¼Œå°±æ­¤æ¢ç©¶ä¸€ä¸‹grap_clipã€‚ä»–çš„ä½œç”¨æ˜¯æ¢¯åº¦è£å‰ªï¼Œä¸ºäº†é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ã€‚å…¶ä¸­max_normæ˜¯æœ€å¤§æ¢¯åº¦é˜ˆå€¼ï¼Œnorm_typeæ˜¯æŒ‡å®šçš„èŒƒæ•°ç±»å‹ã€‚</p></blockquote><h2 id="æ¢¯åº¦çˆ†ç‚¸">æ¢¯åº¦çˆ†ç‚¸</h2><p>æ¢¯åº¦çˆ†ç‚¸å°±æ˜¯åœ¨æ¢¯åº¦æ›´æ–°çš„æ—¶å€™åå¯¼æ•°å¾ˆå¤§ï¼Œå¯¼è‡´æ›´æ–°å‚æ•°æ— æ³•æ”¶æ•›åˆ°æœ€å€¼ï¼ˆæ€»æ˜¯è·³åˆ°å…¶ä»–ä¸å¥½çš„åœ°æ–¹ï¼‰ã€‚</p><p>$$<br>w_1=w_1âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>w_2=w_2âˆ’ \alpha \frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p><img src="https://picture.mulindya.com/gradient-exp-pic1.png" alt=""></p><h2 id="æ¢¯åº¦è£å‰ª">æ¢¯åº¦è£å‰ª</h2><p>æ¢¯åº¦è£å‰ªæ˜¯è§£å†³<strong>æ¢¯åº¦çˆ†ç‚¸</strong>çš„ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰çš„æ–¹æ³•ï¼Œå¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œè®ºæ–‡æå‡ºå¯¹æ¢¯åº¦çš„L2èŒƒæ•°è¿›è¡Œè£å‰ªï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°åå¯¼æ•°çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚<br>$$<br>g_1=\frac{âˆ‚J(w)}{âˆ‚w1}<br>$$</p><p>$$<br>g_2=\frac{âˆ‚J(w)}{âˆ‚w2}<br>$$</p><p>è®¾å®šè£å‰ªé˜ˆå€¼ä¸º C = max_normï¼Œ$\Vert g\Vert_2= \sqrt{g<sup>2_1+g</sup>2_2}$</p><p>å½“$\Vert g\Vert_2$å¤§äºcæ—¶ï¼š</p><p>$$<br>g = \frac{c}{\Vert g \Vert_2} \cdot g<br>$$<br>å½“$\Vert g\Vert_2$å°äºç­‰äºCæ—¶ï¼šgä¸å˜ã€‚å…¶ä¸­ï¼Œ$\frac{c}{\Vert g \Vert_2}$æ˜¯ä¸€ä¸ªæ ‡é‡</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>è®­ç»ƒæ¨¡å‹å‡ºç°Losså€¼å‡ºç°è·³åŠ¨ï¼Œä¸€ç›´ä¸æ”¶æ•›æ—¶ï¼Œé™¤äº†è®¾å°å­¦ä¹ ç‡ä¹‹å¤–ï¼Œæ¢¯åº¦è£å‰ªä¹Ÿæ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ã€‚</p><p>ç„¶è€Œæ•ˆæœä¸ä½³æ—¶ï¼Œé‚£è¿™å°±è·Ÿå­¦ä¹ ç‡å’Œæ¢¯åº¦çˆ†ç‚¸æ²¡å•¥å…³ç³»äº†ã€‚å› æ­¤ï¼Œ<strong>å­¦ä¹ ç‡</strong>çš„è®¾å®šå’Œ<strong>æ¢¯åº¦è£å‰ª</strong>çš„é˜ˆå€¼å¹¶ä¸èƒ½æé«˜æ¨¡å‹çš„å‡†ç¡®ç‡</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ ï¼Œæ¢¯åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer05 æ›¿æ¢ç©ºæ ¼</title>
      <link href="/2021/08/11/leetcode/leetcode-offer05/"/>
      <url>/2021/08/11/leetcode/leetcode-offer05/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ›¿æ¢ç©ºæ ¼</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² <code>s</code> ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ"%20"ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">è¾“å…¥ï¼šs = <span class="hljs-string">"We are happy."</span><br>è¾“å‡ºï¼š<span class="hljs-string">"We%20are%20happy."</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= s çš„é•¿åº¦ &lt;= 10000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ç›´æ¥æ›¿æ¢å³å¯ã€‚ç›¸å½“äºä½¿ç”¨replaceæ–¹æ³•</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">replaceSpace</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:</span><br>       <span class="hljs-comment">#ç›¸å½“äºç°æˆå‡½æ•° return s.replace(" ","%20")</span><br>        result = <span class="hljs-string">""</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x==<span class="hljs-string">' '</span>:<br>                x = <span class="hljs-string">"%20"</span><br>            result += x<br>        <span class="hljs-keyword">return</span> result<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> å­—ç¬¦ä¸² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer04 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</title>
      <link href="/2021/08/11/leetcode/leetcode-offer04/"/>
      <url>/2021/08/11/leetcode/leetcode-offer04/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><p>ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  [<span class="hljs-number">1</span>,   <span class="hljs-number">4</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">15</span>],<br>  [<span class="hljs-number">2</span>,   <span class="hljs-number">5</span>,  <span class="hljs-number">8</span>, <span class="hljs-number">12</span>, <span class="hljs-number">19</span>],<br>  [<span class="hljs-number">3</span>,   <span class="hljs-number">6</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">22</span>],<br>  [<span class="hljs-number">10</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">17</span>, <span class="hljs-number">24</span>],<br>  [<span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">23</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>]<br>]<br></code></pre></td></tr></tbody></table></figure><p>ç»™å®š target = <code>5</code>ï¼Œè¿”å› <code>true</code>ã€‚</p><p>ç»™å®š target = <code>20</code>ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 1000</li><li>0 &lt;= m &lt;= 1000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å½“å¼€å§‹æƒ³è¦é‡‡ç”¨äºŒåˆ†æ³•çš„æ€æƒ³è¿›è¡Œåˆ¤æ–­ã€‚ä½†æ˜¯å‘ç°äºŒåˆ†åªèƒ½è€ƒè™‘åˆ°å·¦ä¸Šå’Œå³ä¸‹å—çš„å†…å®¹ã€‚å³ä¸Šå’Œå·¦ä¸‹çš„å†…å®¹æ— æ³•åˆ¤æ–­å…¶å¤§å°åˆ’åˆ†ã€‚æ‰€ä»¥ä¼šæœ‰è§†è§‰ç›²åŒºæ— æ³•äºŒåˆ†ç¼©å°åŒºåŸŸã€‚</p><p><font color="purple">äºŒç»´æ•°ç»„æ— æ³•ç”¨äºŒåˆ†æ³•ï¼Œå› ä¸ºå…¶â€œäºŒåˆ†â€æ˜¯åˆ†ä¸º4ä»½ï¼Œæ— æ³•å……åˆ†æ¶µç›–è¿›è¡Œåˆ¤æ–­ï¼Œä¼šå‡ºç°é”™è¯¯ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        si,sj = <span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>        ei,ej = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isExit</span>(<span class="hljs-params">matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], si, sj, ei, ej, target: <span class="hljs-built_in">int</span></span>):</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (si&lt;=ei <span class="hljs-keyword">and</span> sj&lt;=ej): <span class="hljs-comment">#å…ˆåˆ¤æ–­èŒƒå›´</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target&lt;matrix[si][sj] <span class="hljs-keyword">or</span> target&gt;matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span>(target==matrix[si][sj] <span class="hljs-keyword">or</span> target==matrix[ei][ej]): <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            mi,mj = <span class="hljs-built_in">int</span>((si+ei)/<span class="hljs-number">2</span>),<span class="hljs-built_in">int</span>((sj+ej)/<span class="hljs-number">2</span>)<br>            <span class="hljs-keyword">if</span>(target==matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> (target&gt;matrix[mi][mj]):<br>                <span class="hljs-keyword">return</span> isExit(matrix,mi+<span class="hljs-number">1</span>,mj,ei,ej,target) <span class="hljs-keyword">or</span> isExit(matrix,mi,mj+<span class="hljs-number">1</span>,ei,ej,target)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> isExit(matrix,si,sj,mi-<span class="hljs-number">1</span>,mj,target) <span class="hljs-keyword">or</span> isExit(matrix,si,sj,mi,mj-<span class="hljs-number">1</span>,target)<br>        <span class="hljs-keyword">return</span> isExit(matrix,si,sj,ei,ej,target)<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨çº¿æ€§æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿å¾—å¤æ‚åº¦ä»æš´åŠ›çš„O(n*m)åˆ°O(n+m)<br>æ€æƒ³æ˜¯é€‰å–å·¦ä¸‹è§’æˆ–è€…å³ä¸Šè§’ï¼Œå‘¨å›´ä¸å‡è¡¡çš„ç‚¹å¼€å§‹è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·æ‰çŸ¥é“åº”è¯¥å‘å“ªä¸ªæ–¹å‘ç¼©å°åŒºåŸŸ.</p><p><font color="hotpink">ä¾‹å¦‚æ­¤å¤„æ˜¯é€‰å–å·¦ä¸‹è§’ä½œä¸ºåˆå§‹ï¼Œå‘ä¸Šæ­¤åˆ—é€æ¸å˜å°ï¼Œå‘å³æ­¤è¡Œé€æ¸å˜å¤§ã€‚å› æ­¤targetå¦‚æœæ¯”æ­¤ç‚¹å°ï¼Œå°±å‘ä¸Šç§»åŠ¨æŸ¥æ‰¾ï¼Œå¦‚æœæ¯”æ­¤ç‚¹å¤§ï¼Œå°±å‘å³æŸ¥æ‰¾ã€‚</font></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findNumberIn2DArray</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(matrix): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        i,j = <span class="hljs-built_in">len</span>(matrix)-<span class="hljs-number">1</span>,<span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j&lt;=<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span>(target==matrix[i][j]):<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span>(target&gt;matrix[i][j]):j += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:i -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ•°ç»„æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer03 æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</title>
      <link href="/2021/08/11/leetcode/leetcode-offer03/"/>
      <url>/2021/08/11/leetcode/leetcode-offer03/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚</p><p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼š<br><span class="hljs-string">[2, 3, 1, 0, 2, 5, 3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span> æˆ– <span class="hljs-number">3</span> <br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>2 &lt;= n &lt;= 100000</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>åˆ›å»ºä¸€ä¸ªflagæ•°ç»„è¿›è¡Œæ ‡è®°ï¼›</p><p>æŒ‡å®šå¤§å°çš„æ•°ç»„åˆ›å»º</p><p><strong>å¡«å‘ï¼š</strong> <font color="red"> ä¸è¦ä½¿ç”¨åè€…,å› ä¸ºåè€…æ˜¯æµ…æ‹·è´ï¼Œæ”¹å˜æŸä¸€å…ƒç´ ï¼Œè¯¥åˆ—å‡ä¼šæ”¹å˜</font></p><ul><li><p>ä¸€ç»´</p><p>a = [0 for _ in range(n)]  ã€Š=ã€‹  a = [0] * n</p></li><li><p>äºŒç»´</p><p>a = [[0 for col in range(m)] for row in range(n)]  <em># åˆ›å»ºä¸€ä¸ªn*mçš„äºŒç»´çŸ©é˜µaï¼Œæ¯ä¸ªåˆå€¼éƒ½æ˜¯0</em>   ã€Š=ã€‹  a = [[0] *m] *n</p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        flag = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))] <span class="hljs-comment">#åˆ›å»ºé•¿åº¦ä¸ºnumsçš„æ•°ç»„ ä¹Ÿå¯ä»¥ç”¨[0]*n</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums:<br>            flag[x] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span>(flag[x]&gt;<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">return</span> x<br></code></pre></td></tr></tbody></table></figure><p><font color="purple" size="4">å®é™…ä¸Šæ— éœ€æ„å»ºæ–°çš„æ•°ç»„è¿›è¡Œæ ‡è®°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨setçš„é•¿åº¦è¿›è¡Œåˆ¤æ–­ã€‚æˆ–è€…ä½¿ç”¨sortï¼Œä½¿ç”¨listçš„sortæ–¹æ³•ã€‚åˆ¤æ–­ç›¸é‚»çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚</font></p><p>æ–¹æ³•1ï¼šåˆ©ç”¨python setçš„æ— åºä¸é‡å¤ç‰¹æ€§ï¼šåˆ©ç”¨Pythonä¸­çš„seté›†åˆä¸ºæ— åºä¸é‡å¤é›†åˆï¼Œé€šè¿‡åˆ¤æ–­temp_setçš„é•¿åº¦ç¡®å®šæ˜¯å¦æ˜¯é‡å¤æ•°å­—ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        temp_set = <span class="hljs-built_in">set</span>()<br>        repeat = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            temp_set.add(nums[i])<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(temp_set) &lt; i + <span class="hljs-number">1</span>:<br>                repeat = nums[i]<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> repeat<br></code></pre></td></tr></tbody></table></figure><p>æ–¹æ³•2ï¼šåˆ©ç”¨pythonçš„sortå‡½æ•°æ’åºï¼Œç„¶åè®¡ç®—ç›¸é‚»ä¸¤ä¸ªæ•°æ®æ˜¯å¦ç›¸ç­‰å³å¯ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findRepeatNumber</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        nums.sort()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> nums[i]==nums[i+<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">return</span> nums[i]<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ•°ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dvcç›¸å…³è®¾ç½®</title>
      <link href="/2021/08/10/dvc/dvc-config/"/>
      <url>/2021/08/10/dvc/dvc-config/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><p>è¿è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™ï¼š</p><blockquote><p>(base) root@9b1a4b217508:/workspace/fanmeilin/project/task/ai_lab# sh <a href="http://setup.sh">setup.sh</a> detection<br><a href="http://setup.sh">setup.sh</a>: 12: <a href="http://setup.sh">setup.sh</a>: dvc: not found<br>cp: failed to get attributes of â€˜assets/examplesâ€™: No such file or directory<br>[*] copy DETECTION skeleton scripts to upper directory</p></blockquote><p>åŸå› æ˜¯æœªå®‰è£…dvcï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…dvc</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip</span> install dvc==<span class="hljs-number">2</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">pip</span> install 'dvc[s<span class="hljs-number">3</span>]'<br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨Winå¹³å°ä¸‹å¯èƒ½ä¼šæŠ¥é”™ï¼š</p><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR: </span>Cannot uninstall 'ruamel-yaml'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.<br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶éœ€è¦è¿›å…¥python çš„lib/site-packages ä¸­åˆ é™¤ â€˜ruamel-yamlâ€™ ç›¸å…³çš„æ–‡ä»¶</p></blockquote><p><strong>æ³¨æ„ï¼š</strong> dvc 2.3.0 ç‰ˆæœ¬ä¸ä¹‹åçš„hashè®¡ç®—æ–¹æ³•ä¸åŒï¼Œä¸èƒ½æ··ç”¨</p><p>å†æ¬¡æ‰§è¡Œ sh <a href="http://setup.sh">setup.sh</a> detectionæŠ¥é”™</p><blockquote><p>ERROR: unexpected error - Cannot connect to host ceph01:80 ssl:default [Name or service not known]: [Errno -2] Name or service not known</p></blockquote><p>åˆ™ä¿®æ”¹etc/hostsæ–‡ä»¶</p><ul><li>é…ç½®hostsæ–‡ä»¶ï¼Œåœ¨hostsæ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹<br><code>192.168.10.91 ceph01</code></li></ul><h5 id="è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥-å¸ˆå…„åšå®¢-DVC-ä½¿ç”¨æ‰‹å†Œ"><em>è¯¦ç»†dvcçš„å„ç§æ“ä½œï¼Œå¯ç§»æ­¥</em> <a href="https://www.zywvvd.com/2020/12/17/dvc/dvc/">å¸ˆå…„åšå®¢ DVC ä½¿ç”¨æ‰‹å†Œ</a></h5>]]></content>
      
      
      <categories>
          
          <category> dvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerçš„sshç›¸å…³é…ç½®</title>
      <link href="/2021/08/10/docker/docker-ssh/"/>
      <url>/2021/08/10/docker/docker-ssh/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒå¸ˆå…„åšå®¢ï¼š<a href="https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/">https://www.zywvvd.com/2020/11/02/windows/win_ssh_linux_docker/win_ssh_linux_docker/</a></p></blockquote><blockquote><p>sshæ˜¯è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ï¼Œå¹¿æ³›ç”¨äºè¿œç¨‹ç™»å½•çš„åœºæ™¯ï¼Œä¹Ÿæ˜¯è¿œç¨‹è°ƒè¯•ä»£ç çš„ç¥å…µåˆ©å™¨ã€‚åœ¨å¼€å‘ä¸­ç»å¸¸ä¼šåœ¨æœåŠ¡å™¨å¯åŠ¨è‡ªå·±çš„ docker å®¹å™¨è¿›è¡Œå¼€å‘ï¼Œåˆéœ€è¦è°ƒè¯•ä»£ç ï¼Œvimçš„è°ƒè¯•ç¯å¢ƒé…ç½®èµ·æ¥é—¨æ§›åˆå¤ªé«˜ã€‚äºæ˜¯å°±æœ‰äº†ä½¿ç”¨Windowsç›´æ¥sshæ‰“é€šdockerè¿›è¡Œè°ƒè¯•çš„éœ€æ±‚ã€‚æœ¬æ–‡è®°å½•Windowsè¿œç¨‹ç™»å½•LinuxæœåŠ¡å™¨dockerå®¹å™¨çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜</h2><ul><li>ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ Win 10</li><li>è¢«ç™»å½•ä¸»æœºæ“ä½œç³»ç»Ÿ docker container in Linux</li><li>ä¸»æœºä¸è¢«ç™»å½•ä¸»æœºï¼ˆæ­¤å¤„æŒ‡æœåŠ¡å™¨ï¼Œä¸æ˜¯dockerï¼‰ç½‘ç»œè”é€šï¼ŒIPåœ¨åŒä¸€ç½‘æ®µ</li><li>æœåŠ¡å™¨ä¸dockerçš„IPåœ¨åŒä¸€ç½‘æ®µ</li></ul><h2 id="é…ç½®æ–¹æ³•">é…ç½®æ–¹æ³•</h2><h3 id="å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„">å»ºç«‹dockerä¸LinuxæœåŠ¡å™¨çš„ç«¯å£æ˜ å°„</h3><blockquote><p>sshåè®®é“¾æ¥æ—¶é»˜è®¤ä½¿ç”¨22ç«¯å£ï¼ŒWindowsä¸dockerçš„ç«¯å£å¾€å¾€ä¸èƒ½ç›´æ¥è¿›è¡Œæ˜ å°„ï¼ˆå¾ˆå¯èƒ½ä¸åœ¨ä¸€ä¸ªç½‘æ®µï¼‰ï¼Œå› æ­¤éœ€è¦å°†dockerçš„22ç«¯å£æ˜ å°„åˆ°LinuxæœåŠ¡å™¨çš„æŸä¸ªç«¯å£ï¼Œæ­¤æ—¶éœ€è¦åœ¨å»ºç«‹dockerå®¹å™¨æ—¶è¿›è¡Œ<a href="https://www.zywvvd.com/2020/05/14/coding/environment/wingide-remote-docker/wingide-remote-docker/#docker%E9%85%8D%E7%BD%AE">é…ç½®</a>ï¼š</p></blockquote><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ docker run -it --name vvd -p <span class="hljs-number">3721</span>:<span class="hljs-number">22</span> -v <span class="hljs-regexp">/root/</span>tmp:<span class="hljs-regexp">/root/</span>tmp my_docker bash<br></code></pre></td></tr></tbody></table></figure><ul><li>å…¶ä¸­ <code>-p</code> çš„éƒ¨åˆ†è¡¨ç¤ºå°†æœ¬æœºï¼ˆæœåŠ¡å™¨ï¼‰çš„3721ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„22ç«¯å£ã€‚</li></ul><h3 id="å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡">å®¹å™¨å†…éƒ¨å®‰è£…sshæœåŠ¡</h3><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•çš„å®¹å™¨å†…éƒ¨å»ºç«‹å¹¶å¯åŠ¨sshæœåŠ¡ã€‚</p></blockquote><ul><li>é¦–å…ˆéœ€è¦å®‰è£…ï¼š</li></ul><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-builtin-name">get</span> update<br>apt-<span class="hljs-builtin-name">get</span> install openssh-server<br>apt-<span class="hljs-builtin-name">get</span> install openssh-client<br></code></pre></td></tr></tbody></table></figure><ul><li>å®‰è£…å®Œæˆåéœ€è¦å®¹å™¨æ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æœåŠ¡ï¼Œå¯ä»¥åœ¨ <code>~/.bashrc</code>ä¸­åŠ å…¥ï¼š</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿™æ ·å°±ä¿è¯äº†dockerå®¹å™¨è‡ªåŠ¨å¯åŠ¨è¯¥æœåŠ¡ã€‚</p></blockquote><ul><li>æŸ¥çœ‹sshè¿è¡ŒçŠ¶æ€</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh status<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¦‚æœæ˜¯ <code>* sshd is running</code> è¯´æ˜sshæ­£å¸¸è¿è¡Œ</p></blockquote><h3 id="ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®">ä¿®æ”¹å®¹å™¨å†…rootç”¨æˆ·ç™»å½•è®¾ç½®</h3><blockquote><p>æœ‰çš„å®¹å™¨é»˜è®¤ä¸æ”¯æŒrootç”¨æˆ·è¿œç¨‹ä½¿ç”¨sshåè®®è¿›è¡Œå¯†ç ç™»å½•çš„ï¼Œæ­¤æ—¶éœ€è¦æ›´æ”¹è®¾ç½®ã€‚</p></blockquote><ul><li>æ‰“å¼€ <code>/etc/ssh/sshd_config</code>æ–‡ä»¶ï¼š</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å°† <code>PermitRootLogin</code> è®¾ç½®ä¸º yes</li></ul><h3 id="ä¿®æ”¹rootå¯†ç ">ä¿®æ”¹rootå¯†ç </h3><blockquote><p>è¿œç¨‹ç™»å½•æ—¶éœ€è¦ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·å¯†ç ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨rootç”¨æˆ·ç™»å½•å¥½äº†ï¼Œéœ€è¦è®¾ç½®æ–°å»ºå®¹å™¨çš„å¯†ç ï¼š</p></blockquote><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></tbody></table></figure><h3 id="è®¾ç½®SSH">è®¾ç½®SSH</h3><ul><li><a href="https://www.zywvvd.com/2020/02/23/git/link_github/Git-connect-remote-pos/#%E5%88%9B%E5%BB%BASSH%E5%AF%86%E9%92%A5">æœ¬åœ°ç”Ÿæˆssh key</a></li><li>å°†.pub å†…å®¹å¤åˆ¶ç²˜è´´åŠ å…¥åˆ°è¿œç¨‹ ~/.ssh/authorized_keys</li></ul><h3 id="SSHè¿æ¥æœåŠ¡å™¨">SSHè¿æ¥æœåŠ¡å™¨</h3><blockquote><p>éœ€è¦ç”¨æˆ·åï¼ˆè¢«ç™»å½•ç«¯ç”¨æˆ·ï¼‰ä¸è¢«ç™»å½•çš„ä¸»æœºipå’Œç«¯å£å·</p><p>ä¾‹å¦‚ï¼š ç”¨æˆ·å- root ipï¼š192.168.10.12 ç«¯å£æ˜ å°„ä¸º 3721</p></blockquote><ul><li>linux</li></ul><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> root@<span class="hljs-number">192.168.10.12:3721</span><br></code></pre></td></tr></tbody></table></figure><ul><li>Windows</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ssh</span> -p <span class="hljs-number">3721</span> root@<span class="hljs-number">192.168.10.12</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200256.png" alt=""></p><ul><li>å¦‚æœä¸æ¸…æ¥šLinuxç³»ç»Ÿç«¯å£æ˜ å°„é…ç½®æƒ…å†µï¼š</li></ul><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">iptables -<span class="hljs-built_in">t</span> nat -L -<span class="hljs-built_in">n</span><br></code></pre></td></tr></tbody></table></figure><h3 id="X-shellé…ç½®">X-shellé…ç½®</h3><blockquote><p>å‘½ä»¤è¡Œsshç™»å½•æˆåŠŸåå°±å¯ä»¥åœ¨X-shellä¸­å»ºç«‹é…ç½®ä¿¡æ¯æ–¹ä¾¿åœ°è¿æ¥äº†ã€‚</p></blockquote><ul><li>æ–°å»ºä¼šè¯ï¼Œå¡«å†™åç§°ã€IPã€ç«¯å£å·ï¼ˆæˆ‘ä»¬åˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200522.png" alt=""></p><ul><li>ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œå¡«å…¥ç”¨æˆ·åå¯†ç ï¼ˆåˆšåˆšé…ç½®è¿‡çš„ï¼‰ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200640.png" alt=""></p><ul><li>éšåå°±å¯ä»¥ä½¿ç”¨è¯¥ä¼šè¯ç›´æ¥ç™»å½•dockerå®¹å™¨äº†ï¼Œä¸ºè¿œç¨‹è°ƒè¯•æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼š</li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201102200804.png" alt=""></p><h3 id="å¡«å‘">å¡«å‘</h3><ul><li><p>ssh: Could not resolve hostname 192.168.10.12:3721: Name or service not known</p><blockquote><p>è¿™æ˜¯åœ¨Windowsä¸­ä½¿ç”¨äº†Linuxæ ¼å¼çš„SSHç™»å½•å‘½ä»¤å¯¼è‡´çš„è§£æé”™è¯¯</p><p>å°†å‘½ä»¤è¯­æ³•æ›´æ¢ä¸ºWindowsçš„æ ¼å¼å³å¯</p></blockquote></li><li><p>root ç”¨æˆ·æ— è®ºå¦‚ä½•å¯†ç ä¸è¢«æ¥å—</p><blockquote><p>éœ€è¦åœ¨è¢«ç™»å½•ä¸»æœº /etc/ssh/sshd_config ä¸­è®¾ç½®ï¼š</p><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># PermitRootLogin prohibit-password # é»˜è®¤æ‰“å¼€ ç¦æ­¢rootç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†ï¼Œéœ€è¦å°†å…¶æ³¨é‡Š</span><br><span class="hljs-attribute">RSAAuthentication</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨ RSA è®¤è¯</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span> <span class="hljs-comment">#å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼</span><br>PermitRootLogin <span class="hljs-literal">yes</span> <span class="hljs-comment">#å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡ç‚¹ï¼š<strong>PermitRootLogin yes</strong></li></ul></blockquote></li><li><p>Connection to 192.168.10.12 closed.</p></li><li><p>æˆ–</p></li><li><p>Connection closed by foreign host.</p><blockquote><p>æ„æ€æ˜¯ æ–­å¼€ä¸»æœºé“¾æ¥äº†ï¼Œå‡ºç°è¿™ç§é—®é¢˜ï¼Œè·Ÿä½ çš„IPTABLESï¼Œé˜²ç«å¢™ä»€ä¹ˆçš„éƒ½æ²¡å…³ç³»ã€‚</p><p>é€ æˆè¿™ä¸ªåŸ å› æ˜¯å› ä¸ºåŸæ¥è¿æ¥åˆ°SSHDæœåŠ¡å™¨è¿›ç¨‹çš„22ç«¯å£ï¼Œå½“ä½ çš„å®¢æˆ·ç«¯çªç„¶æ–­å¼€æ—¶ï¼ŒæœåŠ¡å™¨ç«¯çš„TCPè¿æ¥å°±å¤„äºä¸€ä¸ªåŠæ‰“å¼€çŠ¶æ€ã€‚å½“ä¸‹ä¸€æ¬¡åŒä¸€å®¢æˆ·æœºå†æ¬¡å»ºç«‹ TCPè¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ£€æµ‹åˆ°è¿™ä¸ªåŠæ‰“å¼€çš„TCPè¿æ¥ï¼Œå¹¶å‘å®¢æˆ·æœºå›ä¼ ä¸€ä¸ªç½®ä½RSTçš„TCPæŠ¥æ–‡ï¼Œå®¢æˆ·æœºå°±ä¼šæ˜¾ç¤ºconnection closed by foreign hostã€‚<br>è¿™æ˜¯TCPåè®®æœ¬èº«çš„ä¸€ä¸ªä¿æŠ¤æªæ–½ï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œä½ åªè¦å†é‡æ–°è¿æ¥æœåŠ¡å™¨å°±èƒ½è¿ä¸Šã€‚</p><p>â€”â€”â€” <a href="http://www.pooy.net/connection-closed-foreign-host.html">http://www.pooy.net/connection-closed-foreign-host.html</a></p><p>æ€»ç»“ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š <strong>å…³æœºé‡å¯</strong></p></blockquote></li></ul><h3 id="å…³äºsshçš„ç›¸å…³é…ç½®">å…³äºsshçš„ç›¸å…³é…ç½®</h3><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>ssh<br>vi ssh_config <span class="hljs-comment">#å¯è®¾ç½®sshçš„é»˜è®¤ç«¯å£ï¼ˆ22ï¼‰</span><br>vi sshd_config<br></code></pre></td></tr></tbody></table></figure><p>ssh_configå’Œsshd_configéƒ½æ˜¯sshæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼ŒäºŒè€…åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ï¼Œåè€…åˆ™æ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½å…è®¸ä½ é€šè¿‡è®¾ç½®ä¸åŒçš„é€‰é¡¹æ¥æ”¹å˜å®¢æˆ·ç«¯ç¨‹åºçš„è¿è¡Œæ–¹å¼ã€‚</p><h4 id="é‡å¯sshæœåŠ¡">é‡å¯sshæœåŠ¡</h4><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">service sshd restart</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæŠ¥é”™ sshd: unrecognized service åˆ™éœ€è¦å¼€å¯sshæœåŠ¡ã€‚</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/ssh start<br></code></pre></td></tr></tbody></table></figure><h2 id="vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨">vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨</h2><ul><li><p>æ­£ç¡®çš„sshæœåŠ¡</p></li><li><p>å¯†ç è®¾ç½®å®Œæˆï¼ˆpasswd rootï¼‰</p></li></ul><h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3><ul><li><p>å®‰è£… Remote Development æ’ä»¶</p><blockquote><p>ä¼šè‡ªåŠ¨å®‰è£… Remote-WSL / Containers / SSH ç­‰æ’ä»¶ã€‚</p></blockquote></li></ul><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028143530.png" alt=""></p><h3 id="é…ç½®ä¸»æœºä¿¡æ¯">é…ç½®ä¸»æœºä¿¡æ¯</h3><blockquote><p>ctrl + shift + p</p></blockquote><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028174129.png" alt=""></p><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175152.png" alt=""></p><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host Enter<br>  HostName <span class="hljs-number">192.168</span>.<span class="hljs-number">10.15</span><br>  Port <span class="hljs-number">12345</span><br>  <span class="hljs-keyword">User</span> <span class="hljs-title">root</span><br>  IdentityFile ~\.ssh\id_rsa<br>  IdentitiesOnly yes<br></code></pre></td></tr></tbody></table></figure><h3 id="vs-code-è¿æ¥è¿œç¨‹ä¸»æœº">vs code è¿æ¥è¿œç¨‹ä¸»æœº</h3><p><img src="https://photos.zywvvd.com/images_matrixtime/20201028175324.png" alt=""></p><blockquote><p>ä¹‹åé€‰æ‹©ç›®æ ‡ä¸»æœºçš„æ“ä½œç³»ç»Ÿã€‚</p></blockquote><ul><li><p>æˆåŠŸè¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼š</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¤¹è¿è¡Œç¨‹åºæ—¶ï¼Œé€‰æ‹©ä½¿ç”¨çš„Pythonç¯å¢ƒï¼š</p></li></ul><h4 id="ç›¸å¯¹è·¯å¾„çš„è®¾ç½®">ç›¸å¯¹è·¯å¾„çš„è®¾ç½®</h4><p>åœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„å‡ºç°é”™è¯¯ã€‚</p><blockquote><p>python æ’ä»¶è®¾ç½®ä¸­æ²¡æœ‰è®¾ç½®<code>ç»ˆç«¯æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨æ–‡ä»¶çš„è·¯å¾„ä»£æ›¿ç°åœ¨æ‰“å¼€çš„ç›®å½•</code>ã€‚</p></blockquote><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><ul><li>æœç´¢é…ç½® <code>execute in file</code>ï¼š</li></ul><p><img src="https://photos.zywvvd.com/win11-mt/20210717114300.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> è¿œç¨‹é…ç½® </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerç›¸å…³å‘½ä»¤</title>
      <link href="/2021/08/10/docker/docker-intro/"/>
      <url>/2021/08/10/docker/docker-intro/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç®€è¦ä»‹ç»Dockerï¼Œè®°å½•Dockerå¸¸ç”¨å‘½ä»¤ä½¿ç”¨æ–¹æ³•ã€‚</p><p>æ¬è¿è‡ªå¸ˆå…„çš„åšå®¢ åˆè§è‹å²š ï¼š<a href="https://www.zywvvd.com/2020/05/06/docker/docker_usage/">https://www.zywvvd.com/2020/05/06/docker/docker_usage/</a></p></blockquote><h3 id="Docker-ç®€ä»‹">Docker ç®€ä»‹</h3><blockquote><p>**Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚**Docker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p></blockquote><h3 id="Docker-ä½¿ç”¨æµç¨‹">Docker ä½¿ç”¨æµç¨‹</h3><ul><li><a href="https://docs.docker.com/desktop/">å®‰è£…docker</a></li><li>åˆ›å»ºImage</li><li>ä»Imageåˆ›å»ºContainer</li><li>åœ¨Containerä¸­å·¥ä½œ</li><li>å°†åœ¨Containerä¸­åšçš„ä¿®æ”¹æäº¤ç»™Image</li><li>é”€æ¯Container</li></ul><h3 id="å‘½ä»¤ä»‹ç»">å‘½ä»¤ä»‹ç»</h3><ul><li>æ‹‰å– image</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> image pull<span class="hljs-meta"> [docker-url]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>è·å–docker images åˆ—è¡¨</li></ul><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">docker images<br>æˆ–<br>docker <span class="hljs-keyword">image</span> <span class="hljs-keyword">ls</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å»ºç«‹container ï¼ˆnvidia docker)</li></ul><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">NV_GPU=<span class="hljs-selector-attr">[gpu_num]</span> nvidia-docker run -it --name <span class="hljs-selector-attr">[container_name]</span> --shm-size=<span class="hljs-selector-attr">[shm_size]</span> --rm -v <span class="hljs-selector-attr">[current_dir]</span>:<span class="hljs-selector-attr">[container_dir]</span> -<span class="hljs-selector-tag">p</span> <span class="hljs-selector-attr">[current_port]</span>:<span class="hljs-selector-attr">[container_port]</span> <span class="hljs-selector-attr">[image_name]</span>:<span class="hljs-selector-attr">[image_tag]</span>  <span class="hljs-selector-attr">[command]</span> <br></code></pre></td></tr></tbody></table></figure><p>å®ä¾‹ï¼š</p><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nvidia</span>-docker run -it --name mlfan --shm-size=<span class="hljs-number">10</span>g -v /disk/fanmeilin:/workspace/fanmeilin -p <span class="hljs-number">12345</span>:<span class="hljs-number">22</span> -p <span class="hljs-number">12346</span>:<span class="hljs-number">8080</span> -p <span class="hljs-number">12347</span>:<span class="hljs-number">5678</span> tf-<span class="hljs-number">1</span>.<span class="hljs-number">14</span>-<span class="hljs-number">2</span>.<span class="hljs-number">0</span>-<span class="hljs-number">2</span>.<span class="hljs-number">1</span>:<span class="hljs-number">1</span>.<span class="hljs-number">0</span> bash<br></code></pre></td></tr></tbody></table></figure><p><font color="SlateBlue" size="4">æ³¨æ„ä¸è¦åŠ  --rm&nbsp; å¦åˆ™è½½åœ¨container stopä¹‹åä¼šè‡ªåŠ¨åˆ é™¤æ­¤å®¹å™¨</font></p><blockquote><p>NV_GPU: containerä¸­å¯è§çš„GPUï¼Œå¦‚æœä¸è®¾ç½®å¯è§æ‰€æœ‰GPU</p><p>-it: å°†å®¹å™¨çš„ Shell æ˜ å°„åˆ°å½“å‰çš„ Shellï¼Œç„¶åä½ åœ¨æœ¬æœºçª—å£è¾“å…¥çš„å‘½ä»¤ï¼Œå°±ä¼šä¼ å…¥å®¹å™¨</p><p>â€“name: å®¹å™¨åç§°ï¼Œå¦‚æœä¸è®¾ç½®ä¼šéšæœºåˆ†é…ä¸€ä¸ªåå­—</p><p>â€“shm-size: å®¹å™¨å…±äº«å†…å­˜å¤§å°è®¾ç½®ã€‚å¦‚æœä¸è®¾ç½®é»˜è®¤å¤§å°64Mï¼Œå¯¹äºéœ€è¦ä½¿ç”¨å…±äº«å†…å­˜çš„æƒ…å†µå¾€å¾€æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå¦‚æœè®¾ç½®ä¸º10gï¼Œè¿™æ ·é…ç½®ï¼š <code>--ssh-size="10g"</code></p><p>â€“rm: å®¹å™¨å…³é—­åè‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æœä¸è®¾ç½®å®¹å™¨ä¸ä¼šè‡ªåŠ¨åˆ é™¤</p><p>-v: é©±åŠ¨å™¨æ˜ å°„ï¼Œå°†æœ¬æœºçš„ç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„æŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼›éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ä¸»æœºæ–‡ä»¶å¤¹ä¸­çš„æŒ‚è½½ç›®å½•åœ¨å®¹å™¨ä¸­æ˜¯å¯è§çš„ï¼›éœ€è¦å†è¯´æ˜çš„æ˜¯å®¹å™¨å¯åŠ¨æ—¶ä¸»æœºæŒ‚è½½çš„ç›®å½•å®¹å™¨æ˜¯è§ä¸åˆ°çš„ï¼›æœ€åè¯´æ˜ï¼Œå®¹å™¨å…³é—­å†æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°ä¸»æœºæŒ‚è½½çš„æ‰€æœ‰æ–‡ä»¶å¤¹äº†ã€‚</p><p>-p: æš´æ¼å®¹å™¨çš„ç«¯å£åˆ°æœ¬æœºçš„ç«¯å£ä¸Šï¼Œä¾‹å¦‚ç”¨äºsshè¿æ¥å®¹å™¨æ—¶éœ€è¦å°†å®¹å™¨çš„22ç«¯å£æš´éœ²åˆ°ä¸»æœºçš„ç«¯å£ä¸Š(æ¯”å¦‚3721)ï¼Œåˆ™å¯ä»¥è®¾ç½® <code>-p 3721:22</code></p><p>image_name, image_tag: è¿™æ˜¯dockeré•œåƒçš„åç§°ä¸æ ‡è®°ï¼Œå¦‚æœä½¿ç”¨æœ¬æœºé•œåƒå¯ä»¥åœ¨docker imagesåˆ—è¡¨ä¸­æŸ¥è¯¢åˆ°</p><p>command: å¯åŠ¨å®¹å™¨åå†…éƒ¨æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ä¸º <code>/bin/bash</code></p></blockquote><ul><li>æŸ¥è¯¢containeråˆ—è¡¨</li></ul><figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker container <span class="hljs-keyword">ls</span> <span class="hljs-params">--all</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>â€“all: åŠ ä¸Šè¯¥å‚æ•°ä¼šæ˜¾ç¤ºæ²¡æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä¸åŠ çš„è¯ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨</p></blockquote><ul><li>åœæ­¢æŒ‡å®šçš„å®¹å™¨è¿è¡Œ</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> kill <span class="hljs-comment">[containerID]</span><br>docker stop <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p><code>docker container kill</code>å‘½ä»¤ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGKILL ä¿¡å·ã€‚<code>docker container stop</code>å‘½ä»¤ç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGTERM ä¿¡å·ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†å‘å‡º SIGKILL ä¿¡å·ã€‚</p></blockquote><ul><li>å¯åŠ¨åœæ­¢çš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> start<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>é‡å¯è¿è¡Œçš„å®¹å™¨</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> restart<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>åˆ é™¤æŒ‡å®šçš„å®¹å™¨æ–‡ä»¶ï¼ˆä»…åœ¨åœæ­¢è¿è¡Œæ—¶å¯ç”¨ï¼‰</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> rm <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>æŸ¥çœ‹å®¹å™¨è¾“å‡º</li></ul><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker <span class="hljs-keyword">container</span> logs <span class="hljs-comment">[containerID]</span><br></code></pre></td></tr></tbody></table></figure><ul><li>å¯åŠ¨å®¹å™¨çš„ä¸€ä¸ªç»ˆç«¯</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it [containerID] <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ­¤ç§æ–¹æ³•å¯åŠ¨çš„ç»ˆç«¯ï¼Œå³ä½¿é€€å‡ºä¹Ÿä¸ä¼šå…³é—­å®¹å™¨</p><p>ç›¸å - å¦‚æœç›´æ¥é€šè¿‡ç«¯å£æ˜ å°„è¿æ¥ docker å»ºç«‹çš„sshé“¾æ¥ï¼Œçª—å£é€€å‡ºåè¯¥ç»ˆç«¯çš„å·¥ä½œä¹Ÿä¼šä¸€åŒåœæ­¢</p></blockquote><ul><li>è¿›å…¥å®¹å™¨çš„ä¸»ç»ˆç«¯</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> attach<span class="hljs-meta"> [containerID]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¿æ¥åˆ°å®¹å™¨çš„ä¸»ç»ˆç«¯ï¼Œè¯¥ç»ˆç«¯é€€å‡ºåå®¹å™¨å…³é—­ã€‚</p><p>å¦‚æœä¸å¸Œæœ›é€€å‡ºåå…³é—­ï¼Œå¯ä»¥åŠ å…¥é€‰é¡¹ <code>--sig-proxy=false</code></p></blockquote><ul><li>é€€å‡ºç»ˆç«¯</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ctrl <span class="hljs-selector-tag">p</span> + ctrl <span class="hljs-selector-tag">q</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¯ä»¥åœ¨é€€å‡ºç»ˆç«¯çš„åŒæ—¶ä¿æŒç»ˆç«¯ç»§ç»­å·¥ä½œ</p></blockquote><ul><li>é€€å‡ºå®¹å™¨</li></ul><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨å®¹å™¨ä¸­è¿è¡Œæ­¤å‘½ä»¤</p></blockquote><ul><li>æ‹·è´å®¹å™¨é‡Œçš„æ–‡ä»¶åˆ°æœ¬æœº</li></ul><figure class="highlight gradle"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker container cp [containerID]:[<span class="hljs-regexp">/path/</span>to/<span class="hljs-keyword">file</span>]<br></code></pre></td></tr></tbody></table></figure><ul><li>æäº¤å®¹å™¨ä¿®æ”¹åˆ°é•œåƒ</li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker commit -<span class="hljs-selector-tag">a</span> <span class="hljs-selector-attr">[name]</span> -m <span class="hljs-selector-attr">[comments]</span> -<span class="hljs-selector-tag">p</span>  <span class="hljs-selector-attr">[containerID[:TAG]</span>]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>-a: æäº¤çš„é•œåƒä½œè€…</p><p>-m: æäº¤æ—¶çš„è¯´æ˜æ–‡å­—</p><p>-p: åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœ</p></blockquote><ul><li>åˆ é™¤é•œåƒ</li></ul><figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> rmi<span class="hljs-meta"> [image]</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æˆ–</p></blockquote><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">docker image rm [image]<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</p></blockquote><ul><li><code>-f, -force</code>: å¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä¾¿æœ‰å®¹å™¨å¼•ç”¨è¯¥é•œåƒï¼›</li><li><code>-no-prune</code>: ä¸è¦åˆ é™¤æœªå¸¦æ ‡ç­¾çš„çˆ¶é•œåƒï¼›</li></ul><h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></li><li><a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> è¿œç¨‹é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer10-2 é’è›™è·³å°é˜¶é—®é¢˜</title>
      <link href="/2021/08/10/leetcode/leetcode-offer10-2/"/>
      <url>/2021/08/10/leetcode/leetcode-offer10-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é’è›™è·³å°é˜¶é—®é¢˜</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ª n çº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">7</span><br>è¾“å‡ºï¼š<span class="hljs-number">21</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹3ï¼š">ç¤ºä¾‹3ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">0</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>å®é™…ä¸Šæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å˜ç§ã€‚è·³ä¸Šnçº§å°é˜¶çš„æ–¹æ³•ä¸ªæ•° å¯ä»¥åˆ†è§£ä¸ºï¼š<em>è·³ä¸Šæ­¤å°é˜¶å‰çš„ä¸€æ­¥æ˜¯1æ­¥è¿˜æ˜¯2æ­¥</em>ã€‚ä¹Ÿå°±æ˜¯ $f(n) = f(n-1) + f(n-2)$ã€‚</p><p>ä¸åŒä¹‹å¤„åœ¨äºæ­¤æ—¶çš„f(0) = 1</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numWays</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">1</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b<br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> idea </tag>
            
            <tag> æ–æ³¢é‚£å¥‘ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer10-1 æ–æ³¢é‚£å¥‘æ•°åˆ—</title>
      <link href="/2021/08/10/leetcode/leetcode-offer10-1/"/>
      <url>/2021/08/10/leetcode/leetcode-offer10-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ–æ³¢é‚£å¥‘æ•°åˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ n ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ n é¡¹ï¼ˆå³ F(N)ï¼‰ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>F(0) = 0,   F(1) = 1 \\<br>F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N &gt; 1.<br>$$<br>æ–æ³¢é‚£å¥‘æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œä¹‹åçš„æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ç”±ä¹‹å‰çš„ä¸¤æ•°ç›¸åŠ è€Œå¾—å‡ºã€‚</p><p>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>0 &lt;= n &lt;= 100</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>æœ‰ä¸‰ç§æ–¹å‘ï¼š</p><ul><li><p>ä½¿ç”¨é€’å½’</p><p>å¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´è¶…æ—¶ã€‚</p></li><li><p>ä½¿ç”¨æ•°ç»„å­˜å‚¨</p><p>æ–°å»ºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œåœ¨é€’å½’åŸºç¡€ä¸Šï¼Œå­˜å‚¨è®¡ç®—çš„ç»“æœï¼Œåç›´æ¥å–ç”¨ã€‚ä½†æ˜¯å ç”¨äº†é¢å¤–çš„ç©ºé—´$O(n)$</p></li><li><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’</p><p><code>ä»¥å…¶å…¬å¼F(N) = F(N - 1) + F(N - 2)ä¸ºè½¬ç§»æ–¹ç¨‹ã€‚</code></p></li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        a,b = <span class="hljs-number">0</span>,<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            a,b = b,a+b <span class="hljs-comment">#sum = a+b a = b b = sum aç›¸å½“äºf(i) bç›¸å½“äºf(i+1)</span><br>        <span class="hljs-keyword">return</span> a%<span class="hljs-number">1000000007</span><br>    <span class="hljs-comment"># def fib(self, n: int) -&gt; int:</span><br>    <span class="hljs-comment">#     if(n==0): return 0</span><br>    <span class="hljs-comment">#     if(n==1): return 1</span><br>    <span class="hljs-comment">#     return (self.fib(n-1)+self.fib(n-2))%1000000007 #è¶…æ—¶ é€’å½’æ—¶é—´å¤æ‚åº¦å¤§</span><br></code></pre></td></tr></tbody></table></figure><p>å¾ªç¯næ¬¡</p><p>æ³¨æ„<code>a,b = b,a+b</code> ç›¸å½“äºsum = a+b ï¼›a = bï¼› b = sum ï¼›</p><p>ç¬¬iè½®ä¸­ aç›¸å½“äºf(i)ï¼Œbç›¸å½“äºf(i+1) ã€‚å› æ­¤æœ€åè¿”å›a</p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ–æ³¢é‚£å¥‘ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡offer09 ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
      <link href="/2021/08/10/leetcode/leetcode-offer09/"/>
      <url>/2021/08/10/leetcode/leetcode-offer09/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</p></blockquote><h2 id="é¢˜ç›®">é¢˜ç›®</h2><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )</p><h3 id="ç¤ºä¾‹-1ï¼š">ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[<span class="hljs-number">3</span>],[],[]]<br>è¾“å‡ºï¼š[null,null,<span class="hljs-number">3</span>,<span class="hljs-number">-1</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¤ºä¾‹-2ï¼š">ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">"CQueue"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"appendTail"</span>,<span class="hljs-string">"deleteHead"</span>,<span class="hljs-string">"deleteHead"</span>]<br>[[],[],[<span class="hljs-number">5</span>],[<span class="hljs-number">2</span>],[],[]]<br>è¾“å‡ºï¼š[null,<span class="hljs-number">-1</span>,null,null,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>]<br></code></pre></td></tr></tbody></table></figure><h3 id="æç¤ºï¼š">æç¤ºï¼š</h3><ul><li>1 &lt;= values &lt;= 10000</li><li>æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨</li></ul><h2 id="é¢˜è§£">é¢˜è§£</h2><p>ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œ<em>ä¸€ä¸ªä½œä¸ºæ’å…¥æ ˆï¼Œä¸€ä¸ªä½œä¸ºåˆ é™¤æ ˆ</em>ã€‚<code>ä½¿ç”¨listè¿›è¡Œç›¸å…³æ“ä½œï¼ˆappendï¼Œpopï¼‰</code>ï¼›åœ¨æ’å…¥æ—¶ç›´æ¥å¯¹stack1è¿›è¡Œappendæ“ä½œï¼Œåˆ é™¤æ—¶é¦–å…ˆéœ€è¦æ„å»ºåˆ é™¤æ ˆå†…å®¹ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œæœ€ååŒæ­¥åˆ°æ’å…¥æ ˆä¸­ï¼ˆæ­¤æ—¶åˆ é™¤æ ˆåˆä¸ºç©ºï¼‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CQueue</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-comment"># stack1æ˜¯insertæ ˆ stack2æ˜¯deleteæ ˆ</span><br>        self.stack1 = [] <span class="hljs-comment">#listä½œç”¨å’Œstackç±»ä¼¼</span><br>        self.stack2 = []<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">appendTail</span>(<span class="hljs-params">self, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br>        self.stack1.append(value) <span class="hljs-comment"># ç›´æ¥æ’å…¥æ ˆé¡¶</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteHead</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:</span><br>        <span class="hljs-keyword">while</span> self.stack1: <span class="hljs-comment">#é¦–å…ˆæ›´æ–°deleteæ ˆ</span><br>            self.stack2.append(self.stack1.pop())<br>        <span class="hljs-comment">#è¿›è¡ŒdeleteHeadæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.stack2: <br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        popitem = self.stack2.pop()<br>        <span class="hljs-comment"># å°†æ›´æ–°ç»“æœå†™å›stack1ä¸­ ä¿æŒä¸€è‡´</span><br>        <span class="hljs-keyword">while</span> self.stack2:<br>            self.stack1.append(self.stack2.pop())<br>        <span class="hljs-keyword">return</span> popitem<br><br><span class="hljs-comment"># Your CQueue object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = CQueue()</span><br><span class="hljs-comment"># obj.appendTail(value)</span><br><span class="hljs-comment"># param_2 = obj.deleteHead()</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡ </category>
          
          <category> æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mahalanobis_distance</title>
      <link href="/2021/08/09/math/Mahalanobis-distance/"/>
      <url>/2021/08/09/math/Mahalanobis-distance/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯åº¦é‡å­¦ä¹ ä¸­ä¸€ç§å¸¸ç”¨çš„è·ç¦»æŒ‡æ ‡ï¼ŒåŒæ¬§æ°è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»ã€æ±‰æ˜è·ç¦»ç­‰ä¸€æ ·è¢«ç”¨ä½œè¯„å®šæ•°æ®ä¹‹é—´çš„ç›¸ä¼¼åº¦æŒ‡æ ‡ã€‚ä½†å´å¯ä»¥åº”å¯¹é«˜ç»´çº¿æ€§åˆ†å¸ƒçš„æ•°æ®ä¸­å„ç»´åº¦é—´éç‹¬ç«‹åŒåˆ†å¸ƒçš„é—®é¢˜ã€‚</p></blockquote><p><em>ä½¿ç”¨é©¬æ°è·ç¦»ï¼Œå¯¹é«˜ç»´éç‹¬ç«‹åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œè·ç¦»åº¦é‡ã€‚</em></p><p><strong>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨é©¬æ°è·ç¦»å‘¢ï¼Ÿ</strong><br>é©¬æ°è·ç¦»æœ‰å¾ˆå¤š<strong>ä¼˜ç‚¹ï¼š</strong> <strong>é©¬æ°è·ç¦»ä¸å—é‡çº²çš„å½±å“</strong>ï¼Œä¸¤ç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ä¸åŸå§‹æ•°æ®çš„æµ‹é‡å•ä½æ— å…³ï¼›ç”±æ ‡å‡†åŒ–æ•°æ®å’Œä¸­å¿ƒåŒ–æ•°æ®(å³åŸå§‹æ•°æ®ä¸å‡å€¼ä¹‹å·®ï¼‰è®¡ç®—å‡ºçš„äºŒç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ç›¸åŒã€‚<strong>é©¬æ°è·ç¦»è¿˜å¯ä»¥æ’é™¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¹²æ‰°</strong>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»">ä»€ä¹ˆæ˜¯é©¬æ°è·ç¦»</h2><p>é©¬æ°è·ç¦»(Mahalanobis Distance)æ˜¯ä¸€ç§è·ç¦»çš„åº¦é‡ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æ¬§æ°è·ç¦»çš„ä¸€ç§ä¿®æ­£ï¼Œä¿®æ­£äº†æ¬§å¼è·ç¦»ä¸­å„ä¸ªç»´åº¦å°ºåº¦ä¸ä¸€è‡´ä¸”ç›¸å…³çš„é—®é¢˜ã€‚</p><p>å•ä¸ªæ•°æ®ç‚¹çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic1.png" alt=""></p><p>æ•°æ®ç‚¹x, yä¹‹é—´çš„é©¬æ°è·ç¦»</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic2.png" alt=""></p><p><em>å…¶ä¸­Î£æ˜¯å¤šç»´éšæœºå˜é‡çš„åæ–¹å·®çŸ©é˜µï¼ŒÎ¼ä¸ºæ ·æœ¬å‡å€¼ï¼Œå¦‚æœåæ–¹å·®çŸ©é˜µæ˜¯å•ä½å‘é‡ï¼Œä¹Ÿå°±æ˜¯å„ç»´åº¦ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œé©¬æ°è·ç¦»å°±å˜æˆäº†æ¬§æ°è·ç¦»ã€‚</em></p><h2 id="é©¬æ°è·ç¦»å®é™…æ„ä¹‰">é©¬æ°è·ç¦»å®é™…æ„ä¹‰</h2><p>é‚£ä¹ˆé©¬æ°è·ç¦»å°±èƒ½èƒ½å¹²ä»€ä¹ˆï¼Ÿå®ƒæ¯”æ¬§æ°è·ç¦»å¥½åœ¨å“ªé‡Œï¼Ÿä¸¾å‡ ä¸ªæ —å­</p><p><strong>æ¬§å¼è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å…ˆä¸¾ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ä¾‹å­ï¼Œèº«é«˜å’Œä½“é‡ï¼Œè¿™ä¸¤ä¸ªå˜é‡æ‹¥æœ‰ä¸åŒçš„å•ä½æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸åŒçš„scaleã€‚æ¯”å¦‚èº«é«˜ç”¨æ¯«ç±³è®¡ç®—ï¼Œè€Œä½“é‡ç”¨åƒå…‹è®¡ç®—ï¼Œæ˜¾ç„¶å·®10mmçš„èº«é«˜ä¸å·®10kgçš„ä½“é‡æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä½†åœ¨æ™®é€šçš„æ¬§æ°è·ç¦»ä¸­ï¼Œè¿™å°†ä¼šç®—ä½œç›¸åŒçš„å·®è·ã€‚</p><p><strong>å½’ä¸€åŒ–åæ¬§æ°è·ç¦»è¿‘å°±ä¸€å®šç›¸ä¼¼ï¼Ÿ</strong></p><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥å…ˆåšå½’ä¸€åŒ–æ¥æ¶ˆé™¤è¿™ç§ç»´åº¦é—´scaleä¸åŒçš„é—®é¢˜ï¼Œä½†æ˜¯æ ·æœ¬åˆ†å¸ƒä¹Ÿä¼šå½±å“åˆ†ç±»</p><p>ä¸¾ä¸ªä¸€ç»´çš„æ —å­ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªç±»åˆ«ï¼Œç»Ÿä¸€å•ä½ï¼Œç¬¬ä¸€ä¸ªç±»åˆ«å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º0.1ï¼Œç¬¬äºŒä¸ªç±»åˆ«å‡å€¼ä¸º5ï¼Œæ–¹å·®ä¸º5ã€‚é‚£ä¹ˆä¸€ä¸ªå€¼ä¸º2çš„ç‚¹å±äºç¬¬ä¸€ç±»çš„æ¦‚ç‡å¤§è¿˜æ˜¯ç¬¬äºŒç±»çš„æ¦‚ç‡å¤§ï¼Ÿè·ç¦»ä¸Šè¯´åº”è¯¥æ˜¯ç¬¬ä¸€ç±»ï¼Œä½†æ˜¯ç›´è§‰ä¸Šæ˜¾ç„¶æ˜¯ç¬¬äºŒç±»ï¼Œå› ä¸ºç¬¬ä¸€ç±»ä¸å¤ªå¯èƒ½åˆ°è¾¾2è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªæ–¹å·®è¾ƒå°çš„ç»´åº¦ä¸‹å¾ˆå°çš„å·®åˆ«å°±æœ‰å¯èƒ½æˆä¸ºç¦»ç¾¤ç‚¹ã€‚å°±åƒä¸‹å›¾ä¸€æ ·ï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯ç”±äºæ ·æœ¬æ€»ä½“æ²¿ç€æ¨ªè½´åˆ†å¸ƒï¼Œæ‰€ä»¥Bç‚¹æ›´æœ‰å¯èƒ½æ˜¯è¿™ä¸ªæ ·æœ¬ä¸­çš„ç‚¹ï¼Œè€ŒAåˆ™æ›´æœ‰å¯èƒ½æ˜¯ç¦»ç¾¤ç‚¹ã€‚</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic3.png" alt=""></p><p><strong>ç®—ä¸Šç»´åº¦çš„æ–¹å·®å°±å¤Ÿäº†ï¼Ÿ</strong></p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœç»´åº¦é—´ä¸ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œæ ·æœ¬ç‚¹ä¸€å®šä¸æ¬§æ°è·ç¦»è¿‘çš„æ ·æœ¬ç‚¹åŒç±»çš„æ¦‚ç‡æ›´å¤§å—ï¼Ÿ</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic4.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æ ·æœ¬åŸºæœ¬æœä»f(x) = xçš„çº¿æ€§åˆ†å¸ƒï¼ŒAä¸Bç›¸å¯¹äºåŸç‚¹çš„è·ç¦»ä¾æ—§ç›¸ç­‰ï¼Œæ˜¾ç„¶Aæ›´åƒæ˜¯ä¸€ä¸ªç¦»ç¾¤ç‚¹</p><p>å³ä½¿æ•°æ®å·²ç»ç»è¿‡äº†æ ‡å‡†åŒ–ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ABä¸åŸç‚¹é—´è·ç¦»å¤§å°çš„ç›¸äº’å…³ç³»ã€‚æ‰€ä»¥è¦æœ¬è´¨ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦é’ˆå¯¹<a href="https://link.zhihu.com/?target=https%3A//www.ph0en1x.space/2018/03/06/PCA/">ä¸»æˆåˆ†åˆ†æ</a>ä¸­çš„<code>ä¸»æˆåˆ†</code>æ¥è¿›è¡Œæ ‡å‡†åŒ–ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰">é©¬æ°è·ç¦»çš„å‡ ä½•æ„ä¹‰</h2><p>ä¸Šé¢ææ‡‚äº†ï¼Œé©¬æ°è·ç¦»å°±å¥½ç†è§£äº†ï¼Œ<u>åªéœ€è¦å°†å˜é‡<code>æŒ‰ç…§ä¸»æˆåˆ†è¿›è¡Œæ—‹è½¬</code>ï¼Œè®©ç»´åº¦é—´ç›¸äº’<strong>ç‹¬ç«‹</strong>ï¼Œç„¶åè¿›è¡Œ<code>æ ‡å‡†åŒ–</code></u>ï¼Œè®©ç»´åº¦<strong>åŒåˆ†å¸ƒ</strong>å°±å¯ä»¥äº†ã€‚</p><p>ç”±ä¸»æˆåˆ†åˆ†æå¯çŸ¥ï¼Œç”±äºä¸»æˆåˆ†å°±æ˜¯ç‰¹å¾å‘é‡æ–¹å‘ï¼Œæ¯ä¸ªæ–¹å‘çš„æ–¹å·®å°±æ˜¯å¯¹åº”çš„ç‰¹å¾å€¼ï¼Œæ‰€ä»¥åªéœ€è¦æŒ‰ç…§ç‰¹å¾å‘é‡çš„æ–¹å‘æ—‹è½¬ï¼Œç„¶åç¼©æ”¾ç‰¹å¾å€¼å€å°±å¯ä»¥äº†ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic5.png" alt=""></p><p>ç¦»ç¾¤ç‚¹å°±è¢«æˆåŠŸåˆ†ç¦»ï¼Œè¿™æ—¶å€™çš„æ¬§å¼è·ç¦»å°±æ˜¯é©¬æ°è·ç¦»ã€‚</p><h2 id="é©¬æ°è·ç¦»çš„æ¨å¯¼">é©¬æ°è·ç¦»çš„æ¨å¯¼</h2><p>é¦–å…ˆè¦å¯¹æ•°æ®ç‚¹è¿›è¡Œ<em>æ—‹è½¬</em>ï¼Œæ—‹è½¬è‡³ä¸»æˆåˆ†ï¼Œç»´åº¦é—´çº¿æ€§æ— å…³ï¼Œå‡è®¾æ–°çš„åæ ‡ä¸º</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic6.png" alt=""></p><p>åˆå˜æ¢å<em>ç»´åº¦é—´çº¿æ€§æ— å…³ä¸”æ¯ä¸ªç»´åº¦è‡ªå·±çš„æ–¹å·®ä¸ºç‰¹å¾å€¼</em>ï¼Œæ‰€ä»¥æ»¡è¶³ï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic7.png" alt=""></p><p>é©¬æ°è·ç¦»æ˜¯æ—‹è½¬å˜æ¢ç¼©æ”¾ä¹‹åçš„æ¬§å¼è·ç¦»ï¼Œæ‰€ä»¥é©¬æ°è·ç¦»çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="https://picture.mulindya.com/Mahalanobis-distance-pic8.png" alt=""></p><p>è¿™å°±æ˜¯ä¹‹å‰æåˆ°çš„é©¬æ°è·ç¦»çš„å…¬å¼</p><h2 id="é©¬æ°è·ç¦»çš„é—®é¢˜">é©¬æ°è·ç¦»çš„é—®é¢˜</h2><ul><li>åæ–¹å·®çŸ©é˜µå¿…é¡»æ»¡ç§©</li></ul><p>é‡Œé¢æœ‰æ±‚é€†çŸ©é˜µçš„è¿‡ç¨‹ï¼Œä¸æ»¡ç§©ä¸è¡Œï¼Œè¦æ±‚æ•°æ®è¦æœ‰åŸç»´åº¦ä¸ªç‰¹å¾å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥è€ƒè™‘å…ˆè¿›è¡ŒPCAï¼Œè¿™ç§æƒ…å†µä¸‹PCAä¸ä¼šæŸå¤±ä¿¡æ¯</p><ul><li>ä¸èƒ½å¤„ç†éçº¿æ€§æµå½¢(manifold)ä¸Šçš„é—®é¢˜</li></ul><p>åªå¯¹çº¿æ€§ç©ºé—´æœ‰æ•ˆï¼Œå¦‚æœè¦å¤„ç†æµå½¢ï¼Œåªèƒ½åœ¨å±€éƒ¨å®šä¹‰ï¼Œå¯ä»¥ç”¨æ¥å»ºç«‹KNNå›¾</p><blockquote><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/46626607">https://zhuanlan.zhihu.com/p/46626607</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> æ¦‚ç‡è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é©¬æ°è·ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eckark_youngå®šç†</title>
      <link href="/2021/08/09/math/Eckark-young/"/>
      <url>/2021/08/09/math/Eckark-young/</url>
      
        <content type="html"><![CDATA[<p>æœ€ä½³ä½ç§©é€¼è¿‘å’Œå¥‡å¼‚å€¼çš„å…³ç³»(<em>Eckart</em>-<em>Youngå®šç†</em>)</p><h3 id="å®šç†">å®šç†</h3><p>Suppose a matrix $A\in \mathbb{R}^{m\times n}$has an SVD-decomposition$A=U\Sigma V^T$. Let $k &lt; r= \mathsf{rank}(A)$and truncated matrix<br>$$<br>A_k = \sum_{i=1}^k \sigma_i \mathbf u_i \mathbf v_i^T,<br>$$<br>then, for any matrix B of rank k , the minimal error is achieved with $A_k$:</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_2 = || A - A_k||_2 = \sigma_{k+1}.$$<p>The same holds for Frobenius norm as well</p>$$\min_{\mathsf{rank}(B)=k}||A-B||_F = || A - A_k||_F = \sqrt{\sigma_{k+1}^2 + \cdots + \sigma_p^2}.$$<h3 id="è¯æ˜-2-norm-case">è¯æ˜ (2-norm case)</h3><p>Since $U^\ A_k V = \mathrm{diag}(\sigma_1,\ldots, \sigma_k,0,\ldots,0)$ it means that $A_k$ is rank K. Moreover, $U^T (A-A_k) V =  \mathrm{diag}(0,\ldots, 0,\sigma_{k+1},\ldots, \sigma_p)$with the largest singular value is $\sigma_{k+1}$ and thus $||A-A_k||_2 = \sigma_{k+1}$.</p><h3 id="è¯æ˜-Frobenius-norm-case">è¯æ˜ (Frobenius norm case)</h3><blockquote><p>Lemma: If $A,B \in \mathbb{R}^{m\times n}$ , with B having rank K , then $\sigma_{k+i}(A) \le \sigma_i(A-B) \text{ for all }; i.$</p></blockquote><p>To prove the lemma, first consider the case i=1, we have proved that $\sigma_{k+1}(A) \le \sigma_1(A-B) = ||A-B||_2$in the 2-norm case. Then we do the general case:</p>$$\begin{aligned} \sigma_i(A-B) = &amp; \sigma_i(A-B) + \sigma_1(B-B_k)\qquad\text{since } B=B_k\\ =&amp; \sigma_1(A-B - (A-B)_{i-1}) + \sigma_1(B-B_k)\qquad\\ \ge &amp; \sigma_1(A-B - (A-B)_{i-1}+B-B_k)   \\ =&amp; \sigma_1(A  - (A-B)_{i-1} -B_k)\\ \ge &amp; \sigma_1(A - A_{k+i-1})\\ =&amp; \sigma_{k+i}(A)   \end{aligned} $$<blockquote><p><a href="https://zhuanlan.zhihu.com/p/361938622">https://zhuanlan.zhihu.com/p/361938622</a></p><p><a href="https://zhuanlan.zhihu.com/p/75283604">https://zhuanlan.zhihu.com/p/75283604</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> çº¿æ€§ä»£æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> çº¿æ€§ä»£æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ç§©é€¼è¿‘çš„æ€è€ƒ</title>
      <link href="/2021/08/06/math/low-rank-app/"/>
      <url>/2021/08/06/math/low-rank-app/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é˜…è¯»æ–‡ç« <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>æ—¶å‡ºç°ä¸€ä¸ªæ¦‚å¿µâ€“<strong>Low-rank approximation</strong> ï¼Œå°±æ­¤è¿›è¡Œç›¸å…³è®¨è®ºã€‚</p></blockquote><h3 id="ä½ç§©ï¼ˆLow-Rankï¼‰">ä½ç§©ï¼ˆLow-Rankï¼‰</h3><p>å¦‚æœXæ˜¯ä¸€ä¸ªmè¡Œnåˆ—çš„æ•°å€¼çŸ©é˜µï¼Œrank(X)æ˜¯Xçš„ç§©ï¼Œå‡å¦‚rank (X)è¿œå°äºmå’Œnï¼Œåˆ™æˆ‘ä»¬ç§°Xæ˜¯ä½ç§©çŸ©é˜µã€‚ä½ç§©çŸ©é˜µæ¯è¡Œæˆ–æ¯åˆ—éƒ½å¯ä»¥ç”¨å…¶ä»–çš„è¡Œæˆ–åˆ—çº¿æ€§è¡¨å‡ºï¼Œå¯è§å®ƒåŒ…å«å¤§é‡çš„å†—ä½™ä¿¡æ¯ã€‚åˆ©ç”¨è¿™ç§å†—ä½™ä¿¡æ¯ï¼Œå¯ä»¥å¯¹ç¼ºå¤±æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œç‰¹å¾æå–ã€‚</p><p>å›¾åƒå¤„ç†ä¸­ï¼Œ<em>rankå¯ä»¥ç†è§£ä¸ºå›¾åƒæ‰€åŒ…å«çš„ä¿¡æ¯çš„ä¸°å¯Œç¨‹åº¦</em>ï¼Œåœ¨æ˜¾ç¤ºç”Ÿæ´»ä¸­ï¼Œä¸€å¼ å›¾ç‰‡ä¸­å¤§éƒ¨åˆ†æˆåˆ†æ˜¯ç›¸ä¼¼çš„ã€‚æ¯”å¦‚ç»™ä¸€å¼ å¤§è‰åŸçš„å›¾ç‰‡</p><p><img src="https://picture.mulindya.com/low-rank-app-pic1.png" alt=""></p><p>è‰åŸæ˜¯ç”±å¾ˆå¤šè‰ç»„æˆçš„ï¼Œè€Œè‰æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥å¦‚æœå…¨æ˜¯è‰ï¼Œé‚£ä¹ˆè¿™å¼ å›¾æ‰€åŒ…å«çš„ä¿¡æ¯é‡æ˜¯å¾ˆå°‘çš„çš„ï¼Œå› ä¸ºå¯ä»¥ç†è§£ä¸ºè‰æ˜¯è‰çš„å¤åˆ¶å“ã€‚è€Œä¸Šå›¾çš„è’™å¤åŒ…ï¼Œäººï¼Œé©¬ä¹‹ç±»çš„åˆ™å¯ä»¥ç†è§£ä¸ºå›¾ç‰‡æ‰€åŒ…å«çš„ä¿¡æ¯ï¼Œå®é™…ä¸Šï¼Œç›¸å¯¹äºåªæœ‰è‰çš„è‰åŸå›¾ç‰‡å’Œæœ‰è‰å’Œè’™å¤åŒ…çš„è‰åŸå›¾ç‰‡ï¼Œåè€…çš„ç§©æ˜¯è¾ƒé«˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡ä¸­æ¯”è¾ƒçªå…€çš„æˆåˆ†ï¼Œæ¯”å¦‚è’™å¤åŒ…ï¼Œæ¯”å¦‚äººåƒç…§ç‰‡ä¸­çš„çº¢çœ¼äº®ç‚¹ï¼Œä¼šå¢åŠ å›¾åƒçŸ©é˜µçš„ç§©ã€‚è€Œç°å®ç”Ÿæ´»ä¸­ä¸€å¼ ä¸é”™çš„å›¾ç‰‡çš„ç§©å…¶å®æ˜¯æ¯”è¾ƒä½çš„ï¼Œå¦‚æœå›¾åƒçš„ç§©æ¯”è¾ƒé«˜ï¼Œå¾€å¾€æ˜¯å› ä¸ºå›¾åƒä¸­çš„å™ªå£°æ¯”è¾ƒä¸¥é‡ã€‚æ¯”å¦‚æ‹ç…§çš„æ—¶å€™ISOæ„Ÿå…‰åº¦è®¾ç½®è¿‡é«˜é€ æˆå™ªç‚¹å¤ªè¿‡æ³›æ»¥ä¹‹ç±»çš„ã€‚æ‰€ä»¥ï¼Œ<em>å›¾åƒå¤„ç†çš„ä½ç§©æ€§å…¶å®å¯ä»¥æ‹¿æ¥å»é™¤ç…§ç‰‡ä¸­çš„å™ªç‚¹</em>ã€‚</p><h3 id="ä½ç§©å’Œç¨€ç–">ä½ç§©å’Œç¨€ç–</h3><p>æˆ‘ä»¬è®¤ä¸ºå›¾åƒæœ‰ä¸€äº›å…¬å…±çš„æ¨¡å¼ï¼Œæ‰€æœ‰å›¾åƒéƒ½ç”±è¿™äº›åŸºæœ¬çš„æ¨¡å¼ç»„æˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœå›¾åƒæ˜¯ä¸€ä¸ªå‰ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ­£æ–œçº¿å’Œåæ–œçº¿çš„å åŠ ã€‚<strong>åªè¦æˆ‘ä»¬æ‰¾åˆ°äº†æ‰€æœ‰çš„åŸºåº•ï¼ˆç§°ä½œå­—å…¸</strong>ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„æ­£æ–œçº¿å’Œåæ–œçº¿ä¹‹ç±»çš„ä¸œè¥¿ï¼‰**ï¼Œå°±èƒ½é€šè¿‡åŸºåº•çš„çº¿æ€§ç»„åˆè¡¨ç¤ºå‡ºæ‰€æœ‰çš„å›¾åƒã€‚**è¿™å°±å¥½åƒå­¦ç”»ç”»ï¼Œå…ˆå­¦ä¼šåŸºæœ¬çš„ç”»æ­£æ–¹ä½“ã€çƒä½“ã€åœ†æŸ±ä½“ç­‰ç­‰ï¼Œå°±å¯ä»¥ç»„åˆå‡ºå„ç§å„æ ·çš„å¤æ‚å½¢çŠ¶ã€‚</p><p><strong>åœ¨å¾ˆå¤šæƒ…å½¢ä¸‹ï¼ŒåŸºåº•çš„æ•°é‡æ˜¯å¾ˆå°‘çš„</strong>ï¼Œæ¯”å¦‚ä¸€å¼ ç…§ç‰‡æ‹çš„æ˜¯ä¸€é¢ç –å¢™ï¼Œé‚£ä¹ˆå®ƒæ˜¾ç„¶å…·æœ‰å‘¨æœŸé‡å¤çš„ç‰¹ç‚¹ï¼Œæ¢å¥è¯è¯´ä½ç§©ã€‚å³ä½¿æ•´ä¸ªå›¾ä¸ä½ç§©ï¼Œå¾€å¾€ä¹Ÿèƒ½æ‰¾å‡ºä¸€äº›ç›¸ä¼¼çš„å—ï¼Œè¿™äº›å—æ˜¯ä½ç§©çš„ã€‚å†é€€ä¸€æ­¥ï¼Œå°±ç®—è¿™ä¹Ÿåšä¸åˆ°ï¼Œå¾€å¾€ä¹Ÿå¯ä»¥æŠŠå·²æœ‰çš„æ•°æ®çœ‹æˆä¸€ç»„ä½ç»´çš„ç»“æœåŠ ä¸Šå™ªå£°ï¼Œä¹Ÿå³åŸæ¥çš„æ•°æ®<strong>å¯ä»¥è¢«ä½ç§©çŸ©é˜µå¾ˆå¥½çš„é€¼è¿‘</strong>ã€‚<strong>ç¨€ç–æ€§</strong>çš„æ„æ€æ˜¯ï¼ˆä»¥ç¨€ç–è¡¨ç¤ºä¸ºä¾‹ï¼‰ï¼Œä»»ç»™ä¸€ä¸ªå›¾åƒï¼Œ<strong>å­—å…¸å¯èƒ½æ˜¯è¿‡å®Œå¤‡çš„</strong>ï¼Œä»è€Œç”¨å­—å…¸é‡Œçš„åŸºå‘é‡è¡¨å‡ºè¿™å¹…å›¾æœ‰å¾ˆå¤šç§ä¸åŒçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬å¸Œæœ›<strong>é€‰å–ä½¿ç”¨åŸºåº•æ•°é‡æœ€å°‘çš„é‚£ç§æ–¹æ¡ˆ</strong>ï¼Œ</p><p>åº”ç”¨ï¼š</p><p><em><strong>1ï¼‰çŸ©é˜µå¡«å……(Matrix Completion)</strong></em></p><p><em><strong>2ï¼‰é²æ£’PCA</strong></em></p><p><em><strong>3ï¼‰èƒŒæ™¯å»ºæ¨¡</strong></em></p><p><em><strong>4ï¼‰å˜æ¢ä¸å˜ä½ç§©çº¹ç†ï¼ˆTILTï¼‰</strong></em></p><blockquote><p>åœ¨è®ºæ–‡ <strong>Semi-orthogonal Embedding for Effificient Unsupervised Anomaly Segmentation</strong>ä¸­æœ‰ä¸€æ®µå¯ä»¥å‚è€ƒã€‚</p></blockquote><p><strong>Low-rank approximation of precision matrix</strong></p><p>The feature data <strong>X</strong> is subject to low-rank approximation due to the narrower target domain for anomaly-free images than the ImageNet datasetâ€™s. The multi-scale features from different layers may also contribute to it due to the inter-dependency among the features from the layers. Inspired by the truncated SVD of a precision matrix, a low-rank embedding of input features with $W \in R^{F \times k}$,where <em>F &gt; k</em>, is considered as follows:</p>$$d^2_{i,j} = X^TW(W^TC_{i,j}W)^{âˆ’1}W^TX$$<p>where the below Theorem 1 shows the optimal <strong>W</strong>* is the eigenvectors related to the <em>k</em>-smallest eigenvalues of $C_{i,j}$ . Notice that 1) the computational complexity of the equation is cubically reduced to <em>O</em>($HWk^3$) set aside the cost of SVD, although which is the concern, 2) PCA embedding would fail to minimize approximation error since it uses the <em>k</em>-largest eigenvectors [14], and 3) near-zero eigenvalues may induce substantial anomaly scores.</p><p>é€‰å–åæ–¹å·®çŸ©é˜µçš„kä¸ªæœ€å°çš„ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œè¿›è¡Œä½ç§©é€¼è¿‘</p><blockquote><p>å‚è€ƒ</p><p><a href="https://www.zhihu.com/question/28630628">https://www.zhihu.com/question/28630628</a></p><p><a href="https://blog.csdn.net/zouxy09/article/details/24972869">https://blog.csdn.net/zouxy09/article/details/24972869</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> çº¿æ€§ä»£æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> çº¿æ€§ä»£æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­æ¨¡å—ä¸ºç©ºçš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2021/08/06/config/git-submodule/"/>
      <url>/2021/08/06/config/git-submodule/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é’ˆå¯¹å­æ¨¡å—æ–‡ä»¶å¤¹ä¸ºç©ºçš„æƒ…å†µï¼Œé‡‡å–ä¸‹åˆ—è§£å†³æ–¹æ¡ˆã€‚</p><p>å½“ä¸€ä¸ª git é¡¹ç›®åŒ…å«å­æ¨¡å—ï¼ˆsubmodule) æ—¶ï¼Œç›´æ¥å…‹éš†ä¸‹æ¥çš„å­æ¨¡å—ç›®å½•é‡Œé¢æ˜¯ç©ºçš„ã€‚</p></blockquote><p><strong>æœ‰ä¸¤ç§æ–¹æ³•è§£å†³</strong>ï¼š</p><h3 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h3><p>å¦‚æœé¡¹ç›®å·²ç»å…‹éš†åˆ°äº†æœ¬åœ°ï¼Œæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p><ol><li><p>åˆå§‹åŒ–æœ¬åœ°å­æ¨¡å—é…ç½®æ–‡ä»¶</p><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git submodule <span class="hljs-keyword">init</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>æ›´æ–°é¡¹ç›®ï¼ŒæŠ“å–å­æ¨¡å—å†…å®¹ã€‚</p><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git submodule update</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>è¿›å…¥å¯¹åº”å­æ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œ</p><figure class="highlight brainfuck"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">git</span> <span class="hljs-comment">submodule</span> <span class="hljs-comment">update</span> --<span class="hljs-comment">init</span> --<span class="hljs-comment">recursive</span><br></code></pre></td></tr></tbody></table></figure></li></ol><h3 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h3><p>å¦å¤–ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œ <code>git clone</code> æ—¶åŠ ä¸Š <code>--recursive</code> å‚æ•°ã€‚å®ƒä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°æ¯ä¸€ä¸ªå­æ¨¡å—ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone --recursive https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/example/</span>example.git<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoä¸­å…¬å¼æ˜¾ç¤º</title>
      <link href="/2021/08/05/config/hexo-math-config/"/>
      <url>/2021/08/05/config/hexo-math-config/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å…¬å¼çš„æ˜¾ç¤ºé—®é¢˜ã€‚Hexoä¸­Mathjaxæ˜¯ç”¨äºæ˜¾ç¤ºå…¬å¼çš„æ’ä»¶ï¼Œä½†æ˜¯å¤šè¡Œæ˜¾ç¤ºä¼šå‡ºç°é—®é¢˜ï¼Œæœ‰æ—¶è¿˜ä¼šå‡ºç°ä¹±ç çš„æƒ…å†µã€‚</p></blockquote><h3 id="é…ç½®">é…ç½®</h3><p>åœ¨æ ¹ç›®å½•ä¸‹çš„config_fluid.ymlâ€‹æ–‡ä»¶ä¸­æ‰“å¼€mathçš„ç›¸å…³é…ç½®ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># æ•°å­¦å…¬å¼ï¼Œå¼€å¯ä¹‹å‰éœ€è¦æ›´æ¢ Markdown æ¸²æŸ“å™¨ï¼Œå¦åˆ™å¤æ‚å…¬å¼ä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œå…·ä½“è¯·è§ï¼šhttps://hexo.fluid-dev.com/docs/guide/##latex-æ•°å­¦å…¬å¼</span><br><span class="hljs-comment"># Mathematical formula. If enable, you need to change the Markdown renderer, see: https://hexo.fluid-dev.com/docs/en/guide/#math</span><br><span class="hljs-attr">math:</span><br>  <span class="hljs-comment"># å¼€å¯åæ–‡ç« é»˜è®¤å¯ç”¨ï¼Œè‡ªå®šä¹‰é¡µé¢å¦‚éœ€ä½¿ç”¨ï¼Œéœ€åœ¨ Front-matter ä¸­æŒ‡å®š `math: true`</span><br>  <span class="hljs-comment"># If you want to use math on the custom page, you need to set `math: true` in Front-matter</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># å¼€å¯åï¼Œåªæœ‰åœ¨æ–‡ç«  Front-matter é‡ŒæŒ‡å®š `math: true` æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦</span><br>  <span class="hljs-comment"># If true, only set `math: true` in Front-matter will enable math, to load faster when the page does not contain math</span><br>  <span class="hljs-attr">specific:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># Options: mathjax | katex</span><br>  <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br><br></code></pre></td></tr></tbody></table></figure><h3 id="å‡ºç°çš„é—®é¢˜">å‡ºç°çš„é—®é¢˜</h3><h4 id="é—®é¢˜1">é—®é¢˜1</h4><ul><li>ç”±äºhexoè§£ç æ—¶å…³æ³¨ï¼Œ%% ç­‰è¿ç»­å­—ç¬¦ï¼Œä¼šå°†è¿™éƒ¨åˆ†ä»£ç è§£è¯»ä¸ºå…¶ä»–å¸¦æœ‰ç‰¹æ®Šå«ä¹‰çš„å†…å®¹</li><li>å¦‚æœå…¬å¼ä¸­æ°å·§å‡ºç°äº†æ­¤ç±»å­—ç¬¦ï¼Œä¼šæŠ¥å‡ºä¸Šè¿°é”™è¯¯</li></ul><h4 id="é—®é¢˜2">é—®é¢˜2</h4><ul><li>ç”±äºhexoåœ¨å…¬å¼ä¸­çš„<code>\\</code>é”™ä¼šæˆäº†è½¬ä¹‰ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–åªçœ‹è§äº†ä¸€ä¸ªåæ–œæ ï¼Œä¸ä¼šæ‰§è¡Œæ¢è¡Œå‘½ä»¤ï¼Œå¯¼è‡´å…¬å¼å †æˆä¸€è¡Œ</li></ul><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><h4 id="ä¸´æ—¶æ–¹æ¡ˆ">ä¸´æ—¶æ–¹æ¡ˆ</h4><h5 id="é’ˆå¯¹é—®é¢˜1">é’ˆå¯¹é—®é¢˜1</h5><ul><li>å¯ä»¥åœ¨è¿ç»­çš„ <code>{</code> <code>}</code> <code>%</code>ä¸­é—´æ’å…¥ç©ºæ ¼ï¼Œåˆ†å¼€å°±æ²¡äº‹äº†</li></ul><h5 id="é’ˆå¯¹é—®é¢˜2">é’ˆå¯¹é—®é¢˜2</h5><ul><li>å¯ä»¥å°†<code>\\</code>æ¢æˆ<code>\\\\</code>ï¼Œå¯ä»¥å®ç°å…¬å¼çš„å¤šè¡Œæ­£ç¡®æ˜¾ç¤º</li></ul><h4 id="ç»ˆææ–¹æ¡ˆ">ç»ˆææ–¹æ¡ˆ</h4><ul><li><p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°äº†å¯ä»¥ä¸ºhexoæä¾›æ ‡è®°ï¼Œé˜»æ­¢å…¶æŒ‰ç…§è‡ªå·±çš„è§„åˆ™è§£é‡Šæˆ‘ä»¬çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºå…¶åŸæœ¬çš„å«ä¹‰</p></li><li><p>æ ‡è®°ä¸º</p><figure class="highlight django"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">{% <span class="hljs-name">raw</span> %}</span><span class="xml"></span><br><span class="xml">$$</span><br><span class="xml">...</span><br><span class="xml">$$</span><br><span class="xml"></span><span class="hljs-template-tag">{% <span class="hljs-name">endraw</span> %}</span><br></code></pre></td></tr></tbody></table></figure></li></ul><h3 id="å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½">å¤šè¡Œæ˜¾ç¤ºå’Œå¯¹é½</h3><ul><li><p>é»˜è®¤æ˜¯æ˜¾ç¤ºä¸ºä¸€è¡Œè¦å®ç°å…¬å¼å¤šè¡Œå’Œå¯¹é½å¯ä»¥ä½¿ç”¨{aligned}æ¨¡å¼ï¼Œä½¿ç”¨"&amp;â€œæ¥æ ‡è®°å¯¹é½ä½ç½®ã€‚â€\\"è¡¨ç¤ºæ¢è¡Œ</p>  <figure class="highlight taggerscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">$$<br><span class="hljs-symbol">\b</span>egin{aligned}<br><span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}C<span class="hljs-symbol">\b</span>oldsymbol{x}&amp;=<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\r</span>ight]<span class="hljs-symbol">\b</span>oldsymbol{x} <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\b</span>oldsymbol{x}^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight] <span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft[<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight)<span class="hljs-symbol">\r</span>ight] <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\m</span>athrm{E}<span class="hljs-symbol">\l</span>eft(<span class="hljs-symbol">\l</span>eft<span class="hljs-symbol">\V</span>ert <span class="hljs-symbol">\l</span>eft(X-<span class="hljs-symbol">\m</span>u<span class="hljs-symbol">\r</span>ight)^{<span class="hljs-symbol">\m</span>athrm{T}}<span class="hljs-symbol">\b</span>oldsymbol{x}<span class="hljs-symbol">\r</span>ight<span class="hljs-symbol">\V</span>ert ^{2}<span class="hljs-symbol">\r</span>ight) <br><span class="hljs-symbol">\\</span>&amp;=<span class="hljs-symbol">\s</span>igma_{X}^{2}<br><span class="hljs-symbol">\e</span>nd{aligned}<br>$$<br></code></pre></td></tr></tbody></table></figure></li><li><p>æ˜¾ç¤ºä¸º</p></li></ul>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$]]></content>
      
      
      <categories>
          
          <category> é…ç½® </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> fluid </tag>
            
            <tag> é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›´è§‚ç†è§£åæ–¹å·®çŸ©é˜µ</title>
      <link href="/2021/08/05/math/covariance-matrix/"/>
      <url>/2021/08/05/math/covariance-matrix/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ–‡å‡ºè‡ª <a href="https://zhuanlan.zhihu.com/p/349802953">https://zhuanlan.zhihu.com/p/349802953</a></p></blockquote><h2 id="1-æ¦‚ç‡è®ºä¸­çš„å®šä¹‰">1 æ¦‚ç‡è®ºä¸­çš„å®šä¹‰</h2><h3 id="éšæœºå˜é‡ï¼š">éšæœºå˜é‡ï¼š</h3><p>éšæœºå˜é‡(Random Variable) X æ˜¯ä¸€ä¸ªæ˜ å°„ï¼ŒæŠŠéšæœºè¯•éªŒçš„ç»“æœä¸å®æ•°å»ºç«‹èµ·äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚è€ŒæœŸæœ›ä¸æ–¹å·®æ˜¯éšæœºå˜é‡çš„ä¸¤ä¸ªé‡è¦çš„æ•°å­—ç‰¹å¾ã€‚</p><h3 id="æ•°å­¦æœŸæœ›ï¼š">æ•°å­¦æœŸæœ›ï¼š</h3><p>åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)(æˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›(Expectation, or expected value))æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°ã€‚ æœŸæœ›å€¼æ˜¯è¯¥å˜é‡è¾“å‡ºå€¼çš„å¹³å‡æ•°ã€‚æœŸæœ›å€¼å¹¶ä¸ä¸€å®šåŒ…å«äºå˜é‡çš„è¾“å‡ºå€¼é›†åˆé‡Œã€‚</p><p>å¤§æ•°å®šå¾‹è§„å®šï¼Œéšç€é‡å¤æ¬¡æ•°æ¥è¿‘æ— ç©·å¤§ï¼Œæ•°å€¼çš„ç®—æœ¯å¹³å‡å€¼å‡ ä¹è‚¯å®šåœ°æ”¶æ•›äºæœŸæœ›å€¼ã€‚</p><h3 id="æ–¹å·®ï¼š">æ–¹å·®ï¼š</h3><p>æ–¹å·®(Variance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›(å³å‡å€¼)ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®(æ ·æœ¬æ–¹å·®)æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚</p><p>è®¾$X$ä¸ºéšæœºå˜é‡ï¼Œ å¦‚æœ$\mathrm{E}[X]$ï¼Œåˆ™éšæœºå˜é‡$X$çš„æ–¹å·®ä¸ºï¼š<br>$$<br>\mu=\mathrm{E}[X]<br>$$</p><p>æ–¹å·®ä¹Ÿè®°ä¸º $\sigma_{X}^{2}$ã€‚</p><p>æ ·æœ¬æ–¹å·®è®¡ç®—å…¬å¼ï¼š</p>$$S^{2}=\Sigma\left(X-\overline{X}\right)^{2}/\left(n-1\right)$$<p>å…¶ä¸­ï¼Œ$S^{2}$ä¸ºæ ·æœ¬æ–¹å·®ï¼Œ$X$ ä¸ºå˜é‡ï¼Œ$\overline{X}$ä¸ºæ ·æœ¬å‡å€¼ï¼Œ$n$ ä¸ºæ ·æœ¬ä¾‹æ•°ã€‚å¦‚æœè¦äº†è§£ä¸ºä»€ä¹ˆè¦é™¤ä»¥$n-1$ï¼Œè¯·çœ‹<a href="https://link.zhihu.com/?target=https%3A//www.visiondummy.com/2014/03/divide-variance-n-1/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="æ ‡å‡†å·®ï¼š">æ ‡å‡†å·®ï¼š</h3><p>æ ‡å‡†å·®(Standard Deviation)æ˜¯ç¦»å‡å·®å¹³æ–¹çš„ç®—æœ¯å¹³å‡æ•°(å³ï¼šæ–¹å·®)çš„ç®—æœ¯å¹³æ–¹æ ¹ï¼Œç”¨$\sigma$è¡¨ç¤ºã€‚æ ‡å‡†å·®ä¹Ÿè¢«ç§°ä¸ºæ ‡å‡†åå·®ï¼Œæˆ–è€…å®éªŒæ ‡å‡†å·®ï¼Œåœ¨æ¦‚ç‡ç»Ÿè®¡ä¸­æœ€å¸¸ä½¿ç”¨ä½œä¸ºç»Ÿè®¡åˆ†å¸ƒç¨‹åº¦ä¸Šçš„æµ‹é‡ä¾æ®ã€‚ è§ä¸‹å›¾ï¼š</p><p><img src="https://picture.mulindya.com/covariance-matrix-pic1.jpg" alt=""></p><p>æ ‡å‡†å·®æ˜¯æ–¹å·®çš„ç®—æœ¯å¹³æ–¹æ ¹ã€‚æ ‡å‡†å·®èƒ½åæ˜ ä¸€ä¸ªæ•°æ®é›†çš„ç¦»æ•£ç¨‹åº¦ã€‚å¹³å‡æ•°ç›¸åŒçš„ä¸¤ç»„æ•°æ®ï¼Œæ ‡å‡†å·®æœªå¿…ç›¸åŒã€‚</p><h3 id="åæ–¹å·®ï¼š">åæ–¹å·®ï¼š</h3><p><strong>åæ–¹å·®(Covariance)åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ç”¨äºè¡¡é‡ä¸¤ä¸ªå˜é‡çš„æ€»ä½“è¯¯å·®ã€‚è€Œæ–¹å·®æ˜¯åæ–¹å·®çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå³å½“ä¸¤ä¸ªå˜é‡æ˜¯ç›¸åŒçš„æƒ…å†µã€‚</strong></p><p>æœŸæœ›å€¼åˆ†åˆ«ä¸º$ E[X]$ä¸$[Y]$çš„ä¸¤ä¸ªå®éšæœºå˜é‡$X$ä¸$Y$ä¹‹é—´çš„åæ–¹å·® $\mathrm{Cov}(X,Y)$ å®šä¹‰ä¸ºï¼š</p>$$\begin{aligned}\mathrm{Cov}(X,Y)&amp;=\mathrm{E}\left[\left(X\mathrm{E}\left[X\right]\right)\left(Y-\mathrm{E}\left[Y\right]\right)\right]  \\&amp;=\mathrm{E}\left[XY\right]-2\mathrm{E}\left[Y\right]\mathrm{E}\left[X\right]+\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right] \\&amp;=\mathrm{E}\left[XY\right]-\mathrm{E}\left[X\right]\mathrm{E}\left[Y\right]\end{aligned}$$<p>åæ–¹å·®è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªå˜é‡æ€»ä½“è¯¯å·®çš„æœŸæœ›ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯æ­£å€¼ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ç›¸åï¼Œå³å…¶ä¸­ä¸€ä¸ªå¤§äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œå¦å¤–ä¸€ä¸ªå´å°äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯è´Ÿå€¼ã€‚</p><p>å¦‚æœ$X$ä¸$Y$æ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆäºŒè€…ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯0ï¼Œå› ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„éšæœºå˜é‡æ»¡è¶³$\mathrm{E}[XY]=\mathrm{E}[X]\mathrm{E}[Y]$ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å¹¶ä¸æˆç«‹ã€‚å³å¦‚æœ$X$ä¸$Y$çš„åæ–¹å·®ä¸º0ï¼ŒäºŒè€…å¹¶ä¸ä¸€å®šæ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ã€‚</p><p><strong>åæ–¹å·®ä¸º0çš„ä¸¤ä¸ªéšæœºå˜é‡ç§°ä¸ºæ˜¯ä¸ç›¸å…³çš„ã€‚</strong></p><h3 id="åæ–¹å·®çŸ©é˜µï¼š">åæ–¹å·®çŸ©é˜µï¼š</h3><p>åœ¨ç»Ÿè®¡å­¦ä¸æ¦‚ç‡è®ºä¸­ï¼Œåæ–¹å·®çŸ©é˜µ(Covariance matrix)çš„æ¯ä¸ªå…ƒç´ æ˜¯å„ä¸ªå‘é‡å…ƒç´ ä¹‹é—´çš„åæ–¹å·®ï¼Œæ˜¯ä»æ ‡é‡éšæœºå˜é‡åˆ°é«˜ç»´åº¦éšæœºå‘é‡çš„è‡ªç„¶æ¨å¹¿ã€‚</p><p>è®¾$X=\left(X_{1},X_{2},\ldots,X_{n}\right)^{\mathrm{T}}$ä¸º$n$ ç»´éšæœºå˜é‡ï¼Œç§°çŸ©é˜µ</p>$$C=\left(\begin{array}{cccc} c_{11} &amp; c_{12} &amp; \cdots &amp; c_{1n}\\ c_{21} &amp; c_{22} &amp; \cdots &amp; c_{2n}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ c_{n1} &amp; c_{n2} &amp; \cdots &amp; c_{nn} \end{array}\right)$$<p>ä¸º n ç»´éšæœºå˜é‡xçš„åæ–¹å·®çŸ©é˜µï¼Œä¹Ÿè®°ä¸º $D\left(X\right)$ ï¼Œå…¶ä¸­<br>$$<br>c_{ij}=\mathrm{Cov}(X_{i},X_{j}),\quad i,j=1,2,\ldots,n<br>$$<br>ä¸ºXçš„åˆ†é‡$X_{i}$å’Œ$X_{j}$çš„åæ–¹å·®ã€‚<em>å¹¶ä¸”å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä¸ºå„ä¸ªéšæœºå˜é‡çš„æ–¹å·®ï¼š</em></p><p>$$<br>c_{ii}=\mathrm{Cov}(X_{i},X_{i}),\quad i=1,2,\ldots,n<br>$$</p><p>åæ–¹å·®çŸ©é˜µæ˜¯å¯¹ç§°åŠæ­£å®šçŸ©é˜µã€‚åæ–¹å·®çŸ©é˜µçš„å¯¹ç§°æ€§ï¼Œå¯ä»å®šä¹‰å¾—çŸ¥ã€‚å¯¹äºåŠæ­£å®šç‰¹æ€§ï¼Œè¯æ˜å¦‚ä¸‹ï¼š</p><p>ç°ç»™å®šä»»æ„ä¸€ä¸ªéé›¶å‘é‡$\boldsymbol{x}$ï¼Œåˆ™</p>$$\begin{aligned}\boldsymbol{x}^{\mathrm{T}}C\boldsymbol{x}&amp;=\boldsymbol{x}^{\mathrm{T}}\mathrm{E}\left[\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\right]\boldsymbol{x} \\&amp;=\mathrm{E}\left[\boldsymbol{x}^{\mathrm{T}}\left(X-\mu\right)\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right] \\&amp;=\mathrm{E}\left[\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)^{\mathrm{T}}\left(\left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right)\right] \\&amp;=\mathrm{E}\left(\left\Vert \left(X-\mu\right)^{\mathrm{T}}\boldsymbol{x}\right\Vert ^{2}\right) \\&amp;=\sigma_{X}^{2}\end{aligned}$$<p>å…¶ä¸­ï¼Œ<br>$$<br>\sigma_{X}=\left(X-\mu \right)^{\mathrm{T}}\boldsymbol{x}<br>$$<br>ç”±äº $\sigma_{X}<sup>{2}\geq0$ï¼Œå› æ­¤$\boldsymbol{x}</sup>{\mathrm{T}}C\boldsymbol{x}\geq0$ï¼Œå› æ­¤åæ–¹å·®çŸ©é˜µ$C$ æ˜¯åŠæ­£å®šçŸ©é˜µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> æ¦‚ç‡è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> æ¦‚ç‡è®º </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
